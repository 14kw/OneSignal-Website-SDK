{"version":3,"sources":["webpack:///OneSignalSDK.js","webpack:///webpack/bootstrap 195fe19b7562993c386a","webpack:///C:/Users/Josh/Documents/GameThrive/OneSignalPublicRepos/OneSignal-Website-SDK/src/entry.js","webpack:///./src/sdk.js","webpack:///C:/Users/Josh/Documents/GameThrive/OneSignalPublicRepos/OneSignal-Website-SDK/src/sdk.js","webpack:///./~/whatwg-fetch/fetch.js","webpack:///C:/Users/Josh/Documents/GameThrive/OneSignalPublicRepos/OneSignal-Website-SDK/src/vars.js","webpack:///C:/Users/Josh/Documents/GameThrive/OneSignalPublicRepos/OneSignal-Website-SDK/src/utils.js","webpack:///C:/Users/Josh/Documents/GameThrive/OneSignalPublicRepos/OneSignal-Website-SDK/src/api.js","webpack:///./~/loglevel/lib/loglevel.js","webpack:///C:/Users/Josh/Documents/GameThrive/OneSignalPublicRepos/OneSignal-Website-SDK/src/limitStore.js","webpack:///C:/Users/Josh/Documents/GameThrive/OneSignalPublicRepos/OneSignal-Website-SDK/src/events.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","OneSignal","predefinedOneSignalPushes","_process_pushes","global","this","fetch","_interopRequireDefault","obj","__esModule","default","_vars","_api","_loglevel","_loglevel2","_limitStore","_limitStore2","_VERSION","_HOST_URL","HOST_URL","_app_id","_tagsToSendOnRegister","_notificationOpened_callback","_idsAvailable_callback","_defaultLaunchURL","_initOptions","_httpRegistration","_main_page_port","_isNotificationEnabledCallback","_subscriptionSet","_initOneSignalHttp","_sessionIframeAdded","_useHttpMode","_windowWidth","_windowHeight","_isNewVisitor","LOGGING","SERVICE_WORKER_UPDATER_PATH","SERVICE_WORKER_PATH","SERVICE_WORKER_PARAM","_ensureDbInstance","Promise","resolve","reject","_oneSignal_db","request","indexedDB","open","onsuccess","event","database","target","result","onerror","error","onupgradeneeded","debug","db","createObjectStore","keyPath","_getDbValue","table","key","then","transaction","objectStore","get","_triggerEvent_dbValueRetrieved","errorCode","e","_getDbValues","jsonResult","cursor","openCursor","value","_putDbValue","put","_triggerEvent_dbValueSet","_deleteDbValue","_sendToOneSignalApi","url","action","inData","callback","failedCallback","contents","method","headers","Content-type","body","JSON","stringify","status","response","Error","statusText","json","jsonData","_getLanguage","navigator","language","length","substring","_getPlayerId","_getPlayerId_gotUserId","_getBrowserName","appVersion","match","userAgent","_registerWithOneSignal","appId","registrationId","deviceType","_registerWithOneSignal_GotUserId","userIdResult","_getNotificationTypes","notif_types","requestUrl","app_id","device_type","timezone","Date","getTimezoneOffset","device_model","platform","device_os","sdk","notification_types","identifier","type","registeredCallback","responseJSON","sessionStorage","setItem","_sendUnsentTags","userId","curr_callback","pop","creator","opener","parent","_safePostMessage","idsAvailable","origin","window","close","sendTags","setDefaultNotificationUrl","setDefaultIcon","icon","setDefaultTitle","title","_visibilitychange","document","visibilityState","removeEventListener","_sessionInit","onCustomPromptClicked","detail","_checkTrigger_eventSubscriptionChanged","onNativePromptChanged","_onSubscriptionChanged","welcome_notification_opts","welcome_notification_disabled","undefined","message","sendNotification","en","_onDbValueRetrieved","_onDbValueSet","info","_onInternalSubscriptionSet","newSubscriptionValue","permissions","lastPermission","currentPermission","ids","lastId","currentId","subscriptionStates","lastSubscriptionState","currentSubscriptionState","newSubscriptionState","lastTriggerTimes","now","currentTime","lastTriggerTime","elapsedTimeSeconds","lastEventStates","currentState","lastState","shouldNotTriggerEvent","_triggerEvent_subscriptionChanged","init","options","enableAll","setLevel","isPushNotificationsSupported","warn","_isBrowserFirefox","_getFirefoxVersion","_usingNativePermissionHook","currentNotificationPermission","_getNotificationPermission","query","name","permissionStatus","onchange","recentPermissions","permissionBeforePrompt","_triggerEvent_nativePromptPermissionChanged","storeValue","_getSubscription","currentSubscription","addEventListener","_isSupportedSafari","_supportsDirectPermission","subdomainName","DEV_HOST","s","createElement","setAttribute","head","appendChild","readyState","_internalInit","all","_internalInit_GotAppRegistrationSubscriptionIds","appIdResult","registrationIdResult","subscriptionResult","removeItem","getItem","Notification","permission","autoRegister","registerForPushNotifications","fromRegisterFor","_initHttp","continuePressed","setSubscription","isIframe","messageChannel","MessageChannel","port1","onmessage","data","initOptions","defaultUrl","defaultTitle","defaultIcon","parent_url","registerForPushNotifications_GotNotificationOpened","notificationOpenedResult","openedNotification","getNotificationPermission","_getSubdomainState","curState","setSubdomainState","oneSignalInitPageReady","port2","_initSaveState","location","search","indexOf","player_id","serviceWorker","register","_enableNotifications","_registerError","state","notifPermssion","subscriptionSet","isPushEnabled","protocol","host","hostPageProtocol","dualScreenLeft","screenLeft","screen","left","dualScreenTop","screenTop","top","thisWidth","innerWidth","documentElement","clientWidth","width","thisHeight","innerHeight","clientHeight","height","childWidth","childHeight","message_localization_opts","message_localization_opts_str","message_localization_params","i","encoded_value","encodeURIComponent","childWindow","focus","_addSessionIframe","safari_web_id","notificationPermissionBeforeRequest","safari","pushNotification","requestPermission","notificationPermissionAfterRequest","deviceToken","toLowerCase","modalPrompt","isPushNotificationsEnabled","pushEnabled","element","innerHTML","iframeStyle","getElementsByTagName","iframeNode","className","style","cssText","src","toString","getElementById","_registerForW3CPush","_triggerEvent","_registerForW3CPush_GotRegistrationId","getRegistration","serviceWorkerRegistration","sw_path","path","_registerServiceWorker","active","scriptURL","versionResult","installing","full_sw_and_path","node","display","err","existingServiceWorkerRegistration","ServiceWorkerRegistration","prototype","ready","_subscribeForPush","safariWebId","eventName","CustomEvent","bubbles","cancelable","details","dispatchEvent","_triggerEvent_customPromptClicked","clickResult","from","to","_triggerEvent_internalSubscriptionSet","pushManager","subscribe","userVisibleOnly","subscription","_subscribeForPush_GotAppId","subscriptionId","endpoint","replace","RegExp","_isSupportedFireFox","code","sendTag","jsonKeyValue","jsonPair","sendTags_GotUserId","tags","resultObj","_obj","deleteTag","deleteTags","keyArray","_handleNotificationOpened","notificationData","parse","notification","tag","_handleNotificationOpened_GotAppUserIds","results","opened","waitUntil","clients","matchAll","clientList","launchURL","registration","scope","client","postMessage","openWindow","_getTitle","incomingTitle","_getTitle_GotDefaultPageTitles","defaultTitleResult","pageTitleResult","_handleGCMMessage","text","_handleGCMMessage_GotDefaultIcon","defaultIconResult","_getLastNotifications","custom","alert","additionalData","a","u","showNotification","defaultUrlResult","itemCallback","completeCallback","_getLastNotifications_GotUserId","_listener_receiveMessage","receiveMessage","URL","ports","eventData","_iframePort","_fireNotificationEnabledCallback","httpsPromptAccepted","elem","parentNode","removeChild","httpsPromptCanceled","httpPromptAccepted","httpPromptCanceled","addListenerForNotificationOpened","getIdsAvailable","push","getIdsAvailable_GotUserRegistrationIds","getTags","_isBrowserSafari","safariVersion","test","parseInt","fireFoxVersion","chromeVersion","db_subscriptionSet","newSubscription","setSubscriptionSetCallback","targetOrigin","receiver","tOrigin","startsWith","queryDict","substr","split","forEach","item","validPreURLRegex","array","functionName","shift","apply","importScripts","self","isSWonSubdomain","href","pathname","caches","cache","addAll","respondWith","normalizeName","String","TypeError","normalizeValue","Headers","map","append","Object","getOwnPropertyNames","consumed","bodyUsed","fileReaderReady","reader","onload","readBlobAsArrayBuffer","blob","FileReader","readAsArrayBuffer","readBlobAsText","readAsText","Body","_initBody","_bodyInit","_bodyText","support","Blob","isPrototypeOf","_bodyBlob","formData","FormData","_bodyFormData","arrayBuffer","ArrayBuffer","rejected","decode","normalizeMethod","upcased","toUpperCase","methods","Request","input","credentials","mode","referrer","form","trim","bytes","join","decodeURIComponent","xhr","pairs","getAllResponseHeaders","header","Response","bodyInit","ok","list","values","getAll","has","hasOwnProperty","set","thisArg","clone","redirectStatuses","redirect","RangeError","responseURL","getResponseHeader","XMLHttpRequest","responseText","withCredentials","responseType","setRequestHeader","send","polyfill","defineProperty","PROD_HOST","_utils","isDev","getHumanizedTimeDuration","timeDurationInMilliseconds","addPluralSuffix","number","duration","Math","floor","years","days","hours","minutes","seconds","isServiceWorkerContext","apiCall","playerIds","titles","params","headings","include_player_ids","isAnyWeb","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_RESULT__","root","definition","log","realMethod","methodName","console","undefinedType","bindMethod","noop","bind","Function","arguments","enableLoggingWhenConsoleArrives","level","loggerName","replaceLoggingMethods","logMethods","methodFactory","defaultMethodFactory","Logger","defaultLevel","factory","persistLevelIfPossible","levelNum","levelName","localStorage","storageKey","ignore","cookie","getPersistedLevel","storedLevel","exec","slice","levels","currentLevel","TRACE","DEBUG","INFO","WARN","ERROR","SILENT","getLevel","persist","setDefaultLevel","disableAll","initialLevel","defaultLogger","_loggersByName","getLogger","logger","_log","noConflict","LimitStore","store","LIMIT","evt","createEvent","initCustomEvent","Event"],"mappings":"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","file":"OneSignalSDK.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tif (typeof OneSignal !== \"undefined\") var predefinedOneSignalPushes = OneSignal;\n\t\n\t__webpack_require__(1);\n\t\n\tif (predefinedOneSignalPushes) OneSignal._process_pushes(predefinedOneSignalPushes);\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {module.exports = global[\"OneSignal\"] = __webpack_require__(2);\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(fetch) {'use strict';\n\t\n\tvar _vars = __webpack_require__(4);\n\t\n\tvar _api = __webpack_require__(6);\n\t\n\tvar _loglevel = __webpack_require__(7);\n\t\n\tvar _loglevel2 = _interopRequireDefault(_loglevel);\n\t\n\tvar _limitStore = __webpack_require__(8);\n\t\n\tvar _limitStore2 = _interopRequireDefault(_limitStore);\n\t\n\t__webpack_require__(9);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar OneSignal = {\n\t  _VERSION: 109013,\n\t  _HOST_URL: _vars.HOST_URL,\n\t  _app_id: null,\n\t  _tagsToSendOnRegister: null,\n\t  _notificationOpened_callback: null,\n\t  _idsAvailable_callback: [],\n\t  _defaultLaunchURL: null,\n\t  _initOptions: null,\n\t  _httpRegistration: false,\n\t  _main_page_port: null,\n\t  _isNotificationEnabledCallback: null,\n\t  _subscriptionSet: true,\n\t  _initOneSignalHttp: null,\n\t  _sessionIframeAdded: false,\n\t  _useHttpMode: null,\n\t  _windowWidth: 550,\n\t  _windowHeight: 480,\n\t  _isNewVisitor: false,\n\t  LOGGING: false,\n\t  SERVICE_WORKER_UPDATER_PATH: \"OneSignalSDKUpdaterWorker.js\",\n\t  SERVICE_WORKER_PATH: \"OneSignalSDKWorker.js\",\n\t  SERVICE_WORKER_PARAM: {},\n\t\n\t  _ensureDbInstance: function _ensureDbInstance() {\n\t    return new Promise(function (resolve, reject) {\n\t      if (OneSignal._oneSignal_db) {\n\t        resolve(OneSignal._oneSignal_db);\n\t      } else {\n\t        var request = indexedDB.open(\"ONE_SIGNAL_SDK_DB\", 1);\n\t        request.onsuccess = function (event) {\n\t          var database = event.target.result;\n\t          OneSignal._oneSignal_db = database;\n\t          resolve(database);\n\t        };\n\t        request.onerror = function (event) {\n\t          _loglevel2.default.error('Unable to open IndexedDB.', event);\n\t          reject(event);\n\t        };\n\t\n\t        request.onupgradeneeded = function (event) {\n\t          _loglevel2.default.debug('Rebuilding schema in IndexedDB...');\n\t          var db = event.target.result;\n\t          db.createObjectStore(\"Ids\", { keyPath: \"type\" });\n\t          db.createObjectStore(\"NotificationOpened\", { keyPath: \"url\" });\n\t          db.createObjectStore(\"Options\", { keyPath: \"key\" });\n\t        };\n\t      }\n\t    });\n\t  },\n\t\n\t  _getDbValue: function _getDbValue(table, key) {\n\t    return new Promise(function (resolve, reject) {\n\t      OneSignal._ensureDbInstance().then(function (database) {\n\t        var request = database.transaction(table).objectStore(table).get(key);\n\t        request.onsuccess = function (event) {\n\t          if (request.result) OneSignal._triggerEvent_dbValueRetrieved(request.result);\n\t          resolve(request.result);\n\t        };\n\t        request.onerror = function (event) {\n\t          reject(request.errorCode);\n\t        };\n\t      }).catch(function (e) {\n\t        _loglevel2.default.error(e);\n\t      });\n\t      ;\n\t    });\n\t  },\n\t\n\t  _getDbValues: function _getDbValues(table) {\n\t    return new Promise(function (resolve, reject) {\n\t      OneSignal._ensureDbInstance().then(function (database) {\n\t        var jsonResult = {};\n\t        var cursor = database.transaction(table).objectStore(table).openCursor();\n\t        cursor.onsuccess = function (event) {\n\t          var cursor = event.target.result;\n\t          if (cursor) {\n\t            OneSignal._triggerEvent_dbValueRetrieved(cursor);\n\t            jsonResult[cursor.key] = cursor.value.value;\n\t            cursor.continue();\n\t          } else resolve(jsonResult);\n\t        };\n\t        cursor.onerror = function (event) {\n\t          reject(cursor.errorCode);\n\t        };\n\t      }).catch(function (e) {\n\t        _loglevel2.default.error(e);\n\t      });\n\t    });\n\t  },\n\t\n\t  _putDbValue: function _putDbValue(table, value) {\n\t    return new Promise(function (resolve, reject) {\n\t      OneSignal._ensureDbInstance().then(function (database) {\n\t        database.transaction([table], \"readwrite\").objectStore(table).put(value);\n\t        OneSignal._triggerEvent_dbValueSet(value);\n\t        resolve(value);\n\t      }).catch(function (e) {\n\t        _loglevel2.default.error(e);\n\t      });\n\t    });\n\t  },\n\t\n\t  _deleteDbValue: function _deleteDbValue(table, key) {\n\t    return new Promise(function (resolve, reject) {\n\t      OneSignal._ensureDbInstance().then(function (database) {\n\t        database.transaction([table], \"readwrite\").objectStore(table).delete(key);\n\t        resolve(key);\n\t      }).catch(function (e) {\n\t        _loglevel2.default.error(e);\n\t      });\n\t      ;\n\t    });\n\t  },\n\t\n\t  _sendToOneSignalApi: function _sendToOneSignalApi(url, action, inData, callback, failedCallback) {\n\t    _loglevel2.default.debug('Calling ' + action + ' ' + (OneSignal._HOST_URL + url) + ' with data:', inData);\n\t    var contents = {\n\t      method: action\n\t    };\n\t\n\t    //mode: 'no-cors', // no-cors is disabled for non-serviceworker.\n\t    if (inData) {\n\t      contents.headers = { \"Content-type\": \"application/json;charset=UTF-8\" };\n\t      contents.body = JSON.stringify(inData);\n\t    }\n\t\n\t    fetch(OneSignal._HOST_URL + url, contents).then(function status(response) {\n\t      if (response.status >= 200 && response.status < 300) return Promise.resolve(response);else return Promise.reject(new Error(response.statusText));\n\t    }).then(function status(response) {\n\t      return response.json();\n\t    }).then(function (jsonData) {\n\t      if (callback != null) callback(jsonData);\n\t    }).catch(function (e) {\n\t      _loglevel2.default.error('OneSignal._sendToOneSignalApi() failed:', e);\n\t      if (failedCallback != null) failedCallback();\n\t    });\n\t  },\n\t\n\t  _getLanguage: function _getLanguage() {\n\t    return navigator.language ? navigator.language.length > 3 ? navigator.language.substring(0, 2) : navigator.language : 'en';\n\t  },\n\t\n\t  _getPlayerId: function _getPlayerId(value, callback) {\n\t    if (value) callback(value);else {\n\t      OneSignal._getDbValue('Ids', 'userId').then(function _getPlayerId_gotUserId(result) {\n\t        if (result) callback(result.id);else callback(null);\n\t      }).catch(function (e) {\n\t        _loglevel2.default.error(e);\n\t      });\n\t      ;\n\t    }\n\t  },\n\t\n\t  _getBrowserName: function _getBrowserName() {\n\t    if (navigator.appVersion.match(/Chrome\\/(.*?) /)) return \"Chrome\";\n\t    if (navigator.appVersion.match(\"Version/(.*) (Safari)\")) return \"Safari\";\n\t    if (navigator.userAgent.match(/Firefox\\/([0-9]{2,}\\.[0-9]{1,})/)) return \"Firefox\";\n\t\n\t    return \"\";\n\t  },\n\t\n\t  _registerWithOneSignal: function _registerWithOneSignal(appId, registrationId, deviceType) {\n\t\n\t    OneSignal._getDbValue('Ids', 'userId').then(function _registerWithOneSignal_GotUserId(userIdResult) {\n\t      OneSignal._getNotificationTypes(function (notif_types) {\n\t        var requestUrl = 'players';\n\t\n\t        var jsonData = {\n\t          app_id: appId,\n\t          device_type: deviceType,\n\t          language: OneSignal._getLanguage(),\n\t          timezone: new Date().getTimezoneOffset() * -60,\n\t          device_model: navigator.platform + \" \" + OneSignal._getBrowserName(),\n\t          device_os: (navigator.appVersion.match(/Chrome\\/(.*?) /) || navigator.appVersion.match(\"Version/(.*) Safari\") || navigator.userAgent.match(/Firefox\\/([0-9]{2,}\\.[0-9]{1,})/))[1],\n\t          sdk: OneSignal._VERSION\n\t        };\n\t\n\t        if (userIdResult) {\n\t          requestUrl = 'players/' + userIdResult.id + '/on_session';\n\t          jsonData.notification_types = notif_types;\n\t        } else if (notif_types != 1) jsonData.notification_types = notif_types;\n\t\n\t        if (registrationId) {\n\t          jsonData.identifier = registrationId;\n\t          OneSignal._putDbValue(\"Ids\", { type: \"registrationId\", id: registrationId });\n\t        }\n\t\n\t        OneSignal._sendToOneSignalApi(requestUrl, 'POST', jsonData, function registeredCallback(responseJSON) {\n\t          sessionStorage.setItem(\"ONE_SIGNAL_SESSION\", true);\n\t\n\t          if (responseJSON.id) {\n\t            OneSignal._putDbValue(\"Ids\", { type: \"userId\", id: responseJSON.id });\n\t            OneSignal._sendUnsentTags();\n\t          }\n\t\n\t          OneSignal._getPlayerId(responseJSON.id, function (userId) {\n\t            if (OneSignal._idsAvailable_callback.length > 0) {\n\t              while (OneSignal._idsAvailable_callback.length > 0) {\n\t                var curr_callback = OneSignal._idsAvailable_callback.pop();\n\t                curr_callback({ userId: userId, registrationId: registrationId });\n\t              }\n\t            }\n\t\n\t            if (OneSignal._httpRegistration) {\n\t              _loglevel2.default.debug(\"Sending player Id and registrationId back to host page\");\n\t              _loglevel2.default.debug(OneSignal._initOptions);\n\t              var creator = opener || parent;\n\t              OneSignal._safePostMessage(creator, {\n\t                idsAvailable: {\n\t                  userId: userId,\n\t                  registrationId: registrationId\n\t                }\n\t              }, OneSignal._initOptions.origin, null);\n\t\n\t              if (opener) window.close();\n\t            }\n\t          });\n\t        });\n\t      });\n\t    }).catch(function (e) {\n\t      _loglevel2.default.error(e);\n\t    });\n\t    ;\n\t  },\n\t\n\t  _sendUnsentTags: function _sendUnsentTags() {\n\t    if (OneSignal._tagsToSendOnRegister) {\n\t      OneSignal.sendTags(OneSignal._tagsToSendOnRegister);\n\t      OneSignal._tagsToSendOnRegister = null;\n\t    }\n\t  },\n\t\n\t  setDefaultNotificationUrl: function setDefaultNotificationUrl(url) {\n\t    OneSignal._putDbValue(\"Options\", { key: \"defaultUrl\", value: url });\n\t  },\n\t\n\t  setDefaultIcon: function setDefaultIcon(icon) {\n\t    OneSignal._putDbValue(\"Options\", { key: \"defaultIcon\", value: icon });\n\t  },\n\t\n\t  setDefaultTitle: function setDefaultTitle(title) {\n\t    OneSignal._putDbValue(\"Options\", { key: \"defaultTitle\", value: title });\n\t  },\n\t\n\t  _visibilitychange: function _visibilitychange() {\n\t    if (document.visibilityState == \"visible\") {\n\t      document.removeEventListener(\"visibilitychange\", OneSignal._visibilitychange);\n\t      OneSignal._sessionInit({});\n\t    }\n\t  },\n\t\n\t  onCustomPromptClicked: function onCustomPromptClicked(event) {\n\t    _loglevel2.default.debug('Event onesignal.prompt.custom.clicked:', event.detail);\n\t    OneSignal._checkTrigger_eventSubscriptionChanged();\n\t  },\n\t\n\t  onNativePromptChanged: function onNativePromptChanged(event) {\n\t    _loglevel2.default.debug('Event onesignal.prompt.native.permissionchanged:', event.detail);\n\t    OneSignal._checkTrigger_eventSubscriptionChanged();\n\t  },\n\t\n\t  _onSubscriptionChanged: function _onSubscriptionChanged(event) {\n\t    _loglevel2.default.debug('Event onesignal.subscription.changed:', event.detail);\n\t    if (OneSignal._isNewVisitor && event.detail === true) {\n\t      OneSignal._getDbValue('Ids', 'userId').then(function (result) {\n\t        var welcome_notification_opts = OneSignal._initOptions['welcomeNotification'];\n\t        var welcome_notification_disabled = welcome_notification_opts !== undefined && welcome_notification_opts['disable'] === true;\n\t        var title = welcome_notification_opts !== undefined && welcome_notification_opts['title'] !== undefined && welcome_notification_opts['title'] !== null ? welcome_notification_opts['title'] : '';\n\t        var message = welcome_notification_opts !== undefined && welcome_notification_opts['message'] !== undefined && welcome_notification_opts['message'] !== null && welcome_notification_opts['message'].length > 0 ? welcome_notification_opts['message'] : 'Thanks for subscribing!';\n\t        if (!welcome_notification_disabled) {\n\t          _loglevel2.default.debug('Because this user is a new site visitor, a welcome notification will be sent.');\n\t          (0, _api.sendNotification)(OneSignal._app_id, [result.id], { 'en': title }, { 'en': message });\n\t          OneSignal._isNewVisitor = false;\n\t        }\n\t      }).catch(function (e) {\n\t        _loglevel2.default.error(e);\n\t      });\n\t    }\n\t  },\n\t\n\t  _onDbValueRetrieved: function _onDbValueRetrieved(event) {\n\t    _loglevel2.default.debug('Event onesignal.db.retrieved:', event.detail);\n\t  },\n\t\n\t  _onDbValueSet: function _onDbValueSet(event) {\n\t    _loglevel2.default.debug('Event onesignal.db.valueset:', event.detail);\n\t    var info = event.detail;\n\t    if (info.type === 'userId') {\n\t      _limitStore2.default.put('db.ids.userId', info.id);\n\t      OneSignal._checkTrigger_eventSubscriptionChanged();\n\t    }\n\t  },\n\t\n\t  _onInternalSubscriptionSet: function _onInternalSubscriptionSet(event) {\n\t    _loglevel2.default.debug('Event onesignal.internal.subscriptionset:', event.detail);\n\t    var newSubscriptionValue = event.detail;\n\t    _limitStore2.default.put('subscription.value', newSubscriptionValue);\n\t    OneSignal._checkTrigger_eventSubscriptionChanged();\n\t  },\n\t\n\t  _checkTrigger_eventSubscriptionChanged: function _checkTrigger_eventSubscriptionChanged() {\n\t    _loglevel2.default.debug('Called _checkTrigger_eventSubscriptionChanged().');\n\t    var permissions = _limitStore2.default.get('notification.permission');\n\t    var lastPermission = permissions[permissions.length - 2];\n\t    var currentPermission = permissions[permissions.length - 1];\n\t\n\t    var ids = _limitStore2.default.get('db.ids.userId');\n\t    var lastId = ids[ids.length - 2];\n\t    var currentId = ids[ids.length - 1];\n\t\n\t    var subscriptionStates = _limitStore2.default.get('subscription.value');\n\t    var lastSubscriptionState = subscriptionStates[subscriptionStates.length - 2];\n\t    var currentSubscriptionState = subscriptionStates[subscriptionStates.length - 1];\n\t\n\t    var newSubscriptionState = 'unchanged';\n\t\n\t    if ((lastPermission === 'default' || lastPermission === 'denied' || lastPermission === null) && currentPermission === 'granted' && currentId !== null && currentSubscriptionState === true || lastSubscriptionState === false && currentSubscriptionState === true && currentId != null && currentPermission === 'granted') {\n\t      newSubscriptionState = true;\n\t    }\n\t\n\t    if (lastPermission !== 'denied' && currentPermission === 'denied' || lastPermission === 'granted' && currentPermission !== 'granted' || lastId !== null && currentId === null || lastSubscriptionState !== false && currentSubscriptionState === false) {\n\t      newSubscriptionState = false;\n\t    }\n\t\n\t    if (newSubscriptionState !== \"unchanged\") {\n\t      var lastTriggerTimes = _limitStore2.default.put('event.subscriptionchanged.lastriggered', Date.now());\n\t      var currentTime = lastTriggerTimes[lastTriggerTimes.length - 1];\n\t      var lastTriggerTime = lastTriggerTimes[lastTriggerTimes.length - 2];\n\t      var elapsedTimeSeconds = (currentTime - lastTriggerTime) / 1000;\n\t\n\t      var lastEventStates = _limitStore2.default.put('event.subscriptionchanged.laststates', newSubscriptionState);\n\t      var currentState = lastEventStates[lastEventStates.length - 1];\n\t      var lastState = lastEventStates[lastEventStates.length - 2];\n\t\n\t      // If event already triggered within the last second, don't re-trigger.\n\t      var shouldNotTriggerEvent = lastTriggerTime != null && elapsedTimeSeconds <= 1 || currentState === lastState;\n\t      if (shouldNotTriggerEvent === false) {\n\t        OneSignal._triggerEvent_subscriptionChanged(newSubscriptionState);\n\t      }\n\t    }\n\t  },\n\t\n\t  init: function init(options) {\n\t    OneSignal._initOptions = options;\n\t\n\t    if (OneSignal.LOGGING) _loglevel2.default.enableAll();else _loglevel2.default.setLevel('error');\n\t\n\t    _loglevel2.default.info('OneSignal Web SDK loaded (version ' + OneSignal._VERSION + ').');\n\t    if (!OneSignal.isPushNotificationsSupported()) {\n\t      _loglevel2.default.warn(\"Your browser does not support push notifications.\");\n\t      return;\n\t    }\n\t\n\t    if (navigator.permissions && !(OneSignal._isBrowserFirefox() && OneSignal._getFirefoxVersion() <= 45)) {\n\t      OneSignal._usingNativePermissionHook = true;\n\t      var currentNotificationPermission = OneSignal._getNotificationPermission();\n\t      _limitStore2.default.put('notification.permission', currentNotificationPermission);\n\t      // If the browser natively supports hooking the subscription prompt permission change event\n\t      //     use it instead of our SDK method\n\t      navigator.permissions.query({ name: 'notifications' }).then(function (permissionStatus) {\n\t        permissionStatus.onchange = function () {\n\t          var recentPermissions = _limitStore2.default.get('notification.permission');\n\t          var permissionBeforePrompt = recentPermissions[0];\n\t          OneSignal._triggerEvent_nativePromptPermissionChanged(permissionBeforePrompt);\n\t        };\n\t      }).catch(function (e) {\n\t        _loglevel2.default.error(e);\n\t      });\n\t    } else {\n\t      var currentNotificationPermission = OneSignal._getNotificationPermission();\n\t      _limitStore2.default.put('notification.permission', currentNotificationPermission);\n\t    }\n\t\n\t    // Store the current value of Ids:registrationId, so that we can see if the value changes in the future\n\t    OneSignal._getDbValue('Ids', 'userId').then(function (result) {\n\t      if (result === undefined) {\n\t        OneSignal._isNewVisitor = true;\n\t      }\n\t      var storeValue = result ? result.id : null;\n\t      _limitStore2.default.put('db.ids.userId', storeValue);\n\t    });\n\t\n\t    // Store the current value of subscription, so that we can see if the value changes in the future\n\t    OneSignal._getSubscription(function (currentSubscription) {\n\t      _limitStore2.default.put('subscription.value', currentSubscription);\n\t    });\n\t\n\t    window.addEventListener('onesignal.prompt.custom.clicked', OneSignal.onCustomPromptClicked);\n\t    window.addEventListener('onesignal.prompt.native.permissionchanged', OneSignal.onNativePromptChanged);\n\t    window.addEventListener('onesignal.subscription.changed', OneSignal._onSubscriptionChanged);\n\t    window.addEventListener('onesignal.db.valueretrieved', OneSignal._onDbValueRetrieved);\n\t    window.addEventListener('onesignal.db.valueset', OneSignal._onDbValueSet);\n\t    window.addEventListener('onesignal.db.valueset', OneSignal._onDbValueSet);\n\t    window.addEventListener('onesignal.internal.subscriptionset', OneSignal._onInternalSubscriptionSet);\n\t\n\t    OneSignal._useHttpMode = !OneSignal._isSupportedSafari() && (!OneSignal._supportsDirectPermission() || OneSignal._initOptions.subdomainName);\n\t\n\t    if (OneSignal._useHttpMode) OneSignal._initOneSignalHttp = 'https://' + OneSignal._initOptions.subdomainName + '.onesignal.com/sdks/initOneSignalHttp';else OneSignal._initOneSignalHttp = 'https://onesignal.com/sdks/initOneSignalHttps';\n\t\n\t    if (false) OneSignal._initOneSignalHttp = _vars.DEV_HOST + '/dev_sdks/initOneSignalHttp';\n\t\n\t    // If Safari - add 'fetch' pollyfill if it isn't already added.\n\t    if (OneSignal._isSupportedSafari() && typeof window.fetch == \"undefined\") {\n\t      var s = document.createElement('script');\n\t      s.setAttribute('src', \"https://cdnjs.cloudflare.com/ajax/libs/fetch/0.9.0/fetch.js\");\n\t      document.head.appendChild(s);\n\t    }\n\t\n\t    if (document.readyState === \"complete\") OneSignal._internalInit();else window.addEventListener('load', OneSignal._internalInit);\n\t  },\n\t\n\t  _internalInit: function _internalInit() {\n\t    Promise.all([OneSignal._getDbValue('Ids', 'appId'), OneSignal._getDbValue('Ids', 'registrationId'), OneSignal._getDbValue('Options', 'subscription')]).then(function _internalInit_GotAppRegistrationSubscriptionIds(result) {\n\t      var appIdResult = result[0];\n\t      var registrationIdResult = result[1];\n\t      var subscriptionResult = result[2];\n\t\n\t      // If AppId changed delete playerId and continue.\n\t      if (appIdResult && appIdResult.id != OneSignal._initOptions.appId) {\n\t        OneSignal._deleteDbValue(\"Ids\", \"userId\");\n\t        sessionStorage.removeItem(\"ONE_SIGNAL_SESSION\");\n\t      }\n\t\n\t      // HTTPS - Only register for push notifications once per session or if the user changes notification permission to Ask or Allow.\n\t      if (sessionStorage.getItem(\"ONE_SIGNAL_SESSION\") && !OneSignal._initOptions.subdomainName && (Notification.permission == \"denied\" || sessionStorage.getItem(\"ONE_SIGNAL_NOTIFICATION_PERMISSION\") == Notification.permission)) return;\n\t\n\t      sessionStorage.setItem(\"ONE_SIGNAL_NOTIFICATION_PERMISSION\", Notification.permission);\n\t\n\t      if (OneSignal._initOptions.autoRegister == false && !registrationIdResult && OneSignal._initOptions.subdomainName == null) return;\n\t\n\t      if (document.visibilityState != \"visible\") {\n\t        document.addEventListener(\"visibilitychange\", OneSignal._visibilitychange);\n\t        return;\n\t      }\n\t\n\t      OneSignal._sessionInit({});\n\t    }).catch(function (e) {\n\t      _loglevel2.default.error(e);\n\t    });\n\t  },\n\t\n\t  registerForPushNotifications: function registerForPushNotifications(options) {\n\t    if (!OneSignal.isPushNotificationsSupported()) {\n\t      _loglevel2.default.warn(\"Your browser does not support push notifications.\");\n\t      return;\n\t    }\n\t    // WARNING: Do NOT add callbacks that have to fire to get from here to window.open in _sessionInit.\n\t    //          Otherwise the pop-up to ask for push permission on HTTP connections will be blocked by Chrome.\n\t    if (!options) options = {};\n\t    options.fromRegisterFor = true;\n\t    OneSignal._sessionInit(options);\n\t  },\n\t\n\t  // Http only - Only called from iframe's init.js\n\t  _initHttp: function _initHttp(options) {\n\t    OneSignal._initOptions = options;\n\t\n\t    if (options.continuePressed) {\n\t      OneSignal.setSubscription(true);\n\t    }\n\t\n\t    var isIframe = parent != null && parent != window;\n\t    var creator = opener || parent;\n\t\n\t    if (!creator) {\n\t      _loglevel2.default.debug(\"ERROR:_initHttp: No opener or parent found!\");\n\t      return;\n\t    }\n\t    // Setting up message channel to receive message from host page.\n\t    var messageChannel = new MessageChannel();\n\t    messageChannel.port1.onmessage = function (event) {\n\t      _loglevel2.default.debug(\"_initHttp.messageChannel.port1.onmessage\", event);\n\t\n\t      if (event.data.initOptions) {\n\t        OneSignal.setDefaultNotificationUrl(event.data.initOptions.defaultUrl);\n\t        OneSignal.setDefaultTitle(event.data.initOptions.defaultTitle);\n\t        if (event.data.initOptions.defaultIcon) OneSignal.setDefaultIcon(event.data.initOptions.defaultIcon);\n\t\n\t        _loglevel2.default.debug(\"document.URL\", event.data.initOptions.parent_url);\n\t        OneSignal._getDbValue(\"NotificationOpened\", event.data.initOptions.parent_url).then(function registerForPushNotifications_GotNotificationOpened(notificationOpenedResult) {\n\t          _loglevel2.default.debug(\"_initHttp NotificationOpened db\", notificationOpenedResult);\n\t          if (notificationOpenedResult) {\n\t            OneSignal._deleteDbValue(\"NotificationOpened\", event.data.initOptions.parent_url);\n\t            _loglevel2.default.debug(\"OneSignal._safePostMessage:targetOrigin:\", OneSignal._initOptions.origin);\n\t\n\t            OneSignal._safePostMessage(creator, { openedNotification: notificationOpenedResult.data }, OneSignal._initOptions.origin, null);\n\t          }\n\t        }).catch(function (e) {\n\t          _loglevel2.default.error(e);\n\t        });\n\t        ;\n\t      } else if (event.data.getNotificationPermission) {\n\t        OneSignal._getSubdomainState(function (curState) {\n\t          OneSignal._safePostMessage(creator, { currentNotificationPermission: curState }, OneSignal._initOptions.origin, null);\n\t        });\n\t      } else if (event.data.setSubdomainState) OneSignal.setSubscription(event.data.setSubdomainState.setSubscription);\n\t    };\n\t\n\t    OneSignal._getSubdomainState(function (curState) {\n\t      curState[\"isIframe\"] = isIframe;\n\t      OneSignal._safePostMessage(creator, { oneSignalInitPageReady: curState }, OneSignal._initOptions.origin, [messageChannel.port2]);\n\t    });\n\t\n\t    OneSignal._initSaveState();\n\t    OneSignal._httpRegistration = true;\n\t    if (location.search.indexOf(\"?session=true\") == 0) return;\n\t\n\t    OneSignal._getPlayerId(null, function (player_id) {\n\t      if (!isIframe || player_id) {\n\t        _loglevel2.default.debug(\"Before navigator.serviceWorker.register\");\n\t        navigator.serviceWorker.register(OneSignal.SERVICE_WORKER_PATH, OneSignal.SERVICE_WORKER_PARAM).then(OneSignal._enableNotifications, OneSignal._registerError);\n\t        _loglevel2.default.debug(\"After navigator.serviceWorker.register\");\n\t      }\n\t    });\n\t  },\n\t\n\t  _getSubdomainState: function _getSubdomainState(callback) {\n\t    var state = {};\n\t\n\t    Promise.all([OneSignal._getDbValue('Ids', 'userId'), OneSignal._getDbValue('Ids', 'registrationId'), OneSignal._getDbValue('Options', 'subscription')]).then(function _internalInit_GotAppRegistrationSubscriptionIds(result) {\n\t      var userIdResult = result[0];\n\t      var registrationIdResult = result[1];\n\t      var subscriptionResult = result[2];\n\t\n\t      callback({\n\t        userId: userIdResult ? userIdResult.id : null,\n\t        registrationId: registrationIdResult ? registrationIdResult.id : null,\n\t        notifPermssion: Notification.permission,\n\t        subscriptionSet: subscriptionResult ? subscriptionResult.value : null,\n\t        isPushEnabled: Notification.permission == \"granted\" && userIdResult && registrationIdResult && (subscriptionResult && subscriptionResult.value || subscriptionResult == null)\n\t      });\n\t    }).catch(function (e) {\n\t      _loglevel2.default.error(e);\n\t    });\n\t    ;\n\t  },\n\t\n\t  _initSaveState: function _initSaveState() {\n\t    OneSignal._app_id = OneSignal._initOptions.appId;\n\t    OneSignal._putDbValue(\"Ids\", { type: \"appId\", id: OneSignal._app_id });\n\t    OneSignal._putDbValue(\"Options\", { key: \"pageTitle\", value: document.title });\n\t  },\n\t\n\t  _supportsDirectPermission: function _supportsDirectPermission() {\n\t    return OneSignal._isSupportedSafari() || location.protocol == 'https:' || location.host.indexOf(\"localhost\") == 0 || location.host.indexOf(\"127.0.0.1\") == 0;\n\t  },\n\t\n\t  _sessionInit: function _sessionInit(options) {\n\t    _loglevel2.default.debug(\"Called OneSignal._sessionInit():\", options);\n\t    OneSignal._initSaveState();\n\t\n\t    var hostPageProtocol = location.origin.match(/^http(s|):\\/\\/(www\\.|)/)[0];\n\t\n\t    // If HTTP or using subdomain mode\n\t    if (OneSignal._useHttpMode) {\n\t      if (options.fromRegisterFor) {\n\t        var dualScreenLeft = window.screenLeft != undefined ? window.screenLeft : screen.left;\n\t        var dualScreenTop = window.screenTop != undefined ? window.screenTop : screen.top;\n\t\n\t        var thisWidth = window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : screen.width;\n\t        var thisHeight = window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : screen.height;\n\t        var childWidth = OneSignal._windowWidth;\n\t        var childHeight = OneSignal._windowHeight;\n\t\n\t        var left = thisWidth / 2 - childWidth / 2 + dualScreenLeft;\n\t        var top = thisHeight / 2 - childHeight / 2 + dualScreenTop;\n\t\n\t        _loglevel2.default.debug('Opening popup window.');\n\t        var message_localization_opts = OneSignal._initOptions['promptOptions'];\n\t        var message_localization_opts_str = '';\n\t        if (message_localization_opts) {\n\t          var message_localization_params = ['actionMessage', 'exampleNotificationTitleDesktop', 'exampleNotificationMessageDesktop', 'exampleNotificationTitleMobile', 'exampleNotificationMessageMobile', 'exampleNotificationCaption', 'acceptButtonText', 'cancelButtonText'];\n\t          for (var i = 0; i < message_localization_params.length; i++) {\n\t            var key = message_localization_params[i];\n\t            var value = message_localization_opts[key];\n\t            var encoded_value = encodeURIComponent(value);\n\t            if (value || value === '') {\n\t              message_localization_opts_str += '&' + key + '=' + encoded_value;\n\t            }\n\t          }\n\t        }\n\t        var childWindow = window.open(OneSignal._initOneSignalHttp + \"?\" + message_localization_opts_str + \"&hostPageProtocol=\" + hostPageProtocol, \"_blank\", 'scrollbars=yes, width=' + childWidth + ', height=' + childHeight + ', top=' + top + ', left=' + left);\n\t\n\t        if (childWindow) childWindow.focus();\n\t      } else {\n\t        _loglevel2.default.debug('Opening iFrame.');\n\t        OneSignal._addSessionIframe(hostPageProtocol);\n\t      }\n\t\n\t      return;\n\t    }\n\t\n\t    if (OneSignal._isSupportedSafari()) {\n\t      if (OneSignal._initOptions.safari_web_id) {\n\t        var notificationPermissionBeforeRequest = OneSignal._getNotificationPermission(OneSignal._initOptions.safari_web_id);\n\t        window.safari.pushNotification.requestPermission(OneSignal._HOST_URL + 'safari', OneSignal._initOptions.safari_web_id, { app_id: OneSignal._app_id }, function (data) {\n\t          _loglevel2.default.debug(data);\n\t          var notificationPermissionAfterRequest = OneSignal._getNotificationPermission(OneSignal._initOptions.safari_web_id);\n\t          if (data.deviceToken) {\n\t            OneSignal._registerWithOneSignal(OneSignal._app_id, data.deviceToken.toLowerCase(), 7);\n\t          } else {\n\t            sessionStorage.setItem(\"ONE_SIGNAL_SESSION\", true);\n\t          }\n\t          OneSignal._triggerEvent_nativePromptPermissionChanged(notificationPermissionBeforeRequest);\n\t        });\n\t      }\n\t    } else if (options.modalPrompt && options.fromRegisterFor) {\n\t      // If HTTPS - Show modal\n\t      if (!OneSignal.isPushNotificationsSupported()) {\n\t        _loglevel2.default.warn('An attempt was made to open the HTTPS modal permission prompt, but push notifications are not supported on this browser. Opening canceled.');\n\t        return;\n\t      }\n\t      OneSignal.isPushNotificationsEnabled(function (pushEnabled) {\n\t        var element = document.createElement('div');\n\t        element.setAttribute('id', 'OneSignal-iframe-modal');\n\t        element.innerHTML = '<div id=\"notif-permission\" style=\"background: rgba(0, 0, 0, 0.7); position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 9000; display: block\"></div>';\n\t        document.body.appendChild(element);\n\t\n\t        var iframeStyle = document.createElement('style');\n\t        iframeStyle.innerHTML = \"@media (max-width: 560px) { .OneSignal-permission-iframe { width: 100%; height: 100%;} }\" + \"@media (min-width: 561px) { .OneSignal-permission-iframe { top: 50%; left: 50%; margin-left: -275px; margin-top: -248px;} }\";\n\t        document.getElementsByTagName('head')[0].appendChild(iframeStyle);\n\t\n\t        var iframeNode = document.createElement(\"iframe\");\n\t        iframeNode.className = \"OneSignal-permission-iframe\";\n\t        iframeNode.style.cssText = \"background: rgba(255, 255, 255, 1); position: fixed;\";\n\t        iframeNode.src = OneSignal._initOneSignalHttp + '?id=' + OneSignal._app_id + '&httpsPrompt=true' + '&pushEnabled=' + pushEnabled + '&permissionBlocked=' + (typeof Notification === \"undefined\" || Notification.permission == \"denied\") + '&hostPageProtocol=' + hostPageProtocol;\n\t        iframeNode.setAttribute('frameborder', '0');\n\t        iframeNode.width = OneSignal._windowWidth.toString();\n\t        iframeNode.height = OneSignal._windowHeight.toString();\n\t\n\t        _loglevel2.default.debug('Opening HTTPS modal prompt.');\n\t        document.getElementById(\"notif-permission\").appendChild(iframeNode);\n\t      });\n\t    } else if ('serviceWorker' in navigator) // If HTTPS - Show native prompt\n\t      OneSignal._registerForW3CPush(options);else _loglevel2.default.debug('Service workers are not supported in this browser.');\n\t\n\t    OneSignal._triggerEvent('onesignal.sdk.initialized', null);\n\t  },\n\t\n\t  _registerForW3CPush: function _registerForW3CPush(options) {\n\t\n\t    OneSignal._getDbValue('Ids', 'registrationId').then(function _registerForW3CPush_GotRegistrationId(registrationIdResult) {\n\t      if (!registrationIdResult || !options.fromRegisterFor || Notification.permission != \"granted\") {\n\t        navigator.serviceWorker.getRegistration().then(function (serviceWorkerRegistration) {\n\t          var sw_path = \"\";\n\t\n\t          if (OneSignal._initOptions.path) sw_path = OneSignal._initOptions.path;\n\t\n\t          if (typeof serviceWorkerRegistration === \"undefined\") // Nothing registered, very first run\n\t            OneSignal._registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_PATH);else {\n\t            if (serviceWorkerRegistration.active) {\n\t              if (serviceWorkerRegistration.active.scriptURL.indexOf(sw_path + OneSignal.SERVICE_WORKER_PATH) > -1) {\n\t\n\t                OneSignal._getDbValue('Ids', 'WORKER1_ONE_SIGNAL_SW_VERSION').then(function (versionResult) {\n\t                  if (versionResult) {\n\t                    if (versionResult.id != OneSignal._VERSION) OneSignal._registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_UPDATER_PATH);else OneSignal._registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_PATH);\n\t                  } else OneSignal._registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_PATH);\n\t                }).catch(function (e) {\n\t                  _loglevel2.default.error(e);\n\t                });\n\t              } else if (serviceWorkerRegistration.active.scriptURL.indexOf(sw_path + OneSignal.SERVICE_WORKER_UPDATER_PATH) > -1) {\n\t\n\t                OneSignal._getDbValue('Ids', 'WORKER2_ONE_SIGNAL_SW_VERSION').then(function (versionResult) {\n\t                  if (versionResult) {\n\t                    if (versionResult.id != OneSignal._VERSION) OneSignal._registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_PATH);else OneSignal._registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_UPDATER_PATH);\n\t                  } else OneSignal._registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_UPDATER_PATH);\n\t                }).catch(function (e) {\n\t                  _loglevel2.default.error(e);\n\t                });\n\t              }\n\t            } else if (serviceWorkerRegistration.installing == null) OneSignal._registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_PATH);\n\t          }\n\t        }).catch(function (e) {\n\t          _loglevel2.default.error(e);\n\t        });\n\t      }\n\t    }).catch(function (e) {\n\t      _loglevel2.default.error(e);\n\t    });\n\t    ;\n\t  },\n\t\n\t  _registerServiceWorker: function _registerServiceWorker(full_sw_and_path) {\n\t    navigator.serviceWorker.register(full_sw_and_path, OneSignal.SERVICE_WORKER_PARAM).then(OneSignal._enableNotifications, OneSignal._registerError);\n\t  },\n\t\n\t  _addSessionIframe: function _addSessionIframe(hostPageProtocol) {\n\t\n\t    var node = document.createElement(\"iframe\");\n\t    node.style.display = \"none\";\n\t    node.src = OneSignal._initOneSignalHttp + \"Iframe\";\n\t    if (sessionStorage.getItem(\"ONE_SIGNAL_SESSION\")) node.src += \"?session=true\" + \"&hostPageProtocol=\" + hostPageProtocol;else node.src += \"?hostPageProtocol=\" + hostPageProtocol;\n\t    document.body.appendChild(node);\n\t    _loglevel2.default.debug('Adding session iFrame.');\n\t\n\t    OneSignal._sessionIframeAdded = true;\n\t  },\n\t\n\t  _registerError: function _registerError(err) {\n\t    _loglevel2.default.debug(\"navigator.serviceWorker.register:ERROR: \" + err);\n\t  },\n\t\n\t  _enableNotifications: function _enableNotifications(existingServiceWorkerRegistration) {\n\t    // is ServiceWorkerRegistration type\n\t    if (existingServiceWorkerRegistration) _loglevel2.default.debug('There is an older ServiceWorker:', existingServiceWorkerRegistration);\n\t    if (!('PushManager' in window)) {\n\t      _loglevel2.default.debug(\"Push messaging is not supported. No PushManager.\");\n\t      sessionStorage.setItem(\"ONE_SIGNAL_SESSION\", true);\n\t      return;\n\t    }\n\t\n\t    if (!('showNotification' in ServiceWorkerRegistration.prototype)) {\n\t      _loglevel2.default.debug(\"Notifications are not supported. showNotification not available in ServiceWorkerRegistration.\");\n\t      sessionStorage.setItem(\"ONE_SIGNAL_SESSION\", true);\n\t      return;\n\t    }\n\t\n\t    if (Notification.permission === 'denied') {\n\t      _loglevel2.default.warn(\"The user has disabled notifications.\");\n\t      return;\n\t    }\n\t\n\t    navigator.serviceWorker.ready.then(function (serviceWorkerRegistration) {\n\t      _loglevel2.default.info('Service worker active:', serviceWorkerRegistration);\n\t\n\t      OneSignal._subscribeForPush(serviceWorkerRegistration);\n\t    }).catch(function (e) {\n\t      _loglevel2.default.error(e);\n\t    });\n\t    ;\n\t  },\n\t\n\t  /*\r\n\t   Returns the current browser-agnostic notification permission as \"default\", \"granted\", \"denied\".\r\n\t   safariWebId: Used only to get the current notification permission state in Safari (required as part of the spec).\r\n\t   */\n\t  _getNotificationPermission: function _getNotificationPermission(safariWebId) {\n\t    if (window.safari) {\n\t      // The user is on Safari\n\t      // A web ID is required to determine the current notificiation permission\n\t      if (safariWebId) {\n\t        return window.safari.pushNotification.permission(safariWebId).permission;\n\t      } else {\n\t        // The user didn't set up Safari web push properly; notifications are unlikely to be enabled\n\t        return \"default\";\n\t      }\n\t    } else {\n\t      // Identical API on Firefox and Chrome\n\t      return Notification.permission;\n\t    }\n\t  },\n\t\n\t  _triggerEvent: function _triggerEvent(eventName, data) {\n\t    if (typeof window === \"undefined\") {\n\t      _loglevel2.default.debug('Skipping triggering of event:', eventName, 'because we are running in a ServiceWorker context.');\n\t      return;\n\t    }\n\t    var event = new CustomEvent(eventName, {\n\t      bubbles: true, cancelable: true, details: data\n\t    });\n\t    window.dispatchEvent(event);\n\t  },\n\t\n\t  _triggerEvent_customPromptClicked: function _triggerEvent_customPromptClicked(clickResult) {\n\t    var recentPermissions = _limitStore2.default.put('notification.permission', clickResult);\n\t    OneSignal._triggerEvent('onesignal.prompt.custom.clicked', {\n\t      result: clickResult\n\t    });\n\t  },\n\t\n\t  _triggerEvent_nativePromptPermissionChanged: function _triggerEvent_nativePromptPermissionChanged(from, to) {\n\t    if (to === undefined) {\n\t      to = OneSignal._getNotificationPermission(OneSignal._initOptions.safari_web_id);\n\t    }\n\t    if (from !== to) {\n\t      var recentPermissions = _limitStore2.default.put('notification.permission', to);\n\t      OneSignal._triggerEvent('onesignal.prompt.native.permissionchanged', {\n\t        from: from,\n\t        to: to\n\t      });\n\t    }\n\t  },\n\t\n\t  _triggerEvent_subscriptionChanged: function _triggerEvent_subscriptionChanged(to) {\n\t    OneSignal._triggerEvent('onesignal.subscription.changed', to);\n\t  },\n\t\n\t  _triggerEvent_dbValueRetrieved: function _triggerEvent_dbValueRetrieved(value) {\n\t    OneSignal._triggerEvent('onesignal.db.valueretrieved', value);\n\t  },\n\t\n\t  _triggerEvent_dbValueSet: function _triggerEvent_dbValueSet(value) {\n\t    OneSignal._triggerEvent('onesignal.db.valueset', value);\n\t  },\n\t\n\t  _triggerEvent_internalSubscriptionSet: function _triggerEvent_internalSubscriptionSet(value) {\n\t    OneSignal._triggerEvent('onesignal.internal.subscriptionset', value);\n\t  },\n\t\n\t  _subscribeForPush: function _subscribeForPush(serviceWorkerRegistration) {\n\t    var notificationPermissionBeforeRequest = OneSignal._getNotificationPermission(OneSignal._initOptions.safari_web_id);\n\t    serviceWorkerRegistration.pushManager.subscribe({ userVisibleOnly: true }).then(function (subscription) {\n\t      sessionStorage.setItem(\"ONE_SIGNAL_NOTIFICATION_PERMISSION\", Notification.permission);\n\t\n\t      OneSignal._getDbValue('Ids', 'appId').then(function _subscribeForPush_GotAppId(appIdResult) {\n\t        var appId = appIdResult.id;\n\t        _loglevel2.default.debug(\"Called OneSignal._subscribeForPush() -> serviceWorkerRegistration.pushManager.subscribe().\");\n\t\n\t        var registrationId = null;\n\t        if (subscription) {\n\t          if (typeof subscription.subscriptionId != \"undefined\") // Chrome 43 & 42\n\t            registrationId = subscription.subscriptionId;else // Chrome 44+ and FireFox\n\t            registrationId = subscription.endpoint.replace(new RegExp(\"^(https://android.googleapis.com/gcm/send/|https://updates.push.services.mozilla.com/push/)\"), \"\");\n\t        } else _loglevel2.default.warn('Could not subscribe your browser for push notifications.');\n\t\n\t        OneSignal._registerWithOneSignal(appId, registrationId, OneSignal._isSupportedFireFox() ? 8 : 5);\n\t\n\t        if (!OneSignal._usingNativePermissionHook) {\n\t          OneSignal._triggerEvent_nativePromptPermissionChanged(notificationPermissionBeforeRequest);\n\t        }\n\t      }).catch(function (e) {\n\t        _loglevel2.default.error(e);\n\t      });\n\t    }).catch(function (e) {\n\t      _loglevel2.default.error('Error while subscribing for push:', e);\n\t\n\t      if (!OneSignal._usingNativePermissionHook) OneSignal._triggerEvent_nativePromptPermissionChanged(notificationPermissionBeforeRequest);\n\t\n\t      if (e.code == 20 && opener && OneSignal._httpRegistration) window.close();\n\t    });\n\t  },\n\t\n\t  sendTag: function sendTag(key, value) {\n\t    var jsonKeyValue = {};\n\t    jsonKeyValue[key] = value;\n\t    OneSignal.sendTags(jsonKeyValue);\n\t  },\n\t\n\t  sendTags: function sendTags(jsonPair) {\n\t    OneSignal._getDbValue('Ids', 'userId').then(function sendTags_GotUserId(userIdResult) {\n\t      if (userIdResult) OneSignal._sendToOneSignalApi(\"players/\" + userIdResult.id, \"PUT\", {\n\t        app_id: OneSignal._app_id,\n\t        tags: jsonPair\n\t      });else {\n\t        if (OneSignal._tagsToSendOnRegister == null) OneSignal._tagsToSendOnRegister = jsonPair;else {\n\t          var resultObj = {};\n\t          for (var _obj in OneSignal._tagsToSendOnRegister) {\n\t            resultObj[_obj] = OneSignal._tagsToSendOnRegister[_obj];\n\t          }for (var _obj in jsonPair) {\n\t            resultObj[_obj] = jsonPair[_obj];\n\t          }OneSignal._tagsToSendOnRegister = resultObj;\n\t        }\n\t      }\n\t    }).catch(function (e) {\n\t      _loglevel2.default.error('sendTags:', e);\n\t    });\n\t  },\n\t\n\t  deleteTag: function deleteTag(key) {\n\t    OneSignal.deleteTags([key]);\n\t  },\n\t\n\t  deleteTags: function deleteTags(keyArray) {\n\t    var jsonPair = {};\n\t    var length = keyArray.length;\n\t    for (var i = 0; i < length; i++) {\n\t      jsonPair[keyArray[i]] = \"\";\n\t    }OneSignal.sendTags(jsonPair);\n\t  },\n\t\n\t  _handleNotificationOpened: function _handleNotificationOpened(event) {\n\t    var notificationData = JSON.parse(event.notification.tag);\n\t    event.notification.close();\n\t\n\t    Promise.all([OneSignal._getDbValue('Ids', 'appId'), OneSignal._getDbValue('Ids', 'userId')]).then(function _handleNotificationOpened_GotAppUserIds(results) {\n\t      var appIdResult = results[0];\n\t      var userIdResult = results[1];\n\t      if (appIdResult && userIdResult) {\n\t        OneSignal._sendToOneSignalApi(\"notifications/\" + notificationData.id, \"PUT\", {\n\t          app_id: appIdResult.id,\n\t          player_id: userIdResult.id,\n\t          opened: true\n\t        });\n\t      }\n\t    }).catch(function (e) {\n\t      _loglevel2.default.error(e);\n\t    });\n\t    ;\n\t\n\t    event.waitUntil(clients.matchAll({ type: \"window\" }).then(function (clientList) {\n\t      var launchURL = registration.scope;\n\t      if (OneSignal._defaultLaunchURL) launchURL = OneSignal._defaultLaunchURL;\n\t      if (notificationData.launchURL) launchURL = notificationData.launchURL;\n\t\n\t      for (var i = 0; i < clientList.length; i++) {\n\t        var client = clientList[i];\n\t        if ('focus' in client && client.url == launchURL) {\n\t          client.focus();\n\t\n\t          // targetOrigin not valid here as the service worker owns the page.\n\t          client.postMessage(notificationData);\n\t          return;\n\t        }\n\t      }\n\t\n\t      if (launchURL !== 'javascript:void(0);' && launchURL !== 'do_not_open') {\n\t        OneSignal._putDbValue(\"NotificationOpened\", { url: launchURL, data: notificationData });\n\t        clients.openWindow(launchURL).catch(function (error) {\n\t          // Should only fall into here if going to an external URL on Chrome older than 43.\n\t          clients.openWindow(registration.scope + \"redirector.html?url=\" + launchURL);\n\t        });\n\t      }\n\t    }).catch(function (e) {\n\t      _loglevel2.default.error(e);\n\t    }));\n\t  },\n\t\n\t  _getTitle: function _getTitle(incomingTitle, callback) {\n\t    if (incomingTitle != null) {\n\t      callback(incomingTitle);\n\t      return;\n\t    }\n\t\n\t    Promise.all([OneSignal._getDbValue('Options', 'defaultTitle'), OneSignal._getDbValue('Options', 'pageTitle')]).then(function _getTitle_GotDefaultPageTitles(results) {\n\t      var defaultTitleResult = results[0];\n\t      var pageTitleResult = results[1];\n\t\n\t      if (defaultTitleResult) {\n\t        callback(defaultTitleResult.value);\n\t        return;\n\t      } else if (pageTitleResult && pageTitleResult.value != null) {\n\t        callback(pageTitleResult.value);\n\t        return;\n\t      } else {\n\t        callback('');\n\t      }\n\t    }).catch(function (e) {\n\t      _loglevel2.default.error(e);\n\t    });\n\t  },\n\t\n\t  // Displays notification from content received from OneSignal.\n\t  // This method is only called by ServiceWorker\n\t  _handleGCMMessage: function _handleGCMMessage(serviceWorker, event) {\n\t    // TODO: Read data from the GCM payload when Chrome no longer requires the below command line parameter.\n\t    // --enable-push-message-payload\n\t    // The command line param is required even on Chrome 43 nightly build 2015/03/17.\n\t    if (event.data && event.data.text()[0] == \"{\") {\n\t      _loglevel2.default.debug('Received data.text: ', event.data.text());\n\t      _loglevel2.default.debug('Received data.json: ', event.data.json());\n\t    }\n\t\n\t    event.waitUntil(new Promise(function (resolve, reject) {\n\t      OneSignal._getTitle(null, function (title) {\n\t        OneSignal._getDbValue('Options', 'defaultIcon').then(function _handleGCMMessage_GotDefaultIcon(defaultIconResult) {\n\t          OneSignal._getLastNotifications(function (response, appId) {\n\t            var notificationData = {\n\t              id: response.custom.i,\n\t              message: response.alert,\n\t              additionalData: response.custom.a\n\t            };\n\t\n\t            if (response.title) notificationData.title = response.title;else notificationData.title = title;\n\t\n\t            if (response.custom.u) notificationData.launchURL = response.custom.u;\n\t\n\t            if (response.icon) notificationData.icon = response.icon;else if (defaultIconResult) notificationData.icon = defaultIconResult.value;\n\t\n\t            // Never nest the following line in a callback from the point of entering from _getLastNotifications\n\t            serviceWorker.registration.showNotification(notificationData.title, {\n\t              body: response.alert,\n\t              icon: notificationData.icon,\n\t              tag: JSON.stringify(notificationData)\n\t            }).then(resolve).catch(function (e) {\n\t              _loglevel2.default.error(e);\n\t            });\n\t\n\t            OneSignal._getDbValue('Options', 'defaultUrl').then(function (defaultUrlResult) {\n\t              if (defaultUrlResult) OneSignal._defaultLaunchURL = defaultUrlResult.value;\n\t            }).catch(function (e) {\n\t              _loglevel2.default.error(e);\n\t            });\n\t            ;\n\t          }, resolve);\n\t        }).catch(function (e) {\n\t          _loglevel2.default.error(e);\n\t        });\n\t      });\n\t    }));\n\t  },\n\t\n\t  _getLastNotifications: function _getLastNotifications(itemCallback, completeCallback) {\n\t    OneSignal._getDbValue('Ids', 'userId').then(function _getLastNotifications_GotUserId(userIdResult) {\n\t      if (userIdResult) {\n\t        OneSignal._sendToOneSignalApi(\"players/\" + userIdResult.id + \"/chromeweb_notification\", \"GET\", null, function (response) {\n\t          for (var i = 0; i < response.length; i++) {\n\t            itemCallback(JSON.parse(response[i]));\n\t          }\n\t        }, function () {\n\t          completeCallback();\n\t        }); // Failed callback\n\t      } else {\n\t          _loglevel2.default.debug(\"Error: could not get notificationId\");\n\t          completeCallback();\n\t        }\n\t    }).catch(function (e) {\n\t      _loglevel2.default.error(e);\n\t    });\n\t    ;\n\t  },\n\t\n\t  // HTTP & HTTPS - Runs on main page\n\t  _listener_receiveMessage: function receiveMessage(event) {\n\t    _loglevel2.default.debug(\"_listener_receiveMessage: \", event);\n\t\n\t    if (OneSignal._initOptions == undefined) return;\n\t\n\t    if (!(false) && event.origin !== \"\" && event.origin !== \"https://onesignal.com\" && event.origin !== \"https://\" + OneSignal._initOptions.subdomainName + \".onesignal.com\") return;\n\t\n\t    if (event.data.oneSignalInitPageReady) {\n\t      // Only called on HTTP pages.\n\t      OneSignal._getDbValues(\"Options\").then(function _listener_receiveMessage(options) {\n\t        _loglevel2.default.debug(\"current options\", options);\n\t        if (!options.defaultUrl) options.defaultUrl = document.URL;\n\t        if (!options.defaultTitle) options.defaultTitle = document.title;\n\t\n\t        options.parent_url = document.URL;\n\t        _loglevel2.default.debug(\"Posting message to port[0]\", event.ports[0]);\n\t        event.ports[0].postMessage({ initOptions: options });\n\t      }).catch(function (e) {\n\t        _loglevel2.default.error('_listener_receiveMessage:', e);\n\t      });\n\t\n\t      var eventData = event.data.oneSignalInitPageReady;\n\t\n\t      if (eventData.isIframe) OneSignal._iframePort = event.ports[0];\n\t\n\t      if (eventData.userId) OneSignal._putDbValue(\"Ids\", { type: \"userId\", id: eventData.userId });\n\t      if (eventData.registrationId) OneSignal._putDbValue(\"Ids\", { type: \"registrationId\", id: eventData.registrationId });\n\t\n\t      OneSignal._fireNotificationEnabledCallback(eventData.isPushEnabled);\n\t      OneSignal._sendUnsentTags();\n\t    } else if (event.data.currentNotificationPermission) // Subdomain Only\n\t      OneSignal._fireNotificationEnabledCallback(event.data.currentNotificationPermission.isPushEnabled);else if (event.data.idsAvailable) {\n\t      // Only called on HTTP pages.\n\t      sessionStorage.setItem(\"ONE_SIGNAL_SESSION\", true);\n\t      OneSignal._putDbValue(\"Ids\", { type: \"userId\", id: event.data.idsAvailable.userId });\n\t      OneSignal._putDbValue(\"Ids\", { type: \"registrationId\", id: event.data.idsAvailable.registrationId });\n\t\n\t      if (OneSignal._idsAvailable_callback.length > 0) {\n\t        while (OneSignal._idsAvailable_callback.length > 0) {\n\t          var curr_callback = OneSignal._idsAvailable_callback.pop();\n\t          curr_callback({\n\t            userId: event.data.idsAvailable.userId,\n\t            registrationId: event.data.idsAvailable.registrationId\n\t          });\n\t        }\n\t      }\n\t      OneSignal._sendUnsentTags();\n\t    } else if (event.data.httpsPromptAccepted) {\n\t      // HTTPS Only\n\t      OneSignal.registerForPushNotifications();\n\t      OneSignal.setSubscription(true);\n\t      var elem = document.getElementById('OneSignal-iframe-modal');\n\t      elem.parentNode.removeChild(elem);\n\t      OneSignal._triggerEvent_customPromptClicked('granted');\n\t    } else if (event.data.httpsPromptCanceled) {\n\t      // HTTPS Only\n\t      var elem = document.getElementById('OneSignal-iframe-modal');\n\t      elem.parentNode.removeChild(elem);\n\t      OneSignal._triggerEvent_customPromptClicked('denied');\n\t    } else if (event.data.httpPromptAccepted) {\n\t      // HTTP Only\n\t      OneSignal._triggerEvent_customPromptClicked('granted');\n\t    } else if (event.data.httpPromptCanceled) {\n\t      // HTTP Only\n\t      OneSignal._triggerEvent_customPromptClicked('denied');\n\t    } else if (OneSignal._notificationOpened_callback) // HTTP and HTTPS\n\t      OneSignal._notificationOpened_callback(event.data);\n\t  },\n\t\n\t  addListenerForNotificationOpened: function addListenerForNotificationOpened(callback) {\n\t    OneSignal._notificationOpened_callback = callback;\n\t    if (window) {\n\t      OneSignal._getDbValue(\"NotificationOpened\", document.URL).then(function (notificationOpenedResult) {\n\t        if (notificationOpenedResult) {\n\t          OneSignal._deleteDbValue(\"NotificationOpened\", document.URL);\n\t          OneSignal._notificationOpened_callback(notificationOpenedResult.data);\n\t        }\n\t      }).catch(function (e) {\n\t        _loglevel2.default.error(e);\n\t      });\n\t      ;\n\t    }\n\t  },\n\t\n\t  // Subdomain - Fired from message received from iframe.\n\t  _fireNotificationEnabledCallback: function _fireNotificationEnabledCallback(notifPermssion) {\n\t    if (OneSignal._isNotificationEnabledCallback) {\n\t      OneSignal._isNotificationEnabledCallback(notifPermssion);\n\t      OneSignal._isNotificationEnabledCallback = null;\n\t    }\n\t  },\n\t\n\t  getIdsAvailable: function getIdsAvailable(callback) {\n\t    if (callback === undefined) return;\n\t\n\t    OneSignal._idsAvailable_callback.push(callback);\n\t\n\t    Promise.all([OneSignal._getDbValue('Ids', 'userId'), OneSignal._getDbValue('Ids', 'registrationId')]).then(function getIdsAvailable_GotUserRegistrationIds(results) {\n\t      var userIdResult = results[0];\n\t      var registrationIdResult = results[1];\n\t\n\t      if (userIdResult) {\n\t        if (registrationIdResult) {\n\t          while (OneSignal._idsAvailable_callback.length > 0) {\n\t            var curr_callback = OneSignal._idsAvailable_callback.pop();\n\t            curr_callback({\n\t              userId: userIdResult.id,\n\t              registrationId: registrationIdResult.id\n\t            });\n\t          }\n\t        } else while (OneSignal._idsAvailable_callback.length > 0) {\n\t          var curr_callback = OneSignal._idsAvailable_callback.pop();\n\t          curr_callback({ userId: userIdResult.id, registrationId: null });\n\t        }\n\t      }\n\t    }).catch(function (e) {\n\t      _loglevel2.default.error(e);\n\t    });\n\t    ;\n\t  },\n\t\n\t  getTags: function getTags(callback) {\n\t    OneSignal._getDbValue('Ids', 'userId').then(function (userIdResult) {\n\t      if (userIdResult) {\n\t        OneSignal._sendToOneSignalApi(\"players/\" + userIdResult.id, 'GET', null, function (response) {\n\t          callback(response.tags);\n\t        });\n\t      }\n\t    }).catch(function (e) {\n\t      _loglevel2.default.error(e);\n\t    });\n\t    ;\n\t  },\n\t\n\t  isPushNotificationsEnabled: function isPushNotificationsEnabled(callback) {\n\t    if (!OneSignal.isPushNotificationsSupported()) {\n\t      _loglevel2.default.warn(\"Your browser does not support push notifications.\");\n\t      return;\n\t    }\n\t\n\t    // If Subdomain\n\t    if (OneSignal._initOptions.subdomainName && !OneSignal._isBrowserSafari()) {\n\t      OneSignal._isNotificationEnabledCallback = callback;\n\t      if (OneSignal._iframePort) OneSignal._iframePort.postMessage({ getNotificationPermission: true });\n\t      return;\n\t    }\n\t\n\t    // If HTTPS\n\t\n\t    Promise.all([OneSignal._getDbValue('Ids', 'registrationId'), OneSignal._getDbValue('Options', 'subscription')]).then(function (results) {\n\t      var registrationIdResult = results[0];\n\t      var subscriptionResult = results[1];\n\t\n\t      if (registrationIdResult) {\n\t        if (subscriptionResult && !subscriptionResult.value) return callback(false);\n\t\n\t        callback(Notification.permission == \"granted\");\n\t      } else callback(false);\n\t    }).catch(function (e) {\n\t      _loglevel2.default.error(e);\n\t    });\n\t  },\n\t\n\t  _isSupportedSafari: function _isSupportedSafari() {\n\t    var safariVersion = navigator.appVersion.match(\"Version/([0-9]?).* Safari\");\n\t    if (safariVersion == null) return false;\n\t    if (/iPhone|iPad|iPod/i.test(navigator.userAgent)) return false;\n\t    return parseInt(safariVersion[1]) > 6;\n\t  },\n\t\n\t  _isBrowserSafari: function _isBrowserSafari() {\n\t    var safariVersion = navigator.appVersion.match(\"Version/([0-9]?).* Safari\");\n\t    return safariVersion != null;\n\t  },\n\t\n\t  _isSupportedFireFox: function _isSupportedFireFox() {\n\t    var fireFoxVersion = navigator.userAgent.match(/(Firefox\\/)([0-9]{2,}\\.[0-9]{1,})/);\n\t    if (fireFoxVersion) return parseInt(fireFoxVersion[2].substring(0, 2)) > 43;\n\t    return false;\n\t  },\n\t\n\t  _isBrowserFirefox: function _isBrowserFirefox() {\n\t    var fireFoxVersion = navigator.userAgent.match(/(Firefox\\/)([0-9]{2,}\\.[0-9]{1,})/);\n\t    return fireFoxVersion != null;\n\t  },\n\t\n\t  _getFirefoxVersion: function _getFirefoxVersion() {\n\t    var fireFoxVersion = navigator.userAgent.match(/(Firefox\\/)([0-9]{2,}\\.[0-9]{1,})/);\n\t    if (fireFoxVersion) return parseInt(fireFoxVersion[2].substring(0, 2));else return -1;\n\t  },\n\t\n\t  isPushNotificationsSupported: function isPushNotificationsSupported() {\n\t    var chromeVersion = navigator.appVersion.match(/Chrome\\/(.*?) /);\n\t\n\t    if (OneSignal._isSupportedFireFox()) return true;\n\t\n\t    if (OneSignal._isSupportedSafari()) return true;\n\t\n\t    // Chrome is not found in appVersion.\n\t    if (!chromeVersion) return false;\n\t\n\t    // Microsoft Edge\n\t    if (navigator.appVersion.match(/Edge/)) return false;\n\t\n\t    // Android Chrome WebView\n\t    if (navigator.appVersion.match(/ wv/)) return false;\n\t\n\t    // Opera\n\t    if (navigator.appVersion.match(/OPR\\//)) return false;\n\t\n\t    // The user is on iOS\n\t    if (/iPad|iPhone|iPod/.test(navigator.platform)) return false;\n\t\n\t    return parseInt(chromeVersion[1].substring(0, 2)) > 41;\n\t  },\n\t\n\t  _getNotificationTypes: function _getNotificationTypes(callback) {\n\t    OneSignal._getSubscription(function (db_subscriptionSet) {\n\t      callback(db_subscriptionSet ? 1 : -2);\n\t    });\n\t  },\n\t\n\t  setSubscription: function setSubscription(newSubscription) {\n\t    if (OneSignal._iframePort) OneSignal._iframePort.postMessage({ setSubdomainState: { setSubscription: newSubscription } });else {\n\t      OneSignal._getSubscription(function (currentSubscription) {\n\t        if (currentSubscription != newSubscription) {\n\t          OneSignal._putDbValue(\"Options\", { key: \"subscription\", value: newSubscription });\n\t          OneSignal._getDbValue('Ids', 'userId').then(function (userIdResult) {\n\t            if (userIdResult) OneSignal._sendToOneSignalApi(\"players/\" + userIdResult.id, \"PUT\", {\n\t              app_id: OneSignal._app_id,\n\t              notification_types: newSubscription ? 1 : -2\n\t            }, function setSubscriptionSetCallback() {\n\t              OneSignal._triggerEvent_internalSubscriptionSet(newSubscription);\n\t            });\n\t          }).catch(function (e) {\n\t            _loglevel2.default.error(e);\n\t          });\n\t        }\n\t      });\n\t    }\n\t  },\n\t\n\t  _getSubscription: function _getSubscription(callback) {\n\t    OneSignal._getDbValue('Options', 'subscription').then(function (subscriptionResult) {\n\t      callback(!(subscriptionResult && subscriptionResult.value == false));\n\t    }).catch(function (e) {\n\t      _loglevel2.default.error(e);\n\t    });\n\t    ;\n\t  },\n\t\n\t  _safePostMessage: function _safePostMessage(creator, data, targetOrigin, receiver) {\n\t    var tOrigin = targetOrigin.toLowerCase();\n\t\n\t    // If we are trying to target a http site allow the https version. (w/ or w/o 'wwww.' too)\n\t    if (tOrigin.startsWith(\"http://\")) {\n\t      var queryDict = {};\n\t      location.search.substr(1).split(\"&\").forEach(function (item) {\n\t        queryDict[item.split(\"=\")[0]] = item.split(\"=\")[1];\n\t      });\n\t      var validPreURLRegex = /^http(s|):\\/\\/(www\\.|)/;\n\t      tOrigin = tOrigin.replace(validPreURLRegex, queryDict[\"hostPageProtocol\"]);\n\t    }\n\t\n\t    if (receiver) creator.postMessage(data, tOrigin, receiver);else creator.postMessage(data, tOrigin);\n\t  },\n\t\n\t  _process_pushes: function _process_pushes(array) {\n\t    for (var i = 0; i < array.length; i++) {\n\t      OneSignal.push(array[i]);\n\t    }\n\t  },\n\t\n\t  push: function push(item) {\n\t    if (typeof item == \"function\") item();else {\n\t      var functionName = item.shift();\n\t      OneSignal[functionName].apply(null, item);\n\t    }\n\t  }\n\t};\n\t\n\t// If imported on your page.\n\tif (typeof window !== \"undefined\") window.addEventListener(\"message\", OneSignal._listener_receiveMessage, false);else {\n\t  // if imported from the service worker.\n\t  importScripts('https://cdn.onesignal.com/sdks/serviceworker-cache-polyfill.js');\n\t\n\t  self.addEventListener('push', function (event) {\n\t    OneSignal._handleGCMMessage(self, event); // Can handle messages from any browser (except Safari), rename method\n\t  });\n\t  self.addEventListener('notificationclick', function (event) {\n\t    // Also only by SW\n\t    OneSignal._handleNotificationOpened(event);\n\t  });\n\t\n\t  var isSWonSubdomain = location.href.match(/https\\:\\/\\/.*\\.onesignal.com\\/sdks\\//) != null;\n\t  if (false) isSWonSubdomain = true;\n\t\n\t  self.addEventListener('install', function (event) {\n\t    _loglevel2.default.debug(\"OneSignal Installed service worker \" + self.location.pathname + \":\" + OneSignal._VERSION);\n\t    if (self.location.pathname.indexOf(\"OneSignalSDKWorker.js\") > -1) OneSignal._putDbValue(\"Ids\", { type: \"WORKER1_ONE_SIGNAL_SW_VERSION\", id: OneSignal._VERSION });else OneSignal._putDbValue(\"Ids\", { type: \"WORKER2_ONE_SIGNAL_SW_VERSION\", id: OneSignal._VERSION });\n\t\n\t    if (isSWonSubdomain) {\n\t      event.waitUntil(caches.open(\"OneSignal_\" + OneSignal._VERSION).then(function (cache) {\n\t        return cache.addAll(['/sdks/initOneSignalHttpIframe', '/sdks/initOneSignalHttpIframe?session=*', '/sdks/manifest_json']);\n\t      }).catch(function (e) {\n\t        _loglevel2.default.error(e);\n\t      }));\n\t    }\n\t  });\n\t\n\t  if (isSWonSubdomain) {\n\t    self.addEventListener('fetch', function (event) {\n\t      event.respondWith(caches.match(event.request).then(function (response) {\n\t        // Cache hit - return response\n\t        if (response) return response;\n\t\n\t        return fetch(event.request);\n\t      }).catch(function (e) {\n\t        _loglevel2.default.error(e);\n\t      }));\n\t    });\n\t  }\n\t}\n\t\n\tmodule.exports = OneSignal;\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(3)))\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {/*** IMPORTS FROM imports-loader ***/\n\t(function() {\n\t\n\t(function() {\n\t  'use strict';\n\t\n\t  if (self.fetch) {\n\t    return\n\t  }\n\t\n\t  function normalizeName(name) {\n\t    if (typeof name !== 'string') {\n\t      name = String(name)\n\t    }\n\t    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n\t      throw new TypeError('Invalid character in header field name')\n\t    }\n\t    return name.toLowerCase()\n\t  }\n\t\n\t  function normalizeValue(value) {\n\t    if (typeof value !== 'string') {\n\t      value = String(value)\n\t    }\n\t    return value\n\t  }\n\t\n\t  function Headers(headers) {\n\t    this.map = {}\n\t\n\t    if (headers instanceof Headers) {\n\t      headers.forEach(function(value, name) {\n\t        this.append(name, value)\n\t      }, this)\n\t\n\t    } else if (headers) {\n\t      Object.getOwnPropertyNames(headers).forEach(function(name) {\n\t        this.append(name, headers[name])\n\t      }, this)\n\t    }\n\t  }\n\t\n\t  Headers.prototype.append = function(name, value) {\n\t    name = normalizeName(name)\n\t    value = normalizeValue(value)\n\t    var list = this.map[name]\n\t    if (!list) {\n\t      list = []\n\t      this.map[name] = list\n\t    }\n\t    list.push(value)\n\t  }\n\t\n\t  Headers.prototype['delete'] = function(name) {\n\t    delete this.map[normalizeName(name)]\n\t  }\n\t\n\t  Headers.prototype.get = function(name) {\n\t    var values = this.map[normalizeName(name)]\n\t    return values ? values[0] : null\n\t  }\n\t\n\t  Headers.prototype.getAll = function(name) {\n\t    return this.map[normalizeName(name)] || []\n\t  }\n\t\n\t  Headers.prototype.has = function(name) {\n\t    return this.map.hasOwnProperty(normalizeName(name))\n\t  }\n\t\n\t  Headers.prototype.set = function(name, value) {\n\t    this.map[normalizeName(name)] = [normalizeValue(value)]\n\t  }\n\t\n\t  Headers.prototype.forEach = function(callback, thisArg) {\n\t    Object.getOwnPropertyNames(this.map).forEach(function(name) {\n\t      this.map[name].forEach(function(value) {\n\t        callback.call(thisArg, value, name, this)\n\t      }, this)\n\t    }, this)\n\t  }\n\t\n\t  function consumed(body) {\n\t    if (body.bodyUsed) {\n\t      return Promise.reject(new TypeError('Already read'))\n\t    }\n\t    body.bodyUsed = true\n\t  }\n\t\n\t  function fileReaderReady(reader) {\n\t    return new Promise(function(resolve, reject) {\n\t      reader.onload = function() {\n\t        resolve(reader.result)\n\t      }\n\t      reader.onerror = function() {\n\t        reject(reader.error)\n\t      }\n\t    })\n\t  }\n\t\n\t  function readBlobAsArrayBuffer(blob) {\n\t    var reader = new FileReader()\n\t    reader.readAsArrayBuffer(blob)\n\t    return fileReaderReady(reader)\n\t  }\n\t\n\t  function readBlobAsText(blob) {\n\t    var reader = new FileReader()\n\t    reader.readAsText(blob)\n\t    return fileReaderReady(reader)\n\t  }\n\t\n\t  var support = {\n\t    blob: 'FileReader' in self && 'Blob' in self && (function() {\n\t      try {\n\t        new Blob();\n\t        return true\n\t      } catch(e) {\n\t        return false\n\t      }\n\t    })(),\n\t    formData: 'FormData' in self,\n\t    arrayBuffer: 'ArrayBuffer' in self\n\t  }\n\t\n\t  function Body() {\n\t    this.bodyUsed = false\n\t\n\t\n\t    this._initBody = function(body) {\n\t      this._bodyInit = body\n\t      if (typeof body === 'string') {\n\t        this._bodyText = body\n\t      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n\t        this._bodyBlob = body\n\t      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n\t        this._bodyFormData = body\n\t      } else if (!body) {\n\t        this._bodyText = ''\n\t      } else if (support.arrayBuffer && ArrayBuffer.prototype.isPrototypeOf(body)) {\n\t        // Only support ArrayBuffers for POST method.\n\t        // Receiving ArrayBuffers happens via Blobs, instead.\n\t      } else {\n\t        throw new Error('unsupported BodyInit type')\n\t      }\n\t    }\n\t\n\t    if (support.blob) {\n\t      this.blob = function() {\n\t        var rejected = consumed(this)\n\t        if (rejected) {\n\t          return rejected\n\t        }\n\t\n\t        if (this._bodyBlob) {\n\t          return Promise.resolve(this._bodyBlob)\n\t        } else if (this._bodyFormData) {\n\t          throw new Error('could not read FormData body as blob')\n\t        } else {\n\t          return Promise.resolve(new Blob([this._bodyText]))\n\t        }\n\t      }\n\t\n\t      this.arrayBuffer = function() {\n\t        return this.blob().then(readBlobAsArrayBuffer)\n\t      }\n\t\n\t      this.text = function() {\n\t        var rejected = consumed(this)\n\t        if (rejected) {\n\t          return rejected\n\t        }\n\t\n\t        if (this._bodyBlob) {\n\t          return readBlobAsText(this._bodyBlob)\n\t        } else if (this._bodyFormData) {\n\t          throw new Error('could not read FormData body as text')\n\t        } else {\n\t          return Promise.resolve(this._bodyText)\n\t        }\n\t      }\n\t    } else {\n\t      this.text = function() {\n\t        var rejected = consumed(this)\n\t        return rejected ? rejected : Promise.resolve(this._bodyText)\n\t      }\n\t    }\n\t\n\t    if (support.formData) {\n\t      this.formData = function() {\n\t        return this.text().then(decode)\n\t      }\n\t    }\n\t\n\t    this.json = function() {\n\t      return this.text().then(JSON.parse)\n\t    }\n\t\n\t    return this\n\t  }\n\t\n\t  // HTTP methods whose capitalization should be normalized\n\t  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\t\n\t  function normalizeMethod(method) {\n\t    var upcased = method.toUpperCase()\n\t    return (methods.indexOf(upcased) > -1) ? upcased : method\n\t  }\n\t\n\t  function Request(input, options) {\n\t    options = options || {}\n\t    var body = options.body\n\t    if (Request.prototype.isPrototypeOf(input)) {\n\t      if (input.bodyUsed) {\n\t        throw new TypeError('Already read')\n\t      }\n\t      this.url = input.url\n\t      this.credentials = input.credentials\n\t      if (!options.headers) {\n\t        this.headers = new Headers(input.headers)\n\t      }\n\t      this.method = input.method\n\t      this.mode = input.mode\n\t      if (!body) {\n\t        body = input._bodyInit\n\t        input.bodyUsed = true\n\t      }\n\t    } else {\n\t      this.url = input\n\t    }\n\t\n\t    this.credentials = options.credentials || this.credentials || 'omit'\n\t    if (options.headers || !this.headers) {\n\t      this.headers = new Headers(options.headers)\n\t    }\n\t    this.method = normalizeMethod(options.method || this.method || 'GET')\n\t    this.mode = options.mode || this.mode || null\n\t    this.referrer = null\n\t\n\t    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n\t      throw new TypeError('Body not allowed for GET or HEAD requests')\n\t    }\n\t    this._initBody(body)\n\t  }\n\t\n\t  Request.prototype.clone = function() {\n\t    return new Request(this)\n\t  }\n\t\n\t  function decode(body) {\n\t    var form = new FormData()\n\t    body.trim().split('&').forEach(function(bytes) {\n\t      if (bytes) {\n\t        var split = bytes.split('=')\n\t        var name = split.shift().replace(/\\+/g, ' ')\n\t        var value = split.join('=').replace(/\\+/g, ' ')\n\t        form.append(decodeURIComponent(name), decodeURIComponent(value))\n\t      }\n\t    })\n\t    return form\n\t  }\n\t\n\t  function headers(xhr) {\n\t    var head = new Headers()\n\t    var pairs = xhr.getAllResponseHeaders().trim().split('\\n')\n\t    pairs.forEach(function(header) {\n\t      var split = header.trim().split(':')\n\t      var key = split.shift().trim()\n\t      var value = split.join(':').trim()\n\t      head.append(key, value)\n\t    })\n\t    return head\n\t  }\n\t\n\t  Body.call(Request.prototype)\n\t\n\t  function Response(bodyInit, options) {\n\t    if (!options) {\n\t      options = {}\n\t    }\n\t\n\t    this._initBody(bodyInit)\n\t    this.type = 'default'\n\t    this.status = options.status\n\t    this.ok = this.status >= 200 && this.status < 300\n\t    this.statusText = options.statusText\n\t    this.headers = options.headers instanceof Headers ? options.headers : new Headers(options.headers)\n\t    this.url = options.url || ''\n\t  }\n\t\n\t  Body.call(Response.prototype)\n\t\n\t  Response.prototype.clone = function() {\n\t    return new Response(this._bodyInit, {\n\t      status: this.status,\n\t      statusText: this.statusText,\n\t      headers: new Headers(this.headers),\n\t      url: this.url\n\t    })\n\t  }\n\t\n\t  Response.error = function() {\n\t    var response = new Response(null, {status: 0, statusText: ''})\n\t    response.type = 'error'\n\t    return response\n\t  }\n\t\n\t  var redirectStatuses = [301, 302, 303, 307, 308]\n\t\n\t  Response.redirect = function(url, status) {\n\t    if (redirectStatuses.indexOf(status) === -1) {\n\t      throw new RangeError('Invalid status code')\n\t    }\n\t\n\t    return new Response(null, {status: status, headers: {location: url}})\n\t  }\n\t\n\t  self.Headers = Headers;\n\t  self.Request = Request;\n\t  self.Response = Response;\n\t\n\t  self.fetch = function(input, init) {\n\t    return new Promise(function(resolve, reject) {\n\t      var request\n\t      if (Request.prototype.isPrototypeOf(input) && !init) {\n\t        request = input\n\t      } else {\n\t        request = new Request(input, init)\n\t      }\n\t\n\t      var xhr = new XMLHttpRequest()\n\t\n\t      function responseURL() {\n\t        if ('responseURL' in xhr) {\n\t          return xhr.responseURL\n\t        }\n\t\n\t        // Avoid security warnings on getResponseHeader when not allowed by CORS\n\t        if (/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())) {\n\t          return xhr.getResponseHeader('X-Request-URL')\n\t        }\n\t\n\t        return;\n\t      }\n\t\n\t      xhr.onload = function() {\n\t        var status = (xhr.status === 1223) ? 204 : xhr.status\n\t        if (status < 100 || status > 599) {\n\t          reject(new TypeError('Network request failed'))\n\t          return\n\t        }\n\t        var options = {\n\t          status: status,\n\t          statusText: xhr.statusText,\n\t          headers: headers(xhr),\n\t          url: responseURL()\n\t        }\n\t        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n\t        resolve(new Response(body, options))\n\t      }\n\t\n\t      xhr.onerror = function() {\n\t        reject(new TypeError('Network request failed'))\n\t      }\n\t\n\t      xhr.open(request.method, request.url, true)\n\t\n\t      if (request.credentials === 'include') {\n\t        xhr.withCredentials = true\n\t      }\n\t\n\t      if ('responseType' in xhr && support.blob) {\n\t        xhr.responseType = 'blob'\n\t      }\n\t\n\t      request.headers.forEach(function(value, name) {\n\t        xhr.setRequestHeader(name, value)\n\t      })\n\t\n\t      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n\t    })\n\t  }\n\t  self.fetch.polyfill = true\n\t})();\n\t\n\t\n\t/*** EXPORTS FROM exports-loader ***/\n\tmodule.exports = global.fetch\n\t}.call(global));\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.HOST_URL = exports.PROD_HOST = exports.DEV_HOST = undefined;\n\t\n\tvar _utils = __webpack_require__(5);\n\t\n\tvar DEV_HOST = exports.DEV_HOST = 'https://192.168.1.182:3000';\n\tvar PROD_HOST = exports.PROD_HOST = 'https://onesignal.com';\n\tvar HOST_URL = exports.HOST_URL = ((0, _utils.isDev)() ? DEV_HOST : PROD_HOST) + '/api/v1/';\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.getHumanizedTimeDuration = getHumanizedTimeDuration;\n\texports.isServiceWorkerContext = isServiceWorkerContext;\n\texports.isDev = isDev;\n\tfunction getHumanizedTimeDuration(timeDurationInMilliseconds) {\n\t  function addPluralSuffix(number) {\n\t    return number > 1 ? 's' : '';\n\t  }\n\t  var duration = Math.floor(timeDurationInMilliseconds / 1000);\n\t\n\t  var years = Math.floor(duration / 31536000);\n\t  if (years) return years + ' year' + addPluralSuffix(years);\n\t\n\t  var days = Math.floor((duration %= 31536000) / 86400);\n\t  if (days) return days + ' day' + addPluralSuffix(days);\n\t\n\t  var hours = Math.floor((duration %= 86400) / 3600);\n\t  if (hours) return hours + ' hour' + addPluralSuffix(hours);\n\t\n\t  var minutes = Math.floor((duration %= 3600) / 60);\n\t  if (minutes) return minutes + ' minute' + addPluralSuffix(minutes);\n\t\n\t  var seconds = duration % 60;\n\t  if (seconds) return seconds + ' second' + addPluralSuffix(seconds);\n\t\n\t  return 'just now';\n\t}\n\t\n\tfunction isServiceWorkerContext() {\n\t  return typeof window === \"undefined\";\n\t}\n\t\n\tfunction isDev() {\n\t  return (false);\n\t}\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(fetch) {'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.apiCall = apiCall;\n\texports.sendNotification = sendNotification;\n\t\n\tvar _vars = __webpack_require__(4);\n\t\n\tvar _loglevel = __webpack_require__(7);\n\t\n\tvar _loglevel2 = _interopRequireDefault(_loglevel);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction apiCall(action, method, data) {\n\t  var headers = new Headers();\n\t  headers.append('Content-Type', 'application/json;charset=UTF-8');\n\t\n\t  var contents = {\n\t    method: method || 'NO_METHOD_SPECIFIED',\n\t    headers: headers,\n\t    cache: 'no-cache',\n\t    body: JSON.stringify(data)\n\t  };\n\t\n\t  return new Promise(function (resolve, reject) {\n\t    fetch(_vars.HOST_URL + action, contents).then(function status(response) {\n\t      if (response.status >= 200 && response.status < 300) resolve(response.json());else reject(new Error(response.statusText));\n\t    }).catch(function (e) {\n\t      reject(e);\n\t    });\n\t  });\n\t}\n\t\n\tfunction sendNotification(appId, playerIds, titles, contents) {\n\t  var params = {\n\t    'app_id': appId,\n\t    'headings': titles,\n\t    'contents': contents,\n\t    'include_player_ids': playerIds,\n\t    'isAnyWeb': true,\n\t    'url': 'javascript:void(0);'\n\t  };\n\t  return apiCall('notifications', 'POST', params);\n\t}\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(3)))\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*\r\n\t* loglevel - https://github.com/pimterry/loglevel\r\n\t*\r\n\t* Copyright (c) 2013 Tim Perry\r\n\t* Licensed under the MIT license.\r\n\t*/\r\n\t(function (root, definition) {\r\n\t    \"use strict\";\r\n\t    if (typeof module === 'object' && module.exports && \"function\" === 'function') {\r\n\t        module.exports = definition();\r\n\t    } else if (true) {\r\n\t        !(__WEBPACK_AMD_DEFINE_FACTORY__ = (definition), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\r\n\t    } else {\r\n\t        root.log = definition();\r\n\t    }\r\n\t}(this, function () {\r\n\t    \"use strict\";\r\n\t    var noop = function() {};\r\n\t    var undefinedType = \"undefined\";\r\n\t\r\n\t    function realMethod(methodName) {\r\n\t        if (typeof console === undefinedType) {\r\n\t            return false; // We can't build a real method without a console to log to\r\n\t        } else if (console[methodName] !== undefined) {\r\n\t            return bindMethod(console, methodName);\r\n\t        } else if (console.log !== undefined) {\r\n\t            return bindMethod(console, 'log');\r\n\t        } else {\r\n\t            return noop;\r\n\t        }\r\n\t    }\r\n\t\r\n\t    function bindMethod(obj, methodName) {\r\n\t        var method = obj[methodName];\r\n\t        if (typeof method.bind === 'function') {\r\n\t            return method.bind(obj);\r\n\t        } else {\r\n\t            try {\r\n\t                return Function.prototype.bind.call(method, obj);\r\n\t            } catch (e) {\r\n\t                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\r\n\t                return function() {\r\n\t                    return Function.prototype.apply.apply(method, [obj, arguments]);\r\n\t                };\r\n\t            }\r\n\t        }\r\n\t    }\r\n\t\r\n\t    // these private functions always need `this` to be set properly\r\n\t\r\n\t    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {\r\n\t        return function () {\r\n\t            if (typeof console !== undefinedType) {\r\n\t                replaceLoggingMethods.call(this, level, loggerName);\r\n\t                this[methodName].apply(this, arguments);\r\n\t            }\r\n\t        };\r\n\t    }\r\n\t\r\n\t    function replaceLoggingMethods(level, loggerName) {\r\n\t        /*jshint validthis:true */\r\n\t        for (var i = 0; i < logMethods.length; i++) {\r\n\t            var methodName = logMethods[i];\r\n\t            this[methodName] = (i < level) ?\r\n\t                noop :\r\n\t                this.methodFactory(methodName, level, loggerName);\r\n\t        }\r\n\t    }\r\n\t\r\n\t    function defaultMethodFactory(methodName, level, loggerName) {\r\n\t        /*jshint validthis:true */\r\n\t        return realMethod(methodName) ||\r\n\t               enableLoggingWhenConsoleArrives.apply(this, arguments);\r\n\t    }\r\n\t\r\n\t    var logMethods = [\r\n\t        \"trace\",\r\n\t        \"debug\",\r\n\t        \"info\",\r\n\t        \"warn\",\r\n\t        \"error\"\r\n\t    ];\r\n\t\r\n\t    function Logger(name, defaultLevel, factory) {\r\n\t      var self = this;\r\n\t      var currentLevel;\r\n\t      var storageKey = \"loglevel\";\r\n\t      if (name) {\r\n\t        storageKey += \":\" + name;\r\n\t      }\r\n\t\r\n\t      function persistLevelIfPossible(levelNum) {\r\n\t          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\r\n\t\r\n\t          // Use localStorage if available\r\n\t          try {\r\n\t              window.localStorage[storageKey] = levelName;\r\n\t              return;\r\n\t          } catch (ignore) {}\r\n\t\r\n\t          // Use session cookie as fallback\r\n\t          try {\r\n\t              window.document.cookie =\r\n\t                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\r\n\t          } catch (ignore) {}\r\n\t      }\r\n\t\r\n\t      function getPersistedLevel() {\r\n\t          var storedLevel;\r\n\t\r\n\t          try {\r\n\t              storedLevel = window.localStorage[storageKey];\r\n\t          } catch (ignore) {}\r\n\t\r\n\t          if (typeof storedLevel === undefinedType) {\r\n\t              try {\r\n\t                  var cookie = window.document.cookie;\r\n\t                  var location = cookie.indexOf(\r\n\t                      encodeURIComponent(storageKey) + \"=\");\r\n\t                  if (location) {\r\n\t                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];\r\n\t                  }\r\n\t              } catch (ignore) {}\r\n\t          }\r\n\t\r\n\t          // If the stored level is not valid, treat it as if nothing was stored.\r\n\t          if (self.levels[storedLevel] === undefined) {\r\n\t              storedLevel = undefined;\r\n\t          }\r\n\t\r\n\t          return storedLevel;\r\n\t      }\r\n\t\r\n\t      /*\r\n\t       *\r\n\t       * Public API\r\n\t       *\r\n\t       */\r\n\t\r\n\t      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\r\n\t          \"ERROR\": 4, \"SILENT\": 5};\r\n\t\r\n\t      self.methodFactory = factory || defaultMethodFactory;\r\n\t\r\n\t      self.getLevel = function () {\r\n\t          return currentLevel;\r\n\t      };\r\n\t\r\n\t      self.setLevel = function (level, persist) {\r\n\t          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\r\n\t              level = self.levels[level.toUpperCase()];\r\n\t          }\r\n\t          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\r\n\t              currentLevel = level;\r\n\t              if (persist !== false) {  // defaults to true\r\n\t                  persistLevelIfPossible(level);\r\n\t              }\r\n\t              replaceLoggingMethods.call(self, level, name);\r\n\t              if (typeof console === undefinedType && level < self.levels.SILENT) {\r\n\t                  return \"No console available for logging\";\r\n\t              }\r\n\t          } else {\r\n\t              throw \"log.setLevel() called with invalid level: \" + level;\r\n\t          }\r\n\t      };\r\n\t\r\n\t      self.setDefaultLevel = function (level) {\r\n\t          if (!getPersistedLevel()) {\r\n\t              self.setLevel(level, false);\r\n\t          }\r\n\t      };\r\n\t\r\n\t      self.enableAll = function(persist) {\r\n\t          self.setLevel(self.levels.TRACE, persist);\r\n\t      };\r\n\t\r\n\t      self.disableAll = function(persist) {\r\n\t          self.setLevel(self.levels.SILENT, persist);\r\n\t      };\r\n\t\r\n\t      // Initialize with the right level\r\n\t      var initialLevel = getPersistedLevel();\r\n\t      if (initialLevel == null) {\r\n\t          initialLevel = defaultLevel == null ? \"WARN\" : defaultLevel;\r\n\t      }\r\n\t      self.setLevel(initialLevel, false);\r\n\t    }\r\n\t\r\n\t    /*\r\n\t     *\r\n\t     * Package-level API\r\n\t     *\r\n\t     */\r\n\t\r\n\t    var defaultLogger = new Logger();\r\n\t\r\n\t    var _loggersByName = {};\r\n\t    defaultLogger.getLogger = function getLogger(name) {\r\n\t        if (typeof name !== \"string\" || name === \"\") {\r\n\t          throw new TypeError(\"You must supply a name when creating a logger.\");\r\n\t        }\r\n\t\r\n\t        var logger = _loggersByName[name];\r\n\t        if (!logger) {\r\n\t          logger = _loggersByName[name] = new Logger(\r\n\t            name, defaultLogger.getLevel(), defaultLogger.methodFactory);\r\n\t        }\r\n\t        return logger;\r\n\t    };\r\n\t\r\n\t    // Grab the current global log variable in case of overwrite\r\n\t    var _log = (typeof window !== undefinedType) ? window.log : undefined;\r\n\t    defaultLogger.noConflict = function() {\r\n\t        if (typeof window !== undefinedType &&\r\n\t               window.log === defaultLogger) {\r\n\t            window.log = _log;\r\n\t        }\r\n\t\r\n\t        return defaultLogger;\r\n\t    };\r\n\t\r\n\t    return defaultLogger;\r\n\t}));\r\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/*\r\n\t LimitStore.put('colorado', 'rocky');\r\n\t [\"rocky\"]\r\n\t LimitStore.put('colorado', 'mountain');\r\n\t [\"rocky\", \"mountain\"]\r\n\t LimitStore.put('colorado', 'national');\r\n\t [\"mountain\", \"national\"]\r\n\t LimitStore.put('colorado', 'park');\r\n\t [\"national\", \"park\"]\r\n\t */\n\tfunction LimitStore() {}\n\t\n\tLimitStore.store = {};\n\tLimitStore.LIMIT = 2;\n\t\n\tLimitStore.put = function (key, value) {\n\t  if (LimitStore.store[key] === undefined) {\n\t    LimitStore.store[key] = [null, null];\n\t  }\n\t  LimitStore.store[key].push(value);\n\t  if (LimitStore.store[key].length == LimitStore.LIMIT + 1) {\n\t    LimitStore.store[key].shift();\n\t  }\n\t  return LimitStore.store[key];\n\t};\n\t\n\tLimitStore.get = function (key) {\n\t  return LimitStore.store[key];\n\t};\n\t\n\texports.default = LimitStore;\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tif (typeof window !== \"undefined\") {\n\t  (function () {\n\t    function CustomEvent(event, params) {\n\t      params = params || { bubbles: false, cancelable: false, details: undefined };\n\t      var evt = document.createEvent('CustomEvent');\n\t      evt.initCustomEvent(event, params.bubbles, params.cancelable, params.details);\n\t      return evt;\n\t    }\n\t\n\t    CustomEvent.prototype = window.Event.prototype;\n\t\n\t    window.CustomEvent = CustomEvent;\n\t  })();\n\t}\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** OneSignalSDK.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 195fe19b7562993c386a\n **/","if (typeof OneSignal !== \"undefined\")\r\n  var predefinedOneSignalPushes = OneSignal;\r\n\r\nrequire(\"expose?OneSignal!./sdk.js\");\r\n\r\nif (predefinedOneSignalPushes)\r\n  OneSignal._process_pushes(predefinedOneSignalPushes);\r\n\n\n\n/** WEBPACK FOOTER **\n ** C:/Users/Josh/Documents/GameThrive/OneSignalPublicRepos/OneSignal-Website-SDK/src/entry.js\n **/","module.exports = global[\"OneSignal\"] = require(\"-!C:\\\\Users\\\\Josh\\\\Documents\\\\GameThrive\\\\OneSignalPublicRepos\\\\OneSignal-Website-SDK\\\\node_modules\\\\babel-loader\\\\index.js?{\\\"presets\\\":[\\\"es2015\\\"],\\\"cacheDirectory\\\":true}!C:\\\\Users\\\\Josh\\\\Documents\\\\GameThrive\\\\OneSignalPublicRepos\\\\OneSignal-Website-SDK\\\\src\\\\sdk.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/expose-loader?OneSignal!./src/sdk.js\n ** module id = 1\n ** module chunks = 0\n **/","import { DEV_HOST, PROD_HOST, HOST_URL } from './vars.js';\r\nimport { sendNotification } from './api.js';\r\nimport log from 'loglevel';\r\nimport LimitStore from './limitStore.js';\r\nimport \"./events.js\";\r\n\r\nvar OneSignal = {\r\n  _VERSION: 109013,\r\n  _HOST_URL: HOST_URL,\r\n  _app_id: null,\r\n  _tagsToSendOnRegister: null,\r\n  _notificationOpened_callback: null,\r\n  _idsAvailable_callback: [],\r\n  _defaultLaunchURL: null,\r\n  _initOptions: null,\r\n  _httpRegistration: false,\r\n  _main_page_port: null,\r\n  _isNotificationEnabledCallback: null,\r\n  _subscriptionSet: true,\r\n  _initOneSignalHttp: null,\r\n  _sessionIframeAdded: false,\r\n  _useHttpMode: null,\r\n  _windowWidth: 550,\r\n  _windowHeight: 480,\r\n  _isNewVisitor: false,\r\n  LOGGING: false,\r\n  SERVICE_WORKER_UPDATER_PATH: \"OneSignalSDKUpdaterWorker.js\",\r\n  SERVICE_WORKER_PATH: \"OneSignalSDKWorker.js\",\r\n  SERVICE_WORKER_PARAM: {},\r\n\r\n  _ensureDbInstance: function () {\r\n    return new Promise(function (resolve, reject) {\r\n      if (OneSignal._oneSignal_db) {\r\n        resolve(OneSignal._oneSignal_db);\r\n      }\r\n      else {\r\n        var request = indexedDB.open(\"ONE_SIGNAL_SDK_DB\", 1);\r\n        request.onsuccess = function (event) {\r\n          var database = event.target.result;\r\n          OneSignal._oneSignal_db = database;\r\n          resolve(database);\r\n        };\r\n        request.onerror = function (event) {\r\n          log.error('Unable to open IndexedDB.', event);\r\n          reject(event);\r\n        };\r\n\r\n        request.onupgradeneeded = function (event) {\r\n          log.debug('Rebuilding schema in IndexedDB...');\r\n          var db = event.target.result;\r\n          db.createObjectStore(\"Ids\", {keyPath: \"type\"});\r\n          db.createObjectStore(\"NotificationOpened\", {keyPath: \"url\"});\r\n          db.createObjectStore(\"Options\", {keyPath: \"key\"});\r\n        };\r\n      }\r\n    });\r\n  },\r\n\r\n  _getDbValue: function (table, key) {\r\n    return new Promise(function (resolve, reject) {\r\n      OneSignal._ensureDbInstance()\r\n        .then(function (database) {\r\n          var request = database.transaction(table).objectStore(table).get(key);\r\n          request.onsuccess = function (event) {\r\n            if (request.result)\r\n              OneSignal._triggerEvent_dbValueRetrieved(request.result);\r\n            resolve(request.result);\r\n          };\r\n          request.onerror = function (event) {\r\n            reject(request.errorCode);\r\n          };\r\n        })\r\n        .catch(function (e) {\r\n          log.error(e);\r\n        });\r\n      ;\r\n    });\r\n  },\r\n\r\n  _getDbValues: function (table) {\r\n    return new Promise(function (resolve, reject) {\r\n      OneSignal._ensureDbInstance()\r\n        .then(function (database) {\r\n          var jsonResult = {};\r\n          var cursor = database.transaction(table).objectStore(table).openCursor();\r\n          cursor.onsuccess = function (event) {\r\n            var cursor = event.target.result;\r\n            if (cursor) {\r\n              OneSignal._triggerEvent_dbValueRetrieved(cursor);\r\n              jsonResult[cursor.key] = cursor.value.value;\r\n              cursor.continue();\r\n            }\r\n            else\r\n              resolve(jsonResult);\r\n          };\r\n          cursor.onerror = function (event) {\r\n            reject(cursor.errorCode);\r\n          };\r\n        })\r\n        .catch(function (e) {\r\n          log.error(e);\r\n        });\r\n    });\r\n  },\r\n\r\n  _putDbValue: function (table, value) {\r\n    return new Promise(function (resolve, reject) {\r\n      OneSignal._ensureDbInstance()\r\n        .then(function (database) {\r\n          database.transaction([table], \"readwrite\").objectStore(table).put(value);\r\n          OneSignal._triggerEvent_dbValueSet(value);\r\n          resolve(value);\r\n        })\r\n        .catch(function (e) {\r\n          log.error(e);\r\n        });\r\n    });\r\n  },\r\n\r\n  _deleteDbValue: function (table, key) {\r\n    return new Promise(function (resolve, reject) {\r\n      OneSignal._ensureDbInstance()\r\n        .then(function (database) {\r\n          database.transaction([table], \"readwrite\").objectStore(table).delete(key);\r\n          resolve(key);\r\n        })\r\n        .catch(function (e) {\r\n          log.error(e);\r\n        });\r\n      ;\r\n    });\r\n  },\r\n\r\n  _sendToOneSignalApi: function (url, action, inData, callback, failedCallback) {\r\n    log.debug(`Calling ${action} ${OneSignal._HOST_URL + url} with data:`, inData);\r\n    var contents = {\r\n      method: action,\r\n      //mode: 'no-cors', // no-cors is disabled for non-serviceworker.\r\n    };\r\n\r\n    if (inData) {\r\n      contents.headers = {\"Content-type\": \"application/json;charset=UTF-8\"};\r\n      contents.body = JSON.stringify(inData);\r\n    }\r\n\r\n    fetch(OneSignal._HOST_URL + url, contents)\r\n      .then(function status(response) {\r\n        if (response.status >= 200 && response.status < 300)\r\n          return Promise.resolve(response);\r\n        else\r\n          return Promise.reject(new Error(response.statusText));\r\n      })\r\n      .then(function status(response) {\r\n        return response.json();\r\n      })\r\n      .then(function (jsonData) {\r\n        if (callback != null)\r\n          callback(jsonData);\r\n      })\r\n      .catch(function (e) {\r\n        log.error('OneSignal._sendToOneSignalApi() failed:', e);\r\n        if (failedCallback != null)\r\n          failedCallback();\r\n      });\r\n  },\r\n\r\n  _getLanguage: function () {\r\n    return navigator.language ? (navigator.language.length > 3 ? navigator.language.substring(0, 2) : navigator.language) : 'en';\r\n  },\r\n\r\n  _getPlayerId: function (value, callback) {\r\n    if (value)\r\n      callback(value)\r\n    else {\r\n      OneSignal._getDbValue('Ids', 'userId')\r\n        .then(function _getPlayerId_gotUserId(result) {\r\n          if (result)\r\n            callback(result.id);\r\n          else\r\n            callback(null);\r\n        })\r\n        .catch(function (e) {\r\n          log.error(e);\r\n        });\r\n      ;\r\n    }\r\n  },\r\n\r\n  _getBrowserName: function () {\r\n    if (navigator.appVersion.match(/Chrome\\/(.*?) /))\r\n      return \"Chrome\";\r\n    if (navigator.appVersion.match(\"Version/(.*) (Safari)\"))\r\n      return \"Safari\";\r\n    if (navigator.userAgent.match(/Firefox\\/([0-9]{2,}\\.[0-9]{1,})/))\r\n      return \"Firefox\";\r\n\r\n    return \"\";\r\n  },\r\n\r\n  _registerWithOneSignal: function (appId, registrationId, deviceType) {\r\n\r\n    OneSignal._getDbValue('Ids', 'userId')\r\n      .then(function _registerWithOneSignal_GotUserId(userIdResult) {\r\n        OneSignal._getNotificationTypes(function (notif_types) {\r\n          var requestUrl = 'players';\r\n\r\n          var jsonData = {\r\n            app_id: appId,\r\n            device_type: deviceType,\r\n            language: OneSignal._getLanguage(),\r\n            timezone: new Date().getTimezoneOffset() * -60,\r\n            device_model: navigator.platform + \" \" + OneSignal._getBrowserName(),\r\n            device_os: (navigator.appVersion.match(/Chrome\\/(.*?) /) || navigator.appVersion.match(\"Version/(.*) Safari\") || navigator.userAgent.match(/Firefox\\/([0-9]{2,}\\.[0-9]{1,})/))[1],\r\n            sdk: OneSignal._VERSION\r\n          };\r\n\r\n          if (userIdResult) {\r\n            requestUrl = 'players/' + userIdResult.id + '/on_session';\r\n            jsonData.notification_types = notif_types\r\n          }\r\n          else if (notif_types != 1)\r\n            jsonData.notification_types = notif_types\r\n\r\n          if (registrationId) {\r\n            jsonData.identifier = registrationId;\r\n            OneSignal._putDbValue(\"Ids\", {type: \"registrationId\", id: registrationId});\r\n          }\r\n\r\n          OneSignal._sendToOneSignalApi(requestUrl, 'POST', jsonData,\r\n            function registeredCallback(responseJSON) {\r\n              sessionStorage.setItem(\"ONE_SIGNAL_SESSION\", true);\r\n\r\n              if (responseJSON.id) {\r\n                OneSignal._putDbValue(\"Ids\", {type: \"userId\", id: responseJSON.id});\r\n                OneSignal._sendUnsentTags();\r\n              }\r\n\r\n              OneSignal._getPlayerId(responseJSON.id, function (userId) {\r\n                if (OneSignal._idsAvailable_callback.length > 0) {\r\n                  while (OneSignal._idsAvailable_callback.length > 0) {\r\n                    var curr_callback = OneSignal._idsAvailable_callback.pop();\r\n                    curr_callback({userId: userId, registrationId: registrationId});\r\n                  }\r\n                }\r\n\r\n                if (OneSignal._httpRegistration) {\r\n                  log.debug(\"Sending player Id and registrationId back to host page\");\r\n                  log.debug(OneSignal._initOptions);\r\n                  var creator = opener || parent;\r\n                  OneSignal._safePostMessage(creator, {\r\n                    idsAvailable: {\r\n                      userId: userId,\r\n                      registrationId: registrationId\r\n                    }\r\n                  }, OneSignal._initOptions.origin, null);\r\n\r\n                  if (opener)\r\n                    window.close();\r\n                }\r\n              });\r\n            }\r\n          );\r\n\r\n        });\r\n      })\r\n      .catch(function (e) {\r\n        log.error(e);\r\n      });\r\n    ;\r\n  },\r\n\r\n  _sendUnsentTags: function () {\r\n    if (OneSignal._tagsToSendOnRegister) {\r\n      OneSignal.sendTags(OneSignal._tagsToSendOnRegister);\r\n      OneSignal._tagsToSendOnRegister = null;\r\n    }\r\n  },\r\n\r\n  setDefaultNotificationUrl: function (url) {\r\n    OneSignal._putDbValue(\"Options\", {key: \"defaultUrl\", value: url});\r\n  },\r\n\r\n  setDefaultIcon: function (icon) {\r\n    OneSignal._putDbValue(\"Options\", {key: \"defaultIcon\", value: icon});\r\n  },\r\n\r\n  setDefaultTitle: function (title) {\r\n    OneSignal._putDbValue(\"Options\", {key: \"defaultTitle\", value: title});\r\n  },\r\n\r\n  _visibilitychange: function () {\r\n    if (document.visibilityState == \"visible\") {\r\n      document.removeEventListener(\"visibilitychange\", OneSignal._visibilitychange);\r\n      OneSignal._sessionInit({});\r\n    }\r\n  },\r\n\r\n  onCustomPromptClicked: function (event) {\r\n    log.debug('Event onesignal.prompt.custom.clicked:', event.detail);\r\n    OneSignal._checkTrigger_eventSubscriptionChanged();\r\n  },\r\n\r\n  onNativePromptChanged: function (event) {\r\n    log.debug('Event onesignal.prompt.native.permissionchanged:', event.detail);\r\n    OneSignal._checkTrigger_eventSubscriptionChanged();\r\n  },\r\n\r\n  _onSubscriptionChanged: function (event) {\r\n    log.debug('Event onesignal.subscription.changed:', event.detail);\r\n    if (OneSignal._isNewVisitor && event.detail === true) {\r\n      OneSignal._getDbValue('Ids', 'userId')\r\n        .then(function (result) {\r\n          let welcome_notification_opts = OneSignal._initOptions['welcomeNotification'];\r\n          let welcome_notification_disabled = (welcome_notification_opts !== undefined && welcome_notification_opts['disable'] === true);\r\n          let title = (welcome_notification_opts !== undefined && welcome_notification_opts['title'] !== undefined && welcome_notification_opts['title'] !== null) ? welcome_notification_opts['title'] : '';\r\n          let message = (welcome_notification_opts !== undefined && welcome_notification_opts['message'] !== undefined && welcome_notification_opts['message'] !== null && welcome_notification_opts['message'].length > 0) ? welcome_notification_opts['message'] : 'Thanks for subscribing!';\r\n          if (!welcome_notification_disabled) {\r\n            log.debug('Because this user is a new site visitor, a welcome notification will be sent.');\r\n            sendNotification(OneSignal._app_id, [result.id], {'en': title}, {'en': message})\r\n            OneSignal._isNewVisitor = false;\r\n          }\r\n        })\r\n        .catch(function (e) {\r\n          log.error(e);\r\n        });\r\n    }\r\n  },\r\n\r\n  _onDbValueRetrieved: function (event) {\r\n    log.debug('Event onesignal.db.retrieved:', event.detail);\r\n  },\r\n\r\n  _onDbValueSet: function (event) {\r\n    log.debug('Event onesignal.db.valueset:', event.detail);\r\n    var info = event.detail;\r\n    if (info.type === 'userId') {\r\n      LimitStore.put('db.ids.userId', info.id);\r\n      OneSignal._checkTrigger_eventSubscriptionChanged();\r\n    }\r\n  },\r\n\r\n  _onInternalSubscriptionSet: function (event) {\r\n    log.debug('Event onesignal.internal.subscriptionset:', event.detail);\r\n    var newSubscriptionValue = event.detail;\r\n    LimitStore.put('subscription.value', newSubscriptionValue);\r\n    OneSignal._checkTrigger_eventSubscriptionChanged();\r\n  },\r\n\r\n  _checkTrigger_eventSubscriptionChanged: function () {\r\n    log.debug('Called _checkTrigger_eventSubscriptionChanged().');\r\n    var permissions = LimitStore.get('notification.permission');\r\n    var lastPermission = permissions[permissions.length - 2];\r\n    var currentPermission = permissions[permissions.length - 1];\r\n\r\n    var ids = LimitStore.get('db.ids.userId');\r\n    var lastId = ids[ids.length - 2];\r\n    var currentId = ids[ids.length - 1];\r\n\r\n    var subscriptionStates = LimitStore.get('subscription.value');\r\n    var lastSubscriptionState = subscriptionStates[subscriptionStates.length - 2];\r\n    var currentSubscriptionState = subscriptionStates[subscriptionStates.length - 1];\r\n\r\n\r\n    var newSubscriptionState = 'unchanged';\r\n\r\n    if (((lastPermission === 'default' || lastPermission === 'denied' || lastPermission === null) && currentPermission === 'granted' &&\r\n        currentId !== null &&\r\n        currentSubscriptionState === true\r\n      ) ||\r\n      (\r\n        (lastSubscriptionState === false && currentSubscriptionState === true) &&\r\n        currentId != null &&\r\n        currentPermission === 'granted'\r\n      )) {\r\n      newSubscriptionState = true;\r\n    }\r\n\r\n    if ((lastPermission !== 'denied' && currentPermission === 'denied') ||\r\n      (lastPermission === 'granted' && currentPermission !== 'granted') ||\r\n      (lastId !== null && currentId === null) ||\r\n      (lastSubscriptionState !== false && currentSubscriptionState === false)) {\r\n      newSubscriptionState = false;\r\n    }\r\n\r\n    if (newSubscriptionState !== \"unchanged\") {\r\n      var lastTriggerTimes = LimitStore.put('event.subscriptionchanged.lastriggered', Date.now());\r\n      var currentTime = lastTriggerTimes[lastTriggerTimes.length - 1];\r\n      var lastTriggerTime = lastTriggerTimes[lastTriggerTimes.length - 2];\r\n      var elapsedTimeSeconds = (currentTime - lastTriggerTime) / 1000;\r\n\r\n      var lastEventStates = LimitStore.put('event.subscriptionchanged.laststates', newSubscriptionState);\r\n      var currentState = lastEventStates[lastEventStates.length - 1];\r\n      var lastState = lastEventStates[lastEventStates.length - 2];\r\n\r\n      // If event already triggered within the last second, don't re-trigger.\r\n      var shouldNotTriggerEvent = (lastTriggerTime != null && (elapsedTimeSeconds <= 1)) || (currentState === lastState);\r\n      if (shouldNotTriggerEvent === false) {\r\n        OneSignal._triggerEvent_subscriptionChanged(newSubscriptionState)\r\n      }\r\n    }\r\n  },\r\n\r\n  init: function (options) {\r\n    OneSignal._initOptions = options;\r\n\r\n    if (OneSignal.LOGGING)\r\n      log.enableAll();\r\n    else\r\n      log.setLevel('error');\r\n\r\n    log.info(`OneSignal Web SDK loaded (version ${OneSignal._VERSION}).`);\r\n    if (!OneSignal.isPushNotificationsSupported()) {\r\n      log.warn(\"Your browser does not support push notifications.\");\r\n      return;\r\n    }\r\n\r\n    if (navigator.permissions && !(OneSignal._isBrowserFirefox() && OneSignal._getFirefoxVersion() <= 45)) {\r\n      OneSignal._usingNativePermissionHook = true;\r\n      var currentNotificationPermission = OneSignal._getNotificationPermission();\r\n      LimitStore.put('notification.permission', currentNotificationPermission);\r\n      // If the browser natively supports hooking the subscription prompt permission change event\r\n      //     use it instead of our SDK method\r\n      navigator.permissions.query({name: 'notifications'}).then(function (permissionStatus) {\r\n        permissionStatus.onchange = function () {\r\n          var recentPermissions = LimitStore.get('notification.permission');\r\n          var permissionBeforePrompt = recentPermissions[0];\r\n          OneSignal._triggerEvent_nativePromptPermissionChanged(permissionBeforePrompt);\r\n        };\r\n      })\r\n        .catch(function (e) {\r\n          log.error(e);\r\n        });\r\n    }\r\n    else {\r\n      var currentNotificationPermission = OneSignal._getNotificationPermission();\r\n      LimitStore.put('notification.permission', currentNotificationPermission);\r\n    }\r\n\r\n    // Store the current value of Ids:registrationId, so that we can see if the value changes in the future\r\n    OneSignal._getDbValue('Ids', 'userId')\r\n      .then(function (result) {\r\n        if (result === undefined) {\r\n          OneSignal._isNewVisitor = true;\r\n        }\r\n        var storeValue = result ? result.id : null;\r\n        LimitStore.put('db.ids.userId', storeValue);\r\n      });\r\n\r\n    // Store the current value of subscription, so that we can see if the value changes in the future\r\n    OneSignal._getSubscription(function (currentSubscription) {\r\n      LimitStore.put('subscription.value', currentSubscription);\r\n    });\r\n\r\n\r\n    window.addEventListener('onesignal.prompt.custom.clicked', OneSignal.onCustomPromptClicked);\r\n    window.addEventListener('onesignal.prompt.native.permissionchanged', OneSignal.onNativePromptChanged);\r\n    window.addEventListener('onesignal.subscription.changed', OneSignal._onSubscriptionChanged);\r\n    window.addEventListener('onesignal.db.valueretrieved', OneSignal._onDbValueRetrieved);\r\n    window.addEventListener('onesignal.db.valueset', OneSignal._onDbValueSet);\r\n    window.addEventListener('onesignal.db.valueset', OneSignal._onDbValueSet);\r\n    window.addEventListener('onesignal.internal.subscriptionset', OneSignal._onInternalSubscriptionSet);\r\n\r\n    OneSignal._useHttpMode = !OneSignal._isSupportedSafari() && (!OneSignal._supportsDirectPermission() || OneSignal._initOptions.subdomainName);\r\n\r\n    if (OneSignal._useHttpMode)\r\n      OneSignal._initOneSignalHttp = 'https://' + OneSignal._initOptions.subdomainName + '.onesignal.com/sdks/initOneSignalHttp';\r\n    else\r\n      OneSignal._initOneSignalHttp = 'https://onesignal.com/sdks/initOneSignalHttps';\r\n\r\n    if (__DEV__)\r\n      OneSignal._initOneSignalHttp = DEV_HOST + '/dev_sdks/initOneSignalHttp';\r\n\r\n    // If Safari - add 'fetch' pollyfill if it isn't already added.\r\n    if (OneSignal._isSupportedSafari() && typeof window.fetch == \"undefined\") {\r\n      var s = document.createElement('script');\r\n      s.setAttribute('src', \"https://cdnjs.cloudflare.com/ajax/libs/fetch/0.9.0/fetch.js\");\r\n      document.head.appendChild(s);\r\n    }\r\n\r\n    if (document.readyState === \"complete\")\r\n      OneSignal._internalInit();\r\n    else\r\n      window.addEventListener('load', OneSignal._internalInit);\r\n  },\r\n\r\n  _internalInit: function () {\r\n    Promise.all([OneSignal._getDbValue('Ids', 'appId'),\r\n      OneSignal._getDbValue('Ids', 'registrationId'),\r\n      OneSignal._getDbValue('Options', 'subscription')])\r\n      .then(function _internalInit_GotAppRegistrationSubscriptionIds(result) {\r\n        var appIdResult = result[0];\r\n        var registrationIdResult = result[1];\r\n        var subscriptionResult = result[2];\r\n\r\n        // If AppId changed delete playerId and continue.\r\n        if (appIdResult && appIdResult.id != OneSignal._initOptions.appId) {\r\n          OneSignal._deleteDbValue(\"Ids\", \"userId\");\r\n          sessionStorage.removeItem(\"ONE_SIGNAL_SESSION\");\r\n        }\r\n\r\n        // HTTPS - Only register for push notifications once per session or if the user changes notification permission to Ask or Allow.\r\n        if (sessionStorage.getItem(\"ONE_SIGNAL_SESSION\")\r\n          && !OneSignal._initOptions.subdomainName\r\n          && (Notification.permission == \"denied\"\r\n          || sessionStorage.getItem(\"ONE_SIGNAL_NOTIFICATION_PERMISSION\") == Notification.permission))\r\n          return;\r\n\r\n        sessionStorage.setItem(\"ONE_SIGNAL_NOTIFICATION_PERMISSION\", Notification.permission);\r\n\r\n        if (OneSignal._initOptions.autoRegister == false && !registrationIdResult && OneSignal._initOptions.subdomainName == null)\r\n          return;\r\n\r\n        if (document.visibilityState != \"visible\") {\r\n          document.addEventListener(\"visibilitychange\", OneSignal._visibilitychange);\r\n          return;\r\n        }\r\n\r\n        OneSignal._sessionInit({});\r\n      })\r\n      .catch(function (e) {\r\n        log.error(e);\r\n      });\r\n  },\r\n\r\n  registerForPushNotifications: function (options) {\r\n    if (!OneSignal.isPushNotificationsSupported()) {\r\n      log.warn(\"Your browser does not support push notifications.\");\r\n      return;\r\n    }\r\n    // WARNING: Do NOT add callbacks that have to fire to get from here to window.open in _sessionInit.\r\n    //          Otherwise the pop-up to ask for push permission on HTTP connections will be blocked by Chrome.\r\n    if (!options)\r\n      options = {};\r\n    options.fromRegisterFor = true;\r\n    OneSignal._sessionInit(options);\r\n  },\r\n\r\n  // Http only - Only called from iframe's init.js\r\n  _initHttp: function (options) {\r\n    OneSignal._initOptions = options;\r\n\r\n    if (options.continuePressed) {\r\n      OneSignal.setSubscription(true);\r\n    }\r\n\r\n    var isIframe = (parent != null && parent != window);\r\n    var creator = opener || parent;\r\n\r\n    if (!creator) {\r\n      log.debug(\"ERROR:_initHttp: No opener or parent found!\");\r\n      return;\r\n    }\r\n    // Setting up message channel to receive message from host page.\r\n    var messageChannel = new MessageChannel();\r\n    messageChannel.port1.onmessage = function (event) {\r\n      log.debug(\"_initHttp.messageChannel.port1.onmessage\", event);\r\n\r\n      if (event.data.initOptions) {\r\n        OneSignal.setDefaultNotificationUrl(event.data.initOptions.defaultUrl);\r\n        OneSignal.setDefaultTitle(event.data.initOptions.defaultTitle);\r\n        if (event.data.initOptions.defaultIcon)\r\n          OneSignal.setDefaultIcon(event.data.initOptions.defaultIcon);\r\n\r\n        log.debug(\"document.URL\", event.data.initOptions.parent_url);\r\n        OneSignal._getDbValue(\"NotificationOpened\", event.data.initOptions.parent_url)\r\n          .then(function registerForPushNotifications_GotNotificationOpened(notificationOpenedResult) {\r\n            log.debug(\"_initHttp NotificationOpened db\", notificationOpenedResult);\r\n            if (notificationOpenedResult) {\r\n              OneSignal._deleteDbValue(\"NotificationOpened\", event.data.initOptions.parent_url);\r\n              log.debug(\"OneSignal._safePostMessage:targetOrigin:\", OneSignal._initOptions.origin);\r\n\r\n              OneSignal._safePostMessage(creator, {openedNotification: notificationOpenedResult.data}, OneSignal._initOptions.origin, null);\r\n            }\r\n          })\r\n          .catch(function (e) {\r\n            log.error(e);\r\n          });\r\n        ;\r\n      }\r\n      else if (event.data.getNotificationPermission) {\r\n        OneSignal._getSubdomainState(function (curState) {\r\n          OneSignal._safePostMessage(creator, {currentNotificationPermission: curState}, OneSignal._initOptions.origin, null);\r\n        });\r\n      }\r\n      else if (event.data.setSubdomainState)\r\n        OneSignal.setSubscription(event.data.setSubdomainState.setSubscription);\r\n    };\r\n\r\n    OneSignal._getSubdomainState(function (curState) {\r\n      curState[\"isIframe\"] = isIframe;\r\n      OneSignal._safePostMessage(creator, {oneSignalInitPageReady: curState}, OneSignal._initOptions.origin, [messageChannel.port2]);\r\n    });\r\n\r\n    OneSignal._initSaveState();\r\n    OneSignal._httpRegistration = true;\r\n    if (location.search.indexOf(\"?session=true\") == 0)\r\n      return;\r\n\r\n    OneSignal._getPlayerId(null, function (player_id) {\r\n      if (!isIframe || player_id) {\r\n        log.debug(\"Before navigator.serviceWorker.register\");\r\n        navigator.serviceWorker.register(OneSignal.SERVICE_WORKER_PATH, OneSignal.SERVICE_WORKER_PARAM).then(OneSignal._enableNotifications, OneSignal._registerError);\r\n        log.debug(\"After navigator.serviceWorker.register\");\r\n      }\r\n    });\r\n  },\r\n\r\n  _getSubdomainState: function (callback) {\r\n    var state = {};\r\n\r\n    Promise.all([OneSignal._getDbValue('Ids', 'userId'),\r\n      OneSignal._getDbValue('Ids', 'registrationId'),\r\n      OneSignal._getDbValue('Options', 'subscription')])\r\n      .then(function _internalInit_GotAppRegistrationSubscriptionIds(result) {\r\n        var userIdResult = result[0];\r\n        var registrationIdResult = result[1];\r\n        var subscriptionResult = result[2];\r\n\r\n        callback({\r\n          userId: userIdResult ? userIdResult.id : null,\r\n          registrationId: registrationIdResult ? registrationIdResult.id : null,\r\n          notifPermssion: Notification.permission,\r\n          subscriptionSet: subscriptionResult ? subscriptionResult.value : null,\r\n          isPushEnabled: ( Notification.permission == \"granted\"\r\n          && userIdResult\r\n          && registrationIdResult\r\n          && ((subscriptionResult && subscriptionResult.value) || subscriptionResult == null))\r\n        });\r\n      })\r\n      .catch(function (e) {\r\n        log.error(e);\r\n      });\r\n    ;\r\n  },\r\n\r\n  _initSaveState: function () {\r\n    OneSignal._app_id = OneSignal._initOptions.appId;\r\n    OneSignal._putDbValue(\"Ids\", {type: \"appId\", id: OneSignal._app_id});\r\n    OneSignal._putDbValue(\"Options\", {key: \"pageTitle\", value: document.title});\r\n  },\r\n\r\n  _supportsDirectPermission: function () {\r\n    return OneSignal._isSupportedSafari()\r\n      || location.protocol == 'https:'\r\n      || location.host.indexOf(\"localhost\") == 0\r\n      || location.host.indexOf(\"127.0.0.1\") == 0;\r\n  },\r\n\r\n\r\n  _sessionInit: function (options) {\r\n    log.debug(\"Called OneSignal._sessionInit():\", options);\r\n    OneSignal._initSaveState();\r\n\r\n    var hostPageProtocol = location.origin.match(/^http(s|):\\/\\/(www\\.|)/)[0];\r\n\r\n    // If HTTP or using subdomain mode\r\n    if (OneSignal._useHttpMode) {\r\n      if (options.fromRegisterFor) {\r\n        var dualScreenLeft = window.screenLeft != undefined ? window.screenLeft : screen.left;\r\n        var dualScreenTop = window.screenTop != undefined ? window.screenTop : screen.top;\r\n\r\n        var thisWidth = window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : screen.width;\r\n        var thisHeight = window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : screen.height;\r\n        var childWidth = OneSignal._windowWidth;\r\n        var childHeight = OneSignal._windowHeight;\r\n\r\n        var left = ((thisWidth / 2) - (childWidth / 2)) + dualScreenLeft;\r\n        var top = ((thisHeight / 2) - (childHeight / 2)) + dualScreenTop;\r\n\r\n        log.debug('Opening popup window.');\r\n        var message_localization_opts = OneSignal._initOptions['promptOptions'];\r\n        var message_localization_opts_str = '';\r\n        if (message_localization_opts) {\r\n          var message_localization_params = ['actionMessage',\r\n            'exampleNotificationTitleDesktop',\r\n            'exampleNotificationMessageDesktop',\r\n            'exampleNotificationTitleMobile',\r\n            'exampleNotificationMessageMobile',\r\n            'exampleNotificationCaption',\r\n            'acceptButtonText',\r\n            'cancelButtonText'];\r\n          for (var i = 0; i < message_localization_params.length; i++) {\r\n            var key = message_localization_params[i];\r\n            var value = message_localization_opts[key];\r\n            var encoded_value = encodeURIComponent(value);\r\n            if (value || value === '') {\r\n              message_localization_opts_str += '&' + key + '=' + encoded_value;\r\n            }\r\n          }\r\n        }\r\n        var childWindow = window.open(OneSignal._initOneSignalHttp + \"?\" + message_localization_opts_str + \"&hostPageProtocol=\" + hostPageProtocol, \"_blank\", 'scrollbars=yes, width=' + childWidth + ', height=' + childHeight + ', top=' + top + ', left=' + left);\r\n\r\n        if (childWindow)\r\n          childWindow.focus();\r\n      }\r\n      else {\r\n        log.debug('Opening iFrame.');\r\n        OneSignal._addSessionIframe(hostPageProtocol);\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    if (OneSignal._isSupportedSafari()) {\r\n      if (OneSignal._initOptions.safari_web_id) {\r\n        var notificationPermissionBeforeRequest = OneSignal._getNotificationPermission(OneSignal._initOptions.safari_web_id);\r\n        window.safari.pushNotification.requestPermission(\r\n          OneSignal._HOST_URL + 'safari',\r\n          OneSignal._initOptions.safari_web_id,\r\n          {app_id: OneSignal._app_id},\r\n          function (data) {\r\n            log.debug(data);\r\n            var notificationPermissionAfterRequest = OneSignal._getNotificationPermission(OneSignal._initOptions.safari_web_id);\r\n            if (data.deviceToken) {\r\n              OneSignal._registerWithOneSignal(OneSignal._app_id, data.deviceToken.toLowerCase(), 7);\r\n            }\r\n            else {\r\n              sessionStorage.setItem(\"ONE_SIGNAL_SESSION\", true);\r\n            }\r\n            OneSignal._triggerEvent_nativePromptPermissionChanged(notificationPermissionBeforeRequest);\r\n          }\r\n        );\r\n      }\r\n    }\r\n    else if (options.modalPrompt && options.fromRegisterFor) { // If HTTPS - Show modal\r\n      if (!OneSignal.isPushNotificationsSupported()) {\r\n        log.warn('An attempt was made to open the HTTPS modal permission prompt, but push notifications are not supported on this browser. Opening canceled.');\r\n        return;\r\n      }\r\n      OneSignal.isPushNotificationsEnabled(function (pushEnabled) {\r\n        var element = document.createElement('div');\r\n        element.setAttribute('id', 'OneSignal-iframe-modal');\r\n        element.innerHTML = '<div id=\"notif-permission\" style=\"background: rgba(0, 0, 0, 0.7); position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 9000; display: block\"></div>';\r\n        document.body.appendChild(element);\r\n\r\n        var iframeStyle = document.createElement('style');\r\n        iframeStyle.innerHTML = \"@media (max-width: 560px) { .OneSignal-permission-iframe { width: 100%; height: 100%;} }\"\r\n          + \"@media (min-width: 561px) { .OneSignal-permission-iframe { top: 50%; left: 50%; margin-left: -275px; margin-top: -248px;} }\";\r\n        document.getElementsByTagName('head')[0].appendChild(iframeStyle);\r\n\r\n        var iframeNode = document.createElement(\"iframe\");\r\n        iframeNode.className = \"OneSignal-permission-iframe\"\r\n        iframeNode.style.cssText = \"background: rgba(255, 255, 255, 1); position: fixed;\";\r\n        iframeNode.src = OneSignal._initOneSignalHttp\r\n          + '?id=' + OneSignal._app_id\r\n          + '&httpsPrompt=true'\r\n          + '&pushEnabled=' + pushEnabled\r\n          + '&permissionBlocked=' + (typeof Notification === \"undefined\" || Notification.permission == \"denied\")\r\n          + '&hostPageProtocol=' + hostPageProtocol;\r\n        iframeNode.setAttribute('frameborder', '0');\r\n        iframeNode.width = OneSignal._windowWidth.toString();\r\n        iframeNode.height = OneSignal._windowHeight.toString();\r\n\r\n        log.debug('Opening HTTPS modal prompt.');\r\n        document.getElementById(\"notif-permission\").appendChild(iframeNode);\r\n      });\r\n    }\r\n    else if ('serviceWorker' in navigator) // If HTTPS - Show native prompt\r\n      OneSignal._registerForW3CPush(options);\r\n    else\r\n      log.debug('Service workers are not supported in this browser.');\r\n\r\n    OneSignal._triggerEvent('onesignal.sdk.initialized', null);\r\n  },\r\n\r\n  _registerForW3CPush: function (options) {\r\n\r\n    OneSignal._getDbValue('Ids', 'registrationId')\r\n      .then(function _registerForW3CPush_GotRegistrationId(registrationIdResult) {\r\n        if (!registrationIdResult || !options.fromRegisterFor || Notification.permission != \"granted\") {\r\n          navigator.serviceWorker.getRegistration().then(function (serviceWorkerRegistration) {\r\n            var sw_path = \"\";\r\n\r\n            if (OneSignal._initOptions.path)\r\n              sw_path = OneSignal._initOptions.path;\r\n\r\n            if (typeof serviceWorkerRegistration === \"undefined\") // Nothing registered, very first run\r\n              OneSignal._registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_PATH);\r\n            else {\r\n              if (serviceWorkerRegistration.active) {\r\n                if (serviceWorkerRegistration.active.scriptURL.indexOf(sw_path + OneSignal.SERVICE_WORKER_PATH) > -1) {\r\n\r\n                  OneSignal._getDbValue('Ids', 'WORKER1_ONE_SIGNAL_SW_VERSION')\r\n                    .then(function (versionResult) {\r\n                      if (versionResult) {\r\n                        if (versionResult.id != OneSignal._VERSION)\r\n                          OneSignal._registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_UPDATER_PATH);\r\n                        else\r\n                          OneSignal._registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_PATH);\r\n                      }\r\n                      else\r\n                        OneSignal._registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_PATH);\r\n\r\n                    })\r\n                    .catch(function (e) {\r\n                      log.error(e);\r\n                    });\r\n                }\r\n                else if (serviceWorkerRegistration.active.scriptURL.indexOf(sw_path + OneSignal.SERVICE_WORKER_UPDATER_PATH) > -1) {\r\n\r\n                  OneSignal._getDbValue('Ids', 'WORKER2_ONE_SIGNAL_SW_VERSION')\r\n                    .then(function (versionResult) {\r\n                      if (versionResult) {\r\n                        if (versionResult.id != OneSignal._VERSION)\r\n                          OneSignal._registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_PATH);\r\n                        else\r\n                          OneSignal._registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_UPDATER_PATH);\r\n                      }\r\n                      else\r\n                        OneSignal._registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_UPDATER_PATH);\r\n                    })\r\n                    .catch(function (e) {\r\n                      log.error(e);\r\n                    });\r\n                }\r\n              }\r\n              else if (serviceWorkerRegistration.installing == null)\r\n                OneSignal._registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_PATH);\r\n            }\r\n          })\r\n            .catch(function (e) {\r\n              log.error(e);\r\n            });\r\n        }\r\n      })\r\n      .catch(function (e) {\r\n        log.error(e);\r\n      });\r\n    ;\r\n  },\r\n  \r\n  _registerServiceWorker: function(full_sw_and_path) {\r\n    navigator.serviceWorker.register(full_sw_and_path, OneSignal.SERVICE_WORKER_PARAM).then(OneSignal._enableNotifications, OneSignal._registerError);\r\n  },\r\n\r\n  _addSessionIframe: function (hostPageProtocol) {\r\n\r\n    var node = document.createElement(\"iframe\");\r\n    node.style.display = \"none\";\r\n    node.src = OneSignal._initOneSignalHttp + \"Iframe\";\r\n    if (sessionStorage.getItem(\"ONE_SIGNAL_SESSION\"))\r\n      node.src += \"?session=true\"\r\n        + \"&hostPageProtocol=\" + hostPageProtocol;\r\n    else\r\n      node.src += \"?hostPageProtocol=\" + hostPageProtocol\r\n    document.body.appendChild(node);\r\n    log.debug('Adding session iFrame.');\r\n\r\n    OneSignal._sessionIframeAdded = true;\r\n  },\r\n\r\n  _registerError: function (err) {\r\n    log.debug(\"navigator.serviceWorker.register:ERROR: \" + err);\r\n  },\r\n\r\n  _enableNotifications: function (existingServiceWorkerRegistration) { // is ServiceWorkerRegistration type\r\n    if (existingServiceWorkerRegistration)\r\n      log.debug('There is an older ServiceWorker:', existingServiceWorkerRegistration);\r\n    if (!('PushManager' in window)) {\r\n      log.debug(\"Push messaging is not supported. No PushManager.\");\r\n      sessionStorage.setItem(\"ONE_SIGNAL_SESSION\", true);\r\n      return;\r\n    }\r\n\r\n    if (!('showNotification' in ServiceWorkerRegistration.prototype)) {\r\n      log.debug(\"Notifications are not supported. showNotification not available in ServiceWorkerRegistration.\");\r\n      sessionStorage.setItem(\"ONE_SIGNAL_SESSION\", true);\r\n      return;\r\n    }\r\n\r\n    if (Notification.permission === 'denied') {\r\n      log.warn(\"The user has disabled notifications.\");\r\n      return;\r\n    }\r\n\r\n    navigator.serviceWorker.ready.then(function (serviceWorkerRegistration) {\r\n      log.info('Service worker active:', serviceWorkerRegistration);\r\n\r\n      OneSignal._subscribeForPush(serviceWorkerRegistration);\r\n    })\r\n      .catch(function (e) {\r\n        log.error(e);\r\n      });\r\n    ;\r\n  },\r\n\r\n  /*\r\n   Returns the current browser-agnostic notification permission as \"default\", \"granted\", \"denied\".\r\n   safariWebId: Used only to get the current notification permission state in Safari (required as part of the spec).\r\n   */\r\n  _getNotificationPermission: function (safariWebId) {\r\n    if (window.safari) {\r\n      // The user is on Safari\r\n      // A web ID is required to determine the current notificiation permission\r\n      if (safariWebId) {\r\n        return window.safari.pushNotification.permission(safariWebId).permission;\r\n      }\r\n      else {\r\n        // The user didn't set up Safari web push properly; notifications are unlikely to be enabled\r\n        return \"default\";\r\n      }\r\n    }\r\n    else {\r\n      // Identical API on Firefox and Chrome\r\n      return Notification.permission;\r\n    }\r\n  },\r\n\r\n  _triggerEvent: function (eventName, data) {\r\n    if (typeof window === \"undefined\") {\r\n      log.debug('Skipping triggering of event:', eventName, 'because we are running in a ServiceWorker context.');\r\n      return;\r\n    }\r\n    var event = new CustomEvent(eventName, {\r\n      bubbles: true, cancelable: true, details: data\r\n    });\r\n    window.dispatchEvent(event);\r\n  },\r\n\r\n  _triggerEvent_customPromptClicked: function (clickResult) {\r\n    var recentPermissions = LimitStore.put('notification.permission', clickResult);\r\n    OneSignal._triggerEvent('onesignal.prompt.custom.clicked', {\r\n      result: clickResult\r\n    });\r\n  },\r\n\r\n  _triggerEvent_nativePromptPermissionChanged: function (from, to) {\r\n    if (to === undefined) {\r\n      to = OneSignal._getNotificationPermission(OneSignal._initOptions.safari_web_id);\r\n    }\r\n    if (from !== to) {\r\n      var recentPermissions = LimitStore.put('notification.permission', to);\r\n      OneSignal._triggerEvent('onesignal.prompt.native.permissionchanged', {\r\n        from: from,\r\n        to: to\r\n      });\r\n    }\r\n  },\r\n\r\n  _triggerEvent_subscriptionChanged: function (to) {\r\n    OneSignal._triggerEvent('onesignal.subscription.changed', to);\r\n  },\r\n\r\n  _triggerEvent_dbValueRetrieved: function (value) {\r\n    OneSignal._triggerEvent('onesignal.db.valueretrieved', value);\r\n  },\r\n\r\n  _triggerEvent_dbValueSet: function (value) {\r\n    OneSignal._triggerEvent('onesignal.db.valueset', value);\r\n  },\r\n\r\n  _triggerEvent_internalSubscriptionSet: function (value) {\r\n    OneSignal._triggerEvent('onesignal.internal.subscriptionset', value);\r\n  },\r\n\r\n  _subscribeForPush: function (serviceWorkerRegistration) {\r\n    var notificationPermissionBeforeRequest = OneSignal._getNotificationPermission(OneSignal._initOptions.safari_web_id);\r\n    serviceWorkerRegistration.pushManager.subscribe({userVisibleOnly: true})\r\n      .then(function (subscription) {\r\n        sessionStorage.setItem(\"ONE_SIGNAL_NOTIFICATION_PERMISSION\", Notification.permission);\r\n\r\n        OneSignal._getDbValue('Ids', 'appId')\r\n          .then(function _subscribeForPush_GotAppId(appIdResult) {\r\n            var appId = appIdResult.id;\r\n            log.debug(\"Called OneSignal._subscribeForPush() -> serviceWorkerRegistration.pushManager.subscribe().\");\r\n\r\n            var registrationId = null;\r\n            if (subscription) {\r\n              if (typeof subscription.subscriptionId != \"undefined\") // Chrome 43 & 42\r\n                registrationId = subscription.subscriptionId;\r\n              else  // Chrome 44+ and FireFox\r\n                registrationId = subscription.endpoint.replace(new RegExp(\"^(https://android.googleapis.com/gcm/send/|https://updates.push.services.mozilla.com/push/)\"), \"\");\r\n            }\r\n            else\r\n              log.warn('Could not subscribe your browser for push notifications.');\r\n\r\n            OneSignal._registerWithOneSignal(appId, registrationId, OneSignal._isSupportedFireFox() ? 8 : 5);\r\n\r\n            if (!OneSignal._usingNativePermissionHook) {\r\n              OneSignal._triggerEvent_nativePromptPermissionChanged(notificationPermissionBeforeRequest);\r\n            }\r\n          })\r\n          .catch(function (e) {\r\n            log.error(e);\r\n          });\r\n      })\r\n      .catch(function (e) {\r\n        log.error('Error while subscribing for push:', e);\r\n\r\n        if (!OneSignal._usingNativePermissionHook)\r\n          OneSignal._triggerEvent_nativePromptPermissionChanged(notificationPermissionBeforeRequest);\r\n\r\n        if (e.code == 20 && opener && OneSignal._httpRegistration)\r\n          window.close();\r\n      });\r\n  },\r\n\r\n  sendTag: function (key, value) {\r\n    var jsonKeyValue = {};\r\n    jsonKeyValue[key] = value;\r\n    OneSignal.sendTags(jsonKeyValue);\r\n  },\r\n\r\n  sendTags: function (jsonPair) {\r\n    OneSignal._getDbValue('Ids', 'userId')\r\n      .then(function sendTags_GotUserId(userIdResult) {\r\n        if (userIdResult)\r\n          OneSignal._sendToOneSignalApi(\"players/\" + userIdResult.id, \"PUT\", {\r\n            app_id: OneSignal._app_id,\r\n            tags: jsonPair\r\n          });\r\n        else {\r\n          if (OneSignal._tagsToSendOnRegister == null)\r\n            OneSignal._tagsToSendOnRegister = jsonPair;\r\n          else {\r\n            var resultObj = {};\r\n            for (var _obj in OneSignal._tagsToSendOnRegister) resultObj[_obj] = OneSignal._tagsToSendOnRegister[_obj];\r\n            for (var _obj in jsonPair) resultObj[_obj] = jsonPair[_obj];\r\n            OneSignal._tagsToSendOnRegister = resultObj;\r\n          }\r\n        }\r\n      })\r\n      .catch(function (e) {\r\n        log.error('sendTags:', e);\r\n      });\r\n  },\r\n\r\n  deleteTag: function (key) {\r\n    OneSignal.deleteTags([key]);\r\n  },\r\n\r\n  deleteTags: function (keyArray) {\r\n    var jsonPair = {};\r\n    var length = keyArray.length;\r\n    for (var i = 0; i < length; i++)\r\n      jsonPair[keyArray[i]] = \"\";\r\n\r\n    OneSignal.sendTags(jsonPair);\r\n  },\r\n\r\n  _handleNotificationOpened: function (event) {\r\n    var notificationData = JSON.parse(event.notification.tag);\r\n    event.notification.close();\r\n\r\n    Promise.all([OneSignal._getDbValue('Ids', 'appId'), OneSignal._getDbValue('Ids', 'userId')])\r\n      .then(function _handleNotificationOpened_GotAppUserIds(results) {\r\n        var appIdResult = results[0];\r\n        var userIdResult = results[1];\r\n        if (appIdResult && userIdResult) {\r\n          OneSignal._sendToOneSignalApi(\"notifications/\" + notificationData.id, \"PUT\", {\r\n            app_id: appIdResult.id,\r\n            player_id: userIdResult.id,\r\n            opened: true\r\n          });\r\n        }\r\n      })\r\n      .catch(function (e) {\r\n        log.error(e);\r\n      });\r\n    ;\r\n\r\n    event.waitUntil(\r\n      clients.matchAll({type: \"window\"})\r\n        .then(function (clientList) {\r\n          var launchURL = registration.scope;\r\n          if (OneSignal._defaultLaunchURL)\r\n            launchURL = OneSignal._defaultLaunchURL;\r\n          if (notificationData.launchURL)\r\n            launchURL = notificationData.launchURL;\r\n\r\n          for (var i = 0; i < clientList.length; i++) {\r\n            var client = clientList[i];\r\n            if ('focus' in client && client.url == launchURL) {\r\n              client.focus();\r\n\r\n              // targetOrigin not valid here as the service worker owns the page.\r\n              client.postMessage(notificationData);\r\n              return;\r\n            }\r\n          }\r\n\r\n          if (launchURL !== 'javascript:void(0);' && launchURL !== 'do_not_open') {\r\n            OneSignal._putDbValue(\"NotificationOpened\", {url: launchURL, data: notificationData});\r\n            clients.openWindow(launchURL).catch(function (error) {\r\n              // Should only fall into here if going to an external URL on Chrome older than 43.\r\n              clients.openWindow(registration.scope + \"redirector.html?url=\" + launchURL);\r\n            });\r\n          }\r\n        })\r\n        .catch(function (e) {\r\n          log.error(e);\r\n        })\r\n    );\r\n  },\r\n\r\n  _getTitle: function (incomingTitle, callback) {\r\n    if (incomingTitle != null) {\r\n      callback(incomingTitle);\r\n      return;\r\n    }\r\n\r\n    Promise.all([OneSignal._getDbValue('Options', 'defaultTitle'), OneSignal._getDbValue('Options', 'pageTitle')])\r\n      .then(function _getTitle_GotDefaultPageTitles(results) {\r\n        var defaultTitleResult = results[0];\r\n        var pageTitleResult = results[1];\r\n\r\n        if (defaultTitleResult) {\r\n          callback(defaultTitleResult.value);\r\n          return;\r\n        }\r\n        else if (pageTitleResult && pageTitleResult.value != null) {\r\n          callback(pageTitleResult.value);\r\n          return;\r\n        }\r\n        else {\r\n          callback('');\r\n        }\r\n      })\r\n      .catch(function (e) {\r\n        log.error(e);\r\n      });\r\n  },\r\n\r\n  // Displays notification from content received from OneSignal.\r\n  // This method is only called by ServiceWorker\r\n  _handleGCMMessage: function (serviceWorker, event) {\r\n    // TODO: Read data from the GCM payload when Chrome no longer requires the below command line parameter.\r\n    // --enable-push-message-payload\r\n    // The command line param is required even on Chrome 43 nightly build 2015/03/17.\r\n    if (event.data && event.data.text()[0] == \"{\") {\r\n      log.debug('Received data.text: ', event.data.text());\r\n      log.debug('Received data.json: ', event.data.json());\r\n    }\r\n\r\n    event.waitUntil(new Promise(\r\n      function (resolve, reject) {\r\n        OneSignal._getTitle(null, function (title) {\r\n          OneSignal._getDbValue('Options', 'defaultIcon')\r\n            .then(function _handleGCMMessage_GotDefaultIcon(defaultIconResult) {\r\n              OneSignal._getLastNotifications(function (response, appId) {\r\n                var notificationData = {\r\n                  id: response.custom.i,\r\n                  message: response.alert,\r\n                  additionalData: response.custom.a\r\n                };\r\n\r\n                if (response.title)\r\n                  notificationData.title = response.title;\r\n                else\r\n                  notificationData.title = title;\r\n\r\n                if (response.custom.u)\r\n                  notificationData.launchURL = response.custom.u;\r\n\r\n                if (response.icon)\r\n                  notificationData.icon = response.icon;\r\n                else if (defaultIconResult)\r\n                  notificationData.icon = defaultIconResult.value;\r\n\r\n                // Never nest the following line in a callback from the point of entering from _getLastNotifications\r\n                serviceWorker.registration.showNotification(notificationData.title, {\r\n                  body: response.alert,\r\n                  icon: notificationData.icon,\r\n                  tag: JSON.stringify(notificationData)\r\n                }).then(resolve)\r\n                  .catch(function (e) {\r\n                    log.error(e);\r\n                  });\r\n\r\n                OneSignal._getDbValue('Options', 'defaultUrl')\r\n                  .then(function (defaultUrlResult) {\r\n                    if (defaultUrlResult)\r\n                      OneSignal._defaultLaunchURL = defaultUrlResult.value;\r\n                  })\r\n                  .catch(function (e) {\r\n                    log.error(e);\r\n                  });\r\n                ;\r\n              }, resolve);\r\n            })\r\n            .catch(function (e) {\r\n              log.error(e);\r\n            });\r\n        });\r\n      }))\r\n  },\r\n\r\n  _getLastNotifications: function (itemCallback, completeCallback) {\r\n    OneSignal._getDbValue('Ids', 'userId')\r\n      .then(function _getLastNotifications_GotUserId(userIdResult) {\r\n        if (userIdResult) {\r\n          OneSignal._sendToOneSignalApi(\"players/\" + userIdResult.id + \"/chromeweb_notification\", \"GET\", null, function (response) {\r\n            for (var i = 0; i < response.length; i++)\r\n              itemCallback(JSON.parse(response[i]));\r\n          }, function () {\r\n            completeCallback();\r\n          });  // Failed callback\r\n        }\r\n        else {\r\n          log.debug(\"Error: could not get notificationId\");\r\n          completeCallback();\r\n        }\r\n      })\r\n      .catch(function (e) {\r\n        log.error(e);\r\n      });\r\n    ;\r\n  },\r\n\r\n  // HTTP & HTTPS - Runs on main page\r\n  _listener_receiveMessage: function receiveMessage(event) {\r\n    log.debug(\"_listener_receiveMessage: \", event);\r\n\r\n    if (OneSignal._initOptions == undefined)\r\n      return;\r\n\r\n    if (!__DEV__ && event.origin !== \"\" && event.origin !== \"https://onesignal.com\" && event.origin !== \"https://\" + OneSignal._initOptions.subdomainName + \".onesignal.com\")\r\n      return;\r\n\r\n    if (event.data.oneSignalInitPageReady) { // Only called on HTTP pages.\r\n      OneSignal._getDbValues(\"Options\")\r\n        .then(function _listener_receiveMessage(options) {\r\n          log.debug(\"current options\", options);\r\n          if (!options.defaultUrl)\r\n            options.defaultUrl = document.URL;\r\n          if (!options.defaultTitle)\r\n            options.defaultTitle = document.title;\r\n\r\n          options.parent_url = document.URL;\r\n          log.debug(\"Posting message to port[0]\", event.ports[0]);\r\n          event.ports[0].postMessage({initOptions: options});\r\n        })\r\n        .catch(function (e) {\r\n          log.error('_listener_receiveMessage:', e);\r\n        });\r\n\r\n      var eventData = event.data.oneSignalInitPageReady;\r\n\r\n      if (eventData.isIframe)\r\n        OneSignal._iframePort = event.ports[0];\r\n\r\n      if (eventData.userId)\r\n        OneSignal._putDbValue(\"Ids\", {type: \"userId\", id: eventData.userId});\r\n      if (eventData.registrationId)\r\n        OneSignal._putDbValue(\"Ids\", {type: \"registrationId\", id: eventData.registrationId});\r\n\r\n      OneSignal._fireNotificationEnabledCallback(eventData.isPushEnabled);\r\n      OneSignal._sendUnsentTags();\r\n    }\r\n    else if (event.data.currentNotificationPermission) // Subdomain Only\r\n      OneSignal._fireNotificationEnabledCallback(event.data.currentNotificationPermission.isPushEnabled);\r\n    else if (event.data.idsAvailable) { // Only called on HTTP pages.\r\n      sessionStorage.setItem(\"ONE_SIGNAL_SESSION\", true);\r\n      OneSignal._putDbValue(\"Ids\", {type: \"userId\", id: event.data.idsAvailable.userId});\r\n      OneSignal._putDbValue(\"Ids\", {type: \"registrationId\", id: event.data.idsAvailable.registrationId});\r\n\r\n      if (OneSignal._idsAvailable_callback.length > 0) {\r\n        while (OneSignal._idsAvailable_callback.length > 0) {\r\n          var curr_callback = OneSignal._idsAvailable_callback.pop()\r\n          curr_callback({\r\n            userId: event.data.idsAvailable.userId,\r\n            registrationId: event.data.idsAvailable.registrationId\r\n          });\r\n        }\r\n      }\r\n      OneSignal._sendUnsentTags();\r\n    }\r\n    else if (event.data.httpsPromptAccepted) { // HTTPS Only\r\n      OneSignal.registerForPushNotifications();\r\n      OneSignal.setSubscription(true);\r\n      let elem = document.getElementById('OneSignal-iframe-modal');\r\n      elem.parentNode.removeChild(elem);\r\n      OneSignal._triggerEvent_customPromptClicked('granted');\r\n    }\r\n    else if (event.data.httpsPromptCanceled) { // HTTPS Only\r\n      let elem = document.getElementById('OneSignal-iframe-modal');\r\n      elem.parentNode.removeChild(elem);\r\n      OneSignal._triggerEvent_customPromptClicked('denied');\r\n    }\r\n    else if (event.data.httpPromptAccepted) { // HTTP Only\r\n      OneSignal._triggerEvent_customPromptClicked('granted');\r\n    }\r\n    else if (event.data.httpPromptCanceled) { // HTTP Only\r\n      OneSignal._triggerEvent_customPromptClicked('denied');\r\n    }\r\n    else if (OneSignal._notificationOpened_callback) // HTTP and HTTPS\r\n      OneSignal._notificationOpened_callback(event.data);\r\n  },\r\n\r\n  addListenerForNotificationOpened: function (callback) {\r\n    OneSignal._notificationOpened_callback = callback;\r\n    if (window) {\r\n      OneSignal._getDbValue(\"NotificationOpened\", document.URL)\r\n        .then(function (notificationOpenedResult) {\r\n          if (notificationOpenedResult) {\r\n            OneSignal._deleteDbValue(\"NotificationOpened\", document.URL);\r\n            OneSignal._notificationOpened_callback(notificationOpenedResult.data);\r\n          }\r\n        })\r\n        .catch(function (e) {\r\n          log.error(e);\r\n        });\r\n      ;\r\n    }\r\n  },\r\n\r\n  // Subdomain - Fired from message received from iframe.\r\n  _fireNotificationEnabledCallback: function (notifPermssion) {\r\n    if (OneSignal._isNotificationEnabledCallback) {\r\n      OneSignal._isNotificationEnabledCallback(notifPermssion);\r\n      OneSignal._isNotificationEnabledCallback = null;\r\n    }\r\n  },\r\n\r\n  getIdsAvailable: function (callback) {\r\n    if (callback === undefined)\r\n      return;\r\n\r\n    OneSignal._idsAvailable_callback.push(callback);\r\n\r\n    Promise.all([OneSignal._getDbValue('Ids', 'userId'), OneSignal._getDbValue('Ids', 'registrationId')])\r\n      .then(function getIdsAvailable_GotUserRegistrationIds(results) {\r\n        var userIdResult = results[0];\r\n        var registrationIdResult = results[1];\r\n\r\n        if (userIdResult) {\r\n          if (registrationIdResult) {\r\n            while (OneSignal._idsAvailable_callback.length > 0) {\r\n              var curr_callback = OneSignal._idsAvailable_callback.pop();\r\n              curr_callback({\r\n                userId: userIdResult.id,\r\n                registrationId: registrationIdResult.id\r\n              });\r\n            }\r\n          }\r\n          else\r\n            while (OneSignal._idsAvailable_callback.length > 0) {\r\n              var curr_callback = OneSignal._idsAvailable_callback.pop();\r\n              curr_callback({userId: userIdResult.id, registrationId: null});\r\n            }\r\n        }\r\n      })\r\n      .catch(function (e) {\r\n        log.error(e);\r\n      });\r\n    ;\r\n  },\r\n\r\n  getTags: function (callback) {\r\n    OneSignal._getDbValue('Ids', 'userId')\r\n      .then(function (userIdResult) {\r\n        if (userIdResult) {\r\n          OneSignal._sendToOneSignalApi(\"players/\" + userIdResult.id, 'GET', null, function (response) {\r\n            callback(response.tags);\r\n          });\r\n        }\r\n      })\r\n      .catch(function (e) {\r\n        log.error(e);\r\n      });\r\n    ;\r\n  },\r\n\r\n  isPushNotificationsEnabled: function (callback) {\r\n    if (!OneSignal.isPushNotificationsSupported()) {\r\n      log.warn(\"Your browser does not support push notifications.\");\r\n      return;\r\n    }\r\n\r\n    // If Subdomain\r\n    if (OneSignal._initOptions.subdomainName && !OneSignal._isBrowserSafari()) {\r\n      OneSignal._isNotificationEnabledCallback = callback;\r\n      if (OneSignal._iframePort)\r\n        OneSignal._iframePort.postMessage({getNotificationPermission: true});\r\n      return;\r\n    }\r\n\r\n    // If HTTPS\r\n\r\n    Promise.all([OneSignal._getDbValue('Ids', 'registrationId'), OneSignal._getDbValue('Options', 'subscription')])\r\n      .then(function (results) {\r\n        var registrationIdResult = results[0];\r\n        var subscriptionResult = results[1];\r\n\r\n        if (registrationIdResult) {\r\n          if (subscriptionResult && !subscriptionResult.value)\r\n            return callback(false);\r\n\r\n          callback(Notification.permission == \"granted\");\r\n        }\r\n        else\r\n          callback(false);\r\n      })\r\n      .catch(function (e) {\r\n        log.error(e);\r\n      });\r\n  },\r\n\r\n  _isSupportedSafari: function () {\r\n    var safariVersion = navigator.appVersion.match(\"Version/([0-9]?).* Safari\");\r\n    if (safariVersion == null)\r\n      return false;\r\n    if (/iPhone|iPad|iPod/i.test(navigator.userAgent))\r\n      return false;\r\n    return (parseInt(safariVersion[1]) > 6);\r\n  },\r\n\r\n  _isBrowserSafari: function() {\r\n    var safariVersion = navigator.appVersion.match(\"Version/([0-9]?).* Safari\");\r\n    return safariVersion != null ;\r\n  },\r\n\r\n  _isSupportedFireFox: function () {\r\n    var fireFoxVersion = navigator.userAgent.match(/(Firefox\\/)([0-9]{2,}\\.[0-9]{1,})/);\r\n    if (fireFoxVersion)\r\n      return parseInt(fireFoxVersion[2].substring(0, 2)) > 43;\r\n    return false;\r\n  },\r\n\r\n  _isBrowserFirefox: function() {\r\n    var fireFoxVersion = navigator.userAgent.match(/(Firefox\\/)([0-9]{2,}\\.[0-9]{1,})/);\r\n    return fireFoxVersion != null ;\r\n  },\r\n\r\n  _getFirefoxVersion: function() {\r\n    var fireFoxVersion = navigator.userAgent.match(/(Firefox\\/)([0-9]{2,}\\.[0-9]{1,})/);\r\n    if (fireFoxVersion)\r\n      return parseInt(fireFoxVersion[2].substring(0, 2));\r\n    else return -1;\r\n  },\r\n\r\n  isPushNotificationsSupported: function () {\r\n    var chromeVersion = navigator.appVersion.match(/Chrome\\/(.*?) /);\r\n\r\n    if (OneSignal._isSupportedFireFox())\r\n      return true;\r\n\r\n    if (OneSignal._isSupportedSafari())\r\n      return true;\r\n\r\n    // Chrome is not found in appVersion.\r\n    if (!chromeVersion)\r\n      return false;\r\n\r\n    // Microsoft Edge\r\n    if (navigator.appVersion.match(/Edge/))\r\n      return false;\r\n\r\n    // Android Chrome WebView\r\n    if (navigator.appVersion.match(/ wv/))\r\n      return false;\r\n\r\n    // Opera\r\n    if (navigator.appVersion.match(/OPR\\//))\r\n      return false;\r\n\r\n    // The user is on iOS\r\n    if (/iPad|iPhone|iPod/.test(navigator.platform))\r\n      return false;\r\n\r\n    return parseInt(chromeVersion[1].substring(0, 2)) > 41;\r\n  },\r\n\r\n  _getNotificationTypes: function (callback) {\r\n    OneSignal._getSubscription(function (db_subscriptionSet) {\r\n      callback(db_subscriptionSet ? 1 : -2);\r\n    });\r\n  },\r\n\r\n  setSubscription: function (newSubscription) {\r\n    if (OneSignal._iframePort)\r\n      OneSignal._iframePort.postMessage({setSubdomainState: {setSubscription: newSubscription}});\r\n    else {\r\n      OneSignal._getSubscription(function (currentSubscription) {\r\n        if (currentSubscription != newSubscription) {\r\n          OneSignal._putDbValue(\"Options\", {key: \"subscription\", value: newSubscription});\r\n          OneSignal._getDbValue('Ids', 'userId')\r\n            .then(function (userIdResult) {\r\n              if (userIdResult)\r\n                OneSignal._sendToOneSignalApi(\"players/\" + userIdResult.id, \"PUT\", {\r\n                  app_id: OneSignal._app_id,\r\n                  notification_types: newSubscription ? 1 : -2\r\n                }, function setSubscriptionSetCallback() {\r\n                  OneSignal._triggerEvent_internalSubscriptionSet(newSubscription);\r\n                });\r\n            })\r\n            .catch(function (e) {\r\n              log.error(e);\r\n            });\r\n        }\r\n      });\r\n    }\r\n  },\r\n\r\n  _getSubscription: function (callback) {\r\n    OneSignal._getDbValue('Options', 'subscription')\r\n      .then(function (subscriptionResult) {\r\n        callback(!(subscriptionResult && subscriptionResult.value == false));\r\n      })\r\n      .catch(function (e) {\r\n        log.error(e);\r\n      });\r\n    ;\r\n  },\r\n\r\n  _safePostMessage: function (creator, data, targetOrigin, receiver) {\r\n    var tOrigin = targetOrigin.toLowerCase();\r\n\r\n    // If we are trying to target a http site allow the https version. (w/ or w/o 'wwww.' too)\r\n    if (tOrigin.startsWith(\"http://\")) {\r\n      var queryDict = {};\r\n      location.search.substr(1).split(\"&\").forEach(function (item) {\r\n        queryDict[item.split(\"=\")[0]] = item.split(\"=\")[1]\r\n      });\r\n      var validPreURLRegex = /^http(s|):\\/\\/(www\\.|)/;\r\n      tOrigin = tOrigin.replace(validPreURLRegex, queryDict[\"hostPageProtocol\"]);\r\n    }\r\n\r\n    if (receiver)\r\n      creator.postMessage(data, tOrigin, receiver);\r\n    else\r\n      creator.postMessage(data, tOrigin);\r\n  },\r\n\r\n  _process_pushes: function (array) {\r\n    for (var i = 0; i < array.length; i++)\r\n      OneSignal.push(array[i]);\r\n  },\r\n\r\n  push: function (item) {\r\n    if (typeof(item) == \"function\")\r\n      item();\r\n    else {\r\n      var functionName = item.shift();\r\n      OneSignal[functionName].apply(null, item);\r\n    }\r\n  }\r\n};\r\n\r\n// If imported on your page.\r\nif (typeof window !== \"undefined\")\r\n  window.addEventListener(\"message\", OneSignal._listener_receiveMessage, false);\r\nelse { // if imported from the service worker.\r\n  importScripts('https://cdn.onesignal.com/sdks/serviceworker-cache-polyfill.js');\r\n\r\n  self.addEventListener('push', function (event) {\r\n    OneSignal._handleGCMMessage(self, event); // Can handle messages from any browser (except Safari), rename method\r\n  });\r\n  self.addEventListener('notificationclick', function (event) {\r\n    // Also only by SW\r\n    OneSignal._handleNotificationOpened(event);\r\n  });\r\n\r\n  var isSWonSubdomain = location.href.match(/https\\:\\/\\/.*\\.onesignal.com\\/sdks\\//) != null;\r\n  if (__DEV__)\r\n    isSWonSubdomain = true;\r\n\r\n  self.addEventListener('install', function (event) {\r\n    log.debug(\"OneSignal Installed service worker \" + self.location.pathname + \":\" + OneSignal._VERSION);\r\n    if (self.location.pathname.indexOf(\"OneSignalSDKWorker.js\") > -1)\r\n      OneSignal._putDbValue(\"Ids\", {type: \"WORKER1_ONE_SIGNAL_SW_VERSION\", id: OneSignal._VERSION});\r\n    else\r\n      OneSignal._putDbValue(\"Ids\", {type: \"WORKER2_ONE_SIGNAL_SW_VERSION\", id: OneSignal._VERSION});\r\n\r\n    if (isSWonSubdomain) {\r\n      event.waitUntil(\r\n        caches.open(\"OneSignal_\" + OneSignal._VERSION).then(function (cache) {\r\n          return cache.addAll([\r\n            '/sdks/initOneSignalHttpIframe',\r\n            '/sdks/initOneSignalHttpIframe?session=*',\r\n            '/sdks/manifest_json']);\r\n        })\r\n          .catch(function (e) {\r\n            log.error(e);\r\n          })\r\n      );\r\n    }\r\n  });\r\n\r\n  if (isSWonSubdomain) {\r\n    self.addEventListener('fetch', function (event) {\r\n      event.respondWith(\r\n        caches.match(event.request)\r\n          .then(function (response) {\r\n            // Cache hit - return response\r\n            if (response)\r\n              return response;\r\n\r\n            return fetch(event.request);\r\n          }\r\n        )\r\n          .catch(function (e) {\r\n            log.error(e);\r\n          })\r\n      );\r\n    });\r\n  }\r\n}\r\n\r\nmodule.exports = OneSignal;\n\n\n/** WEBPACK FOOTER **\n ** C:/Users/Josh/Documents/GameThrive/OneSignalPublicRepos/OneSignal-Website-SDK/src/sdk.js\n **/","/*** IMPORTS FROM imports-loader ***/\n(function() {\n\n(function() {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var list = this.map[name]\n    if (!list) {\n      list = []\n      this.map[name] = list\n    }\n    list.push(value)\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    var values = this.map[normalizeName(name)]\n    return values ? values[0] : null\n  }\n\n  Headers.prototype.getAll = function(name) {\n    return this.map[normalizeName(name)] || []\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = [normalizeValue(value)]\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    Object.getOwnPropertyNames(this.map).forEach(function(name) {\n      this.map[name].forEach(function(value) {\n        callback.call(thisArg, value, name, this)\n      }, this)\n    }, this)\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    reader.readAsArrayBuffer(blob)\n    return fileReaderReady(reader)\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    reader.readAsText(blob)\n    return fileReaderReady(reader)\n  }\n\n  var support = {\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob();\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (!body) {\n        this._bodyText = ''\n      } else if (support.arrayBuffer && ArrayBuffer.prototype.isPrototypeOf(body)) {\n        // Only support ArrayBuffers for POST method.\n        // Receiving ArrayBuffers happens via Blobs, instead.\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n\n      this.text = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return readBlobAsText(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as text')\n        } else {\n          return Promise.resolve(this._bodyText)\n        }\n      }\n    } else {\n      this.text = function() {\n        var rejected = consumed(this)\n        return rejected ? rejected : Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n    if (Request.prototype.isPrototypeOf(input)) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = input\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this)\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function headers(xhr) {\n    var head = new Headers()\n    var pairs = xhr.getAllResponseHeaders().trim().split('\\n')\n    pairs.forEach(function(header) {\n      var split = header.trim().split(':')\n      var key = split.shift().trim()\n      var value = split.join(':').trim()\n      head.append(key, value)\n    })\n    return head\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this._initBody(bodyInit)\n    this.type = 'default'\n    this.status = options.status\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = options.statusText\n    this.headers = options.headers instanceof Headers ? options.headers : new Headers(options.headers)\n    this.url = options.url || ''\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers;\n  self.Request = Request;\n  self.Response = Response;\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request\n      if (Request.prototype.isPrototypeOf(input) && !init) {\n        request = input\n      } else {\n        request = new Request(input, init)\n      }\n\n      var xhr = new XMLHttpRequest()\n\n      function responseURL() {\n        if ('responseURL' in xhr) {\n          return xhr.responseURL\n        }\n\n        // Avoid security warnings on getResponseHeader when not allowed by CORS\n        if (/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())) {\n          return xhr.getResponseHeader('X-Request-URL')\n        }\n\n        return;\n      }\n\n      xhr.onload = function() {\n        var status = (xhr.status === 1223) ? 204 : xhr.status\n        if (status < 100 || status > 599) {\n          reject(new TypeError('Network request failed'))\n          return\n        }\n        var options = {\n          status: status,\n          statusText: xhr.statusText,\n          headers: headers(xhr),\n          url: responseURL()\n        }\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})();\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = global.fetch\n}.call(global));\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/imports-loader?this=>global!./~/exports-loader?global.fetch!./~/whatwg-fetch/fetch.js\n ** module id = 3\n ** module chunks = 0 1\n **/","import { isDev } from './utils.js';\r\n\r\nexport const DEV_HOST = 'https://192.168.1.182:3000';\r\nexport const PROD_HOST = 'https://onesignal.com';\r\nexport const HOST_URL = (isDev() ? DEV_HOST : PROD_HOST) + '/api/v1/';\n\n\n/** WEBPACK FOOTER **\n ** C:/Users/Josh/Documents/GameThrive/OneSignalPublicRepos/OneSignal-Website-SDK/src/vars.js\n **/","export function getHumanizedTimeDuration(timeDurationInMilliseconds) {\r\n  function addPluralSuffix(number) {\r\n    return (number > 1) ? 's' : '';\r\n  }\r\n  var duration = Math.floor(timeDurationInMilliseconds / 1000);\r\n\r\n  var years = Math.floor(duration / 31536000);\r\n  if (years)\r\n    return years + ' year' + addPluralSuffix(years);\r\n\r\n  var days = Math.floor((duration %= 31536000) / 86400);\r\n  if (days)\r\n    return days + ' day' + addPluralSuffix(days);\r\n\r\n  var hours = Math.floor((duration %= 86400) / 3600);\r\n  if (hours)\r\n    return hours + ' hour' + addPluralSuffix(hours);\r\n\r\n  var minutes = Math.floor((duration %= 3600) / 60);\r\n  if (minutes)\r\n    return minutes + ' minute' + addPluralSuffix(minutes);\r\n\r\n  var seconds = duration % 60;\r\n  if (seconds)\r\n    return seconds + ' second' + addPluralSuffix(seconds);\r\n\r\n  return 'just now';\r\n}\r\n\r\nexport function isServiceWorkerContext() {\r\n  return typeof window === \"undefined\";\r\n}\r\n\r\nexport function isDev() {\r\n  return __DEV__;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** C:/Users/Josh/Documents/GameThrive/OneSignalPublicRepos/OneSignal-Website-SDK/src/utils.js\n **/","import { HOST_URL } from './vars.js'\r\nimport log from 'loglevel';\r\n\r\nexport function apiCall(action, method, data) {\r\n  let headers = new Headers();\r\n  headers.append('Content-Type', 'application/json;charset=UTF-8');\r\n\r\n  let contents = {\r\n    method: method || 'NO_METHOD_SPECIFIED',\r\n    headers: headers,\r\n    cache: 'no-cache',\r\n    body: JSON.stringify(data)\r\n  };\r\n\r\n  return new Promise((resolve, reject) => {\r\n    fetch(HOST_URL + action, contents)\r\n      .then(function status(response) {\r\n        if (response.status >= 200 && response.status < 300)\r\n          resolve(response.json());\r\n        else\r\n          reject(new Error(response.statusText));\r\n      })\r\n      .catch(function (e) {\r\n        reject(e);\r\n      });\r\n  });\r\n}\r\n\r\nexport function sendNotification(appId, playerIds, titles, contents) {\r\n  var params = {\r\n    'app_id': appId,\r\n    'headings': titles,\r\n    'contents': contents,\r\n    'include_player_ids': playerIds,\r\n    'isAnyWeb': true,\r\n    'url': 'javascript:void(0);'\r\n  };\r\n  return apiCall('notifications', 'POST', params);\r\n}\n\n\n/** WEBPACK FOOTER **\n ** C:/Users/Josh/Documents/GameThrive/OneSignalPublicRepos/OneSignal-Website-SDK/src/api.js\n **/","/*\r\n* loglevel - https://github.com/pimterry/loglevel\r\n*\r\n* Copyright (c) 2013 Tim Perry\r\n* Licensed under the MIT license.\r\n*/\r\n(function (root, definition) {\r\n    \"use strict\";\r\n    if (typeof module === 'object' && module.exports && typeof require === 'function') {\r\n        module.exports = definition();\r\n    } else if (typeof define === 'function' && typeof define.amd === 'object') {\r\n        define(definition);\r\n    } else {\r\n        root.log = definition();\r\n    }\r\n}(this, function () {\r\n    \"use strict\";\r\n    var noop = function() {};\r\n    var undefinedType = \"undefined\";\r\n\r\n    function realMethod(methodName) {\r\n        if (typeof console === undefinedType) {\r\n            return false; // We can't build a real method without a console to log to\r\n        } else if (console[methodName] !== undefined) {\r\n            return bindMethod(console, methodName);\r\n        } else if (console.log !== undefined) {\r\n            return bindMethod(console, 'log');\r\n        } else {\r\n            return noop;\r\n        }\r\n    }\r\n\r\n    function bindMethod(obj, methodName) {\r\n        var method = obj[methodName];\r\n        if (typeof method.bind === 'function') {\r\n            return method.bind(obj);\r\n        } else {\r\n            try {\r\n                return Function.prototype.bind.call(method, obj);\r\n            } catch (e) {\r\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\r\n                return function() {\r\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\r\n                };\r\n            }\r\n        }\r\n    }\r\n\r\n    // these private functions always need `this` to be set properly\r\n\r\n    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {\r\n        return function () {\r\n            if (typeof console !== undefinedType) {\r\n                replaceLoggingMethods.call(this, level, loggerName);\r\n                this[methodName].apply(this, arguments);\r\n            }\r\n        };\r\n    }\r\n\r\n    function replaceLoggingMethods(level, loggerName) {\r\n        /*jshint validthis:true */\r\n        for (var i = 0; i < logMethods.length; i++) {\r\n            var methodName = logMethods[i];\r\n            this[methodName] = (i < level) ?\r\n                noop :\r\n                this.methodFactory(methodName, level, loggerName);\r\n        }\r\n    }\r\n\r\n    function defaultMethodFactory(methodName, level, loggerName) {\r\n        /*jshint validthis:true */\r\n        return realMethod(methodName) ||\r\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\r\n    }\r\n\r\n    var logMethods = [\r\n        \"trace\",\r\n        \"debug\",\r\n        \"info\",\r\n        \"warn\",\r\n        \"error\"\r\n    ];\r\n\r\n    function Logger(name, defaultLevel, factory) {\r\n      var self = this;\r\n      var currentLevel;\r\n      var storageKey = \"loglevel\";\r\n      if (name) {\r\n        storageKey += \":\" + name;\r\n      }\r\n\r\n      function persistLevelIfPossible(levelNum) {\r\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\r\n\r\n          // Use localStorage if available\r\n          try {\r\n              window.localStorage[storageKey] = levelName;\r\n              return;\r\n          } catch (ignore) {}\r\n\r\n          // Use session cookie as fallback\r\n          try {\r\n              window.document.cookie =\r\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\r\n          } catch (ignore) {}\r\n      }\r\n\r\n      function getPersistedLevel() {\r\n          var storedLevel;\r\n\r\n          try {\r\n              storedLevel = window.localStorage[storageKey];\r\n          } catch (ignore) {}\r\n\r\n          if (typeof storedLevel === undefinedType) {\r\n              try {\r\n                  var cookie = window.document.cookie;\r\n                  var location = cookie.indexOf(\r\n                      encodeURIComponent(storageKey) + \"=\");\r\n                  if (location) {\r\n                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];\r\n                  }\r\n              } catch (ignore) {}\r\n          }\r\n\r\n          // If the stored level is not valid, treat it as if nothing was stored.\r\n          if (self.levels[storedLevel] === undefined) {\r\n              storedLevel = undefined;\r\n          }\r\n\r\n          return storedLevel;\r\n      }\r\n\r\n      /*\r\n       *\r\n       * Public API\r\n       *\r\n       */\r\n\r\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\r\n          \"ERROR\": 4, \"SILENT\": 5};\r\n\r\n      self.methodFactory = factory || defaultMethodFactory;\r\n\r\n      self.getLevel = function () {\r\n          return currentLevel;\r\n      };\r\n\r\n      self.setLevel = function (level, persist) {\r\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\r\n              level = self.levels[level.toUpperCase()];\r\n          }\r\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\r\n              currentLevel = level;\r\n              if (persist !== false) {  // defaults to true\r\n                  persistLevelIfPossible(level);\r\n              }\r\n              replaceLoggingMethods.call(self, level, name);\r\n              if (typeof console === undefinedType && level < self.levels.SILENT) {\r\n                  return \"No console available for logging\";\r\n              }\r\n          } else {\r\n              throw \"log.setLevel() called with invalid level: \" + level;\r\n          }\r\n      };\r\n\r\n      self.setDefaultLevel = function (level) {\r\n          if (!getPersistedLevel()) {\r\n              self.setLevel(level, false);\r\n          }\r\n      };\r\n\r\n      self.enableAll = function(persist) {\r\n          self.setLevel(self.levels.TRACE, persist);\r\n      };\r\n\r\n      self.disableAll = function(persist) {\r\n          self.setLevel(self.levels.SILENT, persist);\r\n      };\r\n\r\n      // Initialize with the right level\r\n      var initialLevel = getPersistedLevel();\r\n      if (initialLevel == null) {\r\n          initialLevel = defaultLevel == null ? \"WARN\" : defaultLevel;\r\n      }\r\n      self.setLevel(initialLevel, false);\r\n    }\r\n\r\n    /*\r\n     *\r\n     * Package-level API\r\n     *\r\n     */\r\n\r\n    var defaultLogger = new Logger();\r\n\r\n    var _loggersByName = {};\r\n    defaultLogger.getLogger = function getLogger(name) {\r\n        if (typeof name !== \"string\" || name === \"\") {\r\n          throw new TypeError(\"You must supply a name when creating a logger.\");\r\n        }\r\n\r\n        var logger = _loggersByName[name];\r\n        if (!logger) {\r\n          logger = _loggersByName[name] = new Logger(\r\n            name, defaultLogger.getLevel(), defaultLogger.methodFactory);\r\n        }\r\n        return logger;\r\n    };\r\n\r\n    // Grab the current global log variable in case of overwrite\r\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\r\n    defaultLogger.noConflict = function() {\r\n        if (typeof window !== undefinedType &&\r\n               window.log === defaultLogger) {\r\n            window.log = _log;\r\n        }\r\n\r\n        return defaultLogger;\r\n    };\r\n\r\n    return defaultLogger;\r\n}));\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/loglevel/lib/loglevel.js\n ** module id = 7\n ** module chunks = 0 1\n **/","/*\r\n LimitStore.put('colorado', 'rocky');\r\n [\"rocky\"]\r\n LimitStore.put('colorado', 'mountain');\r\n [\"rocky\", \"mountain\"]\r\n LimitStore.put('colorado', 'national');\r\n [\"mountain\", \"national\"]\r\n LimitStore.put('colorado', 'park');\r\n [\"national\", \"park\"]\r\n */\r\nfunction LimitStore() {\r\n}\r\n\r\nLimitStore.store = {};\r\nLimitStore.LIMIT = 2;\r\n\r\nLimitStore.put = function (key, value) {\r\n  if (LimitStore.store[key] === undefined) {\r\n    LimitStore.store[key] = [null, null];\r\n  }\r\n  LimitStore.store[key].push(value);\r\n  if (LimitStore.store[key].length == LimitStore.LIMIT + 1) {\r\n    LimitStore.store[key].shift();\r\n  }\r\n  return LimitStore.store[key];\r\n};\r\n\r\nLimitStore.get = function (key) {\r\n  return LimitStore.store[key];\r\n};\r\n\r\nexport default LimitStore;\n\n\n/** WEBPACK FOOTER **\n ** C:/Users/Josh/Documents/GameThrive/OneSignalPublicRepos/OneSignal-Website-SDK/src/limitStore.js\n **/","if (typeof window !== \"undefined\") {\r\n  (function () {\r\n    function CustomEvent(event, params) {\r\n      params = params || {bubbles: false, cancelable: false, details: undefined};\r\n      var evt = document.createEvent('CustomEvent');\r\n      evt.initCustomEvent(event, params.bubbles, params.cancelable, params.details);\r\n      return evt;\r\n    }\r\n\r\n    CustomEvent.prototype = window.Event.prototype;\r\n\r\n    window.CustomEvent = CustomEvent;\r\n  })();\r\n}\n\n\n/** WEBPACK FOOTER **\n ** C:/Users/Josh/Documents/GameThrive/OneSignalPublicRepos/OneSignal-Website-SDK/src/events.js\n **/"],"sourceRoot":""}