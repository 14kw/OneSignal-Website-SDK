!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports}var installedModules={};__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _vars=__webpack_require__(4);var _environment=__webpack_require__(52);var _environment2=_interopRequireDefault(_environment);if(_environment2["default"].isBrowser()){if("undefined"!=typeof OneSignal)var predefinedOneSignalPushes=OneSignal;__webpack_require__(1);if(predefinedOneSignalPushes)OneSignal._process_pushes(predefinedOneSignalPushes)}else if(_environment2["default"].isServiceWorker())__webpack_require__(68)},function(module,exports,__webpack_require__){(function(global){module.exports=global.OneSignal=__webpack_require__(2)}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){(function(fetch){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;else{var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _vars=__webpack_require__(4);var _environment=__webpack_require__(52);var _environment2=_interopRequireDefault(_environment);__webpack_require__(53);var _api=__webpack_require__(6);var _loglevel=__webpack_require__(7);var _loglevel2=_interopRequireDefault(_loglevel);var _limitStore=__webpack_require__(8);var _limitStore2=_interopRequireDefault(_limitStore);var _events=__webpack_require__(55);var _events2=_interopRequireDefault(_events);var _bell=__webpack_require__(56);var _bell2=_interopRequireDefault(_bell);var _database=__webpack_require__(67);var _database2=_interopRequireDefault(_database);var _bowser=__webpack_require__(57);var Browser=_interopRequireWildcard(_bowser);var _utils=__webpack_require__(5);var OneSignal={_VERSION:"1.8.1",_API_URL:_vars.API_URL,_app_id:null,_tagsToSendOnRegister:null,_notificationOpened_callback:null,_idsAvailable_callback:[],_defaultLaunchURL:null,_initOptions:null,_httpRegistration:false,_main_page_port:null,_isNotificationEnabledCallback:[],_subscriptionSet:true,_initOneSignalHttp:null,_sessionIframeAdded:false,_useHttpMode:null,_windowWidth:550,_windowHeight:480,_isUninitiatedVisitor:false,_isNewVisitor:false,_isInitialized:false,bell:null,store:_limitStore2["default"],environment:_environment2["default"],event:_events2["default"],LOGGING:true,browser:Browser,log:_loglevel2["default"],SERVICE_WORKER_UPDATER_PATH:"OneSignalSDKUpdaterWorker.js",SERVICE_WORKER_PATH:"OneSignalSDKWorker.js",SERVICE_WORKER_PARAM:{},EVENTS:{CUSTOM_PROMPT_CLICKED:"onesignal.prompt.custom.clicked",NATIVE_PROMPT_PERMISSIONCHANGED:"onesignal.prompt.native.permissionchanged",SUBSCRIPTION_CHANGED:"onesignal.subscription.changed",WELCOME_NOTIFICATION_SENT:"onesignal.actions.welcomenotificationsent",INTERNAL_SUBSCRIPTIONSET:"onesignal.internal.subscriptionset",SDK_INITIALIZED:"onesignal.sdk.initialized"},_sendToOneSignalApi:function _sendToOneSignalApi(url,action,inData,callback,failedCallback){_loglevel2["default"].debug("Calling "+action+" "+(OneSignal._API_URL+url)+" with data:",inData);var contents={method:action};if(inData){contents.headers={"Content-type":"application/json;charset=UTF-8"};contents.body=JSON.stringify(inData)}fetch(OneSignal._API_URL+url,contents).then(function status(response){if(response.status>=200&&response.status<300)return Promise.resolve(response);else return Promise.reject(new Error(response.statusText))}).then(function status(response){return response.json()}).then(function(jsonData){if(null!=callback)callback(jsonData)})["catch"](function(e){_loglevel2["default"].error("OneSignal._sendToOneSignalApi() failed:",e);if(null!=failedCallback)failedCallback()})},_getLanguage:function _getLanguage(){return navigator.language?navigator.language.length>3?navigator.language.substring(0,2):navigator.language:"en"},_getPlayerId:function _getPlayerId(value,callback){if(value)callback(value);else _database2["default"].get("Ids","userId").then(function _getPlayerId_gotUserId(result){if(result)callback(result.id);else callback(null)})["catch"](function(e){_loglevel2["default"].error(e)})},_registerWithOneSignal:function _registerWithOneSignal(appId,registrationId,deviceType){_database2["default"].get("Ids","userId").then(function _registerWithOneSignal_GotUserId(userIdResult){OneSignal._getNotificationTypes(function(notif_types){var requestUrl="players";var jsonData={app_id:appId,device_type:deviceType,language:OneSignal._getLanguage(),timezone:-60*(new Date).getTimezoneOffset(),device_model:navigator.platform+" "+Browser.name,device_os:Browser.version,sdk:OneSignal._VERSION};if(userIdResult){requestUrl="players/"+userIdResult.id+"/on_session";jsonData.notification_types=notif_types}else if(1!=notif_types)jsonData.notification_types=notif_types;if(registrationId){jsonData.identifier=registrationId;_database2["default"].put("Ids",{type:"registrationId",id:registrationId})}OneSignal._sendToOneSignalApi(requestUrl,"POST",jsonData,function registeredCallback(responseJSON){sessionStorage.setItem("ONE_SIGNAL_SESSION",true);if(responseJSON.id){_database2["default"].put("Ids",{type:"userId",id:responseJSON.id});OneSignal._sendUnsentTags()}OneSignal._getPlayerId(responseJSON.id,function(userId){if(OneSignal._idsAvailable_callback.length>0)for(;OneSignal._idsAvailable_callback.length>0;){var curr_callback=OneSignal._idsAvailable_callback.pop();curr_callback({userId:userId,registrationId:registrationId})}if(OneSignal._httpRegistration){_loglevel2["default"].debug("Sending player Id and registrationId back to host page");_loglevel2["default"].debug(OneSignal._initOptions);var creator=opener||parent;OneSignal._safePostMessage(creator,{idsAvailable:{userId:userId,registrationId:registrationId},from:_environment2["default"].getEnv()},OneSignal._initOptions.origin,null);OneSignal._safePostMessage(creator,{httpNativePromptPermissionChanged:OneSignal._getNotificationPermission(),from:_environment2["default"].getEnv()},OneSignal._initOptions.origin,null);if(opener)window.close()}})})})})["catch"](function(e){_loglevel2["default"].error(e)})},_sendUnsentTags:function _sendUnsentTags(){if(OneSignal._tagsToSendOnRegister){OneSignal.sendTags(OneSignal._tagsToSendOnRegister);OneSignal._tagsToSendOnRegister=null}},setDefaultNotificationUrl:function setDefaultNotificationUrl(url){_database2["default"].put("Options",{key:"defaultUrl",value:url})},setDefaultIcon:function setDefaultIcon(icon){_database2["default"].put("Options",{key:"defaultIcon",value:icon})},setDefaultTitle:function setDefaultTitle(title){_database2["default"].put("Options",{key:"defaultTitle",value:title})},_visibilitychange:function _visibilitychange(){if("visible"==document.visibilityState){document.removeEventListener("visibilitychange",OneSignal._visibilitychange);OneSignal._sessionInit({})}},onCustomPromptClicked:function onCustomPromptClicked(event){OneSignal._checkTrigger_eventSubscriptionChanged()},onNativePromptChanged:function onNativePromptChanged(event){OneSignal._checkTrigger_eventSubscriptionChanged()},_onSubscriptionChanged:function _onSubscriptionChanged(event){if(OneSignal._isUninitiatedVisitor&&true===event.detail)_database2["default"].get("Ids","userId").then(function(result){var welcome_notification_opts=OneSignal._initOptions.welcomeNotification;var welcome_notification_disabled=void 0!==welcome_notification_opts&&true===welcome_notification_opts.disable;var title=void 0!==welcome_notification_opts&&void 0!==welcome_notification_opts.title&&null!==welcome_notification_opts.title?welcome_notification_opts.title:"";var message=void 0!==welcome_notification_opts&&void 0!==welcome_notification_opts.message&&null!==welcome_notification_opts.message&&welcome_notification_opts.message.length>0?welcome_notification_opts.message:"Thanks for subscribing!";if(!welcome_notification_disabled){_loglevel2["default"].debug("Because this user is a new site visitor, a welcome notification will be sent.");(0,_api.sendNotification)(OneSignal._app_id,[result.id],{en:title},{en:message});_events2["default"].trigger(OneSignal.EVENTS.WELCOME_NOTIFICATION_SENT,{title:title,message:message});OneSignal._isUninitiatedVisitor=false}})["catch"](function(e){_loglevel2["default"].error(e)});_limitStore2["default"].put("subscription.value",event.detail)},_onDbValueRetrieved:function _onDbValueRetrieved(event){_loglevel2["default"].warn("Event: %c"+JSON.stringify(event.bubbles),(0,_utils.getConsoleStyle)("alert"))},_onDbValueSet:function _onDbValueSet(event){var info=event.detail;if("userId"===info.type){_limitStore2["default"].put("db.ids.userId",info.id);OneSignal._checkTrigger_eventSubscriptionChanged()}},_onInternalSubscriptionSet:function _onInternalSubscriptionSet(event){var newSubscriptionValue=event.detail;_limitStore2["default"].put("setsubscription.value",newSubscriptionValue);OneSignal._checkTrigger_eventSubscriptionChanged()},_onSdkInitialized:function _onSdkInitialized(){if(_environment2["default"].isBrowser()&&!OneSignal.bell){_loglevel2["default"].info("Showing bell.");OneSignal.bell=new _bell2["default"]({size:"large",position:"bottom-right",theme:"default"});OneSignal.bell.create()}OneSignal._isInitialized=true;_loglevel2["default"].trace("OneSignal SDK has been fully initialized.")},_onDatabaseRebuilt:function _onDatabaseRebuilt(){OneSignal._isNewVisitor=true},_checkTrigger_nativePermissionChanged:function _checkTrigger_nativePermissionChanged(){var currentPermission=OneSignal._getNotificationPermission(OneSignal._initOptions.safari_web_id);var lastPermission=_limitStore2["default"].getLast("notification.permission");if(lastPermission!==currentPermission)OneSignal._triggerEvent_nativePromptPermissionChanged(lastPermission,currentPermission)},_checkTrigger_eventSubscriptionChanged:function _checkTrigger_eventSubscriptionChanged(){_loglevel2["default"].debug("Called %c_checkTrigger_eventSubscriptionChanged()",(0,_utils.getConsoleStyle)("code"));var permissions=_limitStore2["default"].get("notification.permission");var lastPermission=permissions[permissions.length-2];var currentPermission=permissions[permissions.length-1];_loglevel2["default"].debug("%c_checkTrigger_eventSubscriptionChanged():",(0,_utils.getConsoleStyle)("code"),"Permissions:",{lastPermission:lastPermission,currentPermission:currentPermission});var ids=_limitStore2["default"].get("db.ids.userId");var lastId=ids[ids.length-2];var currentId=ids[ids.length-1];_loglevel2["default"].debug("%c_checkTrigger_eventSubscriptionChanged():",(0,_utils.getConsoleStyle)("code"),"Ids:",{lastId:lastId,currentId:currentId});var subscriptionStates=_limitStore2["default"].get("setsubscription.value");var lastSubscriptionState=subscriptionStates[subscriptionStates.length-2];var currentSubscriptionState=subscriptionStates[subscriptionStates.length-1];_loglevel2["default"].debug("%c_checkTrigger_eventSubscriptionChanged():",(0,_utils.getConsoleStyle)("code"),"Subscriptions:",{lastSubscriptionState:lastSubscriptionState,currentSubscriptionState:currentSubscriptionState});var newSubscriptionState="unchanged";if(("default"===lastPermission||"denied"===lastPermission||null===lastPermission)&&"granted"===currentPermission&&null!==currentId&&true===currentSubscriptionState||false===lastSubscriptionState&&true===currentSubscriptionState&&null!=currentId&&"granted"===currentPermission)newSubscriptionState=true;if("denied"!==lastPermission&&"denied"===currentPermission||"granted"===lastPermission&&"granted"!==currentPermission||null!==lastId&&null===currentId||false!==lastSubscriptionState&&false===currentSubscriptionState)newSubscriptionState=false;if("unchanged"!==newSubscriptionState){var lastTriggerTimes=_limitStore2["default"].put("event.subscriptionchanged.lastriggered",Date.now());var currentTime=lastTriggerTimes[lastTriggerTimes.length-1];var lastTriggerTime=lastTriggerTimes[lastTriggerTimes.length-2];var elapsedTimeSeconds=(currentTime-lastTriggerTime)/1e3;var lastEventStates=_limitStore2["default"].put("event.subscriptionchanged.laststates",newSubscriptionState);var currentState=lastEventStates[lastEventStates.length-1];var lastState=lastEventStates[lastEventStates.length-2];var shouldNotTriggerEvent=null!=lastTriggerTime&&1>=elapsedTimeSeconds||currentState===lastState;if(false===shouldNotTriggerEvent)OneSignal._triggerEvent_subscriptionChanged(newSubscriptionState)}},isPushNotificationsSupported:function isPushNotificationsSupported(){return(0,_utils.isPushNotificationsSupported)()},_installNativePromptPermissionChangedHook:function _installNativePromptPermissionChangedHook(){if(navigator.permissions&&!((0,_utils.isBrowserFirefox)()&&(0,_utils.getFirefoxVersion)()<=45)){OneSignal._usingNativePermissionHook=true;navigator.permissions.query({name:"notifications"}).then(function(permissionStatus){permissionStatus.onchange=function(){var permissionBeforePrompt=_limitStore2["default"].getFirst("notification.permission");OneSignal._triggerEvent_nativePromptPermissionChanged(permissionBeforePrompt);if(!_environment2["default"].isHost()){var creator=opener||parent;OneSignal._safePostMessage(creator,{httpNativePromptPermissionChanged:OneSignal._getNotificationPermission(),from:_environment2["default"].getEnv()},OneSignal._initOptions.origin,null)}}})["catch"](function(e){_loglevel2["default"].error(e)})}},init:function init(options){if(_environment2["default"].isBrowser()&&window.localStorage["onesignal.debugger.init"])debugger;_loglevel2["default"].debug("Called %cinit("+JSON.stringify(options,null,4)+")",(0,_utils.getConsoleStyle)("code"));if(OneSignal._isInitialized){_loglevel2["default"].warn("OneSignal.init() was called again, but the SDK is already initialized. Skipping initialization.");return}OneSignal._initOptions=options;OneSignal._app_id=OneSignal._initOptions.appId;if(!(0,_utils.isPushNotificationsSupported)()){_loglevel2["default"].warn("Your browser does not support push notifications.");return}var currentNotificationPermission=OneSignal._getNotificationPermission(OneSignal._initOptions.safari_web_id);_limitStore2["default"].put("notification.permission",currentNotificationPermission);OneSignal._installNativePromptPermissionChangedHook();_database2["default"].get("Ids","userId").then(function(result){if(void 0===result)OneSignal._isUninitiatedVisitor=true;var storeValue=result?result.id:null;_limitStore2["default"].put("db.ids.userId",storeValue)});window.addEventListener(OneSignal.EVENTS.CUSTOM_PROMPT_CLICKED,OneSignal.onCustomPromptClicked);window.addEventListener(OneSignal.EVENTS.NATIVE_PROMPT_PERMISSIONCHANGED,OneSignal.onNativePromptChanged);window.addEventListener(OneSignal.EVENTS.SUBSCRIPTION_CHANGED,OneSignal._onSubscriptionChanged);window.addEventListener(_database2["default"].EVENTS.RETRIEVED,OneSignal._onDbValueRetrieved);window.addEventListener(_database2["default"].EVENTS.SET,OneSignal._onDbValueSet);window.addEventListener(OneSignal.EVENTS.INTERNAL_SUBSCRIPTIONSET,OneSignal._onInternalSubscriptionSet);window.addEventListener(OneSignal.EVENTS.SDK_INITIALIZED,OneSignal._onSdkInitialized);window.addEventListener(_database2["default"].EVENTS.REBUILT,OneSignal.onDatabaseRebuilt);OneSignal._useHttpMode=!(0,_utils.isSupportedSafari)()&&(!OneSignal._supportsDirectPermission()||OneSignal._initOptions.subdomainName);if(OneSignal._useHttpMode)OneSignal._initOneSignalHttp="https://"+OneSignal._initOptions.subdomainName+".onesignal.com/sdks/initOneSignalHttp";else OneSignal._initOneSignalHttp="https://onesignal.com/sdks/initOneSignalHttps";if(true)OneSignal._initOneSignalHttp=_vars.DEV_HOST+"/dev_sdks/initOneSignalHttp";if((0,_utils.isSupportedSafari)()&&"undefined"==typeof window.fetch){var s=document.createElement("script");s.setAttribute("src","https://cdnjs.cloudflare.com/ajax/libs/fetch/0.9.0/fetch.js");document.head.appendChild(s)}if("complete"===document.readyState)OneSignal._internalInit();else window.addEventListener("load",OneSignal._internalInit)},_internalInit:function _internalInit(){window.Database=_database2["default"];_loglevel2["default"].debug("Called %c_internalInit()",(0,_utils.getConsoleStyle)("code"));Promise.all([_database2["default"].get("Ids","appId"),_database2["default"].get("Ids","registrationId"),_database2["default"].get("Options","subscription")]).then(function _internalInit_GotAppRegistrationSubscriptionIds(result){var appIdResult=result[0];var registrationIdResult=result[1];var subscriptionResult=result[2];if(appIdResult&&appIdResult.id!=OneSignal._initOptions.appId){_database2["default"].remove("Ids","userId");sessionStorage.removeItem("ONE_SIGNAL_SESSION")}if(sessionStorage.getItem("ONE_SIGNAL_SESSION")&&!OneSignal._initOptions.subdomainName&&("denied"==Notification.permission||sessionStorage.getItem("ONE_SIGNAL_NOTIFICATION_PERMISSION")==Notification.permission)){_events2["default"].trigger(OneSignal.EVENTS.SDK_INITIALIZED);return}sessionStorage.setItem("ONE_SIGNAL_NOTIFICATION_PERMISSION",Notification.permission);if(false==OneSignal._initOptions.autoRegister&&!registrationIdResult&&!OneSignal._initOptions.subdomainName){_events2["default"].trigger(OneSignal.EVENTS.SDK_INITIALIZED);return}if("visible"!=document.visibilityState){document.addEventListener("visibilitychange",OneSignal._visibilitychange);return}OneSignal._sessionInit({})})["catch"](function(e){_loglevel2["default"].error(e)})},registerForPushNotifications:function registerForPushNotifications(options){if(!(0,_utils.isPushNotificationsSupported)()){_loglevel2["default"].warn("Your browser does not support push notifications.");return}if(!options)options={};options.fromRegisterFor=true;OneSignal._sessionInit(options)},_initHttp:function _initHttp(options){_loglevel2["default"].debug("Called %c _initHttp",(0,_utils.getConsoleStyle)("code"));OneSignal._initOptions=options;OneSignal._installNativePromptPermissionChangedHook();if(options.continuePressed)OneSignal.setSubscription(true);var isIframe=null!=parent&&parent!=window;var creator=opener||parent;if(!creator){_loglevel2["default"].error("_initHttp (from <iframe>):","No opener or parent found!");return}var messageChannel=new MessageChannel;messageChannel.port1.onmessage=function(event){_loglevel2["default"].debug("%c"+_environment2["default"].getEnv().capitalize()+" ⬸ "+event.data.from.capitalize()+":",(0,_utils.getConsoleStyle)("postmessage"),event.data);if(event.data.initOptions){OneSignal.setDefaultNotificationUrl(event.data.initOptions.defaultUrl);OneSignal.setDefaultTitle(event.data.initOptions.defaultTitle);if(event.data.initOptions.defaultIcon)OneSignal.setDefaultIcon(event.data.initOptions.defaultIcon);_database2["default"].get("NotificationOpened",event.data.initOptions.parent_url).then(function registerForPushNotifications_GotNotificationOpened(notificationOpenedResult){if(notificationOpenedResult){_database2["default"].remove("NotificationOpened",event.data.initOptions.parent_url);_loglevel2["default"].debug("OneSignal._safePostMessage:targetOrigin:",OneSignal._initOptions.origin);OneSignal._safePostMessage(creator,{openedNotification:notificationOpenedResult.data,from:_environment2["default"].getEnv()},OneSignal._initOptions.origin,null)}})["catch"](function(e){_loglevel2["default"].error(e)})}else if(event.data.getNotificationPermission)OneSignal._getSubdomainState(function(curState){OneSignal._safePostMessage(creator,{currentNotificationPermission:curState,from:_environment2["default"].getEnv()},OneSignal._initOptions.origin,null)});else if(event.data.setSubdomainState)OneSignal.setSubscription(event.data.setSubdomainState.setSubscription)};OneSignal._getSubdomainState(function(curState){curState.isIframe=isIframe;OneSignal._safePostMessage(creator,{oneSignalInitPageReady:curState,from:_environment2["default"].getEnv()},OneSignal._initOptions.origin,[messageChannel.port2])});OneSignal._initSaveState();OneSignal._httpRegistration=true;if(0==location.search.indexOf("?session=true"))return;OneSignal._getPlayerId(null,function(player_id){if(!isIframe||player_id)navigator.serviceWorker.register(OneSignal.SERVICE_WORKER_PATH,OneSignal.SERVICE_WORKER_PARAM).then(OneSignal._enableNotifications,OneSignal._registerError)})},_getSubdomainState:function _getSubdomainState(callback){var state={};Promise.all([_database2["default"].get("Ids","userId"),_database2["default"].get("Ids","registrationId"),_database2["default"].get("Options","subscription")]).then(function _internalInit_GotAppRegistrationSubscriptionIds(result){var userIdResult=result[0];var registrationIdResult=result[1];var subscriptionResult=result[2];callback({userId:userIdResult?userIdResult.id:null,registrationId:registrationIdResult?registrationIdResult.id:null,notifPermssion:Notification.permission,subscriptionSet:subscriptionResult?subscriptionResult.value:null,isPushEnabled:"granted"==Notification.permission&&userIdResult&&registrationIdResult&&(subscriptionResult&&subscriptionResult.value||null==subscriptionResult)})})["catch"](function(e){_loglevel2["default"].error(e)})},_initSaveState:function _initSaveState(){OneSignal._app_id=OneSignal._initOptions.appId;_database2["default"].put("Ids",{type:"appId",id:OneSignal._app_id});_database2["default"].put("Options",{key:"pageTitle",value:document.title})},_supportsDirectPermission:function _supportsDirectPermission(){return(0,_utils.isSupportedSafari)()||"https:"==location.protocol||0==location.host.indexOf("localhost")||0==location.host.indexOf("127.0.0.1")},_sessionInit:function _sessionInit(options){_loglevel2["default"].debug("Called %c_sessionInit("+JSON.stringify(options)+")",(0,_utils.getConsoleStyle)("code"));OneSignal._initSaveState();var hostPageProtocol=location.origin.match(/^http(s|):\/\/(www\.|)/)[0];if(OneSignal._useHttpMode)if(options.fromRegisterFor){var dualScreenLeft=void 0!=window.screenLeft?window.screenLeft:screen.left;var dualScreenTop=void 0!=window.screenTop?window.screenTop:screen.top;var thisWidth=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width;var thisHeight=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;var childWidth=OneSignal._windowWidth;var childHeight=OneSignal._windowHeight;var left=thisWidth/2-childWidth/2+dualScreenLeft;var top=thisHeight/2-childHeight/2+dualScreenTop;_loglevel2["default"].debug("Opening popup window.");var message_localization_opts=OneSignal._initOptions.promptOptions;var message_localization_opts_str="";if(message_localization_opts){var message_localization_params=["actionMessage","exampleNotificationTitleDesktop","exampleNotificationMessageDesktop","exampleNotificationTitleMobile","exampleNotificationMessageMobile","exampleNotificationCaption","acceptButtonText","cancelButtonText"];for(var i=0;i<message_localization_params.length;i++){var key=message_localization_params[i];var value=message_localization_opts[key];var encoded_value=encodeURIComponent(value);if(value||""===value)message_localization_opts_str+="&"+key+"="+encoded_value}}var childWindow=window.open(OneSignal._initOneSignalHttp+"?"+message_localization_opts_str+"&hostPageProtocol="+hostPageProtocol,"_blank","scrollbars=yes, width="+childWidth+", height="+childHeight+", top="+top+", left="+left);if(childWindow)childWindow.focus()}else OneSignal._addSessionIframe(hostPageProtocol);else{if((0,_utils.isSupportedSafari)()){if(OneSignal._initOptions.safari_web_id){var notificationPermissionBeforeRequest=OneSignal._getNotificationPermission(OneSignal._initOptions.safari_web_id);window.safari.pushNotification.requestPermission(OneSignal._API_URL+"safari",OneSignal._initOptions.safari_web_id,{app_id:OneSignal._app_id},function(data){_loglevel2["default"].info("Safari requestPermission() callback:",data);var notificationPermissionAfterRequest=OneSignal._getNotificationPermission(OneSignal._initOptions.safari_web_id);if(data.deviceToken)OneSignal._registerWithOneSignal(OneSignal._app_id,data.deviceToken.toLowerCase(),7);else sessionStorage.setItem("ONE_SIGNAL_SESSION",true);OneSignal._triggerEvent_nativePromptPermissionChanged(notificationPermissionBeforeRequest)})}}else if(options.modalPrompt&&options.fromRegisterFor){if(!(0,_utils.isPushNotificationsSupported)()){_loglevel2["default"].warn("An attempt was made to open the HTTPS modal permission prompt, but push notifications are not supported on this browser. Opening canceled.");return}OneSignal.isPushNotificationsEnabled(function(pushEnabled){var element=document.createElement("div");element.setAttribute("id","OneSignal-iframe-modal");element.innerHTML='<div id="notif-permission" style="background: rgba(0, 0, 0, 0.7); position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 9000; display: block"></div>';document.body.appendChild(element);var iframeStyle=document.createElement("style");iframeStyle.innerHTML="@media (max-width: 560px) { .OneSignal-permission-iframe { width: 100%; height: 100%;} }@media (min-width: 561px) { .OneSignal-permission-iframe { top: 50%; left: 50%; margin-left: -275px; margin-top: -248px;} }";document.getElementsByTagName("head")[0].appendChild(iframeStyle);var iframeNode=document.createElement("iframe");iframeNode.className="OneSignal-permission-iframe";iframeNode.style.cssText="background: rgba(255, 255, 255, 1); position: fixed;";iframeNode.src=OneSignal._initOneSignalHttp+"?id="+OneSignal._app_id+"&httpsPrompt=true&pushEnabled="+pushEnabled+"&permissionBlocked="+("undefined"==typeof Notification||"denied"==Notification.permission)+"&hostPageProtocol="+hostPageProtocol;iframeNode.setAttribute("frameborder","0");iframeNode.width=OneSignal._windowWidth.toString();iframeNode.height=OneSignal._windowHeight.toString();_loglevel2["default"].debug("Opening HTTPS modal prompt.");document.getElementById("notif-permission").appendChild(iframeNode)})}else if("serviceWorker"in navigator)OneSignal._registerForW3CPush(options);else _loglevel2["default"].debug("Service workers are not supported in this browser.");_events2["default"].trigger(OneSignal.EVENTS.SDK_INITIALIZED)}},_registerForW3CPush:function _registerForW3CPush(options){_database2["default"].get("Ids","registrationId").then(function _registerForW3CPush_GotRegistrationId(registrationIdResult){if(!registrationIdResult||!options.fromRegisterFor||"granted"!=Notification.permission)navigator.serviceWorker.getRegistration().then(function(serviceWorkerRegistration){var sw_path="";if(OneSignal._initOptions.path)sw_path=OneSignal._initOptions.path;if("undefined"==typeof serviceWorkerRegistration)OneSignal._registerServiceWorker(sw_path+OneSignal.SERVICE_WORKER_PATH);else if(serviceWorkerRegistration.active){if(serviceWorkerRegistration.active.scriptURL.indexOf(sw_path+OneSignal.SERVICE_WORKER_PATH)>-1)_database2["default"].get("Ids","WORKER1_ONE_SIGNAL_SW_VERSION").then(function(versionResult){if(versionResult)if(versionResult.id!=OneSignal._VERSION)OneSignal._registerServiceWorker(sw_path+OneSignal.SERVICE_WORKER_UPDATER_PATH);else OneSignal._registerServiceWorker(sw_path+OneSignal.SERVICE_WORKER_PATH);else OneSignal._registerServiceWorker(sw_path+OneSignal.SERVICE_WORKER_PATH)})["catch"](function(e){_loglevel2["default"].error(e)});else if(serviceWorkerRegistration.active.scriptURL.indexOf(sw_path+OneSignal.SERVICE_WORKER_UPDATER_PATH)>-1)_database2["default"].get("Ids","WORKER2_ONE_SIGNAL_SW_VERSION").then(function(versionResult){if(versionResult)if(versionResult.id!=OneSignal._VERSION)OneSignal._registerServiceWorker(sw_path+OneSignal.SERVICE_WORKER_PATH);else OneSignal._registerServiceWorker(sw_path+OneSignal.SERVICE_WORKER_UPDATER_PATH);else OneSignal._registerServiceWorker(sw_path+OneSignal.SERVICE_WORKER_UPDATER_PATH)})["catch"](function(e){_loglevel2["default"].error(e)})}else if(null==serviceWorkerRegistration.installing)OneSignal._registerServiceWorker(sw_path+OneSignal.SERVICE_WORKER_PATH)})["catch"](function(e){_loglevel2["default"].error(e)})})["catch"](function(e){_loglevel2["default"].error(e)})},_registerServiceWorker:function _registerServiceWorker(full_sw_and_path){navigator.serviceWorker.register(full_sw_and_path,OneSignal.SERVICE_WORKER_PARAM).then(OneSignal._enableNotifications,OneSignal._registerError)},_addSessionIframe:function _addSessionIframe(hostPageProtocol){_loglevel2["default"].debug("Called %c_addSessionIframe("+JSON.stringify(hostPageProtocol,null,4)+")",(0,_utils.getConsoleStyle)("code"));var node=document.createElement("iframe");node.style.display="none";node.src=OneSignal._initOneSignalHttp+"Iframe";if(sessionStorage.getItem("ONE_SIGNAL_SESSION"))node.src+="?session=true&hostPageProtocol="+hostPageProtocol;else node.src+="?hostPageProtocol="+hostPageProtocol;document.body.appendChild(node);OneSignal._sessionIframeAdded=true},_registerError:function _registerError(err){_loglevel2["default"].error("ServiceWorker registration",err)},_enableNotifications:function _enableNotifications(existingServiceWorkerRegistration){if(existingServiceWorkerRegistration)_loglevel2["default"].debug("An older ServiceWorker exists:",existingServiceWorkerRegistration);if(!("PushManager"in window)){_loglevel2["default"].error("Push messaging is not supported. No PushManager.");sessionStorage.setItem("ONE_SIGNAL_SESSION",true);return}if(!("showNotification"in ServiceWorkerRegistration.prototype)){_loglevel2["default"].error("Notifications are not supported. showNotification not available in ServiceWorkerRegistration.");sessionStorage.setItem("ONE_SIGNAL_SESSION",true);return}if("denied"===Notification.permission){_loglevel2["default"].warn("The user has disabled notifications.");return}navigator.serviceWorker.ready.then(function(serviceWorkerRegistration){_loglevel2["default"].info("Service worker now active:",serviceWorkerRegistration);OneSignal._subscribeForPush(serviceWorkerRegistration)})["catch"](function(e){_loglevel2["default"].error(e)})},_getNotificationPermission:function _getNotificationPermission(safariWebId){if(window.safari)if(safariWebId)return window.safari.pushNotification.permission(safariWebId).permission;else return"default";else return Notification.permission},_triggerEvent_customPromptClicked:function _triggerEvent_customPromptClicked(clickResult){var recentPermissions=_limitStore2["default"].put("prompt.custom.permission",clickResult);_events2["default"].trigger(OneSignal.EVENTS.CUSTOM_PROMPT_CLICKED,{result:clickResult})},_triggerEvent_nativePromptPermissionChanged:function _triggerEvent_nativePromptPermissionChanged(from,to){var updateIfIdentical=arguments.length<=2||void 0===arguments[2]?false:arguments[2];if(void 0===to)to=OneSignal._getNotificationPermission(OneSignal._initOptions.safari_web_id);if(from!==to||updateIfIdentical){var recentPermissions=_limitStore2["default"].put("notification.permission",to);_events2["default"].trigger(OneSignal.EVENTS.NATIVE_PROMPT_PERMISSIONCHANGED,{from:from,to:to})}},_triggerEvent_subscriptionChanged:function _triggerEvent_subscriptionChanged(to){_events2["default"].trigger(OneSignal.EVENTS.SUBSCRIPTION_CHANGED,to)},_triggerEvent_dbValueRetrieved:function _triggerEvent_dbValueRetrieved(value){_events2["default"].trigger(_database2["default"].EVENTS.RETRIEVED,value)},_triggerEvent_dbValueSet:function _triggerEvent_dbValueSet(value){_events2["default"].trigger(_database2["default"].EVENTS.SET,value)},_triggerEvent_internalSubscriptionSet:function _triggerEvent_internalSubscriptionSet(value){_events2["default"].trigger(OneSignal.EVENTS.INTERNAL_SUBSCRIPTIONSET,value)},_subscribeForPush:function _subscribeForPush(serviceWorkerRegistration){
var notificationPermissionBeforeRequest=OneSignal._getNotificationPermission(OneSignal._initOptions.safari_web_id);serviceWorkerRegistration.pushManager.subscribe({userVisibleOnly:true}).then(function(subscription){sessionStorage.setItem("ONE_SIGNAL_NOTIFICATION_PERMISSION",Notification.permission);_database2["default"].get("Ids","appId").then(function _subscribeForPush_GotAppId(appIdResult){var appId=appIdResult.id;_loglevel2["default"].debug("Called OneSignal._subscribeForPush() -> serviceWorkerRegistration.pushManager.subscribe().");var registrationId=null;if(subscription)if("undefined"!=typeof subscription.subscriptionId)registrationId=subscription.subscriptionId;else registrationId=subscription.endpoint.replace(new RegExp("^(https://android.googleapis.com/gcm/send/|https://updates.push.services.mozilla.com/push/)"),"");else _loglevel2["default"].warn("Could not subscribe your browser for push notifications.");OneSignal._registerWithOneSignal(appId,registrationId,(0,_utils.isSupportedFireFox)()?8:5);if(!OneSignal._usingNativePermissionHook)OneSignal._triggerEvent_nativePromptPermissionChanged(notificationPermissionBeforeRequest)})["catch"](function(e){_loglevel2["default"].error(e)})})["catch"](function(e){_loglevel2["default"].error("Error while subscribing for push:",e);if("default"===OneSignal._getNotificationPermission())OneSignal._triggerEvent_nativePromptPermissionChanged(notificationPermissionBeforeRequest,void 0,true);if(!OneSignal._usingNativePermissionHook)OneSignal._triggerEvent_nativePromptPermissionChanged(notificationPermissionBeforeRequest);if(20==e.code&&opener&&OneSignal._httpRegistration)window.close()})},sendTag:function sendTag(key,value){var jsonKeyValue={};jsonKeyValue[key]=value;OneSignal.sendTags(jsonKeyValue)},sendTags:function sendTags(jsonPair){_database2["default"].get("Ids","userId").then(function sendTags_GotUserId(userIdResult){if(userIdResult)OneSignal._sendToOneSignalApi("players/"+userIdResult.id,"PUT",{app_id:OneSignal._app_id,tags:jsonPair});else if(null==OneSignal._tagsToSendOnRegister)OneSignal._tagsToSendOnRegister=jsonPair;else{var resultObj={};for(var _obj in OneSignal._tagsToSendOnRegister)resultObj[_obj]=OneSignal._tagsToSendOnRegister[_obj];for(var _obj in jsonPair)resultObj[_obj]=jsonPair[_obj];OneSignal._tagsToSendOnRegister=resultObj}})["catch"](function(e){_loglevel2["default"].error("sendTags:",e)})},deleteTag:function deleteTag(key){OneSignal.deleteTags([key])},deleteTags:function deleteTags(keyArray){var jsonPair={};var length=keyArray.length;for(var i=0;length>i;i++)jsonPair[keyArray[i]]="";OneSignal.sendTags(jsonPair)},_handleNotificationOpened:function _handleNotificationOpened(event){var notificationData=JSON.parse(event.notification.tag);event.notification.close();Promise.all([_database2["default"].get("Ids","appId"),_database2["default"].get("Ids","userId")]).then(function _handleNotificationOpened_GotAppUserIds(results){var appIdResult=results[0];var userIdResult=results[1];if(appIdResult&&userIdResult)OneSignal._sendToOneSignalApi("notifications/"+notificationData.id,"PUT",{app_id:appIdResult.id,player_id:userIdResult.id,opened:true})})["catch"](function(e){_loglevel2["default"].error(e)});event.waitUntil(clients.matchAll({type:"window"}).then(function(clientList){var launchURL=registration.scope;if(OneSignal._defaultLaunchURL)launchURL=OneSignal._defaultLaunchURL;if(notificationData.launchURL)launchURL=notificationData.launchURL;for(var i=0;i<clientList.length;i++){var client=clientList[i];if("focus"in client&&client.url==launchURL){client.focus();client.postMessage(notificationData);return}}if("javascript:void(0);"!==launchURL&&"do_not_open"!==launchURL){_database2["default"].put("NotificationOpened",{url:launchURL,data:notificationData});clients.openWindow(launchURL)["catch"](function(error){clients.openWindow(registration.scope+"redirector.html?url="+launchURL)})}})["catch"](function(e){_loglevel2["default"].error(e)}))},_listener_receiveMessage:function receiveMessage(event){if(event.data.from)var from=event.data.from.capitalize();else var from="IFrame/Popup";_loglevel2["default"].debug("%c"+_environment2["default"].getEnv().capitalize()+" ⬸ "+from+":",(0,_utils.getConsoleStyle)("postmessage"),event.data);if(void 0==OneSignal._initOptions)return;if(false)return;if(event.data.oneSignalInitPageReady){var eventData=event.data.oneSignalInitPageReady;if(eventData.isIframe)OneSignal._iframePort=event.ports[0];if(eventData.userId)_database2["default"].put("Ids",{type:"userId",id:eventData.userId});if(eventData.registrationId)_database2["default"].put("Ids",{type:"registrationId",id:eventData.registrationId});OneSignal._fireNotificationEnabledCallback(eventData.isPushEnabled);OneSignal._sendUnsentTags();_database2["default"].get("Options").then(function _listener_receiveMessage(options){if(!options.defaultUrl)options.defaultUrl=document.URL;if(!options.defaultTitle)options.defaultTitle=document.title;options.parent_url=document.URL;event.ports[0].postMessage({initOptions:options,from:_environment2["default"].getEnv()});_events2["default"].trigger(OneSignal.EVENTS.SDK_INITIALIZED)})["catch"](function(e){_loglevel2["default"].error("_listener_receiveMessage:",e)})}else if(event.data.currentNotificationPermission)OneSignal._fireNotificationEnabledCallback(event.data.currentNotificationPermission.isPushEnabled);else if(event.data.idsAvailable){sessionStorage.setItem("ONE_SIGNAL_SESSION",true);_database2["default"].put("Ids",{type:"userId",id:event.data.idsAvailable.userId});_database2["default"].put("Ids",{type:"registrationId",id:event.data.idsAvailable.registrationId});if(OneSignal._idsAvailable_callback.length>0)for(;OneSignal._idsAvailable_callback.length>0;){var curr_callback=OneSignal._idsAvailable_callback.pop();curr_callback({userId:event.data.idsAvailable.userId,registrationId:event.data.idsAvailable.registrationId})}OneSignal._sendUnsentTags()}else if(event.data.httpsPromptAccepted){OneSignal.registerForPushNotifications();OneSignal.setSubscription(true);var elem=document.getElementById("OneSignal-iframe-modal");elem.parentNode.removeChild(elem);OneSignal._triggerEvent_customPromptClicked("granted")}else if(event.data.httpsPromptCanceled){var elem=document.getElementById("OneSignal-iframe-modal");elem.parentNode.removeChild(elem);OneSignal._triggerEvent_customPromptClicked("denied")}else if(event.data.httpPromptAccepted)OneSignal._triggerEvent_customPromptClicked("granted");else if(event.data.httpPromptCanceled)OneSignal._triggerEvent_customPromptClicked("denied");else if(event.data.httpNativePromptPermissionChanged){var recentPermissions=_limitStore2["default"].get("notification.permission");var permissionBeforePrompt=recentPermissions[0];OneSignal._triggerEvent_nativePromptPermissionChanged(permissionBeforePrompt,event.data.httpNativePromptPermissionChanged)}else if(OneSignal._notificationOpened_callback)OneSignal._notificationOpened_callback(event.data)},addListenerForNotificationOpened:function addListenerForNotificationOpened(callback){OneSignal._notificationOpened_callback=callback;if(window)_database2["default"].get("NotificationOpened",document.URL).then(function(notificationOpenedResult){if(notificationOpenedResult){_database2["default"].remove("NotificationOpened",document.URL);OneSignal._notificationOpened_callback(notificationOpenedResult.data)}})["catch"](function(e){_loglevel2["default"].error(e)})},_fireNotificationEnabledCallback:function _fireNotificationEnabledCallback(newNotificationPermission){if(OneSignal._isNotificationEnabledCallback)for(;OneSignal._isNotificationEnabledCallback.length>0;){var callback=OneSignal._isNotificationEnabledCallback.pop();callback(newNotificationPermission)}},getIdsAvailable:function getIdsAvailable(callback){if(void 0===callback)return;OneSignal._idsAvailable_callback.push(callback);Promise.all([_database2["default"].get("Ids","userId"),_database2["default"].get("Ids","registrationId")]).then(function getIdsAvailable_GotUserRegistrationIds(results){var userIdResult=results[0];var registrationIdResult=results[1];if(userIdResult)if(registrationIdResult)for(;OneSignal._idsAvailable_callback.length>0;){var curr_callback=OneSignal._idsAvailable_callback.pop();curr_callback({userId:userIdResult.id,registrationId:registrationIdResult.id})}else for(;OneSignal._idsAvailable_callback.length>0;){var curr_callback=OneSignal._idsAvailable_callback.pop();curr_callback({userId:userIdResult.id,registrationId:null})}})["catch"](function(e){_loglevel2["default"].error(e)})},getTags:function getTags(callback){_database2["default"].get("Ids","userId").then(function(userIdResult){if(userIdResult)OneSignal._sendToOneSignalApi("players/"+userIdResult.id,"GET",null,function(response){callback(response.tags)})})["catch"](function(e){_loglevel2["default"].error(e)})},isPushNotificationsEnabled:function isPushNotificationsEnabled(callback){if(!(0,_utils.isPushNotificationsSupported)()){_loglevel2["default"].warn("Your browser does not support push notifications.");return}if(OneSignal._initOptions.subdomainName&&!(0,_utils.isBrowserSafari)()){OneSignal._isNotificationEnabledCallback.push(callback);if(OneSignal._iframePort)OneSignal._iframePort.postMessage({getNotificationPermission:true,from:_environment2["default"].getEnv()});return}Promise.all([_database2["default"].get("Ids","registrationId"),_database2["default"].get("Options","subscription")]).then(function(results){var registrationIdResult=results[0];var subscriptionResult=results[1];if(registrationIdResult){if(subscriptionResult&&!subscriptionResult.value)return callback(false);callback("granted"==Notification.permission)}else callback(false)})["catch"](function(e){_loglevel2["default"].error(e)})},_getNotificationTypes:function _getNotificationTypes(callback){OneSignal._getSubscription(function(currentSubscription){callback(currentSubscription?1:-2)})},setSubscription:function setSubscription(newSubscription){return new Promise(function(resolve,reject){if(OneSignal._iframePort)OneSignal._iframePort.postMessage({setSubdomainState:{setSubscription:newSubscription},from:_environment2["default"].getEnv()});else OneSignal._getSubscription().then(function(currentSubscription){if(currentSubscription!=newSubscription)return _database2["default"].put("Options",{key:"subscription",value:newSubscription});else reject("Called %csetSubscription("+newSubscription+")",(0,_utils.getConsoleStyle)("code"),"but there was no change, so skipping call.")}).then(function(){return _database2["default"].get("Ids","userId")}).then(function(userIdResult){if(userIdResult)return apiCall("players/"+userIdResult.id,"PUT",{app_id:OneSignal._app_id,notification_types:newSubscription?1:-2});else reject("Called %csetSubscription("+newSubscription+")",(0,_utils.getConsoleStyle)("code"),"but there was no user ID, so the result was not forwarded to OneSignal.")}).then(function(){OneSignal._triggerEvent_internalSubscriptionSet(newSubscription);resolve()})["catch"](function(e){if("Error"===e.constructor.name){_loglevel2["default"].error(e);reject(e)}else resolve(e)})})},_getSubscription:function _getSubscription(){return new Promise(function(resolve,reject){_database2["default"].get("Options","subscription").then(function(subscriptionResult){resolve(!(subscriptionResult&&false==subscriptionResult.value))})["catch"](function(e){_loglevel2["default"].error(e);reject(e)})})},_safePostMessage:function _safePostMessage(creator,data,targetOrigin,receiver){var tOrigin=targetOrigin.toLowerCase();if(tOrigin.startsWith("http://")){var queryDict={};location.search.substr(1).split("&").forEach(function(item){queryDict[item.split("=")[0]]=item.split("=")[1]});var validPreURLRegex=/^http(s|):\/\/(www\.|)/;tOrigin=tOrigin.replace(validPreURLRegex,queryDict.hostPageProtocol)}if(!data.from)data.from=_environment2["default"].getEnv();if(receiver)creator.postMessage(data,tOrigin,receiver);else creator.postMessage(data,tOrigin)},_process_pushes:function _process_pushes(array){for(var i=0;i<array.length;i++)OneSignal.push(array[i])},push:function push(item){if("function"==typeof item)item();else{var functionName=item.shift();OneSignal[functionName].apply(null,item)}}};if(_environment2["default"].isBrowser())window.addEventListener("message",OneSignal._listener_receiveMessage,false);else;if(OneSignal.LOGGING)_loglevel2["default"].setDefaultLevel(_loglevel2["default"].levels.TRACE);else _loglevel2["default"].setDefaultLevel(_loglevel2["default"].levels.ERROR);_loglevel2["default"].info("%cOneSignal Web SDK loaded (version "+OneSignal._VERSION+", "+_environment2["default"].getEnv()+" environment).",(0,_utils.getConsoleStyle)("bold"));module.exports=OneSignal}).call(exports,__webpack_require__(3))},function(module,exports){(function(global){(function(){!function(){"use strict";function normalizeName(name){if("string"!=typeof name)name=String(name);if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(name))throw new TypeError("Invalid character in header field name");return name.toLowerCase()}function normalizeValue(value){if("string"!=typeof value)value=String(value);return value}function Headers(headers){this.map={};if(headers instanceof Headers)headers.forEach(function(value,name){this.append(name,value)},this);else if(headers)Object.getOwnPropertyNames(headers).forEach(function(name){this.append(name,headers[name])},this)}function consumed(body){if(body.bodyUsed)return Promise.reject(new TypeError("Already read"));body.bodyUsed=true}function fileReaderReady(reader){return new Promise(function(resolve,reject){reader.onload=function(){resolve(reader.result)};reader.onerror=function(){reject(reader.error)}})}function readBlobAsArrayBuffer(blob){var reader=new FileReader;reader.readAsArrayBuffer(blob);return fileReaderReady(reader)}function readBlobAsText(blob){var reader=new FileReader;reader.readAsText(blob);return fileReaderReady(reader)}function Body(){this.bodyUsed=false;this._initBody=function(body){this._bodyInit=body;if("string"==typeof body)this._bodyText=body;else if(support.blob&&Blob.prototype.isPrototypeOf(body))this._bodyBlob=body;else if(support.formData&&FormData.prototype.isPrototypeOf(body))this._bodyFormData=body;else if(!body)this._bodyText="";else if(support.arrayBuffer&&ArrayBuffer.prototype.isPrototypeOf(body));else throw new Error("unsupported BodyInit type")};if(support.blob){this.blob=function(){var rejected=consumed(this);if(rejected)return rejected;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);else if(this._bodyFormData)throw new Error("could not read FormData body as blob");else return Promise.resolve(new Blob([this._bodyText]))};this.arrayBuffer=function(){return this.blob().then(readBlobAsArrayBuffer)};this.text=function(){var rejected=consumed(this);if(rejected)return rejected;if(this._bodyBlob)return readBlobAsText(this._bodyBlob);else if(this._bodyFormData)throw new Error("could not read FormData body as text");else return Promise.resolve(this._bodyText)}}else this.text=function(){var rejected=consumed(this);return rejected?rejected:Promise.resolve(this._bodyText)};if(support.formData)this.formData=function(){return this.text().then(decode)};this.json=function(){return this.text().then(JSON.parse)};return this}function normalizeMethod(method){var upcased=method.toUpperCase();return methods.indexOf(upcased)>-1?upcased:method}function Request(input,options){options=options||{};var body=options.body;if(Request.prototype.isPrototypeOf(input)){if(input.bodyUsed)throw new TypeError("Already read");this.url=input.url;this.credentials=input.credentials;if(!options.headers)this.headers=new Headers(input.headers);this.method=input.method;this.mode=input.mode;if(!body){body=input._bodyInit;input.bodyUsed=true}}else this.url=input;this.credentials=options.credentials||this.credentials||"omit";if(options.headers||!this.headers)this.headers=new Headers(options.headers);this.method=normalizeMethod(options.method||this.method||"GET");this.mode=options.mode||this.mode||null;this.referrer=null;if(("GET"===this.method||"HEAD"===this.method)&&body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(body)}function decode(body){var form=new FormData;body.trim().split("&").forEach(function(bytes){if(bytes){var split=bytes.split("=");var name=split.shift().replace(/\+/g," ");var value=split.join("=").replace(/\+/g," ");form.append(decodeURIComponent(name),decodeURIComponent(value))}});return form}function headers(xhr){var head=new Headers;var pairs=xhr.getAllResponseHeaders().trim().split("\n");pairs.forEach(function(header){var split=header.trim().split(":");var key=split.shift().trim();var value=split.join(":").trim();head.append(key,value)});return head}function Response(bodyInit,options){if(!options)options={};this._initBody(bodyInit);this.type="default";this.status=options.status;this.ok=this.status>=200&&this.status<300;this.statusText=options.statusText;this.headers=options.headers instanceof Headers?options.headers:new Headers(options.headers);this.url=options.url||""}if(self.fetch)return;Headers.prototype.append=function(name,value){name=normalizeName(name);value=normalizeValue(value);var list=this.map[name];if(!list){list=[];this.map[name]=list}list.push(value)};Headers.prototype["delete"]=function(name){delete this.map[normalizeName(name)]};Headers.prototype.get=function(name){var values=this.map[normalizeName(name)];return values?values[0]:null};Headers.prototype.getAll=function(name){return this.map[normalizeName(name)]||[]};Headers.prototype.has=function(name){return this.map.hasOwnProperty(normalizeName(name))};Headers.prototype.set=function(name,value){this.map[normalizeName(name)]=[normalizeValue(value)]};Headers.prototype.forEach=function(callback,thisArg){Object.getOwnPropertyNames(this.map).forEach(function(name){this.map[name].forEach(function(value){callback.call(thisArg,value,name,this)},this)},this)};var support={blob:"FileReader"in self&&"Blob"in self&&function(){try{new Blob;return true}catch(e){return false}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};var methods=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];Request.prototype.clone=function(){return new Request(this)};Body.call(Request.prototype);Body.call(Response.prototype);Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})};Response.error=function(){var response=new Response(null,{status:0,statusText:""});response.type="error";return response};var redirectStatuses=[301,302,303,307,308];Response.redirect=function(url,status){if(-1===redirectStatuses.indexOf(status))throw new RangeError("Invalid status code");return new Response(null,{status:status,headers:{location:url}})};self.Headers=Headers;self.Request=Request;self.Response=Response;self.fetch=function(input,init){return new Promise(function(resolve,reject){function responseURL(){if("responseURL"in xhr)return xhr.responseURL;if(/^X-Request-URL:/m.test(xhr.getAllResponseHeaders()))return xhr.getResponseHeader("X-Request-URL");return}var request;if(Request.prototype.isPrototypeOf(input)&&!init)request=input;else request=new Request(input,init);var xhr=new XMLHttpRequest;xhr.onload=function(){var status=1223===xhr.status?204:xhr.status;if(100>status||status>599){reject(new TypeError("Network request failed"));return}var options={status:status,statusText:xhr.statusText,headers:headers(xhr),url:responseURL()};var body="response"in xhr?xhr.response:xhr.responseText;resolve(new Response(body,options))};xhr.onerror=function(){reject(new TypeError("Network request failed"))};xhr.open(request.method,request.url,true);if("include"===request.credentials)xhr.withCredentials=true;if("responseType"in xhr&&support.blob)xhr.responseType="blob";request.headers.forEach(function(value,name){xhr.setRequestHeader(name,value)});xhr.send("undefined"==typeof request._bodyInit?null:request._bodyInit)})};self.fetch.polyfill=true}();module.exports=global.fetch}).call(global)}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.API_URL=exports.HOST_URL=exports.PROD_HOST=exports.DEV_HOST=void 0;var _utils=__webpack_require__(5);var DEV_HOST=exports.DEV_HOST="https://192.168.1.206:3000";var PROD_HOST=exports.PROD_HOST="https://onesignal.com";var HOST_URL=exports.HOST_URL=(0,_utils.isDev)()?DEV_HOST:PROD_HOST;var API_URL=exports.API_URL=((0,_utils.isDev)()?DEV_HOST:PROD_HOST)+"/api/v1/"},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _typeof(obj){return obj&&"undefined"!=typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj}function isArray(variable){return"[object Array]"===Object.prototype.toString.call(variable)}function getHumanizedTimeDuration(timeDurationInMilliseconds){function addPluralSuffix(number){return number>1?"s":""}var duration=Math.floor(timeDurationInMilliseconds/1e3);var years=Math.floor(duration/31536e3);if(years)return years+" year"+addPluralSuffix(years);var days=Math.floor((duration%=31536e3)/86400);if(days)return days+" day"+addPluralSuffix(days);var hours=Math.floor((duration%=86400)/3600);if(hours)return hours+" hour"+addPluralSuffix(hours);var minutes=Math.floor((duration%=3600)/60);if(minutes)return minutes+" minute"+addPluralSuffix(minutes);var seconds=duration%60;if(seconds)return seconds+" second"+addPluralSuffix(seconds);return"just now"}function isDev(){return true}function isPushNotificationsSupported(){var chromeVersion=navigator.appVersion.match(/Chrome\/(.*?) /);if(isSupportedFireFox())return true;if(isSupportedSafari())return true;if(!chromeVersion)return false;if(navigator.appVersion.match(/Edge/))return false;if(navigator.appVersion.match(/ wv/))return false;if(navigator.appVersion.match(/OPR\//))return false;if(/iPad|iPhone|iPod/.test(navigator.platform))return false;return parseInt(chromeVersion[1].substring(0,2))>41}function isBrowserSafari(){var safariVersion=navigator.appVersion.match("Version/([0-9]?).* Safari");return null!=safariVersion}function isSupportedFireFox(){var fireFoxVersion=navigator.userAgent.match(/(Firefox\/)([0-9]{2,}\.[0-9]{1,})/);if(fireFoxVersion)return parseInt(fireFoxVersion[2].substring(0,2))>43;return false}function isBrowserFirefox(){var fireFoxVersion=navigator.userAgent.match(/(Firefox\/)([0-9]{2,}\.[0-9]{1,})/);return null!=fireFoxVersion}function getFirefoxVersion(){var fireFoxVersion=navigator.userAgent.match(/(Firefox\/)([0-9]{2,}\.[0-9]{1,})/);if(fireFoxVersion)return parseInt(fireFoxVersion[2].substring(0,2));else return-1}function isSupportedSafari(){var safariVersion=navigator.appVersion.match("Version/([0-9]?).* Safari");if(null==safariVersion)return false;if(/iPhone|iPad|iPod/i.test(navigator.userAgent))return false;return parseInt(safariVersion[1])>6}function removeDomElement(selector){var els=document.querySelectorAll(selector);if(els.length>0)for(var i=0;i<els.length;i++)els[i].parentNode.removeChild(els[i])}function addDomElement(targetSelectorOrElement,addOrder,elementHtml){if("string"==typeof targetSelectorOrElement)document.querySelector(targetSelectorOrElement).insertAdjacentHTML(addOrder,elementHtml);else if("object"===("undefined"==typeof targetSelectorOrElement?"undefined":_typeof(targetSelectorOrElement)))targetSelectorOrElement.insertAdjacentHTML(addOrder,elementHtml);else throw new Error(targetSelectorOrElement+" must be a CSS selector string or DOM Element object.")}function clearDomElementChildren(targetSelectorOrElement){if("string"==typeof targetSelectorOrElement){var element=document.querySelector(targetSelectorOrElement);for(;element.firstChild;)element.removeChild(element.firstChild)}else if("object"===("undefined"==typeof targetSelectorOrElement?"undefined":_typeof(targetSelectorOrElement)))for(;targetSelectorOrElement.firstChild;)targetSelectorOrElement.removeChild(targetSelectorOrElement.firstChild);else throw new Error(targetSelectorOrElement+" must be a CSS selector string or DOM Element object.")}function addCssClass(targetSelectorOrElement,cssClass){if("string"==typeof targetSelectorOrElement)document.querySelector(targetSelectorOrElement).classList.add(cssClass);else if("object"===("undefined"==typeof targetSelectorOrElement?"undefined":_typeof(targetSelectorOrElement)))targetSelectorOrElement.classList.add(cssClass);else throw new Error(targetSelectorOrElement+" must be a CSS selector string or DOM Element object.")}function removeCssClass(targetSelectorOrElement,cssClass){if("string"==typeof targetSelectorOrElement)document.querySelector(targetSelectorOrElement).classList.remove(cssClass);else if("object"===("undefined"==typeof targetSelectorOrElement?"undefined":_typeof(targetSelectorOrElement)))targetSelectorOrElement.classList.remove(cssClass);else throw new Error(targetSelectorOrElement+" must be a CSS selector string or DOM Element object.")}function on(targetSelectorOrElement,event,task){if(!event)_loglevel2["default"].error("Cannot call on() with no event: ",event);if(!task)_loglevel2["default"].error("Cannot call on() with no task: ",task);_loglevel2["default"].debug("Debug me here.");if("string"==typeof targetSelectorOrElement){var els=document.querySelectorAll(selector);if(els.length>0)for(var i=0;i<els.length;i++)on(els[i],task)}else if(isArray(targetSelectorOrElement))for(var i=0;i<targetSelectorOrElement.length;i++)on(targetSelectorOrElement[i],task);else if("object"===("undefined"==typeof targetSelectorOrElement?"undefined":_typeof(targetSelectorOrElement)))targetSelectorOrElement.addEventListener(event,task);else throw new Error(targetSelectorOrElement+" must be a CSS selector string or DOM Element object.")}function once(targetSelectorOrElement,event,task){var manualDestroy=arguments.length<=3||void 0===arguments[3]?false:arguments[3];if(!event)_loglevel2["default"].error("Cannot call on() with no event: ",event);if(!task)_loglevel2["default"].error("Cannot call on() with no task: ",task);if("string"==typeof targetSelectorOrElement){var els=document.querySelectorAll(selector);if(els.length>0)for(var i=0;i<els.length;i++)once(els[i],task)}else if(isArray(targetSelectorOrElement))for(var i=0;i<targetSelectorOrElement.length;i++)once(targetSelectorOrElement[i],task);else if("object"===("undefined"==typeof targetSelectorOrElement?"undefined":_typeof(targetSelectorOrElement))){var taskWrapper=function(){var internalTaskFunction=function internalTaskFunction(e){var destroyEventListener=function destroyEventListener(){targetSelectorOrElement.removeEventListener(e.type,taskWrapper)};if(!manualDestroy)destroyEventListener();task(e,destroyEventListener)};return internalTaskFunction}();targetSelectorOrElement.addEventListener(event,taskWrapper)}else throw new Error(targetSelectorOrElement+" must be a CSS selector string or DOM Element object.")}function off(targetSelectorOrElement,event,task){if("string"==typeof targetSelectorOrElement){var els=document.querySelectorAll(selector);if(els.length>0)for(var i=0;i<els.length;i++)off(els[i],task)}else if(isArray(targetSelectorOrElement))for(var i=0;i<targetSelectorOrElement.length;i++)off(targetSelectorOrElement[i],task);else if("object"===("undefined"==typeof targetSelectorOrElement?"undefined":_typeof(targetSelectorOrElement)))if(task)targetSelectorOrElement.removeEventListener(event,task);else targetSelectorOrElement.removeEventListener(event);else throw new Error(targetSelectorOrElement+" must be a CSS selector string or DOM Element object.")}function getConsoleStyle(style){if("code"==style)return'\n    padding: 0 5px 2px;\n    border: 1px solid #ddd;\n    -webkit-border-radius: 3px;\n    -moz-border-radius: 3px;\n    border-radius: 3px;\n    background-clip: padding-box;\n    font-family: Monaco,"DejaVu Sans Mono","Courier New",monospace;\n    color: #666;\n    ';else if("bold"==style)return"\n      font-weight: 600;\n    color: rgb(51, 51, 51);\n    ";else if("alert"==style)return"\n      font-weight: 600;\n    color: red;\n    ";else if("event"==style)return"\n    color: green;\n    ";else if("postmessage"==style)return"\n    color: orange;\n    "}function delay(durationMs){return new Promise(function(resolve){setTimeout(resolve,durationMs)})}function nothing(){return Promise.resolve()}function when(condition,promiseIfTrue,promiseIfFalse){if(void 0===promiseIfTrue)promiseIfTrue=nothing();if(void 0===promiseIfFalse)promiseIfFalse=nothing();return condition?promiseIfTrue:promiseIfFalse}Object.defineProperty(exports,"__esModule",{value:true});exports.isArray=isArray;exports.getHumanizedTimeDuration=getHumanizedTimeDuration;exports.isDev=isDev;exports.isPushNotificationsSupported=isPushNotificationsSupported;exports.isBrowserSafari=isBrowserSafari;exports.isSupportedFireFox=isSupportedFireFox;exports.isBrowserFirefox=isBrowserFirefox;exports.getFirefoxVersion=getFirefoxVersion;exports.isSupportedSafari=isSupportedSafari;exports.removeDomElement=removeDomElement;exports.addDomElement=addDomElement;exports.clearDomElementChildren=clearDomElementChildren;exports.addCssClass=addCssClass;exports.removeCssClass=removeCssClass;exports.on=on;exports.once=once;exports.off=off;exports.getConsoleStyle=getConsoleStyle;exports.delay=delay;exports.nothing=nothing;exports.when=when;var _loglevel=__webpack_require__(7);var _loglevel2=_interopRequireDefault(_loglevel)},function(module,exports,__webpack_require__){(function(fetch){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function apiCall(action,method,data){var headers=new Headers;headers.append("Content-Type","application/json;charset=UTF-8");var contents={method:method||"NO_METHOD_SPECIFIED",headers:headers,cache:"no-cache"};if(data)contents.body=JSON.stringify(data);return new Promise(function(resolve,reject){fetch(_vars.API_URL+action,contents).then(function status(response){if(response.status>=200&&response.status<300)return response.json();else reject(new Error(response.statusText))}).then(function(jsonResponse){resolve(jsonResponse)})["catch"](function(e){reject(e)})})}function sendNotification(appId,playerIds,titles,contents){var params={app_id:appId,headings:titles,contents:contents,include_player_ids:playerIds,isAnyWeb:true,url:"javascript:void(0);"};return apiCall("notifications","POST",params)}Object.defineProperty(exports,"__esModule",{value:true});exports.apiCall=apiCall;exports.sendNotification=sendNotification;var _vars=__webpack_require__(4);var _loglevel=__webpack_require__(7);var _loglevel2=_interopRequireDefault(_loglevel)}).call(exports,__webpack_require__(3))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(root,definition){"use strict";if("object"==typeof module&&module.exports&&true)module.exports=definition();else if(true)!(__WEBPACK_AMD_DEFINE_FACTORY__=definition,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__,void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));else root.log=definition()}(this,function(){"use strict";function realMethod(methodName){if(typeof console===undefinedType)return false;else if(void 0!==console[methodName])return bindMethod(console,methodName);else if(void 0!==console.log)return bindMethod(console,"log");else return noop}function bindMethod(obj,methodName){var method=obj[methodName];if("function"==typeof method.bind)return method.bind(obj);else try{return Function.prototype.bind.call(method,obj)}catch(e){return function(){return Function.prototype.apply.apply(method,[obj,arguments])}}}function enableLoggingWhenConsoleArrives(methodName,level,loggerName){return function(){if(typeof console!==undefinedType){replaceLoggingMethods.call(this,level,loggerName);this[methodName].apply(this,arguments);
}}}function replaceLoggingMethods(level,loggerName){for(var i=0;i<logMethods.length;i++){var methodName=logMethods[i];this[methodName]=level>i?noop:this.methodFactory(methodName,level,loggerName)}}function defaultMethodFactory(methodName,level,loggerName){return realMethod(methodName)||enableLoggingWhenConsoleArrives.apply(this,arguments)}function Logger(name,defaultLevel,factory){function persistLevelIfPossible(levelNum){var levelName=(logMethods[levelNum]||"silent").toUpperCase();try{window.localStorage[storageKey]=levelName;return}catch(ignore){}try{window.document.cookie=encodeURIComponent(storageKey)+"="+levelName+";"}catch(ignore){}}function getPersistedLevel(){var storedLevel;try{storedLevel=window.localStorage[storageKey]}catch(ignore){}if(typeof storedLevel===undefinedType)try{var cookie=window.document.cookie;var location=cookie.indexOf(encodeURIComponent(storageKey)+"=");if(location)storedLevel=/^([^;]+)/.exec(cookie.slice(location))[1]}catch(ignore){}if(void 0===self.levels[storedLevel])storedLevel=void 0;return storedLevel}var self=this;var currentLevel;var storageKey="loglevel";if(name)storageKey+=":"+name;self.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5};self.methodFactory=factory||defaultMethodFactory;self.getLevel=function(){return currentLevel};self.setLevel=function(level,persist){if("string"==typeof level&&void 0!==self.levels[level.toUpperCase()])level=self.levels[level.toUpperCase()];if("number"==typeof level&&level>=0&&level<=self.levels.SILENT){currentLevel=level;if(false!==persist)persistLevelIfPossible(level);replaceLoggingMethods.call(self,level,name);if(typeof console===undefinedType&&level<self.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+level};self.setDefaultLevel=function(level){if(!getPersistedLevel())self.setLevel(level,false)};self.enableAll=function(persist){self.setLevel(self.levels.TRACE,persist)};self.disableAll=function(persist){self.setLevel(self.levels.SILENT,persist)};var initialLevel=getPersistedLevel();if(null==initialLevel)initialLevel=null==defaultLevel?"WARN":defaultLevel;self.setLevel(initialLevel,false)}var noop=function(){};var undefinedType="undefined";var logMethods=["trace","debug","info","warn","error"];var defaultLogger=new Logger;var _loggersByName={};defaultLogger.getLogger=function getLogger(name){if("string"!=typeof name||""===name)throw new TypeError("You must supply a name when creating a logger.");var logger=_loggersByName[name];if(!logger)logger=_loggersByName[name]=new Logger(name,defaultLogger.getLevel(),defaultLogger.methodFactory);return logger};var _log=typeof window!==undefinedType?window.log:void 0;defaultLogger.noConflict=function(){if(typeof window!==undefinedType&&window.log===defaultLogger)window.log=_log;return defaultLogger};return defaultLogger})},function(module,exports){"use strict";function LimitStore(){}Object.defineProperty(exports,"__esModule",{value:true});LimitStore.store={};LimitStore.LIMIT=2;LimitStore.put=function(key,value){if(void 0===LimitStore.store[key])LimitStore.store[key]=[null,null];LimitStore.store[key].push(value);if(LimitStore.store[key].length==LimitStore.LIMIT+1)LimitStore.store[key].shift();return LimitStore.store[key]};LimitStore.get=function(key){if(void 0===LimitStore.store[key])LimitStore.store[key]=[null,null];return LimitStore.store[key]};LimitStore.getFirst=function(key){return LimitStore.get(key)[0]};LimitStore.getLast=function(key){return LimitStore.get(key)[1]};LimitStore.isEmpty=function(key){var values=LimitStore.get(key);return null===values[0]&&null===values[1]};exports["default"]=LimitStore},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();Object.defineProperty(exports,"__esModule",{value:true});var Environment=function(){function Environment(){_classCallCheck(this,Environment)}_createClass(Environment,null,[{key:"getEnv",value:function getEnv(){if("undefined"==typeof window){if("undefined"!=typeof WorkerLocation&&location instanceof WorkerLocation)return Environment.SERVICE_WORKER}else if(window.self===window.top)if(location.href.indexOf("initOneSignal")>-1)return Environment.POPUP;else return Environment.HOST;else return Environment.IFRAME}},{key:"isServiceWorker",value:function isServiceWorker(){return Environment.getEnv()===Environment.SERVICE_WORKER}},{key:"isHost",value:function isHost(){return Environment.getEnv()===Environment.HOST}},{key:"isPopup",value:function isPopup(){return Environment.getEnv()===Environment.POPUP}},{key:"isIframe",value:function isIframe(){return Environment.getEnv()===Environment.IFRAME}},{key:"isBrowser",value:function isBrowser(){return"undefined"!=typeof window}},{key:"SERVICE_WORKER",get:function get(){return"ServiceWorker"}},{key:"HOST",get:function get(){return"host"}},{key:"POPUP",get:function get(){return"popup"}},{key:"IFRAME",get:function get(){return"iFrame"}}]);return Environment}();exports["default"]=Environment},function(module,exports){"use strict";String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)}},,function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();Object.defineProperty(exports,"__esModule",{value:true});var _loglevel=__webpack_require__(7);var _loglevel2=_interopRequireDefault(_loglevel);var _environment=__webpack_require__(52);var _environment2=_interopRequireDefault(_environment);var _utils=__webpack_require__(5);var SILENT_EVENTS=["onesignal.bell.hovering","onesignal.bell.hovered","onesignal.bell.launcher.button.click","onesignal.bell.launcher.click","onesignal.bell.animatedelement.hiding","onesignal.bell.animatedelement.hidden","onesignal.bell.animatedelement.showing","onesignal.bell.animatedelement.shown","onesignal.bell.activeanimatedelement.activating","onesignal.bell.activeanimatedelement.active","onesignal.bell.activeanimatedelement.inactivating","onesignal.bell.activeanimatedelement.inactive","onesignal.db.set"];var Event=function(){function Event(){_classCallCheck(this,Event)}_createClass(Event,null,[{key:"trigger",value:function trigger(eventName,data){if(!eventName)_loglevel2["default"].trace();if(-1==SILENT_EVENTS.indexOf(eventName))if(!_environment2["default"].isBrowser()){_loglevel2["default"].debug("%c"+eventName+":",(0,_utils.getConsoleStyle)("event"),data,"(not triggered in a ServiceWorker environment)");return}else{var displayData=data;if(displayData||false===displayData)_loglevel2["default"].debug("» %c"+eventName+":",(0,_utils.getConsoleStyle)("event"),displayData);else _loglevel2["default"].debug("» %c"+eventName,(0,_utils.getConsoleStyle)("event"))}if(_environment2["default"].isBrowser()){var event=new CustomEvent(eventName,{bubbles:true,cancelable:true,detail:data});window.dispatchEvent(event)}}}]);return Event}();exports["default"]=Event},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();Object.defineProperty(exports,"__esModule",{value:true});var _utils=__webpack_require__(5);var _environment=__webpack_require__(52);var _environment2=_interopRequireDefault(_environment);var _limitStore=__webpack_require__(8);var _limitStore2=_interopRequireDefault(_limitStore);var _loglevel=__webpack_require__(7);var _loglevel2=_interopRequireDefault(_loglevel);var _events=__webpack_require__(55);var _events2=_interopRequireDefault(_events);var _bowser=__webpack_require__(57);var _bowser2=_interopRequireDefault(_bowser);var _vars=__webpack_require__(4);var _AnimatedElement=__webpack_require__(58);var _AnimatedElement2=_interopRequireDefault(_AnimatedElement);var _ActiveAnimatedElement=__webpack_require__(59);var _ActiveAnimatedElement2=_interopRequireDefault(_ActiveAnimatedElement);var _Launcher=__webpack_require__(60);var _Launcher2=_interopRequireDefault(_Launcher);var _Badge=__webpack_require__(61);var _Badge2=_interopRequireDefault(_Badge);var _Button=__webpack_require__(62);var _Button2=_interopRequireDefault(_Button);var _Dialog=__webpack_require__(63);var _Dialog2=_interopRequireDefault(_Dialog);var _Message=__webpack_require__(64);var _Message2=_interopRequireDefault(_Message);__webpack_require__(!function webpackMissingModule(){var e=new Error('Cannot find module "./bell.scss"');e.code="MODULE_NOT_FOUND";throw e}());var logoSvg=__webpack_require__(66);var Bell=function(){function Bell(){var _this=this;var _ref=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];var _ref$size=_ref.size;var size=void 0===_ref$size?"small":_ref$size;var _ref$position=_ref.position;var position=void 0===_ref$position?"bottom-left":_ref$position;var _ref$theme=_ref.theme;var theme=void 0===_ref$theme?"default":_ref$theme;var _ref$showLauncherAfte=_ref.showLauncherAfter;var showLauncherAfter=void 0===_ref$showLauncherAfte?10:_ref$showLauncherAfte;var _ref$showBadgeAfter=_ref.showBadgeAfter;var showBadgeAfter=void 0===_ref$showBadgeAfter?300:_ref$showBadgeAfter;var _ref$text=_ref.text;var text=void 0===_ref$text?{"tip.state.unsubscribed":"Subscribe to notifications","tip.state.subscribed":"You're subscribed to notifications","tip.state.blocked":"You've blocked notifications","tip.action.subscribed":"Thanks for subscribing!","tip.action.unsubscribed":"You won't receive notifications again","dialog.main.title":"Manage Site Notifications","dialog.main.button.subscribe":"SUBSCRIBE","dialog.main.button.unsubscribe":"UNSUBSCRIBE","dialog.blocked.title":"Unblock Notifications","dialog.blocked.message":"Follow these instructions to allow notifications:"}:_ref$text;var _ref$prenotify=_ref.prenotify;var prenotify=void 0===_ref$prenotify?true:_ref$prenotify;_classCallCheck(this,Bell);this.options={size:size,position:position,theme:theme,showLauncherAfter:showLauncherAfter,showBadgeAfter:showBadgeAfter,text:text,prenotify:prenotify};if(["small","medium","large"].indexOf(this.options.size)<0)throw new Error("Invalid size "+this.options.size+" for bell. Choose among 'small', 'medium', or 'large'.");if(["bottom-left","bottom-right"].indexOf(this.options.position)<0)throw new Error("Invalid position "+this.options.position+" for bell. Choose either 'bottom-left', or 'bottom-right'.");if(["default","inverse"].indexOf(this.options.theme)<0)throw new Error("Invalid theme "+this.options.theme+" for bell. Choose either 'default', or 'inverse'.");if(this.options.showLauncherAfter<0)throw new Error("Invalid delay duration of "+this.options.showLauncherAfter+" for showing the bell. Choose a value above 0.");if(this.options.showBadgeAfter<0)throw new Error("Invalid delay duration of "+this.options.showBadgeAfter+" for showing the bell's badge. Choose a value above 0.");this.size=this.options.size;this.position=this.options.position;this.text=this.options.text;this.messages={};this.messages.queued=[];if(!this.text["tip.state.unsubscribed"])this.text["tip.state.unsubscribed"]="Subscribe to notifications";if(!this.text["tip.state.subscribed"])this.text["tip.state.subscribed"]="You're subscribed to notifications";if(!this.text["tip.state.blocked"])this.text["tip.state.blocked"]="You've blocked notifications";if(!this.text["tip.action.subscribed"])this.text["tip.action.subscribed"]="Thanks for subscribing!";if(!this.text["tip.action.unsubscribed"])this.text["tip.action.unsubscribed"]="You won't receive notifications again";if(!this.text["dialog.main.title"])this.text["dialog.main.title"]="Manage Site Notifications";if(!this.text["dialog.main.button.subscribe"])this.text["dialog.main.button.subscribe"]="SUBSCRIBE";if(!this.text["dialog.main.button.unsubscribe"])this.text["dialog.main.button.unsubscribe"]="UNSUBSCRIBE";if(!this.text["dialog.blocked.title"])this.text["dialog.blocked.title"]="Unblock Notifications";this.messages[Bell.STATES.UNSUBSCRIBED]=this.text["tip.state.unsubscribed"];this.messages[Bell.STATES.SUBSCRIBED]=this.text["tip.state.subscribed"];this.messages[Bell.STATES.BLOCKED]=this.text["tip.state.blocked"];this.state=Bell.STATES.UNINITIALIZED;window.addEventListener("focus",function(event){OneSignal._checkTrigger_nativePermissionChanged()});window.addEventListener(Bell.EVENTS.LAUNCHER_CLICK,function(event){_this.launcher.activateIfInactive().then(function(){return _this.message.hide()}).then(function(){if(_this.unsubscribed){var setSubscriptionState=_limitStore2["default"].getLast("setsubscription.value");if(false===setSubscriptionState)_this.showDialogProcedure();else OneSignal.registerForPushNotifications()}else if(_this.subscribed)_this.showDialogProcedure();else if(_this.blocked)_this.showDialogProcedure()})["catch"](function(e){return _loglevel2["default"].error(e)})});window.addEventListener(Bell.EVENTS.SUBSCRIBE_CLICK,function(){_Dialog2["default"].subscribeButton.disabled=true;OneSignal.setSubscription(true)});window.addEventListener(Bell.EVENTS.UNSUBSCRIBE_CLICK,function(){_this.launcher.activateIfInactive();if(_this.message.shown||_this.dialog.shown)return;Promise.resolve(function(){if(_this.messages.queued.length>0)return _this.message.dequeue().then(function(msg){return _this.message.content=msg});else return Promise.resolve(function(){return _this.message.content=_this.messages[_this.state]})}).then(function(){return _this.message.show()})});window.addEventListener(Bell.EVENTS.HOVERING,function(){_this.launcher.activateIfInactive();if(_this.message.shown||_this.dialog.shown)return;Promise.resolve(function(){if(_this.messages.queued.length>0)return _this.message.dequeue().then(function(msg){return _this.message.content=msg});else return Promise.resolve(function(){return _this.message.content=_this.messages[_this.state]})}).then(function(){return _this.message.show()})});window.addEventListener(Bell.EVENTS.HOVERED,function(){if(_this.message.shown)_this.message.hide().then(function(){_this.message.content=_this.messages[_this.state];if(_this.launcher.wasInactive&&!_this.dialog.shown){_this.launcher.inactivate();_this.launcher.wasInactive=null}})});window.addEventListener(OneSignal.EVENTS.SUBSCRIPTION_CHANGED,function(e){var isSubscribed=e.detail;_this.setState(isSubscribed?Bell.STATES.SUBSCRIBED:Bell.STATES.UNSUBSCRIBED)});window.addEventListener(OneSignal.EVENTS.NATIVE_PROMPT_PERMISSIONCHANGED,function(from,to){_this.updateState()});window.addEventListener(OneSignal.EVENTS.WELCOME_NOTIFICATION_SENT,function(e){_this.message.display(_this.text["tip.action.subscribed"],2500).then(function(){_this.launcher.inactivate()})["catch"](function(e){_loglevel2["default"].error(e)})});this.updateState()}_createClass(Bell,null,[{key:"EVENTS",get:function get(){return{STATE_CHANGED:"onesignal.bell.state.changed",LAUNCHER_CLICK:"onesignal.bell.launcher.click",BELL_CLICK:"onesignal.bell.launcher.button.click",SUBSCRIBE_CLICK:"onesignal.bell.launcher.dialog.button.subscribe.click",UNSUBSCRIBE_CLICK:"onesignal.bell.launcher.dialog.button.unsubscribe.click",HOVERING:"onesignal.bell.hovering",HOVERED:"onesignal.bell.hovered"}}},{key:"STATES",get:function get(){return{UNINITIALIZED:"uninitialized",SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed",BLOCKED:"blocked"}}}]);_createClass(Bell,[{key:"showDialogProcedure",value:function showDialogProcedure(){var _this2=this;if(!this.dialog.shown)this.dialog.show().then(function(e){(0,_utils.once)(document,"click",function(e,destroyEventListener){var wasDialogClicked=_this2.dialog.element.contains(e.target);if(wasDialogClicked);else{destroyEventListener();_this2.dialog.hide().then(function(e){_this2.launcher.inactivateIfWasInactive()})["catch"](function(e){_loglevel2["default"].error(e)})}},true)})["catch"](function(e){_loglevel2["default"].error(e)})}},{key:"create",value:function create(){var _this3=this;if(!(0,_utils.isPushNotificationsSupported)())return;if(this.container)(0,_utils.removeDomElement)("onesignal-bell-container");window.addDomElement=_utils.addDomElement;(0,_utils.addDomElement)("body","beforeend",'<div id="onesignal-bell-container" class="onesignal-bell-container onesignal-reset"></div>');(0,_utils.addDomElement)(this.container,"beforeend",'<div id="onesignal-bell-launcher" class="onesignal-bell-launcher"></div>');(0,_utils.addDomElement)(this.launcher.selector,"beforeend",'<div class="onesignal-bell-launcher-button"></div>');(0,_utils.addDomElement)(this.launcher.selector,"beforeend",'<div class="onesignal-bell-launcher-badge"></div>');(0,_utils.addDomElement)(this.launcher.selector,"beforeend",'<div class="onesignal-bell-launcher-message"></div>');(0,_utils.addDomElement)(this.message.selector,"beforeend",'<div class="onesignal-bell-launcher-message-body"></div>');(0,_utils.addDomElement)(this.launcher.selector,"beforeend",'<div class="onesignal-bell-launcher-dialog"></div>');(0,_utils.addDomElement)(this.dialog.selector,"beforeend",'<div class="onesignal-bell-launcher-dialog-body"></div>');(0,_utils.addDomElement)(this.button.selector,"beforeEnd",logoSvg);this.launcher.resize(this.options.size).then(function(){if("bottom-left"===_this3.options.position){(0,_utils.addCssClass)(_this3.container,"onesignal-bell-container-bottom-left");(0,_utils.addCssClass)(_this3.launcher.selector,"onesignal-bell-launcher-bottom-left")}else if("bottom-right"===_this3.options.position){(0,_utils.addCssClass)(_this3.container,"onesignal-bell-container-bottom-right");(0,_utils.addCssClass)(_this3.launcher.selector,"onesignal-bell-launcher-bottom-right")}else throw new Error("Invalid OneSignal bell position "+_this3.options.position);if("default"===_this3.options.theme)(0,_utils.addCssClass)(_this3.launcher.selector,"onesignal-bell-launcher-theme-default");else if("inverse"===_this3.options.theme)(0,_utils.addCssClass)(_this3.launcher.selector,"onesignal-bell-launcher-theme-inverse");else throw new Error("Invalid OneSignal bell theme "+_this3.options.theme);OneSignal.isPushNotificationsEnabled(function(pushEnabled){(pushEnabled?_this3.launcher.inactivate():(0,_utils.nothing)()).then(function(){return(0,_utils.delay)(_this3.options.showLauncherAfter)}).then(function(){return _this3.launcher.show()}).then(function(){return(0,_utils.delay)(_this3.options.showBadgeAfter)}).then(function(){if(_this3.options.prenotify&&!pushEnabled&&OneSignal._isNewVisitor)return _this3.message.enqueue("Click to subscribe to notifications").then(function(){return _this3.badge.show()});else return(0,_utils.nothing)()}).then(function(){return _this3.initialized=true})["catch"](function(e){return _loglevel2["default"].error(e)})})})}},{key:"_getCurrentSetSubscriptionState",value:function _getCurrentSetSubscriptionState(){var setSubscriptionState=_limitStore2["default"].get("setsubscription.value");var currentSetSubscription=setSubscriptionState[setSubscriptionState.length-1];return currentSetSubscription}},{key:"updateState",value:function updateState(){var _this4=this;OneSignal.isPushNotificationsEnabled(function(isEnabled){_this4.setState(isEnabled?Bell.STATES.SUBSCRIBED:Bell.STATES.UNSUBSCRIBED);if("denied"===_limitStore2["default"].getLast("notification.permission"))_this4.setState(Bell.STATES.BLOCKED)})}},{key:"setState",value:function setState(newState){var _this5=this;console.trace("%cCalled setState().",(0,_utils.getConsoleStyle)("bold"));var lastState=this.state;this.state=newState;if(lastState!==newState)_events2["default"].trigger(Bell.EVENTS.STATE_CHANGED,{from:lastState,to:newState});this.message.waitUntilHidden().then(function(){return _this5.message.content=_this5.messages[newState]})}},{key:"container",get:function get(){return document.querySelector("#onesignal-bell-container")}},{key:"launcher",get:function get(){if(!this._launcher)this._launcher=new _Launcher2["default"](this);return this._launcher}},{key:"button",get:function get(){if(!this._button)this._button=new _Button2["default"](this);return this._button}},{key:"badge",get:function get(){if(!this._badge)this._badge=new _Badge2["default"](this);return this._badge}},{key:"message",get:function get(){if(!this._message)this._message=new _Message2["default"](this);return this._message}},{key:"dialog",get:function get(){if(!this._dialog)this._dialog=new _Dialog2["default"](this);return this._dialog}},{key:"subscribed",get:function get(){return this.state===Bell.STATES.SUBSCRIBED}},{key:"unsubscribed",get:function get(){return this.state===Bell.STATES.UNSUBSCRIBED}},{key:"blocked",get:function get(){return this.state===Bell.STATES.BLOCKED}}]);return Bell}();exports["default"]=Bell},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(name,definition){if("undefined"!=typeof module&&module.exports)module.exports=definition();else if(true)!(__WEBPACK_AMD_DEFINE_FACTORY__=definition,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__,void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));else this[name]=definition()}("bowser",function(){function detect(ua){function getFirstMatch(regex){var match=ua.match(regex);return match&&match.length>1&&match[1]||""}function getSecondMatch(regex){var match=ua.match(regex);return match&&match.length>1&&match[2]||""}var iosdevice=getFirstMatch(/(ipod|iphone|ipad)/i).toLowerCase(),likeAndroid=/like android/i.test(ua),android=!likeAndroid&&/android/i.test(ua),chromeBook=/CrOS/.test(ua),edgeVersion=getFirstMatch(/edge\/(\d+(\.\d+)?)/i),versionIdentifier=getFirstMatch(/version\/(\d+(\.\d+)?)/i),tablet=/tablet/i.test(ua),mobile=!tablet&&/[^-]mobi/i.test(ua),result;if(/opera|opr/i.test(ua))result={name:"Opera",opera:t,version:versionIdentifier||getFirstMatch(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)};else if(/yabrowser/i.test(ua))result={name:"Yandex Browser",yandexbrowser:t,version:versionIdentifier||getFirstMatch(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)};else if(/windows phone/i.test(ua)){result={name:"Windows Phone",windowsphone:t};if(edgeVersion){result.msedge=t;result.version=edgeVersion}else{result.msie=t;result.version=getFirstMatch(/iemobile\/(\d+(\.\d+)?)/i)}}else if(/msie|trident/i.test(ua))result={name:"Internet Explorer",msie:t,version:getFirstMatch(/(?:msie |rv:)(\d+(\.\d+)?)/i)};else if(chromeBook)result={name:"Chrome",chromeBook:t,chrome:t,version:getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)};else if(/chrome.+? edge/i.test(ua))result={name:"Microsoft Edge",msedge:t,version:edgeVersion};else if(/chrome|crios|crmo/i.test(ua))result={name:"Chrome",chrome:t,version:getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)};else if(iosdevice){result={name:"iphone"==iosdevice?"iPhone":"ipad"==iosdevice?"iPad":"iPod"};if(versionIdentifier)result.version=versionIdentifier}else if(/sailfish/i.test(ua))result={name:"Sailfish",sailfish:t,version:getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i)};else if(/seamonkey\//i.test(ua))result={name:"SeaMonkey",seamonkey:t,version:getFirstMatch(/seamonkey\/(\d+(\.\d+)?)/i)};else if(/firefox|iceweasel/i.test(ua)){result={name:"Firefox",firefox:t,version:getFirstMatch(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)};if(/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(ua))result.firefoxos=t}else if(/silk/i.test(ua))result={name:"Amazon Silk",silk:t,version:getFirstMatch(/silk\/(\d+(\.\d+)?)/i)};else if(android)result={name:"Android",version:versionIdentifier};else if(/phantom/i.test(ua))result={name:"PhantomJS",phantom:t,version:getFirstMatch(/phantomjs\/(\d+(\.\d+)?)/i)};else if(/blackberry|\bbb\d+/i.test(ua)||/rim\stablet/i.test(ua))result={name:"BlackBerry",blackberry:t,version:versionIdentifier||getFirstMatch(/blackberry[\d]+\/(\d+(\.\d+)?)/i)};else if(/(web|hpw)os/i.test(ua)){result={name:"WebOS",webos:t,version:versionIdentifier||getFirstMatch(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)};/touchpad\//i.test(ua)&&(result.touchpad=t)}else if(/bada/i.test(ua))result={name:"Bada",bada:t,version:getFirstMatch(/dolfin\/(\d+(\.\d+)?)/i)};else if(/tizen/i.test(ua))result={name:"Tizen",tizen:t,version:getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||versionIdentifier};else if(/safari/i.test(ua))result={name:"Safari",safari:t,version:versionIdentifier};else result={name:getFirstMatch(/^(.*)\/(.*) /),version:getSecondMatch(/^(.*)\/(.*) /)};if(!result.msedge&&/(apple)?webkit/i.test(ua)){result.name=result.name||"Webkit";result.webkit=t;if(!result.version&&versionIdentifier)result.version=versionIdentifier}else if(!result.opera&&/gecko\//i.test(ua)){result.name=result.name||"Gecko";result.gecko=t;result.version=result.version||getFirstMatch(/gecko\/(\d+(\.\d+)?)/i)}if(!result.msedge&&(android||result.silk))result.android=t;else if(iosdevice){result[iosdevice]=t;result.ios=t}var osVersion="";if(result.windowsphone)osVersion=getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i);else if(iosdevice){osVersion=getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i);osVersion=osVersion.replace(/[_\s]/g,".")}else if(android)osVersion=getFirstMatch(/android[ \/-](\d+(\.\d+)*)/i);else if(result.webos)osVersion=getFirstMatch(/(?:web|hpw)os\/(\d+(\.\d+)*)/i);else if(result.blackberry)osVersion=getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i);else if(result.bada)osVersion=getFirstMatch(/bada\/(\d+(\.\d+)*)/i);else if(result.tizen)osVersion=getFirstMatch(/tizen[\/\s](\d+(\.\d+)*)/i);if(osVersion)result.osversion=osVersion;var osMajorVersion=osVersion.split(".")[0];if(tablet||"ipad"==iosdevice||android&&(3==osMajorVersion||4==osMajorVersion&&!mobile)||result.silk)result.tablet=t;else if(mobile||"iphone"==iosdevice||"ipod"==iosdevice||android||result.blackberry||result.webos||result.bada)result.mobile=t;if(result.msedge||result.msie&&result.version>=10||result.yandexbrowser&&result.version>=15||result.chrome&&result.version>=20||result.firefox&&result.version>=20||result.safari&&result.version>=6||result.opera&&result.version>=10||result.ios&&result.osversion&&result.osversion.split(".")[0]>=6||result.blackberry&&result.version>=10.1)result.a=t;else if(result.msie&&result.version<10||result.chrome&&result.version<20||result.firefox&&result.version<20||result.safari&&result.version<6||result.opera&&result.version<10||result.ios&&result.osversion&&result.osversion.split(".")[0]<6)result.c=t;else result.x=t;return result}var t=true;var bowser=detect("undefined"!=typeof navigator?navigator.userAgent:"");bowser.test=function(browserList){for(var i=0;i<browserList.length;++i){var browserItem=browserList[i];if("string"==typeof browserItem)if(browserItem in bowser)return true}return false};bowser._detect=detect;return bowser})},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();Object.defineProperty(exports,"__esModule",{value:true});var _utils=__webpack_require__(5);var _loglevel=__webpack_require__(7);var _loglevel2=_interopRequireDefault(_loglevel);var _events=__webpack_require__(55);var _events2=_interopRequireDefault(_events);var AnimatedElement=function(){function AnimatedElement(selector,showClass,hideClass){var state=arguments.length<=3||void 0===arguments[3]?"shown":arguments[3];var targetTransitionEvent=arguments.length<=4||void 0===arguments[4]?"opacity":arguments[4];var nestedContentSelector=arguments.length<=5||void 0===arguments[5]?null:arguments[5];_classCallCheck(this,AnimatedElement);this.selector=selector;this.showClass=showClass;this.hideClass=hideClass;this.state=state;this.targetTransitionEvent=targetTransitionEvent;this.nestedContentSelector=nestedContentSelector}_createClass(AnimatedElement,[{key:"show",value:function show(){var _this=this;if(!this.hidden)return Promise.resolve(this);else return new Promise(function(resolve){_this.state="showing";_events2["default"].trigger(AnimatedElement.EVENTS.SHOWING,_this);if(_this.hideClass)(0,_utils.removeCssClass)(_this.element,_this.hideClass);if(_this.showClass)(0,_utils.addCssClass)(_this.element,_this.showClass);(0,_utils.once)(_this.element,"transitionend",function(event,destroyListenerFn){if(event.target===_this.element&&event.propertyName===_this.targetTransitionEvent){destroyListenerFn();_this.state="shown";_events2["default"].trigger(AnimatedElement.EVENTS.SHOWN,_this);return resolve(_this)}},true)})}},{key:"hide",value:function hide(){var _this2=this;if(!this.shown)return Promise.resolve(this);else return new Promise(function(resolve){_this2.state="hiding";_events2["default"].trigger(AnimatedElement.EVENTS.HIDING,_this2);if(_this2.showClass)(0,_utils.removeCssClass)(_this2.element,_this2.showClass);if(_this2.hideClass)(0,_utils.addCssClass)(_this2.element,_this2.hideClass);(0,_utils.once)(_this2.element,"transitionend",function(event,destroyListenerFn){if(event.target===_this2.element&&event.propertyName===_this2.targetTransitionEvent){destroyListenerFn();_this2.state="hidden";_events2["default"].trigger(AnimatedElement.EVENTS.HIDDEN,_this2);return resolve(_this2)}},true)})}},{key:"waitUntilShown",value:function waitUntilShown(){var _this3=this;if("shown"===this.state)return Promise.resolve(this);else return new Promise(function(resolve){(0,_utils.once)(window,AnimatedElement.EVENTS.SHOWN,function(event,destroyListenerFn){if(event.details===_this3){destroyListenerFn();return resolve(_this3)}},true)})}},{key:"waitUntilHidden",value:function waitUntilHidden(){var _this4=this;if("hidden"===this.state)return Promise.resolve(this);else return new Promise(function(resolve){
(0,_utils.once)(window,AnimatedElement.EVENTS.HIDDEN,function(event,destroyListenerFn){if(event.details===_this4){destroyListenerFn();return resolve(_this4)}},true)})}},{key:"content",get:function get(){if(this.nestedContentSelector)return this.element.querySelector(this.nestedContentSelector).innerHTML;else return this.element.innerHTML},set:function set(value){if(this.nestedContentSelector)this.element.querySelector(this.nestedContentSelector).innerHTML=value;else this.element.innerHTML=value}},{key:"element",get:function get(){return document.querySelector(this.selector)}},{key:"showing",get:function get(){return"showing"===this.state}},{key:"shown",get:function get(){return"shown"===this.state}},{key:"hiding",get:function get(){return"hiding"===this.state}},{key:"hidden",get:function get(){return"hidden"===this.state}}],[{key:"EVENTS",get:function get(){return{SHOWING:"onesignal.bell.animatedelement.showing",SHOWN:"onesignal.bell.animatedelement.shown",HIDING:"onesignal.bell.animatedelement.hiding",HIDDEN:"onesignal.bell.animatedelement.hidden"}}}]);return AnimatedElement}();exports["default"]=AnimatedElement},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return call&&("object"==typeof call||"function"==typeof call)?call:self}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();Object.defineProperty(exports,"__esModule",{value:true});var _utils=__webpack_require__(5);var _loglevel=__webpack_require__(7);var _loglevel2=_interopRequireDefault(_loglevel);var _events=__webpack_require__(55);var _events2=_interopRequireDefault(_events);var _AnimatedElement2=__webpack_require__(58);var _AnimatedElement3=_interopRequireDefault(_AnimatedElement2);var ActiveAnimatedElement=function(_AnimatedElement){function ActiveAnimatedElement(selector,showClass,hideClass,activeClass,inactiveClass){var state=arguments.length<=5||void 0===arguments[5]?"shown":arguments[5];var activeState=arguments.length<=6||void 0===arguments[6]?"active":arguments[6];var targetTransitionEvent=arguments.length<=7||void 0===arguments[7]?"opacity":arguments[7];var nestedContentSelector=arguments.length<=8||void 0===arguments[8]?null:arguments[8];_classCallCheck(this,ActiveAnimatedElement);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(ActiveAnimatedElement).call(this,selector,showClass,hideClass,state,targetTransitionEvent,nestedContentSelector));_this.activeClass=activeClass;_this.inactiveClass=inactiveClass;_this.activeState=activeState;return _this}_inherits(ActiveAnimatedElement,_AnimatedElement);_createClass(ActiveAnimatedElement,[{key:"activate",value:function activate(){var _this2=this;if(!this.inactive||!this.shown)return Promise.resolve(this);else return new Promise(function(resolve){_this2.activeState="activating";_events2["default"].trigger(ActiveAnimatedElement.EVENTS.ACTIVATING,_this2);if(_this2.inactiveClass)(0,_utils.removeCssClass)(_this2.element,_this2.inactiveClass);if(_this2.activeClass)(0,_utils.addCssClass)(_this2.element,_this2.activeClass);if(_this2.shown)(0,_utils.once)(_this2.element,"transitionend",function(event,destroyListenerFn){if(event.target===_this2.element&&event.propertyName===_this2.targetTransitionEvent){destroyListenerFn();_this2.activeState="active";_events2["default"].trigger(ActiveAnimatedElement.EVENTS.ACTIVE,_this2);return resolve(_this2)}},true);else{_this2.activeState="active";_events2["default"].trigger(ActiveAnimatedElement.EVENTS.ACTIVE,_this2);return resolve(_this2)}})}},{key:"inactivate",value:function inactivate(){var _this3=this;if(!this.active)return Promise.resolve(this);else return new Promise(function(resolve){_this3.activeState="inactivating";_events2["default"].trigger(ActiveAnimatedElement.EVENTS.INACTIVATING,_this3);if(_this3.activeClass)(0,_utils.removeCssClass)(_this3.element,_this3.activeClass);if(_this3.inactiveClass)(0,_utils.addCssClass)(_this3.element,_this3.inactiveClass);if(_this3.shown)(0,_utils.once)(_this3.element,"transitionend",function(event,destroyListenerFn){if(event.target===_this3.element&&event.propertyName===_this3.targetTransitionEvent){destroyListenerFn();_this3.activeState="inactive";_events2["default"].trigger(ActiveAnimatedElement.EVENTS.INACTIVE,_this3);return resolve(_this3)}},true);else{_this3.activeState="inactive";_events2["default"].trigger(ActiveAnimatedElement.EVENTS.INACTIVE,_this3);return resolve(_this3)}})}},{key:"waitUntilActive",value:function waitUntilActive(){var _this4=this;if(this.active)return Promise.resolve(this);else return new Promise(function(resolve){(0,_utils.once)(window,ActiveAnimatedElement.EVENTS.ACTIVE,function(event,destroyListenerFn){if(event.details===_this4){destroyListenerFn();return resolve(_this4)}},true)})}},{key:"waitUntilInactive",value:function waitUntilInactive(){var _this5=this;if(this.inactive)return Promise.resolve(this);else return new Promise(function(resolve){(0,_utils.once)(window,ActiveAnimatedElement.EVENTS.INACTIVE,function(event,destroyListenerFn){if(event.details===_this5){destroyListenerFn();return resolve(_this5)}},true)})}},{key:"activating",get:function get(){return"activating"===this.activeState}},{key:"active",get:function get(){return"active"===this.activeState}},{key:"inactivating",get:function get(){return"inactivating"===this.activeState}},{key:"inactive",get:function get(){return"inactive"===this.activeState}}],[{key:"EVENTS",get:function get(){return Object.assign({},_AnimatedElement3["default"].EVENTS,{ACTIVATING:"onesignal.bell.activeanimatedelement.activating",ACTIVE:"onesignal.bell.activeanimatedelement.active",INACTIVATING:"onesignal.bell.activeanimatedelement.inactivating",INACTIVE:"onesignal.bell.activeanimatedelement.inactive"})}}]);return ActiveAnimatedElement}(_AnimatedElement3["default"]);exports["default"]=ActiveAnimatedElement},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return call&&("object"==typeof call||"function"==typeof call)?call:self}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(null===object)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);if(null===parent)return;else return get(parent,property,receiver)}else if("value"in desc)return desc.value;else{var getter=desc.get;if(void 0===getter)return;return getter.call(receiver)}};Object.defineProperty(exports,"__esModule",{value:true});var _utils=__webpack_require__(5);var _loglevel=__webpack_require__(7);var _loglevel2=_interopRequireDefault(_loglevel);var _events=__webpack_require__(55);var _events2=_interopRequireDefault(_events);var _AnimatedElement=__webpack_require__(58);var _AnimatedElement2=_interopRequireDefault(_AnimatedElement);var _ActiveAnimatedElement=__webpack_require__(59);var _ActiveAnimatedElement2=_interopRequireDefault(_ActiveAnimatedElement);var Launcher=function(_ActiveAnimatedElemen){function Launcher(bell){_classCallCheck(this,Launcher);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Launcher).call(this,".onesignal-bell-launcher","onesignal-bell-launcher-active",null,null,"onesignal-bell-launcher-inactive","hidden","active"));_this.bell=bell;_this.wasInactive=false;return _this}_inherits(Launcher,_ActiveAnimatedElemen);_createClass(Launcher,[{key:"resize",value:function resize(size){var _this2=this;(0,_utils.removeCssClass)(this.element,"onesignal-bell-launcher-sm");(0,_utils.removeCssClass)(this.element,"onesignal-bell-launcher-md");(0,_utils.removeCssClass)(this.element,"onesignal-bell-launcher-lg");if("small"===size)(0,_utils.addCssClass)(this.element,"onesignal-bell-launcher-sm");else if("medium"===size)(0,_utils.addCssClass)(this.element,"onesignal-bell-launcher-md");else if("large"===size)(0,_utils.addCssClass)(this.element,"onesignal-bell-launcher-lg");else throw new Error("Invalid OneSignal bell size "+size);if(!this.shown)return Promise.resolve(this);else return new Promise(function(resolve){(0,_utils.once)(_this2.element,"transitionend",function(event,destroyListenerFn){if(event.target===_this2.element&&event.propertyName===_this2.targetTransitionEvent){destroyListenerFn();return resolve(_this2)}},true)})}},{key:"activateIfInactive",value:function activateIfInactive(){if(this.inactive){this.wasInactive=true;return this.activate()}else return(0,_utils.nothing)()}},{key:"inactivateIfWasInactive",value:function inactivateIfWasInactive(){if(this.wasInactive){this.wasInactive=false;return this.inactivate()}else return(0,_utils.nothing)()}},{key:"inactivate",value:function inactivate(){var _this3=this;return this.bell.message.hide().then(function(){if(_this3.bell.badge.content.length>0)return _this3.bell.badge.hide().then(function(){return Promise.all([_get(Object.getPrototypeOf(Launcher.prototype),"inactivate",_this3).call(_this3),_this3.resize("small")])}).then(function(){return _this3.bell.badge.show()})["catch"](function(e){return _loglevel2["default"].error(e)});else return Promise.all([_get(Object.getPrototypeOf(Launcher.prototype),"inactivate",_this3).call(_this3),_this3.resize("small")])})}},{key:"activate",value:function activate(){var _this4=this;if(this.bell.badge.content.length>0)return this.bell.badge.hide().then(function(){return Promise.all([_get(Object.getPrototypeOf(Launcher.prototype),"activate",_this4).call(_this4),_this4.resize(_this4.bell.options.size)])}).then(function(){return _this4.bell.badge.show()})["catch"](function(e){return _loglevel2["default"].error(e)});else return Promise.all([_get(Object.getPrototypeOf(Launcher.prototype),"activate",this).call(this),this.resize(this.bell.options.size)])}}]);return Launcher}(_ActiveAnimatedElement2["default"]);exports["default"]=Launcher},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return call&&("object"==typeof call||"function"==typeof call)?call:self}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();Object.defineProperty(exports,"__esModule",{value:true});var _utils=__webpack_require__(5);var _loglevel=__webpack_require__(7);var _loglevel2=_interopRequireDefault(_loglevel);var _events=__webpack_require__(55);var _events2=_interopRequireDefault(_events);var _ActiveAnimatedElement=__webpack_require__(59);var _ActiveAnimatedElement2=_interopRequireDefault(_ActiveAnimatedElement);var Badge=function(_ActiveAnimatedElemen){function Badge(){_classCallCheck(this,Badge);return _possibleConstructorReturn(this,Object.getPrototypeOf(Badge).call(this,".onesignal-bell-launcher-badge","onesignal-bell-launcher-badge-opened",null,"onesignal-bell-launcher-badge-active",null,"hidden"))}_inherits(Badge,_ActiveAnimatedElemen);_createClass(Badge,[{key:"increment",value:function increment(){if(!isNaN(this.content)){var badgeNumber=+this.content;badgeNumber+=1;this.content=badgeNumber.toString();return badgeNumber}}},{key:"decrement",value:function decrement(){if(!isNaN(this.content)){var badgeNumber=+this.content;badgeNumber-=1;if(badgeNumber>0)this.content=badgeNumber.toString();else this.content="";return badgeNumber}}}]);return Badge}(_ActiveAnimatedElement2["default"]);exports["default"]=Badge},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return call&&("object"==typeof call||"function"==typeof call)?call:self}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();Object.defineProperty(exports,"__esModule",{value:true});var _utils=__webpack_require__(5);var _loglevel=__webpack_require__(7);var _loglevel2=_interopRequireDefault(_loglevel);var _events=__webpack_require__(55);var _events2=_interopRequireDefault(_events);var _ActiveAnimatedElement=__webpack_require__(59);var _ActiveAnimatedElement2=_interopRequireDefault(_ActiveAnimatedElement);var _bell=__webpack_require__(56);var _bell2=_interopRequireDefault(_bell);var _limitStore=__webpack_require__(8);var _limitStore2=_interopRequireDefault(_limitStore);var Button=function(_ActiveAnimatedElemen){function Button(bell){_classCallCheck(this,Button);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Button).call(this,".onesignal-bell-launcher-button",null,null,"onesignal-bell-launcher-button-active",null,"shown"));_this.bell=bell;_this.events={mouse:"bell.launcher.button.mouse"};_this.element.addEventListener("mouseover",function(){if(_limitStore2["default"].isEmpty(_this.events.mouse)||"out"===_limitStore2["default"].getLast(_this.events.mouse))_events2["default"].trigger(_bell2["default"].EVENTS.HOVERING);_limitStore2["default"].put(_this.events.mouse,"over")});_this.element.addEventListener("mouseleave",function(){_limitStore2["default"].put(_this.events.mouse,"out");_events2["default"].trigger(_bell2["default"].EVENTS.HOVERED)});_this.element.addEventListener("mousedown",function(){_this.pulse();_this.activate();_this.bell.badge.activate()});_this.element.addEventListener("mouseup",function(){_this.inactivate();_this.bell.badge.inactivate()});_this.element.addEventListener("click",function(){_events2["default"].trigger(_bell2["default"].EVENTS.BELL_CLICK);_events2["default"].trigger(_bell2["default"].EVENTS.LAUNCHER_CLICK)});return _this}_inherits(Button,_ActiveAnimatedElemen);_createClass(Button,[{key:"pulse",value:function pulse(){(0,_utils.removeDomElement)(".pulse-ring");addDomElement(this.element,"beforeend",'<div class="pulse-ring"></div>')}}]);return Button}(_ActiveAnimatedElement2["default"]);exports["default"]=Button},function(module,exports,__webpack_require__){(function(fetch){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;else{var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return call&&("object"==typeof call||"function"==typeof call)?call:self}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(null===object)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);if(null===parent)return;else return get(parent,property,receiver)}else if("value"in desc)return desc.value;else{var getter=desc.get;if(void 0===getter)return;return getter.call(receiver)}};Object.defineProperty(exports,"__esModule",{value:true});var _utils=__webpack_require__(5);var _loglevel=__webpack_require__(7);var _loglevel2=_interopRequireDefault(_loglevel);var _events=__webpack_require__(55);var _events2=_interopRequireDefault(_events);var _AnimatedElement2=__webpack_require__(58);var _AnimatedElement3=_interopRequireDefault(_AnimatedElement2);var _bowser=__webpack_require__(57);var Browser=_interopRequireWildcard(_bowser);var _bell=__webpack_require__(56);var _bell2=_interopRequireDefault(_bell);var _limitStore=__webpack_require__(8);var _limitStore2=_interopRequireDefault(_limitStore);var Dialog=function(_AnimatedElement){function Dialog(bell){_classCallCheck(this,Dialog);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Dialog).call(this,".onesignal-bell-launcher-dialog","onesignal-bell-launcher-dialog-opened",null,"hidden","opacity",".onesignal-bell-launcher-dialog-body"));_this.bell=bell;_this.subscribeButtonId="#onesignal-bell-container .onesignal-bell-launcher #subscribe-button";_this.unsubscribeButtonId="#onesignal-bell-container .onesignal-bell-launcher #unsubscribe-button";_this.notificationIcons=null;window.addEventListener(_bell2["default"].EVENTS.STATE_CHANGED,function(state){state=state.detail;if(state.to===_bell2["default"].STATES.SUBSCRIBED)if(null===_this.notificationIcons)_this.getNotificationIcons().then(function(icons){_this.notificationIcons=icons})});window.addEventListener("click",function(event){if(event.target===document.querySelector(_this.subscribeButtonId))_events2["default"].trigger(_bell2["default"].EVENTS.SUBSCRIBE_CLICK);else if(event.target===document.querySelector(_this.unsubscribeButtonId))_events2["default"].trigger(_bell2["default"].EVENTS.UNSUBSCRIBE_CLICK)});return _this}_inherits(Dialog,_AnimatedElement);_createClass(Dialog,[{key:"getNotificationIcons",value:function getNotificationIcons(){if(!OneSignal._app_id)return Promise.resolve(null);var url=OneSignal._API_URL+"apps/"+OneSignal._app_id+"/icon";return new Promise(function(resolve,reject){fetch(url).then(function(response){return response.json()}).then(function(data){if(data.errors){console.error("API call %c"+url,(0,_utils.getConsoleStyle)("code"),"failed with:",data.errors);reject(null)}resolve(data)})["catch"](function(ex){console.error("Call %cgetNotificationIcons()",(0,_utils.getConsoleStyle)("code"),"failed with:",ex);reject(null)})})}},{key:"getPlatformNotificationIcon",value:function getPlatformNotificationIcon(){if(this.notificationIcons){if(Browser.chrome||Browser.firefox)return this.notificationIcons.chrome||this.notificationIcons.safari;else if(Browser.safari)return this.notificationIcons.safari||this.notificationIcons.chrome}else return null}},{key:"show",value:function show(){var _this2=this;return this.updateBellLauncherDialogBody().then(function(){return _get(Object.getPrototypeOf(Dialog.prototype),"show",_this2).call(_this2)})["catch"](function(e){return _loglevel2["default"].error(e)})}},{key:"updateBellLauncherDialogBody",value:function updateBellLauncherDialogBody(){var _this3=this;return new Promise(function(resolve,reject){(0,_utils.clearDomElementChildren)(document.querySelector(_this3.nestedContentSelector));var currentSetSubscription=_limitStore2["default"].getLast("setsubscription.value");var contents="Nothing to show.";if(_this3.bell.state===_bell2["default"].STATES.SUBSCRIBED&&true===currentSetSubscription||_this3.bell.state===_bell2["default"].STATES.UNSUBSCRIBED&&false===currentSetSubscription){var notificationIconHtml="";var imageUrl=_this3.getPlatformNotificationIcon();if(imageUrl)notificationIconHtml='<div class="push-notification-icon"><img src="'+imageUrl+'"></div>';else notificationIconHtml='<div class="push-notification-icon push-notification-icon-default"></div>';var buttonHtml="";if(_this3.bell.state!==_bell2["default"].STATES.SUBSCRIBED)buttonHtml='<button type="button" class="action" id="'+Dialog.subscribeButtonSelectorId+'">'+_this3.bell.text["dialog.main.button.subscribe"]+"</button>";else buttonHtml='<button type="button" class="action" id="'+Dialog.unsubscribeButtonSelectorId+'">'+_this3.bell.text["dialog.main.button.unsubscribe"]+"</button>";contents="\n                  <h1>"+_this3.bell.text["dialog.main.title"]+'</h1>\n                  <div class="divider"></div>\n                  <div class="push-notification">\n                    '+notificationIconHtml+'\n                    <div class="push-notification-text-container">\n                      <div class="push-notification-text push-notification-text-short"></div>\n                      <div class="push-notification-text"></div>\n                      <div class="push-notification-text push-notification-text-medium"></div>\n                      <div class="push-notification-text"></div>\n                      <div class="push-notification-text push-notification-text-medium"></div>\n                    </div>\n                  </div>\n                  <div class="action-container">\n                    '+buttonHtml+'\n                  </div>\n                  <div class="divider"></div>\n                  <div class="kickback">Powered by <a href="https://onesignal.com" class="kickback" target="_blank">OneSignal</a></div>\n                '}else if(_this3.bell.state===_bell2["default"].STATES.BLOCKED){var imageUrl=null;if(Browser.chrome)imageUrl=HOST_URL+"/bell/chrome-unblock.jpg";else if(Browser.firefox)imageUrl=HOST_URL+"/bell/firefox-unblock.jpg";else if(Browser.safari)imageUrl=HOST_URL+"/bell/safari-unblock.jpg";var instructionsHtml="";if(imageUrl)instructionsHtml='\n            <div class="instructions">\n              <a href="'+imageUrl+'" target="_blank"><img src="'+imageUrl+'"></a></div>\n            </div>\n            ';contents="\n                  <h1>"+_this3.bell.text["dialog.blocked.title"]+'</h1>\n                  <div class="divider"></div>\n                  <div class="instructions">\n                  <p>'+_this3.bell.text["dialog.blocked.message"]+"</p>\n                  "+instructionsHtml+'\n                  </div>\n                  <div class="divider"></div>\n                  <div class="kickback">Powered by <a href="https://onesignal.com" class="kickback" target="_blank">OneSignal</a></div>\n                '}addDomElement(document.querySelector(_this3.nestedContentSelector),"beforeend",contents);resolve()})["catch"](function(e){return _loglevel2["default"].error(e)})}}],[{key:"subscribeButtonSelectorId",get:function get(){return"subscribe-button"}},{key:"unsubscribeButtonSelectorId",get:function get(){return"unsubscribe-button"}},{key:"subscribeButton",get:function get(){return this.bell.querySelector("#"+Dialog.subscribeButtonSelector)}},{key:"unsubscribeButton",get:function get(){return document.querySelector("#"+Dialog.unsubscribeButtonSelector)}}]);return Dialog}(_AnimatedElement3["default"]);exports["default"]=Dialog}).call(exports,__webpack_require__(3))},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return call&&("object"==typeof call||"function"==typeof call)?call:self}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();Object.defineProperty(exports,"__esModule",{value:true});var _utils=__webpack_require__(5);var _loglevel=__webpack_require__(7);var _loglevel2=_interopRequireDefault(_loglevel);var _events=__webpack_require__(55);var _events2=_interopRequireDefault(_events);var _AnimatedElement2=__webpack_require__(58);var _AnimatedElement3=_interopRequireDefault(_AnimatedElement2);var Message=function(_AnimatedElement){function Message(bell){_classCallCheck(this,Message);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Message).call(this,".onesignal-bell-launcher-message","onesignal-bell-launcher-message-opened",null,"hidden","opacity",".onesignal-bell-launcher-message-body"));_this.bell=bell;return _this}_inherits(Message,_AnimatedElement);_createClass(Message,[{key:"display",value:function display(content){var _this2=this;var hideAfter=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return new Promise(function(resolve){_this2.shown?_this2.hide():(0,_utils.nothing)().then(function(){return _this2.content=content}).then(function(){return _this2.show()}).then(function(){return(0,_utils.delay)(hideAfter)}).then(function(){return _this2.hide()}).then(resolve)["catch"](function(e){return _loglevel2["default"].error(e)})})}},{key:"enqueue",value:function enqueue(message){var _this3=this;var notify=arguments.length<=1||void 0===arguments[1]?false:arguments[1];this.bell.messages.queued.push(message);return new Promise(function(resolve){if(_this3.bell.badge.shown)_this3.bell.badge.hide().then(function(){return _this3.bell.badge.increment()}).then(function(){return _this3.bell.badge.show()}).then(resolve);else{_this3.bell.badge.increment();if(_this3.bell.initialized)_this3.bell.badge.show().then(resolve);else resolve()}})}},{key:"dequeue",value:function dequeue(message){var _this4=this;var dequeuedMessage=this.bell.messages.queued.pop(message);return new Promise(function(resolve){if(_this4.bell.badge.shown)_this4.bell.badge.hide().then(function(){return _this4.bell.badge.decrement()}).then(function(){return _this4.bell.badge.show()}).then(resolve(dequeuedMessage));else{_this4.bell.badge.decrement();resolve(dequeuedMessage)}})}}]);return Message}(_AnimatedElement3["default"]);exports["default"]=Message},,function(module,exports){module.exports='<?xml version="1.0" encoding="utf-8"?>\n<!-- Generator: Adobe Illustrator 19.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\n<svg version="1.1" class="onesignal-bell-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n	 width="99.7px" height="99.7px" viewBox="0 0 99.7 99.7" style="enable-background:new 0 0 99.7 99.7;" xml:space="preserve">\n<g>\n	<circle class="background" cx="49.9" cy="49.9" r="49.9"/>\n	<g id="Layer_2">\n		<g>\n			<path class="foreground" d="M50.1,66.2H27.7c0,0-2-0.2-2-2.1c0-1.9,1.7-2,1.7-2s6.7-3.2,6.7-5.5c0-2.3-1.1-3.9-1.1-13.3\n				s6-16.6,13.2-16.6c0,0,1-2.4,3.9-2.4c2.8,0,3.8,2.4,3.8,2.4c7.2,0,13.2,7.2,13.2,16.6s-1,11-1,13.3c0,2.3,6.7,5.5,6.7,5.5\n				s1.7,0.1,1.7,2c0,1.8-2.1,2.1-2.1,2.1H50.1z"/>\n			<path class="foreground" d="M42.9,68.5h14.5c0,0-1,6.3-7.2,6.3S42.9,68.5,42.9,68.5z"/>\n			<ellipse class="stroke" cx="49.9" cy="49.9" rx="37.4" ry="36.9"/>\n		</g>\n	</g>\n</g>\n</svg>\n';
},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();Object.defineProperty(exports,"__esModule",{value:true});var _loglevel=__webpack_require__(7);var _loglevel2=_interopRequireDefault(_loglevel);var _events=__webpack_require__(55);var _events2=_interopRequireDefault(_events);var Database=function(){function Database(){_classCallCheck(this,Database)}_createClass(Database,null,[{key:"getInstance",value:function getInstance(){return new Promise(function(resolve,reject){if(Database._instance)resolve(Database._instance);else{var request=indexedDB.open("ONE_SIGNAL_SDK_DB",1);request.onsuccess=function(event){var database=event.target.result;Database._instance=database;console.debug("Returning a new opened instance of IndexedDB.");resolve(database)};request.onerror=function(event){_loglevel2["default"].error("Unable to open IndexedDB.",event);reject(event)};request.onupgradeneeded=function(event){_loglevel2["default"].info("The OneSignal SDK is rebuilding its IndexedDB schema from a clean slate.");var db=event.target.result;db.createObjectStore("Ids",{keyPath:"type"});db.createObjectStore("NotificationOpened",{keyPath:"url"});db.createObjectStore("Options",{keyPath:"key"});_events2["default"].trigger(Database.EVENTS.REBUILT)}}})}},{key:"get",value:function get(table,key){if(key)return new Promise(function(resolve,reject){Database.getInstance().then(function(database){var request=database.transaction(table).objectStore(table).get(key);request.onsuccess=function(){_events2["default"].trigger(Database.EVENTS.RETRIEVED,{table:table,key:key,result:request.result});resolve(request.result)};request.onerror=function(){reject(request.errorCode)}})["catch"](function(e){_loglevel2["default"].error(e);reject(e)})});else return new Promise(function(resolve,reject){Database.getInstance().then(function(database){var jsonResult={};var cursor=database.transaction(table).objectStore(table).openCursor();cursor.onsuccess=function(event){var cursorResult=event.target.result;if(cursorResult){_events2["default"].trigger(Database.EVENTS.RETRIEVED,cursorResult.value);jsonResult[cursorResult.key]=cursorResult.value.value;cursorResult["continue"]()}else resolve(jsonResult)};cursor.onerror=function(event){reject(cursor.errorCode)}})["catch"](function(e){_loglevel2["default"].error(e);reject(e)})})}},{key:"put",value:function put(table,value){return new Promise(function(resolve,reject){Database.getInstance().then(function(database){database.transaction([table],"readwrite").objectStore(table).put(value);_events2["default"].trigger(Database.EVENTS.SET,value);resolve(value)})["catch"](function(e){_loglevel2["default"].error(e);reject(e)})})}},{key:"remove",value:function remove(table,key){return new Promise(function(resolve){Database.getInstance().then(function(database){database.transaction([table],"readwrite").objectStore(table)["delete"](key);resolve(key)})["catch"](function(e){_loglevel2["default"].error(e);reject(e)})})}},{key:"EVENTS",get:function get(){return{REBUILT:"onesignal.db.rebuilt",RETRIEVED:"onesignal.db.retrieved",SET:"onesignal.db.set"}}}]);return Database}();exports["default"]=Database},function(module,exports,__webpack_require__){(function(global){module.exports=global.ServiceWorker=__webpack_require__(69)}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){(function(fetch){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function lug(prefix){if(!ServiceWorker.lugCounter)ServiceWorker.lugCounter={};if(!ServiceWorker.lugCounter.prefix)ServiceWorker.lugCounter.prefix=1;_loglevel2["default"].debug("("+performance.now()+") "+prefix+":"+ServiceWorker.lugCounter.prefix++)}var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;else if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);else throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _vars=__webpack_require__(4);var _environment=__webpack_require__(52);var _environment2=_interopRequireDefault(_environment);var _api=__webpack_require__(6);var _loglevel=__webpack_require__(7);var _loglevel2=_interopRequireDefault(_loglevel);var _limitStore=__webpack_require__(8);var _limitStore2=_interopRequireDefault(_limitStore);__webpack_require__(70);var _database=__webpack_require__(67);var _database2=_interopRequireDefault(_database);var _utils=__webpack_require__(5);var ServiceWorker=function(){function ServiceWorker(){_classCallCheck(this,ServiceWorker)}_createClass(ServiceWorker,null,[{key:"run",value:function run(){self.addEventListener("push",ServiceWorker.onPushReceived);self.addEventListener("notificationclick",ServiceWorker.onNotificationClicked);self.addEventListener("install",ServiceWorker.onServiceWorkerInstalled);if(ServiceWorker.onOurSubdomain)self.addEventListener("fetch",ServiceWorker.onFetch)}},{key:"onPushReceived",value:function onPushReceived(event){_loglevel2["default"].debug("Called %conPushReceived("+JSON.stringify(event,null,4)+")",(0,_utils.getConsoleStyle)("code"));lug("onPushReceived");event.waitUntil(new Promise(function(resolve,reject){var extra={};ServiceWorker._getTitle().then(function(title){extra.title=title;return _database2["default"].get("Options","defaultIcon");lug("onPushReceived")}).then(function(defaultIconResult){extra.defaultIconResult=defaultIconResult;return extra;lug("onPushReceived")}).then(function(extra){return ServiceWorker._getLastNotifications();lug("onPushReceived")}).then(function(notifications){lug("onPushReceived");var notificationEventPromises=[];var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=void 0;try{for(var _iterator=notifications[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var notification=_step.value;var data={id:notification.custom.i,message:notification.alert,additionalData:notification.custom.a};if(notification.title)data.title=notification.title;else data.title=extra.title;if(notification.custom.u)data.launchURL=notification.custom.u;if(notification.icon)data.icon=notification.icon;else if(extra.defaultIconResult)data.icon=extra.defaultIconResult;var notificationEventPromise=self.registration.showNotification(data.title,{body:data.message,icon:data.icon,tag:JSON.stringify(data)});notificationEventPromises.push(notificationEventPromise);return Promise.all(notificationEventPromises)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"])_iterator["return"]()}finally{if(_didIteratorError)throw _iteratorError}}}).then(resolve)["catch"](function(e){return _loglevel2["default"].error(e)})}))}},{key:"onNotificationClicked",value:function onNotificationClicked(event){_loglevel2["default"].debug("Called %conNotificationClicked("+JSON.stringify(event,null,4)+")",(0,_utils.getConsoleStyle)("code"));lug("onNotificationClicked");var notificationData=JSON.parse(event.notification.tag);event.notification.close();event.waitUntil(_database2["default"].get("Options","defaultUrl").then(function(defaultUrlResult){lug("onNotificationClicked");if(defaultUrlResult)ServiceWorker.defaultLaunchUrl=defaultUrlResult.value}).then(function(){lug("onPushReceived");return clients.matchAll({type:"window"})}).then(function(clientList){lug("onNotificationClicked");var launchURL=registration.scope;if(ServiceWorker.defaultLaunchUrl)launchURL=ServiceWorker.defaultLaunchUrl;if(notificationData.launchURL)launchURL=notificationData.launchURL;for(var i=0;i<clientList.length;i++){var client=clientList[i];if("focus"in client&&client.url==launchURL){client.focus();client.postMessage(notificationData);return}}if("javascript:void(0);"!==launchURL&&"do_not_open"!==launchURL)return _database2["default"].put("NotificationOpened",{url:launchURL,data:notificationData}).then(function(){lug("onNotificationClicked");clients.openWindow(launchURL)["catch"](function(error){clients.openWindow(registration.scope+"redirector.html?url="+launchURL)})})}).then(function(){lug("onNotificationClicked");return Promise.all([_database2["default"].get("Ids","appId"),_database2["default"].get("Ids","userId")])}).then(function(results){lug("onNotificationClicked");var _results=_slicedToArray(results,2);var appIdResult=_results[0];var userIdResult=_results[1];if(appIdResult&&userIdResult)(0,_api.apiCall)("notifications/"+notificationData.id,"PUT",{app_id:appIdResult.id,player_id:userIdResult.id,opened:true})})["catch"](function(e){return _loglevel2["default"].error(e)}))}},{key:"onServiceWorkerInstalled",value:function onServiceWorkerInstalled(event){_loglevel2["default"].debug("Called %conServiceWorkerInstalled("+JSON.stringify(event,null,4)+")",(0,_utils.getConsoleStyle)("code"));_loglevel2["default"].info("Installing service worker: %c"+self.location.pathname,(0,_utils.getConsoleStyle)("code"),"(version 1.8.1)");if(self.location.pathname.indexOf("OneSignalSDKWorker.js")>-1)var serviceWorkerVersionType="WORKER1_ONE_SIGNAL_SW_VERSION";else var serviceWorkerVersionType="WORKER2_ONE_SIGNAL_SW_VERSION";if(ServiceWorker.onOurSubdomain)event.waitUntil(_database2["default"].put("Ids",{type:serviceWorkerVersionType,id:"1.8.1"}).then(function(){lug("onServiceWorkerInstalled");return caches.open("OneSignal_1.8.1")}).then(function(cache){lug("onServiceWorkerInstalled");return cache.addAll(["/sdks/initOneSignalHttpIframe","/sdks/initOneSignalHttpIframe?session=*","/sdks/manifest_json"])})["catch"](function(e){return _loglevel2["default"].error(e)}));else event.waitUntil(_database2["default"].put("Ids",{type:serviceWorkerVersionType,id:"1.8.1"}))}},{key:"onFetch",value:function onFetch(event){event.respondWith(caches.match(event.request).then(function(response){if(response)return response;return fetch(event.request)})["catch"](function(e){return _loglevel2["default"].error(e)}))}},{key:"_getTitle",value:function _getTitle(){return new Promise(function(resolve,reject){Promise.all([_database2["default"].get("Options","defaultTitle"),_database2["default"].get("Options","pageTitle")]).then(function(results){var _results2=_slicedToArray(results,2);var defaultTitleResult=_results2[0];var pageTitleResult=_results2[1];if(defaultTitleResult)resolve(defaultTitleResult.value);else if(pageTitleResult&&null!=pageTitleResult.value)resolve(pageTitleResult.value);else resolve("")})["catch"](function(e){_loglevel2["default"].error(e);reject(e)})})}},{key:"_getLastNotifications",value:function _getLastNotifications(){return new Promise(function(resolve,reject){var notifications=[];_database2["default"].get("Ids","userId").then(function(userIdResult){if(userIdResult)return(0,_api.apiCall)("players/"+userIdResult.id+"/chromeweb_notification","GET");else{_loglevel2["default"].error("Tried to get last notifications, but there was no userId found in the database.");reject(new Error("Tried to get last notifications, but there was no userId found in the database."))}}).then(function(response){for(var i=0;i<response.length;i++)notifications.push(JSON.parse(response[i]));resolve(notifications)})["catch"](function(e){_loglevel2["default"].error(e);reject(e)})})}},{key:"onOurSubdomain",get:function get(){return true}}]);return ServiceWorker}();self.OneSignalServiceWorker=ServiceWorker;_loglevel2["default"].setDefaultLevel(true?_loglevel2["default"].levels.TRACE:_loglevel2["default"].levels.ERROR);_loglevel2["default"].info("%cOneSignal Service Worker loaded (version 1.8.1, "+_environment2["default"].getEnv()+" environment).",(0,_utils.getConsoleStyle)("bold"));ServiceWorker.run()}).call(exports,__webpack_require__(3))},function(module,exports,__webpack_require__){(function(fetch){"use strict";if(!Cache.prototype.addAll)Cache.prototype.addAll=function addAll(requests){function NetworkError(message){this.name="NetworkError";this.code=19;this.message=message}var cache=this;NetworkError.prototype=Object.create(Error.prototype);return Promise.resolve().then(function(){if(arguments.length<1)throw new TypeError;var sequence=[];requests=requests.map(function(request){if(request instanceof Request)return request;else return String(request)});return Promise.all(requests.map(function(request){if("string"==typeof request)request=new Request(request);var scheme=new URL(request.url).protocol;if("http:"!==scheme&&"https:"!==scheme)throw new NetworkError("Invalid scheme");return fetch(request.clone())}))}).then(function(responses){return Promise.all(responses.map(function(response,i){return cache.put(requests[i],response)}))}).then(function(){return})}}).call(exports,__webpack_require__(3))}]);
//# sourceMappingURL=OneSignalSDK.js.map