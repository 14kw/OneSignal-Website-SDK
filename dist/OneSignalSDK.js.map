{"version":3,"sources":["webpack:///OneSignalSDK.js","webpack:///webpack/bootstrap 229985f05a65afba5a90","webpack:///./src/entry.js","webpack:///./src/sdk.js?dfb0","webpack:///./src/sdk.js","webpack:///./~/whatwg-fetch/fetch.js","webpack:///./src/vars.js","webpack:///./src/utils.js","webpack:///./src/api.js","webpack:///./~/loglevel/lib/loglevel.js","webpack:///./src/limitStore.js","webpack:///./src/environment.js","webpack:///./src/string.js","webpack:///./src/events.js","webpack:///./src/bell/bell.js","webpack:///./~/bowser/bowser.js","webpack:///./src/bell/AnimatedElement.js","webpack:///./src/bell/ActiveAnimatedElement.js","webpack:///./src/bell/Launcher.js","webpack:///./src/bell/Badge.js","webpack:///./src/bell/Button.js","webpack:///./src/bell/Dialog.js","webpack:///./src/bell/Message.js","webpack:///./src/bell/bell.svg","webpack:///./src/database.js","webpack:///./src/ServiceWorker.js?20f8","webpack:///./src/ServiceWorker.js","webpack:///./src/cache-polyfill.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_vars","_environment","_environment2","isBrowser","OneSignal","predefinedOneSignalPushes","_process_pushes","isServiceWorker","global","this","fetch","_interopRequireWildcard","newObj","key","Object","prototype","hasOwnProperty","_api","_loglevel","_loglevel2","_limitStore","_limitStore2","_events","_events2","_bell","_bell2","_database","_database2","_bowser","Browser","_utils","_VERSION","_API_URL","API_URL","_app_id","_tagsToSendOnRegister","_notificationOpened_callback","_idsAvailable_callback","_defaultLaunchURL","_initOptions","_httpRegistration","_main_page_port","_isNotificationEnabledCallback","_subscriptionSet","_initOneSignalHttp","_sessionIframeAdded","_useHttpMode","_windowWidth","_windowHeight","_isUninitiatedVisitor","_isNewVisitor","_isInitialized","bell","store","environment","event","LOGGING","browser","log","SERVICE_WORKER_UPDATER_PATH","SERVICE_WORKER_PATH","SERVICE_WORKER_PARAM","EVENTS","CUSTOM_PROMPT_CLICKED","NATIVE_PROMPT_PERMISSIONCHANGED","SUBSCRIPTION_CHANGED","WELCOME_NOTIFICATION_SENT","INTERNAL_SUBSCRIPTIONSET","SDK_INITIALIZED","_sendToOneSignalApi","url","action","inData","callback","failedCallback","debug","contents","method","headers","Content-type","body","JSON","stringify","then","status","response","Promise","resolve","reject","Error","statusText","json","jsonData","e","error","_getLanguage","navigator","language","length","substring","_getPlayerId","value","get","_getPlayerId_gotUserId","result","_registerWithOneSignal","appId","registrationId","deviceType","_registerWithOneSignal_GotUserId","userIdResult","_getNotificationTypes","notif_types","requestUrl","app_id","device_type","timezone","Date","getTimezoneOffset","device_model","platform","name","device_os","version","sdk","notification_types","identifier","put","type","registeredCallback","responseJSON","sessionStorage","setItem","_sendUnsentTags","userId","curr_callback","pop","creator","opener","parent","_safePostMessage","idsAvailable","from","getEnv","origin","httpNativePromptPermissionChanged","_getNotificationPermission","window","close","sendTags","setDefaultNotificationUrl","setDefaultIcon","icon","setDefaultTitle","title","_visibilitychange","document","visibilityState","removeEventListener","_sessionInit","onCustomPromptClicked","_checkTrigger_eventSubscriptionChanged","onNativePromptChanged","_onSubscriptionChanged","detail","welcome_notification_opts","welcome_notification_disabled","undefined","message","sendNotification","en","trigger","_onDbValueRetrieved","warn","bubbles","getConsoleStyle","_onDbValueSet","info","_onInternalSubscriptionSet","newSubscriptionValue","_onSdkInitialized","size","position","theme","create","trace","_onDatabaseRebuilt","_checkTrigger_nativePermissionChanged","currentPermission","safari_web_id","lastPermission","getLast","_triggerEvent_nativePromptPermissionChanged","permissions","ids","lastId","currentId","subscriptionStates","lastSubscriptionState","currentSubscriptionState","newSubscriptionState","lastTriggerTimes","now","currentTime","lastTriggerTime","elapsedTimeSeconds","lastEventStates","currentState","lastState","shouldNotTriggerEvent","_triggerEvent_subscriptionChanged","isPushNotificationsSupported","_installNativePromptPermissionChangedHook","isBrowserFirefox","getFirefoxVersion","_usingNativePermissionHook","query","permissionStatus","onchange","permissionBeforePrompt","getFirst","isHost","init","options","localStorage","currentNotificationPermission","storeValue","addEventListener","RETRIEVED","SET","REBUILT","onDatabaseRebuilt","isSupportedSafari","_supportsDirectPermission","subdomainName","DEV_HOST","s","createElement","setAttribute","head","appendChild","readyState","_internalInit","Database","all","_internalInit_GotAppRegistrationSubscriptionIds","appIdResult","registrationIdResult","subscriptionResult","remove","removeItem","getItem","Notification","permission","autoRegister","registerForPushNotifications","fromRegisterFor","_initHttp","continuePressed","setSubscription","isIframe","messageChannel","MessageChannel","port1","onmessage","capitalize","data","initOptions","defaultUrl","defaultTitle","defaultIcon","parent_url","registerForPushNotifications_GotNotificationOpened","notificationOpenedResult","openedNotification","getNotificationPermission","_getSubdomainState","curState","setSubdomainState","oneSignalInitPageReady","port2","_initSaveState","location","search","indexOf","player_id","serviceWorker","register","_enableNotifications","_registerError","state","notifPermssion","subscriptionSet","isPushEnabled","protocol","host","hostPageProtocol","match","dualScreenLeft","screenLeft","screen","left","dualScreenTop","screenTop","top","thisWidth","innerWidth","documentElement","clientWidth","width","thisHeight","innerHeight","clientHeight","height","childWidth","childHeight","message_localization_opts","message_localization_opts_str","message_localization_params","i","encoded_value","encodeURIComponent","childWindow","open","focus","_addSessionIframe","notificationPermissionBeforeRequest","safari","pushNotification","requestPermission","notificationPermissionAfterRequest","deviceToken","toLowerCase","modalPrompt","isPushNotificationsEnabled","pushEnabled","element","innerHTML","iframeStyle","getElementsByTagName","iframeNode","className","style","cssText","src","toString","getElementById","_registerForW3CPush","_registerForW3CPush_GotRegistrationId","getRegistration","serviceWorkerRegistration","sw_path","path","_registerServiceWorker","active","scriptURL","versionResult","installing","full_sw_and_path","node","display","err","existingServiceWorkerRegistration","ServiceWorkerRegistration","ready","_subscribeForPush","safariWebId","_triggerEvent_customPromptClicked","clickResult","recentPermissions","to","updateIfIdentical","arguments","_triggerEvent_dbValueRetrieved","_triggerEvent_dbValueSet","_triggerEvent_internalSubscriptionSet","pushManager","subscribe","userVisibleOnly","subscription","_subscribeForPush_GotAppId","subscriptionId","endpoint","replace","RegExp","isSupportedFireFox","code","sendTag","jsonKeyValue","jsonPair","sendTags_GotUserId","tags","resultObj","_obj","deleteTag","deleteTags","keyArray","_handleNotificationOpened","notificationData","parse","notification","tag","_handleNotificationOpened_GotAppUserIds","results","opened","waitUntil","clients","matchAll","clientList","launchURL","registration","scope","client","postMessage","openWindow","_listener_receiveMessage","receiveMessage","eventData","_iframePort","ports","_fireNotificationEnabledCallback","URL","httpsPromptAccepted","elem","parentNode","removeChild","httpsPromptCanceled","httpPromptAccepted","httpPromptCanceled","addListenerForNotificationOpened","newNotificationPermission","getIdsAvailable","push","getIdsAvailable_GotUserRegistrationIds","getTags","isBrowserSafari","_getSubscription","currentSubscription","newSubscription","apiCall","constructor","targetOrigin","receiver","tOrigin","startsWith","queryDict","substr","split","forEach","item","validPreURLRegex","array","functionName","shift","apply","setDefaultLevel","levels","TRACE","ERROR","normalizeName","String","test","TypeError","normalizeValue","Headers","map","append","getOwnPropertyNames","consumed","bodyUsed","fileReaderReady","reader","onload","onerror","readBlobAsArrayBuffer","blob","FileReader","readAsArrayBuffer","readBlobAsText","readAsText","Body","_initBody","_bodyInit","_bodyText","support","Blob","isPrototypeOf","_bodyBlob","formData","FormData","_bodyFormData","arrayBuffer","ArrayBuffer","rejected","text","decode","normalizeMethod","upcased","toUpperCase","methods","Request","input","credentials","mode","referrer","form","trim","bytes","join","decodeURIComponent","xhr","pairs","getAllResponseHeaders","header","Response","bodyInit","ok","self","list","values","getAll","has","set","thisArg","clone","redirectStatuses","redirect","RangeError","responseURL","getResponseHeader","request","XMLHttpRequest","responseText","withCredentials","responseType","setRequestHeader","send","polyfill","defineProperty","HOST_URL","PROD_HOST","isDev","_typeof","Symbol","isArray","variable","getHumanizedTimeDuration","timeDurationInMilliseconds","addPluralSuffix","number","duration","Math","floor","years","days","hours","minutes","seconds","chromeVersion","appVersion","parseInt","safariVersion","fireFoxVersion","userAgent","removeDomElement","selector","els","querySelectorAll","addDomElement","targetSelectorOrElement","addOrder","elementHtml","querySelector","insertAdjacentHTML","clearDomElementChildren","firstChild","addCssClass","cssClass","classList","add","removeCssClass","on","task","once","manualDestroy","taskWrapper","internalTaskFunction","destroyEventListener","off","delay","durationMs","setTimeout","nothing","when","condition","promiseIfTrue","promiseIfFalse","cache","jsonResponse","playerIds","titles","params","headings","include_player_ids","isAnyWeb","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_RESULT__","root","definition","realMethod","methodName","console","undefinedType","bindMethod","noop","bind","Function","enableLoggingWhenConsoleArrives","level","loggerName","replaceLoggingMethods","logMethods","methodFactory","defaultMethodFactory","Logger","defaultLevel","factory","persistLevelIfPossible","levelNum","levelName","storageKey","ignore","cookie","getPersistedLevel","storedLevel","exec","slice","currentLevel","DEBUG","INFO","WARN","SILENT","getLevel","setLevel","persist","enableAll","disableAll","initialLevel","defaultLogger","_loggersByName","getLogger","logger","_log","noConflict","LimitStore","LIMIT","isEmpty","_classCallCheck","instance","Constructor","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","protoProps","staticProps","Environment","WorkerLocation","SERVICE_WORKER","href","POPUP","HOST","IFRAME","isPopup","charAt","SILENT_EVENTS","Event","eventName","displayData","CustomEvent","cancelable","dispatchEvent","_bowser2","_AnimatedElement","_AnimatedElement2","_ActiveAnimatedElement","_ActiveAnimatedElement2","_Launcher","_Launcher2","_Badge","_Badge2","_Button","_Button2","_Dialog","_Dialog2","_Message","_Message2","webpackMissingModule","logoSvg","Bell","_this","_ref","_ref$size","_ref$position","_ref$theme","_ref$showLauncherAfte","showLauncherAfter","_ref$showBadgeAfter","showBadgeAfter","_ref$text","tip.state.unsubscribed","tip.state.subscribed","tip.state.blocked","tip.action.subscribed","tip.action.unsubscribed","dialog.main.title","dialog.main.button.subscribe","dialog.main.button.unsubscribe","dialog.blocked.title","dialog.blocked.message","_ref$prenotify","prenotify","messages","queued","STATES","UNSUBSCRIBED","SUBSCRIBED","BLOCKED","UNINITIALIZED","LAUNCHER_CLICK","launcher","activateIfInactive","hide","unsubscribed","setSubscriptionState","showDialogProcedure","subscribed","blocked","SUBSCRIBE_CLICK","subscribeButton","disabled","UNSUBSCRIBE_CLICK","shown","dialog","dequeue","msg","content","show","HOVERING","HOVERED","wasInactive","inactivate","isSubscribed","setState","updateState","STATE_CHANGED","BELL_CLICK","_this2","wasDialogClicked","contains","inactivateIfWasInactive","_this3","container","button","resize","enqueue","badge","initialized","_getCurrentSetSubscriptionState","currentSetSubscription","_this4","isEnabled","newState","_this5","waitUntilHidden","_launcher","_button","_badge","_message","_dialog","detect","ua","getFirstMatch","regex","getSecondMatch","iosdevice","likeAndroid","android","chromeBook","edgeVersion","versionIdentifier","tablet","mobile","opera","t","yandexbrowser","windowsphone","msedge","msie","chrome","sailfish","seamonkey","firefox","firefoxos","silk","phantom","blackberry","webos","touchpad","bada","tizen","webkit","gecko","ios","osVersion","osversion","osMajorVersion","a","x","bowser","browserList","browserItem","_detect","AnimatedElement","showClass","hideClass","targetTransitionEvent","nestedContentSelector","hidden","SHOWING","destroyListenerFn","propertyName","SHOWN","HIDING","HIDDEN","waitUntilShown","details","_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","setPrototypeOf","__proto__","_AnimatedElement3","ActiveAnimatedElement","activeClass","inactiveClass","activeState","getPrototypeOf","activate","inactive","ACTIVATING","ACTIVE","INACTIVATING","INACTIVE","waitUntilActive","waitUntilInactive","assign","_get","object","property","desc","getOwnPropertyDescriptor","getter","Launcher","_ActiveAnimatedElemen","Badge","increment","isNaN","badgeNumber","decrement","Button","events","mouse","pulse","Dialog","subscribeButtonId","unsubscribeButtonId","notificationIcons","getNotificationIcons","icons","errors","ex","getPlatformNotificationIcon","updateBellLauncherDialogBody","notificationIconHtml","imageUrl","buttonHtml","subscribeButtonSelectorId","unsubscribeButtonSelectorId","instructionsHtml","subscribeButtonSelector","unsubscribeButtonSelector","Message","hideAfter","notify","dequeuedMessage","getInstance","_instance","indexedDB","onsuccess","database","onupgradeneeded","db","createObjectStore","keyPath","table","transaction","objectStore","errorCode","jsonResult","cursor","openCursor","cursorResult","lug","prefix","ServiceWorker","lugCounter","performance","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_i","iterator","_s","next","done","Array","run","onPushReceived","onNotificationClicked","onServiceWorkerInstalled","onOurSubdomain","onFetch","extra","_getTitle","defaultIconResult","_getLastNotifications","notifications","notificationEventPromises","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","custom","alert","additionalData","u","notificationEventPromise","showNotification","defaultUrlResult","defaultLaunchUrl","_results","pathname","serviceWorkerVersionType","caches","addAll","respondWith","_results2","defaultTitleResult","pageTitleResult","OneSignalServiceWorker","Cache","requests","NetworkError","sequence","scheme","responses"],"mappings":"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","file":"OneSignalSDK.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _vars = __webpack_require__(4);\n\t\n\tvar _environment = __webpack_require__(52);\n\t\n\tvar _environment2 = _interopRequireDefault(_environment);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tif (_environment2.default.isBrowser()) {\n\t  // We're running in the host page, iFrame of the host page, or popup window\n\t  // Load OneSignal's web SDK\n\t  if (typeof OneSignal !== \"undefined\") var predefinedOneSignalPushes = OneSignal;\n\t\n\t  __webpack_require__(1);\n\t\n\t  if (predefinedOneSignalPushes) OneSignal._process_pushes(predefinedOneSignalPushes);\n\t} else if (_environment2.default.isServiceWorker()) {\n\t  // We're running as the service worker\n\t  __webpack_require__(68);\n\t}\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {module.exports = global[\"OneSignal\"] = __webpack_require__(2);\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(fetch) {'use strict';\n\t\n\tvar _vars = __webpack_require__(4);\n\t\n\tvar _environment = __webpack_require__(52);\n\t\n\tvar _environment2 = _interopRequireDefault(_environment);\n\t\n\t__webpack_require__(53);\n\t\n\tvar _api = __webpack_require__(6);\n\t\n\tvar _loglevel = __webpack_require__(7);\n\t\n\tvar _loglevel2 = _interopRequireDefault(_loglevel);\n\t\n\tvar _limitStore = __webpack_require__(8);\n\t\n\tvar _limitStore2 = _interopRequireDefault(_limitStore);\n\t\n\tvar _events = __webpack_require__(55);\n\t\n\tvar _events2 = _interopRequireDefault(_events);\n\t\n\tvar _bell = __webpack_require__(56);\n\t\n\tvar _bell2 = _interopRequireDefault(_bell);\n\t\n\tvar _database = __webpack_require__(67);\n\t\n\tvar _database2 = _interopRequireDefault(_database);\n\t\n\tvar _bowser = __webpack_require__(57);\n\t\n\tvar Browser = _interopRequireWildcard(_bowser);\n\t\n\tvar _utils = __webpack_require__(5);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar OneSignal = {\n\t  _VERSION: (\"1.8.1\"),\n\t  _API_URL: _vars.API_URL,\n\t  _app_id: null,\n\t  _tagsToSendOnRegister: null,\n\t  _notificationOpened_callback: null,\n\t  _idsAvailable_callback: [],\n\t  _defaultLaunchURL: null,\n\t  _initOptions: null,\n\t  _httpRegistration: false,\n\t  _main_page_port: null,\n\t  _isNotificationEnabledCallback: [],\n\t  _subscriptionSet: true,\n\t  _initOneSignalHttp: null,\n\t  _sessionIframeAdded: false,\n\t  _useHttpMode: null,\n\t  _windowWidth: 550,\n\t  _windowHeight: 480,\n\t  _isUninitiatedVisitor: false,\n\t  _isNewVisitor: false,\n\t  _isInitialized: false,\n\t  bell: null,\n\t  store: _limitStore2.default,\n\t  environment: _environment2.default,\n\t  event: _events2.default,\n\t  LOGGING: (true),\n\t  browser: Browser,\n\t  log: _loglevel2.default,\n\t  SERVICE_WORKER_UPDATER_PATH: \"OneSignalSDKUpdaterWorker.js\",\n\t  SERVICE_WORKER_PATH: \"OneSignalSDKWorker.js\",\n\t  SERVICE_WORKER_PARAM: {},\n\t\n\t  /* Event Definitions */\n\t  EVENTS: {\n\t    CUSTOM_PROMPT_CLICKED: 'onesignal.prompt.custom.clicked',\n\t    NATIVE_PROMPT_PERMISSIONCHANGED: 'onesignal.prompt.native.permissionchanged',\n\t    SUBSCRIPTION_CHANGED: 'onesignal.subscription.changed',\n\t    WELCOME_NOTIFICATION_SENT: 'onesignal.actions.welcomenotificationsent',\n\t    INTERNAL_SUBSCRIPTIONSET: 'onesignal.internal.subscriptionset',\n\t    SDK_INITIALIZED: 'onesignal.sdk.initialized'\n\t  },\n\t\n\t  _sendToOneSignalApi: function _sendToOneSignalApi(url, action, inData, callback, failedCallback) {\n\t    _loglevel2.default.debug('Calling ' + action + ' ' + (OneSignal._API_URL + url) + ' with data:', inData);\n\t    var contents = {\n\t      method: action\n\t    };\n\t\n\t    //mode: 'no-cors', // no-cors is disabled for non-serviceworker.\n\t    if (inData) {\n\t      contents.headers = { \"Content-type\": \"application/json;charset=UTF-8\" };\n\t      contents.body = JSON.stringify(inData);\n\t    }\n\t\n\t    fetch(OneSignal._API_URL + url, contents).then(function status(response) {\n\t      if (response.status >= 200 && response.status < 300) return Promise.resolve(response);else return Promise.reject(new Error(response.statusText));\n\t    }).then(function status(response) {\n\t      return response.json();\n\t    }).then(function (jsonData) {\n\t      if (callback != null) callback(jsonData);\n\t    }).catch(function (e) {\n\t      _loglevel2.default.error('OneSignal._sendToOneSignalApi() failed:', e);\n\t      if (failedCallback != null) failedCallback();\n\t    });\n\t  },\n\t\n\t  _getLanguage: function _getLanguage() {\n\t    return navigator.language ? navigator.language.length > 3 ? navigator.language.substring(0, 2) : navigator.language : 'en';\n\t  },\n\t\n\t  _getPlayerId: function _getPlayerId(value, callback) {\n\t    if (value) callback(value);else {\n\t      _database2.default.get('Ids', 'userId').then(function _getPlayerId_gotUserId(result) {\n\t        if (result) callback(result.id);else callback(null);\n\t      }).catch(function (e) {\n\t        _loglevel2.default.error(e);\n\t      });\n\t      ;\n\t    }\n\t  },\n\t\n\t  _registerWithOneSignal: function _registerWithOneSignal(appId, registrationId, deviceType) {\n\t\n\t    _database2.default.get('Ids', 'userId').then(function _registerWithOneSignal_GotUserId(userIdResult) {\n\t      OneSignal._getNotificationTypes(function (notif_types) {\n\t        var requestUrl = 'players';\n\t\n\t        var jsonData = {\n\t          app_id: appId,\n\t          device_type: deviceType,\n\t          language: OneSignal._getLanguage(),\n\t          timezone: new Date().getTimezoneOffset() * -60,\n\t          device_model: navigator.platform + \" \" + Browser.name,\n\t          device_os: Browser.version,\n\t          sdk: OneSignal._VERSION\n\t        };\n\t\n\t        if (userIdResult) {\n\t          requestUrl = 'players/' + userIdResult.id + '/on_session';\n\t          jsonData.notification_types = notif_types;\n\t        } else if (notif_types != 1) jsonData.notification_types = notif_types;\n\t\n\t        if (registrationId) {\n\t          jsonData.identifier = registrationId;\n\t          _database2.default.put(\"Ids\", { type: \"registrationId\", id: registrationId });\n\t        }\n\t\n\t        OneSignal._sendToOneSignalApi(requestUrl, 'POST', jsonData, function registeredCallback(responseJSON) {\n\t          sessionStorage.setItem(\"ONE_SIGNAL_SESSION\", true);\n\t\n\t          if (responseJSON.id) {\n\t            _database2.default.put(\"Ids\", { type: \"userId\", id: responseJSON.id });\n\t            OneSignal._sendUnsentTags();\n\t          }\n\t\n\t          OneSignal._getPlayerId(responseJSON.id, function (userId) {\n\t            if (OneSignal._idsAvailable_callback.length > 0) {\n\t              while (OneSignal._idsAvailable_callback.length > 0) {\n\t                var curr_callback = OneSignal._idsAvailable_callback.pop();\n\t                curr_callback({ userId: userId, registrationId: registrationId });\n\t              }\n\t            }\n\t\n\t            if (OneSignal._httpRegistration) {\n\t              // 12/16/2015 -- At this point, the user has just clicked Allow on the HTTP prompt!!\n\t              _loglevel2.default.debug(\"Sending player Id and registrationId back to host page\");\n\t              _loglevel2.default.debug(OneSignal._initOptions);\n\t              var creator = opener || parent;\n\t              OneSignal._safePostMessage(creator, {\n\t                idsAvailable: {\n\t                  userId: userId,\n\t                  registrationId: registrationId\n\t                },\n\t                from: _environment2.default.getEnv()\n\t              }, OneSignal._initOptions.origin, null);\n\t              OneSignal._safePostMessage(creator, {\n\t                httpNativePromptPermissionChanged: OneSignal._getNotificationPermission(),\n\t                from: _environment2.default.getEnv()\n\t              }, OneSignal._initOptions.origin, null);\n\t\n\t              if (opener) window.close();\n\t            }\n\t          });\n\t        });\n\t      });\n\t    }).catch(function (e) {\n\t      _loglevel2.default.error(e);\n\t    });\n\t    ;\n\t  },\n\t\n\t  _sendUnsentTags: function _sendUnsentTags() {\n\t    if (OneSignal._tagsToSendOnRegister) {\n\t      OneSignal.sendTags(OneSignal._tagsToSendOnRegister);\n\t      OneSignal._tagsToSendOnRegister = null;\n\t    }\n\t  },\n\t\n\t  setDefaultNotificationUrl: function setDefaultNotificationUrl(url) {\n\t    _database2.default.put(\"Options\", { key: \"defaultUrl\", value: url });\n\t  },\n\t\n\t  setDefaultIcon: function setDefaultIcon(icon) {\n\t    _database2.default.put(\"Options\", { key: \"defaultIcon\", value: icon });\n\t  },\n\t\n\t  setDefaultTitle: function setDefaultTitle(title) {\n\t    _database2.default.put(\"Options\", { key: \"defaultTitle\", value: title });\n\t  },\n\t\n\t  _visibilitychange: function _visibilitychange() {\n\t    if (document.visibilityState == \"visible\") {\n\t      document.removeEventListener(\"visibilitychange\", OneSignal._visibilitychange);\n\t      OneSignal._sessionInit({});\n\t    }\n\t  },\n\t\n\t  onCustomPromptClicked: function onCustomPromptClicked(event) {\n\t    OneSignal._checkTrigger_eventSubscriptionChanged();\n\t  },\n\t\n\t  onNativePromptChanged: function onNativePromptChanged(event) {\n\t    OneSignal._checkTrigger_eventSubscriptionChanged();\n\t  },\n\t\n\t  _onSubscriptionChanged: function _onSubscriptionChanged(event) {\n\t    if (OneSignal._isUninitiatedVisitor && event.detail === true) {\n\t      _database2.default.get('Ids', 'userId').then(function (result) {\n\t        var welcome_notification_opts = OneSignal._initOptions['welcomeNotification'];\n\t        var welcome_notification_disabled = welcome_notification_opts !== undefined && welcome_notification_opts['disable'] === true;\n\t        var title = welcome_notification_opts !== undefined && welcome_notification_opts['title'] !== undefined && welcome_notification_opts['title'] !== null ? welcome_notification_opts['title'] : '';\n\t        var message = welcome_notification_opts !== undefined && welcome_notification_opts['message'] !== undefined && welcome_notification_opts['message'] !== null && welcome_notification_opts['message'].length > 0 ? welcome_notification_opts['message'] : 'Thanks for subscribing!';\n\t        if (!welcome_notification_disabled) {\n\t          _loglevel2.default.debug('Because this user is a new site visitor, a welcome notification will be sent.');\n\t          (0, _api.sendNotification)(OneSignal._app_id, [result.id], { 'en': title }, { 'en': message });\n\t          _events2.default.trigger(OneSignal.EVENTS.WELCOME_NOTIFICATION_SENT, { title: title, message: message });\n\t          OneSignal._isUninitiatedVisitor = false;\n\t        }\n\t      }).catch(function (e) {\n\t        _loglevel2.default.error(e);\n\t      });\n\t    }\n\t    _limitStore2.default.put('subscription.value', event.detail);\n\t  },\n\t\n\t  _onDbValueRetrieved: function _onDbValueRetrieved(event) {\n\t    //debugger;\n\t    _loglevel2.default.warn('Event: %c' + JSON.stringify(event.bubbles), (0, _utils.getConsoleStyle)('alert'));\n\t  },\n\t\n\t  _onDbValueSet: function _onDbValueSet(event) {\n\t    var info = event.detail;\n\t    if (info.type === 'userId') {\n\t      _limitStore2.default.put('db.ids.userId', info.id);\n\t      OneSignal._checkTrigger_eventSubscriptionChanged();\n\t    }\n\t  },\n\t\n\t  _onInternalSubscriptionSet: function _onInternalSubscriptionSet(event) {\n\t    var newSubscriptionValue = event.detail;\n\t    _limitStore2.default.put('setsubscription.value', newSubscriptionValue);\n\t    OneSignal._checkTrigger_eventSubscriptionChanged();\n\t  },\n\t\n\t  _onSdkInitialized: function _onSdkInitialized() {\n\t    if (_environment2.default.isBrowser() && !OneSignal.bell) {\n\t      _loglevel2.default.info('Showing bell.');\n\t      OneSignal.bell = new _bell2.default({\n\t        size: 'large',\n\t        position: 'bottom-right',\n\t        theme: 'default'\n\t      });\n\t      OneSignal.bell.create();\n\t    }\n\t\n\t    OneSignal._isInitialized = true;\n\t    _loglevel2.default.trace('OneSignal SDK has been fully initialized.');\n\t  },\n\t\n\t  _onDatabaseRebuilt: function _onDatabaseRebuilt() {\n\t    OneSignal._isNewVisitor = true;\n\t  },\n\t\n\t  _checkTrigger_nativePermissionChanged: function _checkTrigger_nativePermissionChanged() {\n\t    var currentPermission = OneSignal._getNotificationPermission(OneSignal._initOptions.safari_web_id);\n\t    var lastPermission = _limitStore2.default.getLast('notification.permission');\n\t    if (lastPermission !== currentPermission) {\n\t      OneSignal._triggerEvent_nativePromptPermissionChanged(lastPermission, currentPermission);\n\t    }\n\t  },\n\t\n\t  _checkTrigger_eventSubscriptionChanged: function _checkTrigger_eventSubscriptionChanged() {\n\t    _loglevel2.default.debug('Called %c_checkTrigger_eventSubscriptionChanged()', (0, _utils.getConsoleStyle)('code'));\n\t    var permissions = _limitStore2.default.get('notification.permission');\n\t    var lastPermission = permissions[permissions.length - 2];\n\t    var currentPermission = permissions[permissions.length - 1];\n\t    _loglevel2.default.debug('%c_checkTrigger_eventSubscriptionChanged():', (0, _utils.getConsoleStyle)('code'), 'Permissions:', { lastPermission: lastPermission, currentPermission: currentPermission });\n\t\n\t    var ids = _limitStore2.default.get('db.ids.userId');\n\t    var lastId = ids[ids.length - 2];\n\t    var currentId = ids[ids.length - 1];\n\t    _loglevel2.default.debug('%c_checkTrigger_eventSubscriptionChanged():', (0, _utils.getConsoleStyle)('code'), 'Ids:', { lastId: lastId, currentId: currentId });\n\t\n\t    var subscriptionStates = _limitStore2.default.get('setsubscription.value');\n\t    var lastSubscriptionState = subscriptionStates[subscriptionStates.length - 2];\n\t    var currentSubscriptionState = subscriptionStates[subscriptionStates.length - 1];\n\t    _loglevel2.default.debug('%c_checkTrigger_eventSubscriptionChanged():', (0, _utils.getConsoleStyle)('code'), 'Subscriptions:', { lastSubscriptionState: lastSubscriptionState, currentSubscriptionState: currentSubscriptionState });\n\t\n\t    var newSubscriptionState = 'unchanged';\n\t\n\t    if ((lastPermission === 'default' || lastPermission === 'denied' || lastPermission === null) && currentPermission === 'granted' && currentId !== null && currentSubscriptionState === true || lastSubscriptionState === false && currentSubscriptionState === true && currentId != null && currentPermission === 'granted') {\n\t      newSubscriptionState = true;\n\t    }\n\t\n\t    if (lastPermission !== 'denied' && currentPermission === 'denied' || lastPermission === 'granted' && currentPermission !== 'granted' || lastId !== null && currentId === null || lastSubscriptionState !== false && currentSubscriptionState === false) {\n\t      newSubscriptionState = false;\n\t    }\n\t\n\t    if (newSubscriptionState !== \"unchanged\") {\n\t      var lastTriggerTimes = _limitStore2.default.put('event.subscriptionchanged.lastriggered', Date.now());\n\t      var currentTime = lastTriggerTimes[lastTriggerTimes.length - 1];\n\t      var lastTriggerTime = lastTriggerTimes[lastTriggerTimes.length - 2];\n\t      var elapsedTimeSeconds = (currentTime - lastTriggerTime) / 1000;\n\t\n\t      var lastEventStates = _limitStore2.default.put('event.subscriptionchanged.laststates', newSubscriptionState);\n\t      var currentState = lastEventStates[lastEventStates.length - 1];\n\t      var lastState = lastEventStates[lastEventStates.length - 2];\n\t\n\t      // If event already triggered within the last second, don't re-trigger.\n\t      var shouldNotTriggerEvent = lastTriggerTime != null && elapsedTimeSeconds <= 1 || currentState === lastState;\n\t      if (shouldNotTriggerEvent === false) {\n\t        OneSignal._triggerEvent_subscriptionChanged(newSubscriptionState);\n\t      }\n\t    }\n\t  },\n\t\n\t  isPushNotificationsSupported: function isPushNotificationsSupported() {\n\t    return (0, _utils.isPushNotificationsSupported)();\n\t  },\n\t\n\t  _installNativePromptPermissionChangedHook: function _installNativePromptPermissionChangedHook() {\n\t    if (navigator.permissions && !((0, _utils.isBrowserFirefox)() && (0, _utils.getFirefoxVersion)() <= 45)) {\n\t      OneSignal._usingNativePermissionHook = true;\n\t      // If the browser natively supports hooking the subscription prompt permission change event\n\t      //     use it instead of our SDK method\n\t      navigator.permissions.query({ name: 'notifications' }).then(function (permissionStatus) {\n\t        permissionStatus.onchange = function () {\n\t          var permissionBeforePrompt = _limitStore2.default.getFirst('notification.permission');\n\t          OneSignal._triggerEvent_nativePromptPermissionChanged(permissionBeforePrompt);\n\t\n\t          // If we are not the main page, send this event back to main page\n\t          if (!_environment2.default.isHost()) {\n\t            var creator = opener || parent;\n\t            OneSignal._safePostMessage(creator, {\n\t              httpNativePromptPermissionChanged: OneSignal._getNotificationPermission(),\n\t              from: _environment2.default.getEnv()\n\t            }, OneSignal._initOptions.origin, null);\n\t          }\n\t        };\n\t      }).catch(function (e) {\n\t        _loglevel2.default.error(e);\n\t      });\n\t    }\n\t  },\n\t\n\t  init: function init(options) {\n\t    if (_environment2.default.isBrowser() && window.localStorage[\"onesignal.debugger.init\"]) {\n\t      debugger;\n\t    }\n\t\n\t    _loglevel2.default.debug('Called %cinit(' + JSON.stringify(options, null, 4) + ')', (0, _utils.getConsoleStyle)('code'));\n\t\n\t    if (OneSignal._isInitialized) {\n\t      _loglevel2.default.warn('OneSignal.init() was called again, but the SDK is already initialized. Skipping initialization.');\n\t      return;\n\t    }\n\t    OneSignal._initOptions = options;\n\t    OneSignal._app_id = OneSignal._initOptions.appId;\n\t\n\t    if (!(0, _utils.isPushNotificationsSupported)()) {\n\t      _loglevel2.default.warn(\"Your browser does not support push notifications.\");\n\t      return;\n\t    }\n\t\n\t    var currentNotificationPermission = OneSignal._getNotificationPermission(OneSignal._initOptions.safari_web_id);\n\t    _limitStore2.default.put('notification.permission', currentNotificationPermission);\n\t\n\t    OneSignal._installNativePromptPermissionChangedHook();\n\t\n\t    // Store the current value of Ids:registrationId, so that we can see if the value changes in the future\n\t    _database2.default.get('Ids', 'userId').then(function (result) {\n\t      if (result === undefined) {\n\t        OneSignal._isUninitiatedVisitor = true;\n\t      }\n\t      var storeValue = result ? result.id : null;\n\t      _limitStore2.default.put('db.ids.userId', storeValue);\n\t    });\n\t\n\t    // Store the current value of subscription, so that we can see if the value changes in the future\n\t    //OneSignal._getSubscription.then((currentSubscription) => {\n\t    //  LimitStore.put('setsubscription.value', currentSubscription);\n\t    //});\n\t\n\t    window.addEventListener(OneSignal.EVENTS.CUSTOM_PROMPT_CLICKED, OneSignal.onCustomPromptClicked);\n\t    window.addEventListener(OneSignal.EVENTS.NATIVE_PROMPT_PERMISSIONCHANGED, OneSignal.onNativePromptChanged);\n\t    window.addEventListener(OneSignal.EVENTS.SUBSCRIPTION_CHANGED, OneSignal._onSubscriptionChanged);\n\t    window.addEventListener(_database2.default.EVENTS.RETRIEVED, OneSignal._onDbValueRetrieved);\n\t    window.addEventListener(_database2.default.EVENTS.SET, OneSignal._onDbValueSet);\n\t    window.addEventListener(OneSignal.EVENTS.INTERNAL_SUBSCRIPTIONSET, OneSignal._onInternalSubscriptionSet);\n\t    window.addEventListener(OneSignal.EVENTS.SDK_INITIALIZED, OneSignal._onSdkInitialized);\n\t    window.addEventListener(_database2.default.EVENTS.REBUILT, OneSignal.onDatabaseRebuilt);\n\t\n\t    OneSignal._useHttpMode = !(0, _utils.isSupportedSafari)() && (!OneSignal._supportsDirectPermission() || OneSignal._initOptions.subdomainName);\n\t\n\t    if (OneSignal._useHttpMode) OneSignal._initOneSignalHttp = 'https://' + OneSignal._initOptions.subdomainName + '.onesignal.com/sdks/initOneSignalHttp';else OneSignal._initOneSignalHttp = 'https://onesignal.com/sdks/initOneSignalHttps';\n\t\n\t    if (true) OneSignal._initOneSignalHttp = _vars.DEV_HOST + '/dev_sdks/initOneSignalHttp';\n\t\n\t    // If Safari - add 'fetch' pollyfill if it isn't already added.\n\t    if ((0, _utils.isSupportedSafari)() && typeof window.fetch == \"undefined\") {\n\t      var s = document.createElement('script');\n\t      s.setAttribute('src', \"https://cdnjs.cloudflare.com/ajax/libs/fetch/0.9.0/fetch.js\");\n\t      document.head.appendChild(s);\n\t    }\n\t\n\t    if (document.readyState === \"complete\") OneSignal._internalInit();else window.addEventListener('load', OneSignal._internalInit);\n\t  },\n\t\n\t  _internalInit: function _internalInit() {\n\t    window.Database = _database2.default;\n\t    _loglevel2.default.debug('Called %c_internalInit()', (0, _utils.getConsoleStyle)('code'));\n\t    Promise.all([_database2.default.get('Ids', 'appId'), _database2.default.get('Ids', 'registrationId'), _database2.default.get('Options', 'subscription')]).then(function _internalInit_GotAppRegistrationSubscriptionIds(result) {\n\t      var appIdResult = result[0];\n\t      var registrationIdResult = result[1];\n\t      var subscriptionResult = result[2];\n\t\n\t      // If AppId changed delete playerId and continue.\n\t      if (appIdResult && appIdResult.id != OneSignal._initOptions.appId) {\n\t        _database2.default.remove(\"Ids\", \"userId\");\n\t        sessionStorage.removeItem(\"ONE_SIGNAL_SESSION\");\n\t      }\n\t\n\t      // HTTPS - Only register for push notifications once per session or if the user changes notification permission to Ask or Allow.\n\t      if (sessionStorage.getItem(\"ONE_SIGNAL_SESSION\") && !OneSignal._initOptions.subdomainName && (Notification.permission == \"denied\" || sessionStorage.getItem(\"ONE_SIGNAL_NOTIFICATION_PERMISSION\") == Notification.permission)) {\n\t        _events2.default.trigger(OneSignal.EVENTS.SDK_INITIALIZED);\n\t        return;\n\t      }\n\t\n\t      sessionStorage.setItem(\"ONE_SIGNAL_NOTIFICATION_PERMISSION\", Notification.permission);\n\t\n\t      if (OneSignal._initOptions.autoRegister == false && !registrationIdResult && !OneSignal._initOptions.subdomainName) {\n\t        _events2.default.trigger(OneSignal.EVENTS.SDK_INITIALIZED);\n\t        return;\n\t      }\n\t\n\t      if (document.visibilityState != \"visible\") {\n\t        document.addEventListener(\"visibilitychange\", OneSignal._visibilitychange);\n\t        return;\n\t      }\n\t\n\t      OneSignal._sessionInit({});\n\t    }).catch(function (e) {\n\t      _loglevel2.default.error(e);\n\t    });\n\t  },\n\t\n\t  registerForPushNotifications: function registerForPushNotifications(options) {\n\t    if (!(0, _utils.isPushNotificationsSupported)()) {\n\t      _loglevel2.default.warn(\"Your browser does not support push notifications.\");\n\t      return;\n\t    }\n\t    // WARNING: Do NOT add callbacks that have to fire to get from here to window.open in _sessionInit.\n\t    //          Otherwise the pop-up to ask for push permission on HTTP connections will be blocked by Chrome.\n\t    if (!options) options = {};\n\t    options.fromRegisterFor = true;\n\t    OneSignal._sessionInit(options);\n\t  },\n\t\n\t  // Http only - Only called from iframe's init.js\n\t  _initHttp: function _initHttp(options) {\n\t    _loglevel2.default.debug('Called %c _initHttp', (0, _utils.getConsoleStyle)('code'));\n\t    OneSignal._initOptions = options;\n\t\n\t    OneSignal._installNativePromptPermissionChangedHook();\n\t    if (options.continuePressed) {\n\t      OneSignal.setSubscription(true);\n\t    }\n\t\n\t    var isIframe = parent != null && parent != window;\n\t    var creator = opener || parent;\n\t\n\t    if (!creator) {\n\t      _loglevel2.default.error('_initHttp (from <iframe>):', 'No opener or parent found!');\n\t      return;\n\t    }\n\t    // Setting up message channel to receive message from host page.\n\t    var messageChannel = new MessageChannel();\n\t    messageChannel.port1.onmessage = function (event) {\n\t      _loglevel2.default.debug('%c' + _environment2.default.getEnv().capitalize() + ' ⬸ ' + event.data.from.capitalize() + ':', (0, _utils.getConsoleStyle)('postmessage'), event.data);\n\t\n\t      if (event.data.initOptions) {\n\t        OneSignal.setDefaultNotificationUrl(event.data.initOptions.defaultUrl);\n\t        OneSignal.setDefaultTitle(event.data.initOptions.defaultTitle);\n\t        if (event.data.initOptions.defaultIcon) OneSignal.setDefaultIcon(event.data.initOptions.defaultIcon);\n\t\n\t        _database2.default.get(\"NotificationOpened\", event.data.initOptions.parent_url).then(function registerForPushNotifications_GotNotificationOpened(notificationOpenedResult) {\n\t          if (notificationOpenedResult) {\n\t            _database2.default.remove(\"NotificationOpened\", event.data.initOptions.parent_url);\n\t            _loglevel2.default.debug(\"OneSignal._safePostMessage:targetOrigin:\", OneSignal._initOptions.origin);\n\t\n\t            OneSignal._safePostMessage(creator, { openedNotification: notificationOpenedResult.data, from: _environment2.default.getEnv() }, OneSignal._initOptions.origin, null);\n\t          }\n\t        }).catch(function (e) {\n\t          _loglevel2.default.error(e);\n\t        });\n\t        ;\n\t      } else if (event.data.getNotificationPermission) {\n\t        //log.info('%cIn the <iframe>: getNotificationPermission message was received.', getConsoleStyle('alert'));\n\t        OneSignal._getSubdomainState(function (curState) {\n\t          OneSignal._safePostMessage(creator, { currentNotificationPermission: curState, from: _environment2.default.getEnv() }, OneSignal._initOptions.origin, null);\n\t        });\n\t      } else if (event.data.setSubdomainState) OneSignal.setSubscription(event.data.setSubdomainState.setSubscription);\n\t    };\n\t\n\t    OneSignal._getSubdomainState(function (curState) {\n\t      curState[\"isIframe\"] = isIframe;\n\t      OneSignal._safePostMessage(creator, { oneSignalInitPageReady: curState, from: _environment2.default.getEnv() }, OneSignal._initOptions.origin, [messageChannel.port2]);\n\t    });\n\t\n\t    OneSignal._initSaveState();\n\t    OneSignal._httpRegistration = true;\n\t    if (location.search.indexOf(\"?session=true\") == 0) return;\n\t\n\t    OneSignal._getPlayerId(null, function (player_id) {\n\t      if (!isIframe || player_id) {\n\t        navigator.serviceWorker.register(OneSignal.SERVICE_WORKER_PATH, OneSignal.SERVICE_WORKER_PARAM).then(OneSignal._enableNotifications, OneSignal._registerError);\n\t      }\n\t    });\n\t  },\n\t\n\t  _getSubdomainState: function _getSubdomainState(callback) {\n\t    var state = {};\n\t\n\t    Promise.all([_database2.default.get('Ids', 'userId'), _database2.default.get('Ids', 'registrationId'), _database2.default.get('Options', 'subscription')]).then(function _internalInit_GotAppRegistrationSubscriptionIds(result) {\n\t      var userIdResult = result[0];\n\t      var registrationIdResult = result[1];\n\t      var subscriptionResult = result[2];\n\t\n\t      callback({\n\t        userId: userIdResult ? userIdResult.id : null,\n\t        registrationId: registrationIdResult ? registrationIdResult.id : null,\n\t        notifPermssion: Notification.permission,\n\t        subscriptionSet: subscriptionResult ? subscriptionResult.value : null,\n\t        isPushEnabled: Notification.permission == \"granted\" && userIdResult && registrationIdResult && (subscriptionResult && subscriptionResult.value || subscriptionResult == null)\n\t      });\n\t    }).catch(function (e) {\n\t      _loglevel2.default.error(e);\n\t    });\n\t    ;\n\t  },\n\t\n\t  _initSaveState: function _initSaveState() {\n\t    OneSignal._app_id = OneSignal._initOptions.appId;\n\t    _database2.default.put(\"Ids\", { type: \"appId\", id: OneSignal._app_id });\n\t    _database2.default.put(\"Options\", { key: \"pageTitle\", value: document.title });\n\t  },\n\t\n\t  _supportsDirectPermission: function _supportsDirectPermission() {\n\t    return (0, _utils.isSupportedSafari)() || location.protocol == 'https:' || location.host.indexOf(\"localhost\") == 0 || location.host.indexOf(\"127.0.0.1\") == 0;\n\t  },\n\t\n\t  _sessionInit: function _sessionInit(options) {\n\t    _loglevel2.default.debug('Called %c_sessionInit(' + JSON.stringify(options) + ')', (0, _utils.getConsoleStyle)('code'));\n\t    OneSignal._initSaveState();\n\t\n\t    var hostPageProtocol = location.origin.match(/^http(s|):\\/\\/(www\\.|)/)[0];\n\t\n\t    // If HTTP or using subdomain mode\n\t    if (OneSignal._useHttpMode) {\n\t      if (options.fromRegisterFor) {\n\t        var dualScreenLeft = window.screenLeft != undefined ? window.screenLeft : screen.left;\n\t        var dualScreenTop = window.screenTop != undefined ? window.screenTop : screen.top;\n\t\n\t        var thisWidth = window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : screen.width;\n\t        var thisHeight = window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : screen.height;\n\t        var childWidth = OneSignal._windowWidth;\n\t        var childHeight = OneSignal._windowHeight;\n\t\n\t        var left = thisWidth / 2 - childWidth / 2 + dualScreenLeft;\n\t        var top = thisHeight / 2 - childHeight / 2 + dualScreenTop;\n\t\n\t        _loglevel2.default.debug('Opening popup window.');\n\t        var message_localization_opts = OneSignal._initOptions['promptOptions'];\n\t        var message_localization_opts_str = '';\n\t        if (message_localization_opts) {\n\t          var message_localization_params = ['actionMessage', 'exampleNotificationTitleDesktop', 'exampleNotificationMessageDesktop', 'exampleNotificationTitleMobile', 'exampleNotificationMessageMobile', 'exampleNotificationCaption', 'acceptButtonText', 'cancelButtonText'];\n\t          for (var i = 0; i < message_localization_params.length; i++) {\n\t            var key = message_localization_params[i];\n\t            var value = message_localization_opts[key];\n\t            var encoded_value = encodeURIComponent(value);\n\t            if (value || value === '') {\n\t              message_localization_opts_str += '&' + key + '=' + encoded_value;\n\t            }\n\t          }\n\t        }\n\t        var childWindow = window.open(OneSignal._initOneSignalHttp + \"?\" + message_localization_opts_str + \"&hostPageProtocol=\" + hostPageProtocol, \"_blank\", 'scrollbars=yes, width=' + childWidth + ', height=' + childHeight + ', top=' + top + ', left=' + left);\n\t\n\t        if (childWindow) childWindow.focus();\n\t      } else {\n\t        OneSignal._addSessionIframe(hostPageProtocol);\n\t      }\n\t    } else {\n\t      if ((0, _utils.isSupportedSafari)()) {\n\t        if (OneSignal._initOptions.safari_web_id) {\n\t          var notificationPermissionBeforeRequest = OneSignal._getNotificationPermission(OneSignal._initOptions.safari_web_id);\n\t          window.safari.pushNotification.requestPermission(OneSignal._API_URL + 'safari', OneSignal._initOptions.safari_web_id, { app_id: OneSignal._app_id }, function (data) {\n\t            _loglevel2.default.info('Safari requestPermission() callback:', data);\n\t            var notificationPermissionAfterRequest = OneSignal._getNotificationPermission(OneSignal._initOptions.safari_web_id);\n\t            if (data.deviceToken) {\n\t              OneSignal._registerWithOneSignal(OneSignal._app_id, data.deviceToken.toLowerCase(), 7);\n\t            } else {\n\t              sessionStorage.setItem(\"ONE_SIGNAL_SESSION\", true);\n\t            }\n\t            OneSignal._triggerEvent_nativePromptPermissionChanged(notificationPermissionBeforeRequest);\n\t          });\n\t        }\n\t      } else if (options.modalPrompt && options.fromRegisterFor) {\n\t        // If HTTPS - Show modal\n\t        if (!(0, _utils.isPushNotificationsSupported)()) {\n\t          _loglevel2.default.warn('An attempt was made to open the HTTPS modal permission prompt, but push notifications are not supported on this browser. Opening canceled.');\n\t          return;\n\t        }\n\t        OneSignal.isPushNotificationsEnabled(function (pushEnabled) {\n\t          var element = document.createElement('div');\n\t          element.setAttribute('id', 'OneSignal-iframe-modal');\n\t          element.innerHTML = '<div id=\"notif-permission\" style=\"background: rgba(0, 0, 0, 0.7); position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 9000; display: block\"></div>';\n\t          document.body.appendChild(element);\n\t\n\t          var iframeStyle = document.createElement('style');\n\t          iframeStyle.innerHTML = \"@media (max-width: 560px) { .OneSignal-permission-iframe { width: 100%; height: 100%;} }\" + \"@media (min-width: 561px) { .OneSignal-permission-iframe { top: 50%; left: 50%; margin-left: -275px; margin-top: -248px;} }\";\n\t          document.getElementsByTagName('head')[0].appendChild(iframeStyle);\n\t\n\t          var iframeNode = document.createElement(\"iframe\");\n\t          iframeNode.className = \"OneSignal-permission-iframe\";\n\t          iframeNode.style.cssText = \"background: rgba(255, 255, 255, 1); position: fixed;\";\n\t          iframeNode.src = OneSignal._initOneSignalHttp + '?id=' + OneSignal._app_id + '&httpsPrompt=true' + '&pushEnabled=' + pushEnabled + '&permissionBlocked=' + (typeof Notification === \"undefined\" || Notification.permission == \"denied\") + '&hostPageProtocol=' + hostPageProtocol;\n\t          iframeNode.setAttribute('frameborder', '0');\n\t          iframeNode.width = OneSignal._windowWidth.toString();\n\t          iframeNode.height = OneSignal._windowHeight.toString();\n\t\n\t          _loglevel2.default.debug('Opening HTTPS modal prompt.');\n\t          document.getElementById(\"notif-permission\").appendChild(iframeNode);\n\t        });\n\t      } else if ('serviceWorker' in navigator) // If HTTPS - Show native prompt\n\t        OneSignal._registerForW3CPush(options);else _loglevel2.default.debug('Service workers are not supported in this browser.');\n\t\n\t      _events2.default.trigger(OneSignal.EVENTS.SDK_INITIALIZED);\n\t    }\n\t  },\n\t\n\t  _registerForW3CPush: function _registerForW3CPush(options) {\n\t\n\t    _database2.default.get('Ids', 'registrationId').then(function _registerForW3CPush_GotRegistrationId(registrationIdResult) {\n\t      if (!registrationIdResult || !options.fromRegisterFor || Notification.permission != \"granted\") {\n\t        navigator.serviceWorker.getRegistration().then(function (serviceWorkerRegistration) {\n\t          var sw_path = \"\";\n\t\n\t          if (OneSignal._initOptions.path) sw_path = OneSignal._initOptions.path;\n\t\n\t          if (typeof serviceWorkerRegistration === \"undefined\") // Nothing registered, very first run\n\t            OneSignal._registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_PATH);else {\n\t            if (serviceWorkerRegistration.active) {\n\t              if (serviceWorkerRegistration.active.scriptURL.indexOf(sw_path + OneSignal.SERVICE_WORKER_PATH) > -1) {\n\t\n\t                _database2.default.get('Ids', 'WORKER1_ONE_SIGNAL_SW_VERSION').then(function (versionResult) {\n\t                  if (versionResult) {\n\t                    if (versionResult.id != OneSignal._VERSION) OneSignal._registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_UPDATER_PATH);else OneSignal._registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_PATH);\n\t                  } else OneSignal._registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_PATH);\n\t                }).catch(function (e) {\n\t                  _loglevel2.default.error(e);\n\t                });\n\t              } else if (serviceWorkerRegistration.active.scriptURL.indexOf(sw_path + OneSignal.SERVICE_WORKER_UPDATER_PATH) > -1) {\n\t\n\t                _database2.default.get('Ids', 'WORKER2_ONE_SIGNAL_SW_VERSION').then(function (versionResult) {\n\t                  if (versionResult) {\n\t                    if (versionResult.id != OneSignal._VERSION) OneSignal._registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_PATH);else OneSignal._registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_UPDATER_PATH);\n\t                  } else OneSignal._registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_UPDATER_PATH);\n\t                }).catch(function (e) {\n\t                  _loglevel2.default.error(e);\n\t                });\n\t              }\n\t            } else if (serviceWorkerRegistration.installing == null) OneSignal._registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_PATH);\n\t          }\n\t        }).catch(function (e) {\n\t          _loglevel2.default.error(e);\n\t        });\n\t      }\n\t    }).catch(function (e) {\n\t      _loglevel2.default.error(e);\n\t    });\n\t    ;\n\t  },\n\t\n\t  _registerServiceWorker: function _registerServiceWorker(full_sw_and_path) {\n\t    navigator.serviceWorker.register(full_sw_and_path, OneSignal.SERVICE_WORKER_PARAM).then(OneSignal._enableNotifications, OneSignal._registerError);\n\t  },\n\t\n\t  _addSessionIframe: function _addSessionIframe(hostPageProtocol) {\n\t    _loglevel2.default.debug('Called %c_addSessionIframe(' + JSON.stringify(hostPageProtocol, null, 4) + ')', (0, _utils.getConsoleStyle)('code'));\n\t\n\t    var node = document.createElement(\"iframe\");\n\t    node.style.display = \"none\";\n\t    node.src = OneSignal._initOneSignalHttp + \"Iframe\";\n\t    if (sessionStorage.getItem(\"ONE_SIGNAL_SESSION\")) node.src += \"?session=true\" + \"&hostPageProtocol=\" + hostPageProtocol;else node.src += \"?hostPageProtocol=\" + hostPageProtocol;\n\t    document.body.appendChild(node);\n\t\n\t    OneSignal._sessionIframeAdded = true;\n\t  },\n\t\n\t  _registerError: function _registerError(err) {\n\t    _loglevel2.default.error(\"ServiceWorker registration\", err);\n\t  },\n\t\n\t  _enableNotifications: function _enableNotifications(existingServiceWorkerRegistration) {\n\t    // is ServiceWorkerRegistration type\n\t    if (existingServiceWorkerRegistration) _loglevel2.default.debug('An older ServiceWorker exists:', existingServiceWorkerRegistration);\n\t    if (!('PushManager' in window)) {\n\t      _loglevel2.default.error(\"Push messaging is not supported. No PushManager.\");\n\t      sessionStorage.setItem(\"ONE_SIGNAL_SESSION\", true);\n\t      return;\n\t    }\n\t\n\t    if (!('showNotification' in ServiceWorkerRegistration.prototype)) {\n\t      _loglevel2.default.error(\"Notifications are not supported. showNotification not available in ServiceWorkerRegistration.\");\n\t      sessionStorage.setItem(\"ONE_SIGNAL_SESSION\", true);\n\t      return;\n\t    }\n\t\n\t    if (Notification.permission === 'denied') {\n\t      _loglevel2.default.warn(\"The user has disabled notifications.\");\n\t      return;\n\t    }\n\t\n\t    navigator.serviceWorker.ready.then(function (serviceWorkerRegistration) {\n\t      _loglevel2.default.info('Service worker now active:', serviceWorkerRegistration);\n\t\n\t      OneSignal._subscribeForPush(serviceWorkerRegistration);\n\t    }).catch(function (e) {\n\t      _loglevel2.default.error(e);\n\t    });\n\t    ;\n\t  },\n\t\n\t  /*\n\t   Returns the current browser-agnostic notification permission as \"default\", \"granted\", \"denied\".\n\t   safariWebId: Used only to get the current notification permission state in Safari (required as part of the spec).\n\t   */\n\t  _getNotificationPermission: function _getNotificationPermission(safariWebId) {\n\t    if (window.safari) {\n\t      // The user is on Safari\n\t      // A web ID is required to determine the current notificiation permission\n\t      if (safariWebId) {\n\t        return window.safari.pushNotification.permission(safariWebId).permission;\n\t      } else {\n\t        // The user didn't set up Safari web push properly; notifications are unlikely to be enabled\n\t        return \"default\";\n\t      }\n\t    } else {\n\t      // Identical API on Firefox and Chrome\n\t      return Notification.permission;\n\t    }\n\t  },\n\t\n\t  _triggerEvent_customPromptClicked: function _triggerEvent_customPromptClicked(clickResult) {\n\t    var recentPermissions = _limitStore2.default.put('prompt.custom.permission', clickResult);\n\t    _events2.default.trigger(OneSignal.EVENTS.CUSTOM_PROMPT_CLICKED, {\n\t      result: clickResult\n\t    });\n\t  },\n\t\n\t  _triggerEvent_nativePromptPermissionChanged: function _triggerEvent_nativePromptPermissionChanged(from, to) {\n\t    var updateIfIdentical = arguments.length <= 2 || arguments[2] === undefined ? false : arguments[2];\n\t\n\t    if (to === undefined) {\n\t      to = OneSignal._getNotificationPermission(OneSignal._initOptions.safari_web_id);\n\t    }\n\t    if (from !== to || updateIfIdentical) {\n\t      var recentPermissions = _limitStore2.default.put('notification.permission', to);\n\t      _events2.default.trigger(OneSignal.EVENTS.NATIVE_PROMPT_PERMISSIONCHANGED, {\n\t        from: from,\n\t        to: to\n\t      });\n\t    }\n\t  },\n\t\n\t  _triggerEvent_subscriptionChanged: function _triggerEvent_subscriptionChanged(to) {\n\t    _events2.default.trigger(OneSignal.EVENTS.SUBSCRIPTION_CHANGED, to);\n\t  },\n\t\n\t  _triggerEvent_dbValueRetrieved: function _triggerEvent_dbValueRetrieved(value) {\n\t    _events2.default.trigger(_database2.default.EVENTS.RETRIEVED, value);\n\t  },\n\t\n\t  _triggerEvent_dbValueSet: function _triggerEvent_dbValueSet(value) {\n\t    _events2.default.trigger(_database2.default.EVENTS.SET, value);\n\t  },\n\t\n\t  _triggerEvent_internalSubscriptionSet: function _triggerEvent_internalSubscriptionSet(value) {\n\t    _events2.default.trigger(OneSignal.EVENTS.INTERNAL_SUBSCRIPTIONSET, value);\n\t  },\n\t\n\t  _subscribeForPush: function _subscribeForPush(serviceWorkerRegistration) {\n\t    var notificationPermissionBeforeRequest = OneSignal._getNotificationPermission(OneSignal._initOptions.safari_web_id);\n\t    serviceWorkerRegistration.pushManager.subscribe({ userVisibleOnly: true }).then(function (subscription) {\n\t      sessionStorage.setItem(\"ONE_SIGNAL_NOTIFICATION_PERMISSION\", Notification.permission);\n\t\n\t      _database2.default.get('Ids', 'appId').then(function _subscribeForPush_GotAppId(appIdResult) {\n\t        var appId = appIdResult.id;\n\t        _loglevel2.default.debug(\"Called OneSignal._subscribeForPush() -> serviceWorkerRegistration.pushManager.subscribe().\");\n\t\n\t        var registrationId = null;\n\t        if (subscription) {\n\t          if (typeof subscription.subscriptionId != \"undefined\") // Chrome 43 & 42\n\t            registrationId = subscription.subscriptionId;else // Chrome 44+ and FireFox\n\t            registrationId = subscription.endpoint.replace(new RegExp(\"^(https://android.googleapis.com/gcm/send/|https://updates.push.services.mozilla.com/push/)\"), \"\");\n\t        } else _loglevel2.default.warn('Could not subscribe your browser for push notifications.');\n\t\n\t        OneSignal._registerWithOneSignal(appId, registrationId, (0, _utils.isSupportedFireFox)() ? 8 : 5);\n\t\n\t        if (!OneSignal._usingNativePermissionHook) {\n\t          OneSignal._triggerEvent_nativePromptPermissionChanged(notificationPermissionBeforeRequest);\n\t        }\n\t      }).catch(function (e) {\n\t        _loglevel2.default.error(e);\n\t      });\n\t    }).catch(function (e) {\n\t      _loglevel2.default.error('Error while subscribing for push:', e);\n\t\n\t      // New addition (12/22/2015), adding support for detecting the cancel 'X'\n\t      // Chrome doesn't show when the user clicked 'X' for cancel\n\t      // We get the same error as if the user had clicked denied, but we can check Notification.permission to see if it is still 'default'\n\t      if (OneSignal._getNotificationPermission() === 'default') {\n\t        // The user clicked 'X'\n\t        OneSignal._triggerEvent_nativePromptPermissionChanged(notificationPermissionBeforeRequest, undefined, true);\n\t      }\n\t\n\t      if (!OneSignal._usingNativePermissionHook) OneSignal._triggerEvent_nativePromptPermissionChanged(notificationPermissionBeforeRequest);\n\t\n\t      if (e.code == 20 && opener && OneSignal._httpRegistration) window.close();\n\t    });\n\t  },\n\t\n\t  sendTag: function sendTag(key, value) {\n\t    var jsonKeyValue = {};\n\t    jsonKeyValue[key] = value;\n\t    OneSignal.sendTags(jsonKeyValue);\n\t  },\n\t\n\t  sendTags: function sendTags(jsonPair) {\n\t    _database2.default.get('Ids', 'userId').then(function sendTags_GotUserId(userIdResult) {\n\t      if (userIdResult) OneSignal._sendToOneSignalApi(\"players/\" + userIdResult.id, \"PUT\", {\n\t        app_id: OneSignal._app_id,\n\t        tags: jsonPair\n\t      });else {\n\t        if (OneSignal._tagsToSendOnRegister == null) OneSignal._tagsToSendOnRegister = jsonPair;else {\n\t          var resultObj = {};\n\t          for (var _obj in OneSignal._tagsToSendOnRegister) {\n\t            resultObj[_obj] = OneSignal._tagsToSendOnRegister[_obj];\n\t          }for (var _obj in jsonPair) {\n\t            resultObj[_obj] = jsonPair[_obj];\n\t          }OneSignal._tagsToSendOnRegister = resultObj;\n\t        }\n\t      }\n\t    }).catch(function (e) {\n\t      _loglevel2.default.error('sendTags:', e);\n\t    });\n\t  },\n\t\n\t  deleteTag: function deleteTag(key) {\n\t    OneSignal.deleteTags([key]);\n\t  },\n\t\n\t  deleteTags: function deleteTags(keyArray) {\n\t    var jsonPair = {};\n\t    var length = keyArray.length;\n\t    for (var i = 0; i < length; i++) {\n\t      jsonPair[keyArray[i]] = \"\";\n\t    }OneSignal.sendTags(jsonPair);\n\t  },\n\t\n\t  _handleNotificationOpened: function _handleNotificationOpened(event) {\n\t    var notificationData = JSON.parse(event.notification.tag);\n\t    event.notification.close();\n\t\n\t    Promise.all([_database2.default.get('Ids', 'appId'), _database2.default.get('Ids', 'userId')]).then(function _handleNotificationOpened_GotAppUserIds(results) {\n\t      var appIdResult = results[0];\n\t      var userIdResult = results[1];\n\t      if (appIdResult && userIdResult) {\n\t        OneSignal._sendToOneSignalApi(\"notifications/\" + notificationData.id, \"PUT\", {\n\t          app_id: appIdResult.id,\n\t          player_id: userIdResult.id,\n\t          opened: true\n\t        });\n\t      }\n\t    }).catch(function (e) {\n\t      _loglevel2.default.error(e);\n\t    });\n\t    ;\n\t\n\t    event.waitUntil(clients.matchAll({ type: \"window\" }).then(function (clientList) {\n\t      var launchURL = registration.scope;\n\t      if (OneSignal._defaultLaunchURL) launchURL = OneSignal._defaultLaunchURL;\n\t      if (notificationData.launchURL) launchURL = notificationData.launchURL;\n\t\n\t      for (var i = 0; i < clientList.length; i++) {\n\t        var client = clientList[i];\n\t        if ('focus' in client && client.url == launchURL) {\n\t          client.focus();\n\t\n\t          // targetOrigin not valid here as the service worker owns the page.\n\t          client.postMessage(notificationData);\n\t          return;\n\t        }\n\t      }\n\t\n\t      if (launchURL !== 'javascript:void(0);' && launchURL !== 'do_not_open') {\n\t        _database2.default.put(\"NotificationOpened\", { url: launchURL, data: notificationData });\n\t        clients.openWindow(launchURL).catch(function (error) {\n\t          // Should only fall into here if going to an external URL on Chrome older than 43.\n\t          clients.openWindow(registration.scope + \"redirector.html?url=\" + launchURL);\n\t        });\n\t      }\n\t    }).catch(function (e) {\n\t      _loglevel2.default.error(e);\n\t    }));\n\t  },\n\t\n\t  // HTTP & HTTPS - Runs on main page (receives events from iframe / popup)\n\t  _listener_receiveMessage: function receiveMessage(event) {\n\t    if (event.data.from) {\n\t      var from = event.data.from.capitalize();\n\t    } else {\n\t      var from = 'IFrame/Popup';\n\t    }\n\t    _loglevel2.default.debug('%c' + _environment2.default.getEnv().capitalize() + ' ⬸ ' + from + ':', (0, _utils.getConsoleStyle)('postmessage'), event.data);\n\t\n\t    if (OneSignal._initOptions == undefined) return;\n\t\n\t    if (false) return;\n\t\n\t    if (event.data.oneSignalInitPageReady) {\n\t      // Only called on HTTP pages.\n\t      var eventData = event.data.oneSignalInitPageReady;\n\t\n\t      if (eventData.isIframe) {\n\t        OneSignal._iframePort = event.ports[0];\n\t      }\n\t\n\t      if (eventData.userId) _database2.default.put(\"Ids\", { type: \"userId\", id: eventData.userId });\n\t      if (eventData.registrationId) _database2.default.put(\"Ids\", { type: \"registrationId\", id: eventData.registrationId });\n\t\n\t      OneSignal._fireNotificationEnabledCallback(eventData.isPushEnabled);\n\t      OneSignal._sendUnsentTags();\n\t\n\t      _database2.default.get(\"Options\").then(function _listener_receiveMessage(options) {\n\t        if (!options.defaultUrl) options.defaultUrl = document.URL;\n\t        if (!options.defaultTitle) options.defaultTitle = document.title;\n\t\n\t        options.parent_url = document.URL;\n\t        event.ports[0].postMessage({ initOptions: options, from: _environment2.default.getEnv() });\n\t\n\t        // For HTTP sites, only now is the SDK initialized and able to communicate with the iframe\n\t        _events2.default.trigger(OneSignal.EVENTS.SDK_INITIALIZED);\n\t      }).catch(function (e) {\n\t        _loglevel2.default.error('_listener_receiveMessage:', e);\n\t      });\n\t    } else if (event.data.currentNotificationPermission) {\n\t      // Subdomain Only\n\t      OneSignal._fireNotificationEnabledCallback(event.data.currentNotificationPermission.isPushEnabled);\n\t    } else if (event.data.idsAvailable) {\n\t      // Only called on HTTP pages.\n\t      sessionStorage.setItem(\"ONE_SIGNAL_SESSION\", true);\n\t      _database2.default.put(\"Ids\", { type: \"userId\", id: event.data.idsAvailable.userId });\n\t      _database2.default.put(\"Ids\", { type: \"registrationId\", id: event.data.idsAvailable.registrationId });\n\t\n\t      if (OneSignal._idsAvailable_callback.length > 0) {\n\t        while (OneSignal._idsAvailable_callback.length > 0) {\n\t          var curr_callback = OneSignal._idsAvailable_callback.pop();\n\t          curr_callback({\n\t            userId: event.data.idsAvailable.userId,\n\t            registrationId: event.data.idsAvailable.registrationId\n\t          });\n\t        }\n\t      }\n\t      OneSignal._sendUnsentTags();\n\t    } else if (event.data.httpsPromptAccepted) {\n\t      // HTTPS Only\n\t      OneSignal.registerForPushNotifications();\n\t      OneSignal.setSubscription(true);\n\t      var elem = document.getElementById('OneSignal-iframe-modal');\n\t      elem.parentNode.removeChild(elem);\n\t      OneSignal._triggerEvent_customPromptClicked('granted');\n\t    } else if (event.data.httpsPromptCanceled) {\n\t      // HTTPS Only\n\t      var elem = document.getElementById('OneSignal-iframe-modal');\n\t      elem.parentNode.removeChild(elem);\n\t      OneSignal._triggerEvent_customPromptClicked('denied');\n\t    } else if (event.data.httpPromptAccepted) {\n\t      // HTTP Only\n\t      OneSignal._triggerEvent_customPromptClicked('granted');\n\t    } else if (event.data.httpPromptCanceled) {\n\t      // HTTP Only\n\t      OneSignal._triggerEvent_customPromptClicked('denied');\n\t    } else if (event.data.httpNativePromptPermissionChanged) {\n\t      var recentPermissions = _limitStore2.default.get('notification.permission');\n\t      var permissionBeforePrompt = recentPermissions[0];\n\t      OneSignal._triggerEvent_nativePromptPermissionChanged(permissionBeforePrompt, event.data.httpNativePromptPermissionChanged);\n\t    } else if (OneSignal._notificationOpened_callback) {\n\t      // HTTP and HTTPS\n\t      OneSignal._notificationOpened_callback(event.data);\n\t    }\n\t  },\n\t\n\t  addListenerForNotificationOpened: function addListenerForNotificationOpened(callback) {\n\t    OneSignal._notificationOpened_callback = callback;\n\t    if (window) {\n\t      _database2.default.get(\"NotificationOpened\", document.URL).then(function (notificationOpenedResult) {\n\t        if (notificationOpenedResult) {\n\t          _database2.default.remove(\"NotificationOpened\", document.URL);\n\t          OneSignal._notificationOpened_callback(notificationOpenedResult.data);\n\t        }\n\t      }).catch(function (e) {\n\t        _loglevel2.default.error(e);\n\t      });\n\t      ;\n\t    }\n\t  },\n\t\n\t  // Subdomain - Fired from message received from iframe.\n\t  _fireNotificationEnabledCallback: function _fireNotificationEnabledCallback(newNotificationPermission) {\n\t    if (OneSignal._isNotificationEnabledCallback) {\n\t      while (OneSignal._isNotificationEnabledCallback.length > 0) {\n\t        var callback = OneSignal._isNotificationEnabledCallback.pop();\n\t        callback(newNotificationPermission);\n\t      }\n\t    }\n\t  },\n\t\n\t  getIdsAvailable: function getIdsAvailable(callback) {\n\t    if (callback === undefined) return;\n\t\n\t    OneSignal._idsAvailable_callback.push(callback);\n\t\n\t    Promise.all([_database2.default.get('Ids', 'userId'), _database2.default.get('Ids', 'registrationId')]).then(function getIdsAvailable_GotUserRegistrationIds(results) {\n\t      var userIdResult = results[0];\n\t      var registrationIdResult = results[1];\n\t\n\t      if (userIdResult) {\n\t        if (registrationIdResult) {\n\t          while (OneSignal._idsAvailable_callback.length > 0) {\n\t            var curr_callback = OneSignal._idsAvailable_callback.pop();\n\t            curr_callback({\n\t              userId: userIdResult.id,\n\t              registrationId: registrationIdResult.id\n\t            });\n\t          }\n\t        } else while (OneSignal._idsAvailable_callback.length > 0) {\n\t          var curr_callback = OneSignal._idsAvailable_callback.pop();\n\t          curr_callback({ userId: userIdResult.id, registrationId: null });\n\t        }\n\t      }\n\t    }).catch(function (e) {\n\t      _loglevel2.default.error(e);\n\t    });\n\t    ;\n\t  },\n\t\n\t  getTags: function getTags(callback) {\n\t    _database2.default.get('Ids', 'userId').then(function (userIdResult) {\n\t      if (userIdResult) {\n\t        OneSignal._sendToOneSignalApi(\"players/\" + userIdResult.id, 'GET', null, function (response) {\n\t          callback(response.tags);\n\t        });\n\t      }\n\t    }).catch(function (e) {\n\t      _loglevel2.default.error(e);\n\t    });\n\t    ;\n\t  },\n\t\n\t  isPushNotificationsEnabled: function isPushNotificationsEnabled(callback) {\n\t    if (!(0, _utils.isPushNotificationsSupported)()) {\n\t      _loglevel2.default.warn(\"Your browser does not support push notifications.\");\n\t      return;\n\t    }\n\t\n\t    // If Subdomain\n\t    if (OneSignal._initOptions.subdomainName && !(0, _utils.isBrowserSafari)()) {\n\t      OneSignal._isNotificationEnabledCallback.push(callback);\n\t      if (OneSignal._iframePort) {\n\t        OneSignal._iframePort.postMessage({ getNotificationPermission: true, from: _environment2.default.getEnv() });\n\t      }\n\t      return;\n\t    }\n\t\n\t    // If HTTPS\n\t\n\t    Promise.all([_database2.default.get('Ids', 'registrationId'), _database2.default.get('Options', 'subscription')]).then(function (results) {\n\t      var registrationIdResult = results[0];\n\t      var subscriptionResult = results[1];\n\t\n\t      if (registrationIdResult) {\n\t        if (subscriptionResult && !subscriptionResult.value) return callback(false);\n\t\n\t        callback(Notification.permission == \"granted\");\n\t      } else callback(false);\n\t    }).catch(function (e) {\n\t      _loglevel2.default.error(e);\n\t    });\n\t  },\n\t\n\t  _getNotificationTypes: function _getNotificationTypes(callback) {\n\t    OneSignal._getSubscription(function (currentSubscription) {\n\t      callback(currentSubscription ? 1 : -2);\n\t    });\n\t  },\n\t\n\t  setSubscription: function setSubscription(newSubscription) {\n\t    return new Promise(function (resolve, reject) {\n\t      if (OneSignal._iframePort) OneSignal._iframePort.postMessage({ setSubdomainState: { setSubscription: newSubscription }, from: _environment2.default.getEnv() });else {\n\t        OneSignal._getSubscription().then(function (currentSubscription) {\n\t          if (currentSubscription != newSubscription) {\n\t            return _database2.default.put(\"Options\", { key: \"subscription\", value: newSubscription });\n\t          } else reject('Called %csetSubscription(' + newSubscription + ')', (0, _utils.getConsoleStyle)('code'), 'but there was no change, so skipping call.');\n\t        }).then(function () {\n\t          return _database2.default.get('Ids', 'userId');\n\t        }).then(function (userIdResult) {\n\t          if (userIdResult) {\n\t            return apiCall(\"players/\" + userIdResult.id, \"PUT\", {\n\t              app_id: OneSignal._app_id,\n\t              notification_types: newSubscription ? 1 : -2\n\t            });\n\t          } else reject('Called %csetSubscription(' + newSubscription + ')', (0, _utils.getConsoleStyle)('code'), 'but there was no user ID, so the result was not forwarded to OneSignal.');\n\t        }).then(function () {\n\t          OneSignal._triggerEvent_internalSubscriptionSet(newSubscription);\n\t          resolve();\n\t        }).catch(function (e) {\n\t          if (e.constructor.name === 'Error') {\n\t            _loglevel2.default.error(e);\n\t            reject(e);\n\t          } else {\n\t            resolve(e);\n\t          }\n\t        });\n\t      }\n\t    });\n\t  },\n\t\n\t  /**\n\t   * Returns a promise that resolves to false if setSubscription(false) has been explicitly called at any point in time. Otherwise returns true.\n\t   * This means a return value of true does not mean the user is subscribed, only that the user did not call setSubcription(false).\n\t   * @private\n\t   * @returns {Promise}\n\t   */\n\t  _getSubscription: function _getSubscription() {\n\t    return new Promise(function (resolve, reject) {\n\t      _database2.default.get('Options', 'subscription').then(function (subscriptionResult) {\n\t        resolve(!(subscriptionResult && subscriptionResult.value == false));\n\t      }).catch(function (e) {\n\t        _loglevel2.default.error(e);\n\t        reject(e);\n\t      });\n\t    });\n\t  },\n\t\n\t  _safePostMessage: function _safePostMessage(creator, data, targetOrigin, receiver) {\n\t    var tOrigin = targetOrigin.toLowerCase();\n\t\n\t    // If we are trying to target a http site allow the https version. (w/ or w/o 'wwww.' too)\n\t    if (tOrigin.startsWith(\"http://\")) {\n\t      var queryDict = {};\n\t      location.search.substr(1).split(\"&\").forEach(function (item) {\n\t        queryDict[item.split(\"=\")[0]] = item.split(\"=\")[1];\n\t      });\n\t      var validPreURLRegex = /^http(s|):\\/\\/(www\\.|)/;\n\t      tOrigin = tOrigin.replace(validPreURLRegex, queryDict[\"hostPageProtocol\"]);\n\t    }\n\t\n\t    if (!data.from) {\n\t      data['from'] = _environment2.default.getEnv();\n\t    }\n\t\n\t    if (receiver) creator.postMessage(data, tOrigin, receiver);else creator.postMessage(data, tOrigin);\n\t  },\n\t\n\t  _process_pushes: function _process_pushes(array) {\n\t    for (var i = 0; i < array.length; i++) {\n\t      OneSignal.push(array[i]);\n\t    }\n\t  },\n\t\n\t  push: function push(item) {\n\t    if (typeof item == \"function\") item();else {\n\t      var functionName = item.shift();\n\t      OneSignal[functionName].apply(null, item);\n\t    }\n\t  }\n\t};\n\t\n\t// If imported on your page.\n\tif (_environment2.default.isBrowser()) window.addEventListener(\"message\", OneSignal._listener_receiveMessage, false);else {// if imported from the service worker.\n\t\n\t}\n\t\n\tif (OneSignal.LOGGING) _loglevel2.default.setDefaultLevel(_loglevel2.default.levels.TRACE);else _loglevel2.default.setDefaultLevel(_loglevel2.default.levels.ERROR);\n\t\n\t_loglevel2.default.info('%cOneSignal Web SDK loaded (version ' + OneSignal._VERSION + ', ' + _environment2.default.getEnv() + ' environment).', (0, _utils.getConsoleStyle)('bold'));\n\t\n\tmodule.exports = OneSignal;\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(3)))\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {/*** IMPORTS FROM imports-loader ***/\n\t(function() {\n\t\n\t(function() {\n\t  'use strict';\n\t\n\t  if (self.fetch) {\n\t    return\n\t  }\n\t\n\t  function normalizeName(name) {\n\t    if (typeof name !== 'string') {\n\t      name = String(name)\n\t    }\n\t    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n\t      throw new TypeError('Invalid character in header field name')\n\t    }\n\t    return name.toLowerCase()\n\t  }\n\t\n\t  function normalizeValue(value) {\n\t    if (typeof value !== 'string') {\n\t      value = String(value)\n\t    }\n\t    return value\n\t  }\n\t\n\t  function Headers(headers) {\n\t    this.map = {}\n\t\n\t    if (headers instanceof Headers) {\n\t      headers.forEach(function(value, name) {\n\t        this.append(name, value)\n\t      }, this)\n\t\n\t    } else if (headers) {\n\t      Object.getOwnPropertyNames(headers).forEach(function(name) {\n\t        this.append(name, headers[name])\n\t      }, this)\n\t    }\n\t  }\n\t\n\t  Headers.prototype.append = function(name, value) {\n\t    name = normalizeName(name)\n\t    value = normalizeValue(value)\n\t    var list = this.map[name]\n\t    if (!list) {\n\t      list = []\n\t      this.map[name] = list\n\t    }\n\t    list.push(value)\n\t  }\n\t\n\t  Headers.prototype['delete'] = function(name) {\n\t    delete this.map[normalizeName(name)]\n\t  }\n\t\n\t  Headers.prototype.get = function(name) {\n\t    var values = this.map[normalizeName(name)]\n\t    return values ? values[0] : null\n\t  }\n\t\n\t  Headers.prototype.getAll = function(name) {\n\t    return this.map[normalizeName(name)] || []\n\t  }\n\t\n\t  Headers.prototype.has = function(name) {\n\t    return this.map.hasOwnProperty(normalizeName(name))\n\t  }\n\t\n\t  Headers.prototype.set = function(name, value) {\n\t    this.map[normalizeName(name)] = [normalizeValue(value)]\n\t  }\n\t\n\t  Headers.prototype.forEach = function(callback, thisArg) {\n\t    Object.getOwnPropertyNames(this.map).forEach(function(name) {\n\t      this.map[name].forEach(function(value) {\n\t        callback.call(thisArg, value, name, this)\n\t      }, this)\n\t    }, this)\n\t  }\n\t\n\t  function consumed(body) {\n\t    if (body.bodyUsed) {\n\t      return Promise.reject(new TypeError('Already read'))\n\t    }\n\t    body.bodyUsed = true\n\t  }\n\t\n\t  function fileReaderReady(reader) {\n\t    return new Promise(function(resolve, reject) {\n\t      reader.onload = function() {\n\t        resolve(reader.result)\n\t      }\n\t      reader.onerror = function() {\n\t        reject(reader.error)\n\t      }\n\t    })\n\t  }\n\t\n\t  function readBlobAsArrayBuffer(blob) {\n\t    var reader = new FileReader()\n\t    reader.readAsArrayBuffer(blob)\n\t    return fileReaderReady(reader)\n\t  }\n\t\n\t  function readBlobAsText(blob) {\n\t    var reader = new FileReader()\n\t    reader.readAsText(blob)\n\t    return fileReaderReady(reader)\n\t  }\n\t\n\t  var support = {\n\t    blob: 'FileReader' in self && 'Blob' in self && (function() {\n\t      try {\n\t        new Blob();\n\t        return true\n\t      } catch(e) {\n\t        return false\n\t      }\n\t    })(),\n\t    formData: 'FormData' in self,\n\t    arrayBuffer: 'ArrayBuffer' in self\n\t  }\n\t\n\t  function Body() {\n\t    this.bodyUsed = false\n\t\n\t\n\t    this._initBody = function(body) {\n\t      this._bodyInit = body\n\t      if (typeof body === 'string') {\n\t        this._bodyText = body\n\t      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n\t        this._bodyBlob = body\n\t      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n\t        this._bodyFormData = body\n\t      } else if (!body) {\n\t        this._bodyText = ''\n\t      } else if (support.arrayBuffer && ArrayBuffer.prototype.isPrototypeOf(body)) {\n\t        // Only support ArrayBuffers for POST method.\n\t        // Receiving ArrayBuffers happens via Blobs, instead.\n\t      } else {\n\t        throw new Error('unsupported BodyInit type')\n\t      }\n\t    }\n\t\n\t    if (support.blob) {\n\t      this.blob = function() {\n\t        var rejected = consumed(this)\n\t        if (rejected) {\n\t          return rejected\n\t        }\n\t\n\t        if (this._bodyBlob) {\n\t          return Promise.resolve(this._bodyBlob)\n\t        } else if (this._bodyFormData) {\n\t          throw new Error('could not read FormData body as blob')\n\t        } else {\n\t          return Promise.resolve(new Blob([this._bodyText]))\n\t        }\n\t      }\n\t\n\t      this.arrayBuffer = function() {\n\t        return this.blob().then(readBlobAsArrayBuffer)\n\t      }\n\t\n\t      this.text = function() {\n\t        var rejected = consumed(this)\n\t        if (rejected) {\n\t          return rejected\n\t        }\n\t\n\t        if (this._bodyBlob) {\n\t          return readBlobAsText(this._bodyBlob)\n\t        } else if (this._bodyFormData) {\n\t          throw new Error('could not read FormData body as text')\n\t        } else {\n\t          return Promise.resolve(this._bodyText)\n\t        }\n\t      }\n\t    } else {\n\t      this.text = function() {\n\t        var rejected = consumed(this)\n\t        return rejected ? rejected : Promise.resolve(this._bodyText)\n\t      }\n\t    }\n\t\n\t    if (support.formData) {\n\t      this.formData = function() {\n\t        return this.text().then(decode)\n\t      }\n\t    }\n\t\n\t    this.json = function() {\n\t      return this.text().then(JSON.parse)\n\t    }\n\t\n\t    return this\n\t  }\n\t\n\t  // HTTP methods whose capitalization should be normalized\n\t  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\t\n\t  function normalizeMethod(method) {\n\t    var upcased = method.toUpperCase()\n\t    return (methods.indexOf(upcased) > -1) ? upcased : method\n\t  }\n\t\n\t  function Request(input, options) {\n\t    options = options || {}\n\t    var body = options.body\n\t    if (Request.prototype.isPrototypeOf(input)) {\n\t      if (input.bodyUsed) {\n\t        throw new TypeError('Already read')\n\t      }\n\t      this.url = input.url\n\t      this.credentials = input.credentials\n\t      if (!options.headers) {\n\t        this.headers = new Headers(input.headers)\n\t      }\n\t      this.method = input.method\n\t      this.mode = input.mode\n\t      if (!body) {\n\t        body = input._bodyInit\n\t        input.bodyUsed = true\n\t      }\n\t    } else {\n\t      this.url = input\n\t    }\n\t\n\t    this.credentials = options.credentials || this.credentials || 'omit'\n\t    if (options.headers || !this.headers) {\n\t      this.headers = new Headers(options.headers)\n\t    }\n\t    this.method = normalizeMethod(options.method || this.method || 'GET')\n\t    this.mode = options.mode || this.mode || null\n\t    this.referrer = null\n\t\n\t    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n\t      throw new TypeError('Body not allowed for GET or HEAD requests')\n\t    }\n\t    this._initBody(body)\n\t  }\n\t\n\t  Request.prototype.clone = function() {\n\t    return new Request(this)\n\t  }\n\t\n\t  function decode(body) {\n\t    var form = new FormData()\n\t    body.trim().split('&').forEach(function(bytes) {\n\t      if (bytes) {\n\t        var split = bytes.split('=')\n\t        var name = split.shift().replace(/\\+/g, ' ')\n\t        var value = split.join('=').replace(/\\+/g, ' ')\n\t        form.append(decodeURIComponent(name), decodeURIComponent(value))\n\t      }\n\t    })\n\t    return form\n\t  }\n\t\n\t  function headers(xhr) {\n\t    var head = new Headers()\n\t    var pairs = xhr.getAllResponseHeaders().trim().split('\\n')\n\t    pairs.forEach(function(header) {\n\t      var split = header.trim().split(':')\n\t      var key = split.shift().trim()\n\t      var value = split.join(':').trim()\n\t      head.append(key, value)\n\t    })\n\t    return head\n\t  }\n\t\n\t  Body.call(Request.prototype)\n\t\n\t  function Response(bodyInit, options) {\n\t    if (!options) {\n\t      options = {}\n\t    }\n\t\n\t    this._initBody(bodyInit)\n\t    this.type = 'default'\n\t    this.status = options.status\n\t    this.ok = this.status >= 200 && this.status < 300\n\t    this.statusText = options.statusText\n\t    this.headers = options.headers instanceof Headers ? options.headers : new Headers(options.headers)\n\t    this.url = options.url || ''\n\t  }\n\t\n\t  Body.call(Response.prototype)\n\t\n\t  Response.prototype.clone = function() {\n\t    return new Response(this._bodyInit, {\n\t      status: this.status,\n\t      statusText: this.statusText,\n\t      headers: new Headers(this.headers),\n\t      url: this.url\n\t    })\n\t  }\n\t\n\t  Response.error = function() {\n\t    var response = new Response(null, {status: 0, statusText: ''})\n\t    response.type = 'error'\n\t    return response\n\t  }\n\t\n\t  var redirectStatuses = [301, 302, 303, 307, 308]\n\t\n\t  Response.redirect = function(url, status) {\n\t    if (redirectStatuses.indexOf(status) === -1) {\n\t      throw new RangeError('Invalid status code')\n\t    }\n\t\n\t    return new Response(null, {status: status, headers: {location: url}})\n\t  }\n\t\n\t  self.Headers = Headers;\n\t  self.Request = Request;\n\t  self.Response = Response;\n\t\n\t  self.fetch = function(input, init) {\n\t    return new Promise(function(resolve, reject) {\n\t      var request\n\t      if (Request.prototype.isPrototypeOf(input) && !init) {\n\t        request = input\n\t      } else {\n\t        request = new Request(input, init)\n\t      }\n\t\n\t      var xhr = new XMLHttpRequest()\n\t\n\t      function responseURL() {\n\t        if ('responseURL' in xhr) {\n\t          return xhr.responseURL\n\t        }\n\t\n\t        // Avoid security warnings on getResponseHeader when not allowed by CORS\n\t        if (/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())) {\n\t          return xhr.getResponseHeader('X-Request-URL')\n\t        }\n\t\n\t        return;\n\t      }\n\t\n\t      xhr.onload = function() {\n\t        var status = (xhr.status === 1223) ? 204 : xhr.status\n\t        if (status < 100 || status > 599) {\n\t          reject(new TypeError('Network request failed'))\n\t          return\n\t        }\n\t        var options = {\n\t          status: status,\n\t          statusText: xhr.statusText,\n\t          headers: headers(xhr),\n\t          url: responseURL()\n\t        }\n\t        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n\t        resolve(new Response(body, options))\n\t      }\n\t\n\t      xhr.onerror = function() {\n\t        reject(new TypeError('Network request failed'))\n\t      }\n\t\n\t      xhr.open(request.method, request.url, true)\n\t\n\t      if (request.credentials === 'include') {\n\t        xhr.withCredentials = true\n\t      }\n\t\n\t      if ('responseType' in xhr && support.blob) {\n\t        xhr.responseType = 'blob'\n\t      }\n\t\n\t      request.headers.forEach(function(value, name) {\n\t        xhr.setRequestHeader(name, value)\n\t      })\n\t\n\t      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n\t    })\n\t  }\n\t  self.fetch.polyfill = true\n\t})();\n\t\n\t\n\t/*** EXPORTS FROM exports-loader ***/\n\tmodule.exports = global.fetch\n\t}.call(global));\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.API_URL = exports.HOST_URL = exports.PROD_HOST = exports.DEV_HOST = undefined;\n\t\n\tvar _utils = __webpack_require__(5);\n\t\n\tvar DEV_HOST = exports.DEV_HOST = 'https://192.168.1.206:3000';\n\tvar PROD_HOST = exports.PROD_HOST = 'https://onesignal.com';\n\tvar HOST_URL = exports.HOST_URL = (0, _utils.isDev)() ? DEV_HOST : PROD_HOST;\n\tvar API_URL = exports.API_URL = ((0, _utils.isDev)() ? DEV_HOST : PROD_HOST) + '/api/v1/';\n\t\n\t// ⬸ ⤑\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.isArray = isArray;\n\texports.getHumanizedTimeDuration = getHumanizedTimeDuration;\n\texports.isDev = isDev;\n\texports.isPushNotificationsSupported = isPushNotificationsSupported;\n\texports.isBrowserSafari = isBrowserSafari;\n\texports.isSupportedFireFox = isSupportedFireFox;\n\texports.isBrowserFirefox = isBrowserFirefox;\n\texports.getFirefoxVersion = getFirefoxVersion;\n\texports.isSupportedSafari = isSupportedSafari;\n\texports.removeDomElement = removeDomElement;\n\texports.addDomElement = addDomElement;\n\texports.clearDomElementChildren = clearDomElementChildren;\n\texports.addCssClass = addCssClass;\n\texports.removeCssClass = removeCssClass;\n\texports.on = on;\n\texports.once = once;\n\texports.off = off;\n\texports.getConsoleStyle = getConsoleStyle;\n\texports.delay = delay;\n\texports.nothing = nothing;\n\texports.when = when;\n\t\n\tvar _loglevel = __webpack_require__(7);\n\t\n\tvar _loglevel2 = _interopRequireDefault(_loglevel);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\t\n\tfunction isArray(variable) {\n\t  return Object.prototype.toString.call(variable) === '[object Array]';\n\t}\n\t\n\tfunction getHumanizedTimeDuration(timeDurationInMilliseconds) {\n\t  function addPluralSuffix(number) {\n\t    return number > 1 ? 's' : '';\n\t  }\n\t  var duration = Math.floor(timeDurationInMilliseconds / 1000);\n\t\n\t  var years = Math.floor(duration / 31536000);\n\t  if (years) return years + ' year' + addPluralSuffix(years);\n\t\n\t  var days = Math.floor((duration %= 31536000) / 86400);\n\t  if (days) return days + ' day' + addPluralSuffix(days);\n\t\n\t  var hours = Math.floor((duration %= 86400) / 3600);\n\t  if (hours) return hours + ' hour' + addPluralSuffix(hours);\n\t\n\t  var minutes = Math.floor((duration %= 3600) / 60);\n\t  if (minutes) return minutes + ' minute' + addPluralSuffix(minutes);\n\t\n\t  var seconds = duration % 60;\n\t  if (seconds) return seconds + ' second' + addPluralSuffix(seconds);\n\t\n\t  return 'just now';\n\t}\n\t\n\tfunction isDev() {\n\t  return (true);\n\t}\n\t\n\tfunction isPushNotificationsSupported() {\n\t  var chromeVersion = navigator.appVersion.match(/Chrome\\/(.*?) /);\n\t\n\t  if (isSupportedFireFox()) return true;\n\t\n\t  if (isSupportedSafari()) return true;\n\t\n\t  // Chrome is not found in appVersion.\n\t  if (!chromeVersion) return false;\n\t\n\t  // Microsoft Edge\n\t  if (navigator.appVersion.match(/Edge/)) return false;\n\t\n\t  // Android Chrome WebView\n\t  if (navigator.appVersion.match(/ wv/)) return false;\n\t\n\t  // Opera\n\t  if (navigator.appVersion.match(/OPR\\//)) return false;\n\t\n\t  // The user is on iOS\n\t  if (/iPad|iPhone|iPod/.test(navigator.platform)) return false;\n\t\n\t  return parseInt(chromeVersion[1].substring(0, 2)) > 41;\n\t}\n\t\n\tfunction isBrowserSafari() {\n\t  var safariVersion = navigator.appVersion.match(\"Version/([0-9]?).* Safari\");\n\t  return safariVersion != null;\n\t}\n\t\n\tfunction isSupportedFireFox() {\n\t  var fireFoxVersion = navigator.userAgent.match(/(Firefox\\/)([0-9]{2,}\\.[0-9]{1,})/);\n\t  if (fireFoxVersion) return parseInt(fireFoxVersion[2].substring(0, 2)) > 43;\n\t  return false;\n\t}\n\t\n\tfunction isBrowserFirefox() {\n\t  var fireFoxVersion = navigator.userAgent.match(/(Firefox\\/)([0-9]{2,}\\.[0-9]{1,})/);\n\t  return fireFoxVersion != null;\n\t}\n\t\n\tfunction getFirefoxVersion() {\n\t  var fireFoxVersion = navigator.userAgent.match(/(Firefox\\/)([0-9]{2,}\\.[0-9]{1,})/);\n\t  if (fireFoxVersion) return parseInt(fireFoxVersion[2].substring(0, 2));else return -1;\n\t}\n\t\n\tfunction isSupportedSafari() {\n\t  var safariVersion = navigator.appVersion.match(\"Version/([0-9]?).* Safari\");\n\t  if (safariVersion == null) return false;\n\t  if (/iPhone|iPad|iPod/i.test(navigator.userAgent)) return false;\n\t  return parseInt(safariVersion[1]) > 6;\n\t}\n\t\n\tfunction removeDomElement(selector) {\n\t  var els = document.querySelectorAll(selector);\n\t  if (els.length > 0) {\n\t    for (var i = 0; i < els.length; i++) {\n\t      els[i].parentNode.removeChild(els[i]);\n\t    }\n\t  }\n\t}\n\t\n\tfunction addDomElement(targetSelectorOrElement, addOrder, elementHtml) {\n\t  if (typeof targetSelectorOrElement === 'string') document.querySelector(targetSelectorOrElement).insertAdjacentHTML(addOrder, elementHtml);else if ((typeof targetSelectorOrElement === 'undefined' ? 'undefined' : _typeof(targetSelectorOrElement)) === 'object') targetSelectorOrElement.insertAdjacentHTML(addOrder, elementHtml);else throw new Error(targetSelectorOrElement + ' must be a CSS selector string or DOM Element object.');\n\t}\n\t\n\tfunction clearDomElementChildren(targetSelectorOrElement) {\n\t  if (typeof targetSelectorOrElement === 'string') {\n\t    var element = document.querySelector(targetSelectorOrElement);\n\t    while (element.firstChild) {\n\t      element.removeChild(element.firstChild);\n\t    }\n\t  } else if ((typeof targetSelectorOrElement === 'undefined' ? 'undefined' : _typeof(targetSelectorOrElement)) === 'object') {\n\t    while (targetSelectorOrElement.firstChild) {\n\t      targetSelectorOrElement.removeChild(targetSelectorOrElement.firstChild);\n\t    }\n\t  } else throw new Error(targetSelectorOrElement + ' must be a CSS selector string or DOM Element object.');\n\t}\n\t\n\tfunction addCssClass(targetSelectorOrElement, cssClass) {\n\t  if (typeof targetSelectorOrElement === 'string') document.querySelector(targetSelectorOrElement).classList.add(cssClass);else if ((typeof targetSelectorOrElement === 'undefined' ? 'undefined' : _typeof(targetSelectorOrElement)) === 'object') targetSelectorOrElement.classList.add(cssClass);else throw new Error(targetSelectorOrElement + ' must be a CSS selector string or DOM Element object.');\n\t}\n\t\n\tfunction removeCssClass(targetSelectorOrElement, cssClass) {\n\t  if (typeof targetSelectorOrElement === 'string') document.querySelector(targetSelectorOrElement).classList.remove(cssClass);else if ((typeof targetSelectorOrElement === 'undefined' ? 'undefined' : _typeof(targetSelectorOrElement)) === 'object') targetSelectorOrElement.classList.remove(cssClass);else throw new Error(targetSelectorOrElement + ' must be a CSS selector string or DOM Element object.');\n\t}\n\t\n\tfunction on(targetSelectorOrElement, event, task) {\n\t  if (!event) {\n\t    _loglevel2.default.error('Cannot call on() with no event: ', event);\n\t  }\n\t  if (!task) {\n\t    _loglevel2.default.error('Cannot call on() with no task: ', task);\n\t  }\n\t  _loglevel2.default.debug('Debug me here.');\n\t  if (typeof targetSelectorOrElement === 'string') {\n\t    var els = document.querySelectorAll(selector);\n\t    if (els.length > 0) {\n\t      for (var i = 0; i < els.length; i++) {\n\t        on(els[i], task);\n\t      }\n\t    }\n\t  } else if (isArray(targetSelectorOrElement)) {\n\t    for (var i = 0; i < targetSelectorOrElement.length; i++) {\n\t      on(targetSelectorOrElement[i], task);\n\t    }\n\t  } else if ((typeof targetSelectorOrElement === 'undefined' ? 'undefined' : _typeof(targetSelectorOrElement)) === 'object') targetSelectorOrElement.addEventListener(event, task);else throw new Error(targetSelectorOrElement + ' must be a CSS selector string or DOM Element object.');\n\t}\n\t\n\tfunction once(targetSelectorOrElement, event, task) {\n\t  var manualDestroy = arguments.length <= 3 || arguments[3] === undefined ? false : arguments[3];\n\t\n\t  if (!event) {\n\t    _loglevel2.default.error('Cannot call on() with no event: ', event);\n\t  }\n\t  if (!task) {\n\t    _loglevel2.default.error('Cannot call on() with no task: ', task);\n\t  }\n\t  if (typeof targetSelectorOrElement === 'string') {\n\t    var els = document.querySelectorAll(selector);\n\t    if (els.length > 0) {\n\t      for (var i = 0; i < els.length; i++) {\n\t        once(els[i], task);\n\t      }\n\t    }\n\t  } else if (isArray(targetSelectorOrElement)) {\n\t    for (var i = 0; i < targetSelectorOrElement.length; i++) {\n\t      once(targetSelectorOrElement[i], task);\n\t    }\n\t  } else if ((typeof targetSelectorOrElement === 'undefined' ? 'undefined' : _typeof(targetSelectorOrElement)) === 'object') {\n\t    var taskWrapper = (function () {\n\t      var internalTaskFunction = function internalTaskFunction(e) {\n\t        var destroyEventListener = function destroyEventListener() {\n\t          targetSelectorOrElement.removeEventListener(e.type, taskWrapper);\n\t        };\n\t        if (!manualDestroy) {\n\t          destroyEventListener();\n\t        }\n\t        task(e, destroyEventListener);\n\t      };\n\t      return internalTaskFunction;\n\t    })();\n\t    targetSelectorOrElement.addEventListener(event, taskWrapper);\n\t  } else throw new Error(targetSelectorOrElement + ' must be a CSS selector string or DOM Element object.');\n\t}\n\t\n\t/**\n\t * Removes event handler from selector.\n\t * @param targetSelectorOrElement Selector to target one or multiple elements, or a single or array of DOMElement.\n\t * @param event The event to target (e.g. 'transitionend')\n\t * @param task A single function callback to unbind, or leave empty to remove all event handlers.\n\t */\n\tfunction off(targetSelectorOrElement, event, task) {\n\t  if (typeof targetSelectorOrElement === 'string') {\n\t    var els = document.querySelectorAll(selector);\n\t    if (els.length > 0) {\n\t      for (var i = 0; i < els.length; i++) {\n\t        off(els[i], task);\n\t      }\n\t    }\n\t  } else if (isArray(targetSelectorOrElement)) {\n\t    for (var i = 0; i < targetSelectorOrElement.length; i++) {\n\t      off(targetSelectorOrElement[i], task);\n\t    }\n\t  } else if ((typeof targetSelectorOrElement === 'undefined' ? 'undefined' : _typeof(targetSelectorOrElement)) === 'object') {\n\t    if (task) targetSelectorOrElement.removeEventListener(event, task);else targetSelectorOrElement.removeEventListener(event);\n\t  } else throw new Error(targetSelectorOrElement + ' must be a CSS selector string or DOM Element object.');\n\t}\n\t\n\tfunction getConsoleStyle(style) {\n\t  if (style == 'code') {\n\t    return '\\n    padding: 0 5px 2px;\\n    border: 1px solid #ddd;\\n    -webkit-border-radius: 3px;\\n    -moz-border-radius: 3px;\\n    border-radius: 3px;\\n    background-clip: padding-box;\\n    font-family: Monaco,\"DejaVu Sans Mono\",\"Courier New\",monospace;\\n    color: #666;\\n    ';\n\t  } else if (style == 'bold') {\n\t    return '\\n      font-weight: 600;\\n    color: rgb(51, 51, 51);\\n    ';\n\t  } else if (style == 'alert') {\n\t    return '\\n      font-weight: 600;\\n    color: red;\\n    ';\n\t  } else if (style == 'event') {\n\t    return '\\n    color: green;\\n    ';\n\t  } else if (style == 'postmessage') {\n\t    return '\\n    color: orange;\\n    ';\n\t  }\n\t}\n\t\n\t/**\n\t * Returns a promise for the setTimeout() method.\n\t * @param durationMs\n\t * @returns {Promise} Returns a promise that resolves when the timeout is complete.\n\t */\n\tfunction delay(durationMs) {\n\t  return new Promise(function (resolve) {\n\t    setTimeout(resolve, durationMs);\n\t  });\n\t}\n\t\n\tfunction nothing() {\n\t  return Promise.resolve();\n\t}\n\t\n\tfunction when(condition, promiseIfTrue, promiseIfFalse) {\n\t  if (promiseIfTrue === undefined) promiseIfTrue = nothing();\n\t  if (promiseIfFalse === undefined) promiseIfFalse = nothing();\n\t  return condition ? promiseIfTrue : promiseIfFalse;\n\t}\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(fetch) {'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.apiCall = apiCall;\n\texports.sendNotification = sendNotification;\n\t\n\tvar _vars = __webpack_require__(4);\n\t\n\tvar _loglevel = __webpack_require__(7);\n\t\n\tvar _loglevel2 = _interopRequireDefault(_loglevel);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction apiCall(action, method, data) {\n\t  var headers = new Headers();\n\t  headers.append('Content-Type', 'application/json;charset=UTF-8');\n\t\n\t  var contents = {\n\t    method: method || 'NO_METHOD_SPECIFIED',\n\t    headers: headers,\n\t    cache: 'no-cache'\n\t  };\n\t  if (data) contents.body = JSON.stringify(data);\n\t\n\t  return new Promise(function (resolve, reject) {\n\t    fetch(_vars.API_URL + action, contents).then(function status(response) {\n\t      if (response.status >= 200 && response.status < 300) return response.json();else reject(new Error(response.statusText));\n\t    }).then(function (jsonResponse) {\n\t      resolve(jsonResponse);\n\t    }).catch(function (e) {\n\t      reject(e);\n\t    });\n\t  });\n\t}\n\t\n\tfunction sendNotification(appId, playerIds, titles, contents) {\n\t  var params = {\n\t    'app_id': appId,\n\t    'headings': titles,\n\t    'contents': contents,\n\t    'include_player_ids': playerIds,\n\t    'isAnyWeb': true,\n\t    'url': 'javascript:void(0);'\n\t  };\n\t  return apiCall('notifications', 'POST', params);\n\t}\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(3)))\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*\r\n\t* loglevel - https://github.com/pimterry/loglevel\r\n\t*\r\n\t* Copyright (c) 2013 Tim Perry\r\n\t* Licensed under the MIT license.\r\n\t*/\r\n\t(function (root, definition) {\r\n\t    \"use strict\";\r\n\t    if (typeof module === 'object' && module.exports && \"function\" === 'function') {\r\n\t        module.exports = definition();\r\n\t    } else if (true) {\r\n\t        !(__WEBPACK_AMD_DEFINE_FACTORY__ = (definition), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\r\n\t    } else {\r\n\t        root.log = definition();\r\n\t    }\r\n\t}(this, function () {\r\n\t    \"use strict\";\r\n\t    var noop = function() {};\r\n\t    var undefinedType = \"undefined\";\r\n\t\r\n\t    function realMethod(methodName) {\r\n\t        if (typeof console === undefinedType) {\r\n\t            return false; // We can't build a real method without a console to log to\r\n\t        } else if (console[methodName] !== undefined) {\r\n\t            return bindMethod(console, methodName);\r\n\t        } else if (console.log !== undefined) {\r\n\t            return bindMethod(console, 'log');\r\n\t        } else {\r\n\t            return noop;\r\n\t        }\r\n\t    }\r\n\t\r\n\t    function bindMethod(obj, methodName) {\r\n\t        var method = obj[methodName];\r\n\t        if (typeof method.bind === 'function') {\r\n\t            return method.bind(obj);\r\n\t        } else {\r\n\t            try {\r\n\t                return Function.prototype.bind.call(method, obj);\r\n\t            } catch (e) {\r\n\t                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\r\n\t                return function() {\r\n\t                    return Function.prototype.apply.apply(method, [obj, arguments]);\r\n\t                };\r\n\t            }\r\n\t        }\r\n\t    }\r\n\t\r\n\t    // these private functions always need `this` to be set properly\r\n\t\r\n\t    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {\r\n\t        return function () {\r\n\t            if (typeof console !== undefinedType) {\r\n\t                replaceLoggingMethods.call(this, level, loggerName);\r\n\t                this[methodName].apply(this, arguments);\r\n\t            }\r\n\t        };\r\n\t    }\r\n\t\r\n\t    function replaceLoggingMethods(level, loggerName) {\r\n\t        /*jshint validthis:true */\r\n\t        for (var i = 0; i < logMethods.length; i++) {\r\n\t            var methodName = logMethods[i];\r\n\t            this[methodName] = (i < level) ?\r\n\t                noop :\r\n\t                this.methodFactory(methodName, level, loggerName);\r\n\t        }\r\n\t    }\r\n\t\r\n\t    function defaultMethodFactory(methodName, level, loggerName) {\r\n\t        /*jshint validthis:true */\r\n\t        return realMethod(methodName) ||\r\n\t               enableLoggingWhenConsoleArrives.apply(this, arguments);\r\n\t    }\r\n\t\r\n\t    var logMethods = [\r\n\t        \"trace\",\r\n\t        \"debug\",\r\n\t        \"info\",\r\n\t        \"warn\",\r\n\t        \"error\"\r\n\t    ];\r\n\t\r\n\t    function Logger(name, defaultLevel, factory) {\r\n\t      var self = this;\r\n\t      var currentLevel;\r\n\t      var storageKey = \"loglevel\";\r\n\t      if (name) {\r\n\t        storageKey += \":\" + name;\r\n\t      }\r\n\t\r\n\t      function persistLevelIfPossible(levelNum) {\r\n\t          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\r\n\t\r\n\t          // Use localStorage if available\r\n\t          try {\r\n\t              window.localStorage[storageKey] = levelName;\r\n\t              return;\r\n\t          } catch (ignore) {}\r\n\t\r\n\t          // Use session cookie as fallback\r\n\t          try {\r\n\t              window.document.cookie =\r\n\t                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\r\n\t          } catch (ignore) {}\r\n\t      }\r\n\t\r\n\t      function getPersistedLevel() {\r\n\t          var storedLevel;\r\n\t\r\n\t          try {\r\n\t              storedLevel = window.localStorage[storageKey];\r\n\t          } catch (ignore) {}\r\n\t\r\n\t          if (typeof storedLevel === undefinedType) {\r\n\t              try {\r\n\t                  var cookie = window.document.cookie;\r\n\t                  var location = cookie.indexOf(\r\n\t                      encodeURIComponent(storageKey) + \"=\");\r\n\t                  if (location) {\r\n\t                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];\r\n\t                  }\r\n\t              } catch (ignore) {}\r\n\t          }\r\n\t\r\n\t          // If the stored level is not valid, treat it as if nothing was stored.\r\n\t          if (self.levels[storedLevel] === undefined) {\r\n\t              storedLevel = undefined;\r\n\t          }\r\n\t\r\n\t          return storedLevel;\r\n\t      }\r\n\t\r\n\t      /*\r\n\t       *\r\n\t       * Public API\r\n\t       *\r\n\t       */\r\n\t\r\n\t      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\r\n\t          \"ERROR\": 4, \"SILENT\": 5};\r\n\t\r\n\t      self.methodFactory = factory || defaultMethodFactory;\r\n\t\r\n\t      self.getLevel = function () {\r\n\t          return currentLevel;\r\n\t      };\r\n\t\r\n\t      self.setLevel = function (level, persist) {\r\n\t          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\r\n\t              level = self.levels[level.toUpperCase()];\r\n\t          }\r\n\t          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\r\n\t              currentLevel = level;\r\n\t              if (persist !== false) {  // defaults to true\r\n\t                  persistLevelIfPossible(level);\r\n\t              }\r\n\t              replaceLoggingMethods.call(self, level, name);\r\n\t              if (typeof console === undefinedType && level < self.levels.SILENT) {\r\n\t                  return \"No console available for logging\";\r\n\t              }\r\n\t          } else {\r\n\t              throw \"log.setLevel() called with invalid level: \" + level;\r\n\t          }\r\n\t      };\r\n\t\r\n\t      self.setDefaultLevel = function (level) {\r\n\t          if (!getPersistedLevel()) {\r\n\t              self.setLevel(level, false);\r\n\t          }\r\n\t      };\r\n\t\r\n\t      self.enableAll = function(persist) {\r\n\t          self.setLevel(self.levels.TRACE, persist);\r\n\t      };\r\n\t\r\n\t      self.disableAll = function(persist) {\r\n\t          self.setLevel(self.levels.SILENT, persist);\r\n\t      };\r\n\t\r\n\t      // Initialize with the right level\r\n\t      var initialLevel = getPersistedLevel();\r\n\t      if (initialLevel == null) {\r\n\t          initialLevel = defaultLevel == null ? \"WARN\" : defaultLevel;\r\n\t      }\r\n\t      self.setLevel(initialLevel, false);\r\n\t    }\r\n\t\r\n\t    /*\r\n\t     *\r\n\t     * Package-level API\r\n\t     *\r\n\t     */\r\n\t\r\n\t    var defaultLogger = new Logger();\r\n\t\r\n\t    var _loggersByName = {};\r\n\t    defaultLogger.getLogger = function getLogger(name) {\r\n\t        if (typeof name !== \"string\" || name === \"\") {\r\n\t          throw new TypeError(\"You must supply a name when creating a logger.\");\r\n\t        }\r\n\t\r\n\t        var logger = _loggersByName[name];\r\n\t        if (!logger) {\r\n\t          logger = _loggersByName[name] = new Logger(\r\n\t            name, defaultLogger.getLevel(), defaultLogger.methodFactory);\r\n\t        }\r\n\t        return logger;\r\n\t    };\r\n\t\r\n\t    // Grab the current global log variable in case of overwrite\r\n\t    var _log = (typeof window !== undefinedType) ? window.log : undefined;\r\n\t    defaultLogger.noConflict = function() {\r\n\t        if (typeof window !== undefinedType &&\r\n\t               window.log === defaultLogger) {\r\n\t            window.log = _log;\r\n\t        }\r\n\t\r\n\t        return defaultLogger;\r\n\t    };\r\n\t\r\n\t    return defaultLogger;\r\n\t}));\r\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/*\n\t LimitStore.put('colorado', 'rocky');\n\t [\"rocky\"]\n\t LimitStore.put('colorado', 'mountain');\n\t [\"rocky\", \"mountain\"]\n\t LimitStore.put('colorado', 'national');\n\t [\"mountain\", \"national\"]\n\t LimitStore.put('colorado', 'park');\n\t [\"national\", \"park\"]\n\t */\n\tfunction LimitStore() {}\n\t\n\tLimitStore.store = {};\n\tLimitStore.LIMIT = 2;\n\t\n\tLimitStore.put = function (key, value) {\n\t  if (LimitStore.store[key] === undefined) {\n\t    LimitStore.store[key] = [null, null];\n\t  }\n\t  LimitStore.store[key].push(value);\n\t  if (LimitStore.store[key].length == LimitStore.LIMIT + 1) {\n\t    LimitStore.store[key].shift();\n\t  }\n\t  return LimitStore.store[key];\n\t};\n\t\n\tLimitStore.get = function (key) {\n\t  if (LimitStore.store[key] === undefined) {\n\t    LimitStore.store[key] = [null, null];\n\t  }\n\t  return LimitStore.store[key];\n\t};\n\t\n\tLimitStore.getFirst = function (key) {\n\t  return LimitStore.get(key)[0];\n\t};\n\t\n\tLimitStore.getLast = function (key) {\n\t  return LimitStore.get(key)[1];\n\t};\n\t\n\tLimitStore.isEmpty = function (key) {\n\t  var values = LimitStore.get(key);\n\t  return values[0] === null && values[1] === null;\n\t};\n\t\n\texports.default = LimitStore;\n\n/***/ },\n/* 9 */,\n/* 10 */,\n/* 11 */,\n/* 12 */,\n/* 13 */,\n/* 14 */,\n/* 15 */,\n/* 16 */,\n/* 17 */,\n/* 18 */,\n/* 19 */,\n/* 20 */,\n/* 21 */,\n/* 22 */,\n/* 23 */,\n/* 24 */,\n/* 25 */,\n/* 26 */,\n/* 27 */,\n/* 28 */,\n/* 29 */,\n/* 30 */,\n/* 31 */,\n/* 32 */,\n/* 33 */,\n/* 34 */,\n/* 35 */,\n/* 36 */,\n/* 37 */,\n/* 38 */,\n/* 39 */,\n/* 40 */,\n/* 41 */,\n/* 42 */,\n/* 43 */,\n/* 44 */,\n/* 45 */,\n/* 46 */,\n/* 47 */,\n/* 48 */,\n/* 49 */,\n/* 50 */,\n/* 51 */,\n/* 52 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Environment = (function () {\n\t  function Environment() {\n\t    _classCallCheck(this, Environment);\n\t  }\n\t\n\t  _createClass(Environment, null, [{\n\t    key: \"getEnv\",\n\t    value: function getEnv() {\n\t      if (typeof window === \"undefined\") {\n\t        if (typeof WorkerLocation !== \"undefined\" && location instanceof WorkerLocation) return Environment.SERVICE_WORKER;\n\t      } else {\n\t        // If the window is the root top-most level\n\t        if (window.self === window.top) {\n\t          if (location.href.indexOf(\"initOneSignal\") > -1) return Environment.POPUP;else return Environment.HOST;\n\t        } else return Environment.IFRAME;\n\t      }\n\t    }\n\t  }, {\n\t    key: \"isServiceWorker\",\n\t    value: function isServiceWorker() {\n\t      return Environment.getEnv() === Environment.SERVICE_WORKER;\n\t    }\n\t  }, {\n\t    key: \"isHost\",\n\t    value: function isHost() {\n\t      return Environment.getEnv() === Environment.HOST;\n\t    }\n\t  }, {\n\t    key: \"isPopup\",\n\t    value: function isPopup() {\n\t      return Environment.getEnv() === Environment.POPUP;\n\t    }\n\t  }, {\n\t    key: \"isIframe\",\n\t    value: function isIframe() {\n\t      return Environment.getEnv() === Environment.IFRAME;\n\t    }\n\t  }, {\n\t    key: \"isBrowser\",\n\t    value: function isBrowser() {\n\t      return typeof window !== 'undefined';\n\t    }\n\t  }, {\n\t    key: \"SERVICE_WORKER\",\n\t    get: function get() {\n\t      return 'ServiceWorker';\n\t    }\n\t  }, {\n\t    key: \"HOST\",\n\t    get: function get() {\n\t      return \"host\";\n\t    }\n\t  }, {\n\t    key: \"POPUP\",\n\t    get: function get() {\n\t      return \"popup\";\n\t    }\n\t  }, {\n\t    key: \"IFRAME\",\n\t    get: function get() {\n\t      return \"iFrame\";\n\t    }\n\t  }]);\n\t\n\t  return Environment;\n\t})();\n\t\n\texports.default = Environment;\n\n/***/ },\n/* 53 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\t/**\n\t * Capitalizes the first letter of the string.\n\t * @returns {string} The string with the first letter capitalized.\n\t */\n\tString.prototype.capitalize = function () {\n\t  return this.charAt(0).toUpperCase() + this.slice(1);\n\t};\n\n/***/ },\n/* 54 */,\n/* 55 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _loglevel = __webpack_require__(7);\n\t\n\tvar _loglevel2 = _interopRequireDefault(_loglevel);\n\t\n\tvar _environment = __webpack_require__(52);\n\t\n\tvar _environment2 = _interopRequireDefault(_environment);\n\t\n\tvar _utils = __webpack_require__(5);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar SILENT_EVENTS = ['onesignal.bell.hovering', 'onesignal.bell.hovered', 'onesignal.bell.launcher.button.click', 'onesignal.bell.launcher.click', 'onesignal.bell.animatedelement.hiding', 'onesignal.bell.animatedelement.hidden', 'onesignal.bell.animatedelement.showing', 'onesignal.bell.animatedelement.shown', 'onesignal.bell.activeanimatedelement.activating', 'onesignal.bell.activeanimatedelement.active', 'onesignal.bell.activeanimatedelement.inactivating', 'onesignal.bell.activeanimatedelement.inactive',\n\t//'onesignal.db.retrieved',\n\t'onesignal.db.set'];\n\t\n\tvar Event = (function () {\n\t  function Event() {\n\t    _classCallCheck(this, Event);\n\t  }\n\t\n\t  _createClass(Event, null, [{\n\t    key: 'trigger',\n\t    value: function trigger(eventName, data) {\n\t      if (!eventName) {\n\t        _loglevel2.default.trace();\n\t      }\n\t      if (SILENT_EVENTS.indexOf(eventName) == -1) {\n\t        if (!_environment2.default.isBrowser()) {\n\t          _loglevel2.default.debug('%c' + eventName + ':', (0, _utils.getConsoleStyle)('event'), data, '(not triggered in a ServiceWorker environment)');\n\t          return;\n\t        } else {\n\t          var displayData = data;\n\t          if (displayData || displayData === false) {\n\t            _loglevel2.default.debug('» %c' + eventName + ':', (0, _utils.getConsoleStyle)('event'), displayData);\n\t          } else {\n\t            _loglevel2.default.debug('» %c' + eventName, (0, _utils.getConsoleStyle)('event'));\n\t          }\n\t        }\n\t      }\n\t      if (_environment2.default.isBrowser()) {\n\t        var event = new CustomEvent(eventName, {\n\t          bubbles: true, cancelable: true, detail: data\n\t        });\n\t        window.dispatchEvent(event);\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return Event;\n\t})();\n\t\n\texports.default = Event;\n\n/***/ },\n/* 56 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _utils = __webpack_require__(5);\n\t\n\tvar _environment = __webpack_require__(52);\n\t\n\tvar _environment2 = _interopRequireDefault(_environment);\n\t\n\tvar _limitStore = __webpack_require__(8);\n\t\n\tvar _limitStore2 = _interopRequireDefault(_limitStore);\n\t\n\tvar _loglevel = __webpack_require__(7);\n\t\n\tvar _loglevel2 = _interopRequireDefault(_loglevel);\n\t\n\tvar _events = __webpack_require__(55);\n\t\n\tvar _events2 = _interopRequireDefault(_events);\n\t\n\tvar _bowser = __webpack_require__(57);\n\t\n\tvar _bowser2 = _interopRequireDefault(_bowser);\n\t\n\tvar _vars = __webpack_require__(4);\n\t\n\tvar _AnimatedElement = __webpack_require__(58);\n\t\n\tvar _AnimatedElement2 = _interopRequireDefault(_AnimatedElement);\n\t\n\tvar _ActiveAnimatedElement = __webpack_require__(59);\n\t\n\tvar _ActiveAnimatedElement2 = _interopRequireDefault(_ActiveAnimatedElement);\n\t\n\tvar _Launcher = __webpack_require__(60);\n\t\n\tvar _Launcher2 = _interopRequireDefault(_Launcher);\n\t\n\tvar _Badge = __webpack_require__(61);\n\t\n\tvar _Badge2 = _interopRequireDefault(_Badge);\n\t\n\tvar _Button = __webpack_require__(62);\n\t\n\tvar _Button2 = _interopRequireDefault(_Button);\n\t\n\tvar _Dialog = __webpack_require__(63);\n\t\n\tvar _Dialog2 = _interopRequireDefault(_Dialog);\n\t\n\tvar _Message = __webpack_require__(64);\n\t\n\tvar _Message2 = _interopRequireDefault(_Message);\n\t\n\t__webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"./bell.scss\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar logoSvg = __webpack_require__(66);\n\t\n\t/*\n\t {\n\t size = ['small', 'medium', 'large'],\n\t position = 'bottom-left', 'bottom-right'],\n\t offset = '15px 15px',\n\t theme = ['red-white', 'white-red'],\n\t inactiveOpacity: 0.75,\n\t showLauncherAfter: 1000,\n\t messages: {\n\t 'unsubscribed': 'Subscribe to notifications',\n\t 'subscribed': 'You're subscribed to notifications'\n\t }\n\t }\n\t */\n\t\n\tvar Bell = (function () {\n\t  _createClass(Bell, null, [{\n\t    key: 'EVENTS',\n\t    get: function get() {\n\t      return {\n\t        STATE_CHANGED: 'onesignal.bell.state.changed',\n\t        LAUNCHER_CLICK: 'onesignal.bell.launcher.click',\n\t        BELL_CLICK: 'onesignal.bell.launcher.button.click',\n\t        SUBSCRIBE_CLICK: 'onesignal.bell.launcher.dialog.button.subscribe.click',\n\t        UNSUBSCRIBE_CLICK: 'onesignal.bell.launcher.dialog.button.unsubscribe.click',\n\t        HOVERING: 'onesignal.bell.hovering',\n\t        HOVERED: 'onesignal.bell.hovered'\n\t      };\n\t    }\n\t  }, {\n\t    key: 'STATES',\n\t    get: function get() {\n\t      return {\n\t        UNINITIALIZED: 'uninitialized',\n\t        SUBSCRIBED: 'subscribed',\n\t        UNSUBSCRIBED: 'unsubscribed',\n\t        BLOCKED: 'blocked'\n\t      };\n\t    }\n\t  }]);\n\t\n\t  function Bell() {\n\t    var _this = this;\n\t\n\t    var _ref = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t    var _ref$size = _ref.size;\n\t    var size = _ref$size === undefined ? 'small' : _ref$size;\n\t    var _ref$position = _ref.position;\n\t    var position = _ref$position === undefined ? 'bottom-left' : _ref$position;\n\t    var _ref$theme = _ref.theme;\n\t    var theme = _ref$theme === undefined ? 'default' : _ref$theme;\n\t    var _ref$showLauncherAfte = _ref.showLauncherAfter;\n\t    var showLauncherAfter = _ref$showLauncherAfte === undefined ? 10 : _ref$showLauncherAfte;\n\t    var _ref$showBadgeAfter = _ref.showBadgeAfter;\n\t    var showBadgeAfter = _ref$showBadgeAfter === undefined ? 300 : _ref$showBadgeAfter;\n\t    var _ref$text = _ref.text;\n\t    var text = _ref$text === undefined ? {\n\t      'tip.state.unsubscribed': 'Subscribe to notifications',\n\t      'tip.state.subscribed': \"You're subscribed to notifications\",\n\t      'tip.state.blocked': \"You've blocked notifications\",\n\t      'tip.action.subscribed': \"Thanks for subscribing!\",\n\t      'tip.action.unsubscribed': \"You won't receive notifications again\",\n\t      'dialog.main.title': 'Manage Site Notifications',\n\t      'dialog.main.button.subscribe': 'SUBSCRIBE',\n\t      'dialog.main.button.unsubscribe': 'UNSUBSCRIBE',\n\t      'dialog.blocked.title': 'Unblock Notifications',\n\t      'dialog.blocked.message': \"Follow these instructions to allow notifications:\"\n\t    } : _ref$text;\n\t    var _ref$prenotify = _ref.prenotify;\n\t    var prenotify = _ref$prenotify === undefined ? true : _ref$prenotify;\n\t\n\t    _classCallCheck(this, Bell);\n\t\n\t    this.options = {\n\t      size: size,\n\t      position: position,\n\t      theme: theme,\n\t      showLauncherAfter: showLauncherAfter,\n\t      showBadgeAfter: showBadgeAfter,\n\t      text: text,\n\t      prenotify: prenotify\n\t    };\n\t    if (['small', 'medium', 'large'].indexOf(this.options.size) < 0) throw new Error('Invalid size ' + this.options.size + ' for bell. Choose among \\'small\\', \\'medium\\', or \\'large\\'.');\n\t    if (['bottom-left', 'bottom-right'].indexOf(this.options.position) < 0) throw new Error('Invalid position ' + this.options.position + ' for bell. Choose either \\'bottom-left\\', or \\'bottom-right\\'.');\n\t    if (['default', 'inverse'].indexOf(this.options.theme) < 0) throw new Error('Invalid theme ' + this.options.theme + ' for bell. Choose either \\'default\\', or \\'inverse\\'.');\n\t    if (this.options.showLauncherAfter < 0) throw new Error('Invalid delay duration of ' + this.options.showLauncherAfter + ' for showing the bell. Choose a value above 0.');\n\t    if (this.options.showBadgeAfter < 0) throw new Error('Invalid delay duration of ' + this.options.showBadgeAfter + ' for showing the bell\\'s badge. Choose a value above 0.');\n\t    this.size = this.options.size;\n\t    this.position = this.options.position;\n\t    this.text = this.options.text;\n\t    this.messages = {};\n\t    this.messages.queued = [];\n\t    if (!this.text['tip.state.unsubscribed']) this.text['tip.state.unsubscribed'] = 'Subscribe to notifications';\n\t    if (!this.text['tip.state.subscribed']) this.text['tip.state.subscribed'] = \"You're subscribed to notifications\";\n\t    if (!this.text['tip.state.blocked']) this.text['tip.state.blocked'] = \"You've blocked notifications\";\n\t    if (!this.text['tip.action.subscribed']) this.text['tip.action.subscribed'] = \"Thanks for subscribing!\";\n\t    if (!this.text['tip.action.unsubscribed']) this.text['tip.action.unsubscribed'] = \"You won't receive notifications again\";\n\t    if (!this.text['dialog.main.title']) this.text['dialog.main.title'] = 'Manage Site Notifications';\n\t    if (!this.text['dialog.main.button.subscribe']) this.text['dialog.main.button.subscribe'] = 'SUBSCRIBE';\n\t    if (!this.text['dialog.main.button.unsubscribe']) this.text['dialog.main.button.unsubscribe'] = 'UNSUBSCRIBE';\n\t    if (!this.text['dialog.blocked.title']) this.text['dialog.blocked.title'] = 'Unblock Notifications';\n\t    this.messages[Bell.STATES.UNSUBSCRIBED] = this.text['tip.state.unsubscribed'];\n\t    this.messages[Bell.STATES.SUBSCRIBED] = this.text['tip.state.subscribed'];\n\t    this.messages[Bell.STATES.BLOCKED] = this.text['tip.state.blocked'];\n\t    this.state = Bell.STATES.UNINITIALIZED;\n\t\n\t    // Install event hooks\n\t    window.addEventListener('focus', function (event) {\n\t      // Checks if permission changed everytime a user focuses on the page, since a user has to click out of and back on the page to check permissions\n\t      OneSignal._checkTrigger_nativePermissionChanged();\n\t    });\n\t\n\t    window.addEventListener(Bell.EVENTS.LAUNCHER_CLICK, function (event) {\n\t      _this.launcher.activateIfInactive().then(function () {\n\t        return _this.message.hide();\n\t      }).then(function () {\n\t        if (_this.unsubscribed) {\n\t          var setSubscriptionState = _limitStore2.default.getLast('setsubscription.value');\n\t          if (setSubscriptionState === false) {\n\t            // The user manually called setSubscription(false), but the user is actually subscribed\n\t            _this.showDialogProcedure();\n\t          } else {\n\t            // The user is actually subscribed, register him for notifications\n\t            OneSignal.registerForPushNotifications();\n\t          }\n\t        } else if (_this.subscribed) {\n\t          _this.showDialogProcedure();\n\t        } else if (_this.blocked) {\n\t          _this.showDialogProcedure();\n\t        }\n\t      }).catch(function (e) {\n\t        return _loglevel2.default.error(e);\n\t      });\n\t    });\n\t\n\t    window.addEventListener(Bell.EVENTS.SUBSCRIBE_CLICK, function () {\n\t      _Dialog2.default.subscribeButton.disabled = true;\n\t      OneSignal.setSubscription(true);\n\t    });\n\t\n\t    window.addEventListener(Bell.EVENTS.UNSUBSCRIBE_CLICK, function () {\n\t      _this.launcher.activateIfInactive();\n\t\n\t      // If there's already a message being force shown, do not override\n\t      if (_this.message.shown || _this.dialog.shown) {\n\t        return;\n\t      }\n\t\n\t      Promise.resolve(function () {\n\t        if (_this.messages.queued.length > 0) {\n\t          return _this.message.dequeue().then(function (msg) {\n\t            return _this.message.content = msg;\n\t          });\n\t        } else {\n\t          return Promise.resolve(function () {\n\t            return _this.message.content = _this.messages[_this.state];\n\t          });\n\t        }\n\t      }).then(function () {\n\t        return _this.message.show();\n\t      });\n\t    });\n\t\n\t    window.addEventListener(Bell.EVENTS.HOVERING, function () {\n\t      _this.launcher.activateIfInactive();\n\t\n\t      // If there's already a message being force shown, do not override\n\t      if (_this.message.shown || _this.dialog.shown) {\n\t        return;\n\t      }\n\t\n\t      Promise.resolve(function () {\n\t        if (_this.messages.queued.length > 0) {\n\t          return _this.message.dequeue().then(function (msg) {\n\t            return _this.message.content = msg;\n\t          });\n\t        } else {\n\t          return Promise.resolve(function () {\n\t            return _this.message.content = _this.messages[_this.state];\n\t          });\n\t        }\n\t      }).then(function () {\n\t        return _this.message.show();\n\t      });\n\t    });\n\t\n\t    window.addEventListener(Bell.EVENTS.HOVERED, function () {\n\t      if (_this.message.shown) {\n\t        _this.message.hide().then(function () {\n\t          _this.message.content = _this.messages[_this.state];\n\t          if (_this.launcher.wasInactive && !_this.dialog.shown) {\n\t            _this.launcher.inactivate();\n\t            _this.launcher.wasInactive = null;\n\t          }\n\t        });\n\t      }\n\t    });\n\t\n\t    window.addEventListener(OneSignal.EVENTS.SUBSCRIPTION_CHANGED, function (e) {\n\t      var isSubscribed = e.detail;\n\t      _this.setState(isSubscribed ? Bell.STATES.SUBSCRIBED : Bell.STATES.UNSUBSCRIBED);\n\t    });\n\t\n\t    window.addEventListener(OneSignal.EVENTS.NATIVE_PROMPT_PERMISSIONCHANGED, function (from, to) {\n\t      _this.updateState();\n\t    });\n\t\n\t    window.addEventListener(OneSignal.EVENTS.WELCOME_NOTIFICATION_SENT, function (e) {\n\t      _this.message.display(_this.text['tip.action.subscribed'], 2500).then(function () {\n\t        _this.launcher.inactivate();\n\t      }).catch(function (e) {\n\t        _loglevel2.default.error(e);\n\t      });\n\t    });\n\t\n\t    this.updateState();\n\t  }\n\t\n\t  _createClass(Bell, [{\n\t    key: 'showDialogProcedure',\n\t    value: function showDialogProcedure() {\n\t      var _this2 = this;\n\t\n\t      if (!this.dialog.shown) {\n\t        this.dialog.show().then(function (e) {\n\t          (0, _utils.once)(document, 'click', function (e, destroyEventListener) {\n\t            var wasDialogClicked = _this2.dialog.element.contains(e.target);\n\t            if (wasDialogClicked) {} else {\n\t              destroyEventListener();\n\t              _this2.dialog.hide().then(function (e) {\n\t                _this2.launcher.inactivateIfWasInactive();\n\t              }).catch(function (e) {\n\t                _loglevel2.default.error(e);\n\t              });\n\t            }\n\t          }, true);\n\t        }).catch(function (e) {\n\t          _loglevel2.default.error(e);\n\t        });\n\t      }\n\t    }\n\t  }, {\n\t    key: 'create',\n\t    value: function create() {\n\t      var _this3 = this;\n\t\n\t      if (!(0, _utils.isPushNotificationsSupported)()) return;\n\t\n\t      // Remove any existing bell\n\t      if (this.container) {\n\t        (0, _utils.removeDomElement)('onesignal-bell-container');\n\t      }\n\t\n\t      window.addDomElement = _utils.addDomElement;\n\t      // Insert the bell container\n\t      (0, _utils.addDomElement)('body', 'beforeend', '<div id=\"onesignal-bell-container\" class=\"onesignal-bell-container onesignal-reset\"></div>');\n\t      // Insert the bell launcher\n\t      (0, _utils.addDomElement)(this.container, 'beforeend', '<div id=\"onesignal-bell-launcher\" class=\"onesignal-bell-launcher\"></div>');\n\t      // Insert the bell launcher button\n\t      (0, _utils.addDomElement)(this.launcher.selector, 'beforeend', '<div class=\"onesignal-bell-launcher-button\"></div>');\n\t      // Insert the bell launcher badge\n\t      (0, _utils.addDomElement)(this.launcher.selector, 'beforeend', '<div class=\"onesignal-bell-launcher-badge\"></div>');\n\t      // Insert the bell launcher message\n\t      (0, _utils.addDomElement)(this.launcher.selector, 'beforeend', '<div class=\"onesignal-bell-launcher-message\"></div>');\n\t      (0, _utils.addDomElement)(this.message.selector, 'beforeend', '<div class=\"onesignal-bell-launcher-message-body\"></div>');\n\t      // Insert the bell launcher dialog\n\t      (0, _utils.addDomElement)(this.launcher.selector, 'beforeend', '<div class=\"onesignal-bell-launcher-dialog\"></div>');\n\t      (0, _utils.addDomElement)(this.dialog.selector, 'beforeend', '<div class=\"onesignal-bell-launcher-dialog-body\"></div>');\n\t\n\t      // Install events\n\t\n\t      // Add visual elements\n\t      (0, _utils.addDomElement)(this.button.selector, 'beforeEnd', logoSvg);\n\t\n\t      // Add default classes\n\t      this.launcher.resize(this.options.size).then(function () {\n\t        if (_this3.options.position === 'bottom-left') {\n\t          (0, _utils.addCssClass)(_this3.container, 'onesignal-bell-container-bottom-left');\n\t          (0, _utils.addCssClass)(_this3.launcher.selector, 'onesignal-bell-launcher-bottom-left');\n\t        } else if (_this3.options.position === 'bottom-right') {\n\t          (0, _utils.addCssClass)(_this3.container, 'onesignal-bell-container-bottom-right');\n\t          (0, _utils.addCssClass)(_this3.launcher.selector, 'onesignal-bell-launcher-bottom-right');\n\t        } else {\n\t          throw new Error('Invalid OneSignal bell position ' + _this3.options.position);\n\t        }\n\t\n\t        if (_this3.options.theme === 'default') {\n\t          (0, _utils.addCssClass)(_this3.launcher.selector, 'onesignal-bell-launcher-theme-default');\n\t        } else if (_this3.options.theme === 'inverse') {\n\t          (0, _utils.addCssClass)(_this3.launcher.selector, 'onesignal-bell-launcher-theme-inverse');\n\t        } else {\n\t          throw new Error('Invalid OneSignal bell theme ' + _this3.options.theme);\n\t        }\n\t\n\t        //this.launcher.inactivate()\n\t        //  .then((result) => {\n\t        //    console.info('Promise resolved yay! Result: ', result);\n\t        //  })\n\t\n\t        OneSignal.isPushNotificationsEnabled(function (pushEnabled) {\n\t          (pushEnabled ? _this3.launcher.inactivate() : (0, _utils.nothing)()).then(function () {\n\t            return (0, _utils.delay)(_this3.options.showLauncherAfter);\n\t          }).then(function () {\n\t            return _this3.launcher.show();\n\t          }).then(function () {\n\t            return (0, _utils.delay)(_this3.options.showBadgeAfter);\n\t          }).then(function () {\n\t            if (_this3.options.prenotify && !pushEnabled && OneSignal._isNewVisitor) {\n\t              return _this3.message.enqueue('Click to subscribe to notifications').then(function () {\n\t                return _this3.badge.show();\n\t              });\n\t            } else return (0, _utils.nothing)();\n\t          }).then(function () {\n\t            return _this3.initialized = true;\n\t          }).catch(function (e) {\n\t            return _loglevel2.default.error(e);\n\t          });\n\t        });\n\t      });\n\t    }\n\t  }, {\n\t    key: '_getCurrentSetSubscriptionState',\n\t    value: function _getCurrentSetSubscriptionState() {\n\t      var setSubscriptionState = _limitStore2.default.get('setsubscription.value');\n\t      var currentSetSubscription = setSubscriptionState[setSubscriptionState.length - 1];\n\t      return currentSetSubscription;\n\t    }\n\t\n\t    /**\n\t     * Updates the current state to the correct new current state. Returns a promise.\n\t     */\n\t\n\t  }, {\n\t    key: 'updateState',\n\t    value: function updateState() {\n\t      var _this4 = this;\n\t\n\t      OneSignal.isPushNotificationsEnabled(function (isEnabled) {\n\t        _this4.setState(isEnabled ? Bell.STATES.SUBSCRIBED : Bell.STATES.UNSUBSCRIBED);\n\t        if (_limitStore2.default.getLast('notification.permission') === 'denied') {\n\t          _this4.setState(Bell.STATES.BLOCKED);\n\t        }\n\t      });\n\t    }\n\t\n\t    /**\n\t     * Updates the current state to the specified new state.\n\t     * @param newState One of ['subscribed', 'unsubscribed'].\n\t     */\n\t\n\t  }, {\n\t    key: 'setState',\n\t    value: function setState(newState) {\n\t      var _this5 = this;\n\t\n\t      console.trace('%cCalled setState().', (0, _utils.getConsoleStyle)('bold'));\n\t      var lastState = this.state;\n\t      this.state = newState;\n\t      if (lastState !== newState) {\n\t        _events2.default.trigger(Bell.EVENTS.STATE_CHANGED, { from: lastState, to: newState });\n\t        // Update anything that should be changed here in the new state\n\t      }\n\t\n\t      // Update anything that should be reset to the same state\n\t      // Unless a display message is being set\n\t      this.message.waitUntilHidden().then(function () {\n\t        return _this5.message.content = _this5.messages[newState];\n\t      });\n\t    }\n\t  }, {\n\t    key: 'container',\n\t    get: function get() {\n\t      return document.querySelector('#onesignal-bell-container');\n\t    }\n\t  }, {\n\t    key: 'launcher',\n\t    get: function get() {\n\t      if (!this._launcher) this._launcher = new _Launcher2.default(this);\n\t      return this._launcher;\n\t    }\n\t  }, {\n\t    key: 'button',\n\t    get: function get() {\n\t      if (!this._button) this._button = new _Button2.default(this);\n\t      return this._button;\n\t    }\n\t  }, {\n\t    key: 'badge',\n\t    get: function get() {\n\t      if (!this._badge) this._badge = new _Badge2.default(this);\n\t      return this._badge;\n\t    }\n\t  }, {\n\t    key: 'message',\n\t    get: function get() {\n\t      if (!this._message) this._message = new _Message2.default(this);\n\t      return this._message;\n\t    }\n\t  }, {\n\t    key: 'dialog',\n\t    get: function get() {\n\t      if (!this._dialog) this._dialog = new _Dialog2.default(this);\n\t      return this._dialog;\n\t    }\n\t  }, {\n\t    key: 'subscribed',\n\t    get: function get() {\n\t      return this.state === Bell.STATES.SUBSCRIBED;\n\t    }\n\t  }, {\n\t    key: 'unsubscribed',\n\t    get: function get() {\n\t      return this.state === Bell.STATES.UNSUBSCRIBED;\n\t    }\n\t  }, {\n\t    key: 'blocked',\n\t    get: function get() {\n\t      return this.state === Bell.STATES.BLOCKED;\n\t    }\n\t  }]);\n\t\n\t  return Bell;\n\t})();\n\t\n\texports.default = Bell;\n\n/***/ },\n/* 57 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\n\t  * Bowser - a browser detector\n\t  * https://github.com/ded/bowser\n\t  * MIT License | (c) Dustin Diaz 2015\n\t  */\n\t\n\t!function (name, definition) {\n\t  if (typeof module != 'undefined' && module.exports) module.exports = definition()\n\t  else if (true) !(__WEBPACK_AMD_DEFINE_FACTORY__ = (definition), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))\n\t  else this[name] = definition()\n\t}('bowser', function () {\n\t  /**\n\t    * See useragents.js for examples of navigator.userAgent\n\t    */\n\t\n\t  var t = true\n\t\n\t  function detect(ua) {\n\t\n\t    function getFirstMatch(regex) {\n\t      var match = ua.match(regex);\n\t      return (match && match.length > 1 && match[1]) || '';\n\t    }\n\t\n\t    function getSecondMatch(regex) {\n\t      var match = ua.match(regex);\n\t      return (match && match.length > 1 && match[2]) || '';\n\t    }\n\t\n\t    var iosdevice = getFirstMatch(/(ipod|iphone|ipad)/i).toLowerCase()\n\t      , likeAndroid = /like android/i.test(ua)\n\t      , android = !likeAndroid && /android/i.test(ua)\n\t      , chromeBook = /CrOS/.test(ua)\n\t      , edgeVersion = getFirstMatch(/edge\\/(\\d+(\\.\\d+)?)/i)\n\t      , versionIdentifier = getFirstMatch(/version\\/(\\d+(\\.\\d+)?)/i)\n\t      , tablet = /tablet/i.test(ua)\n\t      , mobile = !tablet && /[^-]mobi/i.test(ua)\n\t      , result\n\t\n\t    if (/opera|opr/i.test(ua)) {\n\t      result = {\n\t        name: 'Opera'\n\t      , opera: t\n\t      , version: versionIdentifier || getFirstMatch(/(?:opera|opr)[\\s\\/](\\d+(\\.\\d+)?)/i)\n\t      }\n\t    }\n\t    else if (/yabrowser/i.test(ua)) {\n\t      result = {\n\t        name: 'Yandex Browser'\n\t      , yandexbrowser: t\n\t      , version: versionIdentifier || getFirstMatch(/(?:yabrowser)[\\s\\/](\\d+(\\.\\d+)?)/i)\n\t      }\n\t    }\n\t    else if (/windows phone/i.test(ua)) {\n\t      result = {\n\t        name: 'Windows Phone'\n\t      , windowsphone: t\n\t      }\n\t      if (edgeVersion) {\n\t        result.msedge = t\n\t        result.version = edgeVersion\n\t      }\n\t      else {\n\t        result.msie = t\n\t        result.version = getFirstMatch(/iemobile\\/(\\d+(\\.\\d+)?)/i)\n\t      }\n\t    }\n\t    else if (/msie|trident/i.test(ua)) {\n\t      result = {\n\t        name: 'Internet Explorer'\n\t      , msie: t\n\t      , version: getFirstMatch(/(?:msie |rv:)(\\d+(\\.\\d+)?)/i)\n\t      }\n\t    } else if (chromeBook) {\n\t      result = {\n\t        name: 'Chrome'\n\t      , chromeBook: t\n\t      , chrome: t\n\t      , version: getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i)\n\t      }\n\t    } else if (/chrome.+? edge/i.test(ua)) {\n\t      result = {\n\t        name: 'Microsoft Edge'\n\t      , msedge: t\n\t      , version: edgeVersion\n\t      }\n\t    }\n\t    else if (/chrome|crios|crmo/i.test(ua)) {\n\t      result = {\n\t        name: 'Chrome'\n\t      , chrome: t\n\t      , version: getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i)\n\t      }\n\t    }\n\t    else if (iosdevice) {\n\t      result = {\n\t        name : iosdevice == 'iphone' ? 'iPhone' : iosdevice == 'ipad' ? 'iPad' : 'iPod'\n\t      }\n\t      // WTF: version is not part of user agent in web apps\n\t      if (versionIdentifier) {\n\t        result.version = versionIdentifier\n\t      }\n\t    }\n\t    else if (/sailfish/i.test(ua)) {\n\t      result = {\n\t        name: 'Sailfish'\n\t      , sailfish: t\n\t      , version: getFirstMatch(/sailfish\\s?browser\\/(\\d+(\\.\\d+)?)/i)\n\t      }\n\t    }\n\t    else if (/seamonkey\\//i.test(ua)) {\n\t      result = {\n\t        name: 'SeaMonkey'\n\t      , seamonkey: t\n\t      , version: getFirstMatch(/seamonkey\\/(\\d+(\\.\\d+)?)/i)\n\t      }\n\t    }\n\t    else if (/firefox|iceweasel/i.test(ua)) {\n\t      result = {\n\t        name: 'Firefox'\n\t      , firefox: t\n\t      , version: getFirstMatch(/(?:firefox|iceweasel)[ \\/](\\d+(\\.\\d+)?)/i)\n\t      }\n\t      if (/\\((mobile|tablet);[^\\)]*rv:[\\d\\.]+\\)/i.test(ua)) {\n\t        result.firefoxos = t\n\t      }\n\t    }\n\t    else if (/silk/i.test(ua)) {\n\t      result =  {\n\t        name: 'Amazon Silk'\n\t      , silk: t\n\t      , version : getFirstMatch(/silk\\/(\\d+(\\.\\d+)?)/i)\n\t      }\n\t    }\n\t    else if (android) {\n\t      result = {\n\t        name: 'Android'\n\t      , version: versionIdentifier\n\t      }\n\t    }\n\t    else if (/phantom/i.test(ua)) {\n\t      result = {\n\t        name: 'PhantomJS'\n\t      , phantom: t\n\t      , version: getFirstMatch(/phantomjs\\/(\\d+(\\.\\d+)?)/i)\n\t      }\n\t    }\n\t    else if (/blackberry|\\bbb\\d+/i.test(ua) || /rim\\stablet/i.test(ua)) {\n\t      result = {\n\t        name: 'BlackBerry'\n\t      , blackberry: t\n\t      , version: versionIdentifier || getFirstMatch(/blackberry[\\d]+\\/(\\d+(\\.\\d+)?)/i)\n\t      }\n\t    }\n\t    else if (/(web|hpw)os/i.test(ua)) {\n\t      result = {\n\t        name: 'WebOS'\n\t      , webos: t\n\t      , version: versionIdentifier || getFirstMatch(/w(?:eb)?osbrowser\\/(\\d+(\\.\\d+)?)/i)\n\t      };\n\t      /touchpad\\//i.test(ua) && (result.touchpad = t)\n\t    }\n\t    else if (/bada/i.test(ua)) {\n\t      result = {\n\t        name: 'Bada'\n\t      , bada: t\n\t      , version: getFirstMatch(/dolfin\\/(\\d+(\\.\\d+)?)/i)\n\t      };\n\t    }\n\t    else if (/tizen/i.test(ua)) {\n\t      result = {\n\t        name: 'Tizen'\n\t      , tizen: t\n\t      , version: getFirstMatch(/(?:tizen\\s?)?browser\\/(\\d+(\\.\\d+)?)/i) || versionIdentifier\n\t      };\n\t    }\n\t    else if (/safari/i.test(ua)) {\n\t      result = {\n\t        name: 'Safari'\n\t      , safari: t\n\t      , version: versionIdentifier\n\t      }\n\t    }\n\t    else {\n\t      result = {\n\t        name: getFirstMatch(/^(.*)\\/(.*) /),\n\t        version: getSecondMatch(/^(.*)\\/(.*) /)\n\t     };\n\t   }\n\t\n\t    // set webkit or gecko flag for browsers based on these engines\n\t    if (!result.msedge && /(apple)?webkit/i.test(ua)) {\n\t      result.name = result.name || \"Webkit\"\n\t      result.webkit = t\n\t      if (!result.version && versionIdentifier) {\n\t        result.version = versionIdentifier\n\t      }\n\t    } else if (!result.opera && /gecko\\//i.test(ua)) {\n\t      result.name = result.name || \"Gecko\"\n\t      result.gecko = t\n\t      result.version = result.version || getFirstMatch(/gecko\\/(\\d+(\\.\\d+)?)/i)\n\t    }\n\t\n\t    // set OS flags for platforms that have multiple browsers\n\t    if (!result.msedge && (android || result.silk)) {\n\t      result.android = t\n\t    } else if (iosdevice) {\n\t      result[iosdevice] = t\n\t      result.ios = t\n\t    }\n\t\n\t    // OS version extraction\n\t    var osVersion = '';\n\t    if (result.windowsphone) {\n\t      osVersion = getFirstMatch(/windows phone (?:os)?\\s?(\\d+(\\.\\d+)*)/i);\n\t    } else if (iosdevice) {\n\t      osVersion = getFirstMatch(/os (\\d+([_\\s]\\d+)*) like mac os x/i);\n\t      osVersion = osVersion.replace(/[_\\s]/g, '.');\n\t    } else if (android) {\n\t      osVersion = getFirstMatch(/android[ \\/-](\\d+(\\.\\d+)*)/i);\n\t    } else if (result.webos) {\n\t      osVersion = getFirstMatch(/(?:web|hpw)os\\/(\\d+(\\.\\d+)*)/i);\n\t    } else if (result.blackberry) {\n\t      osVersion = getFirstMatch(/rim\\stablet\\sos\\s(\\d+(\\.\\d+)*)/i);\n\t    } else if (result.bada) {\n\t      osVersion = getFirstMatch(/bada\\/(\\d+(\\.\\d+)*)/i);\n\t    } else if (result.tizen) {\n\t      osVersion = getFirstMatch(/tizen[\\/\\s](\\d+(\\.\\d+)*)/i);\n\t    }\n\t    if (osVersion) {\n\t      result.osversion = osVersion;\n\t    }\n\t\n\t    // device type extraction\n\t    var osMajorVersion = osVersion.split('.')[0];\n\t    if (tablet || iosdevice == 'ipad' || (android && (osMajorVersion == 3 || (osMajorVersion == 4 && !mobile))) || result.silk) {\n\t      result.tablet = t\n\t    } else if (mobile || iosdevice == 'iphone' || iosdevice == 'ipod' || android || result.blackberry || result.webos || result.bada) {\n\t      result.mobile = t\n\t    }\n\t\n\t    // Graded Browser Support\n\t    // http://developer.yahoo.com/yui/articles/gbs\n\t    if (result.msedge ||\n\t        (result.msie && result.version >= 10) ||\n\t        (result.yandexbrowser && result.version >= 15) ||\n\t        (result.chrome && result.version >= 20) ||\n\t        (result.firefox && result.version >= 20.0) ||\n\t        (result.safari && result.version >= 6) ||\n\t        (result.opera && result.version >= 10.0) ||\n\t        (result.ios && result.osversion && result.osversion.split(\".\")[0] >= 6) ||\n\t        (result.blackberry && result.version >= 10.1)\n\t        ) {\n\t      result.a = t;\n\t    }\n\t    else if ((result.msie && result.version < 10) ||\n\t        (result.chrome && result.version < 20) ||\n\t        (result.firefox && result.version < 20.0) ||\n\t        (result.safari && result.version < 6) ||\n\t        (result.opera && result.version < 10.0) ||\n\t        (result.ios && result.osversion && result.osversion.split(\".\")[0] < 6)\n\t        ) {\n\t      result.c = t\n\t    } else result.x = t\n\t\n\t    return result\n\t  }\n\t\n\t  var bowser = detect(typeof navigator !== 'undefined' ? navigator.userAgent : '')\n\t\n\t  bowser.test = function (browserList) {\n\t    for (var i = 0; i < browserList.length; ++i) {\n\t      var browserItem = browserList[i];\n\t      if (typeof browserItem=== 'string') {\n\t        if (browserItem in bowser) {\n\t          return true;\n\t        }\n\t      }\n\t    }\n\t    return false;\n\t  }\n\t\n\t  /*\n\t   * Set our detect method to the main bowser object so we can\n\t   * reuse it to test other user agents.\n\t   * This is needed to implement future tests.\n\t   */\n\t  bowser._detect = detect;\n\t\n\t  return bowser\n\t});\n\n\n/***/ },\n/* 58 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _utils = __webpack_require__(5);\n\t\n\tvar _loglevel = __webpack_require__(7);\n\t\n\tvar _loglevel2 = _interopRequireDefault(_loglevel);\n\t\n\tvar _events = __webpack_require__(55);\n\t\n\tvar _events2 = _interopRequireDefault(_events);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar AnimatedElement = (function () {\n\t\n\t  /**\n\t   * Abstracts common DOM operations like hiding and showing transitionable elements into chainable promises.\n\t   * @param selector {string} The CSS selector of the element.\n\t   * @param showClass {string} The CSS class name to add to show the element.\n\t   * @param hideClass {string} The CSS class name to remove to hide the element.\n\t   * @param state {string} The current state of the element, defaults to 'shown'.\n\t   * @param targetTransitionEvent {string} A single property (e.g. 'transform' or 'opacity') to look for on transitionend of show() and hide() to know the transition is complete.\n\t   * @param nestedContentSelector {string} The CSS selector targeting the nested element within the current element. This nested element will be used for content getters and setters.\n\t   */\n\t\n\t  function AnimatedElement(selector, showClass, hideClass) {\n\t    var state = arguments.length <= 3 || arguments[3] === undefined ? 'shown' : arguments[3];\n\t    var targetTransitionEvent = arguments.length <= 4 || arguments[4] === undefined ? 'opacity' : arguments[4];\n\t    var nestedContentSelector = arguments.length <= 5 || arguments[5] === undefined ? null : arguments[5];\n\t\n\t    _classCallCheck(this, AnimatedElement);\n\t\n\t    this.selector = selector;\n\t    this.showClass = showClass;\n\t    this.hideClass = hideClass;\n\t    this.state = state;\n\t    this.targetTransitionEvent = targetTransitionEvent;\n\t    this.nestedContentSelector = nestedContentSelector;\n\t  }\n\t\n\t  /**\n\t   * Asynchronously shows an element by applying its {showClass} CSS class.\n\t   * @returns {Promise} Returns a promise that is resolved with this element when it has completed its transition.\n\t   */\n\t\n\t  _createClass(AnimatedElement, [{\n\t    key: 'show',\n\t    value: function show() {\n\t      var _this = this;\n\t\n\t      if (!this.hidden) {\n\t        return Promise.resolve(this);\n\t      } else return new Promise(function (resolve) {\n\t        _this.state = 'showing';\n\t        _events2.default.trigger(AnimatedElement.EVENTS.SHOWING, _this);\n\t        if (_this.hideClass) (0, _utils.removeCssClass)(_this.element, _this.hideClass);\n\t        if (_this.showClass) (0, _utils.addCssClass)(_this.element, _this.showClass);\n\t        (0, _utils.once)(_this.element, 'transitionend', function (event, destroyListenerFn) {\n\t          if (event.target === _this.element && event.propertyName === _this.targetTransitionEvent) {\n\t            // Uninstall the event listener for transitionend\n\t            destroyListenerFn();\n\t            _this.state = 'shown';\n\t            _events2.default.trigger(AnimatedElement.EVENTS.SHOWN, _this);\n\t            return resolve(_this);\n\t          }\n\t        }, true);\n\t      });\n\t    }\n\t\n\t    /**\n\t     * Asynchronously hides an element by applying its {hideClass} CSS class.\n\t     * @returns {Promise} Returns a promise that is resolved with this element when it has completed its transition.\n\t     */\n\t\n\t  }, {\n\t    key: 'hide',\n\t    value: function hide() {\n\t      var _this2 = this;\n\t\n\t      if (!this.shown) {\n\t        return Promise.resolve(this);\n\t      } else return new Promise(function (resolve) {\n\t        _this2.state = 'hiding';\n\t        _events2.default.trigger(AnimatedElement.EVENTS.HIDING, _this2);\n\t        if (_this2.showClass) (0, _utils.removeCssClass)(_this2.element, _this2.showClass);\n\t        if (_this2.hideClass) (0, _utils.addCssClass)(_this2.element, _this2.hideClass);\n\t        (0, _utils.once)(_this2.element, 'transitionend', function (event, destroyListenerFn) {\n\t          if (event.target === _this2.element && event.propertyName === _this2.targetTransitionEvent) {\n\t            // Uninstall the event listener for transitionend\n\t            destroyListenerFn();\n\t            _this2.state = 'hidden';\n\t            _events2.default.trigger(AnimatedElement.EVENTS.HIDDEN, _this2);\n\t            return resolve(_this2);\n\t          }\n\t        }, true);\n\t      });\n\t    }\n\t\n\t    /**\n\t     * Asynchronously waits for an element to finish transitioning to being shown.\n\t     * @returns {Promise} Returns a promise that is resolved with this element when it has completed its transition.\n\t     */\n\t\n\t  }, {\n\t    key: 'waitUntilShown',\n\t    value: function waitUntilShown() {\n\t      var _this3 = this;\n\t\n\t      if (this.state === 'shown') return Promise.resolve(this);else return new Promise(function (resolve) {\n\t        (0, _utils.once)(window, AnimatedElement.EVENTS.SHOWN, function (event, destroyListenerFn) {\n\t          if (event.details === _this3) {\n\t            destroyListenerFn();\n\t            return resolve(_this3);\n\t          }\n\t        }, true);\n\t      });\n\t    }\n\t\n\t    /**\n\t     * Asynchronously waits for an element to finish transitioning to being hidden.\n\t     * @returns {Promise} Returns a promise that is resolved with this element when it has completed its transition.\n\t     */\n\t\n\t  }, {\n\t    key: 'waitUntilHidden',\n\t    value: function waitUntilHidden() {\n\t      var _this4 = this;\n\t\n\t      if (this.state === 'hidden') return Promise.resolve(this);else return new Promise(function (resolve) {\n\t        (0, _utils.once)(window, AnimatedElement.EVENTS.HIDDEN, function (event, destroyListenerFn) {\n\t          if (event.details === _this4) {\n\t            destroyListenerFn();\n\t            return resolve(_this4);\n\t          }\n\t        }, true);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'content',\n\t\n\t    /**\n\t     * Returns the native element's innerHTML property.\n\t     * @returns {string} Returns the native element's innerHTML property.\n\t     */\n\t    get: function get() {\n\t      if (this.nestedContentSelector) return this.element.querySelector(this.nestedContentSelector).innerHTML;else return this.element.innerHTML;\n\t    }\n\t\n\t    /**\n\t     * Sets the native element's innerHTML property.\n\t     * @param value {string} The HTML to set to the element.\n\t     */\n\t    ,\n\t    set: function set(value) {\n\t      if (this.nestedContentSelector) this.element.querySelector(this.nestedContentSelector).innerHTML = value;else this.element.innerHTML = value;\n\t    }\n\t\n\t    /**\n\t     * Returns the native {Element} via document.querySelector().\n\t     * @returns {Element} Returns the native {Element} via document.querySelector().\n\t     */\n\t\n\t  }, {\n\t    key: 'element',\n\t    get: function get() {\n\t      return document.querySelector(this.selector);\n\t    }\n\t\n\t    /* States an element can be in */\n\t\n\t    /**\n\t     * Synchronously returns the last known state of the element.\n\t     * @returns {boolean} Returns true if the element was last known to be transitioning to being shown.\n\t     */\n\t\n\t  }, {\n\t    key: 'showing',\n\t    get: function get() {\n\t      return this.state === 'showing';\n\t    }\n\t\n\t    /**\n\t     * Synchronously returns the last known state of the element.\n\t     * @returns {boolean} Returns true if the element was last known to be already shown.\n\t     */\n\t\n\t  }, {\n\t    key: 'shown',\n\t    get: function get() {\n\t      return this.state === 'shown';\n\t    }\n\t\n\t    /**\n\t     * Synchronously returns the last known state of the element.\n\t     * @returns {boolean} Returns true if the element was last known to be transitioning to hiding.\n\t     */\n\t\n\t  }, {\n\t    key: 'hiding',\n\t    get: function get() {\n\t      return this.state === 'hiding';\n\t    }\n\t\n\t    /**\n\t     * Synchronously returns the last known state of the element.\n\t     * @returns {boolean} Returns true if the element was last known to be already hidden.\n\t     */\n\t\n\t  }, {\n\t    key: 'hidden',\n\t    get: function get() {\n\t      return this.state === 'hidden';\n\t    }\n\t  }], [{\n\t    key: 'EVENTS',\n\t    get: function get() {\n\t      return {\n\t        SHOWING: 'onesignal.bell.animatedelement.showing',\n\t        SHOWN: 'onesignal.bell.animatedelement.shown',\n\t        HIDING: 'onesignal.bell.animatedelement.hiding',\n\t        HIDDEN: 'onesignal.bell.animatedelement.hidden'\n\t      };\n\t    }\n\t  }]);\n\t\n\t  return AnimatedElement;\n\t})();\n\t\n\texports.default = AnimatedElement;\n\n/***/ },\n/* 59 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _utils = __webpack_require__(5);\n\t\n\tvar _loglevel = __webpack_require__(7);\n\t\n\tvar _loglevel2 = _interopRequireDefault(_loglevel);\n\t\n\tvar _events = __webpack_require__(55);\n\t\n\tvar _events2 = _interopRequireDefault(_events);\n\t\n\tvar _AnimatedElement2 = __webpack_require__(58);\n\t\n\tvar _AnimatedElement3 = _interopRequireDefault(_AnimatedElement2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar ActiveAnimatedElement = (function (_AnimatedElement) {\n\t  _inherits(ActiveAnimatedElement, _AnimatedElement);\n\t\n\t  /**\n\t   * Abstracts common DOM operations like hiding and showing transitionable elements into chainable promises.\n\t   * @param selector {string} The CSS selector of the element.\n\t   * @param showClass {string} The CSS class name to add to show the element.\n\t   * @param hideClass {string} The CSS class name to remove to hide the element.\n\t   * @param activeClass {string} The CSS class name to add to activate the element.\n\t   * @param inactiveClass {string} The CSS class name to remove to inactivate the element.\n\t   * @param state {string} The current state of the element, defaults to 'shown'.\n\t   * @param activeState {string} The current state of the element, defaults to 'active'.\n\t   * @param targetTransitionEvent {string} A single property (e.g. 'transform' or 'opacity') to look for on transitionend of show() and hide() to know the transition is complete.\n\t   * @param nestedContentSelector {string} The CSS selector targeting the nested element within the current element. This nested element will be used for content getters and setters.\n\t   */\n\t\n\t  function ActiveAnimatedElement(selector, showClass, hideClass, activeClass, inactiveClass) {\n\t    var state = arguments.length <= 5 || arguments[5] === undefined ? 'shown' : arguments[5];\n\t    var activeState = arguments.length <= 6 || arguments[6] === undefined ? 'active' : arguments[6];\n\t    var targetTransitionEvent = arguments.length <= 7 || arguments[7] === undefined ? 'opacity' : arguments[7];\n\t    var nestedContentSelector = arguments.length <= 8 || arguments[8] === undefined ? null : arguments[8];\n\t\n\t    _classCallCheck(this, ActiveAnimatedElement);\n\t\n\t    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(ActiveAnimatedElement).call(this, selector, showClass, hideClass, state, targetTransitionEvent, nestedContentSelector));\n\t\n\t    _this.activeClass = activeClass;\n\t    _this.inactiveClass = inactiveClass;\n\t    _this.activeState = activeState;\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * Asynchronously activates an element by applying its {activeClass} CSS class.\n\t   * @returns {Promise} Returns a promise that is resolved with this element when it has completed its transition.\n\t   */\n\t\n\t  _createClass(ActiveAnimatedElement, [{\n\t    key: 'activate',\n\t    value: function activate() {\n\t      var _this2 = this;\n\t\n\t      if (!this.inactive || !this.shown) {\n\t        return Promise.resolve(this);\n\t      } else return new Promise(function (resolve) {\n\t        _this2.activeState = 'activating';\n\t        _events2.default.trigger(ActiveAnimatedElement.EVENTS.ACTIVATING, _this2);\n\t        if (_this2.inactiveClass) (0, _utils.removeCssClass)(_this2.element, _this2.inactiveClass);\n\t        if (_this2.activeClass) (0, _utils.addCssClass)(_this2.element, _this2.activeClass);\n\t        if (_this2.shown) {\n\t          (0, _utils.once)(_this2.element, 'transitionend', function (event, destroyListenerFn) {\n\t            if (event.target === _this2.element && event.propertyName === _this2.targetTransitionEvent) {\n\t              // Uninstall the event listener for transitionend\n\t              destroyListenerFn();\n\t              _this2.activeState = 'active';\n\t              _events2.default.trigger(ActiveAnimatedElement.EVENTS.ACTIVE, _this2);\n\t              return resolve(_this2);\n\t            }\n\t          }, true);\n\t        } else {\n\t          _this2.activeState = 'active';\n\t          _events2.default.trigger(ActiveAnimatedElement.EVENTS.ACTIVE, _this2);\n\t          return resolve(_this2);\n\t        }\n\t      });\n\t    }\n\t\n\t    /**\n\t     * Asynchronously activates an element by applying its {activeClass} CSS class.\n\t     * @returns {Promise} Returns a promise that is resolved with this element when it has completed its transition.\n\t     */\n\t\n\t  }, {\n\t    key: 'inactivate',\n\t    value: function inactivate() {\n\t      var _this3 = this;\n\t\n\t      if (!this.active) {\n\t        return Promise.resolve(this);\n\t      } else return new Promise(function (resolve) {\n\t        _this3.activeState = 'inactivating';\n\t        _events2.default.trigger(ActiveAnimatedElement.EVENTS.INACTIVATING, _this3);\n\t        if (_this3.activeClass) (0, _utils.removeCssClass)(_this3.element, _this3.activeClass);\n\t        if (_this3.inactiveClass) (0, _utils.addCssClass)(_this3.element, _this3.inactiveClass);\n\t        if (_this3.shown) {\n\t          (0, _utils.once)(_this3.element, 'transitionend', function (event, destroyListenerFn) {\n\t            if (event.target === _this3.element && event.propertyName === _this3.targetTransitionEvent) {\n\t              // Uninstall the event listener for transitionend\n\t              destroyListenerFn();\n\t              _this3.activeState = 'inactive';\n\t              _events2.default.trigger(ActiveAnimatedElement.EVENTS.INACTIVE, _this3);\n\t              return resolve(_this3);\n\t            }\n\t          }, true);\n\t        } else {\n\t          _this3.activeState = 'inactive';\n\t          _events2.default.trigger(ActiveAnimatedElement.EVENTS.INACTIVE, _this3);\n\t          return resolve(_this3);\n\t        }\n\t      });\n\t    }\n\t\n\t    /**\n\t     * Asynchronously waits for an element to finish transitioning to being active.\n\t     * @returns {Promise} Returns a promise that is resolved with this element when it has completed its transition.\n\t     */\n\t\n\t  }, {\n\t    key: 'waitUntilActive',\n\t    value: function waitUntilActive() {\n\t      var _this4 = this;\n\t\n\t      if (this.active) return Promise.resolve(this);else return new Promise(function (resolve) {\n\t        (0, _utils.once)(window, ActiveAnimatedElement.EVENTS.ACTIVE, function (event, destroyListenerFn) {\n\t          if (event.details === _this4) {\n\t            destroyListenerFn();\n\t            return resolve(_this4);\n\t          }\n\t        }, true);\n\t      });\n\t    }\n\t\n\t    /**\n\t     * Asynchronously waits for an element to finish transitioning to being inactive.\n\t     * @returns {Promise} Returns a promise that is resolved with this element when it has completed its transition.\n\t     */\n\t\n\t  }, {\n\t    key: 'waitUntilInactive',\n\t    value: function waitUntilInactive() {\n\t      var _this5 = this;\n\t\n\t      if (this.inactive) return Promise.resolve(this);else return new Promise(function (resolve) {\n\t        (0, _utils.once)(window, ActiveAnimatedElement.EVENTS.INACTIVE, function (event, destroyListenerFn) {\n\t          if (event.details === _this5) {\n\t            destroyListenerFn();\n\t            return resolve(_this5);\n\t          }\n\t        }, true);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'activating',\n\t\n\t    /**\n\t     * Synchronously returns the last known state of the element.\n\t     * @returns {boolean} Returns true if the element was last known to be transitioning to being activated.\n\t     */\n\t    get: function get() {\n\t      return this.activeState === 'activating';\n\t    }\n\t\n\t    /**\n\t     * Synchronously returns the last known state of the element.\n\t     * @returns {boolean} Returns true if the element was last known to be already active.\n\t     */\n\t\n\t  }, {\n\t    key: 'active',\n\t    get: function get() {\n\t      return this.activeState === 'active';\n\t    }\n\t\n\t    /**\n\t     * Synchronously returns the last known state of the element.\n\t     * @returns {boolean} Returns true if the element was last known to be transitioning to inactive.\n\t     */\n\t\n\t  }, {\n\t    key: 'inactivating',\n\t    get: function get() {\n\t      return this.activeState === 'inactivating';\n\t    }\n\t\n\t    /**\n\t     * Synchronously returns the last known state of the element.\n\t     * @returns {boolean} Returns true if the element was last known to be already inactive.\n\t     */\n\t\n\t  }, {\n\t    key: 'inactive',\n\t    get: function get() {\n\t      return this.activeState === 'inactive';\n\t    }\n\t  }], [{\n\t    key: 'EVENTS',\n\t    get: function get() {\n\t      return Object.assign({}, _AnimatedElement3.default.EVENTS, {\n\t        ACTIVATING: 'onesignal.bell.activeanimatedelement.activating',\n\t        ACTIVE: 'onesignal.bell.activeanimatedelement.active',\n\t        INACTIVATING: 'onesignal.bell.activeanimatedelement.inactivating',\n\t        INACTIVE: 'onesignal.bell.activeanimatedelement.inactive'\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return ActiveAnimatedElement;\n\t})(_AnimatedElement3.default);\n\t\n\texports.default = ActiveAnimatedElement;\n\n/***/ },\n/* 60 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _utils = __webpack_require__(5);\n\t\n\tvar _loglevel = __webpack_require__(7);\n\t\n\tvar _loglevel2 = _interopRequireDefault(_loglevel);\n\t\n\tvar _events = __webpack_require__(55);\n\t\n\tvar _events2 = _interopRequireDefault(_events);\n\t\n\tvar _AnimatedElement = __webpack_require__(58);\n\t\n\tvar _AnimatedElement2 = _interopRequireDefault(_AnimatedElement);\n\t\n\tvar _ActiveAnimatedElement = __webpack_require__(59);\n\t\n\tvar _ActiveAnimatedElement2 = _interopRequireDefault(_ActiveAnimatedElement);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Launcher = (function (_ActiveAnimatedElemen) {\n\t  _inherits(Launcher, _ActiveAnimatedElemen);\n\t\n\t  function Launcher(bell) {\n\t    _classCallCheck(this, Launcher);\n\t\n\t    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Launcher).call(this, '.onesignal-bell-launcher', 'onesignal-bell-launcher-active', null, null, 'onesignal-bell-launcher-inactive', 'hidden', 'active'));\n\t\n\t    _this.bell = bell;\n\t    _this.wasInactive = false;\n\t    return _this;\n\t  }\n\t\n\t  _createClass(Launcher, [{\n\t    key: 'resize',\n\t    value: function resize(size) {\n\t      var _this2 = this;\n\t\n\t      (0, _utils.removeCssClass)(this.element, 'onesignal-bell-launcher-sm');\n\t      (0, _utils.removeCssClass)(this.element, 'onesignal-bell-launcher-md');\n\t      (0, _utils.removeCssClass)(this.element, 'onesignal-bell-launcher-lg');\n\t      if (size === 'small') {\n\t        (0, _utils.addCssClass)(this.element, 'onesignal-bell-launcher-sm');\n\t      } else if (size === 'medium') {\n\t        (0, _utils.addCssClass)(this.element, 'onesignal-bell-launcher-md');\n\t      } else if (size === 'large') {\n\t        (0, _utils.addCssClass)(this.element, 'onesignal-bell-launcher-lg');\n\t      } else {\n\t        throw new Error('Invalid OneSignal bell size ' + size);\n\t      }\n\t      if (!this.shown) {\n\t        return Promise.resolve(this);\n\t      } else {\n\t        return new Promise(function (resolve) {\n\t          // Once the launcher has finished shrinking down\n\t          (0, _utils.once)(_this2.element, 'transitionend', function (event, destroyListenerFn) {\n\t            if (event.target === _this2.element && event.propertyName === _this2.targetTransitionEvent) {\n\t              // Uninstall the event listener for transitionend\n\t              destroyListenerFn();\n\t              return resolve(_this2);\n\t            }\n\t          }, true);\n\t        });\n\t      }\n\t    }\n\t  }, {\n\t    key: 'activateIfInactive',\n\t    value: function activateIfInactive() {\n\t      if (this.inactive) {\n\t        this.wasInactive = true;\n\t        return this.activate();\n\t      } else return (0, _utils.nothing)();\n\t    }\n\t  }, {\n\t    key: 'inactivateIfWasInactive',\n\t    value: function inactivateIfWasInactive() {\n\t      if (this.wasInactive) {\n\t        this.wasInactive = false;\n\t        return this.inactivate();\n\t      } else return (0, _utils.nothing)();\n\t    }\n\t  }, {\n\t    key: 'inactivate',\n\t    value: function inactivate() {\n\t      var _this3 = this;\n\t\n\t      return this.bell.message.hide().then(function () {\n\t        if (_this3.bell.badge.content.length > 0) {\n\t          return _this3.bell.badge.hide().then(function () {\n\t            return Promise.all([_get(Object.getPrototypeOf(Launcher.prototype), 'inactivate', _this3).call(_this3), _this3.resize('small')]);\n\t          }).then(function () {\n\t            return _this3.bell.badge.show();\n\t          }).catch(function (e) {\n\t            return _loglevel2.default.error(e);\n\t          });\n\t        } else {\n\t          return Promise.all([_get(Object.getPrototypeOf(Launcher.prototype), 'inactivate', _this3).call(_this3), _this3.resize('small')]);\n\t        }\n\t      });\n\t    }\n\t  }, {\n\t    key: 'activate',\n\t    value: function activate() {\n\t      var _this4 = this;\n\t\n\t      if (this.bell.badge.content.length > 0) {\n\t        return this.bell.badge.hide().then(function () {\n\t          return Promise.all([_get(Object.getPrototypeOf(Launcher.prototype), 'activate', _this4).call(_this4), _this4.resize(_this4.bell.options.size)]);\n\t        }).then(function () {\n\t          return _this4.bell.badge.show();\n\t        }).catch(function (e) {\n\t          return _loglevel2.default.error(e);\n\t        });\n\t      } else {\n\t        return Promise.all([_get(Object.getPrototypeOf(Launcher.prototype), 'activate', this).call(this), this.resize(this.bell.options.size)]);\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return Launcher;\n\t})(_ActiveAnimatedElement2.default);\n\t\n\texports.default = Launcher;\n\n/***/ },\n/* 61 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _utils = __webpack_require__(5);\n\t\n\tvar _loglevel = __webpack_require__(7);\n\t\n\tvar _loglevel2 = _interopRequireDefault(_loglevel);\n\t\n\tvar _events = __webpack_require__(55);\n\t\n\tvar _events2 = _interopRequireDefault(_events);\n\t\n\tvar _ActiveAnimatedElement = __webpack_require__(59);\n\t\n\tvar _ActiveAnimatedElement2 = _interopRequireDefault(_ActiveAnimatedElement);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Badge = (function (_ActiveAnimatedElemen) {\n\t  _inherits(Badge, _ActiveAnimatedElemen);\n\t\n\t  function Badge() {\n\t    _classCallCheck(this, Badge);\n\t\n\t    return _possibleConstructorReturn(this, Object.getPrototypeOf(Badge).call(this, '.onesignal-bell-launcher-badge', 'onesignal-bell-launcher-badge-opened', null, 'onesignal-bell-launcher-badge-active', null, 'hidden'));\n\t  }\n\t\n\t  _createClass(Badge, [{\n\t    key: 'increment',\n\t    value: function increment() {\n\t      // If it IS a number (is not not a number)\n\t      if (!isNaN(this.content)) {\n\t        var badgeNumber = +this.content; // Coerce to int\n\t        badgeNumber += 1;\n\t        this.content = badgeNumber.toString();\n\t        return badgeNumber;\n\t      }\n\t    }\n\t  }, {\n\t    key: 'decrement',\n\t    value: function decrement() {\n\t      // If it IS a number (is not not a number)\n\t      if (!isNaN(this.content)) {\n\t        var badgeNumber = +this.content; // Coerce to int\n\t        badgeNumber -= 1;\n\t        if (badgeNumber > 0) this.content = badgeNumber.toString();else this.content = '';\n\t        return badgeNumber;\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return Badge;\n\t})(_ActiveAnimatedElement2.default);\n\t\n\texports.default = Badge;\n\n/***/ },\n/* 62 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _utils = __webpack_require__(5);\n\t\n\tvar _loglevel = __webpack_require__(7);\n\t\n\tvar _loglevel2 = _interopRequireDefault(_loglevel);\n\t\n\tvar _events = __webpack_require__(55);\n\t\n\tvar _events2 = _interopRequireDefault(_events);\n\t\n\tvar _ActiveAnimatedElement = __webpack_require__(59);\n\t\n\tvar _ActiveAnimatedElement2 = _interopRequireDefault(_ActiveAnimatedElement);\n\t\n\tvar _bell = __webpack_require__(56);\n\t\n\tvar _bell2 = _interopRequireDefault(_bell);\n\t\n\tvar _limitStore = __webpack_require__(8);\n\t\n\tvar _limitStore2 = _interopRequireDefault(_limitStore);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Button = (function (_ActiveAnimatedElemen) {\n\t  _inherits(Button, _ActiveAnimatedElemen);\n\t\n\t  function Button(bell) {\n\t    _classCallCheck(this, Button);\n\t\n\t    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Button).call(this, '.onesignal-bell-launcher-button', null, null, 'onesignal-bell-launcher-button-active', null, 'shown'));\n\t\n\t    _this.bell = bell;\n\t    _this.events = {\n\t      mouse: 'bell.launcher.button.mouse'\n\t    };\n\t\n\t    _this.element.addEventListener('mouseover', function () {\n\t      if (_limitStore2.default.isEmpty(_this.events.mouse) || _limitStore2.default.getLast(_this.events.mouse) === 'out') {\n\t        _events2.default.trigger(_bell2.default.EVENTS.HOVERING);\n\t      }\n\t      _limitStore2.default.put(_this.events.mouse, 'over');\n\t    });\n\t\n\t    _this.element.addEventListener('mouseleave', function () {\n\t      _limitStore2.default.put(_this.events.mouse, 'out');\n\t      _events2.default.trigger(_bell2.default.EVENTS.HOVERED);\n\t    });\n\t\n\t    _this.element.addEventListener('mousedown', function () {\n\t      _this.pulse();\n\t      _this.activate();\n\t      _this.bell.badge.activate();\n\t    });\n\t\n\t    _this.element.addEventListener('mouseup', function () {\n\t      _this.inactivate();\n\t      _this.bell.badge.inactivate();\n\t    });\n\t\n\t    _this.element.addEventListener('click', function () {\n\t      _events2.default.trigger(_bell2.default.EVENTS.BELL_CLICK);\n\t      _events2.default.trigger(_bell2.default.EVENTS.LAUNCHER_CLICK);\n\t    });\n\t    return _this;\n\t  }\n\t\n\t  _createClass(Button, [{\n\t    key: 'pulse',\n\t    value: function pulse() {\n\t      (0, _utils.removeDomElement)('.pulse-ring');\n\t      addDomElement(this.element, 'beforeend', '<div class=\"pulse-ring\"></div>');\n\t    }\n\t  }]);\n\t\n\t  return Button;\n\t})(_ActiveAnimatedElement2.default);\n\t\n\texports.default = Button;\n\n/***/ },\n/* 63 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(fetch) {'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _utils = __webpack_require__(5);\n\t\n\tvar _loglevel = __webpack_require__(7);\n\t\n\tvar _loglevel2 = _interopRequireDefault(_loglevel);\n\t\n\tvar _events = __webpack_require__(55);\n\t\n\tvar _events2 = _interopRequireDefault(_events);\n\t\n\tvar _AnimatedElement2 = __webpack_require__(58);\n\t\n\tvar _AnimatedElement3 = _interopRequireDefault(_AnimatedElement2);\n\t\n\tvar _bowser = __webpack_require__(57);\n\t\n\tvar Browser = _interopRequireWildcard(_bowser);\n\t\n\tvar _bell = __webpack_require__(56);\n\t\n\tvar _bell2 = _interopRequireDefault(_bell);\n\t\n\tvar _limitStore = __webpack_require__(8);\n\t\n\tvar _limitStore2 = _interopRequireDefault(_limitStore);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Dialog = (function (_AnimatedElement) {\n\t  _inherits(Dialog, _AnimatedElement);\n\t\n\t  function Dialog(bell) {\n\t    _classCallCheck(this, Dialog);\n\t\n\t    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Dialog).call(this, '.onesignal-bell-launcher-dialog', 'onesignal-bell-launcher-dialog-opened', null, 'hidden', 'opacity', '.onesignal-bell-launcher-dialog-body'));\n\t\n\t    _this.bell = bell;\n\t    _this.subscribeButtonId = '#onesignal-bell-container .onesignal-bell-launcher #subscribe-button';\n\t    _this.unsubscribeButtonId = '#onesignal-bell-container .onesignal-bell-launcher #unsubscribe-button';\n\t    _this.notificationIcons = null;\n\t\n\t    window.addEventListener(_bell2.default.EVENTS.STATE_CHANGED, function (state) {\n\t      state = state.detail;\n\t      if (state.to === _bell2.default.STATES.SUBSCRIBED) {\n\t        if (_this.notificationIcons === null) {\n\t          _this.getNotificationIcons().then(function (icons) {\n\t            _this.notificationIcons = icons;\n\t          });\n\t        }\n\t      }\n\t    });\n\t\n\t    window.addEventListener('click', function (event) {\n\t      if (event.target === document.querySelector(_this.subscribeButtonId)) _events2.default.trigger(_bell2.default.EVENTS.SUBSCRIBE_CLICK);else if (event.target === document.querySelector(_this.unsubscribeButtonId)) _events2.default.trigger(_bell2.default.EVENTS.UNSUBSCRIBE_CLICK);\n\t    });\n\t    return _this;\n\t  }\n\t\n\t  _createClass(Dialog, [{\n\t    key: 'getNotificationIcons',\n\t    value: function getNotificationIcons() {\n\t      if (!OneSignal._app_id) {\n\t        return Promise.resolve(null);\n\t      }\n\t      var url = OneSignal._API_URL + 'apps/' + OneSignal._app_id + '/icon';\n\t      return new Promise(function (resolve, reject) {\n\t        fetch(url).then(function (response) {\n\t          return response.json();\n\t        }).then(function (data) {\n\t          if (data.errors) {\n\t            console.error('API call %c' + url, (0, _utils.getConsoleStyle)('code'), 'failed with:', data.errors);\n\t            reject(null);\n\t          }\n\t          resolve(data);\n\t        }).catch(function (ex) {\n\t          console.error('Call %cgetNotificationIcons()', (0, _utils.getConsoleStyle)('code'), 'failed with:', ex);\n\t          reject(null);\n\t        });\n\t      });\n\t    }\n\t  }, {\n\t    key: 'getPlatformNotificationIcon',\n\t    value: function getPlatformNotificationIcon() {\n\t      if (this.notificationIcons) {\n\t        if (Browser.chrome || Browser.firefox) {\n\t          return this.notificationIcons.chrome || this.notificationIcons.safari;\n\t        } else if (Browser.safari) {\n\t          return this.notificationIcons.safari || this.notificationIcons.chrome;\n\t        }\n\t      } else return null;\n\t    }\n\t  }, {\n\t    key: 'show',\n\t    value: function show() {\n\t      var _this2 = this;\n\t\n\t      return this.updateBellLauncherDialogBody().then(function () {\n\t        return _get(Object.getPrototypeOf(Dialog.prototype), 'show', _this2).call(_this2);\n\t      }).catch(function (e) {\n\t        return _loglevel2.default.error(e);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'updateBellLauncherDialogBody',\n\t    value: function updateBellLauncherDialogBody() {\n\t      var _this3 = this;\n\t\n\t      return new Promise(function (resolve, reject) {\n\t        (0, _utils.clearDomElementChildren)(document.querySelector(_this3.nestedContentSelector));\n\t\n\t        var currentSetSubscription = _limitStore2.default.getLast('setsubscription.value');\n\t        var contents = 'Nothing to show.';\n\t\n\t        if (_this3.bell.state === _bell2.default.STATES.SUBSCRIBED && currentSetSubscription === true || _this3.bell.state === _bell2.default.STATES.UNSUBSCRIBED && currentSetSubscription === false) {\n\t\n\t          var notificationIconHtml = '';\n\t          var imageUrl = _this3.getPlatformNotificationIcon();\n\t          if (imageUrl) {\n\t            notificationIconHtml = '<div class=\"push-notification-icon\"><img src=\"' + imageUrl + '\"></div>';\n\t          } else {\n\t            notificationIconHtml = '<div class=\"push-notification-icon push-notification-icon-default\"></div>';\n\t          }\n\t\n\t          var buttonHtml = '';\n\t          if (_this3.bell.state !== _bell2.default.STATES.SUBSCRIBED) buttonHtml = '<button type=\"button\" class=\"action\" id=\"' + Dialog.subscribeButtonSelectorId + '\">' + _this3.bell.text['dialog.main.button.subscribe'] + '</button>';else buttonHtml = '<button type=\"button\" class=\"action\" id=\"' + Dialog.unsubscribeButtonSelectorId + '\">' + _this3.bell.text['dialog.main.button.unsubscribe'] + '</button>';\n\t\n\t          contents = '\\n                  <h1>' + _this3.bell.text['dialog.main.title'] + '</h1>\\n                  <div class=\"divider\"></div>\\n                  <div class=\"push-notification\">\\n                    ' + notificationIconHtml + '\\n                    <div class=\"push-notification-text-container\">\\n                      <div class=\"push-notification-text push-notification-text-short\"></div>\\n                      <div class=\"push-notification-text\"></div>\\n                      <div class=\"push-notification-text push-notification-text-medium\"></div>\\n                      <div class=\"push-notification-text\"></div>\\n                      <div class=\"push-notification-text push-notification-text-medium\"></div>\\n                    </div>\\n                  </div>\\n                  <div class=\"action-container\">\\n                    ' + buttonHtml + '\\n                  </div>\\n                  <div class=\"divider\"></div>\\n                  <div class=\"kickback\">Powered by <a href=\"https://onesignal.com\" class=\"kickback\" target=\"_blank\">OneSignal</a></div>\\n                ';\n\t        } else if (_this3.bell.state === _bell2.default.STATES.BLOCKED) {\n\t          var imageUrl = null;\n\t          if (Browser.chrome) imageUrl = HOST_URL + '/bell/chrome-unblock.jpg';else if (Browser.firefox) imageUrl = HOST_URL + '/bell/firefox-unblock.jpg';else if (Browser.safari) imageUrl = HOST_URL + '/bell/safari-unblock.jpg';\n\t\n\t          var instructionsHtml = '';\n\t          if (imageUrl) {\n\t            instructionsHtml = '\\n            <div class=\"instructions\">\\n              <a href=\"' + imageUrl + '\" target=\"_blank\"><img src=\"' + imageUrl + '\"></a></div>\\n            </div>\\n            ';\n\t          }\n\t          contents = '\\n                  <h1>' + _this3.bell.text['dialog.blocked.title'] + '</h1>\\n                  <div class=\"divider\"></div>\\n                  <div class=\"instructions\">\\n                  <p>' + _this3.bell.text['dialog.blocked.message'] + '</p>\\n                  ' + instructionsHtml + '\\n                  </div>\\n                  <div class=\"divider\"></div>\\n                  <div class=\"kickback\">Powered by <a href=\"https://onesignal.com\" class=\"kickback\" target=\"_blank\">OneSignal</a></div>\\n                ';\n\t        }\n\t\n\t        addDomElement(document.querySelector(_this3.nestedContentSelector), 'beforeend', contents);\n\t        resolve();\n\t      }).catch(function (e) {\n\t        return _loglevel2.default.error(e);\n\t      });\n\t    }\n\t  }], [{\n\t    key: 'subscribeButtonSelectorId',\n\t    get: function get() {\n\t      return 'subscribe-button';\n\t    }\n\t  }, {\n\t    key: 'unsubscribeButtonSelectorId',\n\t    get: function get() {\n\t      return 'unsubscribe-button';\n\t    }\n\t  }, {\n\t    key: 'subscribeButton',\n\t    get: function get() {\n\t      return this.bell.querySelector('#' + Dialog.subscribeButtonSelector);\n\t    }\n\t  }, {\n\t    key: 'unsubscribeButton',\n\t    get: function get() {\n\t      return document.querySelector('#' + Dialog.unsubscribeButtonSelector);\n\t    }\n\t  }]);\n\t\n\t  return Dialog;\n\t})(_AnimatedElement3.default);\n\t\n\texports.default = Dialog;\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(3)))\n\n/***/ },\n/* 64 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _utils = __webpack_require__(5);\n\t\n\tvar _loglevel = __webpack_require__(7);\n\t\n\tvar _loglevel2 = _interopRequireDefault(_loglevel);\n\t\n\tvar _events = __webpack_require__(55);\n\t\n\tvar _events2 = _interopRequireDefault(_events);\n\t\n\tvar _AnimatedElement2 = __webpack_require__(58);\n\t\n\tvar _AnimatedElement3 = _interopRequireDefault(_AnimatedElement2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Message = (function (_AnimatedElement) {\n\t  _inherits(Message, _AnimatedElement);\n\t\n\t  function Message(bell) {\n\t    _classCallCheck(this, Message);\n\t\n\t    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Message).call(this, '.onesignal-bell-launcher-message', 'onesignal-bell-launcher-message-opened', null, 'hidden', 'opacity', '.onesignal-bell-launcher-message-body'));\n\t\n\t    _this.bell = bell;\n\t    return _this;\n\t  }\n\t\n\t  _createClass(Message, [{\n\t    key: 'display',\n\t    value: function display(content) {\n\t      var _this2 = this;\n\t\n\t      var hideAfter = arguments.length <= 1 || arguments[1] === undefined ? 0 : arguments[1];\n\t\n\t      return new Promise(function (resolve) {\n\t        _this2.shown ? _this2.hide() : (0, _utils.nothing)().then(function () {\n\t          return _this2.content = content;\n\t        }).then(function () {\n\t          return _this2.show();\n\t        }).then(function () {\n\t          return (0, _utils.delay)(hideAfter);\n\t        }).then(function () {\n\t          return _this2.hide();\n\t        }).then(resolve).catch(function (e) {\n\t          return _loglevel2.default.error(e);\n\t        });\n\t      });\n\t    }\n\t  }, {\n\t    key: 'enqueue',\n\t    value: function enqueue(message) {\n\t      var _this3 = this;\n\t\n\t      var notify = arguments.length <= 1 || arguments[1] === undefined ? false : arguments[1];\n\t\n\t      this.bell.messages.queued.push(message);\n\t      return new Promise(function (resolve) {\n\t        if (_this3.bell.badge.shown) {\n\t          _this3.bell.badge.hide().then(function () {\n\t            return _this3.bell.badge.increment();\n\t          }).then(function () {\n\t            return _this3.bell.badge.show();\n\t          }).then(resolve);\n\t        } else {\n\t          _this3.bell.badge.increment();\n\t          if (_this3.bell.initialized) _this3.bell.badge.show().then(resolve);else resolve();\n\t        }\n\t      });\n\t    }\n\t  }, {\n\t    key: 'dequeue',\n\t    value: function dequeue(message) {\n\t      var _this4 = this;\n\t\n\t      var dequeuedMessage = this.bell.messages.queued.pop(message);\n\t      return new Promise(function (resolve) {\n\t        if (_this4.bell.badge.shown) {\n\t          _this4.bell.badge.hide().then(function () {\n\t            return _this4.bell.badge.decrement();\n\t          }).then(function () {\n\t            return _this4.bell.badge.show();\n\t          }).then(resolve(dequeuedMessage));\n\t        } else {\n\t          _this4.bell.badge.decrement();\n\t          resolve(dequeuedMessage);\n\t        }\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return Message;\n\t})(_AnimatedElement3.default);\n\t\n\texports.default = Message;\n\n/***/ },\n/* 65 */,\n/* 66 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?>\\n<!-- Generator: Adobe Illustrator 19.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\\n<svg version=\\\"1.1\\\" class=\\\"onesignal-bell-svg\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" x=\\\"0px\\\" y=\\\"0px\\\"\\n\\t width=\\\"99.7px\\\" height=\\\"99.7px\\\" viewBox=\\\"0 0 99.7 99.7\\\" style=\\\"enable-background:new 0 0 99.7 99.7;\\\" xml:space=\\\"preserve\\\">\\n<g>\\n\\t<circle class=\\\"background\\\" cx=\\\"49.9\\\" cy=\\\"49.9\\\" r=\\\"49.9\\\"/>\\n\\t<g id=\\\"Layer_2\\\">\\n\\t\\t<g>\\n\\t\\t\\t<path class=\\\"foreground\\\" d=\\\"M50.1,66.2H27.7c0,0-2-0.2-2-2.1c0-1.9,1.7-2,1.7-2s6.7-3.2,6.7-5.5c0-2.3-1.1-3.9-1.1-13.3\\n\\t\\t\\t\\ts6-16.6,13.2-16.6c0,0,1-2.4,3.9-2.4c2.8,0,3.8,2.4,3.8,2.4c7.2,0,13.2,7.2,13.2,16.6s-1,11-1,13.3c0,2.3,6.7,5.5,6.7,5.5\\n\\t\\t\\t\\ts1.7,0.1,1.7,2c0,1.8-2.1,2.1-2.1,2.1H50.1z\\\"/>\\n\\t\\t\\t<path class=\\\"foreground\\\" d=\\\"M42.9,68.5h14.5c0,0-1,6.3-7.2,6.3S42.9,68.5,42.9,68.5z\\\"/>\\n\\t\\t\\t<ellipse class=\\\"stroke\\\" cx=\\\"49.9\\\" cy=\\\"49.9\\\" rx=\\\"37.4\\\" ry=\\\"36.9\\\"/>\\n\\t\\t</g>\\n\\t</g>\\n</g>\\n</svg>\\n\"\n\n/***/ },\n/* 67 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _loglevel = __webpack_require__(7);\n\t\n\tvar _loglevel2 = _interopRequireDefault(_loglevel);\n\t\n\tvar _events = __webpack_require__(55);\n\t\n\tvar _events2 = _interopRequireDefault(_events);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Database = (function () {\n\t  function Database() {\n\t    _classCallCheck(this, Database);\n\t  }\n\t\n\t  _createClass(Database, null, [{\n\t    key: 'getInstance',\n\t\n\t    /**\n\t     * Returns an existing instance or creates a new instances of the database.\n\t     * @returns {Promise} Returns a promise that is fulfilled when the database becomes accessible or rejects when an error occurs.\n\t     */\n\t    value: function getInstance() {\n\t      return new Promise(function (resolve, reject) {\n\t        if (Database._instance) {\n\t          resolve(Database._instance);\n\t        } else {\n\t          var request = indexedDB.open(\"ONE_SIGNAL_SDK_DB\", 1);\n\t          request.onsuccess = function (event) {\n\t            var database = event.target.result;\n\t            Database._instance = database;\n\t            console.debug('Returning a new opened instance of IndexedDB.');\n\t            resolve(database);\n\t          };\n\t          request.onerror = function (event) {\n\t            _loglevel2.default.error('Unable to open IndexedDB.', event);\n\t            reject(event);\n\t          };\n\t          request.onupgradeneeded = function (event) {\n\t            _loglevel2.default.info('The OneSignal SDK is rebuilding its IndexedDB schema from a clean slate.');\n\t            var db = event.target.result;\n\t            db.createObjectStore(\"Ids\", {\n\t              keyPath: \"type\"\n\t            });\n\t            db.createObjectStore(\"NotificationOpened\", {\n\t              keyPath: \"url\"\n\t            });\n\t            db.createObjectStore(\"Options\", {\n\t              keyPath: \"key\"\n\t            });\n\t            _events2.default.trigger(Database.EVENTS.REBUILT);\n\t          };\n\t        }\n\t      });\n\t    }\n\t\n\t    /**\n\t     * Asynchronously retrieves the value of the key at the table (if key is specified), or the entire table (if key is not specified).\n\t     * @param table The table to retrieve the value from.\n\t     * @param key The key in the table to retrieve the value of. Leave blank to get the entire table.\n\t     * @returns {Promise} Returns a promise that fulfills when the value(s) are available.\n\t     */\n\t\n\t  }, {\n\t    key: 'get',\n\t    value: function get(table, key) {\n\t      if (key) {\n\t        // Return a table-key value\n\t        return new Promise(function (resolve, reject) {\n\t          Database.getInstance().then(function (database) {\n\t            var request = database.transaction(table).objectStore(table).get(key);\n\t            request.onsuccess = function () {\n\t              _events2.default.trigger(Database.EVENTS.RETRIEVED, { table: table, key: key, result: request.result });\n\t              resolve(request.result);\n\t            };\n\t            request.onerror = function () {\n\t              reject(request.errorCode);\n\t            };\n\t          }).catch(function (e) {\n\t            _loglevel2.default.error(e);\n\t            reject(e);\n\t          });\n\t        });\n\t      } else {\n\t        // Return all values in table\n\t        return new Promise(function (resolve, reject) {\n\t          Database.getInstance().then(function (database) {\n\t            var jsonResult = {};\n\t            var cursor = database.transaction(table).objectStore(table).openCursor();\n\t            cursor.onsuccess = function (event) {\n\t              var cursorResult = event.target.result;\n\t              if (cursorResult) {\n\t                _events2.default.trigger(Database.EVENTS.RETRIEVED, cursorResult.value);\n\t                jsonResult[cursorResult.key] = cursorResult.value.value;\n\t                cursorResult.continue();\n\t              } else {\n\t                resolve(jsonResult);\n\t              }\n\t            };\n\t            cursor.onerror = function (event) {\n\t              reject(cursor.errorCode);\n\t            };\n\t          }).catch(function (e) {\n\t            _loglevel2.default.error(e);\n\t            reject(e);\n\t          });\n\t        });\n\t      }\n\t    }\n\t\n\t    /**\n\t     * Asynchronously puts the specified value in the specified table.\n\t     * @param table\n\t     * @param key\n\t     */\n\t\n\t  }, {\n\t    key: 'put',\n\t    value: function put(table, value) {\n\t      return new Promise(function (resolve, reject) {\n\t        Database.getInstance().then(function (database) {\n\t          database.transaction([table], 'readwrite').objectStore(table).put(value);\n\t          _events2.default.trigger(Database.EVENTS.SET, value);\n\t          resolve(value);\n\t        }).catch(function (e) {\n\t          _loglevel2.default.error(e);\n\t          reject(e);\n\t        });\n\t      });\n\t    }\n\t\n\t    /**\n\t     * Asynchronously removes the specified key from the table.\n\t     * @returns {Promise} Returns a promise containing a key that is fulfilled when deletion is completed.\n\t     */\n\t\n\t  }, {\n\t    key: 'remove',\n\t    value: function remove(table, key) {\n\t      return new Promise(function (resolve) {\n\t        Database.getInstance().then(function (database) {\n\t          database.transaction([table], 'readwrite').objectStore(table).delete(key);\n\t          resolve(key);\n\t        }).catch(function (e) {\n\t          _loglevel2.default.error(e);\n\t          reject(e);\n\t        });\n\t      });\n\t    }\n\t  }, {\n\t    key: 'EVENTS',\n\t    get: function get() {\n\t      return {\n\t        REBUILT: 'onesignal.db.rebuilt',\n\t        RETRIEVED: 'onesignal.db.retrieved',\n\t        SET: 'onesignal.db.set'\n\t      };\n\t    }\n\t  }]);\n\t\n\t  return Database;\n\t})();\n\t\n\texports.default = Database;\n\n/***/ },\n/* 68 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {module.exports = global[\"ServiceWorker\"] = __webpack_require__(69);\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ },\n/* 69 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(fetch) {'use strict';\n\t\n\tvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; })();\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _vars = __webpack_require__(4);\n\t\n\tvar _environment = __webpack_require__(52);\n\t\n\tvar _environment2 = _interopRequireDefault(_environment);\n\t\n\tvar _api = __webpack_require__(6);\n\t\n\tvar _loglevel = __webpack_require__(7);\n\t\n\tvar _loglevel2 = _interopRequireDefault(_loglevel);\n\t\n\tvar _limitStore = __webpack_require__(8);\n\t\n\tvar _limitStore2 = _interopRequireDefault(_limitStore);\n\t\n\t__webpack_require__(70);\n\t\n\tvar _database = __webpack_require__(67);\n\t\n\tvar _database2 = _interopRequireDefault(_database);\n\t\n\tvar _utils = __webpack_require__(5);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar ServiceWorker = (function () {\n\t  function ServiceWorker() {\n\t    _classCallCheck(this, ServiceWorker);\n\t  }\n\t\n\t  _createClass(ServiceWorker, null, [{\n\t    key: 'run',\n\t    value: function run() {\n\t      self.addEventListener('push', ServiceWorker.onPushReceived);\n\t      self.addEventListener('notificationclick', ServiceWorker.onNotificationClicked);\n\t      self.addEventListener('install', ServiceWorker.onServiceWorkerInstalled);\n\t\n\t      // If the user is proxying through our subdomain (e.g. website.onesignal.com/sdks/)\n\t      if (ServiceWorker.onOurSubdomain) {\n\t        // Cache resources?\n\t        self.addEventListener('fetch', ServiceWorker.onFetch);\n\t      }\n\t    }\n\t\n\t    /**\n\t     * Occurs when a push message is received.\n\t     * This method handles the receipt of a push signal on all web browsers except Safari, which uses the OS to handle notifications.\n\t     * @param event\n\t     */\n\t\n\t  }, {\n\t    key: 'onPushReceived',\n\t    value: function onPushReceived(event) {\n\t      _loglevel2.default.debug('Called %conPushReceived(' + JSON.stringify(event, null, 4) + ')', (0, _utils.getConsoleStyle)('code'));\n\t      lug('onPushReceived');\n\t\n\t      event.waitUntil(new Promise(function (resolve, reject) {\n\t        var extra = {};\n\t        ServiceWorker._getTitle().then(function (title) {\n\t          extra.title = title;\n\t          return _database2.default.get('Options', 'defaultIcon');\n\t          lug('onPushReceived');\n\t        }).then(function (defaultIconResult) {\n\t          extra.defaultIconResult = defaultIconResult;\n\t          return extra;\n\t          lug('onPushReceived');\n\t        }).then(function (extra) {\n\t          return ServiceWorker._getLastNotifications();\n\t          lug('onPushReceived');\n\t        }).then(function (notifications) {\n\t          lug('onPushReceived');\n\t          // At this point, we have an array of notification objects (all the JSON is parsed)\n\t          // We want to fire a notification for each object\n\t          // We need to use event.waitUntil() to extend the life of the service worker (workers can be killed if idling)\n\t          // We want to extend the service worker lifetime until all promises for showNotification resolve\n\t          var notificationEventPromises = [];\n\t\n\t          var _iteratorNormalCompletion = true;\n\t          var _didIteratorError = false;\n\t          var _iteratorError = undefined;\n\t\n\t          try {\n\t            for (var _iterator = notifications[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t              var notification = _step.value;\n\t\n\t              var data = {\n\t                id: notification.custom.i,\n\t                message: notification.alert,\n\t                additionalData: notification.custom.a\n\t              };\n\t\n\t              if (notification.title) data.title = notification.title;else data.title = extra.title;\n\t\n\t              if (notification.custom.u) data.launchURL = notification.custom.u;\n\t\n\t              if (notification.icon) data.icon = notification.icon;else if (extra.defaultIconResult) data.icon = extra.defaultIconResult;\n\t\n\t              // Never nest the following line in a callback from the point of entering from _getLastNotifications\n\t              var notificationEventPromise = self.registration.showNotification(data.title, {\n\t                body: data.message,\n\t                icon: data.icon,\n\t                tag: JSON.stringify(data)\n\t              });\n\t\n\t              notificationEventPromises.push(notificationEventPromise);\n\t              return Promise.all(notificationEventPromises);\n\t            }\n\t          } catch (err) {\n\t            _didIteratorError = true;\n\t            _iteratorError = err;\n\t          } finally {\n\t            try {\n\t              if (!_iteratorNormalCompletion && _iterator.return) {\n\t                _iterator.return();\n\t              }\n\t            } finally {\n\t              if (_didIteratorError) {\n\t                throw _iteratorError;\n\t              }\n\t            }\n\t          }\n\t        }).then(resolve).catch(function (e) {\n\t          return _loglevel2.default.error(e);\n\t        });\n\t      }));\n\t    }\n\t  }, {\n\t    key: 'onNotificationClicked',\n\t    value: function onNotificationClicked(event) {\n\t      _loglevel2.default.debug('Called %conNotificationClicked(' + JSON.stringify(event, null, 4) + ')', (0, _utils.getConsoleStyle)('code'));\n\t      lug('onNotificationClicked');\n\t      var notificationData = JSON.parse(event.notification.tag);\n\t      event.notification.close();\n\t\n\t      event.waitUntil(_database2.default.get('Options', 'defaultUrl').then(function (defaultUrlResult) {\n\t        lug('onNotificationClicked');\n\t        if (defaultUrlResult) ServiceWorker.defaultLaunchUrl = defaultUrlResult.value;\n\t      }).then(function () {\n\t        lug('onPushReceived');return clients.matchAll({ type: 'window' });\n\t      }).then(function (clientList) {\n\t        lug('onNotificationClicked');\n\t        var launchURL = registration.scope;\n\t        if (ServiceWorker.defaultLaunchUrl) launchURL = ServiceWorker.defaultLaunchUrl;\n\t        if (notificationData.launchURL) launchURL = notificationData.launchURL;\n\t\n\t        for (var i = 0; i < clientList.length; i++) {\n\t          var client = clientList[i];\n\t          if ('focus' in client && client.url == launchURL) {\n\t            client.focus();\n\t\n\t            // targetOrigin not valid here as the service worker owns the page.\n\t            client.postMessage(notificationData);\n\t            return;\n\t          }\n\t        }\n\t\n\t        if (launchURL !== 'javascript:void(0);' && launchURL !== 'do_not_open') {\n\t          return _database2.default.put(\"NotificationOpened\", { url: launchURL, data: notificationData }).then(function () {\n\t            lug('onNotificationClicked');\n\t            clients.openWindow(launchURL).catch(function (error) {\n\t              // Should only fall into here if going to an external URL on Chrome older than 43.\n\t              clients.openWindow(registration.scope + \"redirector.html?url=\" + launchURL);\n\t            });\n\t          });\n\t        }\n\t      }).then(function () {\n\t        lug('onNotificationClicked');return Promise.all([_database2.default.get('Ids', 'appId'), _database2.default.get('Ids', 'userId')]);\n\t      }).then(function (results) {\n\t        lug('onNotificationClicked');\n\t\n\t        var _results = _slicedToArray(results, 2);\n\t\n\t        var appIdResult = _results[0];\n\t        var userIdResult = _results[1];\n\t\n\t        if (appIdResult && userIdResult) {\n\t          (0, _api.apiCall)(\"notifications/\" + notificationData.id, \"PUT\", {\n\t            app_id: appIdResult.id,\n\t            player_id: userIdResult.id,\n\t            opened: true\n\t          });\n\t        }\n\t      }).catch(function (e) {\n\t        return _loglevel2.default.error(e);\n\t      }));\n\t    }\n\t  }, {\n\t    key: 'onServiceWorkerInstalled',\n\t    value: function onServiceWorkerInstalled(event) {\n\t      _loglevel2.default.debug('Called %conServiceWorkerInstalled(' + JSON.stringify(event, null, 4) + ')', (0, _utils.getConsoleStyle)('code'));\n\t      _loglevel2.default.info('Installing service worker: %c' + self.location.pathname, (0, _utils.getConsoleStyle)('code'), '(version ' + (\"1.8.1\") + ')');\n\t\n\t      if (self.location.pathname.indexOf(\"OneSignalSDKWorker.js\") > -1) var serviceWorkerVersionType = 'WORKER1_ONE_SIGNAL_SW_VERSION';else var serviceWorkerVersionType = 'WORKER2_ONE_SIGNAL_SW_VERSION';\n\t\n\t      if (ServiceWorker.onOurSubdomain) {\n\t        event.waitUntil(_database2.default.put(\"Ids\", { type: serviceWorkerVersionType, id: (\"1.8.1\") }).then(function () {\n\t          lug('onServiceWorkerInstalled');return caches.open(\"OneSignal_\" + (\"1.8.1\"));\n\t        }).then(function (cache) {\n\t          lug('onServiceWorkerInstalled');\n\t          return cache.addAll(['/sdks/initOneSignalHttpIframe', '/sdks/initOneSignalHttpIframe?session=*', '/sdks/manifest_json']);\n\t        }).catch(function (e) {\n\t          return _loglevel2.default.error(e);\n\t        }));\n\t      } else {\n\t        event.waitUntil(_database2.default.put(\"Ids\", { type: serviceWorkerVersionType, id: (\"1.8.1\") }));\n\t      }\n\t    }\n\t  }, {\n\t    key: 'onFetch',\n\t    value: function onFetch(event) {\n\t      event.respondWith(caches.match(event.request).then(function (response) {\n\t        // Cache hit -- return response\n\t        if (response) {\n\t          return response;\n\t        }\n\t        return fetch(event.request);\n\t      }).catch(function (e) {\n\t        return _loglevel2.default.error(e);\n\t      }));\n\t    }\n\t  }, {\n\t    key: '_getTitle',\n\t\n\t    /**\n\t    * Returns a promise that is fulfilled with either the default title from the database (first priority) or the page title from the database (alternate result).\n\t    */\n\t    value: function _getTitle() {\n\t      return new Promise(function (resolve, reject) {\n\t        Promise.all([_database2.default.get('Options', 'defaultTitle'), _database2.default.get('Options', 'pageTitle')]).then(function (results) {\n\t          var _results2 = _slicedToArray(results, 2);\n\t\n\t          var defaultTitleResult = _results2[0];\n\t          var pageTitleResult = _results2[1];\n\t\n\t          if (defaultTitleResult) {\n\t            resolve(defaultTitleResult.value);\n\t          } else if (pageTitleResult && pageTitleResult.value != null) {\n\t            resolve(pageTitleResult.value);\n\t          } else {\n\t            resolve('');\n\t          }\n\t        }).catch(function (e) {\n\t          _loglevel2.default.error(e);\n\t          reject(e);\n\t        });\n\t      });\n\t    }\n\t\n\t    /**\n\t    * Returns a promise that is fulfilled with the JSON result of chrome notifications.\n\t    */\n\t\n\t  }, {\n\t    key: '_getLastNotifications',\n\t    value: function _getLastNotifications() {\n\t      return new Promise(function (resolve, reject) {\n\t        var notifications = [];\n\t        // Each entry is like:\n\t        /*\n\t         Object {custom: Object, icon: \"https://onesignal.com/images/notification_logo.png\", alert: \"asd\", title: \"ss\"}\n\t             alert: \"asd\"\n\t             custom: Object\n\t             i: \"6d7ec82f-bc56-494f-b73a-3a3b48baa2d8\"\n\t             __proto__: Object\n\t             icon: \"https://onesignal.com/images/notification_logo.png\"\n\t             title: \"ss\"\n\t             __proto__: Object\n\t         */\n\t        _database2.default.get('Ids', 'userId').then(function (userIdResult) {\n\t          if (userIdResult) {\n\t            return (0, _api.apiCall)(\"players/\" + userIdResult.id + \"/chromeweb_notification\", \"GET\");\n\t          } else {\n\t            _loglevel2.default.error('Tried to get last notifications, but there was no userId found in the database.');\n\t            reject(new Error('Tried to get last notifications, but there was no userId found in the database.'));\n\t          }\n\t        }).then(function (response) {\n\t          // The response is an array literal -- response.json() has been called by apiCall()\n\t          // The result looks like this:\n\t          // apiCall(\"players/7442a553-5f61-4b3e-aedd-bb574ef6946f/chromeweb_notification\", \"GET\").then(function(response) { console.log(response); });\n\t          // [\"{\"custom\":{\"i\":\"6d7ec82f-bc56-494f-b73a-3a3b48baa2d8\"},\"icon\":\"https://onesignal.com/images/notification_logo.png\",\"alert\":\"asd\",\"title\":\"ss\"}\"]\n\t          // ^ Notice this is an array literal with JSON data inside\n\t          for (var i = 0; i < response.length; i++) {\n\t            notifications.push(JSON.parse(response[i]));\n\t          }\n\t          resolve(notifications);\n\t        }).catch(function (e) {\n\t          _loglevel2.default.error(e);\n\t          reject(e);\n\t        });\n\t      });\n\t    }\n\t  }, {\n\t    key: 'onOurSubdomain',\n\t    get: function get() {\n\t      return (true) || location.href.match(/https:\\/\\/.*\\.onesignal.com\\/sdks\\//) !== null;\n\t    }\n\t  }]);\n\t\n\t  return ServiceWorker;\n\t})();\n\t\n\tfunction lug(prefix) {\n\t  if (!ServiceWorker.lugCounter) ServiceWorker.lugCounter = {};\n\t  if (!ServiceWorker.lugCounter.prefix) ServiceWorker.lugCounter.prefix = 1;\n\t  _loglevel2.default.debug('(' + performance.now() + ') ' + prefix + ':' + ServiceWorker.lugCounter.prefix++);\n\t}\n\t\n\t// Expose this class to the global scope\n\tself.OneSignalServiceWorker = ServiceWorker;\n\t\n\t// Set logging to the appropriate level\n\t_loglevel2.default.setDefaultLevel( true ? _loglevel2.default.levels.TRACE : _loglevel2.default.levels.ERROR);\n\t\n\t// Print it's happy time!\n\t_loglevel2.default.info('%cOneSignal Service Worker loaded (version ' + (\"1.8.1\") + ', ' + _environment2.default.getEnv() + ' environment).', (0, _utils.getConsoleStyle)('bold'));\n\t\n\t// Run our main file\n\tServiceWorker.run();\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(3)))\n\n/***/ },\n/* 70 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(fetch) {'use strict';\n\t\n\t/**\n\t * https://github.com/coonsta/cache-polyfill\n\t *\n\t * Copyright 2015 Google Inc. All rights reserved.\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *     http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software\n\t * distributed under the License is distributed on an \"AS IS\" BASIS,\n\t * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n\t * See the License for the specific language governing permissions and\n\t * limitations under the License.\n\t *\n\t */\n\t\n\tif (!Cache.prototype.addAll) {\n\t  Cache.prototype.addAll = function addAll(requests) {\n\t    var cache = this;\n\t\n\t    // Since DOMExceptions are not constructable:\n\t    function NetworkError(message) {\n\t      this.name = 'NetworkError';\n\t      this.code = 19;\n\t      this.message = message;\n\t    }\n\t    NetworkError.prototype = Object.create(Error.prototype);\n\t\n\t    return Promise.resolve().then(function () {\n\t      if (arguments.length < 1) throw new TypeError();\n\t\n\t      // Simulate sequence<(Request or USVString)> binding:\n\t      var sequence = [];\n\t\n\t      requests = requests.map(function (request) {\n\t        if (request instanceof Request) {\n\t          return request;\n\t        } else {\n\t          return String(request); // may throw TypeError\n\t        }\n\t      });\n\t\n\t      return Promise.all(requests.map(function (request) {\n\t        if (typeof request === 'string') {\n\t          request = new Request(request);\n\t        }\n\t\n\t        var scheme = new URL(request.url).protocol;\n\t\n\t        if (scheme !== 'http:' && scheme !== 'https:') {\n\t          throw new NetworkError(\"Invalid scheme\");\n\t        }\n\t\n\t        return fetch(request.clone());\n\t      }));\n\t    }).then(function (responses) {\n\t      // TODO: check that requests don't overwrite one another\n\t      // (don't think this is possible to polyfill due to opaque responses)\n\t      return Promise.all(responses.map(function (response, i) {\n\t        return cache.put(requests[i], response);\n\t      }));\n\t    }).then(function () {\n\t      return undefined;\n\t    });\n\t  };\n\t}\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(3)))\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** OneSignalSDK.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 229985f05a65afba5a90\n **/","import { DEV_HOST, PROD_HOST, API_URL } from './vars.js';\nimport Environment from './environment.js'\n\nif (Environment.isBrowser()) {\n  // We're running in the host page, iFrame of the host page, or popup window\n  // Load OneSignal's web SDK\n  if (typeof OneSignal !== \"undefined\")\n    var predefinedOneSignalPushes = OneSignal;\n\n  require(\"expose?OneSignal!./sdk.js\");\n\n  if (predefinedOneSignalPushes)\n    OneSignal._process_pushes(predefinedOneSignalPushes);\n}\nelse if (Environment.isServiceWorker()) {\n  // We're running as the service worker\n  require(\"expose?ServiceWorker!./ServiceWorker.js\");\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/entry.js\n **/","module.exports = global[\"OneSignal\"] = require(\"-!/Users/jpang/code/OneSignal-Website-SDK/node_modules/babel-loader/index.js?{\\\"presets\\\":[\\\"es2015\\\"],\\\"cacheDirectory\\\":true}!/Users/jpang/code/OneSignal-Website-SDK/src/sdk.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/expose-loader?OneSignal!./src/sdk.js\n ** module id = 1\n ** module chunks = 0\n **/","import { DEV_HOST, PROD_HOST, API_URL } from './vars.js';\nimport Environment from './environment.js'\nimport './string.js'\nimport { sendNotification } from './api.js';\nimport log from 'loglevel';\nimport LimitStore from './limitStore.js';\nimport Event from \"./events.js\";\nimport Bell from \"./bell/bell.js\";\nimport Database from './database.js';\nimport * as Browser from 'bowser';\nimport { isPushNotificationsSupported, isBrowserSafari, isSupportedFireFox, isBrowserFirefox, getFirefoxVersion, isSupportedSafari, getConsoleStyle } from './utils.js';\n\nvar OneSignal = {\n  _VERSION: __VERSION__,\n  _API_URL: API_URL,\n  _app_id: null,\n  _tagsToSendOnRegister: null,\n  _notificationOpened_callback: null,\n  _idsAvailable_callback: [],\n  _defaultLaunchURL: null,\n  _initOptions: null,\n  _httpRegistration: false,\n  _main_page_port: null,\n  _isNotificationEnabledCallback: [],\n  _subscriptionSet: true,\n  _initOneSignalHttp: null,\n  _sessionIframeAdded: false,\n  _useHttpMode: null,\n  _windowWidth: 550,\n  _windowHeight: 480,\n  _isUninitiatedVisitor: false,\n  _isNewVisitor: false,\n  _isInitialized: false,\n  bell: null,\n  store: LimitStore,\n  environment: Environment,\n  event: Event,\n  LOGGING: __DEV__,\n  browser: Browser,\n  log: log,\n  SERVICE_WORKER_UPDATER_PATH: \"OneSignalSDKUpdaterWorker.js\",\n  SERVICE_WORKER_PATH: \"OneSignalSDKWorker.js\",\n  SERVICE_WORKER_PARAM: {},\n\n  /* Event Definitions */\n  EVENTS: {\n    CUSTOM_PROMPT_CLICKED: 'onesignal.prompt.custom.clicked',\n    NATIVE_PROMPT_PERMISSIONCHANGED: 'onesignal.prompt.native.permissionchanged',\n    SUBSCRIPTION_CHANGED: 'onesignal.subscription.changed',\n    WELCOME_NOTIFICATION_SENT: 'onesignal.actions.welcomenotificationsent',\n    INTERNAL_SUBSCRIPTIONSET: 'onesignal.internal.subscriptionset',\n    SDK_INITIALIZED: 'onesignal.sdk.initialized'\n  },\n\n  _sendToOneSignalApi: function (url, action, inData, callback, failedCallback) {\n    log.debug(`Calling ${action} ${OneSignal._API_URL + url} with data:`, inData);\n    var contents = {\n      method: action,\n      //mode: 'no-cors', // no-cors is disabled for non-serviceworker.\n    };\n\n    if (inData) {\n      contents.headers = {\"Content-type\": \"application/json;charset=UTF-8\"};\n      contents.body = JSON.stringify(inData);\n    }\n\n    fetch(OneSignal._API_URL + url, contents)\n      .then(function status(response) {\n        if (response.status >= 200 && response.status < 300)\n          return Promise.resolve(response);\n        else\n          return Promise.reject(new Error(response.statusText));\n      })\n      .then(function status(response) {\n        return response.json();\n      })\n      .then(function (jsonData) {\n        if (callback != null)\n          callback(jsonData);\n      })\n      .catch(function (e) {\n        log.error('OneSignal._sendToOneSignalApi() failed:', e);\n        if (failedCallback != null)\n          failedCallback();\n      });\n  },\n\n  _getLanguage: function () {\n    return navigator.language ? (navigator.language.length > 3 ? navigator.language.substring(0, 2) : navigator.language) : 'en';\n  },\n\n  _getPlayerId: function (value, callback) {\n    if (value)\n      callback(value)\n    else {\n      Database.get('Ids', 'userId')\n        .then(function _getPlayerId_gotUserId(result) {\n          if (result)\n            callback(result.id);\n          else\n            callback(null);\n        })\n        .catch(function (e) {\n          log.error(e);\n        });\n      ;\n    }\n  },\n\n  _registerWithOneSignal: function (appId, registrationId, deviceType) {\n\n    Database.get('Ids', 'userId')\n      .then(function _registerWithOneSignal_GotUserId(userIdResult) {\n        OneSignal._getNotificationTypes(function (notif_types) {\n          var requestUrl = 'players';\n\n          var jsonData = {\n            app_id: appId,\n            device_type: deviceType,\n            language: OneSignal._getLanguage(),\n            timezone: new Date().getTimezoneOffset() * -60,\n            device_model: navigator.platform + \" \" + Browser.name,\n            device_os: Browser.version,\n            sdk: OneSignal._VERSION\n          };\n\n          if (userIdResult) {\n            requestUrl = 'players/' + userIdResult.id + '/on_session';\n            jsonData.notification_types = notif_types\n          }\n          else if (notif_types != 1)\n            jsonData.notification_types = notif_types\n\n          if (registrationId) {\n            jsonData.identifier = registrationId;\n            Database.put(\"Ids\", {type: \"registrationId\", id: registrationId});\n          }\n\n          OneSignal._sendToOneSignalApi(requestUrl, 'POST', jsonData,\n            function registeredCallback(responseJSON) {\n              sessionStorage.setItem(\"ONE_SIGNAL_SESSION\", true);\n\n              if (responseJSON.id) {\n                Database.put(\"Ids\", {type: \"userId\", id: responseJSON.id});\n                OneSignal._sendUnsentTags();\n              }\n\n              OneSignal._getPlayerId(responseJSON.id, function (userId) {\n                if (OneSignal._idsAvailable_callback.length > 0) {\n                  while (OneSignal._idsAvailable_callback.length > 0) {\n                    var curr_callback = OneSignal._idsAvailable_callback.pop();\n                    curr_callback({userId: userId, registrationId: registrationId});\n                  }\n                }\n\n                if (OneSignal._httpRegistration) {\n                  // 12/16/2015 -- At this point, the user has just clicked Allow on the HTTP prompt!!\n                  log.debug(\"Sending player Id and registrationId back to host page\");\n                  log.debug(OneSignal._initOptions);\n                  var creator = opener || parent;\n                  OneSignal._safePostMessage(creator, {\n                    idsAvailable: {\n                      userId: userId,\n                      registrationId: registrationId\n                    },\n                    from: Environment.getEnv()\n                  }, OneSignal._initOptions.origin, null);\n                  OneSignal._safePostMessage(creator, {\n                    httpNativePromptPermissionChanged: OneSignal._getNotificationPermission(),\n                    from: Environment.getEnv()\n                  }, OneSignal._initOptions.origin, null);\n\n                  if (opener)\n                    window.close();\n                }\n              });\n            }\n          );\n\n        });\n      })\n      .catch(function (e) {\n        log.error(e);\n      });\n    ;\n  },\n\n  _sendUnsentTags: function () {\n    if (OneSignal._tagsToSendOnRegister) {\n      OneSignal.sendTags(OneSignal._tagsToSendOnRegister);\n      OneSignal._tagsToSendOnRegister = null;\n    }\n  },\n\n  setDefaultNotificationUrl: function (url) {\n    Database.put(\"Options\", {key: \"defaultUrl\", value: url});\n  },\n\n  setDefaultIcon: function (icon) {\n    Database.put(\"Options\", {key: \"defaultIcon\", value: icon});\n  },\n\n  setDefaultTitle: function (title) {\n    Database.put(\"Options\", {key: \"defaultTitle\", value: title});\n  },\n\n  _visibilitychange: function () {\n    if (document.visibilityState == \"visible\") {\n      document.removeEventListener(\"visibilitychange\", OneSignal._visibilitychange);\n      OneSignal._sessionInit({});\n    }\n  },\n\n  onCustomPromptClicked: function (event) {\n    OneSignal._checkTrigger_eventSubscriptionChanged();\n  },\n\n  onNativePromptChanged: function (event) {\n    OneSignal._checkTrigger_eventSubscriptionChanged();\n  },\n\n  _onSubscriptionChanged: function (event) {\n    if (OneSignal._isUninitiatedVisitor && event.detail === true) {\n      Database.get('Ids', 'userId')\n        .then(function (result) {\n          let welcome_notification_opts = OneSignal._initOptions['welcomeNotification'];\n          let welcome_notification_disabled = (welcome_notification_opts !== undefined && welcome_notification_opts['disable'] === true);\n          let title = (welcome_notification_opts !== undefined && welcome_notification_opts['title'] !== undefined && welcome_notification_opts['title'] !== null) ? welcome_notification_opts['title'] : '';\n          let message = (welcome_notification_opts !== undefined && welcome_notification_opts['message'] !== undefined && welcome_notification_opts['message'] !== null && welcome_notification_opts['message'].length > 0) ? welcome_notification_opts['message'] : 'Thanks for subscribing!';\n          if (!welcome_notification_disabled) {\n            log.debug('Because this user is a new site visitor, a welcome notification will be sent.');\n            sendNotification(OneSignal._app_id, [result.id], {'en': title}, {'en': message})\n            Event.trigger(OneSignal.EVENTS.WELCOME_NOTIFICATION_SENT, {title: title, message: message});\n            OneSignal._isUninitiatedVisitor = false;\n          }\n        })\n        .catch(function (e) {\n          log.error(e);\n        });\n    }\n    LimitStore.put('subscription.value', event.detail);\n  },\n\n  _onDbValueRetrieved: function (event) {\n    //debugger;\n    log.warn(`Event: %c${JSON.stringify(event.bubbles)}`, getConsoleStyle('alert'));\n  },\n\n  _onDbValueSet: function (event) {\n    var info = event.detail;\n    if (info.type === 'userId') {\n      LimitStore.put('db.ids.userId', info.id);\n      OneSignal._checkTrigger_eventSubscriptionChanged();\n    }\n  },\n\n  _onInternalSubscriptionSet: function (event) {\n    var newSubscriptionValue = event.detail;\n    LimitStore.put('setsubscription.value', newSubscriptionValue);\n    OneSignal._checkTrigger_eventSubscriptionChanged();\n  },\n\n  _onSdkInitialized: function() {\n    if (Environment.isBrowser() && !OneSignal.bell) {\n      log.info('Showing bell.');\n      OneSignal.bell = new Bell({\n        size: 'large',\n        position: 'bottom-right',\n        theme: 'default'\n      });\n      OneSignal.bell.create();\n    }\n\n    OneSignal._isInitialized = true;\n    log.trace('OneSignal SDK has been fully initialized.');\n  },\n\n  _onDatabaseRebuilt: function() {\n    OneSignal._isNewVisitor = true;\n  },\n\n  _checkTrigger_nativePermissionChanged: function() {\n    let currentPermission = OneSignal._getNotificationPermission(OneSignal._initOptions.safari_web_id);\n    let lastPermission = LimitStore.getLast('notification.permission');\n    if (lastPermission !== currentPermission) {\n      OneSignal._triggerEvent_nativePromptPermissionChanged(lastPermission, currentPermission);\n    }\n  },\n\n  _checkTrigger_eventSubscriptionChanged: function () {\n    log.debug('Called %c_checkTrigger_eventSubscriptionChanged()', getConsoleStyle('code'));\n    var permissions = LimitStore.get('notification.permission');\n    var lastPermission = permissions[permissions.length - 2];\n    var currentPermission = permissions[permissions.length - 1];\n    log.debug('%c_checkTrigger_eventSubscriptionChanged():', getConsoleStyle('code'), 'Permissions:', {lastPermission, currentPermission});\n\n    var ids = LimitStore.get('db.ids.userId');\n    var lastId = ids[ids.length - 2];\n    var currentId = ids[ids.length - 1];\n    log.debug('%c_checkTrigger_eventSubscriptionChanged():', getConsoleStyle('code'), 'Ids:', {lastId, currentId});\n\n    var subscriptionStates = LimitStore.get('setsubscription.value');\n    var lastSubscriptionState = subscriptionStates[subscriptionStates.length - 2];\n    var currentSubscriptionState = subscriptionStates[subscriptionStates.length - 1];\n    log.debug('%c_checkTrigger_eventSubscriptionChanged():', getConsoleStyle('code'), 'Subscriptions:', {lastSubscriptionState, currentSubscriptionState});\n\n\n    var newSubscriptionState = 'unchanged';\n\n    if (((lastPermission === 'default' || lastPermission === 'denied' || lastPermission === null) && currentPermission === 'granted' &&\n        currentId !== null &&\n        currentSubscriptionState === true\n      ) ||\n      (\n        (lastSubscriptionState === false && currentSubscriptionState === true) &&\n        currentId != null &&\n        currentPermission === 'granted'\n      )) {\n      newSubscriptionState = true;\n    }\n\n    if ((lastPermission !== 'denied' && currentPermission === 'denied') ||\n      (lastPermission === 'granted' && currentPermission !== 'granted') ||\n      (lastId !== null && currentId === null) ||\n      (lastSubscriptionState !== false && currentSubscriptionState === false)) {\n      newSubscriptionState = false;\n    }\n\n    if (newSubscriptionState !== \"unchanged\") {\n      var lastTriggerTimes = LimitStore.put('event.subscriptionchanged.lastriggered', Date.now());\n      var currentTime = lastTriggerTimes[lastTriggerTimes.length - 1];\n      var lastTriggerTime = lastTriggerTimes[lastTriggerTimes.length - 2];\n      var elapsedTimeSeconds = (currentTime - lastTriggerTime) / 1000;\n\n      var lastEventStates = LimitStore.put('event.subscriptionchanged.laststates', newSubscriptionState);\n      var currentState = lastEventStates[lastEventStates.length - 1];\n      var lastState = lastEventStates[lastEventStates.length - 2];\n\n      // If event already triggered within the last second, don't re-trigger.\n      var shouldNotTriggerEvent = (lastTriggerTime != null && (elapsedTimeSeconds <= 1)) || (currentState === lastState);\n      if (shouldNotTriggerEvent === false) {\n        OneSignal._triggerEvent_subscriptionChanged(newSubscriptionState)\n      }\n    }\n  },\n\n  isPushNotificationsSupported: function() {\n    return isPushNotificationsSupported();\n  },\n\n  _installNativePromptPermissionChangedHook: function() {\n    if (navigator.permissions && !(isBrowserFirefox() && getFirefoxVersion() <= 45)) {\n      OneSignal._usingNativePermissionHook = true;\n      // If the browser natively supports hooking the subscription prompt permission change event\n      //     use it instead of our SDK method\n      navigator.permissions.query({name: 'notifications'}).then(function (permissionStatus) {\n        permissionStatus.onchange = function () {\n          var permissionBeforePrompt = LimitStore.getFirst('notification.permission');\n          OneSignal._triggerEvent_nativePromptPermissionChanged(permissionBeforePrompt);\n\n          // If we are not the main page, send this event back to main page\n          if (!Environment.isHost()) {\n            let creator = opener || parent;\n            OneSignal._safePostMessage(creator, {\n              httpNativePromptPermissionChanged: OneSignal._getNotificationPermission(),\n              from: Environment.getEnv()\n            }, OneSignal._initOptions.origin, null);\n          }\n        };\n      })\n        .catch(function (e) {\n          log.error(e);\n        });\n    }\n  },\n\n  init: function (options) {\n    if (Environment.isBrowser() && window.localStorage[\"onesignal.debugger.init\"]) {\n      debugger;\n    }\n\n    log.debug(`Called %cinit(${JSON.stringify(options, null, 4)})`, getConsoleStyle('code'));\n\n    if (OneSignal._isInitialized) {\n      log.warn('OneSignal.init() was called again, but the SDK is already initialized. Skipping initialization.');\n      return;\n    }\n    OneSignal._initOptions = options;\n    OneSignal._app_id = OneSignal._initOptions.appId;\n\n    if (!isPushNotificationsSupported()) {\n      log.warn(\"Your browser does not support push notifications.\");\n      return;\n    }\n\n    var currentNotificationPermission = OneSignal._getNotificationPermission(OneSignal._initOptions.safari_web_id);\n    LimitStore.put('notification.permission', currentNotificationPermission);\n\n    OneSignal._installNativePromptPermissionChangedHook();\n\n    // Store the current value of Ids:registrationId, so that we can see if the value changes in the future\n    Database.get('Ids', 'userId')\n      .then(function (result) {\n        if (result === undefined) {\n          OneSignal._isUninitiatedVisitor = true;\n        }\n        var storeValue = result ? result.id : null;\n        LimitStore.put('db.ids.userId', storeValue);\n      });\n\n    // Store the current value of subscription, so that we can see if the value changes in the future\n    //OneSignal._getSubscription.then((currentSubscription) => {\n    //  LimitStore.put('setsubscription.value', currentSubscription);\n    //});\n\n\n    window.addEventListener(OneSignal.EVENTS.CUSTOM_PROMPT_CLICKED, OneSignal.onCustomPromptClicked);\n    window.addEventListener(OneSignal.EVENTS.NATIVE_PROMPT_PERMISSIONCHANGED, OneSignal.onNativePromptChanged);\n    window.addEventListener(OneSignal.EVENTS.SUBSCRIPTION_CHANGED, OneSignal._onSubscriptionChanged);\n    window.addEventListener(Database.EVENTS.RETRIEVED, OneSignal._onDbValueRetrieved);\n    window.addEventListener(Database.EVENTS.SET, OneSignal._onDbValueSet);\n    window.addEventListener(OneSignal.EVENTS.INTERNAL_SUBSCRIPTIONSET, OneSignal._onInternalSubscriptionSet);\n    window.addEventListener(OneSignal.EVENTS.SDK_INITIALIZED, OneSignal._onSdkInitialized);\n    window.addEventListener(Database.EVENTS.REBUILT, OneSignal.onDatabaseRebuilt);\n\n    OneSignal._useHttpMode = !isSupportedSafari() && (!OneSignal._supportsDirectPermission() || OneSignal._initOptions.subdomainName);\n\n    if (OneSignal._useHttpMode)\n      OneSignal._initOneSignalHttp = 'https://' + OneSignal._initOptions.subdomainName + '.onesignal.com/sdks/initOneSignalHttp';\n    else\n      OneSignal._initOneSignalHttp = 'https://onesignal.com/sdks/initOneSignalHttps';\n\n    if (__DEV__)\n      OneSignal._initOneSignalHttp = DEV_HOST + '/dev_sdks/initOneSignalHttp';\n\n    // If Safari - add 'fetch' pollyfill if it isn't already added.\n    if (isSupportedSafari() && typeof window.fetch == \"undefined\") {\n      var s = document.createElement('script');\n      s.setAttribute('src', \"https://cdnjs.cloudflare.com/ajax/libs/fetch/0.9.0/fetch.js\");\n      document.head.appendChild(s);\n    }\n\n    if (document.readyState === \"complete\")\n      OneSignal._internalInit();\n    else\n      window.addEventListener('load', OneSignal._internalInit);\n  },\n\n  _internalInit: function () {\n    window.Database = Database;\n    log.debug('Called %c_internalInit()', getConsoleStyle('code'));\n    Promise.all([Database.get('Ids', 'appId'),\n      Database.get('Ids', 'registrationId'),\n      Database.get('Options', 'subscription')])\n      .then(function _internalInit_GotAppRegistrationSubscriptionIds(result) {\n        var appIdResult = result[0];\n        var registrationIdResult = result[1];\n        var subscriptionResult = result[2];\n\n        // If AppId changed delete playerId and continue.\n        if (appIdResult && appIdResult.id != OneSignal._initOptions.appId) {\n          Database.remove(\"Ids\", \"userId\");\n          sessionStorage.removeItem(\"ONE_SIGNAL_SESSION\");\n        }\n\n        // HTTPS - Only register for push notifications once per session or if the user changes notification permission to Ask or Allow.\n        if (sessionStorage.getItem(\"ONE_SIGNAL_SESSION\")\n          && !OneSignal._initOptions.subdomainName\n          && (Notification.permission == \"denied\"\n          || sessionStorage.getItem(\"ONE_SIGNAL_NOTIFICATION_PERMISSION\") == Notification.permission)) {\n          Event.trigger(OneSignal.EVENTS.SDK_INITIALIZED);\n          return;\n        }\n\n        sessionStorage.setItem(\"ONE_SIGNAL_NOTIFICATION_PERMISSION\", Notification.permission);\n\n        if (OneSignal._initOptions.autoRegister == false && !registrationIdResult && !OneSignal._initOptions.subdomainName) {\n          Event.trigger(OneSignal.EVENTS.SDK_INITIALIZED);\n          return;\n        }\n\n        if (document.visibilityState != \"visible\") {\n          document.addEventListener(\"visibilitychange\", OneSignal._visibilitychange);\n          return;\n        }\n\n        OneSignal._sessionInit({});\n      })\n      .catch(function (e) {\n        log.error(e);\n      });\n  },\n\n  registerForPushNotifications: function (options) {\n    if (!isPushNotificationsSupported()) {\n      log.warn(\"Your browser does not support push notifications.\");\n      return;\n    }\n    // WARNING: Do NOT add callbacks that have to fire to get from here to window.open in _sessionInit.\n    //          Otherwise the pop-up to ask for push permission on HTTP connections will be blocked by Chrome.\n    if (!options)\n      options = {};\n    options.fromRegisterFor = true;\n    OneSignal._sessionInit(options);\n  },\n\n  // Http only - Only called from iframe's init.js\n  _initHttp: function (options) {\n    log.debug('Called %c _initHttp', getConsoleStyle('code'));\n    OneSignal._initOptions = options;\n\n    OneSignal._installNativePromptPermissionChangedHook();\n    if (options.continuePressed) {\n      OneSignal.setSubscription(true);\n    }\n\n    var isIframe = (parent != null && parent != window);\n    var creator = opener || parent;\n\n    if (!creator) {\n      log.error('_initHttp (from <iframe>):', 'No opener or parent found!');\n      return;\n    }\n    // Setting up message channel to receive message from host page.\n    var messageChannel = new MessageChannel();\n    messageChannel.port1.onmessage = function (event) {\n      log.debug(`%c${Environment.getEnv().capitalize()} ⬸ ${event.data.from.capitalize()}:`, getConsoleStyle('postmessage'), event.data);\n\n      if (event.data.initOptions) {\n        OneSignal.setDefaultNotificationUrl(event.data.initOptions.defaultUrl);\n        OneSignal.setDefaultTitle(event.data.initOptions.defaultTitle);\n        if (event.data.initOptions.defaultIcon)\n          OneSignal.setDefaultIcon(event.data.initOptions.defaultIcon);\n\n        Database.get(\"NotificationOpened\", event.data.initOptions.parent_url)\n          .then(function registerForPushNotifications_GotNotificationOpened(notificationOpenedResult) {\n            if (notificationOpenedResult) {\n              Database.remove(\"NotificationOpened\", event.data.initOptions.parent_url);\n              log.debug(\"OneSignal._safePostMessage:targetOrigin:\", OneSignal._initOptions.origin);\n\n              OneSignal._safePostMessage(creator, {openedNotification: notificationOpenedResult.data, from: Environment.getEnv()}, OneSignal._initOptions.origin, null);\n            }\n          })\n          .catch(function (e) {\n            log.error(e);\n          });\n        ;\n      }\n      else if (event.data.getNotificationPermission) {\n        //log.info('%cIn the <iframe>: getNotificationPermission message was received.', getConsoleStyle('alert'));\n        OneSignal._getSubdomainState(function (curState) {\n          OneSignal._safePostMessage(creator, {currentNotificationPermission: curState, from: Environment.getEnv()}, OneSignal._initOptions.origin, null);\n        });\n      }\n      else if (event.data.setSubdomainState)\n        OneSignal.setSubscription(event.data.setSubdomainState.setSubscription);\n    };\n\n    OneSignal._getSubdomainState(function (curState) {\n      curState[\"isIframe\"] = isIframe;\n      OneSignal._safePostMessage(creator, {oneSignalInitPageReady: curState, from: Environment.getEnv()}, OneSignal._initOptions.origin, [messageChannel.port2]);\n    });\n\n    OneSignal._initSaveState();\n    OneSignal._httpRegistration = true;\n    if (location.search.indexOf(\"?session=true\") == 0)\n      return;\n\n    OneSignal._getPlayerId(null, function (player_id) {\n      if (!isIframe || player_id) {\n        navigator.serviceWorker.register(OneSignal.SERVICE_WORKER_PATH, OneSignal.SERVICE_WORKER_PARAM).then(OneSignal._enableNotifications, OneSignal._registerError);\n      }\n    });\n  },\n\n  _getSubdomainState: function (callback) {\n    var state = {};\n\n    Promise.all([Database.get('Ids', 'userId'),\n      Database.get('Ids', 'registrationId'),\n      Database.get('Options', 'subscription')])\n      .then(function _internalInit_GotAppRegistrationSubscriptionIds(result) {\n        var userIdResult = result[0];\n        var registrationIdResult = result[1];\n        var subscriptionResult = result[2];\n\n        callback({\n          userId: userIdResult ? userIdResult.id : null,\n          registrationId: registrationIdResult ? registrationIdResult.id : null,\n          notifPermssion: Notification.permission,\n          subscriptionSet: subscriptionResult ? subscriptionResult.value : null,\n          isPushEnabled: ( Notification.permission == \"granted\"\n          && userIdResult\n          && registrationIdResult\n          && ((subscriptionResult && subscriptionResult.value) || subscriptionResult == null))\n        });\n      })\n      .catch(function (e) {\n        log.error(e);\n      });\n    ;\n  },\n\n  _initSaveState: function () {\n    OneSignal._app_id = OneSignal._initOptions.appId;\n    Database.put(\"Ids\", {type: \"appId\", id: OneSignal._app_id});\n    Database.put(\"Options\", {key: \"pageTitle\", value: document.title});\n  },\n\n  _supportsDirectPermission: function () {\n    return isSupportedSafari()\n      || location.protocol == 'https:'\n      || location.host.indexOf(\"localhost\") == 0\n      || location.host.indexOf(\"127.0.0.1\") == 0;\n  },\n\n\n  _sessionInit: function (options) {\n    log.debug(`Called %c_sessionInit(${JSON.stringify(options)})`, getConsoleStyle('code'));\n    OneSignal._initSaveState();\n\n    var hostPageProtocol = location.origin.match(/^http(s|):\\/\\/(www\\.|)/)[0];\n\n    // If HTTP or using subdomain mode\n    if (OneSignal._useHttpMode) {\n      if (options.fromRegisterFor) {\n        var dualScreenLeft = window.screenLeft != undefined ? window.screenLeft : screen.left;\n        var dualScreenTop = window.screenTop != undefined ? window.screenTop : screen.top;\n\n        var thisWidth = window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : screen.width;\n        var thisHeight = window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : screen.height;\n        var childWidth = OneSignal._windowWidth;\n        var childHeight = OneSignal._windowHeight;\n\n        var left = ((thisWidth / 2) - (childWidth / 2)) + dualScreenLeft;\n        var top = ((thisHeight / 2) - (childHeight / 2)) + dualScreenTop;\n\n        log.debug('Opening popup window.');\n        var message_localization_opts = OneSignal._initOptions['promptOptions'];\n        var message_localization_opts_str = '';\n        if (message_localization_opts) {\n          var message_localization_params = ['actionMessage',\n            'exampleNotificationTitleDesktop',\n            'exampleNotificationMessageDesktop',\n            'exampleNotificationTitleMobile',\n            'exampleNotificationMessageMobile',\n            'exampleNotificationCaption',\n            'acceptButtonText',\n            'cancelButtonText'];\n          for (var i = 0; i < message_localization_params.length; i++) {\n            var key = message_localization_params[i];\n            var value = message_localization_opts[key];\n            var encoded_value = encodeURIComponent(value);\n            if (value || value === '') {\n              message_localization_opts_str += '&' + key + '=' + encoded_value;\n            }\n          }\n        }\n        var childWindow = window.open(OneSignal._initOneSignalHttp + \"?\" + message_localization_opts_str + \"&hostPageProtocol=\" + hostPageProtocol, \"_blank\", 'scrollbars=yes, width=' + childWidth + ', height=' + childHeight + ', top=' + top + ', left=' + left);\n\n        if (childWindow)\n          childWindow.focus();\n      }\n      else {\n        OneSignal._addSessionIframe(hostPageProtocol);\n      }\n\n    }\n    else {\n      if (isSupportedSafari()) {\n        if (OneSignal._initOptions.safari_web_id) {\n          var notificationPermissionBeforeRequest = OneSignal._getNotificationPermission(OneSignal._initOptions.safari_web_id);\n          window.safari.pushNotification.requestPermission(\n            OneSignal._API_URL + 'safari',\n            OneSignal._initOptions.safari_web_id,\n            {app_id: OneSignal._app_id},\n            function (data) {\n              log.info('Safari requestPermission() callback:', data);\n              var notificationPermissionAfterRequest = OneSignal._getNotificationPermission(OneSignal._initOptions.safari_web_id);\n              if (data.deviceToken) {\n                OneSignal._registerWithOneSignal(OneSignal._app_id, data.deviceToken.toLowerCase(), 7);\n              }\n              else {\n                sessionStorage.setItem(\"ONE_SIGNAL_SESSION\", true);\n              }\n              OneSignal._triggerEvent_nativePromptPermissionChanged(notificationPermissionBeforeRequest);\n            }\n          );\n        }\n      }\n      else if (options.modalPrompt && options.fromRegisterFor) { // If HTTPS - Show modal\n        if (!isPushNotificationsSupported()) {\n          log.warn('An attempt was made to open the HTTPS modal permission prompt, but push notifications are not supported on this browser. Opening canceled.');\n          return;\n        }\n        OneSignal.isPushNotificationsEnabled(function (pushEnabled) {\n          var element = document.createElement('div');\n          element.setAttribute('id', 'OneSignal-iframe-modal');\n          element.innerHTML = '<div id=\"notif-permission\" style=\"background: rgba(0, 0, 0, 0.7); position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 9000; display: block\"></div>';\n          document.body.appendChild(element);\n\n          var iframeStyle = document.createElement('style');\n          iframeStyle.innerHTML = \"@media (max-width: 560px) { .OneSignal-permission-iframe { width: 100%; height: 100%;} }\"\n            + \"@media (min-width: 561px) { .OneSignal-permission-iframe { top: 50%; left: 50%; margin-left: -275px; margin-top: -248px;} }\";\n          document.getElementsByTagName('head')[0].appendChild(iframeStyle);\n\n          var iframeNode = document.createElement(\"iframe\");\n          iframeNode.className = \"OneSignal-permission-iframe\"\n          iframeNode.style.cssText = \"background: rgba(255, 255, 255, 1); position: fixed;\";\n          iframeNode.src = OneSignal._initOneSignalHttp\n            + '?id=' + OneSignal._app_id\n            + '&httpsPrompt=true'\n            + '&pushEnabled=' + pushEnabled\n            + '&permissionBlocked=' + (typeof Notification === \"undefined\" || Notification.permission == \"denied\")\n            + '&hostPageProtocol=' + hostPageProtocol;\n          iframeNode.setAttribute('frameborder', '0');\n          iframeNode.width = OneSignal._windowWidth.toString();\n          iframeNode.height = OneSignal._windowHeight.toString();\n\n          log.debug('Opening HTTPS modal prompt.');\n          document.getElementById(\"notif-permission\").appendChild(iframeNode);\n        });\n      }\n      else if ('serviceWorker' in navigator) // If HTTPS - Show native prompt\n        OneSignal._registerForW3CPush(options);\n      else\n        log.debug('Service workers are not supported in this browser.');\n\n      Event.trigger(OneSignal.EVENTS.SDK_INITIALIZED);\n    }\n  },\n\n  _registerForW3CPush: function (options) {\n\n    Database.get('Ids', 'registrationId')\n      .then(function _registerForW3CPush_GotRegistrationId(registrationIdResult) {\n        if (!registrationIdResult || !options.fromRegisterFor || Notification.permission != \"granted\") {\n          navigator.serviceWorker.getRegistration().then(function (serviceWorkerRegistration) {\n            var sw_path = \"\";\n\n            if (OneSignal._initOptions.path)\n              sw_path = OneSignal._initOptions.path;\n\n            if (typeof serviceWorkerRegistration === \"undefined\") // Nothing registered, very first run\n              OneSignal._registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_PATH);\n            else {\n              if (serviceWorkerRegistration.active) {\n                if (serviceWorkerRegistration.active.scriptURL.indexOf(sw_path + OneSignal.SERVICE_WORKER_PATH) > -1) {\n\n                  Database.get('Ids', 'WORKER1_ONE_SIGNAL_SW_VERSION')\n                    .then(function (versionResult) {\n                      if (versionResult) {\n                        if (versionResult.id != OneSignal._VERSION)\n                          OneSignal._registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_UPDATER_PATH);\n                        else\n                          OneSignal._registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_PATH);\n                      }\n                      else\n                        OneSignal._registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_PATH);\n\n                    })\n                    .catch(function (e) {\n                      log.error(e);\n                    });\n                }\n                else if (serviceWorkerRegistration.active.scriptURL.indexOf(sw_path + OneSignal.SERVICE_WORKER_UPDATER_PATH) > -1) {\n\n                  Database.get('Ids', 'WORKER2_ONE_SIGNAL_SW_VERSION')\n                    .then(function (versionResult) {\n                      if (versionResult) {\n                        if (versionResult.id != OneSignal._VERSION)\n                          OneSignal._registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_PATH);\n                        else\n                          OneSignal._registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_UPDATER_PATH);\n                      }\n                      else\n                        OneSignal._registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_UPDATER_PATH);\n                    })\n                    .catch(function (e) {\n                      log.error(e);\n                    });\n                }\n              }\n              else if (serviceWorkerRegistration.installing == null)\n                OneSignal._registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_PATH);\n            }\n          })\n            .catch(function (e) {\n              log.error(e);\n            });\n        }\n      })\n      .catch(function (e) {\n        log.error(e);\n      });\n    ;\n  },\n\n  _registerServiceWorker: function(full_sw_and_path) {\n    navigator.serviceWorker.register(full_sw_and_path, OneSignal.SERVICE_WORKER_PARAM).then(OneSignal._enableNotifications, OneSignal._registerError);\n  },\n\n  _addSessionIframe: function (hostPageProtocol) {\n    log.debug(`Called %c_addSessionIframe(${JSON.stringify(hostPageProtocol, null, 4)})`, getConsoleStyle('code'));\n\n    var node = document.createElement(\"iframe\");\n    node.style.display = \"none\";\n    node.src = OneSignal._initOneSignalHttp + \"Iframe\";\n    if (sessionStorage.getItem(\"ONE_SIGNAL_SESSION\"))\n      node.src += \"?session=true\"\n        + \"&hostPageProtocol=\" + hostPageProtocol;\n    else\n      node.src += \"?hostPageProtocol=\" + hostPageProtocol\n    document.body.appendChild(node);\n\n    OneSignal._sessionIframeAdded = true;\n  },\n\n  _registerError: function (err) {\n    log.error(\"ServiceWorker registration\", err);\n  },\n\n  _enableNotifications: function (existingServiceWorkerRegistration) { // is ServiceWorkerRegistration type\n    if (existingServiceWorkerRegistration)\n      log.debug('An older ServiceWorker exists:', existingServiceWorkerRegistration);\n    if (!('PushManager' in window)) {\n      log.error(\"Push messaging is not supported. No PushManager.\");\n      sessionStorage.setItem(\"ONE_SIGNAL_SESSION\", true);\n      return;\n    }\n\n    if (!('showNotification' in ServiceWorkerRegistration.prototype)) {\n      log.error(\"Notifications are not supported. showNotification not available in ServiceWorkerRegistration.\");\n      sessionStorage.setItem(\"ONE_SIGNAL_SESSION\", true);\n      return;\n    }\n\n    if (Notification.permission === 'denied') {\n      log.warn(\"The user has disabled notifications.\");\n      return;\n    }\n\n    navigator.serviceWorker.ready.then(function (serviceWorkerRegistration) {\n      log.info('Service worker now active:', serviceWorkerRegistration);\n\n      OneSignal._subscribeForPush(serviceWorkerRegistration);\n    })\n      .catch(function (e) {\n        log.error(e);\n      });\n    ;\n  },\n\n  /*\n   Returns the current browser-agnostic notification permission as \"default\", \"granted\", \"denied\".\n   safariWebId: Used only to get the current notification permission state in Safari (required as part of the spec).\n   */\n  _getNotificationPermission: function (safariWebId) {\n    if (window.safari) {\n      // The user is on Safari\n      // A web ID is required to determine the current notificiation permission\n      if (safariWebId) {\n        return window.safari.pushNotification.permission(safariWebId).permission;\n      }\n      else {\n        // The user didn't set up Safari web push properly; notifications are unlikely to be enabled\n        return \"default\";\n      }\n    }\n    else {\n      // Identical API on Firefox and Chrome\n      return Notification.permission;\n    }\n  },\n\n  _triggerEvent_customPromptClicked: function (clickResult) {\n    var recentPermissions = LimitStore.put('prompt.custom.permission', clickResult);\n    Event.trigger(OneSignal.EVENTS.CUSTOM_PROMPT_CLICKED, {\n      result: clickResult\n    });\n  },\n\n  _triggerEvent_nativePromptPermissionChanged: function (from, to, updateIfIdentical = false) {\n    if (to === undefined) {\n      to = OneSignal._getNotificationPermission(OneSignal._initOptions.safari_web_id);\n    }\n    if (from !== to || updateIfIdentical) {\n      var recentPermissions = LimitStore.put('notification.permission', to);\n      Event.trigger(OneSignal.EVENTS.NATIVE_PROMPT_PERMISSIONCHANGED, {\n        from: from,\n        to: to\n      });\n    }\n  },\n\n  _triggerEvent_subscriptionChanged: function (to) {\n    Event.trigger(OneSignal.EVENTS.SUBSCRIPTION_CHANGED, to);\n  },\n\n  _triggerEvent_dbValueRetrieved: function (value) {\n    Event.trigger(Database.EVENTS.RETRIEVED, value);\n  },\n\n  _triggerEvent_dbValueSet: function (value) {\n    Event.trigger(Database.EVENTS.SET, value);\n  },\n\n  _triggerEvent_internalSubscriptionSet: function (value) {\n    Event.trigger(OneSignal.EVENTS.INTERNAL_SUBSCRIPTIONSET, value);\n  },\n\n  _subscribeForPush: function (serviceWorkerRegistration) {\n    var notificationPermissionBeforeRequest = OneSignal._getNotificationPermission(OneSignal._initOptions.safari_web_id);\n    serviceWorkerRegistration.pushManager.subscribe({userVisibleOnly: true})\n      .then(function (subscription) {\n        sessionStorage.setItem(\"ONE_SIGNAL_NOTIFICATION_PERMISSION\", Notification.permission);\n\n        Database.get('Ids', 'appId')\n          .then(function _subscribeForPush_GotAppId(appIdResult) {\n            var appId = appIdResult.id;\n            log.debug(\"Called OneSignal._subscribeForPush() -> serviceWorkerRegistration.pushManager.subscribe().\");\n\n            var registrationId = null;\n            if (subscription) {\n              if (typeof subscription.subscriptionId != \"undefined\") // Chrome 43 & 42\n                registrationId = subscription.subscriptionId;\n              else  // Chrome 44+ and FireFox\n                registrationId = subscription.endpoint.replace(new RegExp(\"^(https://android.googleapis.com/gcm/send/|https://updates.push.services.mozilla.com/push/)\"), \"\");\n            }\n            else\n              log.warn('Could not subscribe your browser for push notifications.');\n\n            OneSignal._registerWithOneSignal(appId, registrationId, isSupportedFireFox() ? 8 : 5);\n\n            if (!OneSignal._usingNativePermissionHook) {\n              OneSignal._triggerEvent_nativePromptPermissionChanged(notificationPermissionBeforeRequest);\n            }\n          })\n          .catch(function (e) {\n            log.error(e);\n          });\n      })\n      .catch(function (e) {\n        log.error('Error while subscribing for push:', e);\n\n        // New addition (12/22/2015), adding support for detecting the cancel 'X'\n        // Chrome doesn't show when the user clicked 'X' for cancel\n        // We get the same error as if the user had clicked denied, but we can check Notification.permission to see if it is still 'default'\n        if (OneSignal._getNotificationPermission() === 'default') {\n          // The user clicked 'X'\n          OneSignal._triggerEvent_nativePromptPermissionChanged(notificationPermissionBeforeRequest, undefined, true);\n        }\n\n        if (!OneSignal._usingNativePermissionHook)\n          OneSignal._triggerEvent_nativePromptPermissionChanged(notificationPermissionBeforeRequest);\n\n        if (e.code == 20 && opener && OneSignal._httpRegistration)\n          window.close();\n      });\n  },\n\n  sendTag: function (key, value) {\n    var jsonKeyValue = {};\n    jsonKeyValue[key] = value;\n    OneSignal.sendTags(jsonKeyValue);\n  },\n\n  sendTags: function (jsonPair) {\n    Database.get('Ids', 'userId')\n      .then(function sendTags_GotUserId(userIdResult) {\n        if (userIdResult)\n          OneSignal._sendToOneSignalApi(\"players/\" + userIdResult.id, \"PUT\", {\n            app_id: OneSignal._app_id,\n            tags: jsonPair\n          });\n        else {\n          if (OneSignal._tagsToSendOnRegister == null)\n            OneSignal._tagsToSendOnRegister = jsonPair;\n          else {\n            var resultObj = {};\n            for (var _obj in OneSignal._tagsToSendOnRegister) resultObj[_obj] = OneSignal._tagsToSendOnRegister[_obj];\n            for (var _obj in jsonPair) resultObj[_obj] = jsonPair[_obj];\n            OneSignal._tagsToSendOnRegister = resultObj;\n          }\n        }\n      })\n      .catch(function (e) {\n        log.error('sendTags:', e);\n      });\n  },\n\n  deleteTag: function (key) {\n    OneSignal.deleteTags([key]);\n  },\n\n  deleteTags: function (keyArray) {\n    var jsonPair = {};\n    var length = keyArray.length;\n    for (var i = 0; i < length; i++)\n      jsonPair[keyArray[i]] = \"\";\n\n    OneSignal.sendTags(jsonPair);\n  },\n\n  _handleNotificationOpened: function (event) {\n    var notificationData = JSON.parse(event.notification.tag);\n    event.notification.close();\n\n    Promise.all([Database.get('Ids', 'appId'), Database.get('Ids', 'userId')])\n      .then(function _handleNotificationOpened_GotAppUserIds(results) {\n        var appIdResult = results[0];\n        var userIdResult = results[1];\n        if (appIdResult && userIdResult) {\n          OneSignal._sendToOneSignalApi(\"notifications/\" + notificationData.id, \"PUT\", {\n            app_id: appIdResult.id,\n            player_id: userIdResult.id,\n            opened: true\n          });\n        }\n      })\n      .catch(function (e) {\n        log.error(e);\n      });\n    ;\n\n    event.waitUntil(\n      clients.matchAll({type: \"window\"})\n        .then(function (clientList) {\n          var launchURL = registration.scope;\n          if (OneSignal._defaultLaunchURL)\n            launchURL = OneSignal._defaultLaunchURL;\n          if (notificationData.launchURL)\n            launchURL = notificationData.launchURL;\n\n          for (var i = 0; i < clientList.length; i++) {\n            var client = clientList[i];\n            if ('focus' in client && client.url == launchURL) {\n              client.focus();\n\n              // targetOrigin not valid here as the service worker owns the page.\n              client.postMessage(notificationData);\n              return;\n            }\n          }\n\n          if (launchURL !== 'javascript:void(0);' && launchURL !== 'do_not_open') {\n            Database.put(\"NotificationOpened\", {url: launchURL, data: notificationData});\n            clients.openWindow(launchURL).catch(function (error) {\n              // Should only fall into here if going to an external URL on Chrome older than 43.\n              clients.openWindow(registration.scope + \"redirector.html?url=\" + launchURL);\n            });\n          }\n        })\n        .catch(function (e) {\n          log.error(e);\n        })\n    );\n  },\n\n  // HTTP & HTTPS - Runs on main page (receives events from iframe / popup)\n  _listener_receiveMessage: function receiveMessage(event) {\n    if (event.data.from) {\n      var from = event.data.from.capitalize()\n    } else {\n      var from = 'IFrame/Popup';\n    }\n    log.debug(`%c${Environment.getEnv().capitalize()} ⬸ ${from}:`, getConsoleStyle('postmessage'), event.data);\n\n    if (OneSignal._initOptions == undefined)\n      return;\n\n    if (!__DEV__ && event.origin !== \"\" && event.origin !== \"https://onesignal.com\" && event.origin !== \"https://\" + OneSignal._initOptions.subdomainName + \".onesignal.com\")\n      return;\n\n    if (event.data.oneSignalInitPageReady) { // Only called on HTTP pages.\n      var eventData = event.data.oneSignalInitPageReady;\n\n      if (eventData.isIframe) {\n        OneSignal._iframePort = event.ports[0];\n      }\n\n      if (eventData.userId)\n        Database.put(\"Ids\", {type: \"userId\", id: eventData.userId});\n      if (eventData.registrationId)\n        Database.put(\"Ids\", {type: \"registrationId\", id: eventData.registrationId});\n\n      OneSignal._fireNotificationEnabledCallback(eventData.isPushEnabled);\n      OneSignal._sendUnsentTags();\n\n      Database.get(\"Options\")\n        .then(function _listener_receiveMessage(options) {\n          if (!options.defaultUrl)\n            options.defaultUrl = document.URL;\n          if (!options.defaultTitle)\n            options.defaultTitle = document.title;\n\n          options.parent_url = document.URL;\n          event.ports[0].postMessage({initOptions: options, from: Environment.getEnv()});\n\n          // For HTTP sites, only now is the SDK initialized and able to communicate with the iframe\n          Event.trigger(OneSignal.EVENTS.SDK_INITIALIZED);\n        })\n        .catch(function (e) {\n          log.error('_listener_receiveMessage:', e);\n        });\n    }\n    else if (event.data.currentNotificationPermission) { // Subdomain Only\n      OneSignal._fireNotificationEnabledCallback(event.data.currentNotificationPermission.isPushEnabled);\n    }\n    else if (event.data.idsAvailable) { // Only called on HTTP pages.\n      sessionStorage.setItem(\"ONE_SIGNAL_SESSION\", true);\n      Database.put(\"Ids\", {type: \"userId\", id: event.data.idsAvailable.userId});\n      Database.put(\"Ids\", {type: \"registrationId\", id: event.data.idsAvailable.registrationId});\n\n      if (OneSignal._idsAvailable_callback.length > 0) {\n        while (OneSignal._idsAvailable_callback.length > 0) {\n          var curr_callback = OneSignal._idsAvailable_callback.pop()\n          curr_callback({\n            userId: event.data.idsAvailable.userId,\n            registrationId: event.data.idsAvailable.registrationId\n          });\n        }\n      }\n      OneSignal._sendUnsentTags();\n    }\n    else if (event.data.httpsPromptAccepted) { // HTTPS Only\n      OneSignal.registerForPushNotifications();\n      OneSignal.setSubscription(true);\n      let elem = document.getElementById('OneSignal-iframe-modal');\n      elem.parentNode.removeChild(elem);\n      OneSignal._triggerEvent_customPromptClicked('granted');\n    }\n    else if (event.data.httpsPromptCanceled) { // HTTPS Only\n      let elem = document.getElementById('OneSignal-iframe-modal');\n      elem.parentNode.removeChild(elem);\n      OneSignal._triggerEvent_customPromptClicked('denied');\n    }\n    else if (event.data.httpPromptAccepted) { // HTTP Only\n      OneSignal._triggerEvent_customPromptClicked('granted');\n    }\n    else if (event.data.httpPromptCanceled) { // HTTP Only\n      OneSignal._triggerEvent_customPromptClicked('denied');\n    }\n    else if (event.data.httpNativePromptPermissionChanged) {\n      var recentPermissions = LimitStore.get('notification.permission');\n      var permissionBeforePrompt = recentPermissions[0];\n      OneSignal._triggerEvent_nativePromptPermissionChanged(permissionBeforePrompt, event.data.httpNativePromptPermissionChanged);\n    }\n    else if (OneSignal._notificationOpened_callback) { // HTTP and HTTPS\n      OneSignal._notificationOpened_callback(event.data);\n    }\n  },\n\n  addListenerForNotificationOpened: function (callback) {\n    OneSignal._notificationOpened_callback = callback;\n    if (window) {\n      Database.get(\"NotificationOpened\", document.URL)\n        .then(function (notificationOpenedResult) {\n          if (notificationOpenedResult) {\n            Database.remove(\"NotificationOpened\", document.URL);\n            OneSignal._notificationOpened_callback(notificationOpenedResult.data);\n          }\n        })\n        .catch(function (e) {\n          log.error(e);\n        });\n      ;\n    }\n  },\n\n  // Subdomain - Fired from message received from iframe.\n  _fireNotificationEnabledCallback: function (newNotificationPermission) {\n    if (OneSignal._isNotificationEnabledCallback) {\n      while (OneSignal._isNotificationEnabledCallback.length > 0) {\n        let callback = OneSignal._isNotificationEnabledCallback.pop();\n        callback(newNotificationPermission);\n      }\n    }\n  },\n\n  getIdsAvailable: function (callback) {\n    if (callback === undefined)\n      return;\n\n    OneSignal._idsAvailable_callback.push(callback);\n\n    Promise.all([Database.get('Ids', 'userId'), Database.get('Ids', 'registrationId')])\n      .then(function getIdsAvailable_GotUserRegistrationIds(results) {\n        var userIdResult = results[0];\n        var registrationIdResult = results[1];\n\n        if (userIdResult) {\n          if (registrationIdResult) {\n            while (OneSignal._idsAvailable_callback.length > 0) {\n              var curr_callback = OneSignal._idsAvailable_callback.pop();\n              curr_callback({\n                userId: userIdResult.id,\n                registrationId: registrationIdResult.id\n              });\n            }\n          }\n          else\n            while (OneSignal._idsAvailable_callback.length > 0) {\n              var curr_callback = OneSignal._idsAvailable_callback.pop();\n              curr_callback({userId: userIdResult.id, registrationId: null});\n            }\n        }\n      })\n      .catch(function (e) {\n        log.error(e);\n      });\n    ;\n  },\n\n  getTags: function (callback) {\n    Database.get('Ids', 'userId')\n      .then(function (userIdResult) {\n        if (userIdResult) {\n          OneSignal._sendToOneSignalApi(\"players/\" + userIdResult.id, 'GET', null, function (response) {\n            callback(response.tags);\n          });\n        }\n      })\n      .catch(function (e) {\n        log.error(e);\n      });\n    ;\n  },\n\n  isPushNotificationsEnabled: function (callback) {\n    if (!isPushNotificationsSupported()) {\n      log.warn(\"Your browser does not support push notifications.\");\n      return;\n    }\n\n    // If Subdomain\n    if (OneSignal._initOptions.subdomainName && !isBrowserSafari()) {\n      OneSignal._isNotificationEnabledCallback.push(callback);\n      if (OneSignal._iframePort) {\n        OneSignal._iframePort.postMessage({getNotificationPermission: true, from: Environment.getEnv()});\n      }\n      return;\n    }\n\n    // If HTTPS\n\n    Promise.all([Database.get('Ids', 'registrationId'), Database.get('Options', 'subscription')])\n      .then(function (results) {\n        var registrationIdResult = results[0];\n        var subscriptionResult = results[1];\n\n        if (registrationIdResult) {\n          if (subscriptionResult && !subscriptionResult.value)\n            return callback(false);\n\n          callback(Notification.permission == \"granted\");\n        }\n        else\n          callback(false);\n      })\n      .catch(function (e) {\n        log.error(e);\n      });\n  },\n\n  _getNotificationTypes: function (callback) {\n    OneSignal._getSubscription((currentSubscription) => {\n      callback(currentSubscription ? 1 : -2);\n    });\n  },\n\n  setSubscription: function (newSubscription) {\n    return new Promise((resolve, reject) => {\n      if (OneSignal._iframePort)\n        OneSignal._iframePort.postMessage({setSubdomainState: {setSubscription: newSubscription}, from: Environment.getEnv()});\n      else {\n        OneSignal._getSubscription()\n          .then((currentSubscription) => {\n            if (currentSubscription != newSubscription) {\n              return Database.put(\"Options\", {key: \"subscription\", value: newSubscription});\n            } else reject(`Called %csetSubscription(${newSubscription})`, getConsoleStyle('code'), 'but there was no change, so skipping call.');\n          })\n          .then(() => Database.get('Ids', 'userId'))\n          .then((userIdResult) => {\n            if (userIdResult) {\n              return apiCall(\"players/\" + userIdResult.id, \"PUT\", {\n                app_id: OneSignal._app_id,\n                notification_types: newSubscription ? 1 : -2\n              });\n            }\n            else reject(`Called %csetSubscription(${newSubscription})`, getConsoleStyle('code'), 'but there was no user ID, so the result was not forwarded to OneSignal.');\n          })\n          .then(() => {\n            OneSignal._triggerEvent_internalSubscriptionSet(newSubscription);\n            resolve();\n          })\n          .catch((e) => {\n            if (e.constructor.name === 'Error') {\n              log.error(e);\n              reject(e);\n            } else {\n              resolve(e);\n            }\n          });\n      }\n    });\n  },\n\n  /**\n   * Returns a promise that resolves to false if setSubscription(false) has been explicitly called at any point in time. Otherwise returns true.\n   * This means a return value of true does not mean the user is subscribed, only that the user did not call setSubcription(false).\n   * @private\n   * @returns {Promise}\n   */\n  _getSubscription: function () {\n    return new Promise((resolve, reject) => {\n      Database.get('Options', 'subscription')\n        .then(subscriptionResult => {\n          resolve(!(subscriptionResult && subscriptionResult.value == false))\n        })\n        .catch(e => {\n          log.error(e);\n          reject(e);\n        });\n    });\n  },\n\n  _safePostMessage: function (creator, data, targetOrigin, receiver) {\n    var tOrigin = targetOrigin.toLowerCase();\n\n    // If we are trying to target a http site allow the https version. (w/ or w/o 'wwww.' too)\n    if (tOrigin.startsWith(\"http://\")) {\n      var queryDict = {};\n      location.search.substr(1).split(\"&\").forEach(function (item) {\n        queryDict[item.split(\"=\")[0]] = item.split(\"=\")[1]\n      });\n      var validPreURLRegex = /^http(s|):\\/\\/(www\\.|)/;\n      tOrigin = tOrigin.replace(validPreURLRegex, queryDict[\"hostPageProtocol\"]);\n    }\n\n    if (!data.from) {\n      data['from'] = Environment.getEnv();\n    }\n\n    if (receiver)\n      creator.postMessage(data, tOrigin, receiver);\n    else\n      creator.postMessage(data, tOrigin);\n  },\n\n  _process_pushes: function (array) {\n    for (var i = 0; i < array.length; i++)\n      OneSignal.push(array[i]);\n  },\n\n  push: function (item) {\n    if (typeof(item) == \"function\")\n      item();\n    else {\n      var functionName = item.shift();\n      OneSignal[functionName].apply(null, item);\n    }\n  }\n};\n\n// If imported on your page.\nif (Environment.isBrowser())\n  window.addEventListener(\"message\", OneSignal._listener_receiveMessage, false);\nelse { // if imported from the service worker.\n\n}\n\nif (OneSignal.LOGGING)\n  log.setDefaultLevel(log.levels.TRACE);\nelse\n  log.setDefaultLevel(log.levels.ERROR);\n\nlog.info(`%cOneSignal Web SDK loaded (version ${OneSignal._VERSION}, ${Environment.getEnv()} environment).`, getConsoleStyle('bold'));\n\nmodule.exports = OneSignal;\n\n\n/** WEBPACK FOOTER **\n ** ./src/sdk.js\n **/","/*** IMPORTS FROM imports-loader ***/\n(function() {\n\n(function() {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var list = this.map[name]\n    if (!list) {\n      list = []\n      this.map[name] = list\n    }\n    list.push(value)\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    var values = this.map[normalizeName(name)]\n    return values ? values[0] : null\n  }\n\n  Headers.prototype.getAll = function(name) {\n    return this.map[normalizeName(name)] || []\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = [normalizeValue(value)]\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    Object.getOwnPropertyNames(this.map).forEach(function(name) {\n      this.map[name].forEach(function(value) {\n        callback.call(thisArg, value, name, this)\n      }, this)\n    }, this)\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    reader.readAsArrayBuffer(blob)\n    return fileReaderReady(reader)\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    reader.readAsText(blob)\n    return fileReaderReady(reader)\n  }\n\n  var support = {\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob();\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (!body) {\n        this._bodyText = ''\n      } else if (support.arrayBuffer && ArrayBuffer.prototype.isPrototypeOf(body)) {\n        // Only support ArrayBuffers for POST method.\n        // Receiving ArrayBuffers happens via Blobs, instead.\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n\n      this.text = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return readBlobAsText(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as text')\n        } else {\n          return Promise.resolve(this._bodyText)\n        }\n      }\n    } else {\n      this.text = function() {\n        var rejected = consumed(this)\n        return rejected ? rejected : Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n    if (Request.prototype.isPrototypeOf(input)) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = input\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this)\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function headers(xhr) {\n    var head = new Headers()\n    var pairs = xhr.getAllResponseHeaders().trim().split('\\n')\n    pairs.forEach(function(header) {\n      var split = header.trim().split(':')\n      var key = split.shift().trim()\n      var value = split.join(':').trim()\n      head.append(key, value)\n    })\n    return head\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this._initBody(bodyInit)\n    this.type = 'default'\n    this.status = options.status\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = options.statusText\n    this.headers = options.headers instanceof Headers ? options.headers : new Headers(options.headers)\n    this.url = options.url || ''\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers;\n  self.Request = Request;\n  self.Response = Response;\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request\n      if (Request.prototype.isPrototypeOf(input) && !init) {\n        request = input\n      } else {\n        request = new Request(input, init)\n      }\n\n      var xhr = new XMLHttpRequest()\n\n      function responseURL() {\n        if ('responseURL' in xhr) {\n          return xhr.responseURL\n        }\n\n        // Avoid security warnings on getResponseHeader when not allowed by CORS\n        if (/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())) {\n          return xhr.getResponseHeader('X-Request-URL')\n        }\n\n        return;\n      }\n\n      xhr.onload = function() {\n        var status = (xhr.status === 1223) ? 204 : xhr.status\n        if (status < 100 || status > 599) {\n          reject(new TypeError('Network request failed'))\n          return\n        }\n        var options = {\n          status: status,\n          statusText: xhr.statusText,\n          headers: headers(xhr),\n          url: responseURL()\n        }\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})();\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = global.fetch\n}.call(global));\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/imports-loader?this=>global!./~/exports-loader?global.fetch!./~/whatwg-fetch/fetch.js\n ** module id = 3\n ** module chunks = 0 1\n **/","import { isDev } from './utils.js';\n\nexport const DEV_HOST = 'https://192.168.1.206:3000';\nexport const PROD_HOST = 'https://onesignal.com';\nexport const HOST_URL = (isDev() ? DEV_HOST : PROD_HOST);\nexport const API_URL = (isDev() ? DEV_HOST : PROD_HOST) + '/api/v1/';\n\n// ⬸ ⤑\n\n\n/** WEBPACK FOOTER **\n ** ./src/vars.js\n **/","import log from 'loglevel';\n\nexport function isArray(variable) {\n  return Object.prototype.toString.call( variable ) === '[object Array]';\n}\n\nexport function getHumanizedTimeDuration(timeDurationInMilliseconds) {\n  function addPluralSuffix(number) {\n    return (number > 1) ? 's' : '';\n  }\n  var duration = Math.floor(timeDurationInMilliseconds / 1000);\n\n  var years = Math.floor(duration / 31536000);\n  if (years)\n    return years + ' year' + addPluralSuffix(years);\n\n  var days = Math.floor((duration %= 31536000) / 86400);\n  if (days)\n    return days + ' day' + addPluralSuffix(days);\n\n  var hours = Math.floor((duration %= 86400) / 3600);\n  if (hours)\n    return hours + ' hour' + addPluralSuffix(hours);\n\n  var minutes = Math.floor((duration %= 3600) / 60);\n  if (minutes)\n    return minutes + ' minute' + addPluralSuffix(minutes);\n\n  var seconds = duration % 60;\n  if (seconds)\n    return seconds + ' second' + addPluralSuffix(seconds);\n\n  return 'just now';\n}\n\nexport function isDev() {\n  return __DEV__;\n}\n\nexport function isPushNotificationsSupported () {\n  var chromeVersion = navigator.appVersion.match(/Chrome\\/(.*?) /);\n\n  if (isSupportedFireFox())\n    return true;\n\n  if (isSupportedSafari())\n    return true;\n\n  // Chrome is not found in appVersion.\n  if (!chromeVersion)\n    return false;\n\n  // Microsoft Edge\n  if (navigator.appVersion.match(/Edge/))\n    return false;\n\n  // Android Chrome WebView\n  if (navigator.appVersion.match(/ wv/))\n    return false;\n\n  // Opera\n  if (navigator.appVersion.match(/OPR\\//))\n    return false;\n\n  // The user is on iOS\n  if (/iPad|iPhone|iPod/.test(navigator.platform))\n    return false;\n\n  return parseInt(chromeVersion[1].substring(0, 2)) > 41;\n}\n\nexport function isBrowserSafari() {\n  var safariVersion = navigator.appVersion.match(\"Version/([0-9]?).* Safari\");\n  return safariVersion != null ;\n}\n\nexport function isSupportedFireFox() {\n  var fireFoxVersion = navigator.userAgent.match(/(Firefox\\/)([0-9]{2,}\\.[0-9]{1,})/);\n  if (fireFoxVersion)\n    return parseInt(fireFoxVersion[2].substring(0, 2)) > 43;\n  return false;\n}\n\nexport function isBrowserFirefox() {\n  var fireFoxVersion = navigator.userAgent.match(/(Firefox\\/)([0-9]{2,}\\.[0-9]{1,})/);\n  return fireFoxVersion != null ;\n}\n\nexport function getFirefoxVersion() {\n  var fireFoxVersion = navigator.userAgent.match(/(Firefox\\/)([0-9]{2,}\\.[0-9]{1,})/);\n  if (fireFoxVersion)\n    return parseInt(fireFoxVersion[2].substring(0, 2));\n  else return -1;\n}\n\nexport function isSupportedSafari() {\n  var safariVersion = navigator.appVersion.match(\"Version/([0-9]?).* Safari\");\n  if (safariVersion == null)\n    return false;\n  if (/iPhone|iPad|iPod/i.test(navigator.userAgent))\n    return false;\n  return (parseInt(safariVersion[1]) > 6);\n}\n\nexport function removeDomElement(selector) {\n  var els = document.querySelectorAll(selector);\n  if (els.length > 0) {\n    for (let i = 0; i < els.length; i++)\n      els[i].parentNode.removeChild(els[i]);\n  }\n}\n\nexport function addDomElement(targetSelectorOrElement, addOrder, elementHtml) {\n  if (typeof targetSelectorOrElement === 'string')\n    document.querySelector(targetSelectorOrElement).insertAdjacentHTML(addOrder, elementHtml);\n  else if (typeof targetSelectorOrElement === 'object')\n    targetSelectorOrElement.insertAdjacentHTML(addOrder, elementHtml);\n  else\n    throw new Error(`${targetSelectorOrElement} must be a CSS selector string or DOM Element object.`);\n}\n\nexport function clearDomElementChildren(targetSelectorOrElement) {\n  if (typeof targetSelectorOrElement === 'string') {\n    var element = document.querySelector(targetSelectorOrElement);\n    while (element.firstChild) {\n      element.removeChild(element.firstChild);\n    }\n  }\n  else if (typeof targetSelectorOrElement === 'object') {\n    while (targetSelectorOrElement.firstChild) {\n      targetSelectorOrElement.removeChild(targetSelectorOrElement.firstChild);\n    }\n  }\n  else\n    throw new Error(`${targetSelectorOrElement} must be a CSS selector string or DOM Element object.`);\n}\n\nexport function addCssClass(targetSelectorOrElement, cssClass) {\n  if (typeof targetSelectorOrElement === 'string')\n    document.querySelector(targetSelectorOrElement).classList.add(cssClass);\n  else if (typeof targetSelectorOrElement === 'object')\n    targetSelectorOrElement.classList.add(cssClass);\n  else\n    throw new Error(`${targetSelectorOrElement} must be a CSS selector string or DOM Element object.`);\n}\n\nexport function removeCssClass(targetSelectorOrElement, cssClass) {\n  if (typeof targetSelectorOrElement === 'string')\n    document.querySelector(targetSelectorOrElement).classList.remove(cssClass);\n  else if (typeof targetSelectorOrElement === 'object')\n    targetSelectorOrElement.classList.remove(cssClass);\n  else\n    throw new Error(`${targetSelectorOrElement} must be a CSS selector string or DOM Element object.`);\n}\n\nexport function on(targetSelectorOrElement, event, task) {\n  if (!event) {\n    log.error('Cannot call on() with no event: ', event);\n  }\n  if (!task) {\n    log.error('Cannot call on() with no task: ', task)\n  }\n  log.debug('Debug me here.');\n  if (typeof targetSelectorOrElement === 'string') {\n    let els = document.querySelectorAll(selector);\n    if (els.length > 0) {\n      for (let i = 0; i < els.length; i++)\n        on(els[i], task);\n    }\n  }\n  else if (isArray(targetSelectorOrElement)) {\n    for (let i = 0; i < targetSelectorOrElement.length; i++)\n      on(targetSelectorOrElement[i], task);\n  }\n  else if (typeof targetSelectorOrElement === 'object')\n    targetSelectorOrElement.addEventListener(event, task);\n  else\n    throw new Error(`${targetSelectorOrElement} must be a CSS selector string or DOM Element object.`);\n}\n\nexport function once(targetSelectorOrElement, event, task, manualDestroy=false) {\n  if (!event) {\n    log.error('Cannot call on() with no event: ', event);\n  }\n  if (!task) {\n    log.error('Cannot call on() with no task: ', task)\n  }\n  if (typeof targetSelectorOrElement === 'string') {\n    let els = document.querySelectorAll(selector);\n    if (els.length > 0) {\n      for (let i = 0; i < els.length; i++)\n        once(els[i], task);\n    }\n  }\n  else if (isArray(targetSelectorOrElement)) {\n    for (let i = 0; i < targetSelectorOrElement.length; i++)\n      once(targetSelectorOrElement[i], task);\n  }\n  else if (typeof targetSelectorOrElement === 'object') {\n    var taskWrapper = (function () {\n      var internalTaskFunction = function (e) {\n        var destroyEventListener = function() {\n          targetSelectorOrElement.removeEventListener(e.type, taskWrapper);\n        };\n        if (!manualDestroy) {\n          destroyEventListener();\n        }\n        task(e, destroyEventListener);\n      };\n      return internalTaskFunction;\n    })();\n    targetSelectorOrElement.addEventListener(event, taskWrapper);\n  }\n  else\n    throw new Error(`${targetSelectorOrElement} must be a CSS selector string or DOM Element object.`);\n}\n\n/**\n * Removes event handler from selector.\n * @param targetSelectorOrElement Selector to target one or multiple elements, or a single or array of DOMElement.\n * @param event The event to target (e.g. 'transitionend')\n * @param task A single function callback to unbind, or leave empty to remove all event handlers.\n */\nexport function off(targetSelectorOrElement, event, task) {\n  if (typeof targetSelectorOrElement === 'string') {\n    let els = document.querySelectorAll(selector);\n    if (els.length > 0) {\n      for (let i = 0; i < els.length; i++)\n        off(els[i], task);\n    }\n  }\n  else if (isArray(targetSelectorOrElement)) {\n    for (let i = 0; i < targetSelectorOrElement.length; i++)\n      off(targetSelectorOrElement[i], task);\n  }\n  else if (typeof targetSelectorOrElement === 'object')\n    if (task)\n      targetSelectorOrElement.removeEventListener(event, task);\n    else\n      targetSelectorOrElement.removeEventListener(event);\n  else\n    throw new Error(`${targetSelectorOrElement} must be a CSS selector string or DOM Element object.`);\n}\n\nexport function getConsoleStyle(style) {\n  if (style == 'code') {\n    return `\n    padding: 0 5px 2px;\n    border: 1px solid #ddd;\n    -webkit-border-radius: 3px;\n    -moz-border-radius: 3px;\n    border-radius: 3px;\n    background-clip: padding-box;\n    font-family: Monaco,\"DejaVu Sans Mono\",\"Courier New\",monospace;\n    color: #666;\n    `\n  } else if (style == 'bold') {\n    return `\n      font-weight: 600;\n    color: rgb(51, 51, 51);\n    `;\n  } else if (style == 'alert') {\n    return `\n      font-weight: 600;\n    color: red;\n    `;\n  } else if (style == 'event') {\n    return `\n    color: green;\n    `;\n  } else if (style == 'postmessage') {\n    return `\n    color: orange;\n    `;\n  }\n}\n\n/**\n * Returns a promise for the setTimeout() method.\n * @param durationMs\n * @returns {Promise} Returns a promise that resolves when the timeout is complete.\n */\nexport function delay(durationMs) {\n  return new Promise((resolve) => {\n    setTimeout(resolve, durationMs)\n  });\n}\n\nexport function nothing() {\n  return Promise.resolve();\n}\n\nexport function when(condition, promiseIfTrue, promiseIfFalse) {\n  if (promiseIfTrue === undefined)\n    promiseIfTrue = nothing();\n  if (promiseIfFalse === undefined)\n    promiseIfFalse = nothing();\n  return condition ? promiseIfTrue : promiseIfFalse;\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils.js\n **/","import { API_URL } from './vars.js'\nimport log from 'loglevel';\n\nexport function apiCall(action, method, data) {\n  let headers = new Headers();\n  headers.append('Content-Type', 'application/json;charset=UTF-8');\n\n  let contents = {\n    method: method || 'NO_METHOD_SPECIFIED',\n    headers: headers,\n    cache: 'no-cache'\n  };\n  if (data)\n    contents.body = JSON.stringify(data);\n\n  return new Promise((resolve, reject) => {\n    fetch(API_URL + action, contents)\n      .then(function status(response) {\n        if (response.status >= 200 && response.status < 300)\n          return response.json();\n        else\n          reject(new Error(response.statusText));\n      })\n      .then(jsonResponse => {\n        resolve(jsonResponse);\n      })\n      .catch(function (e) {\n        reject(e);\n      });\n  });\n}\n\nexport function sendNotification(appId, playerIds, titles, contents) {\n  var params = {\n    'app_id': appId,\n    'headings': titles,\n    'contents': contents,\n    'include_player_ids': playerIds,\n    'isAnyWeb': true,\n    'url': 'javascript:void(0);'\n  };\n  return apiCall('notifications', 'POST', params);\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/api.js\n **/","/*\r\n* loglevel - https://github.com/pimterry/loglevel\r\n*\r\n* Copyright (c) 2013 Tim Perry\r\n* Licensed under the MIT license.\r\n*/\r\n(function (root, definition) {\r\n    \"use strict\";\r\n    if (typeof module === 'object' && module.exports && typeof require === 'function') {\r\n        module.exports = definition();\r\n    } else if (typeof define === 'function' && typeof define.amd === 'object') {\r\n        define(definition);\r\n    } else {\r\n        root.log = definition();\r\n    }\r\n}(this, function () {\r\n    \"use strict\";\r\n    var noop = function() {};\r\n    var undefinedType = \"undefined\";\r\n\r\n    function realMethod(methodName) {\r\n        if (typeof console === undefinedType) {\r\n            return false; // We can't build a real method without a console to log to\r\n        } else if (console[methodName] !== undefined) {\r\n            return bindMethod(console, methodName);\r\n        } else if (console.log !== undefined) {\r\n            return bindMethod(console, 'log');\r\n        } else {\r\n            return noop;\r\n        }\r\n    }\r\n\r\n    function bindMethod(obj, methodName) {\r\n        var method = obj[methodName];\r\n        if (typeof method.bind === 'function') {\r\n            return method.bind(obj);\r\n        } else {\r\n            try {\r\n                return Function.prototype.bind.call(method, obj);\r\n            } catch (e) {\r\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\r\n                return function() {\r\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\r\n                };\r\n            }\r\n        }\r\n    }\r\n\r\n    // these private functions always need `this` to be set properly\r\n\r\n    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {\r\n        return function () {\r\n            if (typeof console !== undefinedType) {\r\n                replaceLoggingMethods.call(this, level, loggerName);\r\n                this[methodName].apply(this, arguments);\r\n            }\r\n        };\r\n    }\r\n\r\n    function replaceLoggingMethods(level, loggerName) {\r\n        /*jshint validthis:true */\r\n        for (var i = 0; i < logMethods.length; i++) {\r\n            var methodName = logMethods[i];\r\n            this[methodName] = (i < level) ?\r\n                noop :\r\n                this.methodFactory(methodName, level, loggerName);\r\n        }\r\n    }\r\n\r\n    function defaultMethodFactory(methodName, level, loggerName) {\r\n        /*jshint validthis:true */\r\n        return realMethod(methodName) ||\r\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\r\n    }\r\n\r\n    var logMethods = [\r\n        \"trace\",\r\n        \"debug\",\r\n        \"info\",\r\n        \"warn\",\r\n        \"error\"\r\n    ];\r\n\r\n    function Logger(name, defaultLevel, factory) {\r\n      var self = this;\r\n      var currentLevel;\r\n      var storageKey = \"loglevel\";\r\n      if (name) {\r\n        storageKey += \":\" + name;\r\n      }\r\n\r\n      function persistLevelIfPossible(levelNum) {\r\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\r\n\r\n          // Use localStorage if available\r\n          try {\r\n              window.localStorage[storageKey] = levelName;\r\n              return;\r\n          } catch (ignore) {}\r\n\r\n          // Use session cookie as fallback\r\n          try {\r\n              window.document.cookie =\r\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\r\n          } catch (ignore) {}\r\n      }\r\n\r\n      function getPersistedLevel() {\r\n          var storedLevel;\r\n\r\n          try {\r\n              storedLevel = window.localStorage[storageKey];\r\n          } catch (ignore) {}\r\n\r\n          if (typeof storedLevel === undefinedType) {\r\n              try {\r\n                  var cookie = window.document.cookie;\r\n                  var location = cookie.indexOf(\r\n                      encodeURIComponent(storageKey) + \"=\");\r\n                  if (location) {\r\n                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];\r\n                  }\r\n              } catch (ignore) {}\r\n          }\r\n\r\n          // If the stored level is not valid, treat it as if nothing was stored.\r\n          if (self.levels[storedLevel] === undefined) {\r\n              storedLevel = undefined;\r\n          }\r\n\r\n          return storedLevel;\r\n      }\r\n\r\n      /*\r\n       *\r\n       * Public API\r\n       *\r\n       */\r\n\r\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\r\n          \"ERROR\": 4, \"SILENT\": 5};\r\n\r\n      self.methodFactory = factory || defaultMethodFactory;\r\n\r\n      self.getLevel = function () {\r\n          return currentLevel;\r\n      };\r\n\r\n      self.setLevel = function (level, persist) {\r\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\r\n              level = self.levels[level.toUpperCase()];\r\n          }\r\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\r\n              currentLevel = level;\r\n              if (persist !== false) {  // defaults to true\r\n                  persistLevelIfPossible(level);\r\n              }\r\n              replaceLoggingMethods.call(self, level, name);\r\n              if (typeof console === undefinedType && level < self.levels.SILENT) {\r\n                  return \"No console available for logging\";\r\n              }\r\n          } else {\r\n              throw \"log.setLevel() called with invalid level: \" + level;\r\n          }\r\n      };\r\n\r\n      self.setDefaultLevel = function (level) {\r\n          if (!getPersistedLevel()) {\r\n              self.setLevel(level, false);\r\n          }\r\n      };\r\n\r\n      self.enableAll = function(persist) {\r\n          self.setLevel(self.levels.TRACE, persist);\r\n      };\r\n\r\n      self.disableAll = function(persist) {\r\n          self.setLevel(self.levels.SILENT, persist);\r\n      };\r\n\r\n      // Initialize with the right level\r\n      var initialLevel = getPersistedLevel();\r\n      if (initialLevel == null) {\r\n          initialLevel = defaultLevel == null ? \"WARN\" : defaultLevel;\r\n      }\r\n      self.setLevel(initialLevel, false);\r\n    }\r\n\r\n    /*\r\n     *\r\n     * Package-level API\r\n     *\r\n     */\r\n\r\n    var defaultLogger = new Logger();\r\n\r\n    var _loggersByName = {};\r\n    defaultLogger.getLogger = function getLogger(name) {\r\n        if (typeof name !== \"string\" || name === \"\") {\r\n          throw new TypeError(\"You must supply a name when creating a logger.\");\r\n        }\r\n\r\n        var logger = _loggersByName[name];\r\n        if (!logger) {\r\n          logger = _loggersByName[name] = new Logger(\r\n            name, defaultLogger.getLevel(), defaultLogger.methodFactory);\r\n        }\r\n        return logger;\r\n    };\r\n\r\n    // Grab the current global log variable in case of overwrite\r\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\r\n    defaultLogger.noConflict = function() {\r\n        if (typeof window !== undefinedType &&\r\n               window.log === defaultLogger) {\r\n            window.log = _log;\r\n        }\r\n\r\n        return defaultLogger;\r\n    };\r\n\r\n    return defaultLogger;\r\n}));\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/loglevel/lib/loglevel.js\n ** module id = 7\n ** module chunks = 0 1\n **/","/*\n LimitStore.put('colorado', 'rocky');\n [\"rocky\"]\n LimitStore.put('colorado', 'mountain');\n [\"rocky\", \"mountain\"]\n LimitStore.put('colorado', 'national');\n [\"mountain\", \"national\"]\n LimitStore.put('colorado', 'park');\n [\"national\", \"park\"]\n */\nfunction LimitStore() {\n}\n\nLimitStore.store = {};\nLimitStore.LIMIT = 2;\n\nLimitStore.put = function (key, value) {\n  if (LimitStore.store[key] === undefined) {\n    LimitStore.store[key] = [null, null];\n  }\n  LimitStore.store[key].push(value);\n  if (LimitStore.store[key].length == LimitStore.LIMIT + 1) {\n    LimitStore.store[key].shift();\n  }\n  return LimitStore.store[key];\n};\n\nLimitStore.get = function (key) {\n  if (LimitStore.store[key] === undefined) {\n    LimitStore.store[key] = [null, null];\n  }\n  return LimitStore.store[key];\n};\n\nLimitStore.getFirst = function (key) {\n  return LimitStore.get(key)[0];\n};\n\nLimitStore.getLast = function (key) {\n  return LimitStore.get(key)[1];\n};\n\nLimitStore.isEmpty = function(key) {\n  let values = LimitStore.get(key);\n  return values[0] === null && values[1] === null;\n};\n\nexport default LimitStore;\n\n\n/** WEBPACK FOOTER **\n ** ./src/limitStore.js\n **/","export default class Environment {\n  static get SERVICE_WORKER() {\n    return 'ServiceWorker';\n  }\n\n  static get HOST() {\n    return \"host\";\n  }\n\n  static get POPUP() {\n    return \"popup\";\n  }\n\n  static get IFRAME() {\n    return \"iFrame\";\n  }\n\n  static getEnv() {\n    if (typeof window === \"undefined\") {\n      if (typeof WorkerLocation !== \"undefined\" && location instanceof WorkerLocation)\n        return Environment.SERVICE_WORKER;\n    }\n    else {\n      // If the window is the root top-most level\n      if (window.self === window.top) {\n        if (location.href.indexOf(\"initOneSignal\") > -1)\n          return Environment.POPUP;\n        else\n          return Environment.HOST;\n      }\n      else\n        return Environment.IFRAME;\n    }\n  }\n\n  static isServiceWorker() {\n    return Environment.getEnv() === Environment.SERVICE_WORKER;\n  }\n\n  static isHost() {\n    return Environment.getEnv() === Environment.HOST;\n  }\n\n  static isPopup() {\n    return Environment.getEnv() === Environment.POPUP;\n  }\n\n  static isIframe() {\n    return Environment.getEnv() === Environment.IFRAME;\n  }\n\n  static isBrowser() {\n    return typeof window !== 'undefined';\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/environment.js\n **/","/**\n * Capitalizes the first letter of the string.\n * @returns {string} The string with the first letter capitalized.\n */\nString.prototype.capitalize = function() {\n  return this.charAt(0).toUpperCase() + this.slice(1);\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/string.js\n **/","import log from 'loglevel';\nimport Environment from './environment.js';\nimport { getConsoleStyle } from './utils.js';\n\n\nconst SILENT_EVENTS = [\n  'onesignal.bell.hovering',\n  'onesignal.bell.hovered',\n  'onesignal.bell.launcher.button.click',\n  'onesignal.bell.launcher.click',\n  'onesignal.bell.animatedelement.hiding',\n  'onesignal.bell.animatedelement.hidden',\n  'onesignal.bell.animatedelement.showing',\n  'onesignal.bell.animatedelement.shown',\n  'onesignal.bell.activeanimatedelement.activating',\n  'onesignal.bell.activeanimatedelement.active',\n  'onesignal.bell.activeanimatedelement.inactivating',\n  'onesignal.bell.activeanimatedelement.inactive',\n  //'onesignal.db.retrieved',\n  'onesignal.db.set'];\n\nexport default class Event {\n  static trigger(eventName, data) {\n    if (!eventName) {\n      log.trace();\n    }\n    if (SILENT_EVENTS.indexOf(eventName) == -1) {\n      if (!Environment.isBrowser()) {\n        log.debug(`%c${eventName}:`, getConsoleStyle('event'), data, '(not triggered in a ServiceWorker environment)');\n        return;\n      } else {\n        let displayData = data;\n        if (displayData || displayData === false) {\n          log.debug(`» %c${eventName}:`, getConsoleStyle('event'), displayData);\n        } else {\n          log.debug(`» %c${eventName}`, getConsoleStyle('event'));\n        }\n      }\n    }\n    if (Environment.isBrowser()) {\n      var event = new CustomEvent(eventName, {\n        bubbles: true, cancelable: true, detail: data\n      });\n      window.dispatchEvent(event);\n    }\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/events.js\n **/","import { isPushNotificationsSupported, removeDomElement, addDomElement, clearDomElementChildren, addCssClass, removeCssClass, once, on, off, getConsoleStyle, delay, when, nothing } from '../utils.js';\nimport Environment from '../environment.js';\nimport LimitStore from '../limitStore.js';\nimport log from 'loglevel';\nimport Event from '../events.js';\nimport bowser from 'bowser';\nimport { HOST_URL } from '../vars.js';\nimport AnimatedElement from './AnimatedElement.js';\nimport ActiveAnimatedElement from './ActiveAnimatedElement.js';\nimport Launcher from './Launcher.js';\nimport Badge from './Badge.js';\nimport Button from './Button.js';\nimport Dialog from './Dialog.js';\nimport Message from './Message.js';\n\nimport \"./bell.scss\";\nvar logoSvg = require('raw!./bell.svg');\n\n/*\n {\n size = ['small', 'medium', 'large'],\n position = 'bottom-left', 'bottom-right'],\n offset = '15px 15px',\n theme = ['red-white', 'white-red'],\n inactiveOpacity: 0.75,\n showLauncherAfter: 1000,\n messages: {\n 'unsubscribed': 'Subscribe to notifications',\n 'subscribed': 'You're subscribed to notifications'\n }\n }\n */\nexport default class Bell {\n\n  static get EVENTS() {\n    return {\n      STATE_CHANGED: 'onesignal.bell.state.changed',\n      LAUNCHER_CLICK: 'onesignal.bell.launcher.click',\n      BELL_CLICK: 'onesignal.bell.launcher.button.click',\n      SUBSCRIBE_CLICK: 'onesignal.bell.launcher.dialog.button.subscribe.click',\n      UNSUBSCRIBE_CLICK: 'onesignal.bell.launcher.dialog.button.unsubscribe.click',\n      HOVERING: 'onesignal.bell.hovering',\n      HOVERED: 'onesignal.bell.hovered',\n    };\n  }\n\n  static get STATES() {\n    return {\n      UNINITIALIZED: 'uninitialized',\n      SUBSCRIBED: 'subscribed',\n      UNSUBSCRIBED: 'unsubscribed',\n      BLOCKED: 'blocked'\n    };\n  }\n\n  constructor({\n    size = 'small',\n    position = 'bottom-left',\n    theme = 'default',\n    showLauncherAfter = 10,\n    showBadgeAfter = 300,\n    text = {\n      'tip.state.unsubscribed': 'Subscribe to notifications',\n      'tip.state.subscribed': \"You're subscribed to notifications\",\n      'tip.state.blocked': \"You've blocked notifications\",\n      'tip.action.subscribed': \"Thanks for subscribing!\",\n      'tip.action.unsubscribed': \"You won't receive notifications again\",\n      'dialog.main.title': 'Manage Site Notifications',\n      'dialog.main.button.subscribe': 'SUBSCRIBE',\n      'dialog.main.button.unsubscribe': 'UNSUBSCRIBE',\n      'dialog.blocked.title': 'Unblock Notifications',\n      'dialog.blocked.message': \"Follow these instructions to allow notifications:\"\n    },\n    prenotify = true\n    } = {}) {\n    this.options = {\n      size: size,\n      position: position,\n      theme: theme,\n      showLauncherAfter: showLauncherAfter,\n      showBadgeAfter: showBadgeAfter,\n      text: text,\n      prenotify: prenotify\n    };\n    if (['small', 'medium', 'large'].indexOf(this.options.size) < 0)\n      throw new Error(`Invalid size ${this.options.size} for bell. Choose among 'small', 'medium', or 'large'.`);\n    if (['bottom-left', 'bottom-right'].indexOf(this.options.position) < 0)\n      throw new Error(`Invalid position ${this.options.position} for bell. Choose either 'bottom-left', or 'bottom-right'.`);\n    if (['default', 'inverse'].indexOf(this.options.theme) < 0)\n      throw new Error(`Invalid theme ${this.options.theme} for bell. Choose either 'default', or 'inverse'.`);\n    if (this.options.showLauncherAfter < 0)\n      throw new Error(`Invalid delay duration of ${this.options.showLauncherAfter} for showing the bell. Choose a value above 0.`);\n    if (this.options.showBadgeAfter < 0)\n      throw new Error(`Invalid delay duration of ${this.options.showBadgeAfter} for showing the bell's badge. Choose a value above 0.`);\n    this.size = this.options.size;\n    this.position = this.options.position;\n    this.text = this.options.text;\n    this.messages = {};\n    this.messages.queued = [];\n    if (!this.text['tip.state.unsubscribed'])\n      this.text['tip.state.unsubscribed'] = 'Subscribe to notifications';\n    if (!this.text['tip.state.subscribed'])\n      this.text['tip.state.subscribed'] = \"You're subscribed to notifications\";\n    if (!this.text['tip.state.blocked'])\n      this.text['tip.state.blocked'] = \"You've blocked notifications\";\n    if (!this.text['tip.action.subscribed'])\n      this.text['tip.action.subscribed'] = \"Thanks for subscribing!\";\n    if (!this.text['tip.action.unsubscribed'])\n      this.text['tip.action.unsubscribed'] = \"You won't receive notifications again\";\n    if (!this.text['dialog.main.title'])\n      this.text['dialog.main.title'] = 'Manage Site Notifications';\n    if (!this.text['dialog.main.button.subscribe'])\n      this.text['dialog.main.button.subscribe'] = 'SUBSCRIBE';\n    if (!this.text['dialog.main.button.unsubscribe'])\n      this.text['dialog.main.button.unsubscribe'] = 'UNSUBSCRIBE';\n    if (!this.text['dialog.blocked.title'])\n      this.text['dialog.blocked.title'] = 'Unblock Notifications';\n    this.messages[Bell.STATES.UNSUBSCRIBED] = this.text['tip.state.unsubscribed'];\n    this.messages[Bell.STATES.SUBSCRIBED] = this.text['tip.state.subscribed'];\n    this.messages[Bell.STATES.BLOCKED] = this.text['tip.state.blocked'];\n    this.state = Bell.STATES.UNINITIALIZED;\n\n    // Install event hooks\n    window.addEventListener('focus', (event) => {\n      // Checks if permission changed everytime a user focuses on the page, since a user has to click out of and back on the page to check permissions\n      OneSignal._checkTrigger_nativePermissionChanged();\n    });\n\n    window.addEventListener(Bell.EVENTS.LAUNCHER_CLICK, (event) => {\n      this.launcher.activateIfInactive()\n        .then(() => this.message.hide())\n        .then(() => {\n          if (this.unsubscribed) {\n            let setSubscriptionState = LimitStore.getLast('setsubscription.value');\n            if (setSubscriptionState === false) {\n              // The user manually called setSubscription(false), but the user is actually subscribed\n              this.showDialogProcedure();\n            }\n            else {\n              // The user is actually subscribed, register him for notifications\n              OneSignal.registerForPushNotifications();\n            }\n          }\n          else if (this.subscribed) {\n            this.showDialogProcedure();\n          }\n          else if (this.blocked) {\n            this.showDialogProcedure();\n          }\n        })\n        .catch((e) => log.error(e));\n    });\n\n    window.addEventListener(Bell.EVENTS.SUBSCRIBE_CLICK, () => {\n      Dialog.subscribeButton.disabled = true;\n      OneSignal.setSubscription(true);\n    });\n\n    window.addEventListener(Bell.EVENTS.UNSUBSCRIBE_CLICK, () => {\n      this.launcher.activateIfInactive();\n\n      // If there's already a message being force shown, do not override\n      if (this.message.shown || this.dialog.shown) {\n        return;\n      }\n\n      Promise.resolve(() => {\n        if (this.messages.queued.length > 0) {\n          return this.message.dequeue().then((msg) => this.message.content = msg);\n        } else {\n          return Promise.resolve(() => this.message.content = this.messages[this.state]);\n        }\n      }).then(() => this.message.show())\n    });\n\n    window.addEventListener(Bell.EVENTS.HOVERING, () => {\n      this.launcher.activateIfInactive();\n\n      // If there's already a message being force shown, do not override\n      if (this.message.shown || this.dialog.shown) {\n        return;\n      }\n\n      Promise.resolve(() => {\n        if (this.messages.queued.length > 0) {\n          return this.message.dequeue().then((msg) => this.message.content = msg);\n        } else {\n          return Promise.resolve(() => this.message.content = this.messages[this.state]);\n        }\n      }).then(() => this.message.show())\n    });\n\n    window.addEventListener(Bell.EVENTS.HOVERED, () => {\n      if (this.message.shown) {\n        this.message.hide()\n          .then(() => {\n            this.message.content = this.messages[this.state];\n            if (this.launcher.wasInactive && !this.dialog.shown) {\n              this.launcher.inactivate();\n              this.launcher.wasInactive = null;\n            }\n          });\n      }\n    });\n\n    window.addEventListener(OneSignal.EVENTS.SUBSCRIPTION_CHANGED, (e) => {\n      let isSubscribed = e.detail;\n      this.setState(isSubscribed ? Bell.STATES.SUBSCRIBED : Bell.STATES.UNSUBSCRIBED);\n    });\n\n    window.addEventListener(OneSignal.EVENTS.NATIVE_PROMPT_PERMISSIONCHANGED, (from, to) => {\n      this.updateState();\n    });\n\n    window.addEventListener(OneSignal.EVENTS.WELCOME_NOTIFICATION_SENT, (e) => {\n      this.message.display(this.text['tip.action.subscribed'], 2500)\n        .then(() => {\n          this.launcher.inactivate();\n        })\n        .catch((e) => {\n          log.error(e);\n        });\n    });\n\n    this.updateState();\n  }\n\n  showDialogProcedure() {\n    if (!this.dialog.shown) {\n      this.dialog.show()\n        .then((e) => {\n          once(document, 'click', (e, destroyEventListener) => {\n            let wasDialogClicked = this.dialog.element.contains(e.target);\n            if (wasDialogClicked) {\n            } else {\n              destroyEventListener();\n              this.dialog.hide()\n                .then((e) => {\n                  this.launcher.inactivateIfWasInactive();\n                })\n                .catch((e) => {\n                  log.error(e);\n                });\n            }\n          }, true);\n        })\n        .catch((e) => {\n          log.error(e);\n        });\n    }\n  }\n\n  create() {\n    if (!isPushNotificationsSupported())\n      return;\n\n    // Remove any existing bell\n    if (this.container) {\n      removeDomElement('onesignal-bell-container');\n    }\n\n    window.addDomElement = addDomElement;\n    // Insert the bell container\n    addDomElement('body', 'beforeend', '<div id=\"onesignal-bell-container\" class=\"onesignal-bell-container onesignal-reset\"></div>');\n    // Insert the bell launcher\n    addDomElement(this.container, 'beforeend', '<div id=\"onesignal-bell-launcher\" class=\"onesignal-bell-launcher\"></div>');\n    // Insert the bell launcher button\n    addDomElement(this.launcher.selector, 'beforeend', '<div class=\"onesignal-bell-launcher-button\"></div>');\n    // Insert the bell launcher badge\n    addDomElement(this.launcher.selector, 'beforeend', '<div class=\"onesignal-bell-launcher-badge\"></div>');\n    // Insert the bell launcher message\n    addDomElement(this.launcher.selector, 'beforeend', '<div class=\"onesignal-bell-launcher-message\"></div>');\n    addDomElement(this.message.selector, 'beforeend', '<div class=\"onesignal-bell-launcher-message-body\"></div>');\n    // Insert the bell launcher dialog\n    addDomElement(this.launcher.selector, 'beforeend', '<div class=\"onesignal-bell-launcher-dialog\"></div>');\n    addDomElement(this.dialog.selector, 'beforeend', '<div class=\"onesignal-bell-launcher-dialog-body\"></div>');\n\n    // Install events\n\n    // Add visual elements\n    addDomElement(this.button.selector, 'beforeEnd', logoSvg);\n\n    // Add default classes\n    this.launcher.resize(this.options.size).then(() => {\n      if (this.options.position === 'bottom-left') {\n        addCssClass(this.container, 'onesignal-bell-container-bottom-left')\n        addCssClass(this.launcher.selector, 'onesignal-bell-launcher-bottom-left')\n      }\n      else if (this.options.position === 'bottom-right') {\n        addCssClass(this.container, 'onesignal-bell-container-bottom-right')\n        addCssClass(this.launcher.selector, 'onesignal-bell-launcher-bottom-right')\n      }\n      else {\n        throw new Error('Invalid OneSignal bell position ' + this.options.position);\n      }\n\n      if (this.options.theme === 'default') {\n        addCssClass(this.launcher.selector, 'onesignal-bell-launcher-theme-default')\n      }\n      else if (this.options.theme === 'inverse') {\n        addCssClass(this.launcher.selector, 'onesignal-bell-launcher-theme-inverse')\n      }\n      else {\n        throw new Error('Invalid OneSignal bell theme ' + this.options.theme);\n      }\n\n      //this.launcher.inactivate()\n      //  .then((result) => {\n      //    console.info('Promise resolved yay! Result: ', result);\n      //  })\n\n      OneSignal.isPushNotificationsEnabled((pushEnabled) => {\n        (pushEnabled ? this.launcher.inactivate() : nothing())\n          .then(() => delay(this.options.showLauncherAfter))\n          .then(() => this.launcher.show())\n          .then(() => delay(this.options.showBadgeAfter))\n          .then(() => {\n            if (this.options.prenotify && !pushEnabled && OneSignal._isNewVisitor) {\n              return this.message.enqueue('Click to subscribe to notifications')\n                .then(() => this.badge.show());\n            }\n            else return nothing();\n          })\n          .then(() => this.initialized = true)\n          .catch((e) => log.error(e));\n      });\n    });\n  }\n\n  _getCurrentSetSubscriptionState() {\n    let setSubscriptionState = LimitStore.get('setsubscription.value');\n    var currentSetSubscription = setSubscriptionState[setSubscriptionState.length - 1];\n    return currentSetSubscription;\n  }\n\n  /**\n   * Updates the current state to the correct new current state. Returns a promise.\n   */\n  updateState() {\n    OneSignal.isPushNotificationsEnabled((isEnabled) => {\n      this.setState(isEnabled ? Bell.STATES.SUBSCRIBED : Bell.STATES.UNSUBSCRIBED);\n      if (LimitStore.getLast('notification.permission') === 'denied') {\n        this.setState(Bell.STATES.BLOCKED);\n      }\n    });\n\n  }\n\n  /**\n   * Updates the current state to the specified new state.\n   * @param newState One of ['subscribed', 'unsubscribed'].\n   */\n  setState(newState) {\n    console.trace('%cCalled setState().', getConsoleStyle('bold'));\n    let lastState = this.state;\n    this.state = newState;\n    if (lastState !== newState) {\n      Event.trigger(Bell.EVENTS.STATE_CHANGED, {from: lastState, to: newState});\n      // Update anything that should be changed here in the new state\n    }\n\n    // Update anything that should be reset to the same state\n    // Unless a display message is being set\n    this.message.waitUntilHidden()\n      .then(() => this.message.content = this.messages[newState]);\n  }\n\n  get container() {\n    return document.querySelector('#onesignal-bell-container');\n  }\n\n  get launcher() {\n    if (!this._launcher)\n      this._launcher = new Launcher(this);\n    return this._launcher;\n  }\n\n  get button() {\n    if (!this._button)\n      this._button = new Button(this);\n    return this._button;\n  }\n\n  get badge() {\n    if (!this._badge)\n      this._badge = new Badge(this);\n    return this._badge;\n  }\n\n  get message() {\n    if (!this._message)\n      this._message = new Message(this);\n    return this._message;\n  }\n\n  get dialog() {\n    if (!this._dialog)\n      this._dialog = new Dialog(this);\n    return this._dialog;\n  }\n\n  get subscribed() {\n    return this.state === Bell.STATES.SUBSCRIBED;\n  }\n\n  get unsubscribed() {\n    return this.state === Bell.STATES.UNSUBSCRIBED;\n  }\n\n  get blocked() {\n    return this.state === Bell.STATES.BLOCKED;\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/bell/bell.js\n **/","/*!\n  * Bowser - a browser detector\n  * https://github.com/ded/bowser\n  * MIT License | (c) Dustin Diaz 2015\n  */\n\n!function (name, definition) {\n  if (typeof module != 'undefined' && module.exports) module.exports = definition()\n  else if (typeof define == 'function' && define.amd) define(definition)\n  else this[name] = definition()\n}('bowser', function () {\n  /**\n    * See useragents.js for examples of navigator.userAgent\n    */\n\n  var t = true\n\n  function detect(ua) {\n\n    function getFirstMatch(regex) {\n      var match = ua.match(regex);\n      return (match && match.length > 1 && match[1]) || '';\n    }\n\n    function getSecondMatch(regex) {\n      var match = ua.match(regex);\n      return (match && match.length > 1 && match[2]) || '';\n    }\n\n    var iosdevice = getFirstMatch(/(ipod|iphone|ipad)/i).toLowerCase()\n      , likeAndroid = /like android/i.test(ua)\n      , android = !likeAndroid && /android/i.test(ua)\n      , chromeBook = /CrOS/.test(ua)\n      , edgeVersion = getFirstMatch(/edge\\/(\\d+(\\.\\d+)?)/i)\n      , versionIdentifier = getFirstMatch(/version\\/(\\d+(\\.\\d+)?)/i)\n      , tablet = /tablet/i.test(ua)\n      , mobile = !tablet && /[^-]mobi/i.test(ua)\n      , result\n\n    if (/opera|opr/i.test(ua)) {\n      result = {\n        name: 'Opera'\n      , opera: t\n      , version: versionIdentifier || getFirstMatch(/(?:opera|opr)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/yabrowser/i.test(ua)) {\n      result = {\n        name: 'Yandex Browser'\n      , yandexbrowser: t\n      , version: versionIdentifier || getFirstMatch(/(?:yabrowser)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/windows phone/i.test(ua)) {\n      result = {\n        name: 'Windows Phone'\n      , windowsphone: t\n      }\n      if (edgeVersion) {\n        result.msedge = t\n        result.version = edgeVersion\n      }\n      else {\n        result.msie = t\n        result.version = getFirstMatch(/iemobile\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/msie|trident/i.test(ua)) {\n      result = {\n        name: 'Internet Explorer'\n      , msie: t\n      , version: getFirstMatch(/(?:msie |rv:)(\\d+(\\.\\d+)?)/i)\n      }\n    } else if (chromeBook) {\n      result = {\n        name: 'Chrome'\n      , chromeBook: t\n      , chrome: t\n      , version: getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i)\n      }\n    } else if (/chrome.+? edge/i.test(ua)) {\n      result = {\n        name: 'Microsoft Edge'\n      , msedge: t\n      , version: edgeVersion\n      }\n    }\n    else if (/chrome|crios|crmo/i.test(ua)) {\n      result = {\n        name: 'Chrome'\n      , chrome: t\n      , version: getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (iosdevice) {\n      result = {\n        name : iosdevice == 'iphone' ? 'iPhone' : iosdevice == 'ipad' ? 'iPad' : 'iPod'\n      }\n      // WTF: version is not part of user agent in web apps\n      if (versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    }\n    else if (/sailfish/i.test(ua)) {\n      result = {\n        name: 'Sailfish'\n      , sailfish: t\n      , version: getFirstMatch(/sailfish\\s?browser\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/seamonkey\\//i.test(ua)) {\n      result = {\n        name: 'SeaMonkey'\n      , seamonkey: t\n      , version: getFirstMatch(/seamonkey\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/firefox|iceweasel/i.test(ua)) {\n      result = {\n        name: 'Firefox'\n      , firefox: t\n      , version: getFirstMatch(/(?:firefox|iceweasel)[ \\/](\\d+(\\.\\d+)?)/i)\n      }\n      if (/\\((mobile|tablet);[^\\)]*rv:[\\d\\.]+\\)/i.test(ua)) {\n        result.firefoxos = t\n      }\n    }\n    else if (/silk/i.test(ua)) {\n      result =  {\n        name: 'Amazon Silk'\n      , silk: t\n      , version : getFirstMatch(/silk\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (android) {\n      result = {\n        name: 'Android'\n      , version: versionIdentifier\n      }\n    }\n    else if (/phantom/i.test(ua)) {\n      result = {\n        name: 'PhantomJS'\n      , phantom: t\n      , version: getFirstMatch(/phantomjs\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/blackberry|\\bbb\\d+/i.test(ua) || /rim\\stablet/i.test(ua)) {\n      result = {\n        name: 'BlackBerry'\n      , blackberry: t\n      , version: versionIdentifier || getFirstMatch(/blackberry[\\d]+\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/(web|hpw)os/i.test(ua)) {\n      result = {\n        name: 'WebOS'\n      , webos: t\n      , version: versionIdentifier || getFirstMatch(/w(?:eb)?osbrowser\\/(\\d+(\\.\\d+)?)/i)\n      };\n      /touchpad\\//i.test(ua) && (result.touchpad = t)\n    }\n    else if (/bada/i.test(ua)) {\n      result = {\n        name: 'Bada'\n      , bada: t\n      , version: getFirstMatch(/dolfin\\/(\\d+(\\.\\d+)?)/i)\n      };\n    }\n    else if (/tizen/i.test(ua)) {\n      result = {\n        name: 'Tizen'\n      , tizen: t\n      , version: getFirstMatch(/(?:tizen\\s?)?browser\\/(\\d+(\\.\\d+)?)/i) || versionIdentifier\n      };\n    }\n    else if (/safari/i.test(ua)) {\n      result = {\n        name: 'Safari'\n      , safari: t\n      , version: versionIdentifier\n      }\n    }\n    else {\n      result = {\n        name: getFirstMatch(/^(.*)\\/(.*) /),\n        version: getSecondMatch(/^(.*)\\/(.*) /)\n     };\n   }\n\n    // set webkit or gecko flag for browsers based on these engines\n    if (!result.msedge && /(apple)?webkit/i.test(ua)) {\n      result.name = result.name || \"Webkit\"\n      result.webkit = t\n      if (!result.version && versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    } else if (!result.opera && /gecko\\//i.test(ua)) {\n      result.name = result.name || \"Gecko\"\n      result.gecko = t\n      result.version = result.version || getFirstMatch(/gecko\\/(\\d+(\\.\\d+)?)/i)\n    }\n\n    // set OS flags for platforms that have multiple browsers\n    if (!result.msedge && (android || result.silk)) {\n      result.android = t\n    } else if (iosdevice) {\n      result[iosdevice] = t\n      result.ios = t\n    }\n\n    // OS version extraction\n    var osVersion = '';\n    if (result.windowsphone) {\n      osVersion = getFirstMatch(/windows phone (?:os)?\\s?(\\d+(\\.\\d+)*)/i);\n    } else if (iosdevice) {\n      osVersion = getFirstMatch(/os (\\d+([_\\s]\\d+)*) like mac os x/i);\n      osVersion = osVersion.replace(/[_\\s]/g, '.');\n    } else if (android) {\n      osVersion = getFirstMatch(/android[ \\/-](\\d+(\\.\\d+)*)/i);\n    } else if (result.webos) {\n      osVersion = getFirstMatch(/(?:web|hpw)os\\/(\\d+(\\.\\d+)*)/i);\n    } else if (result.blackberry) {\n      osVersion = getFirstMatch(/rim\\stablet\\sos\\s(\\d+(\\.\\d+)*)/i);\n    } else if (result.bada) {\n      osVersion = getFirstMatch(/bada\\/(\\d+(\\.\\d+)*)/i);\n    } else if (result.tizen) {\n      osVersion = getFirstMatch(/tizen[\\/\\s](\\d+(\\.\\d+)*)/i);\n    }\n    if (osVersion) {\n      result.osversion = osVersion;\n    }\n\n    // device type extraction\n    var osMajorVersion = osVersion.split('.')[0];\n    if (tablet || iosdevice == 'ipad' || (android && (osMajorVersion == 3 || (osMajorVersion == 4 && !mobile))) || result.silk) {\n      result.tablet = t\n    } else if (mobile || iosdevice == 'iphone' || iosdevice == 'ipod' || android || result.blackberry || result.webos || result.bada) {\n      result.mobile = t\n    }\n\n    // Graded Browser Support\n    // http://developer.yahoo.com/yui/articles/gbs\n    if (result.msedge ||\n        (result.msie && result.version >= 10) ||\n        (result.yandexbrowser && result.version >= 15) ||\n        (result.chrome && result.version >= 20) ||\n        (result.firefox && result.version >= 20.0) ||\n        (result.safari && result.version >= 6) ||\n        (result.opera && result.version >= 10.0) ||\n        (result.ios && result.osversion && result.osversion.split(\".\")[0] >= 6) ||\n        (result.blackberry && result.version >= 10.1)\n        ) {\n      result.a = t;\n    }\n    else if ((result.msie && result.version < 10) ||\n        (result.chrome && result.version < 20) ||\n        (result.firefox && result.version < 20.0) ||\n        (result.safari && result.version < 6) ||\n        (result.opera && result.version < 10.0) ||\n        (result.ios && result.osversion && result.osversion.split(\".\")[0] < 6)\n        ) {\n      result.c = t\n    } else result.x = t\n\n    return result\n  }\n\n  var bowser = detect(typeof navigator !== 'undefined' ? navigator.userAgent : '')\n\n  bowser.test = function (browserList) {\n    for (var i = 0; i < browserList.length; ++i) {\n      var browserItem = browserList[i];\n      if (typeof browserItem=== 'string') {\n        if (browserItem in bowser) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  /*\n   * Set our detect method to the main bowser object so we can\n   * reuse it to test other user agents.\n   * This is needed to implement future tests.\n   */\n  bowser._detect = detect;\n\n  return bowser\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/bowser/bowser.js\n ** module id = 57\n ** module chunks = 0\n **/","import { isPushNotificationsSupported, isBrowserSafari, isSupportedFireFox, isBrowserFirefox, getFirefoxVersion, isSupportedSafari, getConsoleStyle, addCssClass, removeCssClass, once } from '../utils.js';\nimport log from 'loglevel';\nimport Event from '../events.js'\n\n\nexport default class AnimatedElement {\n\n  /**\n   * Abstracts common DOM operations like hiding and showing transitionable elements into chainable promises.\n   * @param selector {string} The CSS selector of the element.\n   * @param showClass {string} The CSS class name to add to show the element.\n   * @param hideClass {string} The CSS class name to remove to hide the element.\n   * @param state {string} The current state of the element, defaults to 'shown'.\n   * @param targetTransitionEvent {string} A single property (e.g. 'transform' or 'opacity') to look for on transitionend of show() and hide() to know the transition is complete.\n   * @param nestedContentSelector {string} The CSS selector targeting the nested element within the current element. This nested element will be used for content getters and setters.\n   */\n  constructor(selector, showClass, hideClass, state = 'shown', targetTransitionEvent = 'opacity', nestedContentSelector = null) {\n    this.selector = selector;\n    this.showClass = showClass;\n    this.hideClass = hideClass;\n    this.state = state;\n    this.targetTransitionEvent = targetTransitionEvent;\n    this.nestedContentSelector = nestedContentSelector;\n  }\n\n  /**\n   * Asynchronously shows an element by applying its {showClass} CSS class.\n   * @returns {Promise} Returns a promise that is resolved with this element when it has completed its transition.\n   */\n  show() {\n    if (!this.hidden) {\n      return Promise.resolve(this);\n    }\n    else return new Promise((resolve) => {\n      this.state = 'showing';\n      Event.trigger(AnimatedElement.EVENTS.SHOWING, this);\n      if (this.hideClass)\n        removeCssClass(this.element, this.hideClass);\n      if (this.showClass)\n        addCssClass(this.element, this.showClass);\n      once(this.element, 'transitionend', (event, destroyListenerFn) => {\n        if (event.target === this.element &&\n            event.propertyName === this.targetTransitionEvent) {\n          // Uninstall the event listener for transitionend\n          destroyListenerFn();\n          this.state = 'shown';\n          Event.trigger(AnimatedElement.EVENTS.SHOWN, this);\n          return resolve(this);\n        }\n      }, true);\n    });\n  }\n\n  /**\n   * Asynchronously hides an element by applying its {hideClass} CSS class.\n   * @returns {Promise} Returns a promise that is resolved with this element when it has completed its transition.\n   */\n  hide() {\n    if (!this.shown) {\n      return Promise.resolve(this);\n    }\n    else return new Promise((resolve) => {\n      this.state = 'hiding';\n      Event.trigger(AnimatedElement.EVENTS.HIDING, this);\n      if (this.showClass)\n        removeCssClass(this.element, this.showClass);\n      if (this.hideClass)\n        addCssClass(this.element, this.hideClass);\n      once(this.element, 'transitionend', (event, destroyListenerFn) => {\n        if (event.target === this.element &&\n          event.propertyName === this.targetTransitionEvent) {\n          // Uninstall the event listener for transitionend\n          destroyListenerFn();\n          this.state = 'hidden';\n          Event.trigger(AnimatedElement.EVENTS.HIDDEN, this);\n          return resolve(this);\n        }\n      }, true);\n    });\n  }\n\n  /**\n   * Asynchronously waits for an element to finish transitioning to being shown.\n   * @returns {Promise} Returns a promise that is resolved with this element when it has completed its transition.\n   */\n  waitUntilShown() {\n    if (this.state === 'shown')\n      return Promise.resolve(this);\n    else return new Promise((resolve) => {\n      once(window, AnimatedElement.EVENTS.SHOWN, (event, destroyListenerFn) => {\n        if (event.details === this) {\n          destroyListenerFn();\n          return resolve(this);\n        }\n      }, true);\n    });\n  }\n\n  /**\n   * Asynchronously waits for an element to finish transitioning to being hidden.\n   * @returns {Promise} Returns a promise that is resolved with this element when it has completed its transition.\n   */\n  waitUntilHidden() {\n    if (this.state === 'hidden')\n      return Promise.resolve(this);\n    else return new Promise((resolve) => {\n      once(window, AnimatedElement.EVENTS.HIDDEN, (event, destroyListenerFn) => {\n        if (event.details === this) {\n          destroyListenerFn();\n          return resolve(this);\n        }\n      }, true);\n    });\n  }\n\n  static get EVENTS() {\n    return {\n      SHOWING: 'onesignal.bell.animatedelement.showing',\n      SHOWN: 'onesignal.bell.animatedelement.shown',\n      HIDING: 'onesignal.bell.animatedelement.hiding',\n      HIDDEN: 'onesignal.bell.animatedelement.hidden',\n    };\n  }\n\n  /**\n   * Returns the native element's innerHTML property.\n   * @returns {string} Returns the native element's innerHTML property.\n   */\n  get content() {\n    if (this.nestedContentSelector)\n      return this.element.querySelector(this.nestedContentSelector).innerHTML;\n    else\n      return this.element.innerHTML;\n  }\n\n  /**\n   * Sets the native element's innerHTML property.\n   * @param value {string} The HTML to set to the element.\n   */\n  set content(value) {\n    if (this.nestedContentSelector)\n      this.element.querySelector(this.nestedContentSelector).innerHTML = value;\n    else\n      this.element.innerHTML = value;\n  }\n\n\n  /**\n   * Returns the native {Element} via document.querySelector().\n   * @returns {Element} Returns the native {Element} via document.querySelector().\n   */\n  get element() {\n    return document.querySelector(this.selector);\n  }\n\n  /* States an element can be in */\n\n  /**\n   * Synchronously returns the last known state of the element.\n   * @returns {boolean} Returns true if the element was last known to be transitioning to being shown.\n   */\n  get showing() {\n    return this.state === 'showing';\n  }\n\n  /**\n   * Synchronously returns the last known state of the element.\n   * @returns {boolean} Returns true if the element was last known to be already shown.\n   */\n  get shown() {\n    return this.state === 'shown';\n  }\n\n  /**\n   * Synchronously returns the last known state of the element.\n   * @returns {boolean} Returns true if the element was last known to be transitioning to hiding.\n   */\n  get hiding() {\n    return this.state === 'hiding';\n  }\n\n  /**\n   * Synchronously returns the last known state of the element.\n   * @returns {boolean} Returns true if the element was last known to be already hidden.\n   */\n  get hidden() {\n    return this.state === 'hidden';\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/bell/AnimatedElement.js\n **/","import { isPushNotificationsSupported, isBrowserSafari, isSupportedFireFox, isBrowserFirefox, getFirefoxVersion, isSupportedSafari, getConsoleStyle, addCssClass, removeCssClass, once } from '../utils.js';\nimport log from 'loglevel';\nimport Event from '../events.js';\nimport AnimatedElement from './AnimatedElement.js';\n\n\nexport default class ActiveAnimatedElement extends AnimatedElement {\n\n  /**\n   * Abstracts common DOM operations like hiding and showing transitionable elements into chainable promises.\n   * @param selector {string} The CSS selector of the element.\n   * @param showClass {string} The CSS class name to add to show the element.\n   * @param hideClass {string} The CSS class name to remove to hide the element.\n   * @param activeClass {string} The CSS class name to add to activate the element.\n   * @param inactiveClass {string} The CSS class name to remove to inactivate the element.\n   * @param state {string} The current state of the element, defaults to 'shown'.\n   * @param activeState {string} The current state of the element, defaults to 'active'.\n   * @param targetTransitionEvent {string} A single property (e.g. 'transform' or 'opacity') to look for on transitionend of show() and hide() to know the transition is complete.\n   * @param nestedContentSelector {string} The CSS selector targeting the nested element within the current element. This nested element will be used for content getters and setters.\n   */\n  constructor(selector, showClass, hideClass, activeClass, inactiveClass, state = 'shown', activeState = 'active', targetTransitionEvent = 'opacity', nestedContentSelector = null) {\n    super(selector, showClass, hideClass, state, targetTransitionEvent, nestedContentSelector);\n    this.activeClass = activeClass;\n    this.inactiveClass = inactiveClass;\n    this.activeState = activeState;\n  }\n\n  /**\n   * Asynchronously activates an element by applying its {activeClass} CSS class.\n   * @returns {Promise} Returns a promise that is resolved with this element when it has completed its transition.\n   */\n  activate() {\n    if (!this.inactive || !this.shown) {\n      return Promise.resolve(this);\n    }\n    else return new Promise((resolve) => {\n      this.activeState = 'activating';\n      Event.trigger(ActiveAnimatedElement.EVENTS.ACTIVATING, this);\n      if (this.inactiveClass)\n        removeCssClass(this.element, this.inactiveClass);\n      if (this.activeClass)\n        addCssClass(this.element, this.activeClass);\n      if (this.shown) {\n        once(this.element, 'transitionend', (event, destroyListenerFn) => {\n          if (event.target === this.element &&\n            event.propertyName === this.targetTransitionEvent) {\n            // Uninstall the event listener for transitionend\n            destroyListenerFn();\n            this.activeState = 'active';\n            Event.trigger(ActiveAnimatedElement.EVENTS.ACTIVE, this);\n            return resolve(this);\n          }\n        }, true);\n      }\n      else {\n        this.activeState = 'active';\n        Event.trigger(ActiveAnimatedElement.EVENTS.ACTIVE, this);\n        return resolve(this);\n      }\n    });\n  }\n\n  /**\n   * Asynchronously activates an element by applying its {activeClass} CSS class.\n   * @returns {Promise} Returns a promise that is resolved with this element when it has completed its transition.\n   */\n  inactivate() {\n    if (!this.active) {\n      return Promise.resolve(this);\n    }\n    else return new Promise((resolve) => {\n      this.activeState = 'inactivating';\n      Event.trigger(ActiveAnimatedElement.EVENTS.INACTIVATING, this);\n      if (this.activeClass)\n        removeCssClass(this.element, this.activeClass);\n      if (this.inactiveClass)\n        addCssClass(this.element, this.inactiveClass);\n      if (this.shown) {\n        once(this.element, 'transitionend', (event, destroyListenerFn) => {\n          if (event.target === this.element &&\n            event.propertyName === this.targetTransitionEvent) {\n            // Uninstall the event listener for transitionend\n            destroyListenerFn();\n            this.activeState = 'inactive';\n            Event.trigger(ActiveAnimatedElement.EVENTS.INACTIVE, this);\n            return resolve(this);\n          }\n        }, true);\n      }\n      else {\n        this.activeState = 'inactive';\n        Event.trigger(ActiveAnimatedElement.EVENTS.INACTIVE, this);\n        return resolve(this);\n      }\n    });\n  }\n\n  /**\n   * Asynchronously waits for an element to finish transitioning to being active.\n   * @returns {Promise} Returns a promise that is resolved with this element when it has completed its transition.\n   */\n  waitUntilActive() {\n    if (this.active)\n      return Promise.resolve(this);\n    else return new Promise((resolve) => {\n      once(window, ActiveAnimatedElement.EVENTS.ACTIVE, (event, destroyListenerFn) => {\n        if (event.details === this) {\n          destroyListenerFn();\n          return resolve(this);\n        }\n      }, true);\n    });\n  }\n\n  /**\n   * Asynchronously waits for an element to finish transitioning to being inactive.\n   * @returns {Promise} Returns a promise that is resolved with this element when it has completed its transition.\n   */\n  waitUntilInactive() {\n    if (this.inactive)\n      return Promise.resolve(this);\n    else return new Promise((resolve) => {\n      once(window, ActiveAnimatedElement.EVENTS.INACTIVE, (event, destroyListenerFn) => {\n        if (event.details === this) {\n          destroyListenerFn();\n          return resolve(this);\n        }\n      }, true);\n    });\n  }\n\n  static get EVENTS() {\n    return Object.assign({}, AnimatedElement.EVENTS, {\n      ACTIVATING: 'onesignal.bell.activeanimatedelement.activating',\n      ACTIVE: 'onesignal.bell.activeanimatedelement.active',\n      INACTIVATING: 'onesignal.bell.activeanimatedelement.inactivating',\n      INACTIVE: 'onesignal.bell.activeanimatedelement.inactive',\n    });\n  }\n\n  /**\n   * Synchronously returns the last known state of the element.\n   * @returns {boolean} Returns true if the element was last known to be transitioning to being activated.\n   */\n  get activating() {\n    return this.activeState === 'activating';\n  }\n\n  /**\n   * Synchronously returns the last known state of the element.\n   * @returns {boolean} Returns true if the element was last known to be already active.\n   */\n  get active() {\n    return this.activeState === 'active';\n  }\n\n  /**\n   * Synchronously returns the last known state of the element.\n   * @returns {boolean} Returns true if the element was last known to be transitioning to inactive.\n   */\n  get inactivating() {\n    return this.activeState === 'inactivating';\n  }\n\n  /**\n   * Synchronously returns the last known state of the element.\n   * @returns {boolean} Returns true if the element was last known to be already inactive.\n   */\n  get inactive() {\n    return this.activeState === 'inactive';\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/bell/ActiveAnimatedElement.js\n **/","import { isPushNotificationsSupported, isBrowserSafari, isSupportedFireFox, isBrowserFirefox, getFirefoxVersion, isSupportedSafari, getConsoleStyle, addCssClass, removeCssClass, once, nothing } from '../utils.js';\nimport log from 'loglevel';\nimport Event from '../events.js';\nimport AnimatedElement from './AnimatedElement.js';\nimport ActiveAnimatedElement from './ActiveAnimatedElement.js';\n\n\nexport default class Launcher extends ActiveAnimatedElement {\n\n  constructor(bell) {\n    super('.onesignal-bell-launcher', 'onesignal-bell-launcher-active', null, null, 'onesignal-bell-launcher-inactive', 'hidden', 'active');\n\n    this.bell = bell;\n    this.wasInactive = false;\n  }\n\n  resize(size) {\n    removeCssClass(this.element, 'onesignal-bell-launcher-sm');\n    removeCssClass(this.element, 'onesignal-bell-launcher-md');\n    removeCssClass(this.element, 'onesignal-bell-launcher-lg');\n    if (size === 'small') {\n      addCssClass(this.element, 'onesignal-bell-launcher-sm')\n    }\n    else if (size === 'medium') {\n      addCssClass(this.element, 'onesignal-bell-launcher-md')\n    }\n    else if (size === 'large') {\n      addCssClass(this.element, 'onesignal-bell-launcher-lg')\n    }\n    else {\n      throw new Error('Invalid OneSignal bell size ' + size);\n    }\n    if (!this.shown) {\n      return Promise.resolve(this);\n    }\n    else {\n      return new Promise((resolve) => {\n        // Once the launcher has finished shrinking down\n        once(this.element, 'transitionend', (event, destroyListenerFn) => {\n          if (event.target === this.element &&\n            event.propertyName === this.targetTransitionEvent) {\n            // Uninstall the event listener for transitionend\n            destroyListenerFn();\n            return resolve(this);\n          }\n        }, true);\n      });\n    }\n  }\n\n  activateIfInactive() {\n    if (this.inactive) {\n      this.wasInactive = true;\n      return this.activate();\n    }\n    else return nothing();\n  }\n\n  inactivateIfWasInactive() {\n    if (this.wasInactive) {\n      this.wasInactive = false;\n      return this.inactivate();\n    }\n    else return nothing();\n  }\n\n  inactivate() {\n    return this.bell.message.hide()\n      .then(() => {\n        if (this.bell.badge.content.length > 0) {\n          return this.bell.badge.hide()\n            .then(() => Promise.all([super.inactivate(), this.resize('small')]))\n            .then(() => this.bell.badge.show())\n            .catch((e) => log.error(e))\n        }\n        else {\n          return Promise.all([super.inactivate(), this.resize('small')]);\n        }\n      });\n  }\n\n  activate() {\n    if (this.bell.badge.content.length > 0) {\n      return this.bell.badge.hide()\n        .then(() => Promise.all([super.activate(), this.resize(this.bell.options.size)]))\n        .then(() => this.bell.badge.show())\n        .catch((e) => log.error(e))\n    }\n    else {\n      return Promise.all([super.activate(), this.resize(this.bell.options.size)]);\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/bell/Launcher.js\n **/","import { isPushNotificationsSupported, isBrowserSafari, isSupportedFireFox, isBrowserFirefox, getFirefoxVersion, isSupportedSafari, getConsoleStyle, addCssClass, removeCssClass, once } from '../utils.js';\nimport log from 'loglevel';\nimport Event from '../events.js';\nimport ActiveAnimatedElement from './ActiveAnimatedElement.js';\n\n\nexport default class Badge extends ActiveAnimatedElement {\n\n  constructor() {\n    super('.onesignal-bell-launcher-badge', 'onesignal-bell-launcher-badge-opened', null, 'onesignal-bell-launcher-badge-active', null, 'hidden');\n  }\n\n  increment() {\n    // If it IS a number (is not not a number)\n    if (!isNaN(this.content)) {\n      let badgeNumber = +this.content; // Coerce to int\n      badgeNumber += 1;\n      this.content = badgeNumber.toString();\n      return badgeNumber;\n    }\n  }\n\n  decrement() {\n    // If it IS a number (is not not a number)\n    if (!isNaN(this.content)) {\n      let badgeNumber = +this.content; // Coerce to int\n      badgeNumber -= 1;\n      if (badgeNumber > 0)\n        this.content = badgeNumber.toString();\n      else\n        this.content = '';\n      return badgeNumber;\n    }\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/bell/Badge.js\n **/","import { isPushNotificationsSupported, isBrowserSafari, isSupportedFireFox, isBrowserFirefox, getFirefoxVersion, isSupportedSafari, getConsoleStyle, addCssClass, removeCssClass, removeDomElement, once, when } from '../utils.js';\nimport log from 'loglevel';\nimport Event from '../events.js';\nimport ActiveAnimatedElement from './ActiveAnimatedElement.js';\nimport Bell from './bell.js';\nimport LimitStore from '../limitStore.js';\n\n\nexport default class Button extends ActiveAnimatedElement {\n\n  constructor(bell) {\n    super('.onesignal-bell-launcher-button', null, null, 'onesignal-bell-launcher-button-active', null, 'shown');\n\n    this.bell = bell;\n    this.events = {\n      mouse: 'bell.launcher.button.mouse'\n    };\n\n    this.element.addEventListener('mouseover', () => {\n      if (LimitStore.isEmpty(this.events.mouse) || LimitStore.getLast(this.events.mouse) === 'out') {\n        Event.trigger(Bell.EVENTS.HOVERING);\n      }\n      LimitStore.put(this.events.mouse, 'over');\n    });\n\n    this.element.addEventListener('mouseleave', () => {\n      LimitStore.put(this.events.mouse, 'out');\n      Event.trigger(Bell.EVENTS.HOVERED);\n    });\n\n    this.element.addEventListener('mousedown', () => {\n      this.pulse();\n      this.activate();\n      this.bell.badge.activate();\n    });\n\n    this.element.addEventListener('mouseup', () => {\n      this.inactivate();\n      this.bell.badge.inactivate();\n    });\n\n    this.element.addEventListener('click', () => {\n      Event.trigger(Bell.EVENTS.BELL_CLICK);\n      Event.trigger(Bell.EVENTS.LAUNCHER_CLICK);\n    });\n  }\n\n  pulse() {\n    removeDomElement('.pulse-ring');\n    addDomElement(this.element, 'beforeend', '<div class=\"pulse-ring\"></div>');\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/bell/Button.js\n **/","import { isPushNotificationsSupported, isBrowserSafari, isSupportedFireFox, isBrowserFirefox, getFirefoxVersion, isSupportedSafari, getConsoleStyle, addCssClass, removeCssClass, clearDomElementChildren, once } from '../utils.js';\nimport log from 'loglevel';\nimport Event from '../events.js';\nimport AnimatedElement from './AnimatedElement.js';\nimport * as Browser from 'bowser';\nimport Bell from './bell.js';\nimport LimitStore from '../limitStore.js';\n\n\nexport default class Dialog extends AnimatedElement {\n\n  constructor(bell) {\n    super('.onesignal-bell-launcher-dialog', 'onesignal-bell-launcher-dialog-opened', null, 'hidden', 'opacity', '.onesignal-bell-launcher-dialog-body');\n\n    this.bell = bell;\n    this.subscribeButtonId = '#onesignal-bell-container .onesignal-bell-launcher #subscribe-button';\n    this.unsubscribeButtonId = '#onesignal-bell-container .onesignal-bell-launcher #unsubscribe-button';\n    this.notificationIcons = null;\n\n    window.addEventListener(Bell.EVENTS.STATE_CHANGED, (state) => {\n      state = state.detail;\n      if (state.to === Bell.STATES.SUBSCRIBED) {\n        if (this.notificationIcons === null) {\n          this.getNotificationIcons().then((icons) => {\n            this.notificationIcons = icons;\n          });\n        }\n      }\n    });\n\n    window.addEventListener('click', (event) => {\n      if (event.target === document.querySelector(this.subscribeButtonId))\n        Event.trigger(Bell.EVENTS.SUBSCRIBE_CLICK);\n      else if (event.target === document.querySelector(this.unsubscribeButtonId))\n        Event.trigger(Bell.EVENTS.UNSUBSCRIBE_CLICK);\n    });\n  }\n\n  getNotificationIcons() {\n    if (!OneSignal._app_id) {\n      return Promise.resolve(null);\n    }\n    let url = `${OneSignal._API_URL}apps/${OneSignal._app_id}/icon`;\n    return new Promise((resolve, reject) => {\n      fetch(url)\n        .then(function(response) {\n          return response.json()\n        }).then(function(data) {\n          if (data.errors) {\n            console.error(`API call %c${url}`, getConsoleStyle('code'), 'failed with:', data.errors);\n            reject(null);\n          }\n          resolve(data);\n        }).catch(function(ex) {\n          console.error('Call %cgetNotificationIcons()', getConsoleStyle('code'), 'failed with:', ex);\n          reject(null);\n        })\n    });\n  }\n\n  getPlatformNotificationIcon() {\n    if (this.notificationIcons) {\n      if (Browser.chrome || Browser.firefox) {\n        return this.notificationIcons.chrome || this.notificationIcons.safari;\n      }\n      else if (Browser.safari) {\n        return this.notificationIcons.safari || this.notificationIcons.chrome;\n      }\n    }\n    else return null;\n  }\n\n  show() {\n    return this.updateBellLauncherDialogBody()\n      .then(() => super.show())\n      .catch(e => log.error(e));\n  }\n\n  static get subscribeButtonSelectorId() {\n    return 'subscribe-button';\n  }\n\n  static get unsubscribeButtonSelectorId() {\n    return 'unsubscribe-button';\n  }\n\n  static get subscribeButton() {\n    return this.bell.querySelector('#' + Dialog.subscribeButtonSelector);\n  }\n\n  static get unsubscribeButton() {\n    return document.querySelector('#' + Dialog.unsubscribeButtonSelector);\n  }\n\n  updateBellLauncherDialogBody() {\n    return new Promise((resolve, reject) => {\n      clearDomElementChildren(document.querySelector(this.nestedContentSelector));\n\n      let currentSetSubscription = LimitStore.getLast('setsubscription.value');\n      let contents = 'Nothing to show.';\n\n      if (this.bell.state === Bell.STATES.SUBSCRIBED && currentSetSubscription === true ||\n        this.bell.state === Bell.STATES.UNSUBSCRIBED && currentSetSubscription === false) {\n\n        let notificationIconHtml = '';\n        let imageUrl = this.getPlatformNotificationIcon();\n        if (imageUrl) {\n          notificationIconHtml = `<div class=\"push-notification-icon\"><img src=\"${imageUrl}\"></div>`\n        } else {\n          notificationIconHtml = `<div class=\"push-notification-icon push-notification-icon-default\"></div>`\n        }\n\n        let buttonHtml = '';\n        if (this.bell.state !== Bell.STATES.SUBSCRIBED)\n          buttonHtml = `<button type=\"button\" class=\"action\" id=\"${Dialog.subscribeButtonSelectorId}\">${this.bell.text['dialog.main.button.subscribe']}</button>`;\n        else\n          buttonHtml = `<button type=\"button\" class=\"action\" id=\"${Dialog.unsubscribeButtonSelectorId}\">${this.bell.text['dialog.main.button.unsubscribe']}</button>`;\n\n\n        contents = `\n                  <h1>${this.bell.text['dialog.main.title']}</h1>\n                  <div class=\"divider\"></div>\n                  <div class=\"push-notification\">\n                    ${notificationIconHtml}\n                    <div class=\"push-notification-text-container\">\n                      <div class=\"push-notification-text push-notification-text-short\"></div>\n                      <div class=\"push-notification-text\"></div>\n                      <div class=\"push-notification-text push-notification-text-medium\"></div>\n                      <div class=\"push-notification-text\"></div>\n                      <div class=\"push-notification-text push-notification-text-medium\"></div>\n                    </div>\n                  </div>\n                  <div class=\"action-container\">\n                    ${buttonHtml}\n                  </div>\n                  <div class=\"divider\"></div>\n                  <div class=\"kickback\">Powered by <a href=\"https://onesignal.com\" class=\"kickback\" target=\"_blank\">OneSignal</a></div>\n                `;\n      }\n      else if (this.bell.state === Bell.STATES.BLOCKED) {\n        let imageUrl = null;\n        if (Browser.chrome)\n          imageUrl = HOST_URL + '/bell/chrome-unblock.jpg';\n        else if (Browser.firefox)\n          imageUrl = HOST_URL + '/bell/firefox-unblock.jpg';\n        else if (Browser.safari)\n          imageUrl = HOST_URL + '/bell/safari-unblock.jpg';\n\n        let instructionsHtml = '';\n        if (imageUrl) {\n          instructionsHtml = `\n            <div class=\"instructions\">\n              <a href=\"${imageUrl}\" target=\"_blank\"><img src=\"${imageUrl}\"></a></div>\n            </div>\n            `;\n        }\n        contents = `\n                  <h1>${this.bell.text['dialog.blocked.title']}</h1>\n                  <div class=\"divider\"></div>\n                  <div class=\"instructions\">\n                  <p>${this.bell.text['dialog.blocked.message']}</p>\n                  ${instructionsHtml}\n                  </div>\n                  <div class=\"divider\"></div>\n                  <div class=\"kickback\">Powered by <a href=\"https://onesignal.com\" class=\"kickback\" target=\"_blank\">OneSignal</a></div>\n                `;\n      }\n\n      addDomElement(document.querySelector(this.nestedContentSelector), 'beforeend', contents);\n      resolve();\n    }).catch(e => log.error(e));\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/bell/Dialog.js\n **/","import { isPushNotificationsSupported, isBrowserSafari, isSupportedFireFox, isBrowserFirefox, getFirefoxVersion, isSupportedSafari, getConsoleStyle, addCssClass, removeCssClass, once, delay, when, nothing } from '../utils.js';\nimport log from 'loglevel';\nimport Event from '../events.js';\nimport AnimatedElement from './AnimatedElement.js';\n\n\nexport default class Message extends AnimatedElement {\n\n  constructor(bell) {\n    super('.onesignal-bell-launcher-message', 'onesignal-bell-launcher-message-opened', null, 'hidden', 'opacity', '.onesignal-bell-launcher-message-body');\n\n    this.bell = bell;\n  }\n\n  display(content, hideAfter = 0) {\n    return new Promise((resolve) => {\n      this.shown ? this.hide() : nothing()\n        .then(() => this.content = content)\n        .then(() => this.show())\n        .then(() => delay(hideAfter))\n        .then(() => this.hide())\n        .then(resolve)\n        .catch((e) => log.error(e));\n    });\n  }\n\n  enqueue(message, notify = false) {\n    this.bell.messages.queued.push(message);\n    return new Promise((resolve) => {\n      if (this.bell.badge.shown) {\n        this.bell.badge.hide()\n          .then(() => this.bell.badge.increment())\n          .then(() => this.bell.badge.show())\n          .then(resolve);\n      } else {\n        this.bell.badge.increment();\n        if (this.bell.initialized)\n          this.bell.badge.show().then(resolve)\n        else resolve();\n      }\n    });\n  }\n\n  dequeue(message) {\n    let dequeuedMessage = this.bell.messages.queued.pop(message);\n    return new Promise((resolve) => {\n      if (this.bell.badge.shown) {\n        this.bell.badge.hide()\n          .then(() => this.bell.badge.decrement())\n          .then(() => this.bell.badge.show())\n          .then(resolve(dequeuedMessage));\n      } else {\n        this.bell.badge.decrement();\n        resolve(dequeuedMessage);\n      }\n    });\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/bell/Message.js\n **/","module.exports = \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?>\\n<!-- Generator: Adobe Illustrator 19.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\\n<svg version=\\\"1.1\\\" class=\\\"onesignal-bell-svg\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" x=\\\"0px\\\" y=\\\"0px\\\"\\n\\t width=\\\"99.7px\\\" height=\\\"99.7px\\\" viewBox=\\\"0 0 99.7 99.7\\\" style=\\\"enable-background:new 0 0 99.7 99.7;\\\" xml:space=\\\"preserve\\\">\\n<g>\\n\\t<circle class=\\\"background\\\" cx=\\\"49.9\\\" cy=\\\"49.9\\\" r=\\\"49.9\\\"/>\\n\\t<g id=\\\"Layer_2\\\">\\n\\t\\t<g>\\n\\t\\t\\t<path class=\\\"foreground\\\" d=\\\"M50.1,66.2H27.7c0,0-2-0.2-2-2.1c0-1.9,1.7-2,1.7-2s6.7-3.2,6.7-5.5c0-2.3-1.1-3.9-1.1-13.3\\n\\t\\t\\t\\ts6-16.6,13.2-16.6c0,0,1-2.4,3.9-2.4c2.8,0,3.8,2.4,3.8,2.4c7.2,0,13.2,7.2,13.2,16.6s-1,11-1,13.3c0,2.3,6.7,5.5,6.7,5.5\\n\\t\\t\\t\\ts1.7,0.1,1.7,2c0,1.8-2.1,2.1-2.1,2.1H50.1z\\\"/>\\n\\t\\t\\t<path class=\\\"foreground\\\" d=\\\"M42.9,68.5h14.5c0,0-1,6.3-7.2,6.3S42.9,68.5,42.9,68.5z\\\"/>\\n\\t\\t\\t<ellipse class=\\\"stroke\\\" cx=\\\"49.9\\\" cy=\\\"49.9\\\" rx=\\\"37.4\\\" ry=\\\"36.9\\\"/>\\n\\t\\t</g>\\n\\t</g>\\n</g>\\n</svg>\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/raw-loader!./src/bell/bell.svg\n ** module id = 66\n ** module chunks = 0\n **/","import log from 'loglevel';\nimport Event from './events.js';\n\n\nexport default class Database {\n\n  static get EVENTS() {\n    return {\n      REBUILT: 'onesignal.db.rebuilt',\n      RETRIEVED: 'onesignal.db.retrieved',\n      SET: 'onesignal.db.set'\n    };\n  }\n\n  /**\n   * Returns an existing instance or creates a new instances of the database.\n   * @returns {Promise} Returns a promise that is fulfilled when the database becomes accessible or rejects when an error occurs.\n   */\n  static getInstance() {\n    return new Promise(function (resolve, reject) {\n      if (Database._instance) {\n        resolve(Database._instance);\n      } else {\n        let request = indexedDB.open(\"ONE_SIGNAL_SDK_DB\", 1);\n        request.onsuccess = (event) => {\n          let database = event.target.result;\n          Database._instance = database;\n          console.debug('Returning a new opened instance of IndexedDB.');\n          resolve(database);\n        };\n        request.onerror = (event) => {\n          log.error('Unable to open IndexedDB.', event);\n          reject(event);\n        };\n        request.onupgradeneeded = (event) => {\n          log.info('The OneSignal SDK is rebuilding its IndexedDB schema from a clean slate.');\n          let db = event.target.result;\n          db.createObjectStore(\"Ids\", {\n            keyPath: \"type\"\n          });\n          db.createObjectStore(\"NotificationOpened\", {\n            keyPath: \"url\"\n          });\n          db.createObjectStore(\"Options\", {\n            keyPath: \"key\"\n          });\n          Event.trigger(Database.EVENTS.REBUILT);\n        };\n      }\n    });\n  }\n\n  /**\n   * Asynchronously retrieves the value of the key at the table (if key is specified), or the entire table (if key is not specified).\n   * @param table The table to retrieve the value from.\n   * @param key The key in the table to retrieve the value of. Leave blank to get the entire table.\n   * @returns {Promise} Returns a promise that fulfills when the value(s) are available.\n   */\n  static get(table, key) {\n    if (key) {\n      // Return a table-key value\n      return new Promise(function (resolve, reject) {\n        Database.getInstance().then((database) => {\n          var request = database.transaction(table).objectStore(table).get(key);\n          request.onsuccess = () => {\n            Event.trigger(Database.EVENTS.RETRIEVED, {table: table, key: key, result: request.result});\n            resolve(request.result);\n          };\n          request.onerror = () => {\n            reject(request.errorCode);\n          };\n        }).catch(function (e) {\n          log.error(e);\n          reject(e);\n        });\n      });\n    } else {\n      // Return all values in table\n      return new Promise(function (resolve, reject) {\n        Database.getInstance().then((database) => {\n          let jsonResult = {};\n          let cursor = database.transaction(table).objectStore(table).openCursor();\n          cursor.onsuccess = (event) => {\n            var cursorResult = event.target.result;\n            if (cursorResult) {\n              Event.trigger(Database.EVENTS.RETRIEVED, cursorResult.value);\n              jsonResult[cursorResult.key] = cursorResult.value.value;\n              cursorResult.continue();\n            } else {\n              resolve(jsonResult);\n            }\n          };\n          cursor.onerror = (event) => {\n            reject(cursor.errorCode);\n          };\n        }).catch(function (e) {\n          log.error(e);\n          reject(e);\n        });\n      });\n    }\n  }\n\n  /**\n   * Asynchronously puts the specified value in the specified table.\n   * @param table\n   * @param key\n   */\n  static put(table, value) {\n    return new Promise(function (resolve, reject) {\n      Database.getInstance().then((database) => {\n        database.transaction([table], 'readwrite').objectStore(table).put(value);\n        Event.trigger(Database.EVENTS.SET, value);\n        resolve(value);\n      }).catch(function (e) {\n        log.error(e);\n        reject(e);\n      });\n    });\n  }\n\n  /**\n   * Asynchronously removes the specified key from the table.\n   * @returns {Promise} Returns a promise containing a key that is fulfilled when deletion is completed.\n   */\n  static remove(table, key) {\n    return new Promise(function (resolve) {\n      Database.getInstance().then((database) => {\n        database.transaction([table], 'readwrite').objectStore(table).delete(key);\n        resolve(key);\n      }).catch(function (e) {\n        log.error(e);\n        reject(e);\n      });\n    });\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/database.js\n **/","module.exports = global[\"ServiceWorker\"] = require(\"-!/Users/jpang/code/OneSignal-Website-SDK/node_modules/babel-loader/index.js?{\\\"presets\\\":[\\\"es2015\\\"],\\\"cacheDirectory\\\":true}!/Users/jpang/code/OneSignal-Website-SDK/src/ServiceWorker.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/expose-loader?ServiceWorker!./src/ServiceWorker.js\n ** module id = 68\n ** module chunks = 0\n **/","import { DEV_HOST, PROD_HOST, API_URL } from './vars.js';\nimport Environment from './environment.js'\nimport { sendNotification, apiCall } from './api.js';\nimport log from 'loglevel';\nimport LimitStore from './limitStore.js';\nimport \"./cache-polyfill.js\";\nimport Database from './database.js';\nimport { isPushNotificationsSupported, isBrowserSafari, isSupportedFireFox, isBrowserFirefox, getFirefoxVersion, isSupportedSafari, getConsoleStyle } from './utils.js';\n\nclass ServiceWorker {\n\n  static run() {\n    self.addEventListener('push', ServiceWorker.onPushReceived);\n    self.addEventListener('notificationclick', ServiceWorker.onNotificationClicked);\n    self.addEventListener('install', ServiceWorker.onServiceWorkerInstalled);\n\n    // If the user is proxying through our subdomain (e.g. website.onesignal.com/sdks/)\n    if (ServiceWorker.onOurSubdomain) {\n      // Cache resources?\n      self.addEventListener('fetch', ServiceWorker.onFetch);\n    }\n  }\n\n  /**\n   * Occurs when a push message is received.\n   * This method handles the receipt of a push signal on all web browsers except Safari, which uses the OS to handle notifications.\n   * @param event\n   */\n  static onPushReceived(event) {\n    log.debug(`Called %conPushReceived(${JSON.stringify(event, null, 4)})`, getConsoleStyle('code'));\n    lug('onPushReceived');\n\n    event.waitUntil(new Promise((resolve, reject) => {\n      var extra = { };\n      ServiceWorker._getTitle()\n        .then(title => {\n          extra.title = title;\n          return Database.get('Options', 'defaultIcon');\n          lug('onPushReceived');\n        })\n        .then(defaultIconResult => {\n          extra.defaultIconResult = defaultIconResult\n          return extra;\n          lug('onPushReceived');\n        })\n        .then(extra => {\n          return ServiceWorker._getLastNotifications();\n          lug('onPushReceived');\n        })\n        .then(notifications => {\n          lug('onPushReceived');\n          // At this point, we have an array of notification objects (all the JSON is parsed)\n          // We want to fire a notification for each object\n          // We need to use event.waitUntil() to extend the life of the service worker (workers can be killed if idling)\n          // We want to extend the service worker lifetime until all promises for showNotification resolve\n          let notificationEventPromises = [];\n\n          for (let notification of notifications) {\n            let data = {\n              id: notification.custom.i,\n              message: notification.alert,\n              additionalData: notification.custom.a\n            };\n\n            if (notification.title)\n              data.title = notification.title;\n            else\n              data.title = extra.title;\n\n            if (notification.custom.u)\n              data.launchURL = notification.custom.u;\n\n            if (notification.icon)\n              data.icon = notification.icon;\n            else if (extra.defaultIconResult)\n              data.icon = extra.defaultIconResult;\n\n            // Never nest the following line in a callback from the point of entering from _getLastNotifications\n            let notificationEventPromise = self.registration.showNotification(data.title, {\n              body: data.message,\n              icon: data.icon,\n              tag: JSON.stringify(data)\n            });\n\n            notificationEventPromises.push(notificationEventPromise);\n            return Promise.all(notificationEventPromises);\n          }\n        })\n        .then(resolve)\n        .catch(e => log.error(e));\n    }));\n  }\n\n  static onNotificationClicked(event) {\n    log.debug(`Called %conNotificationClicked(${JSON.stringify(event, null, 4)})`, getConsoleStyle('code'));\n    lug('onNotificationClicked');\n    var notificationData = JSON.parse(event.notification.tag);\n    event.notification.close();\n\n    event.waitUntil(\n      Database.get('Options', 'defaultUrl')\n        .then(defaultUrlResult => {\n          lug('onNotificationClicked');\n          if (defaultUrlResult)\n            ServiceWorker.defaultLaunchUrl = defaultUrlResult.value;\n        })\n        .then(() => { lug('onPushReceived'); return clients.matchAll({type: 'window'}); })\n        .then(clientList => {\n          lug('onNotificationClicked');\n          var launchURL = registration.scope;\n          if (ServiceWorker.defaultLaunchUrl)\n            launchURL = ServiceWorker.defaultLaunchUrl;\n          if (notificationData.launchURL)\n            launchURL = notificationData.launchURL;\n\n          for (let i = 0; i < clientList.length; i++) {\n            var client = clientList[i];\n            if ('focus' in client && client.url == launchURL) {\n              client.focus();\n\n              // targetOrigin not valid here as the service worker owns the page.\n              client.postMessage(notificationData);\n              return;\n            }\n          }\n\n          if (launchURL !== 'javascript:void(0);' && launchURL !== 'do_not_open') {\n            return Database.put(\"NotificationOpened\", {url: launchURL, data: notificationData})\n              .then(() => {\n                lug('onNotificationClicked');\n                clients.openWindow(launchURL).catch(function (error) {\n                  // Should only fall into here if going to an external URL on Chrome older than 43.\n                  clients.openWindow(registration.scope + \"redirector.html?url=\" + launchURL);\n                });\n              });\n          }\n        })\n        .then(() => { lug('onNotificationClicked'); return Promise.all([Database.get('Ids', 'appId'), Database.get('Ids', 'userId')]) })\n        .then(results => {\n        lug('onNotificationClicked');\n          var [ appIdResult, userIdResult ] = results;\n          if (appIdResult && userIdResult) {\n            apiCall(\"notifications/\" + notificationData.id, \"PUT\", {\n              app_id: appIdResult.id,\n              player_id: userIdResult.id,\n              opened: true\n            });\n          }\n        })\n        .catch(e => log.error(e))\n    );\n  }\n\n  static onServiceWorkerInstalled(event) {\n    log.debug(`Called %conServiceWorkerInstalled(${JSON.stringify(event, null, 4)})`, getConsoleStyle('code'));\n    log.info(`Installing service worker: %c${self.location.pathname}`, getConsoleStyle('code'), `(version ${__VERSION__})`);\n\n    if (self.location.pathname.indexOf(\"OneSignalSDKWorker.js\") > -1)\n      var serviceWorkerVersionType = 'WORKER1_ONE_SIGNAL_SW_VERSION'\n    else\n      var serviceWorkerVersionType = 'WORKER2_ONE_SIGNAL_SW_VERSION';\n\n    if (ServiceWorker.onOurSubdomain) {\n      event.waitUntil(\n        Database.put(\"Ids\", {type: serviceWorkerVersionType, id: __VERSION__})\n        .then(() => { lug('onServiceWorkerInstalled'); return caches.open(\"OneSignal_\" + __VERSION__) })\n        .then(cache => {\n            lug('onServiceWorkerInstalled');\n            return cache.addAll([\n              '/sdks/initOneSignalHttpIframe',\n              '/sdks/initOneSignalHttpIframe?session=*',\n              '/sdks/manifest_json']);\n          })\n        .catch(e => log.error(e))\n      );\n    } else {\n      event.waitUntil(Database.put(\"Ids\", {type: serviceWorkerVersionType, id: __VERSION__}));\n    }\n  }\n\n  static onFetch(event) {\n    event.respondWith(\n      caches.match(event.request)\n        .then((response) => {\n          // Cache hit -- return response\n          if (response) {\n            return response;\n          }\n          return fetch(event.request);\n        })\n        .catch((e) => log.error(e))\n    );\n  }\n\n  static get onOurSubdomain() {\n    return __DEV__ || location.href.match(/https:\\/\\/.*\\.onesignal.com\\/sdks\\//) !== null;\n  }\n\n  /**\n  * Returns a promise that is fulfilled with either the default title from the database (first priority) or the page title from the database (alternate result).\n  */\n  static _getTitle() {\n    return new Promise((resolve, reject) => {\n      Promise.all([Database.get('Options', 'defaultTitle'), Database.get('Options', 'pageTitle')])\n        .then((results) => {\n          var [ defaultTitleResult, pageTitleResult ] = results;\n\n          if (defaultTitleResult) {\n            resolve(defaultTitleResult.value);\n          }\n          else if (pageTitleResult && pageTitleResult.value != null) {\n            resolve(pageTitleResult.value);\n          }\n          else {\n            resolve('');\n          }\n        })\n        .catch(function (e) {\n          log.error(e);\n          reject(e);\n        });\n    });\n  }\n\n  /**\n  * Returns a promise that is fulfilled with the JSON result of chrome notifications.\n  */\n  static _getLastNotifications() {\n    return new Promise((resolve, reject) => {\n      var notifications = [];\n      // Each entry is like:\n      /*\n       Object {custom: Object, icon: \"https://onesignal.com/images/notification_logo.png\", alert: \"asd\", title: \"ss\"}\n           alert: \"asd\"\n           custom: Object\n           i: \"6d7ec82f-bc56-494f-b73a-3a3b48baa2d8\"\n           __proto__: Object\n           icon: \"https://onesignal.com/images/notification_logo.png\"\n           title: \"ss\"\n           __proto__: Object\n       */\n      Database.get('Ids', 'userId')\n        .then(userIdResult => {\n          if (userIdResult) {\n            return apiCall(\"players/\" + userIdResult.id + \"/chromeweb_notification\", \"GET\");\n          }\n          else {\n            log.error('Tried to get last notifications, but there was no userId found in the database.');\n            reject(new Error('Tried to get last notifications, but there was no userId found in the database.'));\n          }\n        })\n        .then(response => {\n          // The response is an array literal -- response.json() has been called by apiCall()\n          // The result looks like this:\n          // apiCall(\"players/7442a553-5f61-4b3e-aedd-bb574ef6946f/chromeweb_notification\", \"GET\").then(function(response) { console.log(response); });\n          // [\"{\"custom\":{\"i\":\"6d7ec82f-bc56-494f-b73a-3a3b48baa2d8\"},\"icon\":\"https://onesignal.com/images/notification_logo.png\",\"alert\":\"asd\",\"title\":\"ss\"}\"]\n          // ^ Notice this is an array literal with JSON data inside\n          for (var i = 0; i < response.length; i++) {\n            notifications.push(JSON.parse(response[i]));\n          }\n          resolve(notifications);\n        })\n        .catch(e => {\n          log.error(e);\n          reject(e);\n        });\n    });\n  }\n}\n\nfunction lug(prefix) {\n  if (!ServiceWorker.lugCounter)\n    ServiceWorker.lugCounter = {};\n  if (!ServiceWorker.lugCounter.prefix)\n    ServiceWorker.lugCounter.prefix = 1;\n  log.debug('(' + performance.now() + ') ' + prefix + ':' + ServiceWorker.lugCounter.prefix++);\n}\n\n// Expose this class to the global scope\nself.OneSignalServiceWorker = ServiceWorker;\n\n// Set logging to the appropriate level\nlog.setDefaultLevel(__DEV__ ? log.levels.TRACE : log.levels.ERROR);\n\n// Print it's happy time!\nlog.info(`%cOneSignal Service Worker loaded (version ${__VERSION__}, ${Environment.getEnv()} environment).`, getConsoleStyle('bold'));\n\n// Run our main file\nServiceWorker.run();\n\n\n/** WEBPACK FOOTER **\n ** ./src/ServiceWorker.js\n **/","/**\n * https://github.com/coonsta/cache-polyfill\n *\n * Copyright 2015 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nif (!Cache.prototype.addAll) {\n  Cache.prototype.addAll = function addAll(requests) {\n    var cache = this;\n\n    // Since DOMExceptions are not constructable:\n    function NetworkError(message) {\n      this.name = 'NetworkError';\n      this.code = 19;\n      this.message = message;\n    }\n    NetworkError.prototype = Object.create(Error.prototype);\n\n    return Promise.resolve().then(function() {\n      if (arguments.length < 1) throw new TypeError();\n\n      // Simulate sequence<(Request or USVString)> binding:\n      var sequence = [];\n\n      requests = requests.map(function(request) {\n        if (request instanceof Request) {\n          return request;\n        }\n        else {\n          return String(request); // may throw TypeError\n        }\n      });\n\n      return Promise.all(\n        requests.map(function(request) {\n          if (typeof request === 'string') {\n            request = new Request(request);\n          }\n\n          var scheme = new URL(request.url).protocol;\n\n          if (scheme !== 'http:' && scheme !== 'https:') {\n            throw new NetworkError(\"Invalid scheme\");\n          }\n\n          return fetch(request.clone());\n        })\n      );\n    }).then(function(responses) {\n      // TODO: check that requests don't overwrite one another\n      // (don't think this is possible to polyfill due to opaque responses)\n      return Promise.all(\n        responses.map(function(response, i) {\n          return cache.put(requests[i], response);\n        })\n      );\n    }).then(function() {\n      return undefined;\n    });\n  };\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/cache-polyfill.js\n **/"],"sourceRoot":""}