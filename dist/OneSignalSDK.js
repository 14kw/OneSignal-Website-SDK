!function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:false};e[n].call(o.exports,o,o.exports,t);o.loaded=true;return o.exports}var i={};t.m=e;t.c=i;t.p="";return t(0)}([function(e,exports,t){"use strict";t(1);t(9)},function(e,exports,t){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var o=t(3),r=t(5),a=t(6),s=n(a),u=t(7),l=n(u);t(8);var d=null;"undefined"!=typeof c&&(d=c);var c={_VERSION:109002,_HOST_URL:o.HOST_URL,_app_id:null,_tagsToSendOnRegister:null,_notificationOpened_callback:null,_idsAvailable_callback:[],_defaultLaunchURL:null,_initOptions:null,_httpRegistration:false,_main_page_port:null,_isNotificationEnabledCallback:null,_subscriptionSet:true,_initOneSignalHttp:null,_sessionIframeAdded:false,_useHttpMode:null,_windowWidth:550,_windowHeight:480,_isNewVisitor:false,LOGGING:false,SERVICE_WORKER_UPDATER_PATH:"OneSignalSDKUpdaterWorker.js",SERVICE_WORKER_PATH:"OneSignalSDKWorker.js",SERVICE_WORKER_PARAM:{},_ensureDbInstance:function p(){return new Promise(function(e,t){if(c._oneSignal_db)e(c._oneSignal_db);else{var i=indexedDB.open("ONE_SIGNAL_SDK_DB",1);i.onsuccess=function(t){var i=t.target.result;c._oneSignal_db=i;e(i)};i.onerror=function(e){s["default"].error("Unable to open IndexedDB.",e);t(e)};i.onupgradeneeded=function(e){s["default"].debug("Rebuilding schema in IndexedDB...");var t=e.target.result;t.createObjectStore("Ids",{keyPath:"type"});t.createObjectStore("NotificationOpened",{keyPath:"url"});t.createObjectStore("Options",{keyPath:"key"})}}})},_getDbValue:function g(e,t){return new Promise(function(i,n){c._ensureDbInstance().then(function(o){var r=o.transaction(e).objectStore(e).get(t);r.onsuccess=function(e){r.result&&c._triggerEvent_dbValueRetrieved(r.result);i(r.result)};r.onerror=function(e){n(r.errorCode)}})["catch"](function(e){s["default"].error(e.stack)})})},_getDbValues:function _(e){return new Promise(function(t,i){c._ensureDbInstance().then(function(n){var o={},r=n.transaction(e).objectStore(e).openCursor();r.onsuccess=function(e){var i=e.target.result;if(i){c._triggerEvent_dbValueRetrieved(i);o[i.key]=i.value.value;i["continue"]()}else t(o)};r.onerror=function(e){i(r.errorCode)}})["catch"](function(e){s["default"].error(e.stack)})})},_putDbValue:function h(e,t){return new Promise(function(i,n){c._ensureDbInstance().then(function(n){n.transaction([e],"readwrite").objectStore(e).put(t);c._triggerEvent_dbValueSet(t);i(t)})["catch"](function(e){s["default"].error(e.stack)})})},_deleteDbValue:function v(e,t){return new Promise(function(i,n){c._ensureDbInstance().then(function(n){n.transaction([e],"readwrite").objectStore(e)["delete"](t);i(t)})["catch"](function(e){s["default"].error(e.stack)})})},_sendToOneSignalApi:function b(e,t,n,o,r){s["default"].debug("Calling "+t+" "+(c._HOST_URL+e)+" with data:",n);var a={method:t};if(n){a.headers={"Content-type":"application/json;charset=UTF-8"};a.body=JSON.stringify(n)}i(c._HOST_URL+e,a).then(function u(e){return e.status>=200&&e.status<300?Promise.resolve(e):Promise.reject(new Error(e.statusText))}).then(function l(e){return e.json()}).then(function(e){null!=o&&o(e)})["catch"](function(e){s["default"].error("OneSignal._sendToOneSignalApi() failed:",e);null!=r&&r()})},_getLanguage:function m(){return navigator.language?navigator.language.length>3?navigator.language.substring(0,2):navigator.language:"en"},_getPlayerId:function S(e,t){e?t(e):c._getDbValue("Ids","userId").then(function i(e){t(e?e.id:null)})["catch"](function(e){s["default"].error(e.stack)})},_getBrowserName:function O(){return navigator.appVersion.match(/Chrome\/(.*?) /)?"Chrome":navigator.appVersion.match("Version/(.*) (Safari)")?"Safari":navigator.userAgent.match(/Firefox\/([0-9]{2,}\.[0-9]{1,})/)?"Firefox":""},_registerWithOneSignal:function E(e,t,i){c._getDbValue("Ids","userId").then(function n(o){c._getNotificationTypes(function(n){var r="players",a={app_id:e,device_type:i,language:c._getLanguage(),timezone:-60*(new Date).getTimezoneOffset(),device_model:navigator.platform+" "+c._getBrowserName(),device_os:(navigator.appVersion.match(/Chrome\/(.*?) /)||navigator.appVersion.match("Version/(.*) Safari")||navigator.userAgent.match(/Firefox\/([0-9]{2,}\.[0-9]{1,})/))[1],sdk:c._VERSION};if(o){r="players/"+o.id+"/on_session";a.notification_types=n}else 1!=n&&(a.notification_types=n);if(t){a.identifier=t;c._putDbValue("Ids",{type:"registrationId",id:t})}c._sendToOneSignalApi(r,"POST",a,function u(e){sessionStorage.setItem("ONE_SIGNAL_SESSION",true);if(e.id){c._putDbValue("Ids",{type:"userId",id:e.id});c._sendUnsentTags()}c._getPlayerId(e.id,function(e){if(c._idsAvailable_callback.length>0)for(;c._idsAvailable_callback.length>0;){var i=c._idsAvailable_callback.pop();i({userId:e,registrationId:t})}if(c._httpRegistration){s["default"].debug("Sending player Id and registrationId back to host page");s["default"].debug(c._initOptions);var n=opener||parent;c._safePostMessage(n,{idsAvailable:{userId:e,registrationId:t}},c._initOptions.origin,null);opener&&window.close()}})})})})["catch"](function(e){s["default"].error(e.stack)})},_sendUnsentTags:function I(){if(c._tagsToSendOnRegister){c.sendTags(c._tagsToSendOnRegister);c._tagsToSendOnRegister=null}},setDefaultNotificationUrl:function w(e){c._putDbValue("Options",{key:"defaultUrl",value:e})},setDefaultIcon:function y(e){c._putDbValue("Options",{key:"defaultIcon",value:e})},setDefaultTitle:function R(e){c._putDbValue("Options",{key:"defaultTitle",value:e})},_visibilitychange:function N(){if("visible"==document.visibilityState){document.removeEventListener("visibilitychange",c._visibilitychange);c._sessionInit({})}},onNativePromptChanged:function P(e){s["default"].debug("Event onesignal.prompt.native.permissionchanged:",e.detail);c._checkTrigger_eventSubscriptionChanged()},_onSubscriptionChanged:function T(e){s["default"].debug("Event onesignal.subscription.changed:",e.detail);c._isNewVisitor&&true===e.detail&&c._getDbValue("Ids","userId").then(function(e){if(c._initOptions.welcome_notification&&c._initOptions.welcome_notification.message){s["default"].debug("Because this user is a new site visitor, a welcome notification will be sent.");var t=c._initOptions.welcome_notification.title,i=c._initOptions.welcome_notification.message;(0,r.sendNotification)(c._app_id,[e.id],{en:t},{en:i})}})["catch"](function(e){s["default"].error(e)})},_onDbValueRetrieved:function V(e){s["default"].debug("Event onesignal.db.retrieved:",e.detail)},_onDbValueSet:function A(e){s["default"].debug("Event onesignal.db.valueset:",e.detail);var t=e.detail;if("userId"===t.type){l["default"].put("db.ids.userId",t.id);c._checkTrigger_eventSubscriptionChanged()}},_onInternalSubscriptionSet:function D(e){s["default"].debug("Event onesignal.internal.subscriptionset:",e.detail);var t=e.detail;l["default"].put("subscription.value",t);c._checkTrigger_eventSubscriptionChanged()},_checkTrigger_eventSubscriptionChanged:function k(){var e=l["default"].get("notification.permission"),t=e[e.length-2],i=e[e.length-1],n=l["default"].get("db.ids.userId"),o=n[n.length-2],r=n[n.length-1],a=l["default"].get("subscription.value"),s=a[a.length-2],u=a[a.length-1],d="unchanged";(("default"===t||"denied"===t||null===t)&&"granted"===i&&null!==r&&true===u||false===s&&true===u&&null!=r&&"granted"===i)&&(d=true);("denied"!==t&&"denied"===i||"granted"===t&&"granted"!==i||null!==o&&null===r||false!==s&&false===u)&&(d=false);if("unchanged"!==d){var f=l["default"].put("event.subscriptionchanged.lastriggered",Date.now()),p=f[f.length-1],g=f[f.length-2],_=(p-g)/1e3,h=l["default"].put("event.subscriptionchanged.laststates",d),v=h[h.length-1],b=h[h.length-2],m=null!=g&&1>=_||v===b;false===m&&c._triggerEvent_subscriptionChanged(d)}},init:function C(e){c._initOptions=e;c.LOGGING?s["default"].enableAll():s["default"].disableAll();s["default"].info("OneSignal Web SDK loaded (version "+c._VERSION+").");if(c.isPushNotificationsSupported()){if(!navigator.permissions||c._isBrowserFirefox()&&c._getFirefoxVersion()<=45){var t=c._getNotificationPermission();l["default"].put("notification.permission",t)}else{c._usingNativePermissionHook=true;var t=c._getNotificationPermission();l["default"].put("notification.permission",t);navigator.permissions.query({name:"notifications"}).then(function(e){e.onchange=function(){var e=l["default"].put("notification.permission",this.state),t=e[0],i=e[1];c._triggerEvent_nativePromptPermissionChanged(t,i)}})["catch"](function(e){s["default"].error(e.stack)})}c._getDbValue("Ids","userId").then(function(e){void 0===e&&(c._isNewVisitor=true);var t=e?e.id:null;l["default"].put("db.ids.userId",t)});c._getSubscription(function(e){l["default"].put("subscription.value",e)});window.addEventListener("onesignal.prompt.native.permissionchanged",c.onNativePromptChanged);window.addEventListener("onesignal.subscription.changed",c._onSubscriptionChanged);window.addEventListener("onesignal.db.valueretrieved",c._onDbValueRetrieved);window.addEventListener("onesignal.db.valueset",c._onDbValueSet);window.addEventListener("onesignal.db.valueset",c._onDbValueSet);window.addEventListener("onesignal.internal.subscriptionset",c._onInternalSubscriptionSet);c._useHttpMode=!c._isSupportedSafari()&&(!c._supportsDirectPermission()||c._initOptions.subdomainName);c._useHttpMode?c._initOneSignalHttp="https://"+c._initOptions.subdomainName+".onesignal.com/sdks/initOneSignalHttp":c._initOneSignalHttp="https://onesignal.com/sdks/initOneSignalHttps";if(c._isSupportedSafari()&&"undefined"==typeof window.fetch){var i=document.createElement("script");i.setAttribute("src","https://cdnjs.cloudflare.com/ajax/libs/fetch/0.9.0/fetch.js");document.head.appendChild(i)}"complete"===document.readyState?c._internalInit():window.addEventListener("load",c._internalInit)}else s["default"].warn("Your browser does not support push notifications.")},_internalInit:function L(){Promise.all([c._getDbValue("Ids","appId"),c._getDbValue("Ids","registrationId"),c._getDbValue("Options","subscription")]).then(function e(t){var i=t[0],n=t[1],o=t[2];if(i&&i.id!=c._initOptions.appId){c._deleteDbValue("Ids","userId");sessionStorage.removeItem("ONE_SIGNAL_SESSION")}if(!sessionStorage.getItem("ONE_SIGNAL_SESSION")||c._initOptions.subdomainName||"denied"!=Notification.permission&&sessionStorage.getItem("ONE_SIGNAL_NOTIFICATION_PERMISSION")!=Notification.permission){sessionStorage.setItem("ONE_SIGNAL_NOTIFICATION_PERMISSION",Notification.permission);(false!=c._initOptions.autoRegister||n||null!=c._initOptions.subdomainName)&&("visible"==document.visibilityState?c._sessionInit({}):document.addEventListener("visibilitychange",c._visibilitychange))}})["catch"](function(e){s["default"].error(e.stack)})},registerForPushNotifications:function x(e){if(c.isPushNotificationsSupported()){e||(e={});e.fromRegisterFor=true;c._sessionInit(e)}else s["default"].warn("Your browser does not support push notifications.")},_initHttp:function W(e){c._initOptions=e;e.continuePressed&&c.setSubscription(true);var t=null!=parent&&parent!=window,i=opener||parent;if(i){var n=new MessageChannel;n.port1.onmessage=function(e){s["default"].debug("_initHttp.messageChannel.port1.onmessage",e);if(e.data.initOptions){c.setDefaultNotificationUrl(e.data.initOptions.defaultUrl);c.setDefaultTitle(e.data.initOptions.defaultTitle);e.data.initOptions.defaultIcon&&c.setDefaultIcon(e.data.initOptions.defaultIcon);s["default"].debug("document.URL",e.data.initOptions.parent_url);c._getDbValue("NotificationOpened",e.data.initOptions.parent_url).then(function t(n){s["default"].debug("_initHttp NotificationOpened db",n);if(n){c._deleteDbValue("NotificationOpened",e.data.initOptions.parent_url);s["default"].debug("OneSignal._safePostMessage:targetOrigin:",c._initOptions.origin);c._safePostMessage(i,{openedNotification:n.data},c._initOptions.origin,null)}})["catch"](function(e){s["default"].error(e.stack)})}else e.data.getNotificationPermission?c._getSubdomainState(function(e){c._safePostMessage(i,{currentNotificationPermission:e},c._initOptions.origin,null)}):e.data.setSubdomainState&&c.setSubscription(e.data.setSubdomainState.setSubscription)};c._getSubdomainState(function(e){e.isIframe=t;c._safePostMessage(i,{oneSignalInitPageReady:e},c._initOptions.origin,[n.port2])});c._initSaveState();c._httpRegistration=true;0!=location.search.indexOf("?session=true")&&c._getPlayerId(null,function(e){if(!t||e){s["default"].debug("Before navigator.serviceWorker.register");navigator.serviceWorker.register(c.SERVICE_WORKER_PATH,c.SERVICE_WORKER_PARAM).then(c._enableNotifications,c._registerError);s["default"].debug("After navigator.serviceWorker.register")}})}else s["default"].debug("ERROR:_initHttp: No opener or parent found!")},_getSubdomainState:function H(e){var t={};Promise.all([c._getDbValue("Ids","userId"),c._getDbValue("Ids","registrationId"),c._getDbValue("Options","subscription")]).then(function i(t){var i=t[0],n=t[1],o=t[2];e({userId:i?i.id:null,registrationId:n?n.id:null,notifPermssion:Notification.permission,subscriptionSet:o?o.value:null,isPushEnabled:"granted"==Notification.permission&&i&&n&&(o&&o.value||null==o)})})["catch"](function(e){s["default"].error(e.stack)})},_initSaveState:function U(){c._app_id=c._initOptions.appId;c._putDbValue("Ids",{type:"appId",id:c._app_id});c._putDbValue("Options",{key:"pageTitle",value:document.title})},_supportsDirectPermission:function M(){return c._isSupportedSafari()||"https:"==location.protocol||0==location.host.indexOf("localhost")||0==location.host.indexOf("127.0.0.1")},_sessionInit:function F(e){s["default"].debug("Called OneSignal._sessionInit():",e);c._initSaveState();var t=location.origin.match(/^http(s|):\/\/(www\.|)/)[0];if(c._useHttpMode)if(e.fromRegisterFor){var i=void 0!=window.screenLeft?window.screenLeft:screen.left,n=void 0!=window.screenTop?window.screenTop:screen.top,o=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,r=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,a=c._windowWidth,u=c._windowHeight,l=o/2-a/2+i,d=r/2-u/2+n;s["default"].debug("Opening popup window.");var f=c._initOptions.promptOptions,p="";if(f)for(var g=["actionMessage","exampleNotificationTitleDesktop","exampleNotificationMessageDesktop","exampleNotificationTitleMobile","exampleNotificationMessageMobile","exampleNotificationCaption","acceptButtonText","cancelButtonText"],_=0;_<g.length;_++){var h=g[_],v=f[h],b=encodeURIComponent(v);(v||""===v)&&(p+="&"+h+"="+b)}var m=window.open(c._initOneSignalHttp+"?"+p+"&hostPageProtocol="+t,"_blank","scrollbars=yes, width="+a+", height="+u+", top="+d+", left="+l);m&&m.focus()}else{s["default"].debug("Opening iFrame.");c._addSessionIframe(t)}else{if(c._isSupportedSafari()){if(c._initOptions.safari_web_id){var S=c._getNotificationPermission(c._initOptions.safari_web_id);window.safari.pushNotification.requestPermission(c._HOST_URL+"safari",c._initOptions.safari_web_id,{app_id:c._app_id},function(e){s["default"].debug(e);var t=c._getNotificationPermission(c._initOptions.safari_web_id);e.deviceToken?c._registerWithOneSignal(c._app_id,e.deviceToken.toLowerCase(),7):sessionStorage.setItem("ONE_SIGNAL_SESSION",true);c._triggerEvent_nativePromptPermissionChanged(S)})}}else if(e.modalPrompt&&e.fromRegisterFor){if(!c.isPushNotificationsSupported()){s["default"].warn("An attempt was made to open the HTTPS modal permission prompt, but push notifications are not supported on this browser. Opening canceled.");return}c.isPushNotificationsEnabled(function(e){var i=document.createElement("div");i.setAttribute("id","OneSignal-iframe-modal");i.innerHTML='<div id="notif-permission" style="background: rgba(0, 0, 0, 0.7); position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 9000; display: block"></div>';document.body.appendChild(i);var n=document.createElement("style");n.innerHTML="@media (max-width: 560px) { .OneSignal-permission-iframe { width: 100%; height: 100%;} }@media (min-width: 561px) { .OneSignal-permission-iframe { top: 50%; left: 50%; margin-left: -275px; margin-top: -248px;} }";document.getElementsByTagName("head")[0].appendChild(n);var o=document.createElement("iframe");o.className="OneSignal-permission-iframe";o.style.cssText="background: rgba(255, 255, 255, 1); position: fixed;";o.src=c._initOneSignalHttp+"?id="+c._app_id+"&httpsPrompt=true&pushEnabled="+e+"&permissionBlocked="+("undefined"==typeof Notification||"denied"==Notification.permission)+"&hostPageProtocol="+t;o.setAttribute("frameborder","0");o.width=c._windowWidth.toString();o.height=c._windowHeight.toString();s["default"].debug("Opening HTTPS modal prompt.");document.getElementById("notif-permission").appendChild(o)})}else"serviceWorker"in navigator?c._registerForW3CPush(e):s["default"].debug("Service workers are not supported in this browser.");c._triggerEvent("onesignal.sdk.initialized",null)}},_registerForW3CPush:function B(e){c._getDbValue("Ids","registrationId").then(function t(i){i&&e.fromRegisterFor&&"granted"==Notification.permission||navigator.serviceWorker.getRegistration().then(function(e){var t="";c._initOptions.path&&(t=c._initOptions.path);"undefined"==typeof e?navigator.serviceWorker.register(t+c.SERVICE_WORKER_PATH,c.SERVICE_WORKER_PARAM).then(c._enableNotifications,c._registerError):e.active?e.active.scriptURL.indexOf(t+c.SERVICE_WORKER_PATH)>-1?c._getDbValue("Ids","WORKER1_ONE_SIGNAL_SW_VERSION").then(function(i){i&&i.id!=c._VERSION?e.unregister().then(function(){navigator.serviceWorker.register(t+c.SERVICE_WORKER_UPDATER_PATH,c.SERVICE_WORKER_PARAM).then(c._enableNotifications,c._registerError)})["catch"](function(e){s["default"].error(e)}):navigator.serviceWorker.register(t+c.SERVICE_WORKER_PATH,c.SERVICE_WORKER_PARAM).then(c._enableNotifications,c._registerError)})["catch"](function(e){s["default"].error(e)}):e.active.scriptURL.indexOf(t+c.SERVICE_WORKER_UPDATER_PATH)>-1&&c._getDbValue("Ids","WORKER1_ONE_SIGNAL_SW_VERSION").then(function(i){i&&i.id!=c._VERSION?e.unregister().then(function(){navigator.serviceWorker.register(t+c.SERVICE_WORKER_PATH,c.SERVICE_WORKER_PARAM).then(c._enableNotifications,c._registerError)}):navigator.serviceWorker.register(t+c.SERVICE_WORKER_UPDATER_PATH,c.SERVICE_WORKER_PARAM).then(c._enableNotifications,c._registerError)})["catch"](function(e){s["default"].error(e)}):null==e.installing&&navigator.serviceWorker.register(t+c.SERVICE_WORKER_PATH,c.SERVICE_WORKER_PARAM).then(c._enableNotifications,c._registerError)})["catch"](function(e){s["default"].error(e)})})["catch"](function(e){s["default"].error(e)})},_addSessionIframe:function j(e){var t=document.createElement("iframe");t.style.display="none";t.src=c._initOneSignalHttp+"Iframe";sessionStorage.getItem("ONE_SIGNAL_SESSION")?t.src+="?session=true&hostPageProtocol="+e:t.src+="?hostPageProtocol="+e;document.body.appendChild(t);s["default"].debug("Adding session iFrame.");c._sessionIframeAdded=true},_registerError:function G(e){s["default"].debug("navigator.serviceWorker.register:ERROR: "+e)},_enableNotifications:function K(e){e&&s["default"].debug("There is an older ServiceWorker:",e);if("PushManager"in window)if("showNotification"in ServiceWorkerRegistration.prototype)"denied"!==Notification.permission?navigator.serviceWorker.ready.then(function(e){s["default"].info("Service worker active:",e);c._subscribeForPush(e)})["catch"](function(e){s["default"].error(e)}):s["default"].warn("The user has disabled notifications.");else{s["default"].debug("Notifications are not supported. showNotification not available in ServiceWorkerRegistration.");sessionStorage.setItem("ONE_SIGNAL_SESSION",true)}else{s["default"].debug("Push messaging is not supported. No PushManager.");sessionStorage.setItem("ONE_SIGNAL_SESSION",true)}},_getNotificationPermission:function q(e){return window.safari?e?window.safari.pushNotification.permission(e).permission:"default":Notification.permission},_triggerEvent:function z(e,t){if("undefined"!=typeof window){var i=new CustomEvent(e,{bubbles:true,cancelable:true,details:t});window.dispatchEvent(i)}else s["default"].debug("Skipping triggering of event:",e,"because we are running in a ServiceWorker context.")},_triggerEvent_customPromptClicked:function J(e){c._triggerEvent("onesignal.prompt.custom.clicked",{result:e})},_triggerEvent_nativePromptPermissionChanged:function Y(e,t){void 0===t&&(t=c._getNotificationPermission(c._initOptions.safari_web_id));e!==t&&c._triggerEvent("onesignal.prompt.native.permissionchanged",{from:e,to:t})},_triggerEvent_subscriptionChanged:function X(e){c._triggerEvent("onesignal.subscription.changed",e)},_triggerEvent_dbValueRetrieved:function Q(e){c._triggerEvent("onesignal.db.valueretrieved",e)},_triggerEvent_dbValueSet:function Z(e){c._triggerEvent("onesignal.db.valueset",e)},_triggerEvent_internalSubscriptionSet:function ee(e){c._triggerEvent("onesignal.internal.subscriptionset",e)},_subscribeForPush:function te(e){var t=c._getNotificationPermission(c._initOptions.safari_web_id);e.pushManager.subscribe({userVisibleOnly:true}).then(function(e){sessionStorage.setItem("ONE_SIGNAL_NOTIFICATION_PERMISSION",Notification.permission);c._getDbValue("Ids","appId").then(function i(n){var o=n.id;s["default"].debug("Called OneSignal._subscribeForPush() -> serviceWorkerRegistration.pushManager.subscribe().");var r=null;e?r="undefined"!=typeof e.subscriptionId?e.subscriptionId:e.endpoint.replace(new RegExp("^(https://android.googleapis.com/gcm/send/|https://updates.push.services.mozilla.com/push/)"),""):s["default"].warn("Could not subscribe your browser for push notifications.");c._registerWithOneSignal(o,r,c._isSupportedFireFox()?8:5);c._usingNativePermissionHook||c._triggerEvent_nativePromptPermissionChanged(t)})["catch"](function(e){s["default"].error(e)})})["catch"](function(e){s["default"].error("Error while subscribing for push:",e);c._usingNativePermissionHook||c._triggerEvent_nativePromptPermissionChanged(t);20==e.code&&opener&&c._httpRegistration&&window.close()})},sendTag:function ie(e,t){var i={};i[e]=t;c.sendTags(i)},sendTags:function ne(e){c._getDbValue("Ids","userId").then(function t(i){if(i)c._sendToOneSignalApi("players/"+i.id,"PUT",{app_id:c._app_id,tags:e});else if(null==c._tagsToSendOnRegister)c._tagsToSendOnRegister=e;else{var n={};for(var o in c._tagsToSendOnRegister)n[o]=c._tagsToSendOnRegister[o];for(var o in e)n[o]=e[o];c._tagsToSendOnRegister=n}})["catch"](function(e){s["default"].error("sendTags:",e)})},deleteTag:function oe(e){c.deleteTags([e])},deleteTags:function re(e){for(var t={},i=e.length,n=0;i>n;n++)t[e[n]]="";c.sendTags(t)},_handleNotificationOpened:function ae(e){var t=JSON.parse(e.notification.tag);e.notification.close();Promise.all([c._getDbValue("Ids","appId"),c._getDbValue("Ids","userId")]).then(function i(e){var i=e[0],n=e[1];i&&n&&c._sendToOneSignalApi("notifications/"+t.id,"PUT",{app_id:i.id,player_id:n.id,opened:true})})["catch"](function(e){s["default"].error(e)});e.waitUntil(clients.matchAll({type:"window"}).then(function(e){var i=registration.scope;c._defaultLaunchURL&&(i=c._defaultLaunchURL);t.launchURL&&(i=t.launchURL);for(var n=0;n<e.length;n++){var o=e[n];if("focus"in o&&o.url==i){o.focus();o.postMessage(t);return}}if("javascript:void(0);"!==i&&"do_not_open"!==i){c._putDbValue("NotificationOpened",{url:i,data:t});clients.openWindow(i)["catch"](function(e){clients.openWindow(registration.scope+"redirector.html?url="+i)})}})["catch"](function(e){s["default"].error(e)}))},_getTitle:function se(e,t){null==e?Promise.all([c._getDbValue("Options","defaultTitle"),c._getDbValue("Options","pageTitle")]).then(function i(e){var i=e[0],n=e[1];t(i?i.value:n&&null!=n.value?n.value:"")})["catch"](function(e){s["default"].error(e)}):t(e)},_handleGCMMessage:function ue(e,t){if(t.data&&"{"==t.data.text()[0]){s["default"].debug("Received data.text: ",t.data.text());s["default"].debug("Received data.json: ",t.data.json())}t.waitUntil(new Promise(function(t,i){c._getTitle(null,function(i){c._getDbValue("Options","defaultIcon").then(function n(o){c._getLastNotifications(function(n,r){var a={id:n.custom.i,message:n.alert,additionalData:n.custom.a};n.title?a.title=n.title:a.title=i;n.custom.u&&(a.launchURL=n.custom.u);n.icon?a.icon=n.icon:o&&(a.icon=o.value);e.registration.showNotification(a.title,{body:n.alert,icon:a.icon,tag:JSON.stringify(a)}).then(t)["catch"](function(e){s["default"].error(e)});c._getDbValue("Options","defaultUrl").then(function(e){e&&(c._defaultLaunchURL=e.value)})["catch"](function(e){s["default"].error(e)})},t)})["catch"](function(e){s["default"].error(e)})})}))},_getLastNotifications:function le(e,t){c._getDbValue("Ids","userId").then(function i(n){if(n)c._sendToOneSignalApi("players/"+n.id+"/chromeweb_notification","GET",null,function(t){for(var i=0;i<t.length;i++)e(JSON.parse(t[i]))},function(){t()});else{s["default"].debug("Error: could not get notificationId");t()}})["catch"](function(e){s["default"].error(e)})},_listener_receiveMessage:function de(e){s["default"].debug("_listener_receiveMessage: ",e);if(void 0!=c._initOptions&&(""===e.origin||"https://onesignal.com"===e.origin||e.origin==="https://"+c._initOptions.subdomainName+".onesignal.com"))if(e.data.oneSignalInitPageReady){c._getDbValues("Options").then(function n(t){s["default"].debug("current options",t);t.defaultUrl||(t.defaultUrl=document.URL);t.defaultTitle||(t.defaultTitle=document.title);t.parent_url=document.URL;s["default"].debug("Posting message to port[0]",e.ports[0]);e.ports[0].postMessage({initOptions:t})})["catch"](function(e){s["default"].error("_listener_receiveMessage:",e)});var t=e.data.oneSignalInitPageReady;t.isIframe&&(c._iframePort=e.ports[0]);t.userId&&c._putDbValue("Ids",{type:"userId",id:t.userId});t.registrationId&&c._putDbValue("Ids",{type:"registrationId",id:t.registrationId});c._fireNotificationEnabledCallback(t.isPushEnabled);c._sendUnsentTags()}else if(e.data.currentNotificationPermission)c._fireNotificationEnabledCallback(e.data.currentNotificationPermission.isPushEnabled);else if(e.data.idsAvailable){sessionStorage.setItem("ONE_SIGNAL_SESSION",true);c._putDbValue("Ids",{type:"userId",id:e.data.idsAvailable.userId});c._putDbValue("Ids",{type:"registrationId",id:e.data.idsAvailable.registrationId});if(c._idsAvailable_callback.length>0)for(;c._idsAvailable_callback.length>0;){var i=c._idsAvailable_callback.pop();i({userId:e.data.idsAvailable.userId,registrationId:e.data.idsAvailable.registrationId})}c._sendUnsentTags()}else if(e.data.httpsPromptAccepted){c.registerForPushNotifications();c.setSubscription(true);(elem=document.getElementById("OneSignal-iframe-modal")).parentNode.removeChild(elem);c._triggerEvent_customPromptClicked("granted")}else if(e.data.httpsPromptCanceled){(elem=document.getElementById("OneSignal-iframe-modal")).parentNode.removeChild(elem);c._triggerEvent_customPromptClicked("denied")}else e.data.httpPromptAccepted?c._triggerEvent_customPromptClicked("granted"):e.data.httpPromptCanceled?c._triggerEvent_customPromptClicked("denied"):c._notificationOpened_callback&&c._notificationOpened_callback(e.data)},addListenerForNotificationOpened:function ce(e){c._notificationOpened_callback=e;window&&c._getDbValue("NotificationOpened",document.URL).then(function(e){if(e){c._deleteDbValue("NotificationOpened",document.URL);c._notificationOpened_callback(e.data)}})["catch"](function(e){s["default"].error(e)})},_fireNotificationEnabledCallback:function fe(e){if(c._isNotificationEnabledCallback){c._isNotificationEnabledCallback(e);c._isNotificationEnabledCallback=null}},getIdsAvailable:function pe(e){if(void 0!==e){c._idsAvailable_callback.push(e);Promise.all([c._getDbValue("Ids","userId"),c._getDbValue("Ids","registrationId")]).then(function t(e){var t=e[0],i=e[1];if(t)if(i)for(;c._idsAvailable_callback.length>0;){var n=c._idsAvailable_callback.pop();n({userId:t.id,registrationId:i.id})}else for(;c._idsAvailable_callback.length>0;){var n=c._idsAvailable_callback.pop();n({userId:t.id,registrationId:null})}})["catch"](function(e){s["default"].error(e)})}},getTags:function ge(e){c._getDbValue("Ids","userId").then(function(t){t&&c._sendToOneSignalApi("players/"+t.id,"GET",null,function(t){e(t.tags)})})["catch"](function(e){s["default"].error(e)})},isPushNotificationsEnabled:function _e(e){if(c.isPushNotificationsSupported())if(!c._initOptions.subdomainName||c._isBrowserSafari())Promise.all([c._getDbValue("Ids","registrationId"),c._getDbValue("Options","subscription")]).then(function(t){var i=t[0],n=t[1];if(i){if(n&&!n.value)return e(false);e("granted"==Notification.permission)}else e(false)})["catch"](function(e){s["default"].error(e)});else{c._isNotificationEnabledCallback=e;c._iframePort&&c._iframePort.postMessage({getNotificationPermission:true})}else s["default"].warn("Your browser does not support push notifications.")},_isSupportedSafari:function he(){var e=navigator.appVersion.match("Version/([0-9]?).* Safari");return null==e?false:/iPhone|iPad|iPod/i.test(navigator.userAgent)?false:parseInt(e[1])>6},_isBrowserSafari:function ve(){var e=navigator.appVersion.match("Version/([0-9]?).* Safari");return null!=e},_isSupportedFireFox:function be(){var e=navigator.userAgent.match(/(Firefox\/)([0-9]{2,}\.[0-9]{1,})/);return e?parseInt(e[2].substring(0,2))>43:false},_isBrowserFirefox:function me(){var e=navigator.userAgent.match(/(Firefox\/)([0-9]{2,}\.[0-9]{1,})/);return null!=e},_getFirefoxVersion:function Se(){var e=navigator.userAgent.match(/(Firefox\/)([0-9]{2,}\.[0-9]{1,})/);return e?parseInt(e[2].substring(0,2)):-1},isPushNotificationsSupported:function Oe(){var e=navigator.appVersion.match(/Chrome\/(.*?) /);return c._isSupportedFireFox()?true:c._isSupportedSafari()?true:e?navigator.appVersion.match(/Edge/)?false:navigator.appVersion.match(/ wv/)?false:navigator.appVersion.match(/OPR\//)?false:/iPad|iPhone|iPod/.test(navigator.platform)?false:parseInt(e[1].substring(0,2))>41:false},_getNotificationTypes:function Ee(e){c._getSubscription(function(t){e(t?1:-2)})},setSubscription:function Ie(e){c._iframePort?c._iframePort.postMessage({setSubdomainState:{setSubscription:e}}):c._getSubscription(function(t){if(t!=e){c._putDbValue("Options",{key:"subscription",value:e});c._getDbValue("Ids","userId").then(function(t){t&&c._sendToOneSignalApi("players/"+t.id,"PUT",{app_id:c._app_id,notification_types:e?1:-2},function i(){c._triggerEvent_internalSubscriptionSet(e)})})["catch"](function(e){s["default"].error(e)})}})},_getSubscription:function we(e){c._getDbValue("Options","subscription").then(function(t){e(!(t&&false==t.value))})["catch"](function(e){s["default"].error(e)})},_safePostMessage:function ye(e,t,i,n){var o=i.toLowerCase();if(o.startsWith("http://")){var r={};location.search.substr(1).split("&").forEach(function(e){r[e.split("=")[0]]=e.split("=")[1]});var a=/^http(s|):\/\/(www\.|)/;o=o.replace(a,r.hostPageProtocol)}n?e.postMessage(t,o,n):e.postMessage(t,o)},_process_pushes:function Re(e){for(var t=0;t<e.length;t++)c.push(e[t])},push:function Ne(e){if("function"==typeof e)e();else{var t=e.shift();c[t].apply(null,e)}}};if("undefined"!=typeof window)window.addEventListener("message",c._listener_receiveMessage,false);else{importScripts("https://cdn.onesignal.com/sdks/serviceworker-cache-polyfill.js");self.addEventListener("push",function(e){c._handleGCMMessage(self,e)});self.addEventListener("notificationclick",function(e){c._handleNotificationOpened(e)});var f=null!=location.href.match(/https\:\/\/.*\.onesignal.com\/sdks\//);self.addEventListener("install",function(e){s["default"].debug("OneSignal Installed service worker: "+c._VERSION);self.location.pathname.indexOf("OneSignalSDKWorker.js")>-1?c._putDbValue("Ids",{type:"WORKER1_ONE_SIGNAL_SW_VERSION",id:c._VERSION}):c._putDbValue("Ids",{type:"WORKER2_ONE_SIGNAL_SW_VERSION",id:c._VERSION});f&&e.waitUntil(caches.open("OneSignal_"+c._VERSION).then(function(e){return e.addAll(["/sdks/initOneSignalHttpIframe","/sdks/initOneSignalHttpIframe?session=*","/sdks/manifest_json"]);
})["catch"](function(e){s["default"].error(e)}))});f&&self.addEventListener("fetch",function(e){e.respondWith(caches.match(e.request).then(function(t){return t?t:i(e.request)})["catch"](function(e){s["default"].error(e)}))})}d&&c._process_pushes(d);e.exports=c}).call(exports,t(2))},function(e,exports){(function(t){(function(){!function(){"use strict";function e(e){"string"!=typeof e&&(e=String(e));if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function t(e){"string"!=typeof e&&(e=String(e));return e}function i(e){this.map={};e instanceof i?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function n(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=true}function o(e){return new Promise(function(t,i){e.onload=function(){t(e.result)};e.onerror=function(){i(e.error)}})}function r(e){var t=new FileReader;t.readAsArrayBuffer(e);return o(t)}function a(e){var t=new FileReader;t.readAsText(e);return o(t)}function s(){this.bodyUsed=false;this._initBody=function(e){this._bodyInit=e;if("string"==typeof e)this._bodyText=e;else if(p.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(p.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(e){if(!p.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText=""};if(p.blob){this.blob=function(){var e=n(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))};this.arrayBuffer=function(){return this.blob().then(r)};this.text=function(){var e=n(this);if(e)return e;if(this._bodyBlob)return a(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}}else this.text=function(){var e=n(this);return e?e:Promise.resolve(this._bodyText)};p.formData&&(this.formData=function(){return this.text().then(d)});this.json=function(){return this.text().then(JSON.parse)};return this}function u(e){var t=e.toUpperCase();return g.indexOf(t)>-1?t:e}function l(e,t){t=t||{};var n=t.body;if(l.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url;this.credentials=e.credentials;t.headers||(this.headers=new i(e.headers));this.method=e.method;this.mode=e.mode;if(!n){n=e._bodyInit;e.bodyUsed=true}}else this.url=e;this.credentials=t.credentials||this.credentials||"omit";(t.headers||!this.headers)&&(this.headers=new i(t.headers));this.method=u(t.method||this.method||"GET");this.mode=t.mode||this.mode||null;this.referrer=null;if(("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function d(e){var t=new FormData;e.trim().split("&").forEach(function(e){if(e){var i=e.split("="),n=i.shift().replace(/\+/g," "),o=i.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}});return t}function c(e){var t=new i,n=e.getAllResponseHeaders().trim().split("\n");n.forEach(function(e){var i=e.trim().split(":"),n=i.shift().trim(),o=i.join(":").trim();t.append(n,o)});return t}function f(e,t){t||(t={});this._initBody(e);this.type="default";this.status=t.status;this.ok=this.status>=200&&this.status<300;this.statusText=t.statusText;this.headers=t.headers instanceof i?t.headers:new i(t.headers);this.url=t.url||""}if(!self.fetch){i.prototype.append=function(i,n){i=e(i);n=t(n);var o=this.map[i];if(!o){o=[];this.map[i]=o}o.push(n)};i.prototype["delete"]=function(t){delete this.map[e(t)]};i.prototype.get=function(t){var i=this.map[e(t)];return i?i[0]:null};i.prototype.getAll=function(t){return this.map[e(t)]||[]};i.prototype.has=function(t){return this.map.hasOwnProperty(e(t))};i.prototype.set=function(i,n){this.map[e(i)]=[t(n)]};i.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(i){this.map[i].forEach(function(n){e.call(t,n,i,this)},this)},this)};var p={blob:"FileReader"in self&&"Blob"in self&&function(){try{new Blob;return true}catch(e){return false}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self},g=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];l.prototype.clone=function(){return new l(this)};s.call(l.prototype);s.call(f.prototype);f.prototype.clone=function(){return new f(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})};f.error=function(){var e=new f(null,{status:0,statusText:""});e.type="error";return e};var _=[301,302,303,307,308];f.redirect=function(e,t){if(-1===_.indexOf(t))throw new RangeError("Invalid status code");return new f(null,{status:t,headers:{location:e}})};self.Headers=i;self.Request=l;self.Response=f;self.fetch=function(e,t){return new Promise(function(i,n){function o(){return"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0}var r;r=l.prototype.isPrototypeOf(e)&&!t?e:new l(e,t);var a=new XMLHttpRequest;a.onload=function(){var e=1223===a.status?204:a.status;if(100>e||e>599)n(new TypeError("Network request failed"));else{var t={status:e,statusText:a.statusText,headers:c(a),url:o()},r="response"in a?a.response:a.responseText;i(new f(r,t))}};a.onerror=function(){n(new TypeError("Network request failed"))};a.open(r.method,r.url,true);"include"===r.credentials&&(a.withCredentials=true);"responseType"in a&&p.blob&&(a.responseType="blob");r.headers.forEach(function(e,t){a.setRequestHeader(t,e)});a.send("undefined"==typeof r._bodyInit?null:r._bodyInit)})};self.fetch.polyfill=true}}();e.exports=t.fetch}).call(t)}).call(exports,function(){return this}())},function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HOST_URL=exports.PROD_HOST=exports.DEV_HOST=void 0;var i=t(4),n=exports.DEV_HOST="https://192.168.1.206:3000",o=exports.PROD_HOST="https://onesignal.com",r=exports.HOST_URL=((0,i.isDev)()?n:o)+"/api/v1/"},function(e,exports,t){"use strict";function i(e){function t(e){return e>1?"s":""}var i=Math.floor(e/1e3),n=Math.floor(i/31536e3);if(n)return n+" year"+t(n);var o=Math.floor((i%=31536e3)/86400);if(o)return o+" day"+t(o);var r=Math.floor((i%=86400)/3600);if(r)return r+" hour"+t(r);var a=Math.floor((i%=3600)/60);if(a)return a+" minute"+t(a);var s=i%60;return s?s+" second"+t(s):"just now"}function n(){return"undefined"==typeof window}function o(){return false}Object.defineProperty(exports,"__esModule",{value:true});exports.getHumanizedTimeDuration=i;exports.isServiceWorkerContext=n;exports.isDev=o},function(e,exports,t){(function(e){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(t,i,n){var o=new Headers;o.append("Content-Type","application/json;charset=UTF-8");var a={method:i||"NO_METHOD_SPECIFIED",headers:o,cache:"no-cache",body:JSON.stringify(n)};return new Promise(function(i,n){e(r.HOST_URL+t,a).then(function o(e){e.status>=200&&e.status<300?i(e.json()):n(new Error(e.statusText))})["catch"](function(e){n(e)})})}function o(e,t,i,o){var r={app_id:e,headings:i,contents:o,include_player_ids:t,isAnyWeb:true,url:"javascript:void(0);"};return n("notifications","POST",r)}Object.defineProperty(exports,"__esModule",{value:true});exports.apiCall=n;exports.sendNotification=o;var r=t(3),a=t(6),s=i(a)}).call(exports,t(2))},function(e,exports,t){var i,n;!function(o,r){"use strict";"object"==typeof e&&e.exports&&true?e.exports=r():!(i=r,n="function"==typeof i?i.call(exports,t,exports,e):i,void 0!==n&&(e.exports=n))}(this,function(){"use strict";function e(e){return typeof console===s?false:void 0!==console[e]?t(console,e):void 0!==console.log?t(console,"log"):a}function t(e,t){var i=e[t];if("function"==typeof i.bind)return i.bind(e);try{return Function.prototype.bind.call(i,e)}catch(n){return function(){return Function.prototype.apply.apply(i,[e,arguments])}}}function i(e,t,i){return function(){if(typeof console!==s){n.call(this,t,i);this[e].apply(this,arguments)}}}function n(e,t){for(var i=0;i<u.length;i++){var n=u[i];this[n]=e>i?a:this.methodFactory(n,e,t)}}function o(t,n,o){return e(t)||i.apply(this,arguments)}function r(e,t,i){function r(e){var t=(u[e]||"silent").toUpperCase();try{window.localStorage[c]=t;return}catch(i){}try{window.document.cookie=encodeURIComponent(c)+"="+t+";"}catch(i){}}function a(){var e;try{e=window.localStorage[c]}catch(t){}if(typeof e===s)try{var i=window.document.cookie,n=i.indexOf(encodeURIComponent(c)+"=");n&&(e=/^([^;]+)/.exec(i.slice(n))[1])}catch(t){}void 0===l.levels[e]&&(e=void 0);return e}var l=this,d,c="loglevel";e&&(c+=":"+e);l.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5};l.methodFactory=i||o;l.getLevel=function(){return d};l.setLevel=function(t,i){"string"==typeof t&&void 0!==l.levels[t.toUpperCase()]&&(t=l.levels[t.toUpperCase()]);if(!("number"==typeof t&&t>=0&&t<=l.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;d=t;false!==i&&r(t);n.call(l,t,e);return typeof console===s&&t<l.levels.SILENT?"No console available for logging":void 0};l.setDefaultLevel=function(e){a()||l.setLevel(e,false)};l.enableAll=function(e){l.setLevel(l.levels.TRACE,e)};l.disableAll=function(e){l.setLevel(l.levels.SILENT,e)};var f=a();null==f&&(f=null==t?"WARN":t);l.setLevel(f,false)}var a=function(){},s="undefined",u=["trace","debug","info","warn","error"],l=new r,d={};l.getLogger=function f(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=d[e];t||(t=d[e]=new r(e,l.getLevel(),l.methodFactory));return t};var c=typeof window!==s?window.log:void 0;l.noConflict=function(){typeof window!==s&&window.log===l&&(window.log=c);return l};return l})},function(e,exports){"use strict";function t(){}Object.defineProperty(exports,"__esModule",{value:true});t.store={};t.LIMIT=2;t.put=function(e,i){void 0===t.store[e]&&(t.store[e]=[null,null]);t.store[e].push(i);t.store[e].length==t.LIMIT+1&&t.store[e].shift();return t.store[e]};t.get=function(e){return t.store[e]};exports["default"]=t},function(e,exports){"use strict";"undefined"!=typeof window&&!function(){function e(e,t){t=t||{bubbles:false,cancelable:false,details:void 0};var i=document.createEvent("CustomEvent");i.initCustomEvent(e,t.bubbles,t.cancelable,t.details);return i}e.prototype=window.Event.prototype;window.CustomEvent=e}()},function(e,exports,t){(function(i){e.exports=i.OneSignal=t(1)}).call(exports,function(){return this}())}]);