!function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:false};e[n].call(o.exports,o,o.exports,t);o.loaded=true;return o.exports}var i={};t.m=e;t.c=i;t.p="";return t(0)}([function(e,exports,t){"use strict";t(1);t(5)},function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var n=t(2),o=i(n),a=t(3),r=i(a);t(4);var s=null;"undefined"!=typeof u&&(s=u);var u={_VERSION:109e3,_HOST_URL:"https://onesignal.com/api/v1/",_app_id:null,_tagsToSendOnRegister:null,_notificationOpened_callback:null,_idsAvailable_callback:[],_defaultLaunchURL:null,_initOptions:null,_httpRegistration:false,_main_page_port:null,_isNotificationEnabledCallback:null,_subscriptionSet:true,_initOneSignalHttp:null,_sessionIframeAdded:false,_useHttpMode:null,_windowWidth:550,_windowHeight:480,LOGGING:false,SERVICE_WORKER_UPDATER_PATH:"OneSignalSDKUpdaterWorker.js",SERVICE_WORKER_PATH:"OneSignalSDKWorker.js",SERVICE_WORKER_PARAM:{},_ensureDbInstance:function d(){return new Promise(function(e,t){if(u._oneSignal_db)e(u._oneSignal_db);else{var i=indexedDB.open("ONE_SIGNAL_SDK_DB",1);i.onsuccess=function(t){var i=t.target.result;u._oneSignal_db=i;o["default"].debug("Succesfully opened IndexedDB.");e(i)};i.onerror=function(e){o["default"].error("Unable to open IndexedDB.",e);t(e)};i.onupgradeneeded=function(e){o["default"].debug("Rebuilding schema in IndexedDB...");var t=e.target.result;t.createObjectStore("Ids",{keyPath:"type"});t.createObjectStore("NotificationOpened",{keyPath:"url"});t.createObjectStore("Options",{keyPath:"key"})}}})},_getDbValue:function c(e,t){return new Promise(function(i,n){u._ensureDbInstance().then(function(o){var a=o.transaction(e).objectStore(e).get(t);a.onsuccess=function(e){a.result&&u._triggerEvent_dbValueRetrieved(a.result);i(a.result)};a.onerror=function(e){n(a.errorCode)}})["catch"](function(e){o["default"].error(e.stack)})})},_getDbValues:function f(e){return new Promise(function(t,i){u._ensureDbInstance().then(function(n){var o={},a=n.transaction(e).objectStore(e).openCursor();a.onsuccess=function(e){var i=e.target.result;if(i){u._triggerEvent_dbValueRetrieved(i);o[i.key]=i.value.value;i["continue"]()}else t(o)};a.onerror=function(e){i(a.errorCode)}})["catch"](function(e){o["default"].error(e.stack)})})},_putDbValue:function g(e,t){return new Promise(function(i,n){u._ensureDbInstance().then(function(n){n.transaction([e],"readwrite").objectStore(e).put(t);u._triggerEvent_dbValueSet(t);i(t)})["catch"](function(e){o["default"].error(e.stack)})})},_deleteDbValue:function p(e,t){return new Promise(function(i,n){u._ensureDbInstance().then(function(n){n.transaction([e],"readwrite").objectStore(e)["delete"](t);i(t)})["catch"](function(e){o["default"].error(e.stack)})})},_sendToOneSignalApi:function _(e,t,i,n,a){var r={method:t};if(i){r.headers={"Content-type":"application/json;charset=UTF-8"};r.body=JSON.stringify(i)}fetch(u._HOST_URL+e,r).then(function s(e){return e.status>=200&&e.status<300?Promise.resolve(e):Promise.reject(new Error(e.statusText))}).then(function l(e){return e.json()}).then(function(e){o["default"].debug(e);null!=n&&n(e)})["catch"](function(e){o["default"].error("Request failed:",e);null!=a&&a()})},_getLanguage:function h(){return navigator.language?navigator.language.length>3?navigator.language.substring(0,2):navigator.language:"en"},_getPlayerId:function b(e,t){e?t(e):u._getDbValue("Ids","userId").then(function i(e){t(e?e.id:null)})["catch"](function(e){o["default"].error(e.stack)})},_getBrowserName:function v(){return navigator.appVersion.match(/Chrome\/(.*?) /)?"Chrome":navigator.appVersion.match("Version/(.*) (Safari)")?"Safari":navigator.userAgent.match(/Firefox\/([0-9]{2,}\.[0-9]{1,})/)?"Firefox":""},_registerWithOneSignal:function m(e,t,i){u._getDbValue("Ids","userId").then(function n(a){u._getNotificationTypes(function(n){var r="players",s={app_id:e,device_type:i,language:u._getLanguage(),timezone:-60*(new Date).getTimezoneOffset(),device_model:navigator.platform+" "+u._getBrowserName(),device_os:(navigator.appVersion.match(/Chrome\/(.*?) /)||navigator.appVersion.match("Version/(.*) Safari")||navigator.userAgent.match(/Firefox\/([0-9]{2,}\.[0-9]{1,})/))[1],sdk:u._VERSION};if(a){r="players/"+a.id+"/on_session";s.notification_types=n}else 1!=n&&(s.notification_types=n);if(t){s.identifier=t;u._putDbValue("Ids",{type:"registrationId",id:t})}u._sendToOneSignalApi(r,"POST",s,function l(e){sessionStorage.setItem("ONE_SIGNAL_SESSION",true);if(e.id){u._putDbValue("Ids",{type:"userId",id:e.id});u._sendUnsentTags()}u._getPlayerId(e.id,function(e){if(u._idsAvailable_callback.length>0)for(;u._idsAvailable_callback.length>0;){var i=u._idsAvailable_callback.pop();i({userId:e,registrationId:t})}if(u._httpRegistration){o["default"].debug("Sending player Id and registrationId back to host page");o["default"].debug(u._initOptions);var n=opener||parent;u._safePostMessage(n,{idsAvailable:{userId:e,registrationId:t}},u._initOptions.origin,null);opener&&window.close()}else o["default"].debug("NO opener")})})})})["catch"](function(e){o["default"].error(e.stack)})},_sendUnsentTags:function S(){if(u._tagsToSendOnRegister){u.sendTags(u._tagsToSendOnRegister);u._tagsToSendOnRegister=null}},setDefaultNotificationUrl:function I(e){u._putDbValue("Options",{key:"defaultUrl",value:e})},setDefaultIcon:function O(e){u._putDbValue("Options",{key:"defaultIcon",value:e})},setDefaultTitle:function E(e){u._putDbValue("Options",{key:"defaultTitle",value:e})},_visibilitychange:function w(){if("visible"==document.visibilityState){document.removeEventListener("visibilitychange",u._visibilitychange);u._sessionInit({})}},onNativePromptChanged:function N(e){o["default"].debug("Event onesignal.prompt.native.permissionchanged:",e.detail);u._checkTrigger_eventSubscriptionChanged()},_onSubscriptionChanged:function R(e){o["default"].debug("Event onesignal.subscription.changed:",e.detail)},_onDbValueRetrieved:function P(e){o["default"].debug("Event onesignal.db.retrieved:",e.detail)},_onDbValueSet:function y(e){o["default"].debug("Event onesignal.db.valueset:",e.detail);var t=e.detail;if("userId"===t.type){r["default"].put("db.ids.userId",t.id);u._checkTrigger_eventSubscriptionChanged()}},_onInternalSubscriptionSet:function V(e){o["default"].debug("Event onesignal.internal.subscriptionset:",e.detail);var t=e.detail;r["default"].put("subscription.value",t);u._checkTrigger_eventSubscriptionChanged()},_checkTrigger_eventSubscriptionChanged:function k(){var e=r["default"].get("notification.permission"),t=e[e.length-2],i=e[e.length-1],n=r["default"].get("db.ids.userId"),a=n[n.length-2],s=n[n.length-1],l=r["default"].get("subscription.value"),d=l[l.length-2],c=l[l.length-1],f="unchanged";(("default"===t||"denied"===t||null===t)&&"granted"===i&&null!==s&&true==c||false==d&&true==c&&null!=s&&"granted"==i)&&(f=true);("denied"!==t&&"denied"===i||"granted"===t&&"granted"!==i||null!==a&&null===s||false!==d&&false===c)&&(f=false);if("unchanged"!==f){o["default"].debug("SubscriptionChanged event fired, new state is now:",f);var g=r["default"].put("event.subscriptionchanged.lastriggered",Date.now()),p=g[g.length-1],_=g[g.length-2],h=(p-_)/1e3,b=r["default"].put("event.subscriptionchanged.laststates",f),v=b[b.length-1],m=b[b.length-2],S=null!=_&&1>=h||v===m;if(false===S){o["default"].info("Triggering event onesignal.subscription.changed:",f);u._triggerEvent_subscriptionChanged(f)}else{1>=h&&o["default"].debug("SubscriptionChanged event fired, but because last event was fired in the last ",h," seconds, skipping event firing.");v===m&&o["default"].debug("SubscriptionChanged event fired, but because the new subscription state ("+v+") is the same as the last subscription state ("+m+"), skipping event firing.")}}else o["default"].debug("SubscriptionChanged event fired, but new state is unchanged, so returning.")},init:function T(e){u._initOptions=e;u.LOGGING?o["default"].enableAll():o["default"].disableAll();o["default"].info("OneSignal Web SDK loaded (version "+u._VERSION+").");if(u.isPushNotificationsSupported()){if(!navigator.permissions||u._isBrowserFirefox()&&u._getFirefoxVersion()<=45){var t=u._getNotificationPermission();r["default"].put("notification.permission",t)}else{o["default"].info("Using browser's native PermissionStatus.onChange() to hook permission change event.");u._usingNativePermissionHook=true;var t=u._getNotificationPermission();r["default"].put("notification.permission",t);navigator.permissions.query({name:"notifications"}).then(function(e){e.onchange=function(){var e=r["default"].put("notification.permission",this.state),t=e[0],i=e[1];u._triggerEvent_nativePromptPermissionChanged(t,i)}})["catch"](function(e){o["default"].error(e.stack)})}u._getDbValue("Ids","userId").then(function(e){var t=e?e.id:null;r["default"].put("db.ids.userId",t)});u._getSubscription(function(e){r["default"].put("subscription.value",e)});window.addEventListener("onesignal.prompt.native.permissionchanged",u.onNativePromptChanged);window.addEventListener("onesignal.subscription.changed",u._onSubscriptionChanged);window.addEventListener("onesignal.db.valueretrieved",u._onDbValueRetrieved);window.addEventListener("onesignal.db.valueset",u._onDbValueSet);window.addEventListener("onesignal.db.valueset",u._onDbValueSet);window.addEventListener("onesignal.internal.subscriptionset",u._onInternalSubscriptionSet);u._useHttpMode=!u._isSupportedSafari()&&(!u._supportsDirectPermission()||u._initOptions.subdomainName);u._useHttpMode?u._initOneSignalHttp="https://"+u._initOptions.subdomainName+".onesignal.com/sdks/initOneSignalHttp":u._initOneSignalHttp="https://onesignal.com/sdks/initOneSignalHttps";if(u._isSupportedSafari()&&"undefined"==typeof window.fetch){var i=document.createElement("script");i.setAttribute("src","https://cdnjs.cloudflare.com/ajax/libs/fetch/0.9.0/fetch.js");document.head.appendChild(i)}"complete"===document.readyState?u._internalInit():window.addEventListener("load",u._internalInit)}else o["default"].warn("Your browser does not support push notifications.")},_internalInit:function A(){Promise.all([u._getDbValue("Ids","appId"),u._getDbValue("Ids","registrationId"),u._getDbValue("Options","subscription")]).then(function e(t){var i=t[0],n=t[1],o=t[2];if(i&&i.id!=u._initOptions.appId){u._deleteDbValue("Ids","userId");sessionStorage.removeItem("ONE_SIGNAL_SESSION")}if(!sessionStorage.getItem("ONE_SIGNAL_SESSION")||u._initOptions.subdomainName||"denied"!=Notification.permission&&sessionStorage.getItem("ONE_SIGNAL_NOTIFICATION_PERMISSION")!=Notification.permission){sessionStorage.setItem("ONE_SIGNAL_NOTIFICATION_PERMISSION",Notification.permission);(false!=u._initOptions.autoRegister||n||null!=u._initOptions.subdomainName)&&("visible"==document.visibilityState?u._sessionInit({}):document.addEventListener("visibilitychange",u._visibilitychange))}})["catch"](function(e){o["default"].error(e.stack)})},registerForPushNotifications:function C(e){if(u.isPushNotificationsSupported()){e||(e={});e.fromRegisterFor=true;u._sessionInit(e)}else o["default"].warn("Your browser does not support push notifications.")},_initHttp:function D(e){u._initOptions=e;e.continuePressed&&u.setSubscription(true);var t=null!=parent&&parent!=window,i=opener||parent;if(i){var n=new MessageChannel;n.port1.onmessage=function(e){o["default"].debug("_initHttp.messageChannel.port1.onmessage",e);if(e.data.initOptions){u.setDefaultNotificationUrl(e.data.initOptions.defaultUrl);u.setDefaultTitle(e.data.initOptions.defaultTitle);e.data.initOptions.defaultIcon&&u.setDefaultIcon(e.data.initOptions.defaultIcon);o["default"].debug("document.URL",e.data.initOptions.parent_url);u._getDbValue("NotificationOpened",e.data.initOptions.parent_url).then(function t(n){o["default"].debug("_initHttp NotificationOpened db",n);if(n){u._deleteDbValue("NotificationOpened",e.data.initOptions.parent_url);o["default"].debug("OneSignal._safePostMessage:targetOrigin:",u._initOptions.origin);u._safePostMessage(i,{openedNotification:n.data},u._initOptions.origin,null)}})["catch"](function(e){o["default"].error(e.stack)})}else e.data.getNotificationPermission?u._getSubdomainState(function(e){u._safePostMessage(i,{currentNotificationPermission:e},u._initOptions.origin,null)}):e.data.setSubdomainState&&u.setSubscription(e.data.setSubdomainState.setSubscription)};u._getSubdomainState(function(e){e.isIframe=t;u._safePostMessage(i,{oneSignalInitPageReady:e},u._initOptions.origin,[n.port2])});u._initSaveState();u._httpRegistration=true;0!=location.search.indexOf("?session=true")&&u._getPlayerId(null,function(e){if(!t||e){o["default"].debug("Before navigator.serviceWorker.register");navigator.serviceWorker.register(u.SERVICE_WORKER_PATH,u.SERVICE_WORKER_PARAM).then(u._enableNotifications,u._registerError);o["default"].debug("After navigator.serviceWorker.register")}})}else o["default"].debug("ERROR:_initHttp: No opener or parent found!")},_getSubdomainState:function L(e){var t={};Promise.all([u._getDbValue("Ids","userId"),u._getDbValue("Ids","registrationId"),u._getDbValue("Options","subscription")]).then(function i(t){var i=t[0],n=t[1],o=t[2];e({userId:i?i.id:null,registrationId:n?n.id:null,notifPermssion:Notification.permission,subscriptionSet:o?o.value:null,isPushEnabled:"granted"==Notification.permission&&i&&n&&(o&&o.value||null==o)})})["catch"](function(e){o["default"].error(e.stack)})},_initSaveState:function W(){u._app_id=u._initOptions.appId;u._putDbValue("Ids",{type:"appId",id:u._app_id});u._putDbValue("Options",{key:"pageTitle",value:document.title})},_supportsDirectPermission:function x(){return u._isSupportedSafari()||"https:"==location.protocol||0==location.host.indexOf("localhost")||0==location.host.indexOf("127.0.0.1")},_sessionInit:function M(e){o["default"].debug("_sessionInit:",e);u._initSaveState();var t=location.origin.match(/^http(s|):\/\/(www\.|)/)[0];if(u._useHttpMode)if(e.fromRegisterFor){var i=void 0!=window.screenLeft?window.screenLeft:screen.left,n=void 0!=window.screenTop?window.screenTop:screen.top,a=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,r=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,s=u._windowWidth,l=u._windowHeight,d=a/2-s/2+i,c=r/2-l/2+n;o["default"].debug("Opening popup window.");var f=u._initOptions.promptOptions,g="";if(f)for(var p=["actionMessage","exampleNotificationTitleDesktop","exampleNotificationMessageDesktop","exampleNotificationTitleMobile","exampleNotificationMessageMobile","exampleNotificationCaption","acceptButtonText","cancelButtonText"],_=0;_<p.length;_++){var h=p[_],b=f[h],v=encodeURIComponent(b);(b||""===b)&&(g+="&"+h+"="+v)}var m=window.open(u._initOneSignalHttp+"?"+g+"&hostPageProtocol="+t,"_blank","scrollbars=yes, width="+s+", height="+l+", top="+c+", left="+d);m&&m.focus()}else{o["default"].debug("Opening iFrame.");u._addSessionIframe(t)}else if(u._isSupportedSafari()){if(u._initOptions.safari_web_id){var S=u._getNotificationPermission(u._initOptions.safari_web_id);window.safari.pushNotification.requestPermission(u._HOST_URL+"safari",u._initOptions.safari_web_id,{app_id:u._app_id},function(e){o["default"].debug(e);var t=u._getNotificationPermission(u._initOptions.safari_web_id);e.deviceToken?u._registerWithOneSignal(u._app_id,e.deviceToken.toLowerCase(),7):sessionStorage.setItem("ONE_SIGNAL_SESSION",true);u._triggerEvent_nativePromptPermissionChanged(S)})}}else if(e.modalPrompt&&e.fromRegisterFor){if(!u.isPushNotificationsSupported()){o["default"].warn("An attempt was made to open the HTTPS modal permission prompt, but push notifications are not supported on this browser. Opening canceled.");return}u.isPushNotificationsEnabled(function(e){var i=document.createElement("div");i.setAttribute("id","OneSignal-iframe-modal");i.innerHTML='<div id="notif-permission" style="background: rgba(0, 0, 0, 0.7); position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 9000; display: block"></div>';document.body.appendChild(i);var n=document.createElement("style");n.innerHTML="@media (max-width: 560px) { .OneSignal-permission-iframe { width: 100%; height: 100%;} }@media (min-width: 561px) { .OneSignal-permission-iframe { top: 50%; left: 50%; margin-left: -275px; margin-top: -248px;} }";document.getElementsByTagName("head")[0].appendChild(n);var a=document.createElement("iframe");a.className="OneSignal-permission-iframe";a.style.cssText="background: rgba(255, 255, 255, 1); position: fixed;";a.src=u._initOneSignalHttp+"?id="+u._app_id+"&httpsPrompt=true&pushEnabled="+e+"&permissionBlocked="+("undefined"==typeof Notification||"denied"==Notification.permission)+"&hostPageProtocol="+t;a.setAttribute("frameborder","0");a.width=u._windowWidth.toString();a.height=u._windowHeight.toString();o["default"].debug("Opening HTTPS modal prompt.");document.getElementById("notif-permission").appendChild(a)})}else"serviceWorker"in navigator?u._registerForW3CPush(e):o["default"].debug("Service workers are not supported in this browser.")},_registerForW3CPush:function U(e){u._getDbValue("Ids","registrationId").then(function t(i){i&&e.fromRegisterFor&&"granted"==Notification.permission||navigator.serviceWorker.getRegistration().then(function(e){var t="";u._initOptions.path&&(t=u._initOptions.path);"undefined"==typeof e?navigator.serviceWorker.register(t+u.SERVICE_WORKER_PATH,u.SERVICE_WORKER_PARAM).then(u._enableNotifications,u._registerError):e.active?e.active.scriptURL.indexOf(t+u.SERVICE_WORKER_PATH)>-1?u._getDbValue("Ids","WORKER1_ONE_SIGNAL_SW_VERSION").then(function(i){i&&i.id!=u._VERSION?e.unregister().then(function(){navigator.serviceWorker.register(t+u.SERVICE_WORKER_UPDATER_PATH,u.SERVICE_WORKER_PARAM).then(u._enableNotifications,u._registerError)})["catch"](function(e){o["default"].error(e)}):navigator.serviceWorker.register(t+u.SERVICE_WORKER_PATH,u.SERVICE_WORKER_PARAM).then(u._enableNotifications,u._registerError)})["catch"](function(e){o["default"].error(e)}):e.active.scriptURL.indexOf(t+u.SERVICE_WORKER_UPDATER_PATH)>-1&&u._getDbValue("Ids","WORKER1_ONE_SIGNAL_SW_VERSION").then(function(i){i&&i.id!=u._VERSION?e.unregister().then(function(){navigator.serviceWorker.register(t+u.SERVICE_WORKER_PATH,u.SERVICE_WORKER_PARAM).then(u._enableNotifications,u._registerError)}):navigator.serviceWorker.register(t+u.SERVICE_WORKER_UPDATER_PATH,u.SERVICE_WORKER_PARAM).then(u._enableNotifications,u._registerError)})["catch"](function(e){o["default"].error(e)}):null==e.installing&&navigator.serviceWorker.register(t+u.SERVICE_WORKER_PATH,u.SERVICE_WORKER_PARAM).then(u._enableNotifications,u._registerError)})["catch"](function(e){o["default"].error(e)})})["catch"](function(e){o["default"].error(e)})},_addSessionIframe:function H(e){var t=document.createElement("iframe");t.style.display="none";t.src=u._initOneSignalHttp+"Iframe";sessionStorage.getItem("ONE_SIGNAL_SESSION")?t.src+="?session=true&hostPageProtocol="+e:t.src+="?hostPageProtocol="+e;document.body.appendChild(t);o["default"].debug("Adding session iFrame.");u._sessionIframeAdded=true},_registerError:function F(e){o["default"].debug("navigator.serviceWorker.register:ERROR: "+e)},_enableNotifications:function K(e){o["default"].debug("_enableNotifications: ",e);if("PushManager"in window)if("showNotification"in ServiceWorkerRegistration.prototype)"denied"!==Notification.permission?navigator.serviceWorker.ready.then(function(e){o["default"].debug(e);u._subscribeForPush(e)})["catch"](function(e){o["default"].error(e)}):o["default"].warn("The user has disabled notifications.");else{o["default"].debug("Notifications are not supported. showNotification not available in ServiceWorkerRegistration.");sessionStorage.setItem("ONE_SIGNAL_SESSION",true)}else{o["default"].debug("Push messaging is not supported. No PushManager.");sessionStorage.setItem("ONE_SIGNAL_SESSION",true)}},_getNotificationPermission:function G(e){return window.safari?e?window.safari.pushNotification.permission(e).permission:"default":Notification.permission},_triggerEvent:function j(e,t){if("undefined"!=typeof window){var i=new CustomEvent(e,{bubbles:true,cancelable:true,details:t});window.dispatchEvent(i)}else o["default"].debug("Skipping triggering of event:",e,"because we are running in a ServiceWorker context.")},_triggerEvent_customPromptClicked:function B(e){u._triggerEvent("onesignal.prompt.custom.clicked",{result:e})},_triggerEvent_nativePromptPermissionChanged:function q(e,t){void 0===t&&(t=u._getNotificationPermission(u._initOptions.safari_web_id));e!==t&&u._triggerEvent("onesignal.prompt.native.permissionchanged",{from:e,to:t})},_triggerEvent_subscriptionChanged:function z(e){u._triggerEvent("onesignal.subscription.changed",e)},_triggerEvent_dbValueRetrieved:function J(e){u._triggerEvent("onesignal.db.valueretrieved",e)},_triggerEvent_dbValueSet:function Y(e){u._triggerEvent("onesignal.db.valueset",e)},_triggerEvent_internalSubscriptionSet:function Q(e){u._triggerEvent("onesignal.internal.subscriptionset",e)},_subscribeForPush:function X(e){o["default"].debug("_subscribeForPush:","navigator.serviceWorker.ready.then");var t=u._getNotificationPermission(u._initOptions.safari_web_id);e.pushManager.subscribe({userVisibleOnly:true}).then(function(e){sessionStorage.setItem("ONE_SIGNAL_NOTIFICATION_PERMISSION",Notification.permission);u._getDbValue("Ids","appId").then(function i(n){var a=n.id;o["default"].debug("serviceWorkerRegistration.pushManager.subscribe()");var r=null;if(e){r="undefined"!=typeof e.subscriptionId?e.subscriptionId:e.endpoint.replace(new RegExp("^(https://android.googleapis.com/gcm/send/|https://updates.push.services.mozilla.com/push/)"),"");o["default"].debug("registration id is:"+r)}else o["default"].debug("Error could not subscribe your browser for push!");u._registerWithOneSignal(a,r,u._isSupportedFireFox()?8:5);u._usingNativePermissionHook||u._triggerEvent_nativePromptPermissionChanged(t)})["catch"](function(e){o["default"].error(e)})})["catch"](function(e){o["default"].error("Error during subscribe():",e);u._usingNativePermissionHook||u._triggerEvent_nativePromptPermissionChanged(t);20==e.code&&opener&&u._httpRegistration&&window.close()})},sendTag:function Z(e,t){var i={};i[e]=t;u.sendTags(i)},sendTags:function ee(e){u._getDbValue("Ids","userId").then(function t(i){if(i)u._sendToOneSignalApi("players/"+i.id,"PUT",{app_id:u._app_id,tags:e});else if(null==u._tagsToSendOnRegister)u._tagsToSendOnRegister=e;else{var n={};for(var o in u._tagsToSendOnRegister)n[o]=u._tagsToSendOnRegister[o];for(var o in e)n[o]=e[o];u._tagsToSendOnRegister=n}})["catch"](function(e){o["default"].error("sendTags:",e)})},deleteTag:function te(e){u.deleteTags([e])},deleteTags:function ie(e){for(var t={},i=e.length,n=0;i>n;n++)t[e[n]]="";u.sendTags(t)},_handleNotificationOpened:function ne(e){var t=JSON.parse(e.notification.tag);e.notification.close();Promise.all([u._getDbValue("Ids","appId"),u._getDbValue("Ids","userId")]).then(function i(e){var i=e[0],n=e[1];i&&n&&u._sendToOneSignalApi("notifications/"+t.id,"PUT",{app_id:i.id,player_id:n.id,opened:true})})["catch"](function(e){o["default"].error(e)});e.waitUntil(clients.matchAll({type:"window"}).then(function(e){var i=registration.scope;u._defaultLaunchURL&&(i=u._defaultLaunchURL);t.launchURL&&(i=t.launchURL);for(var n=0;n<e.length;n++){var o=e[n];if("focus"in o&&o.url==i){o.focus();o.postMessage(t);return}}u._putDbValue("NotificationOpened",{url:i,data:t});clients.openWindow(i)["catch"](function(e){clients.openWindow(registration.scope+"redirector.html?url="+i)})})["catch"](function(e){o["default"].error(e)}))},_getTitle:function oe(e,t){null==e?Promise.all([u._getDbValue("Options","defaultTitle"),u._getDbValue("Options","pageTitle")]).then(function i(e){var i=e[0],n=e[1];t(i?i.value:n&&null!=n.value?n.value:"")})["catch"](function(e){o["default"].error(e)}):t(e)},_handleGCMMessage:function ae(e,t){if(t.data&&"{"==t.data.text()[0]){o["default"].debug("Received data.text: ",t.data.text());o["default"].debug("Received data.json: ",t.data.json())}t.waitUntil(new Promise(function(t,i){u._getTitle(null,function(i){u._getDbValue("Options","defaultIcon").then(function n(a){u._getLastNotifications(function(n,r){var s={id:n.custom.i,message:n.alert,additionalData:n.custom.a};n.title?s.title=n.title:s.title=i;n.custom.u&&(s.launchURL=n.custom.u);n.icon?s.icon=n.icon:a&&(s.icon=a.value);e.registration.showNotification(s.title,{body:n.alert,icon:s.icon,tag:JSON.stringify(s)}).then(t)["catch"](function(e){o["default"].error(e)});u._getDbValue("Options","defaultUrl").then(function(e){e&&(u._defaultLaunchURL=e.value)})["catch"](function(e){o["default"].error(e)})},t)})["catch"](function(e){o["default"].error(e)})})}))},_getLastNotifications:function re(e,t){u._getDbValue("Ids","userId").then(function i(n){if(n)u._sendToOneSignalApi("players/"+n.id+"/chromeweb_notification","GET",null,function(t){for(var i=0;i<t.length;i++)e(JSON.parse(t[i]))},function(){t()});else{o["default"].debug("Error: could not get notificationId");t()}})["catch"](function(e){o["default"].error(e)})},_listener_receiveMessage:function se(e){o["default"].debug("_listener_receiveMessage: ",e);if(void 0!=u._initOptions&&(""===e.origin||"https://onesignal.com"===e.origin||e.origin==="https://"+u._initOptions.subdomainName+".onesignal.com"))if(e.data.oneSignalInitPageReady){u._getDbValues("Options").then(function n(t){o["default"].debug("current options",t);t.defaultUrl||(t.defaultUrl=document.URL);t.defaultTitle||(t.defaultTitle=document.title);t.parent_url=document.URL;o["default"].debug("Posting message to port[0]",e.ports[0]);e.ports[0].postMessage({initOptions:t})})["catch"](function(e){o["default"].error("_listener_receiveMessage:",e)});var t=e.data.oneSignalInitPageReady;t.isIframe&&(u._iframePort=e.ports[0]);t.userId&&u._putDbValue("Ids",{type:"userId",id:t.userId});t.registrationId&&u._putDbValue("Ids",{type:"registrationId",id:t.registrationId});u._fireNotificationEnabledCallback(t.isPushEnabled);u._sendUnsentTags()}else if(e.data.currentNotificationPermission)u._fireNotificationEnabledCallback(e.data.currentNotificationPermission.isPushEnabled);else if(e.data.idsAvailable){sessionStorage.setItem("ONE_SIGNAL_SESSION",true);u._putDbValue("Ids",{type:"userId",id:e.data.idsAvailable.userId});u._putDbValue("Ids",{type:"registrationId",id:e.data.idsAvailable.registrationId});if(u._idsAvailable_callback.length>0)for(;u._idsAvailable_callback.length>0;){var i=u._idsAvailable_callback.pop();i({userId:e.data.idsAvailable.userId,registrationId:e.data.idsAvailable.registrationId})}u._sendUnsentTags()}else if(e.data.httpsPromptAccepted){u.registerForPushNotifications();u.setSubscription(true);(elem=document.getElementById("OneSignal-iframe-modal")).parentNode.removeChild(elem);u._triggerEvent_customPromptClicked("granted")}else if(e.data.httpsPromptCanceled){(elem=document.getElementById("OneSignal-iframe-modal")).parentNode.removeChild(elem);u._triggerEvent_customPromptClicked("denied")}else e.data.httpPromptAccepted?u._triggerEvent_customPromptClicked("granted"):e.data.httpPromptCanceled?u._triggerEvent_customPromptClicked("denied"):u._notificationOpened_callback&&u._notificationOpened_callback(e.data)},addListenerForNotificationOpened:function ue(e){u._notificationOpened_callback=e;window&&u._getDbValue("NotificationOpened",document.URL).then(function(e){if(e){u._deleteDbValue("NotificationOpened",document.URL);u._notificationOpened_callback(e.data)}})["catch"](function(e){o["default"].error(e)})},_fireNotificationEnabledCallback:function le(e){if(u._isNotificationEnabledCallback){u._isNotificationEnabledCallback(e);u._isNotificationEnabledCallback=null}},getIdsAvailable:function de(e){if(void 0!==e){u._idsAvailable_callback.push(e);Promise.all([u._getDbValue("Ids","userId"),u._getDbValue("Ids","registrationId")]).then(function t(e){var t=e[0],i=e[1];if(t)if(i)for(;u._idsAvailable_callback.length>0;){var n=u._idsAvailable_callback.pop();n({userId:t.id,registrationId:i.id})}else for(;u._idsAvailable_callback.length>0;){var n=u._idsAvailable_callback.pop();n({userId:t.id,registrationId:null})}})["catch"](function(e){o["default"].error(e)})}},getTags:function ce(e){u._getDbValue("Ids","userId").then(function(t){t&&u._sendToOneSignalApi("players/"+t.id,"GET",null,function(t){e(t.tags)})})["catch"](function(e){o["default"].error(e)})},isPushNotificationsEnabled:function fe(e){if(u.isPushNotificationsSupported())if(!u._initOptions.subdomainName||u._isBrowserSafari())Promise.all([u._getDbValue("Ids","registrationId"),u._getDbValue("Options","subscription")]).then(function(t){var i=t[0],n=t[1];if(i){if(n&&!n.value)return e(false);e("granted"==Notification.permission)}else e(false)})["catch"](function(e){o["default"].error(e)});else{u._isNotificationEnabledCallback=e;u._iframePort&&u._iframePort.postMessage({getNotificationPermission:true})}else o["default"].warn("Your browser does not support push notifications.")},_isSupportedSafari:function ge(){var e=navigator.appVersion.match("Version/([0-9]?).* Safari");return null==e?false:/iPhone|iPad|iPod/i.test(navigator.userAgent)?false:parseInt(e[1])>6},_isBrowserSafari:function pe(){var e=navigator.appVersion.match("Version/([0-9]?).* Safari");return null!=e},_isSupportedFireFox:function _e(){var e=navigator.userAgent.match(/(Firefox\/)([0-9]{2,}\.[0-9]{1,})/);return e?parseInt(e[2].substring(0,2))>43:false},_isBrowserFirefox:function he(){var e=navigator.userAgent.match(/(Firefox\/)([0-9]{2,}\.[0-9]{1,})/);return null!=e},_getFirefoxVersion:function be(){var e=navigator.userAgent.match(/(Firefox\/)([0-9]{2,}\.[0-9]{1,})/);return e?parseInt(e[2].substring(0,2)):-1},isPushNotificationsSupported:function ve(){var e=navigator.appVersion.match(/Chrome\/(.*?) /);return u._isSupportedFireFox()?true:u._isSupportedSafari()?true:e?navigator.appVersion.match(/Edge/)?false:navigator.appVersion.match(/ wv/)?false:navigator.appVersion.match(/OPR\//)?false:/iPad|iPhone|iPod/.test(navigator.platform)?false:parseInt(e[1].substring(0,2))>41:false},_getNotificationTypes:function me(e){u._getSubscription(function(t){e(t?1:-2)})},setSubscription:function Se(e){u._iframePort?u._iframePort.postMessage({setSubdomainState:{setSubscription:e}}):u._getSubscription(function(t){if(t!=e){u._putDbValue("Options",{key:"subscription",value:e});u._getDbValue("Ids","userId").then(function(t){t&&u._sendToOneSignalApi("players/"+t.id,"PUT",{app_id:u._app_id,notification_types:e?1:-2},function i(){u._triggerEvent_internalSubscriptionSet(e)})})["catch"](function(e){o["default"].error(e)})}})},_getSubscription:function Ie(e){u._getDbValue("Options","subscription").then(function(t){e(!(t&&false==t.value))})["catch"](function(e){o["default"].error(e)})},_safePostMessage:function Oe(e,t,i,n){var o=i.toLowerCase();if(o.startsWith("http://")){var a={};location.search.substr(1).split("&").forEach(function(e){a[e.split("=")[0]]=e.split("=")[1]});var r=/^http(s|):\/\/(www\.|)/;o=o.replace(r,a.hostPageProtocol)}n?e.postMessage(t,o,n):e.postMessage(t,o)},_process_pushes:function Ee(e){for(var t=0;t<e.length;t++)u.push(e[t])},push:function we(e){if("function"==typeof e)e();else{var t=e.shift();u[t].apply(null,e)}}};if("undefined"!=typeof window)window.addEventListener("message",u._listener_receiveMessage,false);else{importScripts("https://cdn.onesignal.com/sdks/serviceworker-cache-polyfill.js");self.addEventListener("push",function(e){u._handleGCMMessage(self,e)});self.addEventListener("notificationclick",function(e){u._handleNotificationOpened(e)});var l=null!=location.href.match(/https\:\/\/.*\.onesignal.com\/sdks\//);self.addEventListener("install",function(e){o["default"].debug("OneSignal Installed service worker: "+u._VERSION);self.location.pathname.indexOf("OneSignalSDKWorker.js")>-1?u._putDbValue("Ids",{type:"WORKER1_ONE_SIGNAL_SW_VERSION",id:u._VERSION}):u._putDbValue("Ids",{type:"WORKER2_ONE_SIGNAL_SW_VERSION",id:u._VERSION});l&&e.waitUntil(caches.open("OneSignal_"+u._VERSION).then(function(e){
return e.addAll(["/sdks/initOneSignalHttpIframe","/sdks/initOneSignalHttpIframe?session=*","/sdks/manifest_json"])})["catch"](function(e){o["default"].error(e)}))});l&&self.addEventListener("fetch",function(e){e.respondWith(caches.match(e.request).then(function(t){return t?t:fetch(e.request)})["catch"](function(e){o["default"].error(e)}))})}s&&u._process_pushes(s);e.exports=u},function(e,exports,t){var i,n;!function(o,a){"use strict";"object"==typeof e&&e.exports&&true?e.exports=a():!(i=a,n="function"==typeof i?i.call(exports,t,exports,e):i,void 0!==n&&(e.exports=n))}(this,function(){"use strict";function e(e){return typeof console===s?false:void 0!==console[e]?t(console,e):void 0!==console.log?t(console,"log"):r}function t(e,t){var i=e[t];if("function"==typeof i.bind)return i.bind(e);try{return Function.prototype.bind.call(i,e)}catch(n){return function(){return Function.prototype.apply.apply(i,[e,arguments])}}}function i(e,t,i){return function(){if(typeof console!==s){n.call(this,t,i);this[e].apply(this,arguments)}}}function n(e,t){for(var i=0;i<u.length;i++){var n=u[i];this[n]=e>i?r:this.methodFactory(n,e,t)}}function o(t,n,o){return e(t)||i.apply(this,arguments)}function a(e,t,i){function a(e){var t=(u[e]||"silent").toUpperCase();try{window.localStorage[c]=t;return}catch(i){}try{window.document.cookie=encodeURIComponent(c)+"="+t+";"}catch(i){}}function r(){var e;try{e=window.localStorage[c]}catch(t){}if(typeof e===s)try{var i=window.document.cookie,n=i.indexOf(encodeURIComponent(c)+"=");n&&(e=/^([^;]+)/.exec(i.slice(n))[1])}catch(t){}void 0===l.levels[e]&&(e=void 0);return e}var l=this,d,c="loglevel";e&&(c+=":"+e);l.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5};l.methodFactory=i||o;l.getLevel=function(){return d};l.setLevel=function(t,i){"string"==typeof t&&void 0!==l.levels[t.toUpperCase()]&&(t=l.levels[t.toUpperCase()]);if(!("number"==typeof t&&t>=0&&t<=l.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;d=t;false!==i&&a(t);n.call(l,t,e);return typeof console===s&&t<l.levels.SILENT?"No console available for logging":void 0};l.setDefaultLevel=function(e){r()||l.setLevel(e,false)};l.enableAll=function(e){l.setLevel(l.levels.TRACE,e)};l.disableAll=function(e){l.setLevel(l.levels.SILENT,e)};var f=r();null==f&&(f=null==t?"WARN":t);l.setLevel(f,false)}var r=function(){},s="undefined",u=["trace","debug","info","warn","error"],l=new a,d={};l.getLogger=function f(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=d[e];t||(t=d[e]=new a(e,l.getLevel(),l.methodFactory));return t};var c=typeof window!==s?window.log:void 0;l.noConflict=function(){typeof window!==s&&window.log===l&&(window.log=c);return l};return l})},function(e,exports){"use strict";function t(){}Object.defineProperty(exports,"__esModule",{value:true});t.store={};t.LIMIT=2;t.put=function(e,i){void 0===t.store[e]&&(t.store[e]=[null,null]);t.store[e].push(i);t.store[e].length==t.LIMIT+1&&t.store[e].shift();return t.store[e]};t.get=function(e){return t.store[e]};exports["default"]=t},function(e,exports){"use strict";"undefined"!=typeof window&&!function(){function e(e,t){t=t||{bubbles:false,cancelable:false,details:void 0};var i=document.createEvent("CustomEvent");i.initCustomEvent(e,t.bubbles,t.cancelable,t.details);return i}e.prototype=window.Event.prototype;window.CustomEvent=e}()},function(e,exports,t){(function(i){e.exports=i.OneSignal=t(1)}).call(exports,function(){return this}())}]);