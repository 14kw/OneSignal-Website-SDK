!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports}var installedModules={};__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0)}(function(modules){for(var i in modules)if(Object.prototype.hasOwnProperty.call(modules,i))switch(typeof modules[i]){case"function":break;case"object":modules[i]=function(_m){var args=_m.slice(1),fn=modules[_m[0]];return function(a,b,c){fn.apply(this,[a,b,c].concat(args))}}(modules[i]);break;default:modules[i]=modules[modules[i]]}return modules}([function(module,exports,__webpack_require__){"use strict";__webpack_require__(9)},,,function(module,exports){(function(global){(function(){!function(){"use strict";function normalizeName(name){if("string"!=typeof name)name=String(name);if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(name))throw new TypeError("Invalid character in header field name");return name.toLowerCase()}function normalizeValue(value){if("string"!=typeof value)value=String(value);return value}function Headers(headers){this.map={};if(headers instanceof Headers)headers.forEach(function(value,name){this.append(name,value)},this);else if(headers)Object.getOwnPropertyNames(headers).forEach(function(name){this.append(name,headers[name])},this)}function consumed(body){if(body.bodyUsed)return Promise.reject(new TypeError("Already read"));body.bodyUsed=true}function fileReaderReady(reader){return new Promise(function(resolve,reject){reader.onload=function(){resolve(reader.result)};reader.onerror=function(){reject(reader.error)}})}function readBlobAsArrayBuffer(blob){var reader=new FileReader;reader.readAsArrayBuffer(blob);return fileReaderReady(reader)}function readBlobAsText(blob){var reader=new FileReader;reader.readAsText(blob);return fileReaderReady(reader)}function Body(){this.bodyUsed=false;this._initBody=function(body){this._bodyInit=body;if("string"==typeof body)this._bodyText=body;else if(support.blob&&Blob.prototype.isPrototypeOf(body))this._bodyBlob=body;else if(support.formData&&FormData.prototype.isPrototypeOf(body))this._bodyFormData=body;else if(!body)this._bodyText="";else if(support.arrayBuffer&&ArrayBuffer.prototype.isPrototypeOf(body));else throw new Error("unsupported BodyInit type")};if(support.blob){this.blob=function(){var rejected=consumed(this);if(rejected)return rejected;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);else if(this._bodyFormData)throw new Error("could not read FormData body as blob");else return Promise.resolve(new Blob([this._bodyText]))};this.arrayBuffer=function(){return this.blob().then(readBlobAsArrayBuffer)};this.text=function(){var rejected=consumed(this);if(rejected)return rejected;if(this._bodyBlob)return readBlobAsText(this._bodyBlob);else if(this._bodyFormData)throw new Error("could not read FormData body as text");else return Promise.resolve(this._bodyText)}}else this.text=function(){var rejected=consumed(this);return rejected?rejected:Promise.resolve(this._bodyText)};if(support.formData)this.formData=function(){return this.text().then(decode)};this.json=function(){return this.text().then(JSON.parse)};return this}function normalizeMethod(method){var upcased=method.toUpperCase();return methods.indexOf(upcased)>-1?upcased:method}function Request(input,options){options=options||{};var body=options.body;if(Request.prototype.isPrototypeOf(input)){if(input.bodyUsed)throw new TypeError("Already read");this.url=input.url;this.credentials=input.credentials;if(!options.headers)this.headers=new Headers(input.headers);this.method=input.method;this.mode=input.mode;if(!body){body=input._bodyInit;input.bodyUsed=true}}else this.url=input;this.credentials=options.credentials||this.credentials||"omit";if(options.headers||!this.headers)this.headers=new Headers(options.headers);this.method=normalizeMethod(options.method||this.method||"GET");this.mode=options.mode||this.mode||null;this.referrer=null;if(("GET"===this.method||"HEAD"===this.method)&&body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(body)}function decode(body){var form=new FormData;body.trim().split("&").forEach(function(bytes){if(bytes){var split=bytes.split("=");var name=split.shift().replace(/\+/g," ");var value=split.join("=").replace(/\+/g," ");form.append(decodeURIComponent(name),decodeURIComponent(value))}});return form}function headers(xhr){var head=new Headers;var pairs=xhr.getAllResponseHeaders().trim().split("\n");pairs.forEach(function(header){var split=header.trim().split(":");var key=split.shift().trim();var value=split.join(":").trim();head.append(key,value)});return head}function Response(bodyInit,options){if(!options)options={};this._initBody(bodyInit);this.type="default";this.status=options.status;this.ok=this.status>=200&&this.status<300;this.statusText=options.statusText;this.headers=options.headers instanceof Headers?options.headers:new Headers(options.headers);this.url=options.url||""}if(self.fetch)return;Headers.prototype.append=function(name,value){name=normalizeName(name);value=normalizeValue(value);var list=this.map[name];if(!list){list=[];this.map[name]=list}list.push(value)};Headers.prototype["delete"]=function(name){delete this.map[normalizeName(name)]};Headers.prototype.get=function(name){var values=this.map[normalizeName(name)];return values?values[0]:null};Headers.prototype.getAll=function(name){return this.map[normalizeName(name)]||[]};Headers.prototype.has=function(name){return this.map.hasOwnProperty(normalizeName(name))};Headers.prototype.set=function(name,value){this.map[normalizeName(name)]=[normalizeValue(value)]};Headers.prototype.forEach=function(callback,thisArg){Object.getOwnPropertyNames(this.map).forEach(function(name){this.map[name].forEach(function(value){callback.call(thisArg,value,name,this)},this)},this)};var support={blob:"FileReader"in self&&"Blob"in self&&function(){try{new Blob;return true}catch(e){return false}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};var methods=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];Request.prototype.clone=function(){return new Request(this)};Body.call(Request.prototype);Body.call(Response.prototype);Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})};Response.error=function(){var response=new Response(null,{status:0,statusText:""});response.type="error";return response};var redirectStatuses=[301,302,303,307,308];Response.redirect=function(url,status){if(-1===redirectStatuses.indexOf(status))throw new RangeError("Invalid status code");return new Response(null,{status:status,headers:{location:url}})};self.Headers=Headers;self.Request=Request;self.Response=Response;self.fetch=function(input,init){return new Promise(function(resolve,reject){function responseURL(){if("responseURL"in xhr)return xhr.responseURL;if(/^X-Request-URL:/m.test(xhr.getAllResponseHeaders()))return xhr.getResponseHeader("X-Request-URL");return}var request;if(Request.prototype.isPrototypeOf(input)&&!init)request=input;else request=new Request(input,init);var xhr=new XMLHttpRequest;xhr.onload=function(){var status=1223===xhr.status?204:xhr.status;if(100>status||status>599){reject(new TypeError("Network request failed"));return}var options={status:status,statusText:xhr.statusText,headers:headers(xhr),url:responseURL()};var body="response"in xhr?xhr.response:xhr.responseText;resolve(new Response(body,options))};xhr.onerror=function(){reject(new TypeError("Network request failed"))};xhr.open(request.method,request.url,true);if("include"===request.credentials)xhr.withCredentials=true;if("responseType"in xhr&&support.blob)xhr.responseType="blob";request.headers.forEach(function(value,name){xhr.setRequestHeader(name,value)});xhr.send("undefined"==typeof request._bodyInit?null:request._bodyInit)})};self.fetch.polyfill=true}();module.exports=global.fetch}).call(global)}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.API_URL=exports.HOST_URL=exports.PROD_HOST=exports.DEV_HOST=void 0;var _utils=__webpack_require__(5);var DEV_HOST=exports.DEV_HOST="https://192.168.1.206:3000";var PROD_HOST=exports.PROD_HOST="https://onesignal.com";var HOST_URL=exports.HOST_URL=(0,_utils.isDev)()?DEV_HOST:PROD_HOST;var API_URL=exports.API_URL=((0,_utils.isDev)()?DEV_HOST:PROD_HOST)+"/api/v1/"},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _typeof(obj){return obj&&"undefined"!=typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj}function isArray(variable){return"[object Array]"===Object.prototype.toString.call(variable)}function getHumanizedTimeDuration(timeDurationInMilliseconds){function addPluralSuffix(number){return number>1?"s":""}var duration=Math.floor(timeDurationInMilliseconds/1e3);var years=Math.floor(duration/31536e3);if(years)return years+" year"+addPluralSuffix(years);var days=Math.floor((duration%=31536e3)/86400);if(days)return days+" day"+addPluralSuffix(days);var hours=Math.floor((duration%=86400)/3600);if(hours)return hours+" hour"+addPluralSuffix(hours);var minutes=Math.floor((duration%=3600)/60);if(minutes)return minutes+" minute"+addPluralSuffix(minutes);var seconds=duration%60;if(seconds)return seconds+" second"+addPluralSuffix(seconds);return"just now"}function isDev(){return true}function isPushNotificationsSupported(){var chromeVersion=navigator.appVersion.match(/Chrome\/(.*?) /);if(isSupportedFireFox())return true;if(isSupportedSafari())return true;if(!chromeVersion)return false;if(navigator.appVersion.match(/Edge/))return false;if(navigator.appVersion.match(/ wv/))return false;if(navigator.appVersion.match(/OPR\//))return false;if(/iPad|iPhone|iPod/.test(navigator.platform))return false;return parseInt(chromeVersion[1].substring(0,2))>41}function isBrowserSafari(){var safariVersion=navigator.appVersion.match("Version/([0-9]?).* Safari");return null!=safariVersion}function isSupportedFireFox(){var fireFoxVersion=navigator.userAgent.match(/(Firefox\/)([0-9]{2,}\.[0-9]{1,})/);if(fireFoxVersion)return parseInt(fireFoxVersion[2].substring(0,2))>43;return false}function isBrowserFirefox(){var fireFoxVersion=navigator.userAgent.match(/(Firefox\/)([0-9]{2,}\.[0-9]{1,})/);return null!=fireFoxVersion}function getFirefoxVersion(){var fireFoxVersion=navigator.userAgent.match(/(Firefox\/)([0-9]{2,}\.[0-9]{1,})/);if(fireFoxVersion)return parseInt(fireFoxVersion[2].substring(0,2));else return-1}function isSupportedSafari(){var safariVersion=navigator.appVersion.match("Version/([0-9]?).* Safari");if(null==safariVersion)return false;if(/iPhone|iPad|iPod/i.test(navigator.userAgent))return false;return parseInt(safariVersion[1])>6}function removeDomElement(selector){var els=document.querySelectorAll(selector);if(els.length>0)for(var i=0;i<els.length;i++)els[i].parentNode.removeChild(els[i])}function addDomElement(targetSelectorOrElement,addOrder,elementHtml){if("string"==typeof targetSelectorOrElement)document.querySelector(targetSelectorOrElement).insertAdjacentHTML(addOrder,elementHtml);else if("object"===("undefined"==typeof targetSelectorOrElement?"undefined":_typeof(targetSelectorOrElement)))targetSelectorOrElement.insertAdjacentHTML(addOrder,elementHtml);else throw new Error(targetSelectorOrElement+" must be a CSS selector string or DOM Element object.")}function clearDomElementChildren(targetSelectorOrElement){if("string"==typeof targetSelectorOrElement){var element=document.querySelector(targetSelectorOrElement);for(;element.firstChild;)element.removeChild(element.firstChild)}else if("object"===("undefined"==typeof targetSelectorOrElement?"undefined":_typeof(targetSelectorOrElement)))for(;targetSelectorOrElement.firstChild;)targetSelectorOrElement.removeChild(targetSelectorOrElement.firstChild);else throw new Error(targetSelectorOrElement+" must be a CSS selector string or DOM Element object.")}function addCssClass(targetSelectorOrElement,cssClass){if("string"==typeof targetSelectorOrElement)document.querySelector(targetSelectorOrElement).classList.add(cssClass);else if("object"===("undefined"==typeof targetSelectorOrElement?"undefined":_typeof(targetSelectorOrElement)))targetSelectorOrElement.classList.add(cssClass);else throw new Error(targetSelectorOrElement+" must be a CSS selector string or DOM Element object.")}function removeCssClass(targetSelectorOrElement,cssClass){if("string"==typeof targetSelectorOrElement)document.querySelector(targetSelectorOrElement).classList.remove(cssClass);else if("object"===("undefined"==typeof targetSelectorOrElement?"undefined":_typeof(targetSelectorOrElement)))targetSelectorOrElement.classList.remove(cssClass);else throw new Error(targetSelectorOrElement+" must be a CSS selector string or DOM Element object.")}function hasCssClass(targetSelectorOrElement,cssClass){if("string"==typeof targetSelectorOrElement)return document.querySelector(targetSelectorOrElement).classList.contains(cssClass);else if("object"===("undefined"==typeof targetSelectorOrElement?"undefined":_typeof(targetSelectorOrElement)))return targetSelectorOrElement.classList.contains(cssClass);else throw new Error(targetSelectorOrElement+" must be a CSS selector string or DOM Element object.")}function on(targetSelectorOrElement,event,task){if(!event)_loglevel2["default"].error("Cannot call on() with no event: ",event);if(!task)_loglevel2["default"].error("Cannot call on() with no task: ",task);_loglevel2["default"].debug("Debug me here.");if("string"==typeof targetSelectorOrElement){var els=document.querySelectorAll(selector);if(els.length>0)for(var i=0;i<els.length;i++)on(els[i],task)}else if(isArray(targetSelectorOrElement))for(var i=0;i<targetSelectorOrElement.length;i++)on(targetSelectorOrElement[i],task);else if("object"===("undefined"==typeof targetSelectorOrElement?"undefined":_typeof(targetSelectorOrElement)))targetSelectorOrElement.addEventListener(event,task);else throw new Error(targetSelectorOrElement+" must be a CSS selector string or DOM Element object.")}function once(targetSelectorOrElement,event,task){var manualDestroy=arguments.length<=3||void 0===arguments[3]?false:arguments[3];if(!event)_loglevel2["default"].error("Cannot call on() with no event: ",event);if(!task)_loglevel2["default"].error("Cannot call on() with no task: ",task);if("string"==typeof targetSelectorOrElement){var els=document.querySelectorAll(selector);if(els.length>0)for(var i=0;i<els.length;i++)once(els[i],task)}else if(isArray(targetSelectorOrElement))for(var i=0;i<targetSelectorOrElement.length;i++)once(targetSelectorOrElement[i],task);else if("object"===("undefined"==typeof targetSelectorOrElement?"undefined":_typeof(targetSelectorOrElement))){var taskWrapper=function(){var internalTaskFunction=function internalTaskFunction(e){var destroyEventListener=function destroyEventListener(){targetSelectorOrElement.removeEventListener(e.type,taskWrapper)};if(!manualDestroy)destroyEventListener();task(e,destroyEventListener)};return internalTaskFunction}();targetSelectorOrElement.addEventListener(event,taskWrapper)}else throw new Error(targetSelectorOrElement+" must be a CSS selector string or DOM Element object.")}function off(targetSelectorOrElement,event,task){if("string"==typeof targetSelectorOrElement){var els=document.querySelectorAll(selector);if(els.length>0)for(var i=0;i<els.length;i++)off(els[i],task)}else if(isArray(targetSelectorOrElement))for(var i=0;i<targetSelectorOrElement.length;i++)off(targetSelectorOrElement[i],task);else if("object"===("undefined"==typeof targetSelectorOrElement?"undefined":_typeof(targetSelectorOrElement)))if(task)targetSelectorOrElement.removeEventListener(event,task);else targetSelectorOrElement.removeEventListener(event);else throw new Error(targetSelectorOrElement+" must be a CSS selector string or DOM Element object.")}function getConsoleStyle(style){if("code"==style)return'\n    padding: 0 5px 2px;\n    border: 1px solid #ddd;\n    -webkit-border-radius: 3px;\n    -moz-border-radius: 3px;\n    border-radius: 3px;\n    background-clip: padding-box;\n    font-family: Monaco,"DejaVu Sans Mono","Courier New",monospace;\n    color: #666;\n    ';else if("bold"==style)return"\n      font-weight: 600;\n    color: rgb(51, 51, 51);\n    ";else if("alert"==style)return"\n      font-weight: 600;\n    color: red;\n    ";else if("event"==style)return"\n    color: green;\n    ";else if("postmessage"==style)return"\n    color: orange;\n    "}function delay(durationMs){return new Promise(function(resolve){setTimeout(resolve,durationMs)})}function nothing(){return Promise.resolve()}function when(condition,promiseIfTrue,promiseIfFalse){if(void 0===promiseIfTrue)promiseIfTrue=nothing();if(void 0===promiseIfFalse)promiseIfFalse=nothing();return condition?promiseIfTrue:promiseIfFalse}Object.defineProperty(exports,"__esModule",{value:true});exports.isArray=isArray;exports.getHumanizedTimeDuration=getHumanizedTimeDuration;exports.isDev=isDev;exports.isPushNotificationsSupported=isPushNotificationsSupported;exports.isBrowserSafari=isBrowserSafari;exports.isSupportedFireFox=isSupportedFireFox;exports.isBrowserFirefox=isBrowserFirefox;exports.getFirefoxVersion=getFirefoxVersion;exports.isSupportedSafari=isSupportedSafari;exports.removeDomElement=removeDomElement;exports.addDomElement=addDomElement;exports.clearDomElementChildren=clearDomElementChildren;exports.addCssClass=addCssClass;exports.removeCssClass=removeCssClass;exports.hasCssClass=hasCssClass;exports.on=on;exports.once=once;exports.off=off;exports.getConsoleStyle=getConsoleStyle;exports.delay=delay;exports.nothing=nothing;exports.when=when;var _loglevel=__webpack_require__(7);var _loglevel2=_interopRequireDefault(_loglevel)},function(module,exports,__webpack_require__){(function(fetch){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function apiCall(action,method,data){var headers=new Headers;headers.append("Content-Type","application/json;charset=UTF-8");var contents={method:method||"NO_METHOD_SPECIFIED",headers:headers,cache:"no-cache"};if(data)contents.body=JSON.stringify(data);return new Promise(function(resolve,reject){fetch(_vars.API_URL+action,contents).then(function status(response){if(response.status>=200&&response.status<300)return response.json();else reject(new Error(response.statusText))}).then(function(jsonResponse){resolve(jsonResponse)})["catch"](function(e){reject(e)})})}function sendNotification(appId,playerIds,titles,contents){var params={app_id:appId,headings:titles,contents:contents,include_player_ids:playerIds,isAnyWeb:true,url:"javascript:void(0);"};return apiCall("notifications","POST",params)}Object.defineProperty(exports,"__esModule",{value:true});exports.apiCall=apiCall;exports.sendNotification=sendNotification;var _vars=__webpack_require__(4);var _loglevel=__webpack_require__(7);var _loglevel2=_interopRequireDefault(_loglevel)}).call(exports,__webpack_require__(3))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(root,definition){"use strict";if("object"==typeof module&&module.exports&&true)module.exports=definition();else if(true)!(__WEBPACK_AMD_DEFINE_FACTORY__=definition,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__,void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));else root.log=definition()}(this,function(){"use strict";function realMethod(methodName){if(typeof console===undefinedType)return false;else if(void 0!==console[methodName])return bindMethod(console,methodName);else if(void 0!==console.log)return bindMethod(console,"log");else return noop}function bindMethod(obj,methodName){var method=obj[methodName];if("function"==typeof method.bind)return method.bind(obj);else try{return Function.prototype.bind.call(method,obj)}catch(e){return function(){return Function.prototype.apply.apply(method,[obj,arguments])}}}function enableLoggingWhenConsoleArrives(methodName,level,loggerName){return function(){if(typeof console!==undefinedType){replaceLoggingMethods.call(this,level,loggerName);this[methodName].apply(this,arguments)}}}function replaceLoggingMethods(level,loggerName){for(var i=0;i<logMethods.length;i++){var methodName=logMethods[i];this[methodName]=level>i?noop:this.methodFactory(methodName,level,loggerName)}}function defaultMethodFactory(methodName,level,loggerName){return realMethod(methodName)||enableLoggingWhenConsoleArrives.apply(this,arguments)}function Logger(name,defaultLevel,factory){function persistLevelIfPossible(levelNum){var levelName=(logMethods[levelNum]||"silent").toUpperCase();try{window.localStorage[storageKey]=levelName;return}catch(ignore){}try{window.document.cookie=encodeURIComponent(storageKey)+"="+levelName+";"}catch(ignore){}}function getPersistedLevel(){var storedLevel;try{storedLevel=window.localStorage[storageKey]}catch(ignore){}if(typeof storedLevel===undefinedType)try{var cookie=window.document.cookie;var location=cookie.indexOf(encodeURIComponent(storageKey)+"=");if(location)storedLevel=/^([^;]+)/.exec(cookie.slice(location))[1]}catch(ignore){}if(void 0===self.levels[storedLevel])storedLevel=void 0;return storedLevel}var self=this;var currentLevel;var storageKey="loglevel";if(name)storageKey+=":"+name;self.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5};self.methodFactory=factory||defaultMethodFactory;self.getLevel=function(){return currentLevel};self.setLevel=function(level,persist){if("string"==typeof level&&void 0!==self.levels[level.toUpperCase()])level=self.levels[level.toUpperCase()];if("number"==typeof level&&level>=0&&level<=self.levels.SILENT){currentLevel=level;if(false!==persist)persistLevelIfPossible(level);replaceLoggingMethods.call(self,level,name);if(typeof console===undefinedType&&level<self.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+level};self.setDefaultLevel=function(level){if(!getPersistedLevel())self.setLevel(level,false)};self.enableAll=function(persist){self.setLevel(self.levels.TRACE,persist)};self.disableAll=function(persist){self.setLevel(self.levels.SILENT,persist)};var initialLevel=getPersistedLevel();if(null==initialLevel)initialLevel=null==defaultLevel?"WARN":defaultLevel;self.setLevel(initialLevel,false)}var noop=function(){};var undefinedType="undefined";var logMethods=["trace","debug","info","warn","error"];var defaultLogger=new Logger;var _loggersByName={};defaultLogger.getLogger=function getLogger(name){if("string"!=typeof name||""===name)throw new TypeError("You must supply a name when creating a logger.");var logger=_loggersByName[name];if(!logger)logger=_loggersByName[name]=new Logger(name,defaultLogger.getLevel(),defaultLogger.methodFactory);return logger};var _log=typeof window!==undefinedType?window.log:void 0;defaultLogger.noConflict=function(){if(typeof window!==undefinedType&&window.log===defaultLogger)window.log=_log;return defaultLogger};return defaultLogger})},,function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _chai=__webpack_require__(10);var _chai2=_interopRequireDefault(_chai);var _api=__webpack_require__(6);var _vars=__webpack_require__(50);describe("api.js",function(){it("should fail an invalid create notification",function(){return(0,_api.apiCall)("notifications","POST",null).should.eventually.be.rejectedWith("Error: Bad Request")});it("should send a valid create notification",function(){var params={app_id:_vars.APP_ID,contents:{en:"Web SDK unit test."},include_player_ids:[_vars.PLAYER_ID]};return(0,_api.apiCall)("notifications","POST",params).should.eventually.be.fulfilled})})},function(module,exports,__webpack_require__){module.exports=__webpack_require__(11)},function(module,exports,__webpack_require__){var used=[],exports=module.exports={};exports.version="3.4.1";exports.AssertionError=__webpack_require__(12);var util=__webpack_require__(13);exports.use=function(fn){if(!~used.indexOf(fn)){fn(this,util);used.push(fn)}return this};exports.util=util;var config=__webpack_require__(26);exports.config=config;var assertion=__webpack_require__(45);exports.use(assertion);var core=__webpack_require__(46);exports.use(core);var expect=__webpack_require__(47);exports.use(expect);var should=__webpack_require__(48);exports.use(should);var assert=__webpack_require__(49);exports.use(assert)},function(module,exports){function exclude(){function excludeProps(res,obj){Object.keys(obj).forEach(function(key){if(!~excludes.indexOf(key))res[key]=obj[key]})}var excludes=[].slice.call(arguments);return function extendExclude(){var args=[].slice.call(arguments),i=0,res={};for(;i<args.length;i++)excludeProps(res,args[i]);return res}}function AssertionError(message,_props,ssf){var extend=exclude("name","message","stack","constructor","toJSON"),props=extend(_props||{});this.message=message||"Unspecified AssertionError";this.showDiff=false;for(var key in props)this[key]=props[key];ssf=ssf||arguments.callee;if(ssf&&Error.captureStackTrace)Error.captureStackTrace(this,ssf);else this.stack=(new Error).stack}module.exports=AssertionError;AssertionError.prototype=Object.create(Error.prototype);AssertionError.prototype.name="AssertionError";AssertionError.prototype.constructor=AssertionError;AssertionError.prototype.toJSON=function(stack){var extend=exclude("constructor","toJSON","stack"),props=extend({name:this.name},this);if(false!==stack&&this.stack)props.stack=this.stack;return props}},function(module,exports,__webpack_require__){var exports=module.exports={};exports.test=__webpack_require__(14);exports.type=__webpack_require__(16);exports.expectTypes=__webpack_require__(18);exports.getMessage=__webpack_require__(19);exports.getActual=__webpack_require__(20);exports.inspect=__webpack_require__(21);exports.objDisplay=__webpack_require__(25);exports.flag=__webpack_require__(15);exports.transferFlags=__webpack_require__(27);exports.eql=__webpack_require__(28);exports.getPathValue=__webpack_require__(36);exports.getPathInfo=__webpack_require__(37);exports.hasProperty=__webpack_require__(38);exports.getName=__webpack_require__(22);exports.addProperty=__webpack_require__(39);exports.addMethod=__webpack_require__(40);exports.overwriteProperty=__webpack_require__(41);exports.overwriteMethod=__webpack_require__(42);exports.addChainableMethod=__webpack_require__(43);exports.overwriteChainableMethod=__webpack_require__(44)},function(module,exports,__webpack_require__){var flag=__webpack_require__(15);module.exports=function(obj,args){var negate=flag(obj,"negate"),expr=args[0];return negate?!expr:expr}},function(module,exports){module.exports=function(obj,key,value){var flags=obj.__flags||(obj.__flags=Object.create(null));if(3===arguments.length)flags[key]=value;else return flags[key]}},[51,17],function(module,exports){function getType(obj){var type=Object.prototype.toString.call(obj).match(objectTypeRegexp)[1].toLowerCase();if("function"==typeof Promise&&obj instanceof Promise)return"promise";if(null===obj)return"null";if(void 0===obj)return"undefined";return type}function Library(){if(!(this instanceof Library))return new Library;this.tests={}}var exports=module.exports=getType;var objectTypeRegexp=/^\[object (.*)\]$/;exports.Library=Library;Library.prototype.of=getType;Library.prototype.define=function(type,test){if(1===arguments.length)return this.tests[type];this.tests[type]=test;return this};Library.prototype.test=function(obj,type){if(type===getType(obj))return true;var test=this.tests[type];if(test&&"regexp"===getType(test))return test.test(obj);else if(test&&"function"===getType(test))return test(obj);else throw new ReferenceError('Type test "'+type+'" not defined or invalid.')}},function(module,exports,__webpack_require__){var AssertionError=__webpack_require__(12);var flag=__webpack_require__(15);var type=__webpack_require__(16);module.exports=function(obj,types){var obj=flag(obj,"object");types=types.map(function(t){return t.toLowerCase()});types.sort();var str=types.map(function(t,index){var art=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an":"a";var or=types.length>1&&index===types.length-1?"or ":"";return or+art+" "+t}).join(", ");if(!types.some(function(expected){return type(obj)===expected}))throw new AssertionError("object tested must be "+str+", but "+type(obj)+" given")}},function(module,exports,__webpack_require__){var flag=__webpack_require__(15),getActual=__webpack_require__(20),inspect=__webpack_require__(21),objDisplay=__webpack_require__(25);module.exports=function(obj,args){var negate=flag(obj,"negate"),val=flag(obj,"object"),expected=args[3],actual=getActual(obj,args),msg=negate?args[2]:args[1],flagMsg=flag(obj,"message");if("function"==typeof msg)msg=msg();msg=msg||"";msg=msg.replace(/#{this}/g,objDisplay(val)).replace(/#{act}/g,objDisplay(actual)).replace(/#{exp}/g,objDisplay(expected));return flagMsg?flagMsg+": "+msg:msg}},function(module,exports){module.exports=function(obj,args){return args.length>4?args[4]:obj._obj}},function(module,exports,__webpack_require__){function inspect(obj,showHidden,depth,colors){var ctx={showHidden:showHidden,seen:[],stylize:function(str){return str}};return formatValue(ctx,obj,"undefined"==typeof depth?2:depth)}function formatValue(ctx,value,recurseTimes){if(value&&"function"==typeof value.inspect&&value.inspect!==exports.inspect&&!(value.constructor&&value.constructor.prototype===value)){var ret=value.inspect(recurseTimes);if("string"!=typeof ret)ret=formatValue(ctx,ret,recurseTimes);return ret}var primitive=formatPrimitive(ctx,value);if(primitive)return primitive;if(isDOMElement(value))if("outerHTML"in value)return value.outerHTML;else try{if(document.xmlVersion){var xmlSerializer=new XMLSerializer;return xmlSerializer.serializeToString(value)}else{var ns="http://www.w3.org/1999/xhtml";var container=document.createElementNS(ns,"_");container.appendChild(value.cloneNode(false));html=container.innerHTML.replace("><",">"+value.innerHTML+"<");container.innerHTML="";return html}}catch(err){}var visibleKeys=getEnumerableProperties(value);var keys=ctx.showHidden?getProperties(value):visibleKeys;if(0===keys.length||isError(value)&&(1===keys.length&&"stack"===keys[0]||2===keys.length&&"description"===keys[0]&&"stack"===keys[1])){if("function"==typeof value){var name=getName(value);var nameSuffix=name?": "+name:"";return ctx.stylize("[Function"+nameSuffix+"]","special")}if(isRegExp(value))return ctx.stylize(RegExp.prototype.toString.call(value),"regexp");if(isDate(value))return ctx.stylize(Date.prototype.toUTCString.call(value),"date");if(isError(value))return formatError(value)}var base="",array=false,braces=["{","}"];if(isArray(value)){array=true;braces=["[","]"]}if("function"==typeof value){var name=getName(value);var nameSuffix=name?": "+name:"";base=" [Function"+nameSuffix+"]"}if(isRegExp(value))base=" "+RegExp.prototype.toString.call(value);if(isDate(value))base=" "+Date.prototype.toUTCString.call(value);if(isError(value))return formatError(value);if(0===keys.length&&(!array||0==value.length))return braces[0]+base+braces[1];if(0>recurseTimes)if(isRegExp(value))return ctx.stylize(RegExp.prototype.toString.call(value),"regexp");else return ctx.stylize("[Object]","special");ctx.seen.push(value);var output;if(array)output=formatArray(ctx,value,recurseTimes,visibleKeys,keys);else output=keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array);
});ctx.seen.pop();return reduceToSingleString(output,base,braces)}function formatPrimitive(ctx,value){switch(typeof value){case"undefined":return ctx.stylize("undefined","undefined");case"string":var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ctx.stylize(simple,"string");case"number":if(0===value&&1/value===-(1/0))return ctx.stylize("-0","number");return ctx.stylize(""+value,"number");case"boolean":return ctx.stylize(""+value,"boolean")}if(null===value)return ctx.stylize("null","null")}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){var output=[];for(var i=0,l=value.length;l>i;++i)if(Object.prototype.hasOwnProperty.call(value,String(i)))output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),true));else output.push("");keys.forEach(function(key){if(!key.match(/^\d+$/))output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,true))});return output}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str;if(value.__lookupGetter__)if(value.__lookupGetter__(key))if(value.__lookupSetter__(key))str=ctx.stylize("[Getter/Setter]","special");else str=ctx.stylize("[Getter]","special");else if(value.__lookupSetter__(key))str=ctx.stylize("[Setter]","special");if(visibleKeys.indexOf(key)<0)name="["+key+"]";if(!str)if(ctx.seen.indexOf(value[key])<0){if(null===recurseTimes)str=formatValue(ctx,value[key],null);else str=formatValue(ctx,value[key],recurseTimes-1);if(str.indexOf("\n")>-1)if(array)str=str.split("\n").map(function(line){return"  "+line}).join("\n").substr(2);else str="\n"+str.split("\n").map(function(line){return"   "+line}).join("\n")}else str=ctx.stylize("[Circular]","special");if("undefined"==typeof name){if(array&&key.match(/^\d+$/))return str;name=JSON.stringify(""+key);if(name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){name=name.substr(1,name.length-2);name=ctx.stylize(name,"name")}else{name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");name=ctx.stylize(name,"string")}}return name+": "+str}function reduceToSingleString(output,base,braces){var numLinesEst=0;var length=output.reduce(function(prev,cur){numLinesEst++;if(cur.indexOf("\n")>=0)numLinesEst++;return prev+cur.length+1},0);if(length>60)return braces[0]+(""===base?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1];return braces[0]+base+" "+output.join(", ")+" "+braces[1]}function isArray(ar){return Array.isArray(ar)||"object"==typeof ar&&"[object Array]"===objectToString(ar)}function isRegExp(re){return"object"==typeof re&&"[object RegExp]"===objectToString(re)}function isDate(d){return"object"==typeof d&&"[object Date]"===objectToString(d)}function isError(e){return"object"==typeof e&&"[object Error]"===objectToString(e)}function objectToString(o){return Object.prototype.toString.call(o)}var getName=__webpack_require__(22);var getProperties=__webpack_require__(23);var getEnumerableProperties=__webpack_require__(24);module.exports=inspect;var isDOMElement=function(object){if("object"==typeof HTMLElement)return object instanceof HTMLElement;else return object&&"object"==typeof object&&1===object.nodeType&&"string"==typeof object.nodeName}},function(module,exports){module.exports=function(func){if(func.name)return func.name;var match=/^\s?function ([^(]*)\(/.exec(func);return match&&match[1]?match[1]:""}},function(module,exports){module.exports=function getProperties(object){function addProperty(property){if(-1===result.indexOf(property))result.push(property)}var result=Object.getOwnPropertyNames(object);var proto=Object.getPrototypeOf(object);for(;null!==proto;){Object.getOwnPropertyNames(proto).forEach(addProperty);proto=Object.getPrototypeOf(proto)}return result}},function(module,exports){module.exports=function getEnumerableProperties(object){var result=[];for(var name in object)result.push(name);return result}},function(module,exports,__webpack_require__){var inspect=__webpack_require__(21);var config=__webpack_require__(26);module.exports=function(obj){var str=inspect(obj),type=Object.prototype.toString.call(obj);if(config.truncateThreshold&&str.length>=config.truncateThreshold)if("[object Function]"===type)return!obj.name||""===obj.name?"[Function]":"[Function: "+obj.name+"]";else if("[object Array]"===type)return"[ Array("+obj.length+") ]";else if("[object Object]"===type){var keys=Object.keys(obj),kstr=keys.length>2?keys.splice(0,2).join(", ")+", ...":keys.join(", ");return"{ Object ("+kstr+") }"}else return str;else return str}},function(module,exports){module.exports={includeStack:false,showDiff:true,truncateThreshold:40}},function(module,exports){module.exports=function(assertion,object,includeAll){var flags=assertion.__flags||(assertion.__flags=Object.create(null));if(!object.__flags)object.__flags=Object.create(null);includeAll=3===arguments.length?includeAll:true;for(var flag in flags)if(includeAll||"object"!==flag&&"ssfi"!==flag&&"message"!=flag)object.__flags[flag]=flags[flag]}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(29)},function(module,exports,__webpack_require__){function deepEqual(a,b,m){if(sameValue(a,b))return true;else if("date"===type(a))return dateEqual(a,b);else if("regexp"===type(a))return regexpEqual(a,b);else if(Buffer.isBuffer(a))return bufferEqual(a,b);else if("arguments"===type(a))return argumentsEqual(a,b,m);else if(!typeEqual(a,b))return false;else if("object"!==type(a)&&"object"!==type(b)&&"array"!==type(a)&&"array"!==type(b))return sameValue(a,b);else return objectEqual(a,b,m)}function sameValue(a,b){if(a===b)return 0!==a||1/a===1/b;return a!==a&&b!==b}function typeEqual(a,b){return type(a)===type(b)}function dateEqual(a,b){if("date"!==type(b))return false;return sameValue(a.getTime(),b.getTime())}function regexpEqual(a,b){if("regexp"!==type(b))return false;return sameValue(a.toString(),b.toString())}function argumentsEqual(a,b,m){if("arguments"!==type(b))return false;a=[].slice.call(a);b=[].slice.call(b);return deepEqual(a,b,m)}function enumerable(a){var res=[];for(var key in a)res.push(key);return res}function iterableEqual(a,b){if(a.length!==b.length)return false;var i=0;var match=true;for(;i<a.length;i++)if(a[i]!==b[i]){match=false;break}return match}function bufferEqual(a,b){if(!Buffer.isBuffer(b))return false;return iterableEqual(a,b)}function isValue(a){return null!==a&&void 0!==a}function objectEqual(a,b,m){if(!isValue(a)||!isValue(b))return false;if(a.prototype!==b.prototype)return false;var i;if(m){for(i=0;i<m.length;i++)if(m[i][0]===a&&m[i][1]===b||m[i][0]===b&&m[i][1]===a)return true}else m=[];try{var ka=enumerable(a);var kb=enumerable(b)}catch(ex){return false}ka.sort();kb.sort();if(!iterableEqual(ka,kb))return false;m.push([a,b]);var key;for(i=ka.length-1;i>=0;i--){key=ka[i];if(!deepEqual(a[key],b[key],m))return false}return true}var type=__webpack_require__(30);var Buffer;try{Buffer=__webpack_require__(32).Buffer}catch(ex){Buffer={};Buffer.isBuffer=function(){return false}}module.exports=deepEqual},[51,31],function(module,exports){function getType(obj){var str=Object.prototype.toString.call(obj);if(natives[str])return natives[str];if(null===obj)return"null";if(void 0===obj)return"undefined";if(obj===Object(obj))return"object";return typeof obj}function Library(){this.tests={}}var exports=module.exports=getType;var natives={"[object Array]":"array","[object RegExp]":"regexp","[object Function]":"function","[object Arguments]":"arguments","[object Date]":"date"};exports.Library=Library;Library.prototype.of=getType;Library.prototype.define=function(type,test){if(1===arguments.length)return this.tests[type];this.tests[type]=test;return this};Library.prototype.test=function(obj,type){if(type===getType(obj))return true;var test=this.tests[type];if(test&&"regexp"===getType(test))return test.test(obj);else if(test&&"function"===getType(test))return test(obj);else throw new ReferenceError('Type test "'+type+'" not defined or invalid.')}},function(module,exports,__webpack_require__){(function(Buffer,global){function typedArraySupport(){function Bar(){}try{var arr=new Uint8Array(1);arr.foo=function(){return 42};arr.constructor=Bar;return 42===arr.foo()&&arr.constructor===Bar&&"function"==typeof arr.subarray&&0===arr.subarray(1,1).byteLength}catch(e){return false}}function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Buffer(arg){if(!(this instanceof Buffer)){if(arguments.length>1)return new Buffer(arg,arguments[1]);return new Buffer(arg)}this.length=0;this.parent=void 0;if("number"==typeof arg)return fromNumber(this,arg);if("string"==typeof arg)return fromString(this,arg,arguments.length>1?arguments[1]:"utf8");return fromObject(this,arg)}function fromNumber(that,length){that=allocate(that,0>length?0:0|checked(length));if(!Buffer.TYPED_ARRAY_SUPPORT)for(var i=0;length>i;i++)that[i]=0;return that}function fromString(that,string,encoding){if("string"!=typeof encoding||""===encoding)encoding="utf8";var length=0|byteLength(string,encoding);that=allocate(that,length);that.write(string,encoding);return that}function fromObject(that,object){if(Buffer.isBuffer(object))return fromBuffer(that,object);if(isArray(object))return fromArray(that,object);if(null==object)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(object.buffer instanceof ArrayBuffer)return fromTypedArray(that,object);if(object instanceof ArrayBuffer)return fromArrayBuffer(that,object)}if(object.length)return fromArrayLike(that,object);return fromJsonObject(that,object)}function fromBuffer(that,buffer){var length=0|checked(buffer.length);that=allocate(that,length);buffer.copy(that,0,0,length);return that}function fromArray(that,array){var length=0|checked(array.length);that=allocate(that,length);for(var i=0;length>i;i+=1)that[i]=255&array[i];return that}function fromTypedArray(that,array){var length=0|checked(array.length);that=allocate(that,length);for(var i=0;length>i;i+=1)that[i]=255&array[i];return that}function fromArrayBuffer(that,array){if(Buffer.TYPED_ARRAY_SUPPORT){array.byteLength;that=Buffer._augment(new Uint8Array(array))}else that=fromTypedArray(that,new Uint8Array(array));return that}function fromArrayLike(that,array){var length=0|checked(array.length);that=allocate(that,length);for(var i=0;length>i;i+=1)that[i]=255&array[i];return that}function fromJsonObject(that,object){var array;var length=0;if("Buffer"===object.type&&isArray(object.data)){array=object.data;length=0|checked(array.length)}that=allocate(that,length);for(var i=0;length>i;i+=1)that[i]=255&array[i];return that}function allocate(that,length){if(Buffer.TYPED_ARRAY_SUPPORT){that=Buffer._augment(new Uint8Array(length));that.__proto__=Buffer.prototype}else{that.length=length;that._isBuffer=true}var fromPool=0!==length&&length<=Buffer.poolSize>>>1;if(fromPool)that.parent=rootParent;return that}function checked(length){if(length>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|length}function SlowBuffer(subject,encoding){if(!(this instanceof SlowBuffer))return new SlowBuffer(subject,encoding);var buf=new Buffer(subject,encoding);delete buf.parent;return buf}function byteLength(string,encoding){if("string"!=typeof string)string=""+string;var len=string.length;if(0===len)return 0;var loweredCase=false;for(;;)switch(encoding){case"ascii":case"binary":case"raw":case"raws":return len;case"utf8":case"utf-8":return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*len;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase)return utf8ToBytes(string).length;encoding=(""+encoding).toLowerCase();loweredCase=true}}function slowToString(encoding,start,end){var loweredCase=false;start=0|start;end=void 0===end||end===1/0?this.length:0|end;if(!encoding)encoding="utf8";if(0>start)start=0;if(end>this.length)end=this.length;if(start>=end)return"";for(;;)switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"binary":return binarySlice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase();loweredCase=true}}function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;if(!length)length=remaining;else{length=Number(length);if(length>remaining)length=remaining}var strLen=string.length;if(strLen%2!==0)throw new Error("Invalid hex string");if(length>strLen/2)length=strLen/2;for(var i=0;length>i;i++){var parsed=parseInt(string.substr(2*i,2),16);if(isNaN(parsed))throw new Error("Invalid hex string");buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(asciiToBytes(string),buf,offset,length)}function binaryWrite(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length)}function base64Slice(buf,start,end){if(0===start&&end===buf.length)return base64.fromByteArray(buf);else return base64.fromByteArray(buf.slice(start,end))}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);var res=[];var i=start;for(;end>i;){var firstByte=buf[i];var codePoint=null;var bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(end>=i+bytesPerSequence){var secondByte,thirdByte,fourthByte,tempCodePoint;switch(bytesPerSequence){case 1:if(128>firstByte)codePoint=firstByte;break;case 2:secondByte=buf[i+1];if(128===(192&secondByte)){tempCodePoint=(31&firstByte)<<6|63&secondByte;if(tempCodePoint>127)codePoint=tempCodePoint}break;case 3:secondByte=buf[i+1];thirdByte=buf[i+2];if(128===(192&secondByte)&&128===(192&thirdByte)){tempCodePoint=(15&firstByte)<<12|(63&secondByte)<<6|63&thirdByte;if(tempCodePoint>2047&&(55296>tempCodePoint||tempCodePoint>57343))codePoint=tempCodePoint}break;case 4:secondByte=buf[i+1];thirdByte=buf[i+2];fourthByte=buf[i+3];if(128===(192&secondByte)&&128===(192&thirdByte)&&128===(192&fourthByte)){tempCodePoint=(15&firstByte)<<18|(63&secondByte)<<12|(63&thirdByte)<<6|63&fourthByte;if(tempCodePoint>65535&&1114112>tempCodePoint)codePoint=tempCodePoint}}}if(null===codePoint){codePoint=65533;bytesPerSequence=1}else if(codePoint>65535){codePoint-=65536;res.push(codePoint>>>10&1023|55296);codePoint=56320|1023&codePoint}res.push(codePoint);i+=bytesPerSequence}return decodeCodePointsArray(res)}function decodeCodePointsArray(codePoints){var len=codePoints.length;if(MAX_ARGUMENTS_LENGTH>=len)return String.fromCharCode.apply(String,codePoints);var res="";var i=0;for(;len>i;)res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH));return res}function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;end>i;i++)ret+=String.fromCharCode(127&buf[i]);return ret}function binarySlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;end>i;i++)ret+=String.fromCharCode(buf[i]);return ret}function hexSlice(buf,start,end){var len=buf.length;if(!start||0>start)start=0;if(!end||0>end||end>len)end=len;var out="";for(var i=start;end>i;i++)out+=toHex(buf[i]);return out}function utf16leSlice(buf,start,end){var bytes=buf.slice(start,end);var res="";for(var i=0;i<bytes.length;i+=2)res+=String.fromCharCode(bytes[i]+256*bytes[i+1]);return res}function checkOffset(offset,ext,length){if(offset%1!==0||0>offset)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError("buffer must be a Buffer instance");if(value>max||min>value)throw new RangeError("value is out of bounds");if(offset+ext>buf.length)throw new RangeError("index out of range")}function objectWriteUInt16(buf,value,offset,littleEndian){if(0>value)value=65535+value+1;for(var i=0,j=Math.min(buf.length-offset,2);j>i;i++)buf[offset+i]=(value&255<<8*(littleEndian?i:1-i))>>>8*(littleEndian?i:1-i)}function objectWriteUInt32(buf,value,offset,littleEndian){if(0>value)value=4294967295+value+1;for(var i=0,j=Math.min(buf.length-offset,4);j>i;i++)buf[offset+i]=value>>>8*(littleEndian?i:3-i)&255}function checkIEEE754(buf,value,offset,ext,max,min){if(value>max||min>value)throw new RangeError("value is out of bounds");if(offset+ext>buf.length)throw new RangeError("index out of range");if(0>offset)throw new RangeError("index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){if(!noAssert)checkIEEE754(buf,value,offset,4,3.4028234663852886e38,-3.4028234663852886e38);ieee754.write(buf,value,offset,littleEndian,23,4);return offset+4}function writeDouble(buf,value,offset,littleEndian,noAssert){if(!noAssert)checkIEEE754(buf,value,offset,8,1.7976931348623157e308,-1.7976931348623157e308);ieee754.write(buf,value,offset,littleEndian,52,8);return offset+8}function base64clean(str){str=stringtrim(str).replace(INVALID_BASE64_RE,"");if(str.length<2)return"";for(;str.length%4!==0;)str+="=";return str}function stringtrim(str){if(str.trim)return str.trim();return str.replace(/^\s+|\s+$/g,"")}function toHex(n){if(16>n)return"0"+n.toString(16);return n.toString(16)}function utf8ToBytes(string,units){units=units||1/0;var codePoint;var length=string.length;var leadSurrogate=null;var bytes=[];for(var i=0;length>i;i++){codePoint=string.charCodeAt(i);if(codePoint>55295&&57344>codePoint){if(!leadSurrogate){if(codePoint>56319){if((units-=3)>-1)bytes.push(239,191,189);continue}else if(i+1===length){if((units-=3)>-1)bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(56320>codePoint){if((units-=3)>-1)bytes.push(239,191,189);leadSurrogate=codePoint;continue}codePoint=(leadSurrogate-55296<<10|codePoint-56320)+65536}else if(leadSurrogate)if((units-=3)>-1)bytes.push(239,191,189);leadSurrogate=null;if(128>codePoint){if((units-=1)<0)break;bytes.push(codePoint)}else if(2048>codePoint){if((units-=2)<0)break;bytes.push(codePoint>>6|192,63&codePoint|128)}else if(65536>codePoint){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,63&codePoint|128)}else if(1114112>codePoint){if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,63&codePoint|128)}else throw new Error("Invalid code point")}return bytes}function asciiToBytes(str){var byteArray=[];for(var i=0;i<str.length;i++)byteArray.push(255&str.charCodeAt(i));return byteArray}function utf16leToBytes(str,units){var c,hi,lo;var byteArray=[];for(var i=0;i<str.length&&!((units-=2)<0);i++){c=str.charCodeAt(i);hi=c>>8;lo=c%256;byteArray.push(lo);byteArray.push(hi)}return byteArray}function base64ToBytes(str){return base64.toByteArray(base64clean(str))}function blitBuffer(src,dst,offset,length){for(var i=0;length>i&&!(i+offset>=dst.length||i>=src.length);i++)dst[i+offset]=src[i];return i}var base64=__webpack_require__(33);var ieee754=__webpack_require__(34);var isArray=__webpack_require__(35);exports.Buffer=Buffer;exports.SlowBuffer=SlowBuffer;exports.INSPECT_MAX_BYTES=50;Buffer.poolSize=8192;var rootParent={};Buffer.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:typedArraySupport();if(Buffer.TYPED_ARRAY_SUPPORT){Buffer.prototype.__proto__=Uint8Array.prototype;Buffer.__proto__=Uint8Array}Buffer.isBuffer=function isBuffer(b){return!!(null!=b&&b._isBuffer)};Buffer.compare=function compare(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;var x=a.length;var y=b.length;var i=0;var len=Math.min(x,y);for(;len>i&&a[i]===b[i];)++i;if(i!==len){x=a[i];y=b[i]}if(y>x)return-1;if(x>y)return 1;return 0};Buffer.isEncoding=function isEncoding(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};Buffer.concat=function concat(list,length){if(!isArray(list))throw new TypeError("list argument must be an Array of Buffers.");if(0===list.length)return new Buffer(0);var i;if(void 0===length){length=0;for(i=0;i<list.length;i++)length+=list[i].length}var buf=new Buffer(length);var pos=0;for(i=0;i<list.length;i++){var item=list[i];item.copy(buf,pos);pos+=item.length}return buf};Buffer.byteLength=byteLength;Buffer.prototype.length=void 0;Buffer.prototype.parent=void 0;Buffer.prototype.toString=function toString(){var length=0|this.length;if(0===length)return"";if(0===arguments.length)return utf8Slice(this,0,length);return slowToString.apply(this,arguments)};Buffer.prototype.equals=function equals(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");if(this===b)return true;return 0===Buffer.compare(this,b)};Buffer.prototype.inspect=function inspect(){var str="";var max=exports.INSPECT_MAX_BYTES;if(this.length>0){str=this.toString("hex",0,max).match(/.{2}/g).join(" ");if(this.length>max)str+=" ... "}return"<Buffer "+str+">"};Buffer.prototype.compare=function compare(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");if(this===b)return 0;return Buffer.compare(this,b)};Buffer.prototype.indexOf=function indexOf(val,byteOffset){function arrayIndexOf(arr,val,byteOffset){var foundIndex=-1;for(var i=0;byteOffset+i<arr.length;i++)if(arr[byteOffset+i]===val[-1===foundIndex?0:i-foundIndex]){if(-1===foundIndex)foundIndex=i;if(i-foundIndex+1===val.length)return byteOffset+foundIndex}else foundIndex=-1;return-1}if(byteOffset>2147483647)byteOffset=2147483647;else if(-2147483648>byteOffset)byteOffset=-2147483648;byteOffset>>=0;if(0===this.length)return-1;if(byteOffset>=this.length)return-1;if(0>byteOffset)byteOffset=Math.max(this.length+byteOffset,0);if("string"==typeof val){if(0===val.length)return-1;return String.prototype.indexOf.call(this,val,byteOffset)}if(Buffer.isBuffer(val))return arrayIndexOf(this,val,byteOffset);if("number"==typeof val){if(Buffer.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf)return Uint8Array.prototype.indexOf.call(this,val,byteOffset);return arrayIndexOf(this,[val],byteOffset)}throw new TypeError("val must be string, number or Buffer")};Buffer.prototype.get=function get(offset){console.log(".get() is deprecated. Access using array indexes instead.");return this.readUInt8(offset)};Buffer.prototype.set=function set(v,offset){console.log(".set() is deprecated. Access using array indexes instead.");return this.writeUInt8(v,offset)};Buffer.prototype.write=function write(string,offset,length,encoding){if(void 0===offset){encoding="utf8";length=this.length;offset=0}else if(void 0===length&&"string"==typeof offset){encoding=offset;length=this.length;offset=0}else if(isFinite(offset)){offset=0|offset;if(isFinite(length)){length=0|length;if(void 0===encoding)encoding="utf8"}else{encoding=length;length=void 0}}else{var swap=encoding;encoding=offset;offset=0|length;length=swap}var remaining=this.length-offset;if(void 0===length||length>remaining)length=remaining;if(string.length>0&&(0>length||0>offset)||offset>this.length)throw new RangeError("attempt to write outside buffer bounds");if(!encoding)encoding="utf8";var loweredCase=false;for(;;)switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"binary":return binaryWrite(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase();loweredCase=true}};Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;Buffer.prototype.slice=function slice(start,end){var len=this.length;start=~~start;end=void 0===end?len:~~end;if(0>start){start+=len;if(0>start)start=0}else if(start>len)start=len;if(0>end){end+=len;if(0>end)end=0}else if(end>len)end=len;if(start>end)end=start;var newBuf;if(Buffer.TYPED_ARRAY_SUPPORT)newBuf=Buffer._augment(this.subarray(start,end));else{var sliceLen=end-start;newBuf=new Buffer(sliceLen,void 0);for(var i=0;sliceLen>i;i++)newBuf[i]=this[i+start]}if(newBuf.length)newBuf.parent=this.parent||this;return newBuf};Buffer.prototype.readUIntLE=function readUIntLE(offset,byteLength,noAssert){offset=0|offset;byteLength=0|byteLength;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;for(;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return val};Buffer.prototype.readUIntBE=function readUIntBE(offset,byteLength,noAssert){offset=0|offset;byteLength=0|byteLength;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset+--byteLength];var mul=1;for(;byteLength>0&&(mul*=256);)val+=this[offset+--byteLength]*mul;return val};Buffer.prototype.readUInt8=function readUInt8(offset,noAssert){if(!noAssert)checkOffset(offset,1,this.length);return this[offset]};Buffer.prototype.readUInt16LE=function readUInt16LE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);return this[offset]|this[offset+1]<<8};Buffer.prototype.readUInt16BE=function readUInt16BE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);return this[offset]<<8|this[offset+1]};Buffer.prototype.readUInt32LE=function readUInt32LE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+16777216*this[offset+3]};Buffer.prototype.readUInt32BE=function readUInt32BE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return 16777216*this[offset]+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])};Buffer.prototype.readIntLE=function readIntLE(offset,byteLength,noAssert){offset=0|offset;byteLength=0|byteLength;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;for(;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readIntBE=function readIntBE(offset,byteLength,noAssert){offset=0|offset;byteLength=0|byteLength;if(!noAssert)checkOffset(offset,byteLength,this.length);var i=byteLength;var mul=1;var val=this[offset+--i];for(;i>0&&(mul*=256);)val+=this[offset+--i]*mul;mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readInt8=function readInt8(offset,noAssert){if(!noAssert)checkOffset(offset,1,this.length);if(!(128&this[offset]))return this[offset];return-1*(255-this[offset]+1)};Buffer.prototype.readInt16LE=function readInt16LE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return 32768&val?4294901760|val:val};Buffer.prototype.readInt16BE=function readInt16BE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return 32768&val?4294901760|val:val};Buffer.prototype.readInt32LE=function readInt32LE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24};Buffer.prototype.readInt32BE=function readInt32BE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]};Buffer.prototype.readFloatLE=function readFloatLE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,true,23,4)};Buffer.prototype.readFloatBE=function readFloatBE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,false,23,4)};Buffer.prototype.readDoubleLE=function readDoubleLE(offset,noAssert){if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,true,52,8)};Buffer.prototype.readDoubleBE=function readDoubleBE(offset,noAssert){if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,false,52,8)};Buffer.prototype.writeUIntLE=function writeUIntLE(value,offset,byteLength,noAssert){value=+value;offset=0|offset;byteLength=0|byteLength;if(!noAssert)checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength),0);var mul=1;var i=0;this[offset]=255&value;for(;++i<byteLength&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength};Buffer.prototype.writeUIntBE=function writeUIntBE(value,offset,byteLength,noAssert){value=+value;offset=0|offset;byteLength=0|byteLength;if(!noAssert)checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength),0);var i=byteLength-1;var mul=1;this[offset+i]=255&value;for(;--i>=0&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength};Buffer.prototype.writeUInt8=function writeUInt8(value,offset,noAssert){value=+value;offset=0|offset;if(!noAssert)checkInt(this,value,offset,1,255,0);if(!Buffer.TYPED_ARRAY_SUPPORT)value=Math.floor(value);this[offset]=255&value;return offset+1};Buffer.prototype.writeUInt16LE=function writeUInt16LE(value,offset,noAssert){value=+value;offset=0|offset;if(!noAssert)checkInt(this,value,offset,2,65535,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=255&value;this[offset+1]=value>>>8}else objectWriteUInt16(this,value,offset,true);return offset+2};Buffer.prototype.writeUInt16BE=function writeUInt16BE(value,offset,noAssert){value=+value;offset=0|offset;if(!noAssert)checkInt(this,value,offset,2,65535,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>8;this[offset+1]=255&value}else objectWriteUInt16(this,value,offset,false);return offset+2};Buffer.prototype.writeUInt32LE=function writeUInt32LE(value,offset,noAssert){value=+value;offset=0|offset;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset+3]=value>>>24;this[offset+2]=value>>>16;this[offset+1]=value>>>8;this[offset]=255&value}else objectWriteUInt32(this,value,offset,true);return offset+4};Buffer.prototype.writeUInt32BE=function writeUInt32BE(value,offset,noAssert){value=+value;offset=0|offset;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=255&value}else objectWriteUInt32(this,value,offset,false);return offset+4};Buffer.prototype.writeIntLE=function writeIntLE(value,offset,byteLength,noAssert){value=+value;offset=0|offset;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=0;var mul=1;var sub=0>value?1:0;this[offset]=255&value;for(;++i<byteLength&&(mul*=256);)this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength};Buffer.prototype.writeIntBE=function writeIntBE(value,offset,byteLength,noAssert){value=+value;offset=0|offset;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=byteLength-1;var mul=1;var sub=0>value?1:0;this[offset+i]=255&value;for(;--i>=0&&(mul*=256);)this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength};Buffer.prototype.writeInt8=function writeInt8(value,offset,noAssert){value=+value;offset=0|offset;if(!noAssert)checkInt(this,value,offset,1,127,-128);if(!Buffer.TYPED_ARRAY_SUPPORT)value=Math.floor(value);if(0>value)value=255+value+1;this[offset]=255&value;return offset+1};Buffer.prototype.writeInt16LE=function writeInt16LE(value,offset,noAssert){
value=+value;offset=0|offset;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=255&value;this[offset+1]=value>>>8}else objectWriteUInt16(this,value,offset,true);return offset+2};Buffer.prototype.writeInt16BE=function writeInt16BE(value,offset,noAssert){value=+value;offset=0|offset;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>8;this[offset+1]=255&value}else objectWriteUInt16(this,value,offset,false);return offset+2};Buffer.prototype.writeInt32LE=function writeInt32LE(value,offset,noAssert){value=+value;offset=0|offset;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=255&value;this[offset+1]=value>>>8;this[offset+2]=value>>>16;this[offset+3]=value>>>24}else objectWriteUInt32(this,value,offset,true);return offset+4};Buffer.prototype.writeInt32BE=function writeInt32BE(value,offset,noAssert){value=+value;offset=0|offset;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);if(0>value)value=4294967295+value+1;if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=255&value}else objectWriteUInt32(this,value,offset,false);return offset+4};Buffer.prototype.writeFloatLE=function writeFloatLE(value,offset,noAssert){return writeFloat(this,value,offset,true,noAssert)};Buffer.prototype.writeFloatBE=function writeFloatBE(value,offset,noAssert){return writeFloat(this,value,offset,false,noAssert)};Buffer.prototype.writeDoubleLE=function writeDoubleLE(value,offset,noAssert){return writeDouble(this,value,offset,true,noAssert)};Buffer.prototype.writeDoubleBE=function writeDoubleBE(value,offset,noAssert){return writeDouble(this,value,offset,false,noAssert)};Buffer.prototype.copy=function copy(target,targetStart,start,end){if(!start)start=0;if(!end&&0!==end)end=this.length;if(targetStart>=target.length)targetStart=target.length;if(!targetStart)targetStart=0;if(end>0&&start>end)end=start;if(end===start)return 0;if(0===target.length||0===this.length)return 0;if(0>targetStart)throw new RangeError("targetStart out of bounds");if(0>start||start>=this.length)throw new RangeError("sourceStart out of bounds");if(0>end)throw new RangeError("sourceEnd out of bounds");if(end>this.length)end=this.length;if(target.length-targetStart<end-start)end=target.length-targetStart+start;var len=end-start;var i;if(this===target&&targetStart>start&&end>targetStart)for(i=len-1;i>=0;i--)target[i+targetStart]=this[i+start];else if(1e3>len||!Buffer.TYPED_ARRAY_SUPPORT)for(i=0;len>i;i++)target[i+targetStart]=this[i+start];else target._set(this.subarray(start,start+len),targetStart);return len};Buffer.prototype.fill=function fill(value,start,end){if(!value)value=0;if(!start)start=0;if(!end)end=this.length;if(start>end)throw new RangeError("end < start");if(end===start)return;if(0===this.length)return;if(0>start||start>=this.length)throw new RangeError("start out of bounds");if(0>end||end>this.length)throw new RangeError("end out of bounds");var i;if("number"==typeof value)for(i=start;end>i;i++)this[i]=value;else{var bytes=utf8ToBytes(value.toString());var len=bytes.length;for(i=start;end>i;i++)this[i]=bytes[i%len]}return this};Buffer.prototype.toArrayBuffer=function toArrayBuffer(){if("undefined"!=typeof Uint8Array)if(Buffer.TYPED_ARRAY_SUPPORT)return new Buffer(this).buffer;else{var buf=new Uint8Array(this.length);for(var i=0,len=buf.length;len>i;i+=1)buf[i]=this[i];return buf.buffer}else throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var BP=Buffer.prototype;Buffer._augment=function _augment(arr){arr.constructor=Buffer;arr._isBuffer=true;arr._set=arr.set;arr.get=BP.get;arr.set=BP.set;arr.write=BP.write;arr.toString=BP.toString;arr.toLocaleString=BP.toString;arr.toJSON=BP.toJSON;arr.equals=BP.equals;arr.compare=BP.compare;arr.indexOf=BP.indexOf;arr.copy=BP.copy;arr.slice=BP.slice;arr.readUIntLE=BP.readUIntLE;arr.readUIntBE=BP.readUIntBE;arr.readUInt8=BP.readUInt8;arr.readUInt16LE=BP.readUInt16LE;arr.readUInt16BE=BP.readUInt16BE;arr.readUInt32LE=BP.readUInt32LE;arr.readUInt32BE=BP.readUInt32BE;arr.readIntLE=BP.readIntLE;arr.readIntBE=BP.readIntBE;arr.readInt8=BP.readInt8;arr.readInt16LE=BP.readInt16LE;arr.readInt16BE=BP.readInt16BE;arr.readInt32LE=BP.readInt32LE;arr.readInt32BE=BP.readInt32BE;arr.readFloatLE=BP.readFloatLE;arr.readFloatBE=BP.readFloatBE;arr.readDoubleLE=BP.readDoubleLE;arr.readDoubleBE=BP.readDoubleBE;arr.writeUInt8=BP.writeUInt8;arr.writeUIntLE=BP.writeUIntLE;arr.writeUIntBE=BP.writeUIntBE;arr.writeUInt16LE=BP.writeUInt16LE;arr.writeUInt16BE=BP.writeUInt16BE;arr.writeUInt32LE=BP.writeUInt32LE;arr.writeUInt32BE=BP.writeUInt32BE;arr.writeIntLE=BP.writeIntLE;arr.writeIntBE=BP.writeIntBE;arr.writeInt8=BP.writeInt8;arr.writeInt16LE=BP.writeInt16LE;arr.writeInt16BE=BP.writeInt16BE;arr.writeInt32LE=BP.writeInt32LE;arr.writeInt32BE=BP.writeInt32BE;arr.writeFloatLE=BP.writeFloatLE;arr.writeFloatBE=BP.writeFloatBE;arr.writeDoubleLE=BP.writeDoubleLE;arr.writeDoubleBE=BP.writeDoubleBE;arr.fill=BP.fill;arr.inspect=BP.inspect;arr.toArrayBuffer=BP.toArrayBuffer;return arr};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g}).call(exports,__webpack_require__(32).Buffer,function(){return this}())},function(module,exports,__webpack_require__){var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(exports){"use strict";function decode(elt){var code=elt.charCodeAt(0);if(code===PLUS||code===PLUS_URL_SAFE)return 62;if(code===SLASH||code===SLASH_URL_SAFE)return 63;if(NUMBER>code)return-1;if(NUMBER+10>code)return code-NUMBER+26+26;if(UPPER+26>code)return code-UPPER;if(LOWER+26>code)return code-LOWER+26}function b64ToByteArray(b64){function push(v){arr[L++]=v}var i,j,l,tmp,placeHolders,arr;if(b64.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var len=b64.length;placeHolders="="===b64.charAt(len-2)?2:"="===b64.charAt(len-1)?1:0;arr=new Arr(3*b64.length/4-placeHolders);l=placeHolders>0?b64.length-4:b64.length;var L=0;for(i=0,j=0;l>i;i+=4,j+=3){tmp=decode(b64.charAt(i))<<18|decode(b64.charAt(i+1))<<12|decode(b64.charAt(i+2))<<6|decode(b64.charAt(i+3));push((16711680&tmp)>>16);push((65280&tmp)>>8);push(255&tmp)}if(2===placeHolders){tmp=decode(b64.charAt(i))<<2|decode(b64.charAt(i+1))>>4;push(255&tmp)}else if(1===placeHolders){tmp=decode(b64.charAt(i))<<10|decode(b64.charAt(i+1))<<4|decode(b64.charAt(i+2))>>2;push(tmp>>8&255);push(255&tmp)}return arr}function uint8ToBase64(uint8){function encode(num){return lookup.charAt(num)}function tripletToBase64(num){return encode(num>>18&63)+encode(num>>12&63)+encode(num>>6&63)+encode(63&num)}var i,extraBytes=uint8.length%3,output="",temp,length;for(i=0,length=uint8.length-extraBytes;length>i;i+=3){temp=(uint8[i]<<16)+(uint8[i+1]<<8)+uint8[i+2];output+=tripletToBase64(temp)}switch(extraBytes){case 1:temp=uint8[uint8.length-1];output+=encode(temp>>2);output+=encode(temp<<4&63);output+="==";break;case 2:temp=(uint8[uint8.length-2]<<8)+uint8[uint8.length-1];output+=encode(temp>>10);output+=encode(temp>>4&63);output+=encode(temp<<2&63);output+="="}return output}var Arr="undefined"!=typeof Uint8Array?Uint8Array:Array;var PLUS="+".charCodeAt(0);var SLASH="/".charCodeAt(0);var NUMBER="0".charCodeAt(0);var LOWER="a".charCodeAt(0);var UPPER="A".charCodeAt(0);var PLUS_URL_SAFE="-".charCodeAt(0);var SLASH_URL_SAFE="_".charCodeAt(0);exports.toByteArray=b64ToByteArray;exports.fromByteArray=uint8ToBase64}(false?this.base64js={}:exports)},function(module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m;var eLen=8*nBytes-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var nBits=-7;var i=isLE?nBytes-1:0;var d=isLE?-1:1;var s=buffer[offset+i];i+=d;e=s&(1<<-nBits)-1;s>>=-nBits;nBits+=eLen;for(;nBits>0;e=256*e+buffer[offset+i],i+=d,nBits-=8);m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=256*m+buffer[offset+i],i+=d,nBits-=8);if(0===e)e=1-eBias;else if(e===eMax)return m?NaN:(s?-1:1)*(1/0);else{m+=Math.pow(2,mLen);e-=eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)};exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c;var eLen=8*nBytes-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var rt=23===mLen?Math.pow(2,-24)-Math.pow(2,-77):0;var i=isLE?0:nBytes-1;var d=isLE?1:-1;var s=0>value||0===value&&0>1/value?1:0;value=Math.abs(value);if(isNaN(value)||value===1/0){m=isNaN(value)?1:0;e=eMax}else{e=Math.floor(Math.log(value)/Math.LN2);if(value*(c=Math.pow(2,-e))<1){e--;c*=2}if(e+eBias>=1)value+=rt/c;else value+=rt*Math.pow(2,1-eBias);if(value*c>=2){e++;c/=2}if(e+eBias>=eMax){m=0;e=eMax}else if(e+eBias>=1){m=(value*c-1)*Math.pow(2,mLen);e+=eBias}else{m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen);e=0}}for(;mLen>=8;buffer[offset+i]=255&m,i+=d,m/=256,mLen-=8);e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[offset+i]=255&e,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=128*s}},function(module,exports){var isArray=Array.isArray;var str=Object.prototype.toString;module.exports=isArray||function(val){return!!val&&"[object Array]"==str.call(val)}},function(module,exports,__webpack_require__){var getPathInfo=__webpack_require__(37);module.exports=function(path,obj){var info=getPathInfo(path,obj);return info.value}},function(module,exports,__webpack_require__){function parsePath(path){var str=path.replace(/([^\\])\[/g,"$1.["),parts=str.match(/(\\\.|[^.]+?)+/g);return parts.map(function(value){var re=/^\[(\d+)\]$/,mArr=re.exec(value);if(mArr)return{i:parseFloat(mArr[1])};else return{p:value.replace(/\\([.\[\]])/g,"$1")}})}function _getPathValue(parsed,obj,index){var tmp=obj,res;index=void 0===index?parsed.length:index;for(var i=0,l=index;l>i;i++){var part=parsed[i];if(tmp){if("undefined"!=typeof part.p)tmp=tmp[part.p];else if("undefined"!=typeof part.i)tmp=tmp[part.i];if(i==l-1)res=tmp}else res=void 0}return res}var hasProperty=__webpack_require__(38);module.exports=function getPathInfo(path,obj){var parsed=parsePath(path),last=parsed[parsed.length-1];var info={parent:parsed.length>1?_getPathValue(parsed,obj,parsed.length-1):obj,name:last.p||last.i,value:_getPathValue(parsed,obj)};info.exists=hasProperty(info.name,info.parent);return info}},function(module,exports,__webpack_require__){var type=__webpack_require__(16);var literals={number:Number,string:String};module.exports=function hasProperty(name,obj){var ot=type(obj);if("null"===ot||"undefined"===ot)return false;if(literals[ot]&&"object"!=typeof obj)obj=new literals[ot](obj);return name in obj}},function(module,exports,__webpack_require__){var config=__webpack_require__(26);var flag=__webpack_require__(15);module.exports=function(ctx,name,getter){Object.defineProperty(ctx,name,{get:function addProperty(){var old_ssfi=flag(this,"ssfi");if(old_ssfi&&false===config.includeStack)flag(this,"ssfi",addProperty);var result=getter.call(this);return void 0===result?this:result},configurable:true})}},function(module,exports,__webpack_require__){var config=__webpack_require__(26);var flag=__webpack_require__(15);module.exports=function(ctx,name,method){ctx[name]=function(){var old_ssfi=flag(this,"ssfi");if(old_ssfi&&false===config.includeStack)flag(this,"ssfi",ctx[name]);var result=method.apply(this,arguments);return void 0===result?this:result}}},function(module,exports){module.exports=function(ctx,name,getter){var _get=Object.getOwnPropertyDescriptor(ctx,name),_super=function(){};if(_get&&"function"==typeof _get.get)_super=_get.get;Object.defineProperty(ctx,name,{get:function(){var result=getter(_super).call(this);return void 0===result?this:result},configurable:true})}},function(module,exports){module.exports=function(ctx,name,method){var _method=ctx[name],_super=function(){return this};if(_method&&"function"==typeof _method)_super=_method;ctx[name]=function(){var result=method(_super).apply(this,arguments);return void 0===result?this:result}}},function(module,exports,__webpack_require__){var transferFlags=__webpack_require__(27);var flag=__webpack_require__(15);var config=__webpack_require__(26);var hasProtoSupport="__proto__"in Object;var excludeNames=/^(?:length|name|arguments|caller)$/;var call=Function.prototype.call,apply=Function.prototype.apply;module.exports=function(ctx,name,method,chainingBehavior){if("function"!=typeof chainingBehavior)chainingBehavior=function(){};var chainableBehavior={method:method,chainingBehavior:chainingBehavior};if(!ctx.__methods)ctx.__methods={};ctx.__methods[name]=chainableBehavior;Object.defineProperty(ctx,name,{get:function(){chainableBehavior.chainingBehavior.call(this);var assert=function assert(){var old_ssfi=flag(this,"ssfi");if(old_ssfi&&false===config.includeStack)flag(this,"ssfi",assert);var result=chainableBehavior.method.apply(this,arguments);return void 0===result?this:result};if(hasProtoSupport){var prototype=assert.__proto__=Object.create(this);prototype.call=call;prototype.apply=apply}else{var asserterNames=Object.getOwnPropertyNames(ctx);asserterNames.forEach(function(asserterName){if(!excludeNames.test(asserterName)){var pd=Object.getOwnPropertyDescriptor(ctx,asserterName);Object.defineProperty(assert,asserterName,pd)}})}transferFlags(this,assert);return assert},configurable:true})}},function(module,exports){module.exports=function(ctx,name,method,chainingBehavior){var chainableBehavior=ctx.__methods[name];var _chainingBehavior=chainableBehavior.chainingBehavior;chainableBehavior.chainingBehavior=function(){var result=chainingBehavior(_chainingBehavior).call(this);return void 0===result?this:result};var _method=chainableBehavior.method;chainableBehavior.method=function(){var result=method(_method).apply(this,arguments);return void 0===result?this:result}}},function(module,exports,__webpack_require__){var config=__webpack_require__(26);module.exports=function(_chai,util){function Assertion(obj,msg,stack){flag(this,"ssfi",stack||arguments.callee);flag(this,"object",obj);flag(this,"message",msg)}var AssertionError=_chai.AssertionError,flag=util.flag;_chai.Assertion=Assertion;Object.defineProperty(Assertion,"includeStack",{get:function(){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead.");return config.includeStack},set:function(value){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead.");config.includeStack=value}});Object.defineProperty(Assertion,"showDiff",{get:function(){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead.");return config.showDiff},set:function(value){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead.");config.showDiff=value}});Assertion.addProperty=function(name,fn){util.addProperty(this.prototype,name,fn)};Assertion.addMethod=function(name,fn){util.addMethod(this.prototype,name,fn)};Assertion.addChainableMethod=function(name,fn,chainingBehavior){util.addChainableMethod(this.prototype,name,fn,chainingBehavior)};Assertion.overwriteProperty=function(name,fn){util.overwriteProperty(this.prototype,name,fn)};Assertion.overwriteMethod=function(name,fn){util.overwriteMethod(this.prototype,name,fn)};Assertion.overwriteChainableMethod=function(name,fn,chainingBehavior){util.overwriteChainableMethod(this.prototype,name,fn,chainingBehavior)};Assertion.prototype.assert=function(expr,msg,negateMsg,expected,_actual,showDiff){var ok=util.test(this,arguments);if(true!==showDiff)showDiff=false;if(true!==config.showDiff)showDiff=false;if(!ok){var msg=util.getMessage(this,arguments),actual=util.getActual(this,arguments);throw new AssertionError(msg,{actual:actual,expected:expected,showDiff:showDiff},config.includeStack?this.assert:flag(this,"ssfi"))}};Object.defineProperty(Assertion.prototype,"_obj",{get:function(){return flag(this,"object")},set:function(val){flag(this,"object",val)}})}},function(module,exports){module.exports=function(chai,_){function an(type,msg){if(msg)flag(this,"message",msg);type=type.toLowerCase();var obj=flag(this,"object"),article=~["a","e","i","o","u"].indexOf(type.charAt(0))?"an ":"a ";this.assert(type===_.type(obj),"expected #{this} to be "+article+type,"expected #{this} not to be "+article+type)}function includeChainingBehavior(){flag(this,"contains",true)}function include(val,msg){_.expectTypes(this,["array","object","string"]);if(msg)flag(this,"message",msg);var obj=flag(this,"object");var expected=false;if("array"===_.type(obj)&&"object"===_.type(val)){for(var i in obj)if(_.eql(obj[i],val)){expected=true;break}}else if("object"===_.type(val)){if(!flag(this,"negate")){for(var k in val)new Assertion(obj).property(k,val[k]);return}var subset={};for(var k in val)subset[k]=obj[k];expected=_.eql(subset,val)}else expected=void 0!=obj&&~obj.indexOf(val);this.assert(expected,"expected #{this} to include "+_.inspect(val),"expected #{this} to not include "+_.inspect(val))}function checkArguments(){var obj=flag(this,"object"),type=Object.prototype.toString.call(obj);this.assert("[object Arguments]"===type,"expected #{this} to be arguments but got "+type,"expected #{this} to not be arguments")}function assertEqual(val,msg){if(msg)flag(this,"message",msg);var obj=flag(this,"object");if(flag(this,"deep"))return this.eql(val);else this.assert(val===obj,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",val,this._obj,true)}function assertEql(obj,msg){if(msg)flag(this,"message",msg);this.assert(_.eql(obj,flag(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",obj,this._obj,true)}function assertAbove(n,msg){if(msg)flag(this,"message",msg);var obj=flag(this,"object");if(flag(this,"doLength")){new Assertion(obj,msg).to.have.property("length");var len=obj.length;this.assert(len>n,"expected #{this} to have a length above #{exp} but got #{act}","expected #{this} to not have a length above #{exp}",n,len)}else this.assert(obj>n,"expected #{this} to be above "+n,"expected #{this} to be at most "+n)}function assertLeast(n,msg){if(msg)flag(this,"message",msg);var obj=flag(this,"object");if(flag(this,"doLength")){new Assertion(obj,msg).to.have.property("length");var len=obj.length;this.assert(len>=n,"expected #{this} to have a length at least #{exp} but got #{act}","expected #{this} to have a length below #{exp}",n,len)}else this.assert(obj>=n,"expected #{this} to be at least "+n,"expected #{this} to be below "+n)}function assertBelow(n,msg){if(msg)flag(this,"message",msg);var obj=flag(this,"object");if(flag(this,"doLength")){new Assertion(obj,msg).to.have.property("length");var len=obj.length;this.assert(n>len,"expected #{this} to have a length below #{exp} but got #{act}","expected #{this} to not have a length below #{exp}",n,len)}else this.assert(n>obj,"expected #{this} to be below "+n,"expected #{this} to be at least "+n)}function assertMost(n,msg){if(msg)flag(this,"message",msg);var obj=flag(this,"object");if(flag(this,"doLength")){new Assertion(obj,msg).to.have.property("length");var len=obj.length;this.assert(n>=len,"expected #{this} to have a length at most #{exp} but got #{act}","expected #{this} to have a length above #{exp}",n,len)}else this.assert(n>=obj,"expected #{this} to be at most "+n,"expected #{this} to be above "+n)}function assertInstanceOf(constructor,msg){if(msg)flag(this,"message",msg);var name=_.getName(constructor);this.assert(flag(this,"object")instanceof constructor,"expected #{this} to be an instance of "+name,"expected #{this} to not be an instance of "+name)}function assertOwnProperty(name,msg){if(msg)flag(this,"message",msg);var obj=flag(this,"object");this.assert(obj.hasOwnProperty(name),"expected #{this} to have own property "+_.inspect(name),"expected #{this} to not have own property "+_.inspect(name))}function assertOwnPropertyDescriptor(name,descriptor,msg){if("string"==typeof descriptor){msg=descriptor;descriptor=null}if(msg)flag(this,"message",msg);var obj=flag(this,"object");var actualDescriptor=Object.getOwnPropertyDescriptor(Object(obj),name);if(actualDescriptor&&descriptor)this.assert(_.eql(descriptor,actualDescriptor),"expected the own property descriptor for "+_.inspect(name)+" on #{this} to match "+_.inspect(descriptor)+", got "+_.inspect(actualDescriptor),"expected the own property descriptor for "+_.inspect(name)+" on #{this} to not match "+_.inspect(descriptor),descriptor,actualDescriptor,true);else this.assert(actualDescriptor,"expected #{this} to have an own property descriptor for "+_.inspect(name),"expected #{this} to not have an own property descriptor for "+_.inspect(name));flag(this,"object",actualDescriptor)}function assertLengthChain(){flag(this,"doLength",true)}function assertLength(n,msg){if(msg)flag(this,"message",msg);var obj=flag(this,"object");new Assertion(obj,msg).to.have.property("length");var len=obj.length;this.assert(len==n,"expected #{this} to have a length of #{exp} but got #{act}","expected #{this} to not have a length of #{act}",n,len)}function assertMatch(re,msg){if(msg)flag(this,"message",msg);var obj=flag(this,"object");this.assert(re.exec(obj),"expected #{this} to match "+re,"expected #{this} not to match "+re)}function assertKeys(keys){var obj=flag(this,"object"),str,ok=true,mixedArgsMsg="keys must be given single argument of Array|Object|String, or multiple String arguments";switch(_.type(keys)){case"array":if(arguments.length>1)throw new Error(mixedArgsMsg);break;case"object":if(arguments.length>1)throw new Error(mixedArgsMsg);keys=Object.keys(keys);break;default:keys=Array.prototype.slice.call(arguments)}if(!keys.length)throw new Error("keys required");var actual=Object.keys(obj),expected=keys,len=keys.length,any=flag(this,"any"),all=flag(this,"all");if(!any&&!all)all=true;if(any){var intersection=expected.filter(function(key){return~actual.indexOf(key)});ok=intersection.length>0}if(all){ok=keys.every(function(key){return~actual.indexOf(key)});if(!flag(this,"negate")&&!flag(this,"contains"))ok=ok&&keys.length==actual.length}if(len>1){keys=keys.map(function(key){return _.inspect(key)});var last=keys.pop();if(all)str=keys.join(", ")+", and "+last;if(any)str=keys.join(", ")+", or "+last}else str=_.inspect(keys[0]);str=(len>1?"keys ":"key ")+str;str=(flag(this,"contains")?"contain ":"have ")+str;this.assert(ok,"expected #{this} to "+str,"expected #{this} to not "+str,expected.slice(0).sort(),actual.sort(),true)}function assertThrows(constructor,errMsg,msg){if(msg)flag(this,"message",msg);var obj=flag(this,"object");new Assertion(obj,msg).is.a("function");var thrown=false,desiredError=null,name=null,thrownError=null;if(0===arguments.length){errMsg=null;constructor=null}else if(constructor&&(constructor instanceof RegExp||"string"==typeof constructor)){errMsg=constructor;constructor=null}else if(constructor&&constructor instanceof Error){desiredError=constructor;constructor=null;errMsg=null}else if("function"==typeof constructor){name=constructor.prototype.name;if(!name||"Error"===name&&constructor!==Error)name=constructor.name||(new constructor).name}else constructor=null;try{obj()}catch(err){if(desiredError){this.assert(err===desiredError,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}",desiredError instanceof Error?desiredError.toString():desiredError,err instanceof Error?err.toString():err);flag(this,"object",err);return this}if(constructor){this.assert(err instanceof constructor,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp} but #{act} was thrown",name,err instanceof Error?err.toString():err);if(!errMsg){flag(this,"object",err);return this}}var message="error"===_.type(err)&&"message"in err?err.message:""+err;if(null!=message&&errMsg&&errMsg instanceof RegExp){this.assert(errMsg.exec(message),"expected #{this} to throw error matching #{exp} but got #{act}","expected #{this} to throw error not matching #{exp}",errMsg,message);flag(this,"object",err);return this}else if(null!=message&&errMsg&&"string"==typeof errMsg){this.assert(~message.indexOf(errMsg),"expected #{this} to throw error including #{exp} but got #{act}","expected #{this} to throw error not including #{act}",errMsg,message);flag(this,"object",err);return this}else{thrown=true;thrownError=err}}var actuallyGot="",expectedThrown=null!==name?name:desiredError?"#{exp}":"an error";if(thrown)actuallyGot=" but #{act} was thrown";this.assert(true===thrown,"expected #{this} to throw "+expectedThrown+actuallyGot,"expected #{this} to not throw "+expectedThrown+actuallyGot,desiredError instanceof Error?desiredError.toString():desiredError,thrownError instanceof Error?thrownError.toString():thrownError);flag(this,"object",thrownError)}function respondTo(method,msg){if(msg)flag(this,"message",msg);var obj=flag(this,"object"),itself=flag(this,"itself"),context="function"===_.type(obj)&&!itself?obj.prototype[method]:obj[method];this.assert("function"==typeof context,"expected #{this} to respond to "+_.inspect(method),"expected #{this} to not respond to "+_.inspect(method))}function satisfy(matcher,msg){if(msg)flag(this,"message",msg);var obj=flag(this,"object");var result=matcher(obj);this.assert(result,"expected #{this} to satisfy "+_.objDisplay(matcher),"expected #{this} to not satisfy"+_.objDisplay(matcher),this.negate?false:true,result)}function closeTo(expected,delta,msg){if(msg)flag(this,"message",msg);var obj=flag(this,"object");new Assertion(obj,msg).is.a("number");if("number"!==_.type(expected)||"number"!==_.type(delta))throw new Error("the arguments to closeTo or approximately must be numbers");this.assert(Math.abs(obj-expected)<=delta,"expected #{this} to be close to "+expected+" +/- "+delta,"expected #{this} not to be close to "+expected+" +/- "+delta)}function isSubsetOf(subset,superset,cmp){return subset.every(function(elem){if(!cmp)return-1!==superset.indexOf(elem);return superset.some(function(elem2){return cmp(elem,elem2)})})}function oneOf(list,msg){if(msg)flag(this,"message",msg);var expected=flag(this,"object");new Assertion(list).to.be.an("array");this.assert(list.indexOf(expected)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",list,expected)}function assertChanges(object,prop,msg){if(msg)flag(this,"message",msg);var fn=flag(this,"object");new Assertion(object,msg).to.have.property(prop);new Assertion(fn).is.a("function");var initial=object[prop];fn();this.assert(initial!==object[prop],"expected ."+prop+" to change","expected ."+prop+" to not change")}function assertIncreases(object,prop,msg){if(msg)flag(this,"message",msg);var fn=flag(this,"object");new Assertion(object,msg).to.have.property(prop);new Assertion(fn).is.a("function");var initial=object[prop];fn();this.assert(object[prop]-initial>0,"expected ."+prop+" to increase","expected ."+prop+" to not increase")}function assertDecreases(object,prop,msg){if(msg)flag(this,"message",msg);var fn=flag(this,"object");new Assertion(object,msg).to.have.property(prop);new Assertion(fn).is.a("function");var initial=object[prop];fn();this.assert(object[prop]-initial<0,"expected ."+prop+" to decrease","expected ."+prop+" to not decrease")}var Assertion=chai.Assertion,toString=Object.prototype.toString,flag=_.flag;["to","be","been","is","and","has","have","with","that","which","at","of","same"].forEach(function(chain){Assertion.addProperty(chain,function(){return this})});Assertion.addProperty("not",function(){flag(this,"negate",true)});Assertion.addProperty("deep",function(){flag(this,"deep",true)});Assertion.addProperty("any",function(){flag(this,"any",true);flag(this,"all",false)});Assertion.addProperty("all",function(){flag(this,"all",true);flag(this,"any",false)});Assertion.addChainableMethod("an",an);Assertion.addChainableMethod("a",an);Assertion.addChainableMethod("include",include,includeChainingBehavior);Assertion.addChainableMethod("contain",include,includeChainingBehavior);Assertion.addChainableMethod("contains",include,includeChainingBehavior);Assertion.addChainableMethod("includes",include,includeChainingBehavior);Assertion.addProperty("ok",function(){this.assert(flag(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")});Assertion.addProperty("true",function(){this.assert(true===flag(this,"object"),"expected #{this} to be true","expected #{this} to be false",this.negate?false:true)});Assertion.addProperty("false",function(){this.assert(false===flag(this,"object"),"expected #{this} to be false","expected #{this} to be true",this.negate?true:false)});Assertion.addProperty("null",function(){this.assert(null===flag(this,"object"),"expected #{this} to be null","expected #{this} not to be null")});Assertion.addProperty("undefined",function(){this.assert(void 0===flag(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined")});Assertion.addProperty("NaN",function(){this.assert(isNaN(flag(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")});Assertion.addProperty("exist",function(){this.assert(null!=flag(this,"object"),"expected #{this} to exist","expected #{this} to not exist")});Assertion.addProperty("empty",function(){var obj=flag(this,"object"),expected=obj;if(Array.isArray(obj)||"string"==typeof object)expected=obj.length;else if("object"==typeof obj)expected=Object.keys(obj).length;this.assert(!expected,"expected #{this} to be empty","expected #{this} not to be empty")});Assertion.addProperty("arguments",checkArguments);Assertion.addProperty("Arguments",checkArguments);Assertion.addMethod("equal",assertEqual);Assertion.addMethod("equals",assertEqual);Assertion.addMethod("eq",assertEqual);Assertion.addMethod("eql",assertEql);Assertion.addMethod("eqls",assertEql);Assertion.addMethod("above",assertAbove);Assertion.addMethod("gt",assertAbove);Assertion.addMethod("greaterThan",assertAbove);Assertion.addMethod("least",assertLeast);Assertion.addMethod("gte",assertLeast);Assertion.addMethod("below",assertBelow);Assertion.addMethod("lt",assertBelow);Assertion.addMethod("lessThan",assertBelow);Assertion.addMethod("most",assertMost);Assertion.addMethod("lte",assertMost);Assertion.addMethod("within",function(start,finish,msg){if(msg)flag(this,"message",msg);var obj=flag(this,"object"),range=start+".."+finish;if(flag(this,"doLength")){new Assertion(obj,msg).to.have.property("length");var len=obj.length;this.assert(len>=start&&finish>=len,"expected #{this} to have a length within "+range,"expected #{this} to not have a length within "+range)}else this.assert(obj>=start&&finish>=obj,"expected #{this} to be within "+range,"expected #{this} to not be within "+range)});Assertion.addMethod("instanceof",assertInstanceOf);Assertion.addMethod("instanceOf",assertInstanceOf);Assertion.addMethod("property",function(name,val,msg){if(msg)flag(this,"message",msg);var isDeep=!!flag(this,"deep"),descriptor=isDeep?"deep property ":"property ",negate=flag(this,"negate"),obj=flag(this,"object"),pathInfo=isDeep?_.getPathInfo(name,obj):null,hasProperty=isDeep?pathInfo.exists:_.hasProperty(name,obj),value=isDeep?pathInfo.value:obj[name];if(negate&&arguments.length>1){if(void 0===value){msg=null!=msg?msg+": ":"";throw new Error(msg+_.inspect(obj)+" has no "+descriptor+_.inspect(name))}}else this.assert(hasProperty,"expected #{this} to have a "+descriptor+_.inspect(name),"expected #{this} to not have "+descriptor+_.inspect(name));if(arguments.length>1)this.assert(val===value,"expected #{this} to have a "+descriptor+_.inspect(name)+" of #{exp}, but got #{act}","expected #{this} to not have a "+descriptor+_.inspect(name)+" of #{act}",val,value);flag(this,"object",value)});Assertion.addMethod("ownProperty",assertOwnProperty);Assertion.addMethod("haveOwnProperty",assertOwnProperty);Assertion.addMethod("ownPropertyDescriptor",assertOwnPropertyDescriptor);Assertion.addMethod("haveOwnPropertyDescriptor",assertOwnPropertyDescriptor);Assertion.addChainableMethod("length",assertLength,assertLengthChain);Assertion.addMethod("lengthOf",assertLength);Assertion.addMethod("match",assertMatch);Assertion.addMethod("matches",assertMatch);
Assertion.addMethod("string",function(str,msg){if(msg)flag(this,"message",msg);var obj=flag(this,"object");new Assertion(obj,msg).is.a("string");this.assert(~obj.indexOf(str),"expected #{this} to contain "+_.inspect(str),"expected #{this} to not contain "+_.inspect(str))});Assertion.addMethod("keys",assertKeys);Assertion.addMethod("key",assertKeys);Assertion.addMethod("throw",assertThrows);Assertion.addMethod("throws",assertThrows);Assertion.addMethod("Throw",assertThrows);Assertion.addMethod("respondTo",respondTo);Assertion.addMethod("respondsTo",respondTo);Assertion.addProperty("itself",function(){flag(this,"itself",true)});Assertion.addMethod("satisfy",satisfy);Assertion.addMethod("satisfies",satisfy);Assertion.addMethod("closeTo",closeTo);Assertion.addMethod("approximately",closeTo);Assertion.addMethod("members",function(subset,msg){if(msg)flag(this,"message",msg);var obj=flag(this,"object");new Assertion(obj).to.be.an("array");new Assertion(subset).to.be.an("array");var cmp=flag(this,"deep")?_.eql:void 0;if(flag(this,"contains"))return this.assert(isSubsetOf(subset,obj,cmp),"expected #{this} to be a superset of #{act}","expected #{this} to not be a superset of #{act}",obj,subset);this.assert(isSubsetOf(obj,subset,cmp)&&isSubsetOf(subset,obj,cmp),"expected #{this} to have the same members as #{act}","expected #{this} to not have the same members as #{act}",obj,subset)});Assertion.addMethod("oneOf",oneOf);Assertion.addChainableMethod("change",assertChanges);Assertion.addChainableMethod("changes",assertChanges);Assertion.addChainableMethod("increase",assertIncreases);Assertion.addChainableMethod("increases",assertIncreases);Assertion.addChainableMethod("decrease",assertDecreases);Assertion.addChainableMethod("decreases",assertDecreases);Assertion.addProperty("extensible",function(){var obj=flag(this,"object");var isExtensible;try{isExtensible=Object.isExtensible(obj)}catch(err){if(err instanceof TypeError)isExtensible=false;else throw err}this.assert(isExtensible,"expected #{this} to be extensible","expected #{this} to not be extensible")});Assertion.addProperty("sealed",function(){var obj=flag(this,"object");var isSealed;try{isSealed=Object.isSealed(obj)}catch(err){if(err instanceof TypeError)isSealed=true;else throw err}this.assert(isSealed,"expected #{this} to be sealed","expected #{this} to not be sealed")});Assertion.addProperty("frozen",function(){var obj=flag(this,"object");var isFrozen;try{isFrozen=Object.isFrozen(obj)}catch(err){if(err instanceof TypeError)isFrozen=true;else throw err}this.assert(isFrozen,"expected #{this} to be frozen","expected #{this} to not be frozen")})}},function(module,exports){module.exports=function(chai,util){chai.expect=function(val,message){return new chai.Assertion(val,message)};chai.expect.fail=function(actual,expected,message,operator){message=message||"expect.fail()";throw new chai.AssertionError(message,{actual:actual,expected:expected,operator:operator},chai.expect.fail)}}},function(module,exports){module.exports=function(chai,util){function loadShould(){function shouldGetter(){if(this instanceof String||this instanceof Number||this instanceof Boolean)return new Assertion(this.valueOf(),null,shouldGetter);return new Assertion(this,null,shouldGetter)}function shouldSetter(value){Object.defineProperty(this,"should",{value:value,enumerable:true,configurable:true,writable:true})}Object.defineProperty(Object.prototype,"should",{set:shouldSetter,get:shouldGetter,configurable:true});var should={};should.fail=function(actual,expected,message,operator){message=message||"should.fail()";throw new chai.AssertionError(message,{actual:actual,expected:expected,operator:operator},should.fail)};should.equal=function(val1,val2,msg){new Assertion(val1,msg).to.equal(val2)};should.Throw=function(fn,errt,errs,msg){new Assertion(fn,msg).to.Throw(errt,errs)};should.exist=function(val,msg){new Assertion(val,msg).to.exist};should.not={};should.not.equal=function(val1,val2,msg){new Assertion(val1,msg).to.not.equal(val2)};should.not.Throw=function(fn,errt,errs,msg){new Assertion(fn,msg).to.not.Throw(errt,errs)};should.not.exist=function(val,msg){new Assertion(val,msg).to.not.exist};should["throw"]=should.Throw;should.not["throw"]=should.not.Throw;return should}var Assertion=chai.Assertion;chai.should=loadShould;chai.Should=loadShould}},function(module,exports){module.exports=function(chai,util){var Assertion=chai.Assertion,flag=util.flag;var assert=chai.assert=function(express,errmsg){var test=new Assertion(null,null,chai.assert);test.assert(express,errmsg,"[ negation message unavailable ]")};assert.fail=function(actual,expected,message,operator){message=message||"assert.fail()";throw new chai.AssertionError(message,{actual:actual,expected:expected,operator:operator},assert.fail)};assert.isOk=function(val,msg){new Assertion(val,msg).is.ok};assert.isNotOk=function(val,msg){new Assertion(val,msg).is.not.ok};assert.equal=function(act,exp,msg){var test=new Assertion(act,msg,assert.equal);test.assert(exp==flag(test,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",exp,act)};assert.notEqual=function(act,exp,msg){var test=new Assertion(act,msg,assert.notEqual);test.assert(exp!=flag(test,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",exp,act)};assert.strictEqual=function(act,exp,msg){new Assertion(act,msg).to.equal(exp)};assert.notStrictEqual=function(act,exp,msg){new Assertion(act,msg).to.not.equal(exp)};assert.deepEqual=function(act,exp,msg){new Assertion(act,msg).to.eql(exp)};assert.notDeepEqual=function(act,exp,msg){new Assertion(act,msg).to.not.eql(exp)};assert.isAbove=function(val,abv,msg){new Assertion(val,msg).to.be.above(abv)};assert.isAtLeast=function(val,atlst,msg){new Assertion(val,msg).to.be.least(atlst)};assert.isBelow=function(val,blw,msg){new Assertion(val,msg).to.be.below(blw)};assert.isAtMost=function(val,atmst,msg){new Assertion(val,msg).to.be.most(atmst)};assert.isTrue=function(val,msg){new Assertion(val,msg).is["true"]};assert.isNotTrue=function(val,msg){new Assertion(val,msg).to.not.equal(true)};assert.isFalse=function(val,msg){new Assertion(val,msg).is["false"]};assert.isNotFalse=function(val,msg){new Assertion(val,msg).to.not.equal(false)};assert.isNull=function(val,msg){new Assertion(val,msg).to.equal(null)};assert.isNotNull=function(val,msg){new Assertion(val,msg).to.not.equal(null)};assert.isNaN=function(val,msg){new Assertion(val,msg).to.be.NaN};assert.isNotNaN=function(val,msg){new Assertion(val,msg).not.to.be.NaN};assert.isUndefined=function(val,msg){new Assertion(val,msg).to.equal(void 0)};assert.isDefined=function(val,msg){new Assertion(val,msg).to.not.equal(void 0)};assert.isFunction=function(val,msg){new Assertion(val,msg).to.be.a("function")};assert.isNotFunction=function(val,msg){new Assertion(val,msg).to.not.be.a("function")};assert.isObject=function(val,msg){new Assertion(val,msg).to.be.a("object")};assert.isNotObject=function(val,msg){new Assertion(val,msg).to.not.be.a("object")};assert.isArray=function(val,msg){new Assertion(val,msg).to.be.an("array")};assert.isNotArray=function(val,msg){new Assertion(val,msg).to.not.be.an("array")};assert.isString=function(val,msg){new Assertion(val,msg).to.be.a("string")};assert.isNotString=function(val,msg){new Assertion(val,msg).to.not.be.a("string")};assert.isNumber=function(val,msg){new Assertion(val,msg).to.be.a("number")};assert.isNotNumber=function(val,msg){new Assertion(val,msg).to.not.be.a("number")};assert.isBoolean=function(val,msg){new Assertion(val,msg).to.be.a("boolean")};assert.isNotBoolean=function(val,msg){new Assertion(val,msg).to.not.be.a("boolean")};assert.typeOf=function(val,type,msg){new Assertion(val,msg).to.be.a(type)};assert.notTypeOf=function(val,type,msg){new Assertion(val,msg).to.not.be.a(type)};assert.instanceOf=function(val,type,msg){new Assertion(val,msg).to.be.instanceOf(type)};assert.notInstanceOf=function(val,type,msg){new Assertion(val,msg).to.not.be.instanceOf(type)};assert.include=function(exp,inc,msg){new Assertion(exp,msg,assert.include).include(inc)};assert.notInclude=function(exp,inc,msg){new Assertion(exp,msg,assert.notInclude).not.include(inc)};assert.match=function(exp,re,msg){new Assertion(exp,msg).to.match(re)};assert.notMatch=function(exp,re,msg){new Assertion(exp,msg).to.not.match(re)};assert.property=function(obj,prop,msg){new Assertion(obj,msg).to.have.property(prop)};assert.notProperty=function(obj,prop,msg){new Assertion(obj,msg).to.not.have.property(prop)};assert.deepProperty=function(obj,prop,msg){new Assertion(obj,msg).to.have.deep.property(prop)};assert.notDeepProperty=function(obj,prop,msg){new Assertion(obj,msg).to.not.have.deep.property(prop)};assert.propertyVal=function(obj,prop,val,msg){new Assertion(obj,msg).to.have.property(prop,val)};assert.propertyNotVal=function(obj,prop,val,msg){new Assertion(obj,msg).to.not.have.property(prop,val)};assert.deepPropertyVal=function(obj,prop,val,msg){new Assertion(obj,msg).to.have.deep.property(prop,val)};assert.deepPropertyNotVal=function(obj,prop,val,msg){new Assertion(obj,msg).to.not.have.deep.property(prop,val)};assert.lengthOf=function(exp,len,msg){new Assertion(exp,msg).to.have.length(len)};assert["throws"]=function(fn,errt,errs,msg){if("string"==typeof errt||errt instanceof RegExp){errs=errt;errt=null}var assertErr=new Assertion(fn,msg).to["throw"](errt,errs);return flag(assertErr,"object")};assert.doesNotThrow=function(fn,type,msg){if("string"==typeof type){msg=type;type=null}new Assertion(fn,msg).to.not.Throw(type)};assert.operator=function(val,operator,val2,msg){var ok;switch(operator){case"==":ok=val==val2;break;case"===":ok=val===val2;break;case">":ok=val>val2;break;case">=":ok=val>=val2;break;case"<":ok=val2>val;break;case"<=":ok=val2>=val;break;case"!=":ok=val!=val2;break;case"!==":ok=val!==val2;break;default:throw new Error('Invalid operator "'+operator+'"')}var test=new Assertion(ok,msg);test.assert(true===flag(test,"object"),"expected "+util.inspect(val)+" to be "+operator+" "+util.inspect(val2),"expected "+util.inspect(val)+" to not be "+operator+" "+util.inspect(val2))};assert.closeTo=function(act,exp,delta,msg){new Assertion(act,msg).to.be.closeTo(exp,delta)};assert.approximately=function(act,exp,delta,msg){new Assertion(act,msg).to.be.approximately(exp,delta)};assert.sameMembers=function(set1,set2,msg){new Assertion(set1,msg).to.have.same.members(set2)};assert.sameDeepMembers=function(set1,set2,msg){new Assertion(set1,msg).to.have.same.deep.members(set2)};assert.includeMembers=function(superset,subset,msg){new Assertion(superset,msg).to.include.members(subset)};assert.oneOf=function(inList,list,msg){new Assertion(inList,msg).to.be.oneOf(list)};assert.changes=function(fn,obj,prop){new Assertion(fn).to.change(obj,prop)};assert.doesNotChange=function(fn,obj,prop){new Assertion(fn).to.not.change(obj,prop)};assert.increases=function(fn,obj,prop){new Assertion(fn).to.increase(obj,prop)};assert.doesNotIncrease=function(fn,obj,prop){new Assertion(fn).to.not.increase(obj,prop)};assert.decreases=function(fn,obj,prop){new Assertion(fn).to.decrease(obj,prop)};assert.doesNotDecrease=function(fn,obj,prop){new Assertion(fn).to.not.decrease(obj,prop)};assert.ifError=function(val){if(val)throw val};assert.isExtensible=function(obj,msg){new Assertion(obj,msg).to.be.extensible};assert.isNotExtensible=function(obj,msg){new Assertion(obj,msg).to.not.be.extensible};assert.isSealed=function(obj,msg){new Assertion(obj,msg).to.be.sealed};assert.isNotSealed=function(obj,msg){new Assertion(obj,msg).to.not.be.sealed};assert.isFrozen=function(obj,msg){new Assertion(obj,msg).to.be.frozen};assert.isNotFrozen=function(obj,msg){new Assertion(obj,msg).to.not.be.frozen};!function alias(name,as){assert[as]=assert[name];return alias}("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PLAYER_ID=exports.APP_ID=void 0;var _vars=__webpack_require__(4);var _utils=__webpack_require__(5);var APP_ID=exports.APP_ID=(0,_utils.isDev)()?"33b3562a-d33b-42ee-88bc-1436e780311f":"7b6053e0-9911-4003-a0a4-a33e417ad663";var PLAYER_ID=exports.PLAYER_ID=(0,_utils.isDev)()?"b3481557-521d-4d01-be72-acf2c3f46eff":"15b23511-e0cf-489a-8682-7cf129cb4585"},function(module,exports,__webpack_require__,__webpack_module_template_argument_0__){module.exports=__webpack_require__(__webpack_module_template_argument_0__)}]));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vdGVzdC5qcyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgNTMyODVlZmM0NWUxMTY5NWVkMTU/Njk1NSIsIndlYnBhY2s6Ly8vLi90ZXN0L2VudHJ5LmpzIiwid2VicGFjazovLy8uL34vd2hhdHdnLWZldGNoL2ZldGNoLmpzP2NiYTMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZhcnMuanM/MDkwMCIsIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMuanM/MmZmOCIsIndlYnBhY2s6Ly8vLi9zcmMvYXBpLmpzPzlmOTQiLCJ3ZWJwYWNrOi8vLy4vfi9sb2dsZXZlbC9saWIvbG9nbGV2ZWwuanM/ZGNlYiIsIndlYnBhY2s6Ly8vLi90ZXN0L2FwaS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NoYWkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9jaGFpL2xpYi9jaGFpLmpzIiwid2VicGFjazovLy8uL34vYXNzZXJ0aW9uLWVycm9yL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vY2hhaS9saWIvY2hhaS91dGlscy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NoYWkvbGliL2NoYWkvdXRpbHMvdGVzdC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NoYWkvbGliL2NoYWkvdXRpbHMvZmxhZy5qcyIsIndlYnBhY2s6Ly8vLi9+L3R5cGUtZGV0ZWN0L2xpYi90eXBlLmpzIiwid2VicGFjazovLy8uL34vY2hhaS9saWIvY2hhaS91dGlscy9leHBlY3RUeXBlcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2NoYWkvbGliL2NoYWkvdXRpbHMvZ2V0TWVzc2FnZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NoYWkvbGliL2NoYWkvdXRpbHMvZ2V0QWN0dWFsLmpzIiwid2VicGFjazovLy8uL34vY2hhaS9saWIvY2hhaS91dGlscy9pbnNwZWN0LmpzIiwid2VicGFjazovLy8uL34vY2hhaS9saWIvY2hhaS91dGlscy9nZXROYW1lLmpzIiwid2VicGFjazovLy8uL34vY2hhaS9saWIvY2hhaS91dGlscy9nZXRQcm9wZXJ0aWVzLmpzIiwid2VicGFjazovLy8uL34vY2hhaS9saWIvY2hhaS91dGlscy9nZXRFbnVtZXJhYmxlUHJvcGVydGllcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2NoYWkvbGliL2NoYWkvdXRpbHMvb2JqRGlzcGxheS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NoYWkvbGliL2NoYWkvY29uZmlnLmpzIiwid2VicGFjazovLy8uL34vY2hhaS9saWIvY2hhaS91dGlscy90cmFuc2ZlckZsYWdzLmpzIiwid2VicGFjazovLy8uL34vZGVlcC1lcWwvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9kZWVwLWVxbC9saWIvZXFsLmpzIiwid2VicGFjazovLy8uL34vZGVlcC1lcWwvfi90eXBlLWRldGVjdC9saWIvdHlwZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2J1ZmZlci9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2Jhc2U2NC1qcy9saWIvYjY0LmpzIiwid2VicGFjazovLy8uL34vaWVlZTc1NC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2lzLWFycmF5L2luZGV4LmpzIiwid2VicGFjazovLy8uL34vY2hhaS9saWIvY2hhaS91dGlscy9nZXRQYXRoVmFsdWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jaGFpL2xpYi9jaGFpL3V0aWxzL2dldFBhdGhJbmZvLmpzIiwid2VicGFjazovLy8uL34vY2hhaS9saWIvY2hhaS91dGlscy9oYXNQcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NoYWkvbGliL2NoYWkvdXRpbHMvYWRkUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jaGFpL2xpYi9jaGFpL3V0aWxzL2FkZE1ldGhvZC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NoYWkvbGliL2NoYWkvdXRpbHMvb3ZlcndyaXRlUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jaGFpL2xpYi9jaGFpL3V0aWxzL292ZXJ3cml0ZU1ldGhvZC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NoYWkvbGliL2NoYWkvdXRpbHMvYWRkQ2hhaW5hYmxlTWV0aG9kLmpzIiwid2VicGFjazovLy8uL34vY2hhaS9saWIvY2hhaS91dGlscy9vdmVyd3JpdGVDaGFpbmFibGVNZXRob2QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jaGFpL2xpYi9jaGFpL2Fzc2VydGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9+L2NoYWkvbGliL2NoYWkvY29yZS9hc3NlcnRpb25zLmpzIiwid2VicGFjazovLy8uL34vY2hhaS9saWIvY2hhaS9pbnRlcmZhY2UvZXhwZWN0LmpzIiwid2VicGFjazovLy8uL34vY2hhaS9saWIvY2hhaS9pbnRlcmZhY2Uvc2hvdWxkLmpzIiwid2VicGFjazovLy8uL34vY2hhaS9saWIvY2hhaS9pbnRlcmZhY2UvYXNzZXJ0LmpzIiwid2VicGFjazovLy8uL3Rlc3QvdmFycy5qcyIsIndlYnBhY2s6Ly8vLi9+L3R5cGUtZGV0ZWN0L2luZGV4LmpzIl0sIm5hbWVzIjpbIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiZXhwb3J0cyIsIm1vZHVsZSIsImlkIiwibG9hZGVkIiwiY2FsbCIsIm0iLCJjIiwicCIsImkiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsIl9tIiwiYXJncyIsInNsaWNlIiwiZm4iLCJhIiwiYiIsImFwcGx5IiwidGhpcyIsImNvbmNhdCIsImdsb2JhbCIsIm5vcm1hbGl6ZU5hbWUiLCJuYW1lIiwiU3RyaW5nIiwidGVzdCIsIlR5cGVFcnJvciIsInRvTG93ZXJDYXNlIiwibm9ybWFsaXplVmFsdWUiLCJ2YWx1ZSIsIkhlYWRlcnMiLCJoZWFkZXJzIiwibWFwIiwiZm9yRWFjaCIsImFwcGVuZCIsImdldE93blByb3BlcnR5TmFtZXMiLCJjb25zdW1lZCIsImJvZHkiLCJib2R5VXNlZCIsIlByb21pc2UiLCJyZWplY3QiLCJmaWxlUmVhZGVyUmVhZHkiLCJyZWFkZXIiLCJyZXNvbHZlIiwib25sb2FkIiwicmVzdWx0Iiwib25lcnJvciIsImVycm9yIiwicmVhZEJsb2JBc0FycmF5QnVmZmVyIiwiYmxvYiIsIkZpbGVSZWFkZXIiLCJyZWFkQXNBcnJheUJ1ZmZlciIsInJlYWRCbG9iQXNUZXh0IiwicmVhZEFzVGV4dCIsIkJvZHkiLCJfaW5pdEJvZHkiLCJfYm9keUluaXQiLCJfYm9keVRleHQiLCJzdXBwb3J0IiwiQmxvYiIsImlzUHJvdG90eXBlT2YiLCJfYm9keUJsb2IiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiX2JvZHlGb3JtRGF0YSIsImFycmF5QnVmZmVyIiwiQXJyYXlCdWZmZXIiLCJFcnJvciIsInJlamVjdGVkIiwidGhlbiIsInRleHQiLCJkZWNvZGUiLCJqc29uIiwiSlNPTiIsInBhcnNlIiwibm9ybWFsaXplTWV0aG9kIiwibWV0aG9kIiwidXBjYXNlZCIsInRvVXBwZXJDYXNlIiwibWV0aG9kcyIsImluZGV4T2YiLCJSZXF1ZXN0IiwiaW5wdXQiLCJvcHRpb25zIiwidXJsIiwiY3JlZGVudGlhbHMiLCJtb2RlIiwicmVmZXJyZXIiLCJmb3JtIiwidHJpbSIsInNwbGl0IiwiYnl0ZXMiLCJzaGlmdCIsInJlcGxhY2UiLCJqb2luIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwieGhyIiwiaGVhZCIsInBhaXJzIiwiZ2V0QWxsUmVzcG9uc2VIZWFkZXJzIiwiaGVhZGVyIiwia2V5IiwiUmVzcG9uc2UiLCJib2R5SW5pdCIsInR5cGUiLCJzdGF0dXMiLCJvayIsInN0YXR1c1RleHQiLCJzZWxmIiwiZmV0Y2giLCJsaXN0IiwicHVzaCIsImdldCIsInZhbHVlcyIsImdldEFsbCIsImhhcyIsInNldCIsImNhbGxiYWNrIiwidGhpc0FyZyIsImUiLCJjbG9uZSIsInJlc3BvbnNlIiwicmVkaXJlY3RTdGF0dXNlcyIsInJlZGlyZWN0IiwiUmFuZ2VFcnJvciIsImxvY2F0aW9uIiwiaW5pdCIsInJlc3BvbnNlVVJMIiwiZ2V0UmVzcG9uc2VIZWFkZXIiLCJyZXF1ZXN0IiwiWE1MSHR0cFJlcXVlc3QiLCJyZXNwb25zZVRleHQiLCJvcGVuIiwid2l0aENyZWRlbnRpYWxzIiwicmVzcG9uc2VUeXBlIiwic2V0UmVxdWVzdEhlYWRlciIsInNlbmQiLCJwb2x5ZmlsbCIsImRlZmluZVByb3BlcnR5IiwiQVBJX1VSTCIsIkhPU1RfVVJMIiwiUFJPRF9IT1NUIiwiREVWX0hPU1QiLCJ1bmRlZmluZWQiLCJfdXRpbHMiLCJpc0RldiIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl90eXBlb2YiLCJTeW1ib2wiLCJjb25zdHJ1Y3RvciIsImlzQXJyYXkiLCJ2YXJpYWJsZSIsInRvU3RyaW5nIiwiZ2V0SHVtYW5pemVkVGltZUR1cmF0aW9uIiwidGltZUR1cmF0aW9uSW5NaWxsaXNlY29uZHMiLCJhZGRQbHVyYWxTdWZmaXgiLCJudW1iZXIiLCJkdXJhdGlvbiIsIk1hdGgiLCJmbG9vciIsInllYXJzIiwiZGF5cyIsImhvdXJzIiwibWludXRlcyIsInNlY29uZHMiLCJpc1B1c2hOb3RpZmljYXRpb25zU3VwcG9ydGVkIiwiY2hyb21lVmVyc2lvbiIsIm5hdmlnYXRvciIsImFwcFZlcnNpb24iLCJtYXRjaCIsImlzU3VwcG9ydGVkRmlyZUZveCIsImlzU3VwcG9ydGVkU2FmYXJpIiwicGxhdGZvcm0iLCJwYXJzZUludCIsInN1YnN0cmluZyIsImlzQnJvd3NlclNhZmFyaSIsInNhZmFyaVZlcnNpb24iLCJmaXJlRm94VmVyc2lvbiIsInVzZXJBZ2VudCIsImlzQnJvd3NlckZpcmVmb3giLCJnZXRGaXJlZm94VmVyc2lvbiIsInJlbW92ZURvbUVsZW1lbnQiLCJzZWxlY3RvciIsImVscyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImxlbmd0aCIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsImFkZERvbUVsZW1lbnQiLCJ0YXJnZXRTZWxlY3Rvck9yRWxlbWVudCIsImFkZE9yZGVyIiwiZWxlbWVudEh0bWwiLCJxdWVyeVNlbGVjdG9yIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwiY2xlYXJEb21FbGVtZW50Q2hpbGRyZW4iLCJlbGVtZW50IiwiZmlyc3RDaGlsZCIsImFkZENzc0NsYXNzIiwiY3NzQ2xhc3MiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmVDc3NDbGFzcyIsInJlbW92ZSIsImhhc0Nzc0NsYXNzIiwiY29udGFpbnMiLCJvbiIsImV2ZW50IiwidGFzayIsIl9sb2dsZXZlbDIiLCJkZWJ1ZyIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbmNlIiwibWFudWFsRGVzdHJveSIsImFyZ3VtZW50cyIsInRhc2tXcmFwcGVyIiwiaW50ZXJuYWxUYXNrRnVuY3Rpb24iLCJkZXN0cm95RXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJvZmYiLCJnZXRDb25zb2xlU3R5bGUiLCJzdHlsZSIsImRlbGF5IiwiZHVyYXRpb25NcyIsInNldFRpbWVvdXQiLCJub3RoaW5nIiwid2hlbiIsImNvbmRpdGlvbiIsInByb21pc2VJZlRydWUiLCJwcm9taXNlSWZGYWxzZSIsIl9sb2dsZXZlbCIsImFwaUNhbGwiLCJhY3Rpb24iLCJkYXRhIiwiY29udGVudHMiLCJjYWNoZSIsInN0cmluZ2lmeSIsIl92YXJzIiwianNvblJlc3BvbnNlIiwic2VuZE5vdGlmaWNhdGlvbiIsImFwcElkIiwicGxheWVySWRzIiwidGl0bGVzIiwicGFyYW1zIiwiYXBwX2lkIiwiaGVhZGluZ3MiLCJpbmNsdWRlX3BsYXllcl9pZHMiLCJpc0FueVdlYiIsIl9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXyIsIl9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fIiwicm9vdCIsImRlZmluaXRpb24iLCJsb2ciLCJyZWFsTWV0aG9kIiwibWV0aG9kTmFtZSIsImNvbnNvbGUiLCJ1bmRlZmluZWRUeXBlIiwiYmluZE1ldGhvZCIsIm5vb3AiLCJiaW5kIiwiRnVuY3Rpb24iLCJlbmFibGVMb2dnaW5nV2hlbkNvbnNvbGVBcnJpdmVzIiwibGV2ZWwiLCJsb2dnZXJOYW1lIiwicmVwbGFjZUxvZ2dpbmdNZXRob2RzIiwibG9nTWV0aG9kcyIsIm1ldGhvZEZhY3RvcnkiLCJkZWZhdWx0TWV0aG9kRmFjdG9yeSIsIkxvZ2dlciIsImRlZmF1bHRMZXZlbCIsImZhY3RvcnkiLCJwZXJzaXN0TGV2ZWxJZlBvc3NpYmxlIiwibGV2ZWxOdW0iLCJsZXZlbE5hbWUiLCJ3aW5kb3ciLCJsb2NhbFN0b3JhZ2UiLCJzdG9yYWdlS2V5IiwiaWdub3JlIiwiY29va2llIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiZ2V0UGVyc2lzdGVkTGV2ZWwiLCJzdG9yZWRMZXZlbCIsImV4ZWMiLCJsZXZlbHMiLCJjdXJyZW50TGV2ZWwiLCJUUkFDRSIsIkRFQlVHIiwiSU5GTyIsIldBUk4iLCJFUlJPUiIsIlNJTEVOVCIsImdldExldmVsIiwic2V0TGV2ZWwiLCJwZXJzaXN0Iiwic2V0RGVmYXVsdExldmVsIiwiZW5hYmxlQWxsIiwiZGlzYWJsZUFsbCIsImluaXRpYWxMZXZlbCIsImRlZmF1bHRMb2dnZXIiLCJfbG9nZ2Vyc0J5TmFtZSIsImdldExvZ2dlciIsImxvZ2dlciIsIl9sb2ciLCJub0NvbmZsaWN0IiwiX2NoYWkiLCJfY2hhaTIiLCJfYXBpIiwiZGVzY3JpYmUiLCJpdCIsInNob3VsZCIsImV2ZW50dWFsbHkiLCJiZSIsInJlamVjdGVkV2l0aCIsIkFQUF9JRCIsImVuIiwiUExBWUVSX0lEIiwiZnVsZmlsbGVkIiwidXNlZCIsInZlcnNpb24iLCJBc3NlcnRpb25FcnJvciIsInV0aWwiLCJ1c2UiLCJjb25maWciLCJhc3NlcnRpb24iLCJjb3JlIiwiZXhwZWN0IiwiYXNzZXJ0IiwiZXhjbHVkZSIsImV4Y2x1ZGVQcm9wcyIsInJlcyIsImtleXMiLCJleGNsdWRlcyIsImV4dGVuZEV4Y2x1ZGUiLCJtZXNzYWdlIiwiX3Byb3BzIiwic3NmIiwiZXh0ZW5kIiwicHJvcHMiLCJzaG93RGlmZiIsImNhbGxlZSIsImNhcHR1cmVTdGFja1RyYWNlIiwic3RhY2siLCJjcmVhdGUiLCJ0b0pTT04iLCJleHBlY3RUeXBlcyIsImdldE1lc3NhZ2UiLCJnZXRBY3R1YWwiLCJpbnNwZWN0Iiwib2JqRGlzcGxheSIsImZsYWciLCJ0cmFuc2ZlckZsYWdzIiwiZXFsIiwiZ2V0UGF0aFZhbHVlIiwiZ2V0UGF0aEluZm8iLCJoYXNQcm9wZXJ0eSIsImdldE5hbWUiLCJhZGRQcm9wZXJ0eSIsImFkZE1ldGhvZCIsIm92ZXJ3cml0ZVByb3BlcnR5Iiwib3ZlcndyaXRlTWV0aG9kIiwiYWRkQ2hhaW5hYmxlTWV0aG9kIiwib3ZlcndyaXRlQ2hhaW5hYmxlTWV0aG9kIiwibmVnYXRlIiwiZXhwciIsImZsYWdzIiwiX19mbGFncyIsImdldFR5cGUiLCJvYmplY3RUeXBlUmVnZXhwIiwiTGlicmFyeSIsInRlc3RzIiwib2YiLCJkZWZpbmUiLCJSZWZlcmVuY2VFcnJvciIsInR5cGVzIiwidCIsInNvcnQiLCJzdHIiLCJpbmRleCIsImFydCIsImNoYXJBdCIsIm9yIiwic29tZSIsImV4cGVjdGVkIiwidmFsIiwiYWN0dWFsIiwibXNnIiwiZmxhZ01zZyIsIl9vYmoiLCJzaG93SGlkZGVuIiwiZGVwdGgiLCJjb2xvcnMiLCJjdHgiLCJzZWVuIiwic3R5bGl6ZSIsImZvcm1hdFZhbHVlIiwicmVjdXJzZVRpbWVzIiwicmV0IiwicHJpbWl0aXZlIiwiZm9ybWF0UHJpbWl0aXZlIiwiaXNET01FbGVtZW50Iiwib3V0ZXJIVE1MIiwieG1sVmVyc2lvbiIsInhtbFNlcmlhbGl6ZXIiLCJYTUxTZXJpYWxpemVyIiwic2VyaWFsaXplVG9TdHJpbmciLCJucyIsImNvbnRhaW5lciIsImNyZWF0ZUVsZW1lbnROUyIsImFwcGVuZENoaWxkIiwiY2xvbmVOb2RlIiwiaHRtbCIsImlubmVySFRNTCIsImVyciIsInZpc2libGVLZXlzIiwiZ2V0RW51bWVyYWJsZVByb3BlcnRpZXMiLCJnZXRQcm9wZXJ0aWVzIiwiaXNFcnJvciIsIm5hbWVTdWZmaXgiLCJpc1JlZ0V4cCIsIlJlZ0V4cCIsImlzRGF0ZSIsIkRhdGUiLCJ0b1VUQ1N0cmluZyIsImZvcm1hdEVycm9yIiwiYmFzZSIsImFycmF5IiwiYnJhY2VzIiwib3V0cHV0IiwiZm9ybWF0QXJyYXkiLCJmb3JtYXRQcm9wZXJ0eSIsInBvcCIsInJlZHVjZVRvU2luZ2xlU3RyaW5nIiwic2ltcGxlIiwiSW5maW5pdHkiLCJsIiwiX19sb29rdXBHZXR0ZXJfXyIsIl9fbG9va3VwU2V0dGVyX18iLCJsaW5lIiwic3Vic3RyIiwibnVtTGluZXNFc3QiLCJyZWR1Y2UiLCJwcmV2IiwiY3VyIiwiYXIiLCJBcnJheSIsIm9iamVjdFRvU3RyaW5nIiwicmUiLCJkIiwibyIsIm9iamVjdCIsIkhUTUxFbGVtZW50Iiwibm9kZVR5cGUiLCJub2RlTmFtZSIsImZ1bmMiLCJwcm9wZXJ0eSIsInByb3RvIiwiZ2V0UHJvdG90eXBlT2YiLCJ0cnVuY2F0ZVRocmVzaG9sZCIsImtzdHIiLCJzcGxpY2UiLCJpbmNsdWRlU3RhY2siLCJpbmNsdWRlQWxsIiwiZGVlcEVxdWFsIiwic2FtZVZhbHVlIiwiZGF0ZUVxdWFsIiwicmVnZXhwRXF1YWwiLCJCdWZmZXIiLCJpc0J1ZmZlciIsImJ1ZmZlckVxdWFsIiwiYXJndW1lbnRzRXF1YWwiLCJ0eXBlRXF1YWwiLCJvYmplY3RFcXVhbCIsImdldFRpbWUiLCJlbnVtZXJhYmxlIiwiaXRlcmFibGVFcXVhbCIsImlzVmFsdWUiLCJrYSIsImtiIiwiZXgiLCJuYXRpdmVzIiwiW29iamVjdCBBcnJheV0iLCJbb2JqZWN0IFJlZ0V4cF0iLCJbb2JqZWN0IEZ1bmN0aW9uXSIsIltvYmplY3QgQXJndW1lbnRzXSIsIltvYmplY3QgRGF0ZV0iLCJ0eXBlZEFycmF5U3VwcG9ydCIsIkJhciIsImFyciIsIlVpbnQ4QXJyYXkiLCJmb28iLCJzdWJhcnJheSIsImJ5dGVMZW5ndGgiLCJrTWF4TGVuZ3RoIiwiVFlQRURfQVJSQVlfU1VQUE9SVCIsImFyZyIsInBhcmVudCIsImZyb21OdW1iZXIiLCJmcm9tU3RyaW5nIiwiZnJvbU9iamVjdCIsInRoYXQiLCJhbGxvY2F0ZSIsImNoZWNrZWQiLCJzdHJpbmciLCJlbmNvZGluZyIsIndyaXRlIiwiZnJvbUJ1ZmZlciIsImZyb21BcnJheSIsImJ1ZmZlciIsImZyb21UeXBlZEFycmF5IiwiZnJvbUFycmF5QnVmZmVyIiwiZnJvbUFycmF5TGlrZSIsImZyb21Kc29uT2JqZWN0IiwiY29weSIsIl9hdWdtZW50IiwiX19wcm90b19fIiwiX2lzQnVmZmVyIiwiZnJvbVBvb2wiLCJwb29sU2l6ZSIsInJvb3RQYXJlbnQiLCJTbG93QnVmZmVyIiwic3ViamVjdCIsImJ1ZiIsImxlbiIsImxvd2VyZWRDYXNlIiwidXRmOFRvQnl0ZXMiLCJiYXNlNjRUb0J5dGVzIiwic2xvd1RvU3RyaW5nIiwic3RhcnQiLCJlbmQiLCJoZXhTbGljZSIsInV0ZjhTbGljZSIsImFzY2lpU2xpY2UiLCJiaW5hcnlTbGljZSIsImJhc2U2NFNsaWNlIiwidXRmMTZsZVNsaWNlIiwiaGV4V3JpdGUiLCJvZmZzZXQiLCJOdW1iZXIiLCJyZW1haW5pbmciLCJzdHJMZW4iLCJwYXJzZWQiLCJpc05hTiIsInV0ZjhXcml0ZSIsImJsaXRCdWZmZXIiLCJhc2NpaVdyaXRlIiwiYXNjaWlUb0J5dGVzIiwiYmluYXJ5V3JpdGUiLCJiYXNlNjRXcml0ZSIsInVjczJXcml0ZSIsInV0ZjE2bGVUb0J5dGVzIiwiYmFzZTY0IiwiZnJvbUJ5dGVBcnJheSIsIm1pbiIsImZpcnN0Qnl0ZSIsImNvZGVQb2ludCIsImJ5dGVzUGVyU2VxdWVuY2UiLCJzZWNvbmRCeXRlIiwidGhpcmRCeXRlIiwiZm91cnRoQnl0ZSIsInRlbXBDb2RlUG9pbnQiLCJkZWNvZGVDb2RlUG9pbnRzQXJyYXkiLCJjb2RlUG9pbnRzIiwiTUFYX0FSR1VNRU5UU19MRU5HVEgiLCJmcm9tQ2hhckNvZGUiLCJvdXQiLCJ0b0hleCIsImNoZWNrT2Zmc2V0IiwiZXh0IiwiY2hlY2tJbnQiLCJtYXgiLCJvYmplY3RXcml0ZVVJbnQxNiIsImxpdHRsZUVuZGlhbiIsImoiLCJvYmplY3RXcml0ZVVJbnQzMiIsImNoZWNrSUVFRTc1NCIsIndyaXRlRmxvYXQiLCJub0Fzc2VydCIsImllZWU3NTQiLCJ3cml0ZURvdWJsZSIsImJhc2U2NGNsZWFuIiwic3RyaW5ndHJpbSIsIklOVkFMSURfQkFTRTY0X1JFIiwibiIsInVuaXRzIiwibGVhZFN1cnJvZ2F0ZSIsImNoYXJDb2RlQXQiLCJieXRlQXJyYXkiLCJoaSIsImxvIiwidG9CeXRlQXJyYXkiLCJzcmMiLCJkc3QiLCJJTlNQRUNUX01BWF9CWVRFUyIsImNvbXBhcmUiLCJ4IiwieSIsImlzRW5jb2RpbmciLCJwb3MiLCJpdGVtIiwiZXF1YWxzIiwiYnl0ZU9mZnNldCIsImFycmF5SW5kZXhPZiIsImZvdW5kSW5kZXgiLCJyZWFkVUludDgiLCJ2Iiwid3JpdGVVSW50OCIsImlzRmluaXRlIiwic3dhcCIsIl9hcnIiLCJuZXdCdWYiLCJzbGljZUxlbiIsInJlYWRVSW50TEUiLCJtdWwiLCJyZWFkVUludEJFIiwicmVhZFVJbnQxNkxFIiwicmVhZFVJbnQxNkJFIiwicmVhZFVJbnQzMkxFIiwicmVhZFVJbnQzMkJFIiwicmVhZEludExFIiwicG93IiwicmVhZEludEJFIiwicmVhZEludDgiLCJyZWFkSW50MTZMRSIsInJlYWRJbnQxNkJFIiwicmVhZEludDMyTEUiLCJyZWFkSW50MzJCRSIsInJlYWRGbG9hdExFIiwicmVhZCIsInJlYWRGbG9hdEJFIiwicmVhZERvdWJsZUxFIiwicmVhZERvdWJsZUJFIiwid3JpdGVVSW50TEUiLCJ3cml0ZVVJbnRCRSIsIndyaXRlVUludDE2TEUiLCJ3cml0ZVVJbnQxNkJFIiwid3JpdGVVSW50MzJMRSIsIndyaXRlVUludDMyQkUiLCJ3cml0ZUludExFIiwibGltaXQiLCJzdWIiLCJ3cml0ZUludEJFIiwid3JpdGVJbnQ4Iiwid3JpdGVJbnQxNkxFIiwid3JpdGVJbnQxNkJFIiwid3JpdGVJbnQzMkxFIiwid3JpdGVJbnQzMkJFIiwid3JpdGVGbG9hdExFIiwid3JpdGVGbG9hdEJFIiwid3JpdGVEb3VibGVMRSIsIndyaXRlRG91YmxlQkUiLCJ0YXJnZXQiLCJ0YXJnZXRTdGFydCIsIl9zZXQiLCJmaWxsIiwidG9BcnJheUJ1ZmZlciIsIkJQIiwidG9Mb2NhbGVTdHJpbmciLCJsb29rdXAiLCJlbHQiLCJjb2RlIiwiUExVUyIsIlBMVVNfVVJMX1NBRkUiLCJTTEFTSCIsIlNMQVNIX1VSTF9TQUZFIiwiTlVNQkVSIiwiVVBQRVIiLCJMT1dFUiIsImI2NFRvQnl0ZUFycmF5IiwiYjY0IiwiTCIsInRtcCIsInBsYWNlSG9sZGVycyIsIkFyciIsInVpbnQ4VG9CYXNlNjQiLCJ1aW50OCIsImVuY29kZSIsIm51bSIsInRyaXBsZXRUb0Jhc2U2NCIsImV4dHJhQnl0ZXMiLCJ0ZW1wIiwiYmFzZTY0anMiLCJpc0xFIiwibUxlbiIsIm5CeXRlcyIsImVMZW4iLCJlTWF4IiwiZUJpYXMiLCJuQml0cyIsInMiLCJOYU4iLCJydCIsImFicyIsIkxOMiIsInBhdGgiLCJpbmZvIiwicGFyc2VQYXRoIiwicGFydHMiLCJtQXJyIiwicGFyc2VGbG9hdCIsIl9nZXRQYXRoVmFsdWUiLCJwYXJ0IiwibGFzdCIsImV4aXN0cyIsImxpdGVyYWxzIiwib3QiLCJnZXR0ZXIiLCJvbGRfc3NmaSIsImNvbmZpZ3VyYWJsZSIsIl9nZXQiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJfc3VwZXIiLCJfbWV0aG9kIiwiaGFzUHJvdG9TdXBwb3J0IiwiZXhjbHVkZU5hbWVzIiwiY2hhaW5pbmdCZWhhdmlvciIsImNoYWluYWJsZUJlaGF2aW9yIiwiX19tZXRob2RzIiwiYXNzZXJ0ZXJOYW1lcyIsImFzc2VydGVyTmFtZSIsInBkIiwiX2NoYWluaW5nQmVoYXZpb3IiLCJBc3NlcnRpb24iLCJ3YXJuIiwibmVnYXRlTXNnIiwiX2FjdHVhbCIsImNoYWkiLCJfIiwiYW4iLCJhcnRpY2xlIiwiaW5jbHVkZUNoYWluaW5nQmVoYXZpb3IiLCJpbmNsdWRlIiwiayIsInN1YnNldCIsImNoZWNrQXJndW1lbnRzIiwiYXNzZXJ0RXF1YWwiLCJhc3NlcnRFcWwiLCJhc3NlcnRBYm92ZSIsInRvIiwiaGF2ZSIsImFzc2VydExlYXN0IiwiYXNzZXJ0QmVsb3ciLCJhc3NlcnRNb3N0IiwiYXNzZXJ0SW5zdGFuY2VPZiIsImFzc2VydE93blByb3BlcnR5IiwiYXNzZXJ0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZGVzY3JpcHRvciIsImFjdHVhbERlc2NyaXB0b3IiLCJhc3NlcnRMZW5ndGhDaGFpbiIsImFzc2VydExlbmd0aCIsImFzc2VydE1hdGNoIiwiYXNzZXJ0S2V5cyIsIm1peGVkQXJnc01zZyIsImFueSIsImFsbCIsImludGVyc2VjdGlvbiIsImZpbHRlciIsImV2ZXJ5IiwiYXNzZXJ0VGhyb3dzIiwiZXJyTXNnIiwiaXMiLCJ0aHJvd24iLCJkZXNpcmVkRXJyb3IiLCJ0aHJvd25FcnJvciIsImFjdHVhbGx5R290IiwiZXhwZWN0ZWRUaHJvd24iLCJyZXNwb25kVG8iLCJpdHNlbGYiLCJjb250ZXh0Iiwic2F0aXNmeSIsIm1hdGNoZXIiLCJjbG9zZVRvIiwiZGVsdGEiLCJpc1N1YnNldE9mIiwic3VwZXJzZXQiLCJjbXAiLCJlbGVtIiwiZWxlbTIiLCJvbmVPZiIsImFzc2VydENoYW5nZXMiLCJwcm9wIiwiaW5pdGlhbCIsImFzc2VydEluY3JlYXNlcyIsImFzc2VydERlY3JlYXNlcyIsImNoYWluIiwiZmluaXNoIiwicmFuZ2UiLCJpc0RlZXAiLCJwYXRoSW5mbyIsImlzRXh0ZW5zaWJsZSIsImlzU2VhbGVkIiwiaXNGcm96ZW4iLCJmYWlsIiwib3BlcmF0b3IiLCJsb2FkU2hvdWxkIiwic2hvdWxkR2V0dGVyIiwiQm9vbGVhbiIsInZhbHVlT2YiLCJzaG91bGRTZXR0ZXIiLCJ3cml0YWJsZSIsImVxdWFsIiwidmFsMSIsInZhbDIiLCJUaHJvdyIsImVycnQiLCJlcnJzIiwiZXhpc3QiLCJub3QiLCJTaG91bGQiLCJleHByZXNzIiwiZXJybXNnIiwiaXNPayIsImlzTm90T2siLCJhY3QiLCJleHAiLCJub3RFcXVhbCIsInN0cmljdEVxdWFsIiwibm90U3RyaWN0RXF1YWwiLCJub3REZWVwRXF1YWwiLCJpc0Fib3ZlIiwiYWJ2IiwiYWJvdmUiLCJpc0F0TGVhc3QiLCJhdGxzdCIsImxlYXN0IiwiaXNCZWxvdyIsImJsdyIsImJlbG93IiwiaXNBdE1vc3QiLCJhdG1zdCIsIm1vc3QiLCJpc1RydWUiLCJpc05vdFRydWUiLCJpc0ZhbHNlIiwiaXNOb3RGYWxzZSIsImlzTnVsbCIsImlzTm90TnVsbCIsImlzTm90TmFOIiwiaXNVbmRlZmluZWQiLCJpc0RlZmluZWQiLCJpc0Z1bmN0aW9uIiwiaXNOb3RGdW5jdGlvbiIsImlzT2JqZWN0IiwiaXNOb3RPYmplY3QiLCJpc05vdEFycmF5IiwiaXNTdHJpbmciLCJpc05vdFN0cmluZyIsImlzTnVtYmVyIiwiaXNOb3ROdW1iZXIiLCJpc0Jvb2xlYW4iLCJpc05vdEJvb2xlYW4iLCJ0eXBlT2YiLCJub3RUeXBlT2YiLCJpbnN0YW5jZU9mIiwibm90SW5zdGFuY2VPZiIsImluYyIsIm5vdEluY2x1ZGUiLCJub3RNYXRjaCIsIm5vdFByb3BlcnR5IiwiZGVlcFByb3BlcnR5IiwiZGVlcCIsIm5vdERlZXBQcm9wZXJ0eSIsInByb3BlcnR5VmFsIiwicHJvcGVydHlOb3RWYWwiLCJkZWVwUHJvcGVydHlWYWwiLCJkZWVwUHJvcGVydHlOb3RWYWwiLCJsZW5ndGhPZiIsImFzc2VydEVyciIsImRvZXNOb3RUaHJvdyIsImFwcHJveGltYXRlbHkiLCJzYW1lTWVtYmVycyIsInNldDEiLCJzZXQyIiwic2FtZSIsIm1lbWJlcnMiLCJzYW1lRGVlcE1lbWJlcnMiLCJpbmNsdWRlTWVtYmVycyIsImluTGlzdCIsImNoYW5nZXMiLCJjaGFuZ2UiLCJkb2VzTm90Q2hhbmdlIiwiaW5jcmVhc2VzIiwiaW5jcmVhc2UiLCJkb2VzTm90SW5jcmVhc2UiLCJkZWNyZWFzZXMiLCJkZWNyZWFzZSIsImRvZXNOb3REZWNyZWFzZSIsImlmRXJyb3IiLCJleHRlbnNpYmxlIiwiaXNOb3RFeHRlbnNpYmxlIiwic2VhbGVkIiwiaXNOb3RTZWFsZWQiLCJmcm96ZW4iLCJpc05vdEZyb3plbiIs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QUNBLEdBQUFnVixXQUFBamtCLElBQUFpUCxLQUFBZ1csR0FBQXFFLElBQUEvZSxHQUFBa2tCLE9BbUJBbmpCLFFBQUFnZCxTQUFBLFNBQUF0b0IsSUFBQWlQLEtBQ0EsR0FBQWdWLFdBQUFqa0IsSUFBQWlQLEtBQUFnVyxHQUFBMWEsR0FBQW9rQixPQWlCQXJqQixRQUFBc2pCLFlBQUEsU0FBQTV1QixJQUFBaVAsS0FDQSxHQUFBZ1YsV0FBQWprQixJQUFBaVAsS0FBQWdXLEdBQUFxRSxJQUFBL2UsR0FBQW9rQixTQU9BLFFBQUFFLE9BQUF6MkIsS0FBQTAyQixJQUNBeGpCLE9BQUF3akIsSUFBQXhqQixPQUFBbFQsS0FDQSxPQUFBeTJCLFFBRUEsYUFDQSxtQkFDQSxrQkFDQSxrQkFDQSw2QkFDQSxtQ0FDQSxxQkFDQSwyQkFDQSxxQkFDQSw2QjlDOHJPTSxTQUFTLzNCLE9BQVFELFFBQVNILHFCQUUvQixZQUVBWSxRQUFPaUksZUFBZTFJLFFBQVMsY0FDN0I2QixNQUFPLE1BRVQ3QixTQUFROFQsVUFBWTlULFFBQVE0VCxPQUFTN0ssTUFFckMsSUFBSWlHLE9BQVFuUCxvQkFBb0IsRUFFaEMsSUFBSW1KLFFBQVNuSixvQkFBb0IsRStDanRSM0IsSUFBSStULFFBQU01VCxRQUFONFQsUUFBUyxFQUFBNUssT0FGWEMsU0FFcUIsdUNBQXlDLHNDQUNoRSxJQUFJNkssV0FBUzlULFFBQVQ4VCxXQUFZLEVBQUE5SyxPQUhkQyxTQUd3Qix1Q0FBeUMsd0MvQ3V0UnBFLFNBQVNoSixPQUFRRCxRQUFTSCxvQkFBcUJxNEIsd0NnRDN0UnJEajRCLE9BQUFELFFBQUFILG9CQUFBcTRCIiwiZmlsZSI6InRlc3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcbi8qKioqKiovIFx0XHRcdGlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGxvYWRlZDogZmFsc2Vcbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKChmdW5jdGlvbihtb2R1bGVzKSB7XG5cdC8vIENoZWNrIGFsbCBtb2R1bGVzIGZvciBkZWR1cGxpY2F0ZWQgbW9kdWxlc1xuXHRmb3IodmFyIGkgaW4gbW9kdWxlcykge1xuXHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2R1bGVzLCBpKSkge1xuXHRcdFx0c3dpdGNoKHR5cGVvZiBtb2R1bGVzW2ldKSB7XG5cdFx0XHRjYXNlIFwiZnVuY3Rpb25cIjogYnJlYWs7XG5cdFx0XHRjYXNlIFwib2JqZWN0XCI6XG5cdFx0XHRcdC8vIE1vZHVsZSBjYW4gYmUgY3JlYXRlZCBmcm9tIGEgdGVtcGxhdGVcblx0XHRcdFx0bW9kdWxlc1tpXSA9IChmdW5jdGlvbihfbSkge1xuXHRcdFx0XHRcdHZhciBhcmdzID0gX20uc2xpY2UoMSksIGZuID0gbW9kdWxlc1tfbVswXV07XG5cdFx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uIChhLGIsYykge1xuXHRcdFx0XHRcdFx0Zm4uYXBwbHkodGhpcywgW2EsYixjXS5jb25jYXQoYXJncykpO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH0obW9kdWxlc1tpXSkpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdC8vIE1vZHVsZSBpcyBhIGNvcHkgb2YgYW5vdGhlciBtb2R1bGVcblx0XHRcdFx0bW9kdWxlc1tpXSA9IG1vZHVsZXNbbW9kdWxlc1tpXV07XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRyZXR1cm4gbW9kdWxlcztcbn0oW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblxuLyoqKi8gfSxcbi8qIDEgKi8sXG4vKiAyICovLFxuLyogMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkgey8qKiogSU1QT1JUUyBGUk9NIGltcG9ydHMtbG9hZGVyICoqKi9cblx0KGZ1bmN0aW9uKCkge1xuXHRcblx0KGZ1bmN0aW9uKCkge1xuXHQgICd1c2Ugc3RyaWN0Jztcblx0XG5cdCAgaWYgKHNlbGYuZmV0Y2gpIHtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gbm9ybWFsaXplTmFtZShuYW1lKSB7XG5cdCAgICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIG5hbWUgPSBTdHJpbmcobmFtZSlcblx0ICAgIH1cblx0ICAgIGlmICgvW15hLXowLTlcXC0jJCUmJyorLlxcXl9gfH5dL2kudGVzdChuYW1lKSkge1xuXHQgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGNoYXJhY3RlciBpbiBoZWFkZXIgZmllbGQgbmFtZScpXG5cdCAgICB9XG5cdCAgICByZXR1cm4gbmFtZS50b0xvd2VyQ2FzZSgpXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBub3JtYWxpemVWYWx1ZSh2YWx1ZSkge1xuXHQgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcblx0ICAgICAgdmFsdWUgPSBTdHJpbmcodmFsdWUpXG5cdCAgICB9XG5cdCAgICByZXR1cm4gdmFsdWVcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIEhlYWRlcnMoaGVhZGVycykge1xuXHQgICAgdGhpcy5tYXAgPSB7fVxuXHRcblx0ICAgIGlmIChoZWFkZXJzIGluc3RhbmNlb2YgSGVhZGVycykge1xuXHQgICAgICBoZWFkZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcblx0ICAgICAgICB0aGlzLmFwcGVuZChuYW1lLCB2YWx1ZSlcblx0ICAgICAgfSwgdGhpcylcblx0XG5cdCAgICB9IGVsc2UgaWYgKGhlYWRlcnMpIHtcblx0ICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoaGVhZGVycykuZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XG5cdCAgICAgICAgdGhpcy5hcHBlbmQobmFtZSwgaGVhZGVyc1tuYW1lXSlcblx0ICAgICAgfSwgdGhpcylcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIEhlYWRlcnMucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG5cdCAgICBuYW1lID0gbm9ybWFsaXplTmFtZShuYW1lKVxuXHQgICAgdmFsdWUgPSBub3JtYWxpemVWYWx1ZSh2YWx1ZSlcblx0ICAgIHZhciBsaXN0ID0gdGhpcy5tYXBbbmFtZV1cblx0ICAgIGlmICghbGlzdCkge1xuXHQgICAgICBsaXN0ID0gW11cblx0ICAgICAgdGhpcy5tYXBbbmFtZV0gPSBsaXN0XG5cdCAgICB9XG5cdCAgICBsaXN0LnB1c2godmFsdWUpXG5cdCAgfVxuXHRcblx0ICBIZWFkZXJzLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBmdW5jdGlvbihuYW1lKSB7XG5cdCAgICBkZWxldGUgdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV1cblx0ICB9XG5cdFxuXHQgIEhlYWRlcnMucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKG5hbWUpIHtcblx0ICAgIHZhciB2YWx1ZXMgPSB0aGlzLm1hcFtub3JtYWxpemVOYW1lKG5hbWUpXVxuXHQgICAgcmV0dXJuIHZhbHVlcyA/IHZhbHVlc1swXSA6IG51bGxcblx0ICB9XG5cdFxuXHQgIEhlYWRlcnMucHJvdG90eXBlLmdldEFsbCA9IGZ1bmN0aW9uKG5hbWUpIHtcblx0ICAgIHJldHVybiB0aGlzLm1hcFtub3JtYWxpemVOYW1lKG5hbWUpXSB8fCBbXVxuXHQgIH1cblx0XG5cdCAgSGVhZGVycy5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24obmFtZSkge1xuXHQgICAgcmV0dXJuIHRoaXMubWFwLmhhc093blByb3BlcnR5KG5vcm1hbGl6ZU5hbWUobmFtZSkpXG5cdCAgfVxuXHRcblx0ICBIZWFkZXJzLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuXHQgICAgdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV0gPSBbbm9ybWFsaXplVmFsdWUodmFsdWUpXVxuXHQgIH1cblx0XG5cdCAgSGVhZGVycy5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uKGNhbGxiYWNrLCB0aGlzQXJnKSB7XG5cdCAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0aGlzLm1hcCkuZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XG5cdCAgICAgIHRoaXMubWFwW25hbWVdLmZvckVhY2goZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIHZhbHVlLCBuYW1lLCB0aGlzKVxuXHQgICAgICB9LCB0aGlzKVxuXHQgICAgfSwgdGhpcylcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGNvbnN1bWVkKGJvZHkpIHtcblx0ICAgIGlmIChib2R5LmJvZHlVc2VkKSB7XG5cdCAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgVHlwZUVycm9yKCdBbHJlYWR5IHJlYWQnKSlcblx0ICAgIH1cblx0ICAgIGJvZHkuYm9keVVzZWQgPSB0cnVlXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKSB7XG5cdCAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdCAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZXNvbHZlKHJlYWRlci5yZXN1bHQpXG5cdCAgICAgIH1cblx0ICAgICAgcmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZWplY3QocmVhZGVyLmVycm9yKVxuXHQgICAgICB9XG5cdCAgICB9KVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcmVhZEJsb2JBc0FycmF5QnVmZmVyKGJsb2IpIHtcblx0ICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpXG5cdCAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoYmxvYilcblx0ICAgIHJldHVybiBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcmVhZEJsb2JBc1RleHQoYmxvYikge1xuXHQgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKClcblx0ICAgIHJlYWRlci5yZWFkQXNUZXh0KGJsb2IpXG5cdCAgICByZXR1cm4gZmlsZVJlYWRlclJlYWR5KHJlYWRlcilcblx0ICB9XG5cdFxuXHQgIHZhciBzdXBwb3J0ID0ge1xuXHQgICAgYmxvYjogJ0ZpbGVSZWFkZXInIGluIHNlbGYgJiYgJ0Jsb2InIGluIHNlbGYgJiYgKGZ1bmN0aW9uKCkge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIG5ldyBCbG9iKCk7XG5cdCAgICAgICAgcmV0dXJuIHRydWVcblx0ICAgICAgfSBjYXRjaChlKSB7XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlXG5cdCAgICAgIH1cblx0ICAgIH0pKCksXG5cdCAgICBmb3JtRGF0YTogJ0Zvcm1EYXRhJyBpbiBzZWxmLFxuXHQgICAgYXJyYXlCdWZmZXI6ICdBcnJheUJ1ZmZlcicgaW4gc2VsZlxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gQm9keSgpIHtcblx0ICAgIHRoaXMuYm9keVVzZWQgPSBmYWxzZVxuXHRcblx0XG5cdCAgICB0aGlzLl9pbml0Qm9keSA9IGZ1bmN0aW9uKGJvZHkpIHtcblx0ICAgICAgdGhpcy5fYm9keUluaXQgPSBib2R5XG5cdCAgICAgIGlmICh0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICB0aGlzLl9ib2R5VGV4dCA9IGJvZHlcblx0ICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmJsb2IgJiYgQmxvYi5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuXHQgICAgICAgIHRoaXMuX2JvZHlCbG9iID0gYm9keVxuXHQgICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuZm9ybURhdGEgJiYgRm9ybURhdGEucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcblx0ICAgICAgICB0aGlzLl9ib2R5Rm9ybURhdGEgPSBib2R5XG5cdCAgICAgIH0gZWxzZSBpZiAoIWJvZHkpIHtcblx0ICAgICAgICB0aGlzLl9ib2R5VGV4dCA9ICcnXG5cdCAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5hcnJheUJ1ZmZlciAmJiBBcnJheUJ1ZmZlci5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuXHQgICAgICAgIC8vIE9ubHkgc3VwcG9ydCBBcnJheUJ1ZmZlcnMgZm9yIFBPU1QgbWV0aG9kLlxuXHQgICAgICAgIC8vIFJlY2VpdmluZyBBcnJheUJ1ZmZlcnMgaGFwcGVucyB2aWEgQmxvYnMsIGluc3RlYWQuXG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bnN1cHBvcnRlZCBCb2R5SW5pdCB0eXBlJylcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGlmIChzdXBwb3J0LmJsb2IpIHtcblx0ICAgICAgdGhpcy5ibG9iID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIHJlamVjdGVkID0gY29uc3VtZWQodGhpcylcblx0ICAgICAgICBpZiAocmVqZWN0ZWQpIHtcblx0ICAgICAgICAgIHJldHVybiByZWplY3RlZFxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKHRoaXMuX2JvZHlCbG9iKSB7XG5cdCAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlCbG9iKVxuXHQgICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUZvcm1EYXRhKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCByZWFkIEZvcm1EYXRhIGJvZHkgYXMgYmxvYicpXG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEJsb2IoW3RoaXMuX2JvZHlUZXh0XSkpXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLmFycmF5QnVmZmVyID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuYmxvYigpLnRoZW4ocmVhZEJsb2JBc0FycmF5QnVmZmVyKVxuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLnRleHQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgcmVqZWN0ZWQgPSBjb25zdW1lZCh0aGlzKVxuXHQgICAgICAgIGlmIChyZWplY3RlZCkge1xuXHQgICAgICAgICAgcmV0dXJuIHJlamVjdGVkXG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAodGhpcy5fYm9keUJsb2IpIHtcblx0ICAgICAgICAgIHJldHVybiByZWFkQmxvYkFzVGV4dCh0aGlzLl9ib2R5QmxvYilcblx0ICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlGb3JtRGF0YSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgcmVhZCBGb3JtRGF0YSBib2R5IGFzIHRleHQnKVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlUZXh0KVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy50ZXh0ID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIHJlamVjdGVkID0gY29uc3VtZWQodGhpcylcblx0ICAgICAgICByZXR1cm4gcmVqZWN0ZWQgPyByZWplY3RlZCA6IFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5VGV4dClcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGlmIChzdXBwb3J0LmZvcm1EYXRhKSB7XG5cdCAgICAgIHRoaXMuZm9ybURhdGEgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy50ZXh0KCkudGhlbihkZWNvZGUpXG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLmpzb24gPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oSlNPTi5wYXJzZSlcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gdGhpc1xuXHQgIH1cblx0XG5cdCAgLy8gSFRUUCBtZXRob2RzIHdob3NlIGNhcGl0YWxpemF0aW9uIHNob3VsZCBiZSBub3JtYWxpemVkXG5cdCAgdmFyIG1ldGhvZHMgPSBbJ0RFTEVURScsICdHRVQnLCAnSEVBRCcsICdPUFRJT05TJywgJ1BPU1QnLCAnUFVUJ11cblx0XG5cdCAgZnVuY3Rpb24gbm9ybWFsaXplTWV0aG9kKG1ldGhvZCkge1xuXHQgICAgdmFyIHVwY2FzZWQgPSBtZXRob2QudG9VcHBlckNhc2UoKVxuXHQgICAgcmV0dXJuIChtZXRob2RzLmluZGV4T2YodXBjYXNlZCkgPiAtMSkgPyB1cGNhc2VkIDogbWV0aG9kXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBSZXF1ZXN0KGlucHV0LCBvcHRpb25zKSB7XG5cdCAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuXHQgICAgdmFyIGJvZHkgPSBvcHRpb25zLmJvZHlcblx0ICAgIGlmIChSZXF1ZXN0LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGlucHV0KSkge1xuXHQgICAgICBpZiAoaW5wdXQuYm9keVVzZWQpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBbHJlYWR5IHJlYWQnKVxuXHQgICAgICB9XG5cdCAgICAgIHRoaXMudXJsID0gaW5wdXQudXJsXG5cdCAgICAgIHRoaXMuY3JlZGVudGlhbHMgPSBpbnB1dC5jcmVkZW50aWFsc1xuXHQgICAgICBpZiAoIW9wdGlvbnMuaGVhZGVycykge1xuXHQgICAgICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKGlucHV0LmhlYWRlcnMpXG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5tZXRob2QgPSBpbnB1dC5tZXRob2Rcblx0ICAgICAgdGhpcy5tb2RlID0gaW5wdXQubW9kZVxuXHQgICAgICBpZiAoIWJvZHkpIHtcblx0ICAgICAgICBib2R5ID0gaW5wdXQuX2JvZHlJbml0XG5cdCAgICAgICAgaW5wdXQuYm9keVVzZWQgPSB0cnVlXG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMudXJsID0gaW5wdXRcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLmNyZWRlbnRpYWxzID0gb3B0aW9ucy5jcmVkZW50aWFscyB8fCB0aGlzLmNyZWRlbnRpYWxzIHx8ICdvbWl0J1xuXHQgICAgaWYgKG9wdGlvbnMuaGVhZGVycyB8fCAhdGhpcy5oZWFkZXJzKSB7XG5cdCAgICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycylcblx0ICAgIH1cblx0ICAgIHRoaXMubWV0aG9kID0gbm9ybWFsaXplTWV0aG9kKG9wdGlvbnMubWV0aG9kIHx8IHRoaXMubWV0aG9kIHx8ICdHRVQnKVxuXHQgICAgdGhpcy5tb2RlID0gb3B0aW9ucy5tb2RlIHx8IHRoaXMubW9kZSB8fCBudWxsXG5cdCAgICB0aGlzLnJlZmVycmVyID0gbnVsbFxuXHRcblx0ICAgIGlmICgodGhpcy5tZXRob2QgPT09ICdHRVQnIHx8IHRoaXMubWV0aG9kID09PSAnSEVBRCcpICYmIGJvZHkpIHtcblx0ICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQm9keSBub3QgYWxsb3dlZCBmb3IgR0VUIG9yIEhFQUQgcmVxdWVzdHMnKVxuXHQgICAgfVxuXHQgICAgdGhpcy5faW5pdEJvZHkoYm9keSlcblx0ICB9XG5cdFxuXHQgIFJlcXVlc3QucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG5cdCAgICByZXR1cm4gbmV3IFJlcXVlc3QodGhpcylcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGRlY29kZShib2R5KSB7XG5cdCAgICB2YXIgZm9ybSA9IG5ldyBGb3JtRGF0YSgpXG5cdCAgICBib2R5LnRyaW0oKS5zcGxpdCgnJicpLmZvckVhY2goZnVuY3Rpb24oYnl0ZXMpIHtcblx0ICAgICAgaWYgKGJ5dGVzKSB7XG5cdCAgICAgICAgdmFyIHNwbGl0ID0gYnl0ZXMuc3BsaXQoJz0nKVxuXHQgICAgICAgIHZhciBuYW1lID0gc3BsaXQuc2hpZnQoKS5yZXBsYWNlKC9cXCsvZywgJyAnKVxuXHQgICAgICAgIHZhciB2YWx1ZSA9IHNwbGl0LmpvaW4oJz0nKS5yZXBsYWNlKC9cXCsvZywgJyAnKVxuXHQgICAgICAgIGZvcm0uYXBwZW5kKGRlY29kZVVSSUNvbXBvbmVudChuYW1lKSwgZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKSlcblx0ICAgICAgfVxuXHQgICAgfSlcblx0ICAgIHJldHVybiBmb3JtXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBoZWFkZXJzKHhocikge1xuXHQgICAgdmFyIGhlYWQgPSBuZXcgSGVhZGVycygpXG5cdCAgICB2YXIgcGFpcnMgPSB4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkudHJpbSgpLnNwbGl0KCdcXG4nKVxuXHQgICAgcGFpcnMuZm9yRWFjaChmdW5jdGlvbihoZWFkZXIpIHtcblx0ICAgICAgdmFyIHNwbGl0ID0gaGVhZGVyLnRyaW0oKS5zcGxpdCgnOicpXG5cdCAgICAgIHZhciBrZXkgPSBzcGxpdC5zaGlmdCgpLnRyaW0oKVxuXHQgICAgICB2YXIgdmFsdWUgPSBzcGxpdC5qb2luKCc6JykudHJpbSgpXG5cdCAgICAgIGhlYWQuYXBwZW5kKGtleSwgdmFsdWUpXG5cdCAgICB9KVxuXHQgICAgcmV0dXJuIGhlYWRcblx0ICB9XG5cdFxuXHQgIEJvZHkuY2FsbChSZXF1ZXN0LnByb3RvdHlwZSlcblx0XG5cdCAgZnVuY3Rpb24gUmVzcG9uc2UoYm9keUluaXQsIG9wdGlvbnMpIHtcblx0ICAgIGlmICghb3B0aW9ucykge1xuXHQgICAgICBvcHRpb25zID0ge31cblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLl9pbml0Qm9keShib2R5SW5pdClcblx0ICAgIHRoaXMudHlwZSA9ICdkZWZhdWx0J1xuXHQgICAgdGhpcy5zdGF0dXMgPSBvcHRpb25zLnN0YXR1c1xuXHQgICAgdGhpcy5vayA9IHRoaXMuc3RhdHVzID49IDIwMCAmJiB0aGlzLnN0YXR1cyA8IDMwMFxuXHQgICAgdGhpcy5zdGF0dXNUZXh0ID0gb3B0aW9ucy5zdGF0dXNUZXh0XG5cdCAgICB0aGlzLmhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnMgaW5zdGFuY2VvZiBIZWFkZXJzID8gb3B0aW9ucy5oZWFkZXJzIDogbmV3IEhlYWRlcnMob3B0aW9ucy5oZWFkZXJzKVxuXHQgICAgdGhpcy51cmwgPSBvcHRpb25zLnVybCB8fCAnJ1xuXHQgIH1cblx0XG5cdCAgQm9keS5jYWxsKFJlc3BvbnNlLnByb3RvdHlwZSlcblx0XG5cdCAgUmVzcG9uc2UucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG5cdCAgICByZXR1cm4gbmV3IFJlc3BvbnNlKHRoaXMuX2JvZHlJbml0LCB7XG5cdCAgICAgIHN0YXR1czogdGhpcy5zdGF0dXMsXG5cdCAgICAgIHN0YXR1c1RleHQ6IHRoaXMuc3RhdHVzVGV4dCxcblx0ICAgICAgaGVhZGVyczogbmV3IEhlYWRlcnModGhpcy5oZWFkZXJzKSxcblx0ICAgICAgdXJsOiB0aGlzLnVybFxuXHQgICAgfSlcblx0ICB9XG5cdFxuXHQgIFJlc3BvbnNlLmVycm9yID0gZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgcmVzcG9uc2UgPSBuZXcgUmVzcG9uc2UobnVsbCwge3N0YXR1czogMCwgc3RhdHVzVGV4dDogJyd9KVxuXHQgICAgcmVzcG9uc2UudHlwZSA9ICdlcnJvcidcblx0ICAgIHJldHVybiByZXNwb25zZVxuXHQgIH1cblx0XG5cdCAgdmFyIHJlZGlyZWN0U3RhdHVzZXMgPSBbMzAxLCAzMDIsIDMwMywgMzA3LCAzMDhdXG5cdFxuXHQgIFJlc3BvbnNlLnJlZGlyZWN0ID0gZnVuY3Rpb24odXJsLCBzdGF0dXMpIHtcblx0ICAgIGlmIChyZWRpcmVjdFN0YXR1c2VzLmluZGV4T2Yoc3RhdHVzKSA9PT0gLTEpIHtcblx0ICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0ludmFsaWQgc3RhdHVzIGNvZGUnKVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBuZXcgUmVzcG9uc2UobnVsbCwge3N0YXR1czogc3RhdHVzLCBoZWFkZXJzOiB7bG9jYXRpb246IHVybH19KVxuXHQgIH1cblx0XG5cdCAgc2VsZi5IZWFkZXJzID0gSGVhZGVycztcblx0ICBzZWxmLlJlcXVlc3QgPSBSZXF1ZXN0O1xuXHQgIHNlbGYuUmVzcG9uc2UgPSBSZXNwb25zZTtcblx0XG5cdCAgc2VsZi5mZXRjaCA9IGZ1bmN0aW9uKGlucHV0LCBpbml0KSB7XG5cdCAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdCAgICAgIHZhciByZXF1ZXN0XG5cdCAgICAgIGlmIChSZXF1ZXN0LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGlucHV0KSAmJiAhaW5pdCkge1xuXHQgICAgICAgIHJlcXVlc3QgPSBpbnB1dFxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJlcXVlc3QgPSBuZXcgUmVxdWVzdChpbnB1dCwgaW5pdClcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpXG5cdFxuXHQgICAgICBmdW5jdGlvbiByZXNwb25zZVVSTCgpIHtcblx0ICAgICAgICBpZiAoJ3Jlc3BvbnNlVVJMJyBpbiB4aHIpIHtcblx0ICAgICAgICAgIHJldHVybiB4aHIucmVzcG9uc2VVUkxcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIEF2b2lkIHNlY3VyaXR5IHdhcm5pbmdzIG9uIGdldFJlc3BvbnNlSGVhZGVyIHdoZW4gbm90IGFsbG93ZWQgYnkgQ09SU1xuXHQgICAgICAgIGlmICgvXlgtUmVxdWVzdC1VUkw6L20udGVzdCh4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpKSB7XG5cdCAgICAgICAgICByZXR1cm4geGhyLmdldFJlc3BvbnNlSGVhZGVyKCdYLVJlcXVlc3QtVVJMJylcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHZhciBzdGF0dXMgPSAoeGhyLnN0YXR1cyA9PT0gMTIyMykgPyAyMDQgOiB4aHIuc3RhdHVzXG5cdCAgICAgICAgaWYgKHN0YXR1cyA8IDEwMCB8fCBzdGF0dXMgPiA1OTkpIHtcblx0ICAgICAgICAgIHJlamVjdChuZXcgVHlwZUVycm9yKCdOZXR3b3JrIHJlcXVlc3QgZmFpbGVkJykpXG5cdCAgICAgICAgICByZXR1cm5cblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG5cdCAgICAgICAgICBzdGF0dXM6IHN0YXR1cyxcblx0ICAgICAgICAgIHN0YXR1c1RleHQ6IHhoci5zdGF0dXNUZXh0LFxuXHQgICAgICAgICAgaGVhZGVyczogaGVhZGVycyh4aHIpLFxuXHQgICAgICAgICAgdXJsOiByZXNwb25zZVVSTCgpXG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBib2R5ID0gJ3Jlc3BvbnNlJyBpbiB4aHIgPyB4aHIucmVzcG9uc2UgOiB4aHIucmVzcG9uc2VUZXh0O1xuXHQgICAgICAgIHJlc29sdmUobmV3IFJlc3BvbnNlKGJvZHksIG9wdGlvbnMpKVxuXHQgICAgICB9XG5cdFxuXHQgICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHJlamVjdChuZXcgVHlwZUVycm9yKCdOZXR3b3JrIHJlcXVlc3QgZmFpbGVkJykpXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHhoci5vcGVuKHJlcXVlc3QubWV0aG9kLCByZXF1ZXN0LnVybCwgdHJ1ZSlcblx0XG5cdCAgICAgIGlmIChyZXF1ZXN0LmNyZWRlbnRpYWxzID09PSAnaW5jbHVkZScpIHtcblx0ICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZVxuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoJ3Jlc3BvbnNlVHlwZScgaW4geGhyICYmIHN1cHBvcnQuYmxvYikge1xuXHQgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYmxvYidcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmVxdWVzdC5oZWFkZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcblx0ICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihuYW1lLCB2YWx1ZSlcblx0ICAgICAgfSlcblx0XG5cdCAgICAgIHhoci5zZW5kKHR5cGVvZiByZXF1ZXN0Ll9ib2R5SW5pdCA9PT0gJ3VuZGVmaW5lZCcgPyBudWxsIDogcmVxdWVzdC5fYm9keUluaXQpXG5cdCAgICB9KVxuXHQgIH1cblx0ICBzZWxmLmZldGNoLnBvbHlmaWxsID0gdHJ1ZVxuXHR9KSgpO1xuXHRcblx0XG5cdC8qKiogRVhQT1JUUyBGUk9NIGV4cG9ydHMtbG9hZGVyICoqKi9cblx0bW9kdWxlLmV4cG9ydHMgPSBnbG9iYWwuZmV0Y2hcblx0fS5jYWxsKGdsb2JhbCkpO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSkpXG5cbi8qKiovIH0sXG4vKiA0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5BUElfVVJMID0gZXhwb3J0cy5IT1NUX1VSTCA9IGV4cG9ydHMuUFJPRF9IT1NUID0gZXhwb3J0cy5ERVZfSE9TVCA9IHVuZGVmaW5lZDtcblx0XG5cdHZhciBfdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHRcblx0dmFyIERFVl9IT1NUID0gZXhwb3J0cy5ERVZfSE9TVCA9ICdodHRwczovLzE5Mi4xNjguMS4yMDY6MzAwMCc7XG5cdHZhciBQUk9EX0hPU1QgPSBleHBvcnRzLlBST0RfSE9TVCA9ICdodHRwczovL29uZXNpZ25hbC5jb20nO1xuXHR2YXIgSE9TVF9VUkwgPSBleHBvcnRzLkhPU1RfVVJMID0gKDAsIF91dGlscy5pc0RldikoKSA/IERFVl9IT1NUIDogUFJPRF9IT1NUO1xuXHR2YXIgQVBJX1VSTCA9IGV4cG9ydHMuQVBJX1VSTCA9ICgoMCwgX3V0aWxzLmlzRGV2KSgpID8gREVWX0hPU1QgOiBQUk9EX0hPU1QpICsgJy9hcGkvdjEvJztcblx0XG5cdC8vIOKsuCDipJFcblxuLyoqKi8gfSxcbi8qIDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmlzQXJyYXkgPSBpc0FycmF5O1xuXHRleHBvcnRzLmdldEh1bWFuaXplZFRpbWVEdXJhdGlvbiA9IGdldEh1bWFuaXplZFRpbWVEdXJhdGlvbjtcblx0ZXhwb3J0cy5pc0RldiA9IGlzRGV2O1xuXHRleHBvcnRzLmlzUHVzaE5vdGlmaWNhdGlvbnNTdXBwb3J0ZWQgPSBpc1B1c2hOb3RpZmljYXRpb25zU3VwcG9ydGVkO1xuXHRleHBvcnRzLmlzQnJvd3NlclNhZmFyaSA9IGlzQnJvd3NlclNhZmFyaTtcblx0ZXhwb3J0cy5pc1N1cHBvcnRlZEZpcmVGb3ggPSBpc1N1cHBvcnRlZEZpcmVGb3g7XG5cdGV4cG9ydHMuaXNCcm93c2VyRmlyZWZveCA9IGlzQnJvd3NlckZpcmVmb3g7XG5cdGV4cG9ydHMuZ2V0RmlyZWZveFZlcnNpb24gPSBnZXRGaXJlZm94VmVyc2lvbjtcblx0ZXhwb3J0cy5pc1N1cHBvcnRlZFNhZmFyaSA9IGlzU3VwcG9ydGVkU2FmYXJpO1xuXHRleHBvcnRzLnJlbW92ZURvbUVsZW1lbnQgPSByZW1vdmVEb21FbGVtZW50O1xuXHRleHBvcnRzLmFkZERvbUVsZW1lbnQgPSBhZGREb21FbGVtZW50O1xuXHRleHBvcnRzLmNsZWFyRG9tRWxlbWVudENoaWxkcmVuID0gY2xlYXJEb21FbGVtZW50Q2hpbGRyZW47XG5cdGV4cG9ydHMuYWRkQ3NzQ2xhc3MgPSBhZGRDc3NDbGFzcztcblx0ZXhwb3J0cy5yZW1vdmVDc3NDbGFzcyA9IHJlbW92ZUNzc0NsYXNzO1xuXHRleHBvcnRzLmhhc0Nzc0NsYXNzID0gaGFzQ3NzQ2xhc3M7XG5cdGV4cG9ydHMub24gPSBvbjtcblx0ZXhwb3J0cy5vbmNlID0gb25jZTtcblx0ZXhwb3J0cy5vZmYgPSBvZmY7XG5cdGV4cG9ydHMuZ2V0Q29uc29sZVN0eWxlID0gZ2V0Q29uc29sZVN0eWxlO1xuXHRleHBvcnRzLmRlbGF5ID0gZGVsYXk7XG5cdGV4cG9ydHMubm90aGluZyA9IG5vdGhpbmc7XG5cdGV4cG9ydHMud2hlbiA9IHdoZW47XG5cdFxuXHR2YXIgX2xvZ2xldmVsID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0XG5cdHZhciBfbG9nbGV2ZWwyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbG9nbGV2ZWwpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9XG5cdFxuXHRmdW5jdGlvbiBpc0FycmF5KHZhcmlhYmxlKSB7XG5cdCAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YXJpYWJsZSkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldEh1bWFuaXplZFRpbWVEdXJhdGlvbih0aW1lRHVyYXRpb25Jbk1pbGxpc2Vjb25kcykge1xuXHQgIGZ1bmN0aW9uIGFkZFBsdXJhbFN1ZmZpeChudW1iZXIpIHtcblx0ICAgIHJldHVybiBudW1iZXIgPiAxID8gJ3MnIDogJyc7XG5cdCAgfVxuXHQgIHZhciBkdXJhdGlvbiA9IE1hdGguZmxvb3IodGltZUR1cmF0aW9uSW5NaWxsaXNlY29uZHMgLyAxMDAwKTtcblx0XG5cdCAgdmFyIHllYXJzID0gTWF0aC5mbG9vcihkdXJhdGlvbiAvIDMxNTM2MDAwKTtcblx0ICBpZiAoeWVhcnMpIHJldHVybiB5ZWFycyArICcgeWVhcicgKyBhZGRQbHVyYWxTdWZmaXgoeWVhcnMpO1xuXHRcblx0ICB2YXIgZGF5cyA9IE1hdGguZmxvb3IoKGR1cmF0aW9uICU9IDMxNTM2MDAwKSAvIDg2NDAwKTtcblx0ICBpZiAoZGF5cykgcmV0dXJuIGRheXMgKyAnIGRheScgKyBhZGRQbHVyYWxTdWZmaXgoZGF5cyk7XG5cdFxuXHQgIHZhciBob3VycyA9IE1hdGguZmxvb3IoKGR1cmF0aW9uICU9IDg2NDAwKSAvIDM2MDApO1xuXHQgIGlmIChob3VycykgcmV0dXJuIGhvdXJzICsgJyBob3VyJyArIGFkZFBsdXJhbFN1ZmZpeChob3Vycyk7XG5cdFxuXHQgIHZhciBtaW51dGVzID0gTWF0aC5mbG9vcigoZHVyYXRpb24gJT0gMzYwMCkgLyA2MCk7XG5cdCAgaWYgKG1pbnV0ZXMpIHJldHVybiBtaW51dGVzICsgJyBtaW51dGUnICsgYWRkUGx1cmFsU3VmZml4KG1pbnV0ZXMpO1xuXHRcblx0ICB2YXIgc2Vjb25kcyA9IGR1cmF0aW9uICUgNjA7XG5cdCAgaWYgKHNlY29uZHMpIHJldHVybiBzZWNvbmRzICsgJyBzZWNvbmQnICsgYWRkUGx1cmFsU3VmZml4KHNlY29uZHMpO1xuXHRcblx0ICByZXR1cm4gJ2p1c3Qgbm93Jztcblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNEZXYoKSB7XG5cdCAgcmV0dXJuICh0cnVlKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNQdXNoTm90aWZpY2F0aW9uc1N1cHBvcnRlZCgpIHtcblx0ICB2YXIgY2hyb21lVmVyc2lvbiA9IG5hdmlnYXRvci5hcHBWZXJzaW9uLm1hdGNoKC9DaHJvbWVcXC8oLio/KSAvKTtcblx0XG5cdCAgaWYgKGlzU3VwcG9ydGVkRmlyZUZveCgpKSByZXR1cm4gdHJ1ZTtcblx0XG5cdCAgaWYgKGlzU3VwcG9ydGVkU2FmYXJpKCkpIHJldHVybiB0cnVlO1xuXHRcblx0ICAvLyBDaHJvbWUgaXMgbm90IGZvdW5kIGluIGFwcFZlcnNpb24uXG5cdCAgaWYgKCFjaHJvbWVWZXJzaW9uKSByZXR1cm4gZmFsc2U7XG5cdFxuXHQgIC8vIE1pY3Jvc29mdCBFZGdlXG5cdCAgaWYgKG5hdmlnYXRvci5hcHBWZXJzaW9uLm1hdGNoKC9FZGdlLykpIHJldHVybiBmYWxzZTtcblx0XG5cdCAgLy8gQW5kcm9pZCBDaHJvbWUgV2ViVmlld1xuXHQgIGlmIChuYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaCgvIHd2LykpIHJldHVybiBmYWxzZTtcblx0XG5cdCAgLy8gT3BlcmFcblx0ICBpZiAobmF2aWdhdG9yLmFwcFZlcnNpb24ubWF0Y2goL09QUlxcLy8pKSByZXR1cm4gZmFsc2U7XG5cdFxuXHQgIC8vIFRoZSB1c2VyIGlzIG9uIGlPU1xuXHQgIGlmICgvaVBhZHxpUGhvbmV8aVBvZC8udGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pKSByZXR1cm4gZmFsc2U7XG5cdFxuXHQgIHJldHVybiBwYXJzZUludChjaHJvbWVWZXJzaW9uWzFdLnN1YnN0cmluZygwLCAyKSkgPiA0MTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNCcm93c2VyU2FmYXJpKCkge1xuXHQgIHZhciBzYWZhcmlWZXJzaW9uID0gbmF2aWdhdG9yLmFwcFZlcnNpb24ubWF0Y2goXCJWZXJzaW9uLyhbMC05XT8pLiogU2FmYXJpXCIpO1xuXHQgIHJldHVybiBzYWZhcmlWZXJzaW9uICE9IG51bGw7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzU3VwcG9ydGVkRmlyZUZveCgpIHtcblx0ICB2YXIgZmlyZUZveFZlcnNpb24gPSBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC8oRmlyZWZveFxcLykoWzAtOV17Mix9XFwuWzAtOV17MSx9KS8pO1xuXHQgIGlmIChmaXJlRm94VmVyc2lvbikgcmV0dXJuIHBhcnNlSW50KGZpcmVGb3hWZXJzaW9uWzJdLnN1YnN0cmluZygwLCAyKSkgPiA0Mztcblx0ICByZXR1cm4gZmFsc2U7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzQnJvd3NlckZpcmVmb3goKSB7XG5cdCAgdmFyIGZpcmVGb3hWZXJzaW9uID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvKEZpcmVmb3hcXC8pKFswLTldezIsfVxcLlswLTldezEsfSkvKTtcblx0ICByZXR1cm4gZmlyZUZveFZlcnNpb24gIT0gbnVsbDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0RmlyZWZveFZlcnNpb24oKSB7XG5cdCAgdmFyIGZpcmVGb3hWZXJzaW9uID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvKEZpcmVmb3hcXC8pKFswLTldezIsfVxcLlswLTldezEsfSkvKTtcblx0ICBpZiAoZmlyZUZveFZlcnNpb24pIHJldHVybiBwYXJzZUludChmaXJlRm94VmVyc2lvblsyXS5zdWJzdHJpbmcoMCwgMikpO2Vsc2UgcmV0dXJuIC0xO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc1N1cHBvcnRlZFNhZmFyaSgpIHtcblx0ICB2YXIgc2FmYXJpVmVyc2lvbiA9IG5hdmlnYXRvci5hcHBWZXJzaW9uLm1hdGNoKFwiVmVyc2lvbi8oWzAtOV0/KS4qIFNhZmFyaVwiKTtcblx0ICBpZiAoc2FmYXJpVmVyc2lvbiA9PSBudWxsKSByZXR1cm4gZmFsc2U7XG5cdCAgaWYgKC9pUGhvbmV8aVBhZHxpUG9kL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkgcmV0dXJuIGZhbHNlO1xuXHQgIHJldHVybiBwYXJzZUludChzYWZhcmlWZXJzaW9uWzFdKSA+IDY7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlbW92ZURvbUVsZW1lbnQoc2VsZWN0b3IpIHtcblx0ICB2YXIgZWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG5cdCAgaWYgKGVscy5sZW5ndGggPiAwKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVscy5sZW5ndGg7IGkrKykge1xuXHQgICAgICBlbHNbaV0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbHNbaV0pO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRkRG9tRWxlbWVudCh0YXJnZXRTZWxlY3Rvck9yRWxlbWVudCwgYWRkT3JkZXIsIGVsZW1lbnRIdG1sKSB7XG5cdCAgaWYgKHR5cGVvZiB0YXJnZXRTZWxlY3Rvck9yRWxlbWVudCA9PT0gJ3N0cmluZycpIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQpLmluc2VydEFkamFjZW50SFRNTChhZGRPcmRlciwgZWxlbWVudEh0bWwpO2Vsc2UgaWYgKCh0eXBlb2YgdGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHRhcmdldFNlbGVjdG9yT3JFbGVtZW50KSkgPT09ICdvYmplY3QnKSB0YXJnZXRTZWxlY3Rvck9yRWxlbWVudC5pbnNlcnRBZGphY2VudEhUTUwoYWRkT3JkZXIsIGVsZW1lbnRIdG1sKTtlbHNlIHRocm93IG5ldyBFcnJvcih0YXJnZXRTZWxlY3Rvck9yRWxlbWVudCArICcgbXVzdCBiZSBhIENTUyBzZWxlY3RvciBzdHJpbmcgb3IgRE9NIEVsZW1lbnQgb2JqZWN0LicpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjbGVhckRvbUVsZW1lbnRDaGlsZHJlbih0YXJnZXRTZWxlY3Rvck9yRWxlbWVudCkge1xuXHQgIGlmICh0eXBlb2YgdGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQgPT09ICdzdHJpbmcnKSB7XG5cdCAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQpO1xuXHQgICAgd2hpbGUgKGVsZW1lbnQuZmlyc3RDaGlsZCkge1xuXHQgICAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQuZmlyc3RDaGlsZCk7XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmICgodHlwZW9mIHRhcmdldFNlbGVjdG9yT3JFbGVtZW50ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZih0YXJnZXRTZWxlY3Rvck9yRWxlbWVudCkpID09PSAnb2JqZWN0Jykge1xuXHQgICAgd2hpbGUgKHRhcmdldFNlbGVjdG9yT3JFbGVtZW50LmZpcnN0Q2hpbGQpIHtcblx0ICAgICAgdGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQucmVtb3ZlQ2hpbGQodGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQuZmlyc3RDaGlsZCk7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHRocm93IG5ldyBFcnJvcih0YXJnZXRTZWxlY3Rvck9yRWxlbWVudCArICcgbXVzdCBiZSBhIENTUyBzZWxlY3RvciBzdHJpbmcgb3IgRE9NIEVsZW1lbnQgb2JqZWN0LicpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZGRDc3NDbGFzcyh0YXJnZXRTZWxlY3Rvck9yRWxlbWVudCwgY3NzQ2xhc3MpIHtcblx0ICBpZiAodHlwZW9mIHRhcmdldFNlbGVjdG9yT3JFbGVtZW50ID09PSAnc3RyaW5nJykgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXRTZWxlY3Rvck9yRWxlbWVudCkuY2xhc3NMaXN0LmFkZChjc3NDbGFzcyk7ZWxzZSBpZiAoKHR5cGVvZiB0YXJnZXRTZWxlY3Rvck9yRWxlbWVudCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YodGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQpKSA9PT0gJ29iamVjdCcpIHRhcmdldFNlbGVjdG9yT3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoY3NzQ2xhc3MpO2Vsc2UgdGhyb3cgbmV3IEVycm9yKHRhcmdldFNlbGVjdG9yT3JFbGVtZW50ICsgJyBtdXN0IGJlIGEgQ1NTIHNlbGVjdG9yIHN0cmluZyBvciBET00gRWxlbWVudCBvYmplY3QuJyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlbW92ZUNzc0NsYXNzKHRhcmdldFNlbGVjdG9yT3JFbGVtZW50LCBjc3NDbGFzcykge1xuXHQgIGlmICh0eXBlb2YgdGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQgPT09ICdzdHJpbmcnKSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldFNlbGVjdG9yT3JFbGVtZW50KS5jbGFzc0xpc3QucmVtb3ZlKGNzc0NsYXNzKTtlbHNlIGlmICgodHlwZW9mIHRhcmdldFNlbGVjdG9yT3JFbGVtZW50ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZih0YXJnZXRTZWxlY3Rvck9yRWxlbWVudCkpID09PSAnb2JqZWN0JykgdGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjc3NDbGFzcyk7ZWxzZSB0aHJvdyBuZXcgRXJyb3IodGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQgKyAnIG11c3QgYmUgYSBDU1Mgc2VsZWN0b3Igc3RyaW5nIG9yIERPTSBFbGVtZW50IG9iamVjdC4nKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFzQ3NzQ2xhc3ModGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQsIGNzc0NsYXNzKSB7XG5cdCAgaWYgKHR5cGVvZiB0YXJnZXRTZWxlY3Rvck9yRWxlbWVudCA9PT0gJ3N0cmluZycpIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldFNlbGVjdG9yT3JFbGVtZW50KS5jbGFzc0xpc3QuY29udGFpbnMoY3NzQ2xhc3MpO2Vsc2UgaWYgKCh0eXBlb2YgdGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHRhcmdldFNlbGVjdG9yT3JFbGVtZW50KSkgPT09ICdvYmplY3QnKSByZXR1cm4gdGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNzc0NsYXNzKTtlbHNlIHRocm93IG5ldyBFcnJvcih0YXJnZXRTZWxlY3Rvck9yRWxlbWVudCArICcgbXVzdCBiZSBhIENTUyBzZWxlY3RvciBzdHJpbmcgb3IgRE9NIEVsZW1lbnQgb2JqZWN0LicpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBvbih0YXJnZXRTZWxlY3Rvck9yRWxlbWVudCwgZXZlbnQsIHRhc2spIHtcblx0ICBpZiAoIWV2ZW50KSB7XG5cdCAgICBfbG9nbGV2ZWwyLmRlZmF1bHQuZXJyb3IoJ0Nhbm5vdCBjYWxsIG9uKCkgd2l0aCBubyBldmVudDogJywgZXZlbnQpO1xuXHQgIH1cblx0ICBpZiAoIXRhc2spIHtcblx0ICAgIF9sb2dsZXZlbDIuZGVmYXVsdC5lcnJvcignQ2Fubm90IGNhbGwgb24oKSB3aXRoIG5vIHRhc2s6ICcsIHRhc2spO1xuXHQgIH1cblx0ICBfbG9nbGV2ZWwyLmRlZmF1bHQuZGVidWcoJ0RlYnVnIG1lIGhlcmUuJyk7XG5cdCAgaWYgKHR5cGVvZiB0YXJnZXRTZWxlY3Rvck9yRWxlbWVudCA9PT0gJ3N0cmluZycpIHtcblx0ICAgIHZhciBlbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcblx0ICAgIGlmIChlbHMubGVuZ3RoID4gMCkge1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVscy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIG9uKGVsc1tpXSwgdGFzayk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKGlzQXJyYXkodGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQpKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRhcmdldFNlbGVjdG9yT3JFbGVtZW50Lmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIG9uKHRhcmdldFNlbGVjdG9yT3JFbGVtZW50W2ldLCB0YXNrKTtcblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKCh0eXBlb2YgdGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHRhcmdldFNlbGVjdG9yT3JFbGVtZW50KSkgPT09ICdvYmplY3QnKSB0YXJnZXRTZWxlY3Rvck9yRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCB0YXNrKTtlbHNlIHRocm93IG5ldyBFcnJvcih0YXJnZXRTZWxlY3Rvck9yRWxlbWVudCArICcgbXVzdCBiZSBhIENTUyBzZWxlY3RvciBzdHJpbmcgb3IgRE9NIEVsZW1lbnQgb2JqZWN0LicpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBvbmNlKHRhcmdldFNlbGVjdG9yT3JFbGVtZW50LCBldmVudCwgdGFzaykge1xuXHQgIHZhciBtYW51YWxEZXN0cm95ID0gYXJndW1lbnRzLmxlbmd0aCA8PSAzIHx8IGFyZ3VtZW50c1szXSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBhcmd1bWVudHNbM107XG5cdFxuXHQgIGlmICghZXZlbnQpIHtcblx0ICAgIF9sb2dsZXZlbDIuZGVmYXVsdC5lcnJvcignQ2Fubm90IGNhbGwgb24oKSB3aXRoIG5vIGV2ZW50OiAnLCBldmVudCk7XG5cdCAgfVxuXHQgIGlmICghdGFzaykge1xuXHQgICAgX2xvZ2xldmVsMi5kZWZhdWx0LmVycm9yKCdDYW5ub3QgY2FsbCBvbigpIHdpdGggbm8gdGFzazogJywgdGFzayk7XG5cdCAgfVxuXHQgIGlmICh0eXBlb2YgdGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQgPT09ICdzdHJpbmcnKSB7XG5cdCAgICB2YXIgZWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG5cdCAgICBpZiAoZWxzLmxlbmd0aCA+IDApIHtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBvbmNlKGVsc1tpXSwgdGFzayk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKGlzQXJyYXkodGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQpKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRhcmdldFNlbGVjdG9yT3JFbGVtZW50Lmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIG9uY2UodGFyZ2V0U2VsZWN0b3JPckVsZW1lbnRbaV0sIHRhc2spO1xuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAoKHR5cGVvZiB0YXJnZXRTZWxlY3Rvck9yRWxlbWVudCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YodGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQpKSA9PT0gJ29iamVjdCcpIHtcblx0ICAgIHZhciB0YXNrV3JhcHBlciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBpbnRlcm5hbFRhc2tGdW5jdGlvbiA9IGZ1bmN0aW9uIGludGVybmFsVGFza0Z1bmN0aW9uKGUpIHtcblx0ICAgICAgICB2YXIgZGVzdHJveUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiBkZXN0cm95RXZlbnRMaXN0ZW5lcigpIHtcblx0ICAgICAgICAgIHRhcmdldFNlbGVjdG9yT3JFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZS50eXBlLCB0YXNrV3JhcHBlcik7XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBpZiAoIW1hbnVhbERlc3Ryb3kpIHtcblx0ICAgICAgICAgIGRlc3Ryb3lFdmVudExpc3RlbmVyKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRhc2soZSwgZGVzdHJveUV2ZW50TGlzdGVuZXIpO1xuXHQgICAgICB9O1xuXHQgICAgICByZXR1cm4gaW50ZXJuYWxUYXNrRnVuY3Rpb247XG5cdCAgICB9KSgpO1xuXHQgICAgdGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgdGFza1dyYXBwZXIpO1xuXHQgIH0gZWxzZSB0aHJvdyBuZXcgRXJyb3IodGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQgKyAnIG11c3QgYmUgYSBDU1Mgc2VsZWN0b3Igc3RyaW5nIG9yIERPTSBFbGVtZW50IG9iamVjdC4nKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlbW92ZXMgZXZlbnQgaGFuZGxlciBmcm9tIHNlbGVjdG9yLlxuXHQgKiBAcGFyYW0gdGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQgU2VsZWN0b3IgdG8gdGFyZ2V0IG9uZSBvciBtdWx0aXBsZSBlbGVtZW50cywgb3IgYSBzaW5nbGUgb3IgYXJyYXkgb2YgRE9NRWxlbWVudC5cblx0ICogQHBhcmFtIGV2ZW50IFRoZSBldmVudCB0byB0YXJnZXQgKGUuZy4gJ3RyYW5zaXRpb25lbmQnKVxuXHQgKiBAcGFyYW0gdGFzayBBIHNpbmdsZSBmdW5jdGlvbiBjYWxsYmFjayB0byB1bmJpbmQsIG9yIGxlYXZlIGVtcHR5IHRvIHJlbW92ZSBhbGwgZXZlbnQgaGFuZGxlcnMuXG5cdCAqL1xuXHRmdW5jdGlvbiBvZmYodGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQsIGV2ZW50LCB0YXNrKSB7XG5cdCAgaWYgKHR5cGVvZiB0YXJnZXRTZWxlY3Rvck9yRWxlbWVudCA9PT0gJ3N0cmluZycpIHtcblx0ICAgIHZhciBlbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcblx0ICAgIGlmIChlbHMubGVuZ3RoID4gMCkge1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVscy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIG9mZihlbHNbaV0sIHRhc2spO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmIChpc0FycmF5KHRhcmdldFNlbGVjdG9yT3JFbGVtZW50KSkge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YXJnZXRTZWxlY3Rvck9yRWxlbWVudC5sZW5ndGg7IGkrKykge1xuXHQgICAgICBvZmYodGFyZ2V0U2VsZWN0b3JPckVsZW1lbnRbaV0sIHRhc2spO1xuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAoKHR5cGVvZiB0YXJnZXRTZWxlY3Rvck9yRWxlbWVudCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YodGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQpKSA9PT0gJ29iamVjdCcpIHtcblx0ICAgIGlmICh0YXNrKSB0YXJnZXRTZWxlY3Rvck9yRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCB0YXNrKTtlbHNlIHRhcmdldFNlbGVjdG9yT3JFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQpO1xuXHQgIH0gZWxzZSB0aHJvdyBuZXcgRXJyb3IodGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQgKyAnIG11c3QgYmUgYSBDU1Mgc2VsZWN0b3Igc3RyaW5nIG9yIERPTSBFbGVtZW50IG9iamVjdC4nKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0Q29uc29sZVN0eWxlKHN0eWxlKSB7XG5cdCAgaWYgKHN0eWxlID09ICdjb2RlJykge1xuXHQgICAgcmV0dXJuICdcXG4gICAgcGFkZGluZzogMCA1cHggMnB4O1xcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkO1xcbiAgICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDNweDtcXG4gICAgLW1vei1ib3JkZXItcmFkaXVzOiAzcHg7XFxuICAgIGJvcmRlci1yYWRpdXM6IDNweDtcXG4gICAgYmFja2dyb3VuZC1jbGlwOiBwYWRkaW5nLWJveDtcXG4gICAgZm9udC1mYW1pbHk6IE1vbmFjbyxcIkRlamFWdSBTYW5zIE1vbm9cIixcIkNvdXJpZXIgTmV3XCIsbW9ub3NwYWNlO1xcbiAgICBjb2xvcjogIzY2NjtcXG4gICAgJztcblx0ICB9IGVsc2UgaWYgKHN0eWxlID09ICdib2xkJykge1xuXHQgICAgcmV0dXJuICdcXG4gICAgICBmb250LXdlaWdodDogNjAwO1xcbiAgICBjb2xvcjogcmdiKDUxLCA1MSwgNTEpO1xcbiAgICAnO1xuXHQgIH0gZWxzZSBpZiAoc3R5bGUgPT0gJ2FsZXJ0Jykge1xuXHQgICAgcmV0dXJuICdcXG4gICAgICBmb250LXdlaWdodDogNjAwO1xcbiAgICBjb2xvcjogcmVkO1xcbiAgICAnO1xuXHQgIH0gZWxzZSBpZiAoc3R5bGUgPT0gJ2V2ZW50Jykge1xuXHQgICAgcmV0dXJuICdcXG4gICAgY29sb3I6IGdyZWVuO1xcbiAgICAnO1xuXHQgIH0gZWxzZSBpZiAoc3R5bGUgPT0gJ3Bvc3RtZXNzYWdlJykge1xuXHQgICAgcmV0dXJuICdcXG4gICAgY29sb3I6IG9yYW5nZTtcXG4gICAgJztcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIHNldFRpbWVvdXQoKSBtZXRob2QuXG5cdCAqIEBwYXJhbSBkdXJhdGlvbk1zXG5cdCAqIEByZXR1cm5zIHtQcm9taXNlfSBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIHRpbWVvdXQgaXMgY29tcGxldGUuXG5cdCAqL1xuXHRmdW5jdGlvbiBkZWxheShkdXJhdGlvbk1zKSB7XG5cdCAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG5cdCAgICBzZXRUaW1lb3V0KHJlc29sdmUsIGR1cmF0aW9uTXMpO1xuXHQgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBub3RoaW5nKCkge1xuXHQgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gd2hlbihjb25kaXRpb24sIHByb21pc2VJZlRydWUsIHByb21pc2VJZkZhbHNlKSB7XG5cdCAgaWYgKHByb21pc2VJZlRydWUgPT09IHVuZGVmaW5lZCkgcHJvbWlzZUlmVHJ1ZSA9IG5vdGhpbmcoKTtcblx0ICBpZiAocHJvbWlzZUlmRmFsc2UgPT09IHVuZGVmaW5lZCkgcHJvbWlzZUlmRmFsc2UgPSBub3RoaW5nKCk7XG5cdCAgcmV0dXJuIGNvbmRpdGlvbiA/IHByb21pc2VJZlRydWUgOiBwcm9taXNlSWZGYWxzZTtcblx0fVxuXG4vKioqLyB9LFxuLyogNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGZldGNoKSB7J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuYXBpQ2FsbCA9IGFwaUNhbGw7XG5cdGV4cG9ydHMuc2VuZE5vdGlmaWNhdGlvbiA9IHNlbmROb3RpZmljYXRpb247XG5cdFxuXHR2YXIgX3ZhcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHRcblx0dmFyIF9sb2dsZXZlbCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdFxuXHR2YXIgX2xvZ2xldmVsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xvZ2xldmVsKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBhcGlDYWxsKGFjdGlvbiwgbWV0aG9kLCBkYXRhKSB7XG5cdCAgdmFyIGhlYWRlcnMgPSBuZXcgSGVhZGVycygpO1xuXHQgIGhlYWRlcnMuYXBwZW5kKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04Jyk7XG5cdFxuXHQgIHZhciBjb250ZW50cyA9IHtcblx0ICAgIG1ldGhvZDogbWV0aG9kIHx8ICdOT19NRVRIT0RfU1BFQ0lGSUVEJyxcblx0ICAgIGhlYWRlcnM6IGhlYWRlcnMsXG5cdCAgICBjYWNoZTogJ25vLWNhY2hlJ1xuXHQgIH07XG5cdCAgaWYgKGRhdGEpIGNvbnRlbnRzLmJvZHkgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcblx0XG5cdCAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcblx0ICAgIGZldGNoKF92YXJzLkFQSV9VUkwgKyBhY3Rpb24sIGNvbnRlbnRzKS50aGVuKGZ1bmN0aW9uIHN0YXR1cyhyZXNwb25zZSkge1xuXHQgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID49IDIwMCAmJiByZXNwb25zZS5zdGF0dXMgPCAzMDApIHJldHVybiByZXNwb25zZS5qc29uKCk7ZWxzZSByZWplY3QobmV3IEVycm9yKHJlc3BvbnNlLnN0YXR1c1RleHQpKTtcblx0ICAgIH0pLnRoZW4oZnVuY3Rpb24gKGpzb25SZXNwb25zZSkge1xuXHQgICAgICByZXNvbHZlKGpzb25SZXNwb25zZSk7XG5cdCAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkge1xuXHQgICAgICByZWplY3QoZSk7XG5cdCAgICB9KTtcblx0ICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2VuZE5vdGlmaWNhdGlvbihhcHBJZCwgcGxheWVySWRzLCB0aXRsZXMsIGNvbnRlbnRzKSB7XG5cdCAgdmFyIHBhcmFtcyA9IHtcblx0ICAgICdhcHBfaWQnOiBhcHBJZCxcblx0ICAgICdoZWFkaW5ncyc6IHRpdGxlcyxcblx0ICAgICdjb250ZW50cyc6IGNvbnRlbnRzLFxuXHQgICAgJ2luY2x1ZGVfcGxheWVyX2lkcyc6IHBsYXllcklkcyxcblx0ICAgICdpc0FueVdlYic6IHRydWUsXG5cdCAgICAndXJsJzogJ2phdmFzY3JpcHQ6dm9pZCgwKTsnXG5cdCAgfTtcblx0ICByZXR1cm4gYXBpQ2FsbCgnbm90aWZpY2F0aW9ucycsICdQT1NUJywgcGFyYW1zKTtcblx0fVxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygzKSkpXG5cbi8qKiovIH0sXG4vKiA3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXzsvKlxyXG5cdCogbG9nbGV2ZWwgLSBodHRwczovL2dpdGh1Yi5jb20vcGltdGVycnkvbG9nbGV2ZWxcclxuXHQqXHJcblx0KiBDb3B5cmlnaHQgKGMpIDIwMTMgVGltIFBlcnJ5XHJcblx0KiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXHJcblx0Ki9cclxuXHQoZnVuY3Rpb24gKHJvb3QsIGRlZmluaXRpb24pIHtcclxuXHQgICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblx0ICAgIGlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cyAmJiBcImZ1bmN0aW9uXCIgPT09ICdmdW5jdGlvbicpIHtcclxuXHQgICAgICAgIG1vZHVsZS5leHBvcnRzID0gZGVmaW5pdGlvbigpO1xyXG5cdCAgICB9IGVsc2UgaWYgKHRydWUpIHtcclxuXHQgICAgICAgICEoX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fID0gKGRlZmluaXRpb24pLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9ICh0eXBlb2YgX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fID09PSAnZnVuY3Rpb24nID8gKF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXy5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18sIGV4cG9ydHMsIG1vZHVsZSkpIDogX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fKSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gIT09IHVuZGVmaW5lZCAmJiAobW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXykpO1xyXG5cdCAgICB9IGVsc2Uge1xyXG5cdCAgICAgICAgcm9vdC5sb2cgPSBkZWZpbml0aW9uKCk7XHJcblx0ICAgIH1cclxuXHR9KHRoaXMsIGZ1bmN0aW9uICgpIHtcclxuXHQgICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblx0ICAgIHZhciBub29wID0gZnVuY3Rpb24oKSB7fTtcclxuXHQgICAgdmFyIHVuZGVmaW5lZFR5cGUgPSBcInVuZGVmaW5lZFwiO1xyXG5cdFxyXG5cdCAgICBmdW5jdGlvbiByZWFsTWV0aG9kKG1ldGhvZE5hbWUpIHtcclxuXHQgICAgICAgIGlmICh0eXBlb2YgY29uc29sZSA9PT0gdW5kZWZpbmVkVHlwZSkge1xyXG5cdCAgICAgICAgICAgIHJldHVybiBmYWxzZTsgLy8gV2UgY2FuJ3QgYnVpbGQgYSByZWFsIG1ldGhvZCB3aXRob3V0IGEgY29uc29sZSB0byBsb2cgdG9cclxuXHQgICAgICAgIH0gZWxzZSBpZiAoY29uc29sZVttZXRob2ROYW1lXSAhPT0gdW5kZWZpbmVkKSB7XHJcblx0ICAgICAgICAgICAgcmV0dXJuIGJpbmRNZXRob2QoY29uc29sZSwgbWV0aG9kTmFtZSk7XHJcblx0ICAgICAgICB9IGVsc2UgaWYgKGNvbnNvbGUubG9nICE9PSB1bmRlZmluZWQpIHtcclxuXHQgICAgICAgICAgICByZXR1cm4gYmluZE1ldGhvZChjb25zb2xlLCAnbG9nJyk7XHJcblx0ICAgICAgICB9IGVsc2Uge1xyXG5cdCAgICAgICAgICAgIHJldHVybiBub29wO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICB9XHJcblx0XHJcblx0ICAgIGZ1bmN0aW9uIGJpbmRNZXRob2Qob2JqLCBtZXRob2ROYW1lKSB7XHJcblx0ICAgICAgICB2YXIgbWV0aG9kID0gb2JqW21ldGhvZE5hbWVdO1xyXG5cdCAgICAgICAgaWYgKHR5cGVvZiBtZXRob2QuYmluZCA9PT0gJ2Z1bmN0aW9uJykge1xyXG5cdCAgICAgICAgICAgIHJldHVybiBtZXRob2QuYmluZChvYmopO1xyXG5cdCAgICAgICAgfSBlbHNlIHtcclxuXHQgICAgICAgICAgICB0cnkge1xyXG5cdCAgICAgICAgICAgICAgICByZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChtZXRob2QsIG9iaik7XHJcblx0ICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG5cdCAgICAgICAgICAgICAgICAvLyBNaXNzaW5nIGJpbmQgc2hpbSBvciBJRTggKyBNb2Rlcm5penIsIGZhbGxiYWNrIHRvIHdyYXBwaW5nXHJcblx0ICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuYXBwbHkobWV0aG9kLCBbb2JqLCBhcmd1bWVudHNdKTtcclxuXHQgICAgICAgICAgICAgICAgfTtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICB9XHJcblx0ICAgIH1cclxuXHRcclxuXHQgICAgLy8gdGhlc2UgcHJpdmF0ZSBmdW5jdGlvbnMgYWx3YXlzIG5lZWQgYHRoaXNgIHRvIGJlIHNldCBwcm9wZXJseVxyXG5cdFxyXG5cdCAgICBmdW5jdGlvbiBlbmFibGVMb2dnaW5nV2hlbkNvbnNvbGVBcnJpdmVzKG1ldGhvZE5hbWUsIGxldmVsLCBsb2dnZXJOYW1lKSB7XHJcblx0ICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gdW5kZWZpbmVkVHlwZSkge1xyXG5cdCAgICAgICAgICAgICAgICByZXBsYWNlTG9nZ2luZ01ldGhvZHMuY2FsbCh0aGlzLCBsZXZlbCwgbG9nZ2VyTmFtZSk7XHJcblx0ICAgICAgICAgICAgICAgIHRoaXNbbWV0aG9kTmFtZV0uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICB9O1xyXG5cdCAgICB9XHJcblx0XHJcblx0ICAgIGZ1bmN0aW9uIHJlcGxhY2VMb2dnaW5nTWV0aG9kcyhsZXZlbCwgbG9nZ2VyTmFtZSkge1xyXG5cdCAgICAgICAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cclxuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbG9nTWV0aG9kcy5sZW5ndGg7IGkrKykge1xyXG5cdCAgICAgICAgICAgIHZhciBtZXRob2ROYW1lID0gbG9nTWV0aG9kc1tpXTtcclxuXHQgICAgICAgICAgICB0aGlzW21ldGhvZE5hbWVdID0gKGkgPCBsZXZlbCkgP1xyXG5cdCAgICAgICAgICAgICAgICBub29wIDpcclxuXHQgICAgICAgICAgICAgICAgdGhpcy5tZXRob2RGYWN0b3J5KG1ldGhvZE5hbWUsIGxldmVsLCBsb2dnZXJOYW1lKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgfVxyXG5cdFxyXG5cdCAgICBmdW5jdGlvbiBkZWZhdWx0TWV0aG9kRmFjdG9yeShtZXRob2ROYW1lLCBsZXZlbCwgbG9nZ2VyTmFtZSkge1xyXG5cdCAgICAgICAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cclxuXHQgICAgICAgIHJldHVybiByZWFsTWV0aG9kKG1ldGhvZE5hbWUpIHx8XHJcblx0ICAgICAgICAgICAgICAgZW5hYmxlTG9nZ2luZ1doZW5Db25zb2xlQXJyaXZlcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG5cdCAgICB9XHJcblx0XHJcblx0ICAgIHZhciBsb2dNZXRob2RzID0gW1xyXG5cdCAgICAgICAgXCJ0cmFjZVwiLFxyXG5cdCAgICAgICAgXCJkZWJ1Z1wiLFxyXG5cdCAgICAgICAgXCJpbmZvXCIsXHJcblx0ICAgICAgICBcIndhcm5cIixcclxuXHQgICAgICAgIFwiZXJyb3JcIlxyXG5cdCAgICBdO1xyXG5cdFxyXG5cdCAgICBmdW5jdGlvbiBMb2dnZXIobmFtZSwgZGVmYXVsdExldmVsLCBmYWN0b3J5KSB7XHJcblx0ICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cdCAgICAgIHZhciBjdXJyZW50TGV2ZWw7XHJcblx0ICAgICAgdmFyIHN0b3JhZ2VLZXkgPSBcImxvZ2xldmVsXCI7XHJcblx0ICAgICAgaWYgKG5hbWUpIHtcclxuXHQgICAgICAgIHN0b3JhZ2VLZXkgKz0gXCI6XCIgKyBuYW1lO1xyXG5cdCAgICAgIH1cclxuXHRcclxuXHQgICAgICBmdW5jdGlvbiBwZXJzaXN0TGV2ZWxJZlBvc3NpYmxlKGxldmVsTnVtKSB7XHJcblx0ICAgICAgICAgIHZhciBsZXZlbE5hbWUgPSAobG9nTWV0aG9kc1tsZXZlbE51bV0gfHwgJ3NpbGVudCcpLnRvVXBwZXJDYXNlKCk7XHJcblx0XHJcblx0ICAgICAgICAgIC8vIFVzZSBsb2NhbFN0b3JhZ2UgaWYgYXZhaWxhYmxlXHJcblx0ICAgICAgICAgIHRyeSB7XHJcblx0ICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlW3N0b3JhZ2VLZXldID0gbGV2ZWxOYW1lO1xyXG5cdCAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cdCAgICAgICAgICB9IGNhdGNoIChpZ25vcmUpIHt9XHJcblx0XHJcblx0ICAgICAgICAgIC8vIFVzZSBzZXNzaW9uIGNvb2tpZSBhcyBmYWxsYmFja1xyXG5cdCAgICAgICAgICB0cnkge1xyXG5cdCAgICAgICAgICAgICAgd2luZG93LmRvY3VtZW50LmNvb2tpZSA9XHJcblx0ICAgICAgICAgICAgICAgIGVuY29kZVVSSUNvbXBvbmVudChzdG9yYWdlS2V5KSArIFwiPVwiICsgbGV2ZWxOYW1lICsgXCI7XCI7XHJcblx0ICAgICAgICAgIH0gY2F0Y2ggKGlnbm9yZSkge31cclxuXHQgICAgICB9XHJcblx0XHJcblx0ICAgICAgZnVuY3Rpb24gZ2V0UGVyc2lzdGVkTGV2ZWwoKSB7XHJcblx0ICAgICAgICAgIHZhciBzdG9yZWRMZXZlbDtcclxuXHRcclxuXHQgICAgICAgICAgdHJ5IHtcclxuXHQgICAgICAgICAgICAgIHN0b3JlZExldmVsID0gd2luZG93LmxvY2FsU3RvcmFnZVtzdG9yYWdlS2V5XTtcclxuXHQgICAgICAgICAgfSBjYXRjaCAoaWdub3JlKSB7fVxyXG5cdFxyXG5cdCAgICAgICAgICBpZiAodHlwZW9mIHN0b3JlZExldmVsID09PSB1bmRlZmluZWRUeXBlKSB7XHJcblx0ICAgICAgICAgICAgICB0cnkge1xyXG5cdCAgICAgICAgICAgICAgICAgIHZhciBjb29raWUgPSB3aW5kb3cuZG9jdW1lbnQuY29va2llO1xyXG5cdCAgICAgICAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IGNvb2tpZS5pbmRleE9mKFxyXG5cdCAgICAgICAgICAgICAgICAgICAgICBlbmNvZGVVUklDb21wb25lbnQoc3RvcmFnZUtleSkgKyBcIj1cIik7XHJcblx0ICAgICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uKSB7XHJcblx0ICAgICAgICAgICAgICAgICAgICAgIHN0b3JlZExldmVsID0gL14oW147XSspLy5leGVjKGNvb2tpZS5zbGljZShsb2NhdGlvbikpWzFdO1xyXG5cdCAgICAgICAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgICAgIH0gY2F0Y2ggKGlnbm9yZSkge31cclxuXHQgICAgICAgICAgfVxyXG5cdFxyXG5cdCAgICAgICAgICAvLyBJZiB0aGUgc3RvcmVkIGxldmVsIGlzIG5vdCB2YWxpZCwgdHJlYXQgaXQgYXMgaWYgbm90aGluZyB3YXMgc3RvcmVkLlxyXG5cdCAgICAgICAgICBpZiAoc2VsZi5sZXZlbHNbc3RvcmVkTGV2ZWxdID09PSB1bmRlZmluZWQpIHtcclxuXHQgICAgICAgICAgICAgIHN0b3JlZExldmVsID0gdW5kZWZpbmVkO1xyXG5cdCAgICAgICAgICB9XHJcblx0XHJcblx0ICAgICAgICAgIHJldHVybiBzdG9yZWRMZXZlbDtcclxuXHQgICAgICB9XHJcblx0XHJcblx0ICAgICAgLypcclxuXHQgICAgICAgKlxyXG5cdCAgICAgICAqIFB1YmxpYyBBUElcclxuXHQgICAgICAgKlxyXG5cdCAgICAgICAqL1xyXG5cdFxyXG5cdCAgICAgIHNlbGYubGV2ZWxzID0geyBcIlRSQUNFXCI6IDAsIFwiREVCVUdcIjogMSwgXCJJTkZPXCI6IDIsIFwiV0FSTlwiOiAzLFxyXG5cdCAgICAgICAgICBcIkVSUk9SXCI6IDQsIFwiU0lMRU5UXCI6IDV9O1xyXG5cdFxyXG5cdCAgICAgIHNlbGYubWV0aG9kRmFjdG9yeSA9IGZhY3RvcnkgfHwgZGVmYXVsdE1ldGhvZEZhY3Rvcnk7XHJcblx0XHJcblx0ICAgICAgc2VsZi5nZXRMZXZlbCA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgICAgcmV0dXJuIGN1cnJlbnRMZXZlbDtcclxuXHQgICAgICB9O1xyXG5cdFxyXG5cdCAgICAgIHNlbGYuc2V0TGV2ZWwgPSBmdW5jdGlvbiAobGV2ZWwsIHBlcnNpc3QpIHtcclxuXHQgICAgICAgICAgaWYgKHR5cGVvZiBsZXZlbCA9PT0gXCJzdHJpbmdcIiAmJiBzZWxmLmxldmVsc1tsZXZlbC50b1VwcGVyQ2FzZSgpXSAhPT0gdW5kZWZpbmVkKSB7XHJcblx0ICAgICAgICAgICAgICBsZXZlbCA9IHNlbGYubGV2ZWxzW2xldmVsLnRvVXBwZXJDYXNlKCldO1xyXG5cdCAgICAgICAgICB9XHJcblx0ICAgICAgICAgIGlmICh0eXBlb2YgbGV2ZWwgPT09IFwibnVtYmVyXCIgJiYgbGV2ZWwgPj0gMCAmJiBsZXZlbCA8PSBzZWxmLmxldmVscy5TSUxFTlQpIHtcclxuXHQgICAgICAgICAgICAgIGN1cnJlbnRMZXZlbCA9IGxldmVsO1xyXG5cdCAgICAgICAgICAgICAgaWYgKHBlcnNpc3QgIT09IGZhbHNlKSB7ICAvLyBkZWZhdWx0cyB0byB0cnVlXHJcblx0ICAgICAgICAgICAgICAgICAgcGVyc2lzdExldmVsSWZQb3NzaWJsZShsZXZlbCk7XHJcblx0ICAgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgICByZXBsYWNlTG9nZ2luZ01ldGhvZHMuY2FsbChzZWxmLCBsZXZlbCwgbmFtZSk7XHJcblx0ICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUgPT09IHVuZGVmaW5lZFR5cGUgJiYgbGV2ZWwgPCBzZWxmLmxldmVscy5TSUxFTlQpIHtcclxuXHQgICAgICAgICAgICAgICAgICByZXR1cm4gXCJObyBjb25zb2xlIGF2YWlsYWJsZSBmb3IgbG9nZ2luZ1wiO1xyXG5cdCAgICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICB9IGVsc2Uge1xyXG5cdCAgICAgICAgICAgICAgdGhyb3cgXCJsb2cuc2V0TGV2ZWwoKSBjYWxsZWQgd2l0aCBpbnZhbGlkIGxldmVsOiBcIiArIGxldmVsO1xyXG5cdCAgICAgICAgICB9XHJcblx0ICAgICAgfTtcclxuXHRcclxuXHQgICAgICBzZWxmLnNldERlZmF1bHRMZXZlbCA9IGZ1bmN0aW9uIChsZXZlbCkge1xyXG5cdCAgICAgICAgICBpZiAoIWdldFBlcnNpc3RlZExldmVsKCkpIHtcclxuXHQgICAgICAgICAgICAgIHNlbGYuc2V0TGV2ZWwobGV2ZWwsIGZhbHNlKTtcclxuXHQgICAgICAgICAgfVxyXG5cdCAgICAgIH07XHJcblx0XHJcblx0ICAgICAgc2VsZi5lbmFibGVBbGwgPSBmdW5jdGlvbihwZXJzaXN0KSB7XHJcblx0ICAgICAgICAgIHNlbGYuc2V0TGV2ZWwoc2VsZi5sZXZlbHMuVFJBQ0UsIHBlcnNpc3QpO1xyXG5cdCAgICAgIH07XHJcblx0XHJcblx0ICAgICAgc2VsZi5kaXNhYmxlQWxsID0gZnVuY3Rpb24ocGVyc2lzdCkge1xyXG5cdCAgICAgICAgICBzZWxmLnNldExldmVsKHNlbGYubGV2ZWxzLlNJTEVOVCwgcGVyc2lzdCk7XHJcblx0ICAgICAgfTtcclxuXHRcclxuXHQgICAgICAvLyBJbml0aWFsaXplIHdpdGggdGhlIHJpZ2h0IGxldmVsXHJcblx0ICAgICAgdmFyIGluaXRpYWxMZXZlbCA9IGdldFBlcnNpc3RlZExldmVsKCk7XHJcblx0ICAgICAgaWYgKGluaXRpYWxMZXZlbCA9PSBudWxsKSB7XHJcblx0ICAgICAgICAgIGluaXRpYWxMZXZlbCA9IGRlZmF1bHRMZXZlbCA9PSBudWxsID8gXCJXQVJOXCIgOiBkZWZhdWx0TGV2ZWw7XHJcblx0ICAgICAgfVxyXG5cdCAgICAgIHNlbGYuc2V0TGV2ZWwoaW5pdGlhbExldmVsLCBmYWxzZSk7XHJcblx0ICAgIH1cclxuXHRcclxuXHQgICAgLypcclxuXHQgICAgICpcclxuXHQgICAgICogUGFja2FnZS1sZXZlbCBBUElcclxuXHQgICAgICpcclxuXHQgICAgICovXHJcblx0XHJcblx0ICAgIHZhciBkZWZhdWx0TG9nZ2VyID0gbmV3IExvZ2dlcigpO1xyXG5cdFxyXG5cdCAgICB2YXIgX2xvZ2dlcnNCeU5hbWUgPSB7fTtcclxuXHQgICAgZGVmYXVsdExvZ2dlci5nZXRMb2dnZXIgPSBmdW5jdGlvbiBnZXRMb2dnZXIobmFtZSkge1xyXG5cdCAgICAgICAgaWYgKHR5cGVvZiBuYW1lICE9PSBcInN0cmluZ1wiIHx8IG5hbWUgPT09IFwiXCIpIHtcclxuXHQgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIllvdSBtdXN0IHN1cHBseSBhIG5hbWUgd2hlbiBjcmVhdGluZyBhIGxvZ2dlci5cIik7XHJcblx0ICAgICAgICB9XHJcblx0XHJcblx0ICAgICAgICB2YXIgbG9nZ2VyID0gX2xvZ2dlcnNCeU5hbWVbbmFtZV07XHJcblx0ICAgICAgICBpZiAoIWxvZ2dlcikge1xyXG5cdCAgICAgICAgICBsb2dnZXIgPSBfbG9nZ2Vyc0J5TmFtZVtuYW1lXSA9IG5ldyBMb2dnZXIoXHJcblx0ICAgICAgICAgICAgbmFtZSwgZGVmYXVsdExvZ2dlci5nZXRMZXZlbCgpLCBkZWZhdWx0TG9nZ2VyLm1ldGhvZEZhY3RvcnkpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgcmV0dXJuIGxvZ2dlcjtcclxuXHQgICAgfTtcclxuXHRcclxuXHQgICAgLy8gR3JhYiB0aGUgY3VycmVudCBnbG9iYWwgbG9nIHZhcmlhYmxlIGluIGNhc2Ugb2Ygb3ZlcndyaXRlXHJcblx0ICAgIHZhciBfbG9nID0gKHR5cGVvZiB3aW5kb3cgIT09IHVuZGVmaW5lZFR5cGUpID8gd2luZG93LmxvZyA6IHVuZGVmaW5lZDtcclxuXHQgICAgZGVmYXVsdExvZ2dlci5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oKSB7XHJcblx0ICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gdW5kZWZpbmVkVHlwZSAmJlxyXG5cdCAgICAgICAgICAgICAgIHdpbmRvdy5sb2cgPT09IGRlZmF1bHRMb2dnZXIpIHtcclxuXHQgICAgICAgICAgICB3aW5kb3cubG9nID0gX2xvZztcclxuXHQgICAgICAgIH1cclxuXHRcclxuXHQgICAgICAgIHJldHVybiBkZWZhdWx0TG9nZ2VyO1xyXG5cdCAgICB9O1xyXG5cdFxyXG5cdCAgICByZXR1cm4gZGVmYXVsdExvZ2dlcjtcclxuXHR9KSk7XHJcblxuXG4vKioqLyB9LFxuLyogOCAqLyxcbi8qIDkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfY2hhaSA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRcblx0dmFyIF9jaGFpMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NoYWkpO1xuXHRcblx0dmFyIF9hcGkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0dmFyIF92YXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZGVzY3JpYmUoJ2FwaS5qcycsIGZ1bmN0aW9uICgpIHtcblx0ICBpdCgnc2hvdWxkIGZhaWwgYW4gaW52YWxpZCBjcmVhdGUgbm90aWZpY2F0aW9uJywgZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuICgwLCBfYXBpLmFwaUNhbGwpKCdub3RpZmljYXRpb25zJywgJ1BPU1QnLCBudWxsKS5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZFdpdGgoJ0Vycm9yOiBCYWQgUmVxdWVzdCcpO1xuXHQgIH0pO1xuXHRcblx0ICBpdCgnc2hvdWxkIHNlbmQgYSB2YWxpZCBjcmVhdGUgbm90aWZpY2F0aW9uJywgZnVuY3Rpb24gKCkge1xuXHQgICAgLy8gQXBwIGlzIG9uIGxvY2FsIHNlcnZlclxuXHQgICAgdmFyIHBhcmFtcyA9IHtcblx0ICAgICAgJ2FwcF9pZCc6IF92YXJzLkFQUF9JRCxcblx0ICAgICAgJ2NvbnRlbnRzJzogeyAnZW4nOiAnV2ViIFNESyB1bml0IHRlc3QuJyB9LFxuXHQgICAgICAnaW5jbHVkZV9wbGF5ZXJfaWRzJzogW192YXJzLlBMQVlFUl9JRF1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gKDAsIF9hcGkuYXBpQ2FsbCkoJ25vdGlmaWNhdGlvbnMnLCAnUE9TVCcsIHBhcmFtcykuc2hvdWxkLmV2ZW50dWFsbHkuYmUuZnVsZmlsbGVkO1xuXHQgIH0pO1xuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDEwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXG5cbi8qKiovIH0sXG4vKiAxMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyohXG5cdCAqIGNoYWlcblx0ICogQ29weXJpZ2h0KGMpIDIwMTEtMjAxNCBKYWtlIEx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cblx0ICogTUlUIExpY2Vuc2VkXG5cdCAqL1xuXHRcblx0dmFyIHVzZWQgPSBbXVxuXHQgICwgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cdFxuXHQvKiFcblx0ICogQ2hhaSB2ZXJzaW9uXG5cdCAqL1xuXHRcblx0ZXhwb3J0cy52ZXJzaW9uID0gJzMuNC4xJztcblx0XG5cdC8qIVxuXHQgKiBBc3NlcnRpb24gRXJyb3Jcblx0ICovXG5cdFxuXHRleHBvcnRzLkFzc2VydGlvbkVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdFxuXHQvKiFcblx0ICogVXRpbHMgZm9yIHBsdWdpbnMgKG5vdCBleHBvcnRlZClcblx0ICovXG5cdFxuXHR2YXIgdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHRcblx0LyoqXG5cdCAqICMgLnVzZShmdW5jdGlvbilcblx0ICpcblx0ICogUHJvdmlkZXMgYSB3YXkgdG8gZXh0ZW5kIHRoZSBpbnRlcm5hbHMgb2YgQ2hhaVxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufVxuXHQgKiBAcmV0dXJucyB7dGhpc30gZm9yIGNoYWluaW5nXG5cdCAqIEBhcGkgcHVibGljXG5cdCAqL1xuXHRcblx0ZXhwb3J0cy51c2UgPSBmdW5jdGlvbiAoZm4pIHtcblx0ICBpZiAoIX51c2VkLmluZGV4T2YoZm4pKSB7XG5cdCAgICBmbih0aGlzLCB1dGlsKTtcblx0ICAgIHVzZWQucHVzaChmbik7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gdGhpcztcblx0fTtcblx0XG5cdC8qIVxuXHQgKiBVdGlsaXR5IEZ1bmN0aW9uc1xuXHQgKi9cblx0XG5cdGV4cG9ydHMudXRpbCA9IHV0aWw7XG5cdFxuXHQvKiFcblx0ICogQ29uZmlndXJhdGlvblxuXHQgKi9cblx0XG5cdHZhciBjb25maWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KTtcblx0ZXhwb3J0cy5jb25maWcgPSBjb25maWc7XG5cdFxuXHQvKiFcblx0ICogUHJpbWFyeSBgQXNzZXJ0aW9uYCBwcm90b3R5cGVcblx0ICovXG5cdFxuXHR2YXIgYXNzZXJ0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdGV4cG9ydHMudXNlKGFzc2VydGlvbik7XG5cdFxuXHQvKiFcblx0ICogQ29yZSBBc3NlcnRpb25zXG5cdCAqL1xuXHRcblx0dmFyIGNvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KTtcblx0ZXhwb3J0cy51c2UoY29yZSk7XG5cdFxuXHQvKiFcblx0ICogRXhwZWN0IGludGVyZmFjZVxuXHQgKi9cblx0XG5cdHZhciBleHBlY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KTtcblx0ZXhwb3J0cy51c2UoZXhwZWN0KTtcblx0XG5cdC8qIVxuXHQgKiBTaG91bGQgaW50ZXJmYWNlXG5cdCAqL1xuXHRcblx0dmFyIHNob3VsZCA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpO1xuXHRleHBvcnRzLnVzZShzaG91bGQpO1xuXHRcblx0LyohXG5cdCAqIEFzc2VydCBpbnRlcmZhY2Vcblx0ICovXG5cdFxuXHR2YXIgYXNzZXJ0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSk7XG5cdGV4cG9ydHMudXNlKGFzc2VydCk7XG5cblxuLyoqKi8gfSxcbi8qIDEyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiFcblx0ICogYXNzZXJ0aW9uLWVycm9yXG5cdCAqIENvcHlyaWdodChjKSAyMDEzIEpha2UgTHVlciA8amFrZUBxdWFsaWFuY3kuY29tPlxuXHQgKiBNSVQgTGljZW5zZWRcblx0ICovXG5cdFxuXHQvKiFcblx0ICogUmV0dXJuIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGNvcHkgcHJvcGVydGllcyBmcm9tXG5cdCAqIG9uZSBvYmplY3QgdG8gYW5vdGhlciBleGNsdWRpbmcgYW55IG9yaWdpbmFsbHlcblx0ICogbGlzdGVkLiBSZXR1cm5lZCBmdW5jdGlvbiB3aWxsIGNyZWF0ZSBhIG5ldyBge31gLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXhjbHVkZWQgcHJvcGVydGllcyAuLi5cblx0ICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZXhjbHVkZSAoKSB7XG5cdCAgdmFyIGV4Y2x1ZGVzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuXHRcblx0ICBmdW5jdGlvbiBleGNsdWRlUHJvcHMgKHJlcywgb2JqKSB7XG5cdCAgICBPYmplY3Qua2V5cyhvYmopLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICBpZiAoIX5leGNsdWRlcy5pbmRleE9mKGtleSkpIHJlc1trZXldID0gb2JqW2tleV07XG5cdCAgICB9KTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBmdW5jdGlvbiBleHRlbmRFeGNsdWRlICgpIHtcblx0ICAgIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMpXG5cdCAgICAgICwgaSA9IDBcblx0ICAgICAgLCByZXMgPSB7fTtcblx0XG5cdCAgICBmb3IgKDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgZXhjbHVkZVByb3BzKHJlcywgYXJnc1tpXSk7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIHJlcztcblx0ICB9O1xuXHR9O1xuXHRcblx0LyohXG5cdCAqIFByaW1hcnkgRXhwb3J0c1xuXHQgKi9cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gQXNzZXJ0aW9uRXJyb3I7XG5cdFxuXHQvKipcblx0ICogIyMjIEFzc2VydGlvbkVycm9yXG5cdCAqXG5cdCAqIEFuIGV4dGVuc2lvbiBvZiB0aGUgSmF2YVNjcmlwdCBgRXJyb3JgIGNvbnN0cnVjdG9yIGZvclxuXHQgKiBhc3NlcnRpb24gYW5kIHZhbGlkYXRpb24gc2NlbmFyaW9zLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gcHJvcGVydGllcyB0byBpbmNsdWRlIChvcHRpb25hbClcblx0ICogQHBhcmFtIHtjYWxsZWV9IHN0YXJ0IHN0YWNrIGZ1bmN0aW9uIChvcHRpb25hbClcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBBc3NlcnRpb25FcnJvciAobWVzc2FnZSwgX3Byb3BzLCBzc2YpIHtcblx0ICB2YXIgZXh0ZW5kID0gZXhjbHVkZSgnbmFtZScsICdtZXNzYWdlJywgJ3N0YWNrJywgJ2NvbnN0cnVjdG9yJywgJ3RvSlNPTicpXG5cdCAgICAsIHByb3BzID0gZXh0ZW5kKF9wcm9wcyB8fCB7fSk7XG5cdFxuXHQgIC8vIGRlZmF1bHQgdmFsdWVzXG5cdCAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZSB8fCAnVW5zcGVjaWZpZWQgQXNzZXJ0aW9uRXJyb3InO1xuXHQgIHRoaXMuc2hvd0RpZmYgPSBmYWxzZTtcblx0XG5cdCAgLy8gY29weSBmcm9tIHByb3BlcnRpZXNcblx0ICBmb3IgKHZhciBrZXkgaW4gcHJvcHMpIHtcblx0ICAgIHRoaXNba2V5XSA9IHByb3BzW2tleV07XG5cdCAgfVxuXHRcblx0ICAvLyBjYXB0dXJlIHN0YWNrIHRyYWNlXG5cdCAgc3NmID0gc3NmIHx8IGFyZ3VtZW50cy5jYWxsZWU7XG5cdCAgaWYgKHNzZiAmJiBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xuXHQgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgc3NmKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdGhpcy5zdGFjayA9IG5ldyBFcnJvcigpLnN0YWNrO1xuXHQgIH1cblx0fVxuXHRcblx0LyohXG5cdCAqIEluaGVyaXQgZnJvbSBFcnJvci5wcm90b3R5cGVcblx0ICovXG5cdFxuXHRBc3NlcnRpb25FcnJvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7XG5cdFxuXHQvKiFcblx0ICogU3RhdGljYWxseSBzZXQgbmFtZVxuXHQgKi9cblx0XG5cdEFzc2VydGlvbkVycm9yLnByb3RvdHlwZS5uYW1lID0gJ0Fzc2VydGlvbkVycm9yJztcblx0XG5cdC8qIVxuXHQgKiBFbnN1cmUgY29ycmVjdCBjb25zdHJ1Y3RvclxuXHQgKi9cblx0XG5cdEFzc2VydGlvbkVycm9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEFzc2VydGlvbkVycm9yO1xuXHRcblx0LyoqXG5cdCAqIEFsbG93IGVycm9ycyB0byBiZSBjb252ZXJ0ZWQgdG8gSlNPTiBmb3Igc3RhdGljIHRyYW5zZmVyLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IGluY2x1ZGUgc3RhY2sgKGRlZmF1bHQ6IGB0cnVlYClcblx0ICogQHJldHVybiB7T2JqZWN0fSBvYmplY3QgdGhhdCBjYW4gYmUgYEpTT04uc3RyaW5naWZ5YFxuXHQgKi9cblx0XG5cdEFzc2VydGlvbkVycm9yLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoc3RhY2spIHtcblx0ICB2YXIgZXh0ZW5kID0gZXhjbHVkZSgnY29uc3RydWN0b3InLCAndG9KU09OJywgJ3N0YWNrJylcblx0ICAgICwgcHJvcHMgPSBleHRlbmQoeyBuYW1lOiB0aGlzLm5hbWUgfSwgdGhpcyk7XG5cdFxuXHQgIC8vIGluY2x1ZGUgc3RhY2sgaWYgZXhpc3RzIGFuZCBub3QgdHVybmVkIG9mZlxuXHQgIGlmIChmYWxzZSAhPT0gc3RhY2sgJiYgdGhpcy5zdGFjaykge1xuXHQgICAgcHJvcHMuc3RhY2sgPSB0aGlzLnN0YWNrO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHByb3BzO1xuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiAxMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyohXG5cdCAqIGNoYWlcblx0ICogQ29weXJpZ2h0KGMpIDIwMTEgSmFrZSBMdWVyIDxqYWtlQGFsb2dpY2FscGFyYWRveC5jb20+XG5cdCAqIE1JVCBMaWNlbnNlZFxuXHQgKi9cblx0XG5cdC8qIVxuXHQgKiBNYWluIGV4cG9ydHNcblx0ICovXG5cdFxuXHR2YXIgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cdFxuXHQvKiFcblx0ICogdGVzdCB1dGlsaXR5XG5cdCAqL1xuXHRcblx0ZXhwb3J0cy50ZXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cdFxuXHQvKiFcblx0ICogdHlwZSB1dGlsaXR5XG5cdCAqL1xuXHRcblx0ZXhwb3J0cy50eXBlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cdFxuXHQvKiFcblx0ICogZXhwZWN0VHlwZXMgdXRpbGl0eVxuXHQgKi9cblx0ZXhwb3J0cy5leHBlY3RUeXBlcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHRcblx0LyohXG5cdCAqIG1lc3NhZ2UgdXRpbGl0eVxuXHQgKi9cblx0XG5cdGV4cG9ydHMuZ2V0TWVzc2FnZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpO1xuXHRcblx0LyohXG5cdCAqIGFjdHVhbCB1dGlsaXR5XG5cdCAqL1xuXHRcblx0ZXhwb3J0cy5nZXRBY3R1YWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0XG5cdC8qIVxuXHQgKiBJbnNwZWN0IHV0aWxcblx0ICovXG5cdFxuXHRleHBvcnRzLmluc3BlY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0XG5cdC8qIVxuXHQgKiBPYmplY3QgRGlzcGxheSB1dGlsXG5cdCAqL1xuXHRcblx0ZXhwb3J0cy5vYmpEaXNwbGF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHQvKiFcblx0ICogRmxhZyB1dGlsaXR5XG5cdCAqL1xuXHRcblx0ZXhwb3J0cy5mbGFnID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdFxuXHQvKiFcblx0ICogRmxhZyB0cmFuc2ZlcnJpbmcgdXRpbGl0eVxuXHQgKi9cblx0XG5cdGV4cG9ydHMudHJhbnNmZXJGbGFncyA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpO1xuXHRcblx0LyohXG5cdCAqIERlZXAgZXF1YWwgdXRpbGl0eVxuXHQgKi9cblx0XG5cdGV4cG9ydHMuZXFsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7XG5cdFxuXHQvKiFcblx0ICogRGVlcCBwYXRoIHZhbHVlXG5cdCAqL1xuXHRcblx0ZXhwb3J0cy5nZXRQYXRoVmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2KTtcblx0XG5cdC8qIVxuXHQgKiBEZWVwIHBhdGggaW5mb1xuXHQgKi9cblx0XG5cdGV4cG9ydHMuZ2V0UGF0aEluZm8gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KTtcblx0XG5cdC8qIVxuXHQgKiBDaGVjayBpZiBhIHByb3BlcnR5IGV4aXN0c1xuXHQgKi9cblx0XG5cdGV4cG9ydHMuaGFzUHJvcGVydHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KTtcblx0XG5cdC8qIVxuXHQgKiBGdW5jdGlvbiBuYW1lXG5cdCAqL1xuXHRcblx0ZXhwb3J0cy5nZXROYW1lID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMik7XG5cdFxuXHQvKiFcblx0ICogYWRkIFByb3BlcnR5XG5cdCAqL1xuXHRcblx0ZXhwb3J0cy5hZGRQcm9wZXJ0eSA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpO1xuXHRcblx0LyohXG5cdCAqIGFkZCBNZXRob2Rcblx0ICovXG5cdFxuXHRleHBvcnRzLmFkZE1ldGhvZCA9IF9fd2VicGFja19yZXF1aXJlX18oNDApO1xuXHRcblx0LyohXG5cdCAqIG92ZXJ3cml0ZSBQcm9wZXJ0eVxuXHQgKi9cblx0XG5cdGV4cG9ydHMub3ZlcndyaXRlUHJvcGVydHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0XG5cdC8qIVxuXHQgKiBvdmVyd3JpdGUgTWV0aG9kXG5cdCAqL1xuXHRcblx0ZXhwb3J0cy5vdmVyd3JpdGVNZXRob2QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKTtcblx0XG5cdC8qIVxuXHQgKiBBZGQgYSBjaGFpbmFibGUgbWV0aG9kXG5cdCAqL1xuXHRcblx0ZXhwb3J0cy5hZGRDaGFpbmFibGVNZXRob2QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzKTtcblx0XG5cdC8qIVxuXHQgKiBPdmVyd3JpdGUgY2hhaW5hYmxlIG1ldGhvZFxuXHQgKi9cblx0XG5cdGV4cG9ydHMub3ZlcndyaXRlQ2hhaW5hYmxlTWV0aG9kID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NCk7XG5cblxuLyoqKi8gfSxcbi8qIDE0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiFcblx0ICogQ2hhaSAtIHRlc3QgdXRpbGl0eVxuXHQgKiBDb3B5cmlnaHQoYykgMjAxMi0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuXHQgKiBNSVQgTGljZW5zZWRcblx0ICovXG5cdFxuXHQvKiFcblx0ICogTW9kdWxlIGRlcGVuZGFuY2llc1xuXHQgKi9cblx0XG5cdHZhciBmbGFnID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdFxuXHQvKipcblx0ICogIyB0ZXN0KG9iamVjdCwgZXhwcmVzc2lvbilcblx0ICpcblx0ICogVGVzdCBhbmQgb2JqZWN0IGZvciBleHByZXNzaW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IChjb25zdHJ1Y3RlZCBBc3NlcnRpb24pXG5cdCAqIEBwYXJhbSB7QXJndW1lbnRzfSBjaGFpLkFzc2VydGlvbi5wcm90b3R5cGUuYXNzZXJ0IGFyZ3VtZW50c1xuXHQgKi9cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9iaiwgYXJncykge1xuXHQgIHZhciBuZWdhdGUgPSBmbGFnKG9iaiwgJ25lZ2F0ZScpXG5cdCAgICAsIGV4cHIgPSBhcmdzWzBdO1xuXHQgIHJldHVybiBuZWdhdGUgPyAhZXhwciA6IGV4cHI7XG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDE1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiFcblx0ICogQ2hhaSAtIGZsYWcgdXRpbGl0eVxuXHQgKiBDb3B5cmlnaHQoYykgMjAxMi0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuXHQgKiBNSVQgTGljZW5zZWRcblx0ICovXG5cdFxuXHQvKipcblx0ICogIyMjIGZsYWcob2JqZWN0LCBrZXksIFt2YWx1ZV0pXG5cdCAqXG5cdCAqIEdldCBvciBzZXQgYSBmbGFnIHZhbHVlIG9uIGFuIG9iamVjdC4gSWYgYVxuXHQgKiB2YWx1ZSBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHNldCwgZWxzZSBpdCB3aWxsXG5cdCAqIHJldHVybiB0aGUgY3VycmVudGx5IHNldCB2YWx1ZSBvciBgdW5kZWZpbmVkYCBpZlxuXHQgKiB0aGUgdmFsdWUgaXMgbm90IHNldC5cblx0ICpcblx0ICogICAgIHV0aWxzLmZsYWcodGhpcywgJ2ZvbycsICdiYXInKTsgLy8gc2V0dGVyXG5cdCAqICAgICB1dGlscy5mbGFnKHRoaXMsICdmb28nKTsgLy8gZ2V0dGVyLCByZXR1cm5zIGBiYXJgXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgY29uc3RydWN0ZWQgQXNzZXJ0aW9uXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICogQHBhcmFtIHtNaXhlZH0gdmFsdWUgKG9wdGlvbmFsKVxuXHQgKiBAbmFtZSBmbGFnXG5cdCAqIEBhcGkgcHJpdmF0ZVxuXHQgKi9cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9iaiwga2V5LCB2YWx1ZSkge1xuXHQgIHZhciBmbGFncyA9IG9iai5fX2ZsYWdzIHx8IChvYmouX19mbGFncyA9IE9iamVjdC5jcmVhdGUobnVsbCkpO1xuXHQgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAzKSB7XG5cdCAgICBmbGFnc1trZXldID0gdmFsdWU7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBmbGFnc1trZXldO1xuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9LFxuLyogMTYgKi9cbls1MSwgMTddLFxuLyogMTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIVxuXHQgKiB0eXBlLWRldGVjdFxuXHQgKiBDb3B5cmlnaHQoYykgMjAxMyBqYWtlIGx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cblx0ICogTUlUIExpY2Vuc2VkXG5cdCAqL1xuXHRcblx0LyohXG5cdCAqIFByaW1hcnkgRXhwb3J0c1xuXHQgKi9cblx0XG5cdHZhciBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBnZXRUeXBlO1xuXHRcblx0LyoqXG5cdCAqICMjIyB0eXBlT2YgKG9iailcblx0ICpcblx0ICogVXNlIHNldmVyYWwgZGlmZmVyZW50IHRlY2huaXF1ZXMgdG8gZGV0ZXJtaW5lXG5cdCAqIHRoZSB0eXBlIG9mIG9iamVjdCBiZWluZyB0ZXN0ZWQuXG5cdCAqXG5cdCAqXG5cdCAqIEBwYXJhbSB7TWl4ZWR9IG9iamVjdFxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9IG9iamVjdCB0eXBlXG5cdCAqIEBhcGkgcHVibGljXG5cdCAqL1xuXHR2YXIgb2JqZWN0VHlwZVJlZ2V4cCA9IC9eXFxbb2JqZWN0ICguKilcXF0kLztcblx0XG5cdGZ1bmN0aW9uIGdldFR5cGUob2JqKSB7XG5cdCAgdmFyIHR5cGUgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKS5tYXRjaChvYmplY3RUeXBlUmVnZXhwKVsxXS50b0xvd2VyQ2FzZSgpO1xuXHQgIC8vIExldCBcIm5ldyBTdHJpbmcoJycpXCIgcmV0dXJuICdvYmplY3QnXG5cdCAgaWYgKHR5cGVvZiBQcm9taXNlID09PSAnZnVuY3Rpb24nICYmIG9iaiBpbnN0YW5jZW9mIFByb21pc2UpIHJldHVybiAncHJvbWlzZSc7XG5cdCAgLy8gUGhhbnRvbUpTIGhhcyB0eXBlIFwiRE9NV2luZG93XCIgZm9yIG51bGxcblx0ICBpZiAob2JqID09PSBudWxsKSByZXR1cm4gJ251bGwnO1xuXHQgIC8vIFBoYW50b21KUyBoYXMgdHlwZSBcIkRPTVdpbmRvd1wiIGZvciB1bmRlZmluZWRcblx0ICBpZiAob2JqID09PSB1bmRlZmluZWQpIHJldHVybiAndW5kZWZpbmVkJztcblx0ICByZXR1cm4gdHlwZTtcblx0fVxuXHRcblx0ZXhwb3J0cy5MaWJyYXJ5ID0gTGlicmFyeTtcblx0XG5cdC8qKlxuXHQgKiAjIyMgTGlicmFyeVxuXHQgKlxuXHQgKiBDcmVhdGUgYSByZXBvc2l0b3J5IGZvciBjdXN0b20gdHlwZSBkZXRlY3Rpb24uXG5cdCAqXG5cdCAqIGBgYGpzXG5cdCAqIHZhciBsaWIgPSBuZXcgdHlwZS5MaWJyYXJ5O1xuXHQgKiBgYGBcblx0ICpcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBMaWJyYXJ5KCkge1xuXHQgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBMaWJyYXJ5KSkgcmV0dXJuIG5ldyBMaWJyYXJ5KCk7XG5cdCAgdGhpcy50ZXN0cyA9IHt9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogIyMjIyAub2YgKG9iailcblx0ICpcblx0ICogRXhwb3NlIHJlcGxhY2VtZW50IGB0eXBlb2ZgIGRldGVjdGlvbiB0byB0aGUgbGlicmFyeS5cblx0ICpcblx0ICogYGBganNcblx0ICogaWYgKCdzdHJpbmcnID09PSBsaWIub2YoJ2hlbGxvIHdvcmxkJykpIHtcblx0ICogICAvLyAuLi5cblx0ICogfVxuXHQgKiBgYGBcblx0ICpcblx0ICogQHBhcmFtIHtNaXhlZH0gb2JqZWN0IHRvIHRlc3Rcblx0ICogQHJldHVybiB7U3RyaW5nfSB0eXBlXG5cdCAqL1xuXHRcblx0TGlicmFyeS5wcm90b3R5cGUub2YgPSBnZXRUeXBlO1xuXHRcblx0LyoqXG5cdCAqICMjIyMgLmRlZmluZSAodHlwZSwgdGVzdClcblx0ICpcblx0ICogQWRkIGEgdGVzdCB0byBmb3IgdGhlIGAudGVzdCgpYCBhc3NlcnRpb24uXG5cdCAqXG5cdCAqIENhbiBiZSBkZWZpbmVkIGFzIGEgcmVndWxhciBleHByZXNzaW9uOlxuXHQgKlxuXHQgKiBgYGBqc1xuXHQgKiBsaWIuZGVmaW5lKCdpbnQnLCAvXlswLTldKyQvKTtcblx0ICogYGBgXG5cdCAqXG5cdCAqIC4uLiBvciBhcyBhIGZ1bmN0aW9uOlxuXHQgKlxuXHQgKiBgYGBqc1xuXHQgKiBsaWIuZGVmaW5lKCdibG4nLCBmdW5jdGlvbiAob2JqKSB7XG5cdCAqICAgaWYgKCdib29sZWFuJyA9PT0gbGliLm9mKG9iaikpIHJldHVybiB0cnVlO1xuXHQgKiAgIHZhciBibG5zID0gWyAneWVzJywgJ25vJywgJ3RydWUnLCAnZmFsc2UnLCAxLCAwIF07XG5cdCAqICAgaWYgKCdzdHJpbmcnID09PSBsaWIub2Yob2JqKSkgb2JqID0gb2JqLnRvTG93ZXJDYXNlKCk7XG5cdCAqICAgcmV0dXJuICEhIH5ibG5zLmluZGV4T2Yob2JqKTtcblx0ICogfSk7XG5cdCAqIGBgYFxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuXHQgKiBAcGFyYW0ge1JlZ0V4cHxGdW5jdGlvbn0gdGVzdFxuXHQgKiBAYXBpIHB1YmxpY1xuXHQgKi9cblx0XG5cdExpYnJhcnkucHJvdG90eXBlLmRlZmluZSA9IGZ1bmN0aW9uKHR5cGUsIHRlc3QpIHtcblx0ICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkgcmV0dXJuIHRoaXMudGVzdHNbdHlwZV07XG5cdCAgdGhpcy50ZXN0c1t0eXBlXSA9IHRlc3Q7XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH07XG5cdFxuXHQvKipcblx0ICogIyMjIyAudGVzdCAob2JqLCB0ZXN0KVxuXHQgKlxuXHQgKiBBc3NlcnQgdGhhdCBhbiBvYmplY3QgaXMgb2YgdHlwZS4gV2lsbCBmaXJzdFxuXHQgKiBjaGVjayBuYXRpdmVzLCBhbmQgaWYgdGhhdCBkb2VzIG5vdCBwYXNzIGl0IHdpbGxcblx0ICogdXNlIHRoZSB1c2VyIGRlZmluZWQgY3VzdG9tIHRlc3RzLlxuXHQgKlxuXHQgKiBgYGBqc1xuXHQgKiBhc3NlcnQobGliLnRlc3QoJzEnLCAnaW50JykpO1xuXHQgKiBhc3NlcnQobGliLnRlc3QoJ3llcycsICdibG4nKSk7XG5cdCAqIGBgYFxuXHQgKlxuXHQgKiBAcGFyYW0ge01peGVkfSBvYmplY3Rcblx0ICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcblx0ICogQHJldHVybiB7Qm9vbGVhbn0gcmVzdWx0XG5cdCAqIEBhcGkgcHVibGljXG5cdCAqL1xuXHRcblx0TGlicmFyeS5wcm90b3R5cGUudGVzdCA9IGZ1bmN0aW9uKG9iaiwgdHlwZSkge1xuXHQgIGlmICh0eXBlID09PSBnZXRUeXBlKG9iaikpIHJldHVybiB0cnVlO1xuXHQgIHZhciB0ZXN0ID0gdGhpcy50ZXN0c1t0eXBlXTtcblx0XG5cdCAgaWYgKHRlc3QgJiYgJ3JlZ2V4cCcgPT09IGdldFR5cGUodGVzdCkpIHtcblx0ICAgIHJldHVybiB0ZXN0LnRlc3Qob2JqKTtcblx0ICB9IGVsc2UgaWYgKHRlc3QgJiYgJ2Z1bmN0aW9uJyA9PT0gZ2V0VHlwZSh0ZXN0KSkge1xuXHQgICAgcmV0dXJuIHRlc3Qob2JqKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCdUeXBlIHRlc3QgXCInICsgdHlwZSArICdcIiBub3QgZGVmaW5lZCBvciBpbnZhbGlkLicpO1xuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9LFxuLyogMTggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIVxuXHQgKiBDaGFpIC0gZXhwZWN0VHlwZXMgdXRpbGl0eVxuXHQgKiBDb3B5cmlnaHQoYykgMjAxMi0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuXHQgKiBNSVQgTGljZW5zZWRcblx0ICovXG5cdFxuXHQvKipcblx0ICogIyMjIGV4cGVjdFR5cGVzKG9iaiwgdHlwZXMpXG5cdCAqXG5cdCAqIEVuc3VyZXMgdGhhdCB0aGUgb2JqZWN0IGJlaW5nIHRlc3RlZCBhZ2FpbnN0IGlzIG9mIGEgdmFsaWQgdHlwZS5cblx0ICpcblx0ICogICAgIHV0aWxzLmV4cGVjdFR5cGVzKHRoaXMsIFsnYXJyYXknLCAnb2JqZWN0JywgJ3N0cmluZyddKTtcblx0ICpcblx0ICogQHBhcmFtIHtNaXhlZH0gb2JqIGNvbnN0cnVjdGVkIEFzc2VydGlvblxuXHQgKiBAcGFyYW0ge0FycmF5fSB0eXBlIEEgbGlzdCBvZiBhbGxvd2VkIHR5cGVzIGZvciB0aGlzIGFzc2VydGlvblxuXHQgKiBAbmFtZSBleHBlY3RUeXBlc1xuXHQgKiBAYXBpIHB1YmxpY1xuXHQgKi9cblx0XG5cdHZhciBBc3NlcnRpb25FcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHR2YXIgZmxhZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHR2YXIgdHlwZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2JqLCB0eXBlcykge1xuXHQgIHZhciBvYmogPSBmbGFnKG9iaiwgJ29iamVjdCcpO1xuXHQgIHR5cGVzID0gdHlwZXMubWFwKGZ1bmN0aW9uICh0KSB7IHJldHVybiB0LnRvTG93ZXJDYXNlKCk7IH0pO1xuXHQgIHR5cGVzLnNvcnQoKTtcblx0XG5cdCAgLy8gVHJhbnNmb3JtcyBbJ2xvcmVtJywgJ2lwc3VtJ10gaW50byAnYSBsaXJ1bSwgb3IgYW4gaXBzdW0nXG5cdCAgdmFyIHN0ciA9IHR5cGVzLm1hcChmdW5jdGlvbiAodCwgaW5kZXgpIHtcblx0ICAgIHZhciBhcnQgPSB+WyAnYScsICdlJywgJ2knLCAnbycsICd1JyBdLmluZGV4T2YodC5jaGFyQXQoMCkpID8gJ2FuJyA6ICdhJztcblx0ICAgIHZhciBvciA9IHR5cGVzLmxlbmd0aCA+IDEgJiYgaW5kZXggPT09IHR5cGVzLmxlbmd0aCAtIDEgPyAnb3IgJyA6ICcnO1xuXHQgICAgcmV0dXJuIG9yICsgYXJ0ICsgJyAnICsgdDtcblx0ICB9KS5qb2luKCcsICcpO1xuXHRcblx0ICBpZiAoIXR5cGVzLnNvbWUoZnVuY3Rpb24gKGV4cGVjdGVkKSB7IHJldHVybiB0eXBlKG9iaikgPT09IGV4cGVjdGVkOyB9KSkge1xuXHQgICAgdGhyb3cgbmV3IEFzc2VydGlvbkVycm9yKFxuXHQgICAgICAnb2JqZWN0IHRlc3RlZCBtdXN0IGJlICcgKyBzdHIgKyAnLCBidXQgJyArIHR5cGUob2JqKSArICcgZ2l2ZW4nXG5cdCAgICApO1xuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9LFxuLyogMTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIVxuXHQgKiBDaGFpIC0gbWVzc2FnZSBjb21wb3NpdGlvbiB1dGlsaXR5XG5cdCAqIENvcHlyaWdodChjKSAyMDEyLTIwMTQgSmFrZSBMdWVyIDxqYWtlQGFsb2dpY2FscGFyYWRveC5jb20+XG5cdCAqIE1JVCBMaWNlbnNlZFxuXHQgKi9cblx0XG5cdC8qIVxuXHQgKiBNb2R1bGUgZGVwZW5kYW5jaWVzXG5cdCAqL1xuXHRcblx0dmFyIGZsYWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KVxuXHQgICwgZ2V0QWN0dWFsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMClcblx0ICAsIGluc3BlY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKVxuXHQgICwgb2JqRGlzcGxheSA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0LyoqXG5cdCAqICMjIyAuZ2V0TWVzc2FnZShvYmplY3QsIG1lc3NhZ2UsIG5lZ2F0ZU1lc3NhZ2UpXG5cdCAqXG5cdCAqIENvbnN0cnVjdCB0aGUgZXJyb3IgbWVzc2FnZSBiYXNlZCBvbiBmbGFnc1xuXHQgKiBhbmQgdGVtcGxhdGUgdGFncy4gVGVtcGxhdGUgdGFncyB3aWxsIHJldHVyblxuXHQgKiBhIHN0cmluZ2lmaWVkIGluc3BlY3Rpb24gb2YgdGhlIG9iamVjdCByZWZlcmVuY2VkLlxuXHQgKlxuXHQgKiBNZXNzYWdlIHRlbXBsYXRlIHRhZ3M6XG5cdCAqIC0gYCN7dGhpc31gIGN1cnJlbnQgYXNzZXJ0ZWQgb2JqZWN0XG5cdCAqIC0gYCN7YWN0fWAgYWN0dWFsIHZhbHVlXG5cdCAqIC0gYCN7ZXhwfWAgZXhwZWN0ZWQgdmFsdWVcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCAoY29uc3RydWN0ZWQgQXNzZXJ0aW9uKVxuXHQgKiBAcGFyYW0ge0FyZ3VtZW50c30gY2hhaS5Bc3NlcnRpb24ucHJvdG90eXBlLmFzc2VydCBhcmd1bWVudHNcblx0ICogQG5hbWUgZ2V0TWVzc2FnZVxuXHQgKiBAYXBpIHB1YmxpY1xuXHQgKi9cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9iaiwgYXJncykge1xuXHQgIHZhciBuZWdhdGUgPSBmbGFnKG9iaiwgJ25lZ2F0ZScpXG5cdCAgICAsIHZhbCA9IGZsYWcob2JqLCAnb2JqZWN0Jylcblx0ICAgICwgZXhwZWN0ZWQgPSBhcmdzWzNdXG5cdCAgICAsIGFjdHVhbCA9IGdldEFjdHVhbChvYmosIGFyZ3MpXG5cdCAgICAsIG1zZyA9IG5lZ2F0ZSA/IGFyZ3NbMl0gOiBhcmdzWzFdXG5cdCAgICAsIGZsYWdNc2cgPSBmbGFnKG9iaiwgJ21lc3NhZ2UnKTtcblx0XG5cdCAgaWYodHlwZW9mIG1zZyA9PT0gXCJmdW5jdGlvblwiKSBtc2cgPSBtc2coKTtcblx0ICBtc2cgPSBtc2cgfHwgJyc7XG5cdCAgbXNnID0gbXNnXG5cdCAgICAucmVwbGFjZSgvI3t0aGlzfS9nLCBvYmpEaXNwbGF5KHZhbCkpXG5cdCAgICAucmVwbGFjZSgvI3thY3R9L2csIG9iakRpc3BsYXkoYWN0dWFsKSlcblx0ICAgIC5yZXBsYWNlKC8je2V4cH0vZywgb2JqRGlzcGxheShleHBlY3RlZCkpO1xuXHRcblx0ICByZXR1cm4gZmxhZ01zZyA/IGZsYWdNc2cgKyAnOiAnICsgbXNnIDogbXNnO1xuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiAyMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyohXG5cdCAqIENoYWkgLSBnZXRBY3R1YWwgdXRpbGl0eVxuXHQgKiBDb3B5cmlnaHQoYykgMjAxMi0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuXHQgKiBNSVQgTGljZW5zZWRcblx0ICovXG5cdFxuXHQvKipcblx0ICogIyBnZXRBY3R1YWwob2JqZWN0LCBbYWN0dWFsXSlcblx0ICpcblx0ICogUmV0dXJucyB0aGUgYGFjdHVhbGAgdmFsdWUgZm9yIGFuIEFzc2VydGlvblxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IChjb25zdHJ1Y3RlZCBBc3NlcnRpb24pXG5cdCAqIEBwYXJhbSB7QXJndW1lbnRzfSBjaGFpLkFzc2VydGlvbi5wcm90b3R5cGUuYXNzZXJ0IGFyZ3VtZW50c1xuXHQgKi9cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9iaiwgYXJncykge1xuXHQgIHJldHVybiBhcmdzLmxlbmd0aCA+IDQgPyBhcmdzWzRdIDogb2JqLl9vYmo7XG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDIxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBUaGlzIGlzIChhbG1vc3QpIGRpcmVjdGx5IGZyb20gTm9kZS5qcyB1dGlsc1xuXHQvLyBodHRwczovL2dpdGh1Yi5jb20vam95ZW50L25vZGUvYmxvYi9mOGMzMzVkMGNhZjQ3ZjE2ZDMxNDEzZjg5YWEyOGVkYTM4NzhlM2FhL2xpYi91dGlsLmpzXG5cdFxuXHR2YXIgZ2V0TmFtZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpO1xuXHR2YXIgZ2V0UHJvcGVydGllcyA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpO1xuXHR2YXIgZ2V0RW51bWVyYWJsZVByb3BlcnRpZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaW5zcGVjdDtcblx0XG5cdC8qKlxuXHQgKiBFY2hvcyB0aGUgdmFsdWUgb2YgYSB2YWx1ZS4gVHJ5cyB0byBwcmludCB0aGUgdmFsdWUgb3V0XG5cdCAqIGluIHRoZSBiZXN0IHdheSBwb3NzaWJsZSBnaXZlbiB0aGUgZGlmZmVyZW50IHR5cGVzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gcHJpbnQgb3V0LlxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHNob3dIaWRkZW4gRmxhZyB0aGF0IHNob3dzIGhpZGRlbiAobm90IGVudW1lcmFibGUpXG5cdCAqICAgIHByb3BlcnRpZXMgb2Ygb2JqZWN0cy5cblx0ICogQHBhcmFtIHtOdW1iZXJ9IGRlcHRoIERlcHRoIGluIHdoaWNoIHRvIGRlc2NlbmQgaW4gb2JqZWN0LiBEZWZhdWx0IGlzIDIuXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gY29sb3JzIEZsYWcgdG8gdHVybiBvbiBBTlNJIGVzY2FwZSBjb2RlcyB0byBjb2xvciB0aGVcblx0ICogICAgb3V0cHV0LiBEZWZhdWx0IGlzIGZhbHNlIChubyBjb2xvcmluZykuXG5cdCAqL1xuXHRmdW5jdGlvbiBpbnNwZWN0KG9iaiwgc2hvd0hpZGRlbiwgZGVwdGgsIGNvbG9ycykge1xuXHQgIHZhciBjdHggPSB7XG5cdCAgICBzaG93SGlkZGVuOiBzaG93SGlkZGVuLFxuXHQgICAgc2VlbjogW10sXG5cdCAgICBzdHlsaXplOiBmdW5jdGlvbiAoc3RyKSB7IHJldHVybiBzdHI7IH1cblx0ICB9O1xuXHQgIHJldHVybiBmb3JtYXRWYWx1ZShjdHgsIG9iaiwgKHR5cGVvZiBkZXB0aCA9PT0gJ3VuZGVmaW5lZCcgPyAyIDogZGVwdGgpKTtcblx0fVxuXHRcblx0Ly8gUmV0dXJucyB0cnVlIGlmIG9iamVjdCBpcyBhIERPTSBlbGVtZW50LlxuXHR2YXIgaXNET01FbGVtZW50ID0gZnVuY3Rpb24gKG9iamVjdCkge1xuXHQgIGlmICh0eXBlb2YgSFRNTEVsZW1lbnQgPT09ICdvYmplY3QnKSB7XG5cdCAgICByZXR1cm4gb2JqZWN0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQ7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBvYmplY3QgJiZcblx0ICAgICAgdHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcgJiZcblx0ICAgICAgb2JqZWN0Lm5vZGVUeXBlID09PSAxICYmXG5cdCAgICAgIHR5cGVvZiBvYmplY3Qubm9kZU5hbWUgPT09ICdzdHJpbmcnO1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIGZvcm1hdFZhbHVlKGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcykge1xuXHQgIC8vIFByb3ZpZGUgYSBob29rIGZvciB1c2VyLXNwZWNpZmllZCBpbnNwZWN0IGZ1bmN0aW9ucy5cblx0ICAvLyBDaGVjayB0aGF0IHZhbHVlIGlzIGFuIG9iamVjdCB3aXRoIGFuIGluc3BlY3QgZnVuY3Rpb24gb24gaXRcblx0ICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlLmluc3BlY3QgPT09ICdmdW5jdGlvbicgJiZcblx0ICAgICAgLy8gRmlsdGVyIG91dCB0aGUgdXRpbCBtb2R1bGUsIGl0J3MgaW5zcGVjdCBmdW5jdGlvbiBpcyBzcGVjaWFsXG5cdCAgICAgIHZhbHVlLmluc3BlY3QgIT09IGV4cG9ydHMuaW5zcGVjdCAmJlxuXHQgICAgICAvLyBBbHNvIGZpbHRlciBvdXQgYW55IHByb3RvdHlwZSBvYmplY3RzIHVzaW5nIHRoZSBjaXJjdWxhciBjaGVjay5cblx0ICAgICAgISh2YWx1ZS5jb25zdHJ1Y3RvciAmJiB2YWx1ZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgPT09IHZhbHVlKSkge1xuXHQgICAgdmFyIHJldCA9IHZhbHVlLmluc3BlY3QocmVjdXJzZVRpbWVzKTtcblx0ICAgIGlmICh0eXBlb2YgcmV0ICE9PSAnc3RyaW5nJykge1xuXHQgICAgICByZXQgPSBmb3JtYXRWYWx1ZShjdHgsIHJldCwgcmVjdXJzZVRpbWVzKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiByZXQ7XG5cdCAgfVxuXHRcblx0ICAvLyBQcmltaXRpdmUgdHlwZXMgY2Fubm90IGhhdmUgcHJvcGVydGllc1xuXHQgIHZhciBwcmltaXRpdmUgPSBmb3JtYXRQcmltaXRpdmUoY3R4LCB2YWx1ZSk7XG5cdCAgaWYgKHByaW1pdGl2ZSkge1xuXHQgICAgcmV0dXJuIHByaW1pdGl2ZTtcblx0ICB9XG5cdFxuXHQgIC8vIElmIHRoaXMgaXMgYSBET00gZWxlbWVudCwgdHJ5IHRvIGdldCB0aGUgb3V0ZXIgSFRNTC5cblx0ICBpZiAoaXNET01FbGVtZW50KHZhbHVlKSkge1xuXHQgICAgaWYgKCdvdXRlckhUTUwnIGluIHZhbHVlKSB7XG5cdCAgICAgIHJldHVybiB2YWx1ZS5vdXRlckhUTUw7XG5cdCAgICAgIC8vIFRoaXMgdmFsdWUgZG9lcyBub3QgaGF2ZSBhbiBvdXRlckhUTUwgYXR0cmlidXRlLFxuXHQgICAgICAvLyAgIGl0IGNvdWxkIHN0aWxsIGJlIGFuIFhNTCBlbGVtZW50XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBBdHRlbXB0IHRvIHNlcmlhbGl6ZSBpdFxuXHQgICAgICB0cnkge1xuXHQgICAgICAgIGlmIChkb2N1bWVudC54bWxWZXJzaW9uKSB7XG5cdCAgICAgICAgICB2YXIgeG1sU2VyaWFsaXplciA9IG5ldyBYTUxTZXJpYWxpemVyKCk7XG5cdCAgICAgICAgICByZXR1cm4geG1sU2VyaWFsaXplci5zZXJpYWxpemVUb1N0cmluZyh2YWx1ZSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIC8vIEZpcmVmb3ggMTEtIGRvIG5vdCBzdXBwb3J0IG91dGVySFRNTFxuXHQgICAgICAgICAgLy8gICBJdCBkb2VzLCBob3dldmVyLCBzdXBwb3J0IGlubmVySFRNTFxuXHQgICAgICAgICAgLy8gICBVc2UgdGhlIGZvbGxvd2luZyB0byByZW5kZXIgdGhlIGVsZW1lbnRcblx0ICAgICAgICAgIHZhciBucyA9IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiO1xuXHQgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhucywgJ18nKTtcblx0XG5cdCAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodmFsdWUuY2xvbmVOb2RlKGZhbHNlKSk7XG5cdCAgICAgICAgICBodG1sID0gY29udGFpbmVyLmlubmVySFRNTFxuXHQgICAgICAgICAgICAucmVwbGFjZSgnPjwnLCAnPicgKyB2YWx1ZS5pbm5lckhUTUwgKyAnPCcpO1xuXHQgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuXHQgICAgICAgICAgcmV0dXJuIGh0bWw7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAvLyBUaGlzIGNvdWxkIGJlIGEgbm9uLW5hdGl2ZSBET00gaW1wbGVtZW50YXRpb24sXG5cdCAgICAgICAgLy8gICBjb250aW51ZSB3aXRoIHRoZSBub3JtYWwgZmxvdzpcblx0ICAgICAgICAvLyAgIHByaW50aW5nIHRoZSBlbGVtZW50IGFzIGlmIGl0IGlzIGFuIG9iamVjdC5cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLy8gTG9vayB1cCB0aGUga2V5cyBvZiB0aGUgb2JqZWN0LlxuXHQgIHZhciB2aXNpYmxlS2V5cyA9IGdldEVudW1lcmFibGVQcm9wZXJ0aWVzKHZhbHVlKTtcblx0ICB2YXIga2V5cyA9IGN0eC5zaG93SGlkZGVuID8gZ2V0UHJvcGVydGllcyh2YWx1ZSkgOiB2aXNpYmxlS2V5cztcblx0XG5cdCAgLy8gU29tZSB0eXBlIG9mIG9iamVjdCB3aXRob3V0IHByb3BlcnRpZXMgY2FuIGJlIHNob3J0Y3V0dGVkLlxuXHQgIC8vIEluIElFLCBlcnJvcnMgaGF2ZSBhIHNpbmdsZSBgc3RhY2tgIHByb3BlcnR5LCBvciBpZiB0aGV5IGFyZSB2YW5pbGxhIGBFcnJvcmAsXG5cdCAgLy8gYSBgc3RhY2tgIHBsdXMgYGRlc2NyaXB0aW9uYCBwcm9wZXJ0eTsgaWdub3JlIHRob3NlIGZvciBjb25zaXN0ZW5jeS5cblx0ICBpZiAoa2V5cy5sZW5ndGggPT09IDAgfHwgKGlzRXJyb3IodmFsdWUpICYmIChcblx0ICAgICAgKGtleXMubGVuZ3RoID09PSAxICYmIGtleXNbMF0gPT09ICdzdGFjaycpIHx8XG5cdCAgICAgIChrZXlzLmxlbmd0aCA9PT0gMiAmJiBrZXlzWzBdID09PSAnZGVzY3JpcHRpb24nICYmIGtleXNbMV0gPT09ICdzdGFjaycpXG5cdCAgICAgKSkpIHtcblx0ICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgdmFyIG5hbWUgPSBnZXROYW1lKHZhbHVlKTtcblx0ICAgICAgdmFyIG5hbWVTdWZmaXggPSBuYW1lID8gJzogJyArIG5hbWUgOiAnJztcblx0ICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKCdbRnVuY3Rpb24nICsgbmFtZVN1ZmZpeCArICddJywgJ3NwZWNpYWwnKTtcblx0ICAgIH1cblx0ICAgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcblx0ICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdyZWdleHAnKTtcblx0ICAgIH1cblx0ICAgIGlmIChpc0RhdGUodmFsdWUpKSB7XG5cdCAgICAgIHJldHVybiBjdHguc3R5bGl6ZShEYXRlLnByb3RvdHlwZS50b1VUQ1N0cmluZy5jYWxsKHZhbHVlKSwgJ2RhdGUnKTtcblx0ICAgIH1cblx0ICAgIGlmIChpc0Vycm9yKHZhbHVlKSkge1xuXHQgICAgICByZXR1cm4gZm9ybWF0RXJyb3IodmFsdWUpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgdmFyIGJhc2UgPSAnJywgYXJyYXkgPSBmYWxzZSwgYnJhY2VzID0gWyd7JywgJ30nXTtcblx0XG5cdCAgLy8gTWFrZSBBcnJheSBzYXkgdGhhdCB0aGV5IGFyZSBBcnJheVxuXHQgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuXHQgICAgYXJyYXkgPSB0cnVlO1xuXHQgICAgYnJhY2VzID0gWydbJywgJ10nXTtcblx0ICB9XG5cdFxuXHQgIC8vIE1ha2UgZnVuY3Rpb25zIHNheSB0aGF0IHRoZXkgYXJlIGZ1bmN0aW9uc1xuXHQgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHZhciBuYW1lID0gZ2V0TmFtZSh2YWx1ZSk7XG5cdCAgICB2YXIgbmFtZVN1ZmZpeCA9IG5hbWUgPyAnOiAnICsgbmFtZSA6ICcnO1xuXHQgICAgYmFzZSA9ICcgW0Z1bmN0aW9uJyArIG5hbWVTdWZmaXggKyAnXSc7XG5cdCAgfVxuXHRcblx0ICAvLyBNYWtlIFJlZ0V4cHMgc2F5IHRoYXQgdGhleSBhcmUgUmVnRXhwc1xuXHQgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcblx0ICAgIGJhc2UgPSAnICcgKyBSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpO1xuXHQgIH1cblx0XG5cdCAgLy8gTWFrZSBkYXRlcyB3aXRoIHByb3BlcnRpZXMgZmlyc3Qgc2F5IHRoZSBkYXRlXG5cdCAgaWYgKGlzRGF0ZSh2YWx1ZSkpIHtcblx0ICAgIGJhc2UgPSAnICcgKyBEYXRlLnByb3RvdHlwZS50b1VUQ1N0cmluZy5jYWxsKHZhbHVlKTtcblx0ICB9XG5cdFxuXHQgIC8vIE1ha2UgZXJyb3Igd2l0aCBtZXNzYWdlIGZpcnN0IHNheSB0aGUgZXJyb3Jcblx0ICBpZiAoaXNFcnJvcih2YWx1ZSkpIHtcblx0ICAgIHJldHVybiBmb3JtYXRFcnJvcih2YWx1ZSk7XG5cdCAgfVxuXHRcblx0ICBpZiAoa2V5cy5sZW5ndGggPT09IDAgJiYgKCFhcnJheSB8fCB2YWx1ZS5sZW5ndGggPT0gMCkpIHtcblx0ICAgIHJldHVybiBicmFjZXNbMF0gKyBiYXNlICsgYnJhY2VzWzFdO1xuXHQgIH1cblx0XG5cdCAgaWYgKHJlY3Vyc2VUaW1lcyA8IDApIHtcblx0ICAgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcblx0ICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdyZWdleHAnKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiBjdHguc3R5bGl6ZSgnW09iamVjdF0nLCAnc3BlY2lhbCcpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgY3R4LnNlZW4ucHVzaCh2YWx1ZSk7XG5cdFxuXHQgIHZhciBvdXRwdXQ7XG5cdCAgaWYgKGFycmF5KSB7XG5cdCAgICBvdXRwdXQgPSBmb3JtYXRBcnJheShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXlzKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgb3V0cHV0ID0ga2V5cy5tYXAoZnVuY3Rpb24oa2V5KSB7XG5cdCAgICAgIHJldHVybiBmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXksIGFycmF5KTtcblx0ICAgIH0pO1xuXHQgIH1cblx0XG5cdCAgY3R4LnNlZW4ucG9wKCk7XG5cdFxuXHQgIHJldHVybiByZWR1Y2VUb1NpbmdsZVN0cmluZyhvdXRwdXQsIGJhc2UsIGJyYWNlcyk7XG5cdH1cblx0XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRQcmltaXRpdmUoY3R4LCB2YWx1ZSkge1xuXHQgIHN3aXRjaCAodHlwZW9mIHZhbHVlKSB7XG5cdCAgICBjYXNlICd1bmRlZmluZWQnOlxuXHQgICAgICByZXR1cm4gY3R4LnN0eWxpemUoJ3VuZGVmaW5lZCcsICd1bmRlZmluZWQnKTtcblx0XG5cdCAgICBjYXNlICdzdHJpbmcnOlxuXHQgICAgICB2YXIgc2ltcGxlID0gJ1xcJycgKyBKU09OLnN0cmluZ2lmeSh2YWx1ZSkucmVwbGFjZSgvXlwifFwiJC9nLCAnJylcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvJy9nLCBcIlxcXFwnXCIpXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcXFxcIi9nLCAnXCInKSArICdcXCcnO1xuXHQgICAgICByZXR1cm4gY3R4LnN0eWxpemUoc2ltcGxlLCAnc3RyaW5nJyk7XG5cdFxuXHQgICAgY2FzZSAnbnVtYmVyJzpcblx0ICAgICAgaWYgKHZhbHVlID09PSAwICYmICgxL3ZhbHVlKSA9PT0gLUluZmluaXR5KSB7XG5cdCAgICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKCctMCcsICdudW1iZXInKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gY3R4LnN0eWxpemUoJycgKyB2YWx1ZSwgJ251bWJlcicpO1xuXHRcblx0ICAgIGNhc2UgJ2Jvb2xlYW4nOlxuXHQgICAgICByZXR1cm4gY3R4LnN0eWxpemUoJycgKyB2YWx1ZSwgJ2Jvb2xlYW4nKTtcblx0ICB9XG5cdCAgLy8gRm9yIHNvbWUgcmVhc29uIHR5cGVvZiBudWxsIGlzIFwib2JqZWN0XCIsIHNvIHNwZWNpYWwgY2FzZSBoZXJlLlxuXHQgIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuXHQgICAgcmV0dXJuIGN0eC5zdHlsaXplKCdudWxsJywgJ251bGwnKTtcblx0ICB9XG5cdH1cblx0XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRFcnJvcih2YWx1ZSkge1xuXHQgIHJldHVybiAnWycgKyBFcnJvci5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSkgKyAnXSc7XG5cdH1cblx0XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRBcnJheShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXlzKSB7XG5cdCAgdmFyIG91dHB1dCA9IFtdO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG5cdCAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCBTdHJpbmcoaSkpKSB7XG5cdCAgICAgIG91dHB1dC5wdXNoKGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsXG5cdCAgICAgICAgICBTdHJpbmcoaSksIHRydWUpKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIG91dHB1dC5wdXNoKCcnKTtcblx0ICAgIH1cblx0ICB9XG5cdCAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuXHQgICAgaWYgKCFrZXkubWF0Y2goL15cXGQrJC8pKSB7XG5cdCAgICAgIG91dHB1dC5wdXNoKGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsXG5cdCAgICAgICAgICBrZXksIHRydWUpKTtcblx0ICAgIH1cblx0ICB9KTtcblx0ICByZXR1cm4gb3V0cHV0O1xuXHR9XG5cdFxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5LCBhcnJheSkge1xuXHQgIHZhciBuYW1lLCBzdHI7XG5cdCAgaWYgKHZhbHVlLl9fbG9va3VwR2V0dGVyX18pIHtcblx0ICAgIGlmICh2YWx1ZS5fX2xvb2t1cEdldHRlcl9fKGtleSkpIHtcblx0ICAgICAgaWYgKHZhbHVlLl9fbG9va3VwU2V0dGVyX18oa2V5KSkge1xuXHQgICAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbR2V0dGVyL1NldHRlcl0nLCAnc3BlY2lhbCcpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbR2V0dGVyXScsICdzcGVjaWFsJyk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGlmICh2YWx1ZS5fX2xvb2t1cFNldHRlcl9fKGtleSkpIHtcblx0ICAgICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW1NldHRlcl0nLCAnc3BlY2lhbCcpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIGlmICh2aXNpYmxlS2V5cy5pbmRleE9mKGtleSkgPCAwKSB7XG5cdCAgICBuYW1lID0gJ1snICsga2V5ICsgJ10nO1xuXHQgIH1cblx0ICBpZiAoIXN0cikge1xuXHQgICAgaWYgKGN0eC5zZWVuLmluZGV4T2YodmFsdWVba2V5XSkgPCAwKSB7XG5cdCAgICAgIGlmIChyZWN1cnNlVGltZXMgPT09IG51bGwpIHtcblx0ICAgICAgICBzdHIgPSBmb3JtYXRWYWx1ZShjdHgsIHZhbHVlW2tleV0sIG51bGwpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHN0ciA9IGZvcm1hdFZhbHVlKGN0eCwgdmFsdWVba2V5XSwgcmVjdXJzZVRpbWVzIC0gMSk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHN0ci5pbmRleE9mKCdcXG4nKSA+IC0xKSB7XG5cdCAgICAgICAgaWYgKGFycmF5KSB7XG5cdCAgICAgICAgICBzdHIgPSBzdHIuc3BsaXQoJ1xcbicpLm1hcChmdW5jdGlvbihsaW5lKSB7XG5cdCAgICAgICAgICAgIHJldHVybiAnICAnICsgbGluZTtcblx0ICAgICAgICAgIH0pLmpvaW4oJ1xcbicpLnN1YnN0cigyKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgc3RyID0gJ1xcbicgKyBzdHIuc3BsaXQoJ1xcbicpLm1hcChmdW5jdGlvbihsaW5lKSB7XG5cdCAgICAgICAgICAgIHJldHVybiAnICAgJyArIGxpbmU7XG5cdCAgICAgICAgICB9KS5qb2luKCdcXG4nKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbQ2lyY3VsYXJdJywgJ3NwZWNpYWwnKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgaWYgKHR5cGVvZiBuYW1lID09PSAndW5kZWZpbmVkJykge1xuXHQgICAgaWYgKGFycmF5ICYmIGtleS5tYXRjaCgvXlxcZCskLykpIHtcblx0ICAgICAgcmV0dXJuIHN0cjtcblx0ICAgIH1cblx0ICAgIG5hbWUgPSBKU09OLnN0cmluZ2lmeSgnJyArIGtleSk7XG5cdCAgICBpZiAobmFtZS5tYXRjaCgvXlwiKFthLXpBLVpfXVthLXpBLVpfMC05XSopXCIkLykpIHtcblx0ICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyKDEsIG5hbWUubGVuZ3RoIC0gMik7XG5cdCAgICAgIG5hbWUgPSBjdHguc3R5bGl6ZShuYW1lLCAnbmFtZScpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvJy9nLCBcIlxcXFwnXCIpXG5cdCAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcXFxcIi9nLCAnXCInKVxuXHQgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8oXlwifFwiJCkvZywgXCInXCIpO1xuXHQgICAgICBuYW1lID0gY3R4LnN0eWxpemUobmFtZSwgJ3N0cmluZycpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIG5hbWUgKyAnOiAnICsgc3RyO1xuXHR9XG5cdFxuXHRcblx0ZnVuY3Rpb24gcmVkdWNlVG9TaW5nbGVTdHJpbmcob3V0cHV0LCBiYXNlLCBicmFjZXMpIHtcblx0ICB2YXIgbnVtTGluZXNFc3QgPSAwO1xuXHQgIHZhciBsZW5ndGggPSBvdXRwdXQucmVkdWNlKGZ1bmN0aW9uKHByZXYsIGN1cikge1xuXHQgICAgbnVtTGluZXNFc3QrKztcblx0ICAgIGlmIChjdXIuaW5kZXhPZignXFxuJykgPj0gMCkgbnVtTGluZXNFc3QrKztcblx0ICAgIHJldHVybiBwcmV2ICsgY3VyLmxlbmd0aCArIDE7XG5cdCAgfSwgMCk7XG5cdFxuXHQgIGlmIChsZW5ndGggPiA2MCkge1xuXHQgICAgcmV0dXJuIGJyYWNlc1swXSArXG5cdCAgICAgICAgICAgKGJhc2UgPT09ICcnID8gJycgOiBiYXNlICsgJ1xcbiAnKSArXG5cdCAgICAgICAgICAgJyAnICtcblx0ICAgICAgICAgICBvdXRwdXQuam9pbignLFxcbiAgJykgK1xuXHQgICAgICAgICAgICcgJyArXG5cdCAgICAgICAgICAgYnJhY2VzWzFdO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGJyYWNlc1swXSArIGJhc2UgKyAnICcgKyBvdXRwdXQuam9pbignLCAnKSArICcgJyArIGJyYWNlc1sxXTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNBcnJheShhcikge1xuXHQgIHJldHVybiBBcnJheS5pc0FycmF5KGFyKSB8fFxuXHQgICAgICAgICAodHlwZW9mIGFyID09PSAnb2JqZWN0JyAmJiBvYmplY3RUb1N0cmluZyhhcikgPT09ICdbb2JqZWN0IEFycmF5XScpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc1JlZ0V4cChyZSkge1xuXHQgIHJldHVybiB0eXBlb2YgcmUgPT09ICdvYmplY3QnICYmIG9iamVjdFRvU3RyaW5nKHJlKSA9PT0gJ1tvYmplY3QgUmVnRXhwXSc7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzRGF0ZShkKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBkID09PSAnb2JqZWN0JyAmJiBvYmplY3RUb1N0cmluZyhkKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc0Vycm9yKGUpIHtcblx0ICByZXR1cm4gdHlwZW9mIGUgPT09ICdvYmplY3QnICYmIG9iamVjdFRvU3RyaW5nKGUpID09PSAnW29iamVjdCBFcnJvcl0nO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBvYmplY3RUb1N0cmluZyhvKSB7XG5cdCAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKTtcblx0fVxuXG5cbi8qKiovIH0sXG4vKiAyMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyohXG5cdCAqIENoYWkgLSBnZXROYW1lIHV0aWxpdHlcblx0ICogQ29weXJpZ2h0KGMpIDIwMTItMjAxNCBKYWtlIEx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cblx0ICogTUlUIExpY2Vuc2VkXG5cdCAqL1xuXHRcblx0LyoqXG5cdCAqICMgZ2V0TmFtZShmdW5jKVxuXHQgKlxuXHQgKiBHZXRzIHRoZSBuYW1lIG9mIGEgZnVuY3Rpb24sIGluIGEgY3Jvc3MtYnJvd3NlciB3YXkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGEgZnVuY3Rpb24gKHVzdWFsbHkgYSBjb25zdHJ1Y3Rvcilcblx0ICovXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChmdW5jKSB7XG5cdCAgaWYgKGZ1bmMubmFtZSkgcmV0dXJuIGZ1bmMubmFtZTtcblx0XG5cdCAgdmFyIG1hdGNoID0gL15cXHM/ZnVuY3Rpb24gKFteKF0qKVxcKC8uZXhlYyhmdW5jKTtcblx0ICByZXR1cm4gbWF0Y2ggJiYgbWF0Y2hbMV0gPyBtYXRjaFsxXSA6IFwiXCI7XG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDIzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiFcblx0ICogQ2hhaSAtIGdldFByb3BlcnRpZXMgdXRpbGl0eVxuXHQgKiBDb3B5cmlnaHQoYykgMjAxMi0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuXHQgKiBNSVQgTGljZW5zZWRcblx0ICovXG5cdFxuXHQvKipcblx0ICogIyMjIC5nZXRQcm9wZXJ0aWVzKG9iamVjdClcblx0ICpcblx0ICogVGhpcyBhbGxvd3MgdGhlIHJldHJpZXZhbCBvZiBwcm9wZXJ0eSBuYW1lcyBvZiBhbiBvYmplY3QsIGVudW1lcmFibGUgb3Igbm90LFxuXHQgKiBpbmhlcml0ZWQgb3Igbm90LlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG5cdCAqIEByZXR1cm5zIHtBcnJheX1cblx0ICogQG5hbWUgZ2V0UHJvcGVydGllc1xuXHQgKiBAYXBpIHB1YmxpY1xuXHQgKi9cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZ2V0UHJvcGVydGllcyhvYmplY3QpIHtcblx0ICB2YXIgcmVzdWx0ID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMob2JqZWN0KTtcblx0XG5cdCAgZnVuY3Rpb24gYWRkUHJvcGVydHkocHJvcGVydHkpIHtcblx0ICAgIGlmIChyZXN1bHQuaW5kZXhPZihwcm9wZXJ0eSkgPT09IC0xKSB7XG5cdCAgICAgIHJlc3VsdC5wdXNoKHByb3BlcnR5KTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHZhciBwcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpO1xuXHQgIHdoaWxlIChwcm90byAhPT0gbnVsbCkge1xuXHQgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMocHJvdG8pLmZvckVhY2goYWRkUHJvcGVydHkpO1xuXHQgICAgcHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YocHJvdG8pO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fTtcblxuXG4vKioqLyB9LFxuLyogMjQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIVxuXHQgKiBDaGFpIC0gZ2V0RW51bWVyYWJsZVByb3BlcnRpZXMgdXRpbGl0eVxuXHQgKiBDb3B5cmlnaHQoYykgMjAxMi0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuXHQgKiBNSVQgTGljZW5zZWRcblx0ICovXG5cdFxuXHQvKipcblx0ICogIyMjIC5nZXRFbnVtZXJhYmxlUHJvcGVydGllcyhvYmplY3QpXG5cdCAqXG5cdCAqIFRoaXMgYWxsb3dzIHRoZSByZXRyaWV2YWwgb2YgZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBvZiBhbiBvYmplY3QsXG5cdCAqIGluaGVyaXRlZCBvciBub3QuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3Rcblx0ICogQHJldHVybnMge0FycmF5fVxuXHQgKiBAbmFtZSBnZXRFbnVtZXJhYmxlUHJvcGVydGllc1xuXHQgKiBAYXBpIHB1YmxpY1xuXHQgKi9cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZ2V0RW51bWVyYWJsZVByb3BlcnRpZXMob2JqZWN0KSB7XG5cdCAgdmFyIHJlc3VsdCA9IFtdO1xuXHQgIGZvciAodmFyIG5hbWUgaW4gb2JqZWN0KSB7XG5cdCAgICByZXN1bHQucHVzaChuYW1lKTtcblx0ICB9XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fTtcblxuXG4vKioqLyB9LFxuLyogMjUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIVxuXHQgKiBDaGFpIC0gZmxhZyB1dGlsaXR5XG5cdCAqIENvcHlyaWdodChjKSAyMDEyLTIwMTQgSmFrZSBMdWVyIDxqYWtlQGFsb2dpY2FscGFyYWRveC5jb20+XG5cdCAqIE1JVCBMaWNlbnNlZFxuXHQgKi9cblx0XG5cdC8qIVxuXHQgKiBNb2R1bGUgZGVwZW5kYW5jaWVzXG5cdCAqL1xuXHRcblx0dmFyIGluc3BlY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0dmFyIGNvbmZpZyA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXHRcblx0LyoqXG5cdCAqICMjIyAub2JqRGlzcGxheSAob2JqZWN0KVxuXHQgKlxuXHQgKiBEZXRlcm1pbmVzIGlmIGFuIG9iamVjdCBvciBhbiBhcnJheSBtYXRjaGVzXG5cdCAqIGNyaXRlcmlhIHRvIGJlIGluc3BlY3RlZCBpbi1saW5lIGZvciBlcnJvclxuXHQgKiBtZXNzYWdlcyBvciBzaG91bGQgYmUgdHJ1bmNhdGVkLlxuXHQgKlxuXHQgKiBAcGFyYW0ge01peGVkfSBqYXZhc2NyaXB0IG9iamVjdCB0byBpbnNwZWN0XG5cdCAqIEBuYW1lIG9iakRpc3BsYXlcblx0ICogQGFwaSBwdWJsaWNcblx0ICovXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvYmopIHtcblx0ICB2YXIgc3RyID0gaW5zcGVjdChvYmopXG5cdCAgICAsIHR5cGUgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKTtcblx0XG5cdCAgaWYgKGNvbmZpZy50cnVuY2F0ZVRocmVzaG9sZCAmJiBzdHIubGVuZ3RoID49IGNvbmZpZy50cnVuY2F0ZVRocmVzaG9sZCkge1xuXHQgICAgaWYgKHR5cGUgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXScpIHtcblx0ICAgICAgcmV0dXJuICFvYmoubmFtZSB8fCBvYmoubmFtZSA9PT0gJydcblx0ICAgICAgICA/ICdbRnVuY3Rpb25dJ1xuXHQgICAgICAgIDogJ1tGdW5jdGlvbjogJyArIG9iai5uYW1lICsgJ10nO1xuXHQgICAgfSBlbHNlIGlmICh0eXBlID09PSAnW29iamVjdCBBcnJheV0nKSB7XG5cdCAgICAgIHJldHVybiAnWyBBcnJheSgnICsgb2JqLmxlbmd0aCArICcpIF0nO1xuXHQgICAgfSBlbHNlIGlmICh0eXBlID09PSAnW29iamVjdCBPYmplY3RdJykge1xuXHQgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iailcblx0ICAgICAgICAsIGtzdHIgPSBrZXlzLmxlbmd0aCA+IDJcblx0ICAgICAgICAgID8ga2V5cy5zcGxpY2UoMCwgMikuam9pbignLCAnKSArICcsIC4uLidcblx0ICAgICAgICAgIDoga2V5cy5qb2luKCcsICcpO1xuXHQgICAgICByZXR1cm4gJ3sgT2JqZWN0ICgnICsga3N0ciArICcpIH0nO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuIHN0cjtcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIHN0cjtcblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDI2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIGNvbmZpZy5pbmNsdWRlU3RhY2tcblx0ICAgKlxuXHQgICAqIFVzZXIgY29uZmlndXJhYmxlIHByb3BlcnR5LCBpbmZsdWVuY2VzIHdoZXRoZXIgc3RhY2sgdHJhY2Vcblx0ICAgKiBpcyBpbmNsdWRlZCBpbiBBc3NlcnRpb24gZXJyb3IgbWVzc2FnZS4gRGVmYXVsdCBvZiBmYWxzZVxuXHQgICAqIHN1cHByZXNzZXMgc3RhY2sgdHJhY2UgaW4gdGhlIGVycm9yIG1lc3NhZ2UuXG5cdCAgICpcblx0ICAgKiAgICAgY2hhaS5jb25maWcuaW5jbHVkZVN0YWNrID0gdHJ1ZTsgIC8vIGVuYWJsZSBzdGFjayBvbiBlcnJvclxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtCb29sZWFufVxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgICBpbmNsdWRlU3RhY2s6IGZhbHNlLFxuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgY29uZmlnLnNob3dEaWZmXG5cdCAgICpcblx0ICAgKiBVc2VyIGNvbmZpZ3VyYWJsZSBwcm9wZXJ0eSwgaW5mbHVlbmNlcyB3aGV0aGVyIG9yIG5vdFxuXHQgICAqIHRoZSBgc2hvd0RpZmZgIGZsYWcgc2hvdWxkIGJlIGluY2x1ZGVkIGluIHRoZSB0aHJvd25cblx0ICAgKiBBc3NlcnRpb25FcnJvcnMuIGBmYWxzZWAgd2lsbCBhbHdheXMgYmUgYGZhbHNlYDsgYHRydWVgXG5cdCAgICogd2lsbCBiZSB0cnVlIHdoZW4gdGhlIGFzc2VydGlvbiBoYXMgcmVxdWVzdGVkIGEgZGlmZlxuXHQgICAqIGJlIHNob3duLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtCb29sZWFufVxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIHNob3dEaWZmOiB0cnVlLFxuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgY29uZmlnLnRydW5jYXRlVGhyZXNob2xkXG5cdCAgICpcblx0ICAgKiBVc2VyIGNvbmZpZ3VyYWJsZSBwcm9wZXJ0eSwgc2V0cyBsZW5ndGggdGhyZXNob2xkIGZvciBhY3R1YWwgYW5kXG5cdCAgICogZXhwZWN0ZWQgdmFsdWVzIGluIGFzc2VydGlvbiBlcnJvcnMuIElmIHRoaXMgdGhyZXNob2xkIGlzIGV4Y2VlZGVkLCBmb3Jcblx0ICAgKiBleGFtcGxlIGZvciBsYXJnZSBkYXRhIHN0cnVjdHVyZXMsIHRoZSB2YWx1ZSBpcyByZXBsYWNlZCB3aXRoIHNvbWV0aGluZ1xuXHQgICAqIGxpa2UgYFsgQXJyYXkoMykgXWAgb3IgYHsgT2JqZWN0IChwcm9wMSwgcHJvcDIpIH1gLlxuXHQgICAqXG5cdCAgICogU2V0IGl0IHRvIHplcm8gaWYgeW91IHdhbnQgdG8gZGlzYWJsZSB0cnVuY2F0aW5nIGFsdG9nZXRoZXIuXG5cdCAgICpcblx0ICAgKiBUaGlzIGlzIGVzcGVjaWFsbHkgdXNlcmZ1bCB3aGVuIGRvaW5nIGFzc2VydGlvbnMgb24gYXJyYXlzOiBoYXZpbmcgdGhpc1xuXHQgICAqIHNldCB0byBhIHJlYXNvbmFibGUgbGFyZ2UgdmFsdWUgbWFrZXMgdGhlIGZhaWx1cmUgbWVzc2FnZXMgcmVhZGlseVxuXHQgICAqIGluc3BlY3RhYmxlLlxuXHQgICAqXG5cdCAgICogICAgIGNoYWkuY29uZmlnLnRydW5jYXRlVGhyZXNob2xkID0gMDsgIC8vIGRpc2FibGUgdHJ1bmNhdGluZ1xuXHQgICAqXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9XG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgdHJ1bmNhdGVUaHJlc2hvbGQ6IDQwXG5cdFxuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiAyNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyohXG5cdCAqIENoYWkgLSB0cmFuc2ZlckZsYWdzIHV0aWxpdHlcblx0ICogQ29weXJpZ2h0KGMpIDIwMTItMjAxNCBKYWtlIEx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cblx0ICogTUlUIExpY2Vuc2VkXG5cdCAqL1xuXHRcblx0LyoqXG5cdCAqICMjIyB0cmFuc2ZlckZsYWdzKGFzc2VydGlvbiwgb2JqZWN0LCBpbmNsdWRlQWxsID0gdHJ1ZSlcblx0ICpcblx0ICogVHJhbnNmZXIgYWxsIHRoZSBmbGFncyBmb3IgYGFzc2VydGlvbmAgdG8gYG9iamVjdGAuIElmXG5cdCAqIGBpbmNsdWRlQWxsYCBpcyBzZXQgdG8gYGZhbHNlYCwgdGhlbiB0aGUgYmFzZSBDaGFpXG5cdCAqIGFzc2VydGlvbiBmbGFncyAobmFtZWx5IGBvYmplY3RgLCBgc3NmaWAsIGFuZCBgbWVzc2FnZWApXG5cdCAqIHdpbGwgbm90IGJlIHRyYW5zZmVycmVkLlxuXHQgKlxuXHQgKlxuXHQgKiAgICAgdmFyIG5ld0Fzc2VydGlvbiA9IG5ldyBBc3NlcnRpb24oKTtcblx0ICogICAgIHV0aWxzLnRyYW5zZmVyRmxhZ3MoYXNzZXJ0aW9uLCBuZXdBc3NlcnRpb24pO1xuXHQgKlxuXHQgKiAgICAgdmFyIGFub3RoZXJBc3Nlcml0b24gPSBuZXcgQXNzZXJ0aW9uKG15T2JqKTtcblx0ICogICAgIHV0aWxzLnRyYW5zZmVyRmxhZ3MoYXNzZXJ0aW9uLCBhbm90aGVyQXNzZXJ0aW9uLCBmYWxzZSk7XG5cdCAqXG5cdCAqIEBwYXJhbSB7QXNzZXJ0aW9ufSBhc3NlcnRpb24gdGhlIGFzc2VydGlvbiB0byB0cmFuc2ZlciB0aGUgZmxhZ3MgZnJvbVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IHRoZSBvYmplY3QgdG8gdHJhbnNmZXIgdGhlIGZsYWdzIHRvOyB1c3VhbGx5IGEgbmV3IGFzc2VydGlvblxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IGluY2x1ZGVBbGxcblx0ICogQG5hbWUgdHJhbnNmZXJGbGFnc1xuXHQgKiBAYXBpIHByaXZhdGVcblx0ICovXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhc3NlcnRpb24sIG9iamVjdCwgaW5jbHVkZUFsbCkge1xuXHQgIHZhciBmbGFncyA9IGFzc2VydGlvbi5fX2ZsYWdzIHx8IChhc3NlcnRpb24uX19mbGFncyA9IE9iamVjdC5jcmVhdGUobnVsbCkpO1xuXHRcblx0ICBpZiAoIW9iamVjdC5fX2ZsYWdzKSB7XG5cdCAgICBvYmplY3QuX19mbGFncyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgfVxuXHRcblx0ICBpbmNsdWRlQWxsID0gYXJndW1lbnRzLmxlbmd0aCA9PT0gMyA/IGluY2x1ZGVBbGwgOiB0cnVlO1xuXHRcblx0ICBmb3IgKHZhciBmbGFnIGluIGZsYWdzKSB7XG5cdCAgICBpZiAoaW5jbHVkZUFsbCB8fFxuXHQgICAgICAgIChmbGFnICE9PSAnb2JqZWN0JyAmJiBmbGFnICE9PSAnc3NmaScgJiYgZmxhZyAhPSAnbWVzc2FnZScpKSB7XG5cdCAgICAgIG9iamVjdC5fX2ZsYWdzW2ZsYWddID0gZmxhZ3NbZmxhZ107XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiAyOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KTtcblxuXG4vKioqLyB9LFxuLyogMjkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIVxuXHQgKiBkZWVwLWVxbFxuXHQgKiBDb3B5cmlnaHQoYykgMjAxMyBKYWtlIEx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cblx0ICogTUlUIExpY2Vuc2VkXG5cdCAqL1xuXHRcblx0LyohXG5cdCAqIE1vZHVsZSBkZXBlbmRlbmNpZXNcblx0ICovXG5cdFxuXHR2YXIgdHlwZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzApO1xuXHRcblx0LyohXG5cdCAqIEJ1ZmZlci5pc0J1ZmZlciBicm93c2VyIHNoaW1cblx0ICovXG5cdFxuXHR2YXIgQnVmZmVyO1xuXHR0cnkgeyBCdWZmZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKS5CdWZmZXI7IH1cblx0Y2F0Y2goZXgpIHtcblx0ICBCdWZmZXIgPSB7fTtcblx0ICBCdWZmZXIuaXNCdWZmZXIgPSBmdW5jdGlvbigpIHsgcmV0dXJuIGZhbHNlOyB9XG5cdH1cblx0XG5cdC8qIVxuXHQgKiBQcmltYXJ5IEV4cG9ydFxuXHQgKi9cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZGVlcEVxdWFsO1xuXHRcblx0LyoqXG5cdCAqIEFzc2VydCBzdXBlci1zdHJpY3QgKGVnYWwpIGVxdWFsaXR5IGJldHdlZW5cblx0ICogdHdvIG9iamVjdHMgb2YgYW55IHR5cGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7TWl4ZWR9IGFcblx0ICogQHBhcmFtIHtNaXhlZH0gYlxuXHQgKiBAcGFyYW0ge0FycmF5fSBtZW1vaXNlZCAob3B0aW9uYWwpXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59IGVxdWFsIG1hdGNoXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZGVlcEVxdWFsKGEsIGIsIG0pIHtcblx0ICBpZiAoc2FtZVZhbHVlKGEsIGIpKSB7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9IGVsc2UgaWYgKCdkYXRlJyA9PT0gdHlwZShhKSkge1xuXHQgICAgcmV0dXJuIGRhdGVFcXVhbChhLCBiKTtcblx0ICB9IGVsc2UgaWYgKCdyZWdleHAnID09PSB0eXBlKGEpKSB7XG5cdCAgICByZXR1cm4gcmVnZXhwRXF1YWwoYSwgYik7XG5cdCAgfSBlbHNlIGlmIChCdWZmZXIuaXNCdWZmZXIoYSkpIHtcblx0ICAgIHJldHVybiBidWZmZXJFcXVhbChhLCBiKTtcblx0ICB9IGVsc2UgaWYgKCdhcmd1bWVudHMnID09PSB0eXBlKGEpKSB7XG5cdCAgICByZXR1cm4gYXJndW1lbnRzRXF1YWwoYSwgYiwgbSk7XG5cdCAgfSBlbHNlIGlmICghdHlwZUVxdWFsKGEsIGIpKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfSBlbHNlIGlmICgoJ29iamVjdCcgIT09IHR5cGUoYSkgJiYgJ29iamVjdCcgIT09IHR5cGUoYikpXG5cdCAgJiYgKCdhcnJheScgIT09IHR5cGUoYSkgJiYgJ2FycmF5JyAhPT0gdHlwZShiKSkpIHtcblx0ICAgIHJldHVybiBzYW1lVmFsdWUoYSwgYik7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBvYmplY3RFcXVhbChhLCBiLCBtKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qIVxuXHQgKiBTdHJpY3QgKGVnYWwpIGVxdWFsaXR5IHRlc3QuIEVuc3VyZXMgdGhhdCBOYU4gYWx3YXlzXG5cdCAqIGVxdWFscyBOYU4gYW5kIGAtMGAgZG9lcyBub3QgZXF1YWwgYCswYC5cblx0ICpcblx0ICogQHBhcmFtIHtNaXhlZH0gYVxuXHQgKiBAcGFyYW0ge01peGVkfSBiXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59IGVxdWFsIG1hdGNoXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gc2FtZVZhbHVlKGEsIGIpIHtcblx0ICBpZiAoYSA9PT0gYikgcmV0dXJuIGEgIT09IDAgfHwgMSAvIGEgPT09IDEgLyBiO1xuXHQgIHJldHVybiBhICE9PSBhICYmIGIgIT09IGI7XG5cdH1cblx0XG5cdC8qIVxuXHQgKiBDb21wYXJlIHRoZSB0eXBlcyBvZiB0d28gZ2l2ZW4gb2JqZWN0cyBhbmRcblx0ICogcmV0dXJuIGlmIHRoZXkgYXJlIGVxdWFsLiBOb3RlIHRoYXQgYW4gQXJyYXlcblx0ICogaGFzIGEgdHlwZSBvZiBgYXJyYXlgIChub3QgYG9iamVjdGApIGFuZCBhcmd1bWVudHNcblx0ICogaGF2ZSBhIHR5cGUgb2YgYGFyZ3VtZW50c2AgKG5vdCBgYXJyYXlgL2BvYmplY3RgKS5cblx0ICpcblx0ICogQHBhcmFtIHtNaXhlZH0gYVxuXHQgKiBAcGFyYW0ge01peGVkfSBiXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59IHJlc3VsdFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHR5cGVFcXVhbChhLCBiKSB7XG5cdCAgcmV0dXJuIHR5cGUoYSkgPT09IHR5cGUoYik7XG5cdH1cblx0XG5cdC8qIVxuXHQgKiBDb21wYXJlIHR3byBEYXRlIG9iamVjdHMgYnkgYXNzZXJ0aW5nIHRoYXRcblx0ICogdGhlIHRpbWUgdmFsdWVzIGFyZSBlcXVhbCB1c2luZyBgc2F2ZVZhbHVlYC5cblx0ICpcblx0ICogQHBhcmFtIHtEYXRlfSBhXG5cdCAqIEBwYXJhbSB7RGF0ZX0gYlxuXHQgKiBAcmV0dXJuIHtCb29sZWFufSByZXN1bHRcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBkYXRlRXF1YWwoYSwgYikge1xuXHQgIGlmICgnZGF0ZScgIT09IHR5cGUoYikpIHJldHVybiBmYWxzZTtcblx0ICByZXR1cm4gc2FtZVZhbHVlKGEuZ2V0VGltZSgpLCBiLmdldFRpbWUoKSk7XG5cdH1cblx0XG5cdC8qIVxuXHQgKiBDb21wYXJlIHR3byByZWd1bGFyIGV4cHJlc3Npb25zIGJ5IGNvbnZlcnRpbmcgdGhlbVxuXHQgKiB0byBzdHJpbmcgYW5kIGNoZWNraW5nIGZvciBgc2FtZVZhbHVlYC5cblx0ICpcblx0ICogQHBhcmFtIHtSZWdFeHB9IGFcblx0ICogQHBhcmFtIHtSZWdFeHB9IGJcblx0ICogQHJldHVybiB7Qm9vbGVhbn0gcmVzdWx0XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVnZXhwRXF1YWwoYSwgYikge1xuXHQgIGlmICgncmVnZXhwJyAhPT0gdHlwZShiKSkgcmV0dXJuIGZhbHNlO1xuXHQgIHJldHVybiBzYW1lVmFsdWUoYS50b1N0cmluZygpLCBiLnRvU3RyaW5nKCkpO1xuXHR9XG5cdFxuXHQvKiFcblx0ICogQXNzZXJ0IGRlZXAgZXF1YWxpdHkgb2YgdHdvIGBhcmd1bWVudHNgIG9iamVjdHMuXG5cdCAqIFVuZm9ydHVuYXRlbHksIHRoZXNlIG11c3QgYmUgc2xpY2VkIHRvIGFycmF5c1xuXHQgKiBwcmlvciB0byB0ZXN0IHRvIGVuc3VyZSBubyBiYWQgYmVoYXZpb3IuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJndW1lbnRzfSBhXG5cdCAqIEBwYXJhbSB7QXJndW1lbnRzfSBiXG5cdCAqIEBwYXJhbSB7QXJyYXl9IG1lbW9pemUgKG9wdGlvbmFsKVxuXHQgKiBAcmV0dXJuIHtCb29sZWFufSByZXN1bHRcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBhcmd1bWVudHNFcXVhbChhLCBiLCBtKSB7XG5cdCAgaWYgKCdhcmd1bWVudHMnICE9PSB0eXBlKGIpKSByZXR1cm4gZmFsc2U7XG5cdCAgYSA9IFtdLnNsaWNlLmNhbGwoYSk7XG5cdCAgYiA9IFtdLnNsaWNlLmNhbGwoYik7XG5cdCAgcmV0dXJuIGRlZXBFcXVhbChhLCBiLCBtKTtcblx0fVxuXHRcblx0LyohXG5cdCAqIEdldCBlbnVtZXJhYmxlIHByb3BlcnRpZXMgb2YgYSBnaXZlbiBvYmplY3QuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBhXG5cdCAqIEByZXR1cm4ge0FycmF5fSBwcm9wZXJ0eSBuYW1lc1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGVudW1lcmFibGUoYSkge1xuXHQgIHZhciByZXMgPSBbXTtcblx0ICBmb3IgKHZhciBrZXkgaW4gYSkgcmVzLnB1c2goa2V5KTtcblx0ICByZXR1cm4gcmVzO1xuXHR9XG5cdFxuXHQvKiFcblx0ICogU2ltcGxlIGVxdWFsaXR5IGZvciBmbGF0IGl0ZXJhYmxlIG9iamVjdHNcblx0ICogc3VjaCBhcyBBcnJheXMgb3IgTm9kZS5qcyBidWZmZXJzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0l0ZXJhYmxlfSBhXG5cdCAqIEBwYXJhbSB7SXRlcmFibGV9IGJcblx0ICogQHJldHVybiB7Qm9vbGVhbn0gcmVzdWx0XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaXRlcmFibGVFcXVhbChhLCBiKSB7XG5cdCAgaWYgKGEubGVuZ3RoICE9PSAgYi5sZW5ndGgpIHJldHVybiBmYWxzZTtcblx0XG5cdCAgdmFyIGkgPSAwO1xuXHQgIHZhciBtYXRjaCA9IHRydWU7XG5cdFxuXHQgIGZvciAoOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuXHQgICAgaWYgKGFbaV0gIT09IGJbaV0pIHtcblx0ICAgICAgbWF0Y2ggPSBmYWxzZTtcblx0ICAgICAgYnJlYWs7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gbWF0Y2g7XG5cdH1cblx0XG5cdC8qIVxuXHQgKiBFeHRlbnNpb24gdG8gYGl0ZXJhYmxlRXF1YWxgIHNwZWNpZmljYWxseVxuXHQgKiBmb3IgTm9kZS5qcyBCdWZmZXJzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0J1ZmZlcn0gYVxuXHQgKiBAcGFyYW0ge01peGVkfSBiXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59IHJlc3VsdFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGJ1ZmZlckVxdWFsKGEsIGIpIHtcblx0ICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihiKSkgcmV0dXJuIGZhbHNlO1xuXHQgIHJldHVybiBpdGVyYWJsZUVxdWFsKGEsIGIpO1xuXHR9XG5cdFxuXHQvKiFcblx0ICogQmxvY2sgZm9yIGBvYmplY3RFcXVhbGAgZW5zdXJpbmcgbm9uLWV4aXN0aW5nXG5cdCAqIHZhbHVlcyBkb24ndCBnZXQgaW4uXG5cdCAqXG5cdCAqIEBwYXJhbSB7TWl4ZWR9IG9iamVjdFxuXHQgKiBAcmV0dXJuIHtCb29sZWFufSByZXN1bHRcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpc1ZhbHVlKGEpIHtcblx0ICByZXR1cm4gYSAhPT0gbnVsbCAmJiBhICE9PSB1bmRlZmluZWQ7XG5cdH1cblx0XG5cdC8qIVxuXHQgKiBSZWN1cnNpdmVseSBjaGVjayB0aGUgZXF1YWxpdHkgb2YgdHdvIG9iamVjdHMuXG5cdCAqIE9uY2UgYmFzaWMgc2FtZW5lc3MgaGFzIGJlZW4gZXN0YWJsaXNoZWQgaXQgd2lsbFxuXHQgKiBkZWZlciB0byBgZGVlcEVxdWFsYCBmb3IgZWFjaCBlbnVtZXJhYmxlIGtleVxuXHQgKiBpbiB0aGUgb2JqZWN0LlxuXHQgKlxuXHQgKiBAcGFyYW0ge01peGVkfSBhXG5cdCAqIEBwYXJhbSB7TWl4ZWR9IGJcblx0ICogQHJldHVybiB7Qm9vbGVhbn0gcmVzdWx0XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gb2JqZWN0RXF1YWwoYSwgYiwgbSkge1xuXHQgIGlmICghaXNWYWx1ZShhKSB8fCAhaXNWYWx1ZShiKSkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0XG5cdCAgaWYgKGEucHJvdG90eXBlICE9PSBiLnByb3RvdHlwZSkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0XG5cdCAgdmFyIGk7XG5cdCAgaWYgKG0pIHtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBtLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIGlmICgobVtpXVswXSA9PT0gYSAmJiBtW2ldWzFdID09PSBiKVxuXHQgICAgICB8fCAgKG1baV1bMF0gPT09IGIgJiYgbVtpXVsxXSA9PT0gYSkpIHtcblx0ICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICBtID0gW107XG5cdCAgfVxuXHRcblx0ICB0cnkge1xuXHQgICAgdmFyIGthID0gZW51bWVyYWJsZShhKTtcblx0ICAgIHZhciBrYiA9IGVudW1lcmFibGUoYik7XG5cdCAgfSBjYXRjaCAoZXgpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdFxuXHQgIGthLnNvcnQoKTtcblx0ICBrYi5zb3J0KCk7XG5cdFxuXHQgIGlmICghaXRlcmFibGVFcXVhbChrYSwga2IpKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHRcblx0ICBtLnB1c2goWyBhLCBiIF0pO1xuXHRcblx0ICB2YXIga2V5O1xuXHQgIGZvciAoaSA9IGthLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdCAgICBrZXkgPSBrYVtpXTtcblx0ICAgIGlmICghZGVlcEVxdWFsKGFba2V5XSwgYltrZXldLCBtKSkge1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gdHJ1ZTtcblx0fVxuXG5cbi8qKiovIH0sXG4vKiAzMCAqL1xuWzUxLCAzMV0sXG4vKiAzMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyohXG5cdCAqIHR5cGUtZGV0ZWN0XG5cdCAqIENvcHlyaWdodChjKSAyMDEzIGpha2UgbHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuXHQgKiBNSVQgTGljZW5zZWRcblx0ICovXG5cdFxuXHQvKiFcblx0ICogUHJpbWFyeSBFeHBvcnRzXG5cdCAqL1xuXHRcblx0dmFyIGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IGdldFR5cGU7XG5cdFxuXHQvKiFcblx0ICogRGV0ZWN0YWJsZSBqYXZhc2NyaXB0IG5hdGl2ZXNcblx0ICovXG5cdFxuXHR2YXIgbmF0aXZlcyA9IHtcblx0ICAgICdbb2JqZWN0IEFycmF5XSc6ICdhcnJheSdcblx0ICAsICdbb2JqZWN0IFJlZ0V4cF0nOiAncmVnZXhwJ1xuXHQgICwgJ1tvYmplY3QgRnVuY3Rpb25dJzogJ2Z1bmN0aW9uJ1xuXHQgICwgJ1tvYmplY3QgQXJndW1lbnRzXSc6ICdhcmd1bWVudHMnXG5cdCAgLCAnW29iamVjdCBEYXRlXSc6ICdkYXRlJ1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqICMjIyB0eXBlT2YgKG9iailcblx0ICpcblx0ICogVXNlIHNldmVyYWwgZGlmZmVyZW50IHRlY2huaXF1ZXMgdG8gZGV0ZXJtaW5lXG5cdCAqIHRoZSB0eXBlIG9mIG9iamVjdCBiZWluZyB0ZXN0ZWQuXG5cdCAqXG5cdCAqXG5cdCAqIEBwYXJhbSB7TWl4ZWR9IG9iamVjdFxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9IG9iamVjdCB0eXBlXG5cdCAqIEBhcGkgcHVibGljXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0VHlwZSAob2JqKSB7XG5cdCAgdmFyIHN0ciA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopO1xuXHQgIGlmIChuYXRpdmVzW3N0cl0pIHJldHVybiBuYXRpdmVzW3N0cl07XG5cdCAgaWYgKG9iaiA9PT0gbnVsbCkgcmV0dXJuICdudWxsJztcblx0ICBpZiAob2JqID09PSB1bmRlZmluZWQpIHJldHVybiAndW5kZWZpbmVkJztcblx0ICBpZiAob2JqID09PSBPYmplY3Qob2JqKSkgcmV0dXJuICdvYmplY3QnO1xuXHQgIHJldHVybiB0eXBlb2Ygb2JqO1xuXHR9XG5cdFxuXHRleHBvcnRzLkxpYnJhcnkgPSBMaWJyYXJ5O1xuXHRcblx0LyoqXG5cdCAqICMjIyBMaWJyYXJ5XG5cdCAqXG5cdCAqIENyZWF0ZSBhIHJlcG9zaXRvcnkgZm9yIGN1c3RvbSB0eXBlIGRldGVjdGlvbi5cblx0ICpcblx0ICogYGBganNcblx0ICogdmFyIGxpYiA9IG5ldyB0eXBlLkxpYnJhcnk7XG5cdCAqIGBgYFxuXHQgKlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIExpYnJhcnkgKCkge1xuXHQgIHRoaXMudGVzdHMgPSB7fTtcblx0fVxuXHRcblx0LyoqXG5cdCAqICMjIyMgLm9mIChvYmopXG5cdCAqXG5cdCAqIEV4cG9zZSByZXBsYWNlbWVudCBgdHlwZW9mYCBkZXRlY3Rpb24gdG8gdGhlIGxpYnJhcnkuXG5cdCAqXG5cdCAqIGBgYGpzXG5cdCAqIGlmICgnc3RyaW5nJyA9PT0gbGliLm9mKCdoZWxsbyB3b3JsZCcpKSB7XG5cdCAqICAgLy8gLi4uXG5cdCAqIH1cblx0ICogYGBgXG5cdCAqXG5cdCAqIEBwYXJhbSB7TWl4ZWR9IG9iamVjdCB0byB0ZXN0XG5cdCAqIEByZXR1cm4ge1N0cmluZ30gdHlwZVxuXHQgKi9cblx0XG5cdExpYnJhcnkucHJvdG90eXBlLm9mID0gZ2V0VHlwZTtcblx0XG5cdC8qKlxuXHQgKiAjIyMjIC5kZWZpbmUgKHR5cGUsIHRlc3QpXG5cdCAqXG5cdCAqIEFkZCBhIHRlc3QgdG8gZm9yIHRoZSBgLnRlc3QoKWAgYXNzZXJ0aW9uLlxuXHQgKlxuXHQgKiBDYW4gYmUgZGVmaW5lZCBhcyBhIHJlZ3VsYXIgZXhwcmVzc2lvbjpcblx0ICpcblx0ICogYGBganNcblx0ICogbGliLmRlZmluZSgnaW50JywgL15bMC05XSskLyk7XG5cdCAqIGBgYFxuXHQgKlxuXHQgKiAuLi4gb3IgYXMgYSBmdW5jdGlvbjpcblx0ICpcblx0ICogYGBganNcblx0ICogbGliLmRlZmluZSgnYmxuJywgZnVuY3Rpb24gKG9iaikge1xuXHQgKiAgIGlmICgnYm9vbGVhbicgPT09IGxpYi5vZihvYmopKSByZXR1cm4gdHJ1ZTtcblx0ICogICB2YXIgYmxucyA9IFsgJ3llcycsICdubycsICd0cnVlJywgJ2ZhbHNlJywgMSwgMCBdO1xuXHQgKiAgIGlmICgnc3RyaW5nJyA9PT0gbGliLm9mKG9iaikpIG9iaiA9IG9iai50b0xvd2VyQ2FzZSgpO1xuXHQgKiAgIHJldHVybiAhISB+Ymxucy5pbmRleE9mKG9iaik7XG5cdCAqIH0pO1xuXHQgKiBgYGBcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcblx0ICogQHBhcmFtIHtSZWdFeHB8RnVuY3Rpb259IHRlc3Rcblx0ICogQGFwaSBwdWJsaWNcblx0ICovXG5cdFxuXHRMaWJyYXJ5LnByb3RvdHlwZS5kZWZpbmUgPSBmdW5jdGlvbiAodHlwZSwgdGVzdCkge1xuXHQgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSByZXR1cm4gdGhpcy50ZXN0c1t0eXBlXTtcblx0ICB0aGlzLnRlc3RzW3R5cGVdID0gdGVzdDtcblx0ICByZXR1cm4gdGhpcztcblx0fTtcblx0XG5cdC8qKlxuXHQgKiAjIyMjIC50ZXN0IChvYmosIHRlc3QpXG5cdCAqXG5cdCAqIEFzc2VydCB0aGF0IGFuIG9iamVjdCBpcyBvZiB0eXBlLiBXaWxsIGZpcnN0XG5cdCAqIGNoZWNrIG5hdGl2ZXMsIGFuZCBpZiB0aGF0IGRvZXMgbm90IHBhc3MgaXQgd2lsbFxuXHQgKiB1c2UgdGhlIHVzZXIgZGVmaW5lZCBjdXN0b20gdGVzdHMuXG5cdCAqXG5cdCAqIGBgYGpzXG5cdCAqIGFzc2VydChsaWIudGVzdCgnMScsICdpbnQnKSk7XG5cdCAqIGFzc2VydChsaWIudGVzdCgneWVzJywgJ2JsbicpKTtcblx0ICogYGBgXG5cdCAqXG5cdCAqIEBwYXJhbSB7TWl4ZWR9IG9iamVjdFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuXHQgKiBAcmV0dXJuIHtCb29sZWFufSByZXN1bHRcblx0ICogQGFwaSBwdWJsaWNcblx0ICovXG5cdFxuXHRMaWJyYXJ5LnByb3RvdHlwZS50ZXN0ID0gZnVuY3Rpb24gKG9iaiwgdHlwZSkge1xuXHQgIGlmICh0eXBlID09PSBnZXRUeXBlKG9iaikpIHJldHVybiB0cnVlO1xuXHQgIHZhciB0ZXN0ID0gdGhpcy50ZXN0c1t0eXBlXTtcblx0XG5cdCAgaWYgKHRlc3QgJiYgJ3JlZ2V4cCcgPT09IGdldFR5cGUodGVzdCkpIHtcblx0ICAgIHJldHVybiB0ZXN0LnRlc3Qob2JqKTtcblx0ICB9IGVsc2UgaWYgKHRlc3QgJiYgJ2Z1bmN0aW9uJyA9PT0gZ2V0VHlwZSh0ZXN0KSkge1xuXHQgICAgcmV0dXJuIHRlc3Qob2JqKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCdUeXBlIHRlc3QgXCInICsgdHlwZSArICdcIiBub3QgZGVmaW5lZCBvciBpbnZhbGlkLicpO1xuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9LFxuLyogMzIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihCdWZmZXIsIGdsb2JhbCkgey8qIVxuXHQgKiBUaGUgYnVmZmVyIG1vZHVsZSBmcm9tIG5vZGUuanMsIGZvciB0aGUgYnJvd3Nlci5cblx0ICpcblx0ICogQGF1dGhvciAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGZlcm9zc0BmZXJvc3Mub3JnPiA8aHR0cDovL2Zlcm9zcy5vcmc+XG5cdCAqIEBsaWNlbnNlICBNSVRcblx0ICovXG5cdC8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovXG5cdFxuXHR2YXIgYmFzZTY0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMylcblx0dmFyIGllZWU3NTQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KVxuXHR2YXIgaXNBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oMzUpXG5cdFxuXHRleHBvcnRzLkJ1ZmZlciA9IEJ1ZmZlclxuXHRleHBvcnRzLlNsb3dCdWZmZXIgPSBTbG93QnVmZmVyXG5cdGV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVMgPSA1MFxuXHRCdWZmZXIucG9vbFNpemUgPSA4MTkyIC8vIG5vdCB1c2VkIGJ5IHRoaXMgaW1wbGVtZW50YXRpb25cblx0XG5cdHZhciByb290UGFyZW50ID0ge31cblx0XG5cdC8qKlxuXHQgKiBJZiBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgOlxuXHQgKiAgID09PSB0cnVlICAgIFVzZSBVaW50OEFycmF5IGltcGxlbWVudGF0aW9uIChmYXN0ZXN0KVxuXHQgKiAgID09PSBmYWxzZSAgIFVzZSBPYmplY3QgaW1wbGVtZW50YXRpb24gKG1vc3QgY29tcGF0aWJsZSwgZXZlbiBJRTYpXG5cdCAqXG5cdCAqIEJyb3dzZXJzIHRoYXQgc3VwcG9ydCB0eXBlZCBhcnJheXMgYXJlIElFIDEwKywgRmlyZWZveCA0KywgQ2hyb21lIDcrLCBTYWZhcmkgNS4xKyxcblx0ICogT3BlcmEgMTEuNissIGlPUyA0LjIrLlxuXHQgKlxuXHQgKiBEdWUgdG8gdmFyaW91cyBicm93c2VyIGJ1Z3MsIHNvbWV0aW1lcyB0aGUgT2JqZWN0IGltcGxlbWVudGF0aW9uIHdpbGwgYmUgdXNlZCBldmVuXG5cdCAqIHdoZW4gdGhlIGJyb3dzZXIgc3VwcG9ydHMgdHlwZWQgYXJyYXlzLlxuXHQgKlxuXHQgKiBOb3RlOlxuXHQgKlxuXHQgKiAgIC0gRmlyZWZveCA0LTI5IGxhY2tzIHN1cHBvcnQgZm9yIGFkZGluZyBuZXcgcHJvcGVydGllcyB0byBgVWludDhBcnJheWAgaW5zdGFuY2VzLFxuXHQgKiAgICAgU2VlOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02OTU0MzguXG5cdCAqXG5cdCAqICAgLSBTYWZhcmkgNS03IGxhY2tzIHN1cHBvcnQgZm9yIGNoYW5naW5nIHRoZSBgT2JqZWN0LnByb3RvdHlwZS5jb25zdHJ1Y3RvcmAgcHJvcGVydHlcblx0ICogICAgIG9uIG9iamVjdHMuXG5cdCAqXG5cdCAqICAgLSBDaHJvbWUgOS0xMCBpcyBtaXNzaW5nIHRoZSBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uLlxuXHQgKlxuXHQgKiAgIC0gSUUxMCBoYXMgYSBicm9rZW4gYFR5cGVkQXJyYXkucHJvdG90eXBlLnN1YmFycmF5YCBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGFycmF5cyBvZlxuXHQgKiAgICAgaW5jb3JyZWN0IGxlbmd0aCBpbiBzb21lIHNpdHVhdGlvbnMuXG5cdFxuXHQgKiBXZSBkZXRlY3QgdGhlc2UgYnVnZ3kgYnJvd3NlcnMgYW5kIHNldCBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgIHRvIGBmYWxzZWAgc28gdGhleVxuXHQgKiBnZXQgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiwgd2hpY2ggaXMgc2xvd2VyIGJ1dCBiZWhhdmVzIGNvcnJlY3RseS5cblx0ICovXG5cdEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUID0gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlQgIT09IHVuZGVmaW5lZFxuXHQgID8gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlRcblx0ICA6IHR5cGVkQXJyYXlTdXBwb3J0KClcblx0XG5cdGZ1bmN0aW9uIHR5cGVkQXJyYXlTdXBwb3J0ICgpIHtcblx0ICBmdW5jdGlvbiBCYXIgKCkge31cblx0ICB0cnkge1xuXHQgICAgdmFyIGFyciA9IG5ldyBVaW50OEFycmF5KDEpXG5cdCAgICBhcnIuZm9vID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gNDIgfVxuXHQgICAgYXJyLmNvbnN0cnVjdG9yID0gQmFyXG5cdCAgICByZXR1cm4gYXJyLmZvbygpID09PSA0MiAmJiAvLyB0eXBlZCBhcnJheSBpbnN0YW5jZXMgY2FuIGJlIGF1Z21lbnRlZFxuXHQgICAgICAgIGFyci5jb25zdHJ1Y3RvciA9PT0gQmFyICYmIC8vIGNvbnN0cnVjdG9yIGNhbiBiZSBzZXRcblx0ICAgICAgICB0eXBlb2YgYXJyLnN1YmFycmF5ID09PSAnZnVuY3Rpb24nICYmIC8vIGNocm9tZSA5LTEwIGxhY2sgYHN1YmFycmF5YFxuXHQgICAgICAgIGFyci5zdWJhcnJheSgxLCAxKS5ieXRlTGVuZ3RoID09PSAwIC8vIGllMTAgaGFzIGJyb2tlbiBgc3ViYXJyYXlgXG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgcmV0dXJuIGZhbHNlXG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBrTWF4TGVuZ3RoICgpIHtcblx0ICByZXR1cm4gQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRcblx0ICAgID8gMHg3ZmZmZmZmZlxuXHQgICAgOiAweDNmZmZmZmZmXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDbGFzczogQnVmZmVyXG5cdCAqID09PT09PT09PT09PT1cblx0ICpcblx0ICogVGhlIEJ1ZmZlciBjb25zdHJ1Y3RvciByZXR1cm5zIGluc3RhbmNlcyBvZiBgVWludDhBcnJheWAgdGhhdCBhcmUgYXVnbWVudGVkXG5cdCAqIHdpdGggZnVuY3Rpb24gcHJvcGVydGllcyBmb3IgYWxsIHRoZSBub2RlIGBCdWZmZXJgIEFQSSBmdW5jdGlvbnMuIFdlIHVzZVxuXHQgKiBgVWludDhBcnJheWAgc28gdGhhdCBzcXVhcmUgYnJhY2tldCBub3RhdGlvbiB3b3JrcyBhcyBleHBlY3RlZCAtLSBpdCByZXR1cm5zXG5cdCAqIGEgc2luZ2xlIG9jdGV0LlxuXHQgKlxuXHQgKiBCeSBhdWdtZW50aW5nIHRoZSBpbnN0YW5jZXMsIHdlIGNhbiBhdm9pZCBtb2RpZnlpbmcgdGhlIGBVaW50OEFycmF5YFxuXHQgKiBwcm90b3R5cGUuXG5cdCAqL1xuXHRmdW5jdGlvbiBCdWZmZXIgKGFyZykge1xuXHQgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBCdWZmZXIpKSB7XG5cdCAgICAvLyBBdm9pZCBnb2luZyB0aHJvdWdoIGFuIEFyZ3VtZW50c0FkYXB0b3JUcmFtcG9saW5lIGluIHRoZSBjb21tb24gY2FzZS5cblx0ICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkgcmV0dXJuIG5ldyBCdWZmZXIoYXJnLCBhcmd1bWVudHNbMV0pXG5cdCAgICByZXR1cm4gbmV3IEJ1ZmZlcihhcmcpXG5cdCAgfVxuXHRcblx0ICB0aGlzLmxlbmd0aCA9IDBcblx0ICB0aGlzLnBhcmVudCA9IHVuZGVmaW5lZFxuXHRcblx0ICAvLyBDb21tb24gY2FzZS5cblx0ICBpZiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicpIHtcblx0ICAgIHJldHVybiBmcm9tTnVtYmVyKHRoaXMsIGFyZylcblx0ICB9XG5cdFxuXHQgIC8vIFNsaWdodGx5IGxlc3MgY29tbW9uIGNhc2UuXG5cdCAgaWYgKHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnKSB7XG5cdCAgICByZXR1cm4gZnJvbVN0cmluZyh0aGlzLCBhcmcsIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogJ3V0ZjgnKVxuXHQgIH1cblx0XG5cdCAgLy8gVW51c3VhbC5cblx0ICByZXR1cm4gZnJvbU9iamVjdCh0aGlzLCBhcmcpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZyb21OdW1iZXIgKHRoYXQsIGxlbmd0aCkge1xuXHQgIHRoYXQgPSBhbGxvY2F0ZSh0aGF0LCBsZW5ndGggPCAwID8gMCA6IGNoZWNrZWQobGVuZ3RoKSB8IDApXG5cdCAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICB0aGF0W2ldID0gMFxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gdGhhdFxuXHR9XG5cdFxuXHRmdW5jdGlvbiBmcm9tU3RyaW5nICh0aGF0LCBzdHJpbmcsIGVuY29kaW5nKSB7XG5cdCAgaWYgKHR5cGVvZiBlbmNvZGluZyAhPT0gJ3N0cmluZycgfHwgZW5jb2RpbmcgPT09ICcnKSBlbmNvZGluZyA9ICd1dGY4J1xuXHRcblx0ICAvLyBBc3N1bXB0aW9uOiBieXRlTGVuZ3RoKCkgcmV0dXJuIHZhbHVlIGlzIGFsd2F5cyA8IGtNYXhMZW5ndGguXG5cdCAgdmFyIGxlbmd0aCA9IGJ5dGVMZW5ndGgoc3RyaW5nLCBlbmNvZGluZykgfCAwXG5cdCAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcblx0XG5cdCAgdGhhdC53cml0ZShzdHJpbmcsIGVuY29kaW5nKVxuXHQgIHJldHVybiB0aGF0XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZyb21PYmplY3QgKHRoYXQsIG9iamVjdCkge1xuXHQgIGlmIChCdWZmZXIuaXNCdWZmZXIob2JqZWN0KSkgcmV0dXJuIGZyb21CdWZmZXIodGhhdCwgb2JqZWN0KVxuXHRcblx0ICBpZiAoaXNBcnJheShvYmplY3QpKSByZXR1cm4gZnJvbUFycmF5KHRoYXQsIG9iamVjdClcblx0XG5cdCAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdtdXN0IHN0YXJ0IHdpdGggbnVtYmVyLCBidWZmZXIsIGFycmF5IG9yIHN0cmluZycpXG5cdCAgfVxuXHRcblx0ICBpZiAodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgaWYgKG9iamVjdC5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuXHQgICAgICByZXR1cm4gZnJvbVR5cGVkQXJyYXkodGhhdCwgb2JqZWN0KVxuXHQgICAgfVxuXHQgICAgaWYgKG9iamVjdCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG5cdCAgICAgIHJldHVybiBmcm9tQXJyYXlCdWZmZXIodGhhdCwgb2JqZWN0KVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgaWYgKG9iamVjdC5sZW5ndGgpIHJldHVybiBmcm9tQXJyYXlMaWtlKHRoYXQsIG9iamVjdClcblx0XG5cdCAgcmV0dXJuIGZyb21Kc29uT2JqZWN0KHRoYXQsIG9iamVjdClcblx0fVxuXHRcblx0ZnVuY3Rpb24gZnJvbUJ1ZmZlciAodGhhdCwgYnVmZmVyKSB7XG5cdCAgdmFyIGxlbmd0aCA9IGNoZWNrZWQoYnVmZmVyLmxlbmd0aCkgfCAwXG5cdCAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcblx0ICBidWZmZXIuY29weSh0aGF0LCAwLCAwLCBsZW5ndGgpXG5cdCAgcmV0dXJuIHRoYXRcblx0fVxuXHRcblx0ZnVuY3Rpb24gZnJvbUFycmF5ICh0aGF0LCBhcnJheSkge1xuXHQgIHZhciBsZW5ndGggPSBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwXG5cdCAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG5cdCAgICB0aGF0W2ldID0gYXJyYXlbaV0gJiAyNTVcblx0ICB9XG5cdCAgcmV0dXJuIHRoYXRcblx0fVxuXHRcblx0Ly8gRHVwbGljYXRlIG9mIGZyb21BcnJheSgpIHRvIGtlZXAgZnJvbUFycmF5KCkgbW9ub21vcnBoaWMuXG5cdGZ1bmN0aW9uIGZyb21UeXBlZEFycmF5ICh0aGF0LCBhcnJheSkge1xuXHQgIHZhciBsZW5ndGggPSBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwXG5cdCAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcblx0ICAvLyBUcnVuY2F0aW5nIHRoZSBlbGVtZW50cyBpcyBwcm9iYWJseSBub3Qgd2hhdCBwZW9wbGUgZXhwZWN0IGZyb20gdHlwZWRcblx0ICAvLyBhcnJheXMgd2l0aCBCWVRFU19QRVJfRUxFTUVOVCA+IDEgYnV0IGl0J3MgY29tcGF0aWJsZSB3aXRoIHRoZSBiZWhhdmlvclxuXHQgIC8vIG9mIHRoZSBvbGQgQnVmZmVyIGNvbnN0cnVjdG9yLlxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcblx0ICAgIHRoYXRbaV0gPSBhcnJheVtpXSAmIDI1NVxuXHQgIH1cblx0ICByZXR1cm4gdGhhdFxuXHR9XG5cdFxuXHRmdW5jdGlvbiBmcm9tQXJyYXlCdWZmZXIgKHRoYXQsIGFycmF5KSB7XG5cdCAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZSwgZm9yIGJlc3QgcGVyZm9ybWFuY2Vcblx0ICAgIGFycmF5LmJ5dGVMZW5ndGhcblx0ICAgIHRoYXQgPSBCdWZmZXIuX2F1Z21lbnQobmV3IFVpbnQ4QXJyYXkoYXJyYXkpKVxuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyBGYWxsYmFjazogUmV0dXJuIGFuIG9iamVjdCBpbnN0YW5jZSBvZiB0aGUgQnVmZmVyIGNsYXNzXG5cdCAgICB0aGF0ID0gZnJvbVR5cGVkQXJyYXkodGhhdCwgbmV3IFVpbnQ4QXJyYXkoYXJyYXkpKVxuXHQgIH1cblx0ICByZXR1cm4gdGhhdFxuXHR9XG5cdFxuXHRmdW5jdGlvbiBmcm9tQXJyYXlMaWtlICh0aGF0LCBhcnJheSkge1xuXHQgIHZhciBsZW5ndGggPSBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwXG5cdCAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG5cdCAgICB0aGF0W2ldID0gYXJyYXlbaV0gJiAyNTVcblx0ICB9XG5cdCAgcmV0dXJuIHRoYXRcblx0fVxuXHRcblx0Ly8gRGVzZXJpYWxpemUgeyB0eXBlOiAnQnVmZmVyJywgZGF0YTogWzEsMiwzLC4uLl0gfSBpbnRvIGEgQnVmZmVyIG9iamVjdC5cblx0Ly8gUmV0dXJucyBhIHplcm8tbGVuZ3RoIGJ1ZmZlciBmb3IgaW5wdXRzIHRoYXQgZG9uJ3QgY29uZm9ybSB0byB0aGUgc3BlYy5cblx0ZnVuY3Rpb24gZnJvbUpzb25PYmplY3QgKHRoYXQsIG9iamVjdCkge1xuXHQgIHZhciBhcnJheVxuXHQgIHZhciBsZW5ndGggPSAwXG5cdFxuXHQgIGlmIChvYmplY3QudHlwZSA9PT0gJ0J1ZmZlcicgJiYgaXNBcnJheShvYmplY3QuZGF0YSkpIHtcblx0ICAgIGFycmF5ID0gb2JqZWN0LmRhdGFcblx0ICAgIGxlbmd0aCA9IGNoZWNrZWQoYXJyYXkubGVuZ3RoKSB8IDBcblx0ICB9XG5cdCAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcblx0XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuXHQgICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1XG5cdCAgfVxuXHQgIHJldHVybiB0aGF0XG5cdH1cblx0XG5cdGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuXHQgIEJ1ZmZlci5wcm90b3R5cGUuX19wcm90b19fID0gVWludDhBcnJheS5wcm90b3R5cGVcblx0ICBCdWZmZXIuX19wcm90b19fID0gVWludDhBcnJheVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhbGxvY2F0ZSAodGhhdCwgbGVuZ3RoKSB7XG5cdCAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZSwgZm9yIGJlc3QgcGVyZm9ybWFuY2Vcblx0ICAgIHRoYXQgPSBCdWZmZXIuX2F1Z21lbnQobmV3IFVpbnQ4QXJyYXkobGVuZ3RoKSlcblx0ICAgIHRoYXQuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyBGYWxsYmFjazogUmV0dXJuIGFuIG9iamVjdCBpbnN0YW5jZSBvZiB0aGUgQnVmZmVyIGNsYXNzXG5cdCAgICB0aGF0Lmxlbmd0aCA9IGxlbmd0aFxuXHQgICAgdGhhdC5faXNCdWZmZXIgPSB0cnVlXG5cdCAgfVxuXHRcblx0ICB2YXIgZnJvbVBvb2wgPSBsZW5ndGggIT09IDAgJiYgbGVuZ3RoIDw9IEJ1ZmZlci5wb29sU2l6ZSA+Pj4gMVxuXHQgIGlmIChmcm9tUG9vbCkgdGhhdC5wYXJlbnQgPSByb290UGFyZW50XG5cdFxuXHQgIHJldHVybiB0aGF0XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNoZWNrZWQgKGxlbmd0aCkge1xuXHQgIC8vIE5vdGU6IGNhbm5vdCB1c2UgYGxlbmd0aCA8IGtNYXhMZW5ndGhgIGhlcmUgYmVjYXVzZSB0aGF0IGZhaWxzIHdoZW5cblx0ICAvLyBsZW5ndGggaXMgTmFOICh3aGljaCBpcyBvdGhlcndpc2UgY29lcmNlZCB0byB6ZXJvLilcblx0ICBpZiAobGVuZ3RoID49IGtNYXhMZW5ndGgoKSkge1xuXHQgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0F0dGVtcHQgdG8gYWxsb2NhdGUgQnVmZmVyIGxhcmdlciB0aGFuIG1heGltdW0gJyArXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAnc2l6ZTogMHgnICsga01heExlbmd0aCgpLnRvU3RyaW5nKDE2KSArICcgYnl0ZXMnKVxuXHQgIH1cblx0ICByZXR1cm4gbGVuZ3RoIHwgMFxuXHR9XG5cdFxuXHRmdW5jdGlvbiBTbG93QnVmZmVyIChzdWJqZWN0LCBlbmNvZGluZykge1xuXHQgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBTbG93QnVmZmVyKSkgcmV0dXJuIG5ldyBTbG93QnVmZmVyKHN1YmplY3QsIGVuY29kaW5nKVxuXHRcblx0ICB2YXIgYnVmID0gbmV3IEJ1ZmZlcihzdWJqZWN0LCBlbmNvZGluZylcblx0ICBkZWxldGUgYnVmLnBhcmVudFxuXHQgIHJldHVybiBidWZcblx0fVxuXHRcblx0QnVmZmVyLmlzQnVmZmVyID0gZnVuY3Rpb24gaXNCdWZmZXIgKGIpIHtcblx0ICByZXR1cm4gISEoYiAhPSBudWxsICYmIGIuX2lzQnVmZmVyKVxuXHR9XG5cdFxuXHRCdWZmZXIuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKGEsIGIpIHtcblx0ICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihhKSB8fCAhQnVmZmVyLmlzQnVmZmVyKGIpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudHMgbXVzdCBiZSBCdWZmZXJzJylcblx0ICB9XG5cdFxuXHQgIGlmIChhID09PSBiKSByZXR1cm4gMFxuXHRcblx0ICB2YXIgeCA9IGEubGVuZ3RoXG5cdCAgdmFyIHkgPSBiLmxlbmd0aFxuXHRcblx0ICB2YXIgaSA9IDBcblx0ICB2YXIgbGVuID0gTWF0aC5taW4oeCwgeSlcblx0ICB3aGlsZSAoaSA8IGxlbikge1xuXHQgICAgaWYgKGFbaV0gIT09IGJbaV0pIGJyZWFrXG5cdFxuXHQgICAgKytpXG5cdCAgfVxuXHRcblx0ICBpZiAoaSAhPT0gbGVuKSB7XG5cdCAgICB4ID0gYVtpXVxuXHQgICAgeSA9IGJbaV1cblx0ICB9XG5cdFxuXHQgIGlmICh4IDwgeSkgcmV0dXJuIC0xXG5cdCAgaWYgKHkgPCB4KSByZXR1cm4gMVxuXHQgIHJldHVybiAwXG5cdH1cblx0XG5cdEJ1ZmZlci5pc0VuY29kaW5nID0gZnVuY3Rpb24gaXNFbmNvZGluZyAoZW5jb2RpbmcpIHtcblx0ICBzd2l0Y2ggKFN0cmluZyhlbmNvZGluZykudG9Mb3dlckNhc2UoKSkge1xuXHQgICAgY2FzZSAnaGV4Jzpcblx0ICAgIGNhc2UgJ3V0ZjgnOlxuXHQgICAgY2FzZSAndXRmLTgnOlxuXHQgICAgY2FzZSAnYXNjaWknOlxuXHQgICAgY2FzZSAnYmluYXJ5Jzpcblx0ICAgIGNhc2UgJ2Jhc2U2NCc6XG5cdCAgICBjYXNlICdyYXcnOlxuXHQgICAgY2FzZSAndWNzMic6XG5cdCAgICBjYXNlICd1Y3MtMic6XG5cdCAgICBjYXNlICd1dGYxNmxlJzpcblx0ICAgIGNhc2UgJ3V0Zi0xNmxlJzpcblx0ICAgICAgcmV0dXJuIHRydWVcblx0ICAgIGRlZmF1bHQ6XG5cdCAgICAgIHJldHVybiBmYWxzZVxuXHQgIH1cblx0fVxuXHRcblx0QnVmZmVyLmNvbmNhdCA9IGZ1bmN0aW9uIGNvbmNhdCAobGlzdCwgbGVuZ3RoKSB7XG5cdCAgaWYgKCFpc0FycmF5KGxpc3QpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdsaXN0IGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycy4nKVxuXHRcblx0ICBpZiAobGlzdC5sZW5ndGggPT09IDApIHtcblx0ICAgIHJldHVybiBuZXcgQnVmZmVyKDApXG5cdCAgfVxuXHRcblx0ICB2YXIgaVxuXHQgIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuXHQgICAgbGVuZ3RoID0gMFxuXHQgICAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgbGVuZ3RoICs9IGxpc3RbaV0ubGVuZ3RoXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICB2YXIgYnVmID0gbmV3IEJ1ZmZlcihsZW5ndGgpXG5cdCAgdmFyIHBvcyA9IDBcblx0ICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuXHQgICAgdmFyIGl0ZW0gPSBsaXN0W2ldXG5cdCAgICBpdGVtLmNvcHkoYnVmLCBwb3MpXG5cdCAgICBwb3MgKz0gaXRlbS5sZW5ndGhcblx0ICB9XG5cdCAgcmV0dXJuIGJ1ZlxuXHR9XG5cdFxuXHRmdW5jdGlvbiBieXRlTGVuZ3RoIChzdHJpbmcsIGVuY29kaW5nKSB7XG5cdCAgaWYgKHR5cGVvZiBzdHJpbmcgIT09ICdzdHJpbmcnKSBzdHJpbmcgPSAnJyArIHN0cmluZ1xuXHRcblx0ICB2YXIgbGVuID0gc3RyaW5nLmxlbmd0aFxuXHQgIGlmIChsZW4gPT09IDApIHJldHVybiAwXG5cdFxuXHQgIC8vIFVzZSBhIGZvciBsb29wIHRvIGF2b2lkIHJlY3Vyc2lvblxuXHQgIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG5cdCAgZm9yICg7Oykge1xuXHQgICAgc3dpdGNoIChlbmNvZGluZykge1xuXHQgICAgICBjYXNlICdhc2NpaSc6XG5cdCAgICAgIGNhc2UgJ2JpbmFyeSc6XG5cdCAgICAgIC8vIERlcHJlY2F0ZWRcblx0ICAgICAgY2FzZSAncmF3Jzpcblx0ICAgICAgY2FzZSAncmF3cyc6XG5cdCAgICAgICAgcmV0dXJuIGxlblxuXHQgICAgICBjYXNlICd1dGY4Jzpcblx0ICAgICAgY2FzZSAndXRmLTgnOlxuXHQgICAgICAgIHJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aFxuXHQgICAgICBjYXNlICd1Y3MyJzpcblx0ICAgICAgY2FzZSAndWNzLTInOlxuXHQgICAgICBjYXNlICd1dGYxNmxlJzpcblx0ICAgICAgY2FzZSAndXRmLTE2bGUnOlxuXHQgICAgICAgIHJldHVybiBsZW4gKiAyXG5cdCAgICAgIGNhc2UgJ2hleCc6XG5cdCAgICAgICAgcmV0dXJuIGxlbiA+Pj4gMVxuXHQgICAgICBjYXNlICdiYXNlNjQnOlxuXHQgICAgICAgIHJldHVybiBiYXNlNjRUb0J5dGVzKHN0cmluZykubGVuZ3RoXG5cdCAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGggLy8gYXNzdW1lIHV0Zjhcblx0ICAgICAgICBlbmNvZGluZyA9ICgnJyArIGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpXG5cdCAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdEJ1ZmZlci5ieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aFxuXHRcblx0Ly8gcHJlLXNldCBmb3IgdmFsdWVzIHRoYXQgbWF5IGV4aXN0IGluIHRoZSBmdXR1cmVcblx0QnVmZmVyLnByb3RvdHlwZS5sZW5ndGggPSB1bmRlZmluZWRcblx0QnVmZmVyLnByb3RvdHlwZS5wYXJlbnQgPSB1bmRlZmluZWRcblx0XG5cdGZ1bmN0aW9uIHNsb3dUb1N0cmluZyAoZW5jb2RpbmcsIHN0YXJ0LCBlbmQpIHtcblx0ICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuXHRcblx0ICBzdGFydCA9IHN0YXJ0IHwgMFxuXHQgIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkIHx8IGVuZCA9PT0gSW5maW5pdHkgPyB0aGlzLmxlbmd0aCA6IGVuZCB8IDBcblx0XG5cdCAgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSAndXRmOCdcblx0ICBpZiAoc3RhcnQgPCAwKSBzdGFydCA9IDBcblx0ICBpZiAoZW5kID4gdGhpcy5sZW5ndGgpIGVuZCA9IHRoaXMubGVuZ3RoXG5cdCAgaWYgKGVuZCA8PSBzdGFydCkgcmV0dXJuICcnXG5cdFxuXHQgIHdoaWxlICh0cnVlKSB7XG5cdCAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG5cdCAgICAgIGNhc2UgJ2hleCc6XG5cdCAgICAgICAgcmV0dXJuIGhleFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cdFxuXHQgICAgICBjYXNlICd1dGY4Jzpcblx0ICAgICAgY2FzZSAndXRmLTgnOlxuXHQgICAgICAgIHJldHVybiB1dGY4U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblx0XG5cdCAgICAgIGNhc2UgJ2FzY2lpJzpcblx0ICAgICAgICByZXR1cm4gYXNjaWlTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXHRcblx0ICAgICAgY2FzZSAnYmluYXJ5Jzpcblx0ICAgICAgICByZXR1cm4gYmluYXJ5U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblx0XG5cdCAgICAgIGNhc2UgJ2Jhc2U2NCc6XG5cdCAgICAgICAgcmV0dXJuIGJhc2U2NFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cdFxuXHQgICAgICBjYXNlICd1Y3MyJzpcblx0ICAgICAgY2FzZSAndWNzLTInOlxuXHQgICAgICBjYXNlICd1dGYxNmxlJzpcblx0ICAgICAgY2FzZSAndXRmLTE2bGUnOlxuXHQgICAgICAgIHJldHVybiB1dGYxNmxlU2xpY2UodGhpcywgc3RhcnQsIGVuZClcblx0XG5cdCAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG5cdCAgICAgICAgZW5jb2RpbmcgPSAoZW5jb2RpbmcgKyAnJykudG9Mb3dlckNhc2UoKVxuXHQgICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nICgpIHtcblx0ICB2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGggfCAwXG5cdCAgaWYgKGxlbmd0aCA9PT0gMCkgcmV0dXJuICcnXG5cdCAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHJldHVybiB1dGY4U2xpY2UodGhpcywgMCwgbGVuZ3RoKVxuXHQgIHJldHVybiBzbG93VG9TdHJpbmcuYXBwbHkodGhpcywgYXJndW1lbnRzKVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscyAoYikge1xuXHQgIGlmICghQnVmZmVyLmlzQnVmZmVyKGIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyJylcblx0ICBpZiAodGhpcyA9PT0gYikgcmV0dXJuIHRydWVcblx0ICByZXR1cm4gQnVmZmVyLmNvbXBhcmUodGhpcywgYikgPT09IDBcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5pbnNwZWN0ID0gZnVuY3Rpb24gaW5zcGVjdCAoKSB7XG5cdCAgdmFyIHN0ciA9ICcnXG5cdCAgdmFyIG1heCA9IGV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVNcblx0ICBpZiAodGhpcy5sZW5ndGggPiAwKSB7XG5cdCAgICBzdHIgPSB0aGlzLnRvU3RyaW5nKCdoZXgnLCAwLCBtYXgpLm1hdGNoKC8uezJ9L2cpLmpvaW4oJyAnKVxuXHQgICAgaWYgKHRoaXMubGVuZ3RoID4gbWF4KSBzdHIgKz0gJyAuLi4gJ1xuXHQgIH1cblx0ICByZXR1cm4gJzxCdWZmZXIgJyArIHN0ciArICc+J1xuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlIChiKSB7XG5cdCAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuXHQgIGlmICh0aGlzID09PSBiKSByZXR1cm4gMFxuXHQgIHJldHVybiBCdWZmZXIuY29tcGFyZSh0aGlzLCBiKVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiBpbmRleE9mICh2YWwsIGJ5dGVPZmZzZXQpIHtcblx0ICBpZiAoYnl0ZU9mZnNldCA+IDB4N2ZmZmZmZmYpIGJ5dGVPZmZzZXQgPSAweDdmZmZmZmZmXG5cdCAgZWxzZSBpZiAoYnl0ZU9mZnNldCA8IC0weDgwMDAwMDAwKSBieXRlT2Zmc2V0ID0gLTB4ODAwMDAwMDBcblx0ICBieXRlT2Zmc2V0ID4+PSAwXG5cdFxuXHQgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC0xXG5cdCAgaWYgKGJ5dGVPZmZzZXQgPj0gdGhpcy5sZW5ndGgpIHJldHVybiAtMVxuXHRcblx0ICAvLyBOZWdhdGl2ZSBvZmZzZXRzIHN0YXJ0IGZyb20gdGhlIGVuZCBvZiB0aGUgYnVmZmVyXG5cdCAgaWYgKGJ5dGVPZmZzZXQgPCAwKSBieXRlT2Zmc2V0ID0gTWF0aC5tYXgodGhpcy5sZW5ndGggKyBieXRlT2Zmc2V0LCAwKVxuXHRcblx0ICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcblx0ICAgIGlmICh2YWwubGVuZ3RoID09PSAwKSByZXR1cm4gLTEgLy8gc3BlY2lhbCBjYXNlOiBsb29raW5nIGZvciBlbXB0eSBzdHJpbmcgYWx3YXlzIGZhaWxzXG5cdCAgICByZXR1cm4gU3RyaW5nLnByb3RvdHlwZS5pbmRleE9mLmNhbGwodGhpcywgdmFsLCBieXRlT2Zmc2V0KVxuXHQgIH1cblx0ICBpZiAoQnVmZmVyLmlzQnVmZmVyKHZhbCkpIHtcblx0ICAgIHJldHVybiBhcnJheUluZGV4T2YodGhpcywgdmFsLCBieXRlT2Zmc2V0KVxuXHQgIH1cblx0ICBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcblx0ICAgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCAmJiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwodGhpcywgdmFsLCBieXRlT2Zmc2V0KVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIGFycmF5SW5kZXhPZih0aGlzLCBbIHZhbCBdLCBieXRlT2Zmc2V0KVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gYXJyYXlJbmRleE9mIChhcnIsIHZhbCwgYnl0ZU9mZnNldCkge1xuXHQgICAgdmFyIGZvdW5kSW5kZXggPSAtMVxuXHQgICAgZm9yICh2YXIgaSA9IDA7IGJ5dGVPZmZzZXQgKyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIGlmIChhcnJbYnl0ZU9mZnNldCArIGldID09PSB2YWxbZm91bmRJbmRleCA9PT0gLTEgPyAwIDogaSAtIGZvdW5kSW5kZXhdKSB7XG5cdCAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKSBmb3VuZEluZGV4ID0gaVxuXHQgICAgICAgIGlmIChpIC0gZm91bmRJbmRleCArIDEgPT09IHZhbC5sZW5ndGgpIHJldHVybiBieXRlT2Zmc2V0ICsgZm91bmRJbmRleFxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGZvdW5kSW5kZXggPSAtMVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gLTFcblx0ICB9XG5cdFxuXHQgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3ZhbCBtdXN0IGJlIHN0cmluZywgbnVtYmVyIG9yIEJ1ZmZlcicpXG5cdH1cblx0XG5cdC8vIGBnZXRgIGlzIGRlcHJlY2F0ZWRcblx0QnVmZmVyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiBnZXQgKG9mZnNldCkge1xuXHQgIGNvbnNvbGUubG9nKCcuZ2V0KCkgaXMgZGVwcmVjYXRlZC4gQWNjZXNzIHVzaW5nIGFycmF5IGluZGV4ZXMgaW5zdGVhZC4nKVxuXHQgIHJldHVybiB0aGlzLnJlYWRVSW50OChvZmZzZXQpXG5cdH1cblx0XG5cdC8vIGBzZXRgIGlzIGRlcHJlY2F0ZWRcblx0QnVmZmVyLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiBzZXQgKHYsIG9mZnNldCkge1xuXHQgIGNvbnNvbGUubG9nKCcuc2V0KCkgaXMgZGVwcmVjYXRlZC4gQWNjZXNzIHVzaW5nIGFycmF5IGluZGV4ZXMgaW5zdGVhZC4nKVxuXHQgIHJldHVybiB0aGlzLndyaXRlVUludDgodiwgb2Zmc2V0KVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBoZXhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG5cdCAgb2Zmc2V0ID0gTnVtYmVyKG9mZnNldCkgfHwgMFxuXHQgIHZhciByZW1haW5pbmcgPSBidWYubGVuZ3RoIC0gb2Zmc2V0XG5cdCAgaWYgKCFsZW5ndGgpIHtcblx0ICAgIGxlbmd0aCA9IHJlbWFpbmluZ1xuXHQgIH0gZWxzZSB7XG5cdCAgICBsZW5ndGggPSBOdW1iZXIobGVuZ3RoKVxuXHQgICAgaWYgKGxlbmd0aCA+IHJlbWFpbmluZykge1xuXHQgICAgICBsZW5ndGggPSByZW1haW5pbmdcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8vIG11c3QgYmUgYW4gZXZlbiBudW1iZXIgb2YgZGlnaXRzXG5cdCAgdmFyIHN0ckxlbiA9IHN0cmluZy5sZW5ndGhcblx0ICBpZiAoc3RyTGVuICUgMiAhPT0gMCkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGhleCBzdHJpbmcnKVxuXHRcblx0ICBpZiAobGVuZ3RoID4gc3RyTGVuIC8gMikge1xuXHQgICAgbGVuZ3RoID0gc3RyTGVuIC8gMlxuXHQgIH1cblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgcGFyc2VkID0gcGFyc2VJbnQoc3RyaW5nLnN1YnN0cihpICogMiwgMiksIDE2KVxuXHQgICAgaWYgKGlzTmFOKHBhcnNlZCkpIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBoZXggc3RyaW5nJylcblx0ICAgIGJ1ZltvZmZzZXQgKyBpXSA9IHBhcnNlZFxuXHQgIH1cblx0ICByZXR1cm4gaVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB1dGY4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuXHQgIHJldHVybiBibGl0QnVmZmVyKHV0ZjhUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFzY2lpV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuXHQgIHJldHVybiBibGl0QnVmZmVyKGFzY2lpVG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBiaW5hcnlXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG5cdCAgcmV0dXJuIGFzY2lpV3JpdGUoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBiYXNlNjRXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG5cdCAgcmV0dXJuIGJsaXRCdWZmZXIoYmFzZTY0VG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB1Y3MyV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuXHQgIHJldHVybiBibGl0QnVmZmVyKHV0ZjE2bGVUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiB3cml0ZSAoc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCwgZW5jb2RpbmcpIHtcblx0ICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nKVxuXHQgIGlmIChvZmZzZXQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgZW5jb2RpbmcgPSAndXRmOCdcblx0ICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoXG5cdCAgICBvZmZzZXQgPSAwXG5cdCAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgZW5jb2RpbmcpXG5cdCAgfSBlbHNlIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygb2Zmc2V0ID09PSAnc3RyaW5nJykge1xuXHQgICAgZW5jb2RpbmcgPSBvZmZzZXRcblx0ICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoXG5cdCAgICBvZmZzZXQgPSAwXG5cdCAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgb2Zmc2V0WywgbGVuZ3RoXVssIGVuY29kaW5nXSlcblx0ICB9IGVsc2UgaWYgKGlzRmluaXRlKG9mZnNldCkpIHtcblx0ICAgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICAgIGlmIChpc0Zpbml0ZShsZW5ndGgpKSB7XG5cdCAgICAgIGxlbmd0aCA9IGxlbmd0aCB8IDBcblx0ICAgICAgaWYgKGVuY29kaW5nID09PSB1bmRlZmluZWQpIGVuY29kaW5nID0gJ3V0ZjgnXG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBlbmNvZGluZyA9IGxlbmd0aFxuXHQgICAgICBsZW5ndGggPSB1bmRlZmluZWRcblx0ICAgIH1cblx0ICAvLyBsZWdhY3kgd3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0LCBsZW5ndGgpIC0gcmVtb3ZlIGluIHYwLjEzXG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBzd2FwID0gZW5jb2Rpbmdcblx0ICAgIGVuY29kaW5nID0gb2Zmc2V0XG5cdCAgICBvZmZzZXQgPSBsZW5ndGggfCAwXG5cdCAgICBsZW5ndGggPSBzd2FwXG5cdCAgfVxuXHRcblx0ICB2YXIgcmVtYWluaW5nID0gdGhpcy5sZW5ndGggLSBvZmZzZXRcblx0ICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgfHwgbGVuZ3RoID4gcmVtYWluaW5nKSBsZW5ndGggPSByZW1haW5pbmdcblx0XG5cdCAgaWYgKChzdHJpbmcubGVuZ3RoID4gMCAmJiAobGVuZ3RoIDwgMCB8fCBvZmZzZXQgPCAwKSkgfHwgb2Zmc2V0ID4gdGhpcy5sZW5ndGgpIHtcblx0ICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdhdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcycpXG5cdCAgfVxuXHRcblx0ICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4J1xuXHRcblx0ICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuXHQgIGZvciAoOzspIHtcblx0ICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcblx0ICAgICAgY2FzZSAnaGV4Jzpcblx0ICAgICAgICByZXR1cm4gaGV4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblx0XG5cdCAgICAgIGNhc2UgJ3V0ZjgnOlxuXHQgICAgICBjYXNlICd1dGYtOCc6XG5cdCAgICAgICAgcmV0dXJuIHV0ZjhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXHRcblx0ICAgICAgY2FzZSAnYXNjaWknOlxuXHQgICAgICAgIHJldHVybiBhc2NpaVdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cdFxuXHQgICAgICBjYXNlICdiaW5hcnknOlxuXHQgICAgICAgIHJldHVybiBiaW5hcnlXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXHRcblx0ICAgICAgY2FzZSAnYmFzZTY0Jzpcblx0ICAgICAgICAvLyBXYXJuaW5nOiBtYXhMZW5ndGggbm90IHRha2VuIGludG8gYWNjb3VudCBpbiBiYXNlNjRXcml0ZVxuXHQgICAgICAgIHJldHVybiBiYXNlNjRXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXHRcblx0ICAgICAgY2FzZSAndWNzMic6XG5cdCAgICAgIGNhc2UgJ3Vjcy0yJzpcblx0ICAgICAgY2FzZSAndXRmMTZsZSc6XG5cdCAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcblx0ICAgICAgICByZXR1cm4gdWNzMldyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cdFxuXHQgICAgICBkZWZhdWx0OlxuXHQgICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuXHQgICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcblx0ICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgdHlwZTogJ0J1ZmZlcicsXG5cdCAgICBkYXRhOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9hcnIgfHwgdGhpcywgMClcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGJhc2U2NFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcblx0ICBpZiAoc3RhcnQgPT09IDAgJiYgZW5kID09PSBidWYubGVuZ3RoKSB7XG5cdCAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmKVxuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmLnNsaWNlKHN0YXJ0LCBlbmQpKVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gdXRmOFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcblx0ICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cdCAgdmFyIHJlcyA9IFtdXG5cdFxuXHQgIHZhciBpID0gc3RhcnRcblx0ICB3aGlsZSAoaSA8IGVuZCkge1xuXHQgICAgdmFyIGZpcnN0Qnl0ZSA9IGJ1ZltpXVxuXHQgICAgdmFyIGNvZGVQb2ludCA9IG51bGxcblx0ICAgIHZhciBieXRlc1BlclNlcXVlbmNlID0gKGZpcnN0Qnl0ZSA+IDB4RUYpID8gNFxuXHQgICAgICA6IChmaXJzdEJ5dGUgPiAweERGKSA/IDNcblx0ICAgICAgOiAoZmlyc3RCeXRlID4gMHhCRikgPyAyXG5cdCAgICAgIDogMVxuXHRcblx0ICAgIGlmIChpICsgYnl0ZXNQZXJTZXF1ZW5jZSA8PSBlbmQpIHtcblx0ICAgICAgdmFyIHNlY29uZEJ5dGUsIHRoaXJkQnl0ZSwgZm91cnRoQnl0ZSwgdGVtcENvZGVQb2ludFxuXHRcblx0ICAgICAgc3dpdGNoIChieXRlc1BlclNlcXVlbmNlKSB7XG5cdCAgICAgICAgY2FzZSAxOlxuXHQgICAgICAgICAgaWYgKGZpcnN0Qnl0ZSA8IDB4ODApIHtcblx0ICAgICAgICAgICAgY29kZVBvaW50ID0gZmlyc3RCeXRlXG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBicmVha1xuXHQgICAgICAgIGNhc2UgMjpcblx0ICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG5cdCAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuXHQgICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4MUYpIDw8IDB4NiB8IChzZWNvbmRCeXRlICYgMHgzRilcblx0ICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGKSB7XG5cdCAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBicmVha1xuXHQgICAgICAgIGNhc2UgMzpcblx0ICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG5cdCAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdXG5cdCAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcblx0ICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweEYpIDw8IDB4QyB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHg2IHwgKHRoaXJkQnl0ZSAmIDB4M0YpXG5cdCAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHg3RkYgJiYgKHRlbXBDb2RlUG9pbnQgPCAweEQ4MDAgfHwgdGVtcENvZGVQb2ludCA+IDB4REZGRikpIHtcblx0ICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGJyZWFrXG5cdCAgICAgICAgY2FzZSA0OlxuXHQgICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cblx0ICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl1cblx0ICAgICAgICAgIGZvdXJ0aEJ5dGUgPSBidWZbaSArIDNdXG5cdCAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKGZvdXJ0aEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuXHQgICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHgxMiB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHhDIHwgKHRoaXJkQnl0ZSAmIDB4M0YpIDw8IDB4NiB8IChmb3VydGhCeXRlICYgMHgzRilcblx0ICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweEZGRkYgJiYgdGVtcENvZGVQb2ludCA8IDB4MTEwMDAwKSB7XG5cdCAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBpZiAoY29kZVBvaW50ID09PSBudWxsKSB7XG5cdCAgICAgIC8vIHdlIGRpZCBub3QgZ2VuZXJhdGUgYSB2YWxpZCBjb2RlUG9pbnQgc28gaW5zZXJ0IGFcblx0ICAgICAgLy8gcmVwbGFjZW1lbnQgY2hhciAoVStGRkZEKSBhbmQgYWR2YW5jZSBvbmx5IDEgYnl0ZVxuXHQgICAgICBjb2RlUG9pbnQgPSAweEZGRkRcblx0ICAgICAgYnl0ZXNQZXJTZXF1ZW5jZSA9IDFcblx0ICAgIH0gZWxzZSBpZiAoY29kZVBvaW50ID4gMHhGRkZGKSB7XG5cdCAgICAgIC8vIGVuY29kZSB0byB1dGYxNiAoc3Vycm9nYXRlIHBhaXIgZGFuY2UpXG5cdCAgICAgIGNvZGVQb2ludCAtPSAweDEwMDAwXG5cdCAgICAgIHJlcy5wdXNoKGNvZGVQb2ludCA+Pj4gMTAgJiAweDNGRiB8IDB4RDgwMClcblx0ICAgICAgY29kZVBvaW50ID0gMHhEQzAwIHwgY29kZVBvaW50ICYgMHgzRkZcblx0ICAgIH1cblx0XG5cdCAgICByZXMucHVzaChjb2RlUG9pbnQpXG5cdCAgICBpICs9IGJ5dGVzUGVyU2VxdWVuY2Vcblx0ICB9XG5cdFxuXHQgIHJldHVybiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkocmVzKVxuXHR9XG5cdFxuXHQvLyBCYXNlZCBvbiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMjc0NzI3Mi82ODA3NDIsIHRoZSBicm93c2VyIHdpdGhcblx0Ly8gdGhlIGxvd2VzdCBsaW1pdCBpcyBDaHJvbWUsIHdpdGggMHgxMDAwMCBhcmdzLlxuXHQvLyBXZSBnbyAxIG1hZ25pdHVkZSBsZXNzLCBmb3Igc2FmZXR5XG5cdHZhciBNQVhfQVJHVU1FTlRTX0xFTkdUSCA9IDB4MTAwMFxuXHRcblx0ZnVuY3Rpb24gZGVjb2RlQ29kZVBvaW50c0FycmF5IChjb2RlUG9pbnRzKSB7XG5cdCAgdmFyIGxlbiA9IGNvZGVQb2ludHMubGVuZ3RoXG5cdCAgaWYgKGxlbiA8PSBNQVhfQVJHVU1FTlRTX0xFTkdUSCkge1xuXHQgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBjb2RlUG9pbnRzKSAvLyBhdm9pZCBleHRyYSBzbGljZSgpXG5cdCAgfVxuXHRcblx0ICAvLyBEZWNvZGUgaW4gY2h1bmtzIHRvIGF2b2lkIFwiY2FsbCBzdGFjayBzaXplIGV4Y2VlZGVkXCIuXG5cdCAgdmFyIHJlcyA9ICcnXG5cdCAgdmFyIGkgPSAwXG5cdCAgd2hpbGUgKGkgPCBsZW4pIHtcblx0ICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFxuXHQgICAgICBTdHJpbmcsXG5cdCAgICAgIGNvZGVQb2ludHMuc2xpY2UoaSwgaSArPSBNQVhfQVJHVU1FTlRTX0xFTkdUSClcblx0ICAgIClcblx0ICB9XG5cdCAgcmV0dXJuIHJlc1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhc2NpaVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcblx0ICB2YXIgcmV0ID0gJydcblx0ICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cdFxuXHQgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG5cdCAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0gJiAweDdGKVxuXHQgIH1cblx0ICByZXR1cm4gcmV0XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGJpbmFyeVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcblx0ICB2YXIgcmV0ID0gJydcblx0ICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cdFxuXHQgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG5cdCAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0pXG5cdCAgfVxuXHQgIHJldHVybiByZXRcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGV4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuXHQgIHZhciBsZW4gPSBidWYubGVuZ3RoXG5cdFxuXHQgIGlmICghc3RhcnQgfHwgc3RhcnQgPCAwKSBzdGFydCA9IDBcblx0ICBpZiAoIWVuZCB8fCBlbmQgPCAwIHx8IGVuZCA+IGxlbikgZW5kID0gbGVuXG5cdFxuXHQgIHZhciBvdXQgPSAnJ1xuXHQgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG5cdCAgICBvdXQgKz0gdG9IZXgoYnVmW2ldKVxuXHQgIH1cblx0ICByZXR1cm4gb3V0XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHV0ZjE2bGVTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG5cdCAgdmFyIGJ5dGVzID0gYnVmLnNsaWNlKHN0YXJ0LCBlbmQpXG5cdCAgdmFyIHJlcyA9ICcnXG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkgKz0gMikge1xuXHQgICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZXNbaV0gKyBieXRlc1tpICsgMV0gKiAyNTYpXG5cdCAgfVxuXHQgIHJldHVybiByZXNcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5zbGljZSA9IGZ1bmN0aW9uIHNsaWNlIChzdGFydCwgZW5kKSB7XG5cdCAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG5cdCAgc3RhcnQgPSB+fnN0YXJ0XG5cdCAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyBsZW4gOiB+fmVuZFxuXHRcblx0ICBpZiAoc3RhcnQgPCAwKSB7XG5cdCAgICBzdGFydCArPSBsZW5cblx0ICAgIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gMFxuXHQgIH0gZWxzZSBpZiAoc3RhcnQgPiBsZW4pIHtcblx0ICAgIHN0YXJ0ID0gbGVuXG5cdCAgfVxuXHRcblx0ICBpZiAoZW5kIDwgMCkge1xuXHQgICAgZW5kICs9IGxlblxuXHQgICAgaWYgKGVuZCA8IDApIGVuZCA9IDBcblx0ICB9IGVsc2UgaWYgKGVuZCA+IGxlbikge1xuXHQgICAgZW5kID0gbGVuXG5cdCAgfVxuXHRcblx0ICBpZiAoZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0XG5cdFxuXHQgIHZhciBuZXdCdWZcblx0ICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgIG5ld0J1ZiA9IEJ1ZmZlci5fYXVnbWVudCh0aGlzLnN1YmFycmF5KHN0YXJ0LCBlbmQpKVxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgc2xpY2VMZW4gPSBlbmQgLSBzdGFydFxuXHQgICAgbmV3QnVmID0gbmV3IEJ1ZmZlcihzbGljZUxlbiwgdW5kZWZpbmVkKVxuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzbGljZUxlbjsgaSsrKSB7XG5cdCAgICAgIG5ld0J1ZltpXSA9IHRoaXNbaSArIHN0YXJ0XVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgaWYgKG5ld0J1Zi5sZW5ndGgpIG5ld0J1Zi5wYXJlbnQgPSB0aGlzLnBhcmVudCB8fCB0aGlzXG5cdFxuXHQgIHJldHVybiBuZXdCdWZcblx0fVxuXHRcblx0Lypcblx0ICogTmVlZCB0byBtYWtlIHN1cmUgdGhhdCBidWZmZXIgaXNuJ3QgdHJ5aW5nIHRvIHdyaXRlIG91dCBvZiBib3VuZHMuXG5cdCAqL1xuXHRmdW5jdGlvbiBjaGVja09mZnNldCAob2Zmc2V0LCBleHQsIGxlbmd0aCkge1xuXHQgIGlmICgob2Zmc2V0ICUgMSkgIT09IDAgfHwgb2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ29mZnNldCBpcyBub3QgdWludCcpXG5cdCAgaWYgKG9mZnNldCArIGV4dCA+IGxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50TEUgPSBmdW5jdGlvbiByZWFkVUludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cdFxuXHQgIHZhciB2YWwgPSB0aGlzW29mZnNldF1cblx0ICB2YXIgbXVsID0gMVxuXHQgIHZhciBpID0gMFxuXHQgIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG5cdCAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bFxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHZhbFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50QkUgPSBmdW5jdGlvbiByZWFkVUludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIHtcblx0ICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cdCAgfVxuXHRcblx0ICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdXG5cdCAgdmFyIG11bCA9IDFcblx0ICB3aGlsZSAoYnl0ZUxlbmd0aCA+IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcblx0ICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF0gKiBtdWxcblx0ICB9XG5cdFxuXHQgIHJldHVybiB2YWxcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDggPSBmdW5jdGlvbiByZWFkVUludDggKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKVxuXHQgIHJldHVybiB0aGlzW29mZnNldF1cblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2TEUgPSBmdW5jdGlvbiByZWFkVUludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuXHQgIHJldHVybiB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG5cdCAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgOCkgfCB0aGlzW29mZnNldCArIDFdXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQzMkxFID0gZnVuY3Rpb24gcmVhZFVJbnQzMkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblx0XG5cdCAgcmV0dXJuICgodGhpc1tvZmZzZXRdKSB8XG5cdCAgICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHxcblx0ICAgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpKSArXG5cdCAgICAgICh0aGlzW29mZnNldCArIDNdICogMHgxMDAwMDAwKVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cdFxuXHQgIHJldHVybiAodGhpc1tvZmZzZXRdICogMHgxMDAwMDAwKSArXG5cdCAgICAoKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcblx0ICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHxcblx0ICAgIHRoaXNbb2Zmc2V0ICsgM10pXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZEludExFID0gZnVuY3Rpb24gcmVhZEludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cdFxuXHQgIHZhciB2YWwgPSB0aGlzW29mZnNldF1cblx0ICB2YXIgbXVsID0gMVxuXHQgIHZhciBpID0gMFxuXHQgIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG5cdCAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bFxuXHQgIH1cblx0ICBtdWwgKj0gMHg4MFxuXHRcblx0ICBpZiAodmFsID49IG11bCkgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKVxuXHRcblx0ICByZXR1cm4gdmFsXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZEludEJFID0gZnVuY3Rpb24gcmVhZEludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cdFxuXHQgIHZhciBpID0gYnl0ZUxlbmd0aFxuXHQgIHZhciBtdWwgPSAxXG5cdCAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1pXVxuXHQgIHdoaWxlIChpID4gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuXHQgICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1pXSAqIG11bFxuXHQgIH1cblx0ICBtdWwgKj0gMHg4MFxuXHRcblx0ICBpZiAodmFsID49IG11bCkgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKVxuXHRcblx0ICByZXR1cm4gdmFsXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZEludDggPSBmdW5jdGlvbiByZWFkSW50OCAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpXG5cdCAgaWYgKCEodGhpc1tvZmZzZXRdICYgMHg4MCkpIHJldHVybiAodGhpc1tvZmZzZXRdKVxuXHQgIHJldHVybiAoKDB4ZmYgLSB0aGlzW29mZnNldF0gKyAxKSAqIC0xKVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkxFID0gZnVuY3Rpb24gcmVhZEludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuXHQgIHZhciB2YWwgPSB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KVxuXHQgIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWxcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcblx0ICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAxXSB8ICh0aGlzW29mZnNldF0gPDwgOClcblx0ICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyTEUgPSBmdW5jdGlvbiByZWFkSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cdFxuXHQgIHJldHVybiAodGhpc1tvZmZzZXRdKSB8XG5cdCAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KSB8XG5cdCAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikgfFxuXHQgICAgKHRoaXNbb2Zmc2V0ICsgM10gPDwgMjQpXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyQkUgPSBmdW5jdGlvbiByZWFkSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cdFxuXHQgIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDI0KSB8XG5cdCAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfFxuXHQgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfFxuXHQgICAgKHRoaXNbb2Zmc2V0ICsgM10pXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0TEUgPSBmdW5jdGlvbiByZWFkRmxvYXRMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cdCAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDIzLCA0KVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdEJFID0gZnVuY3Rpb24gcmVhZEZsb2F0QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXHQgIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgMjMsIDQpXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUxFID0gZnVuY3Rpb24gcmVhZERvdWJsZUxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aClcblx0ICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgNTIsIDgpXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUJFID0gZnVuY3Rpb24gcmVhZERvdWJsZUJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aClcblx0ICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDUyLCA4KVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjaGVja0ludCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG5cdCAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignYnVmZmVyIG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKVxuXHQgIGlmICh2YWx1ZSA+IG1heCB8fCB2YWx1ZSA8IG1pbikgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3ZhbHVlIGlzIG91dCBvZiBib3VuZHMnKVxuXHQgIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignaW5kZXggb3V0IG9mIHJhbmdlJylcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlVUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuXHQgIHZhbHVlID0gK3ZhbHVlXG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSwgMClcblx0XG5cdCAgdmFyIG11bCA9IDFcblx0ICB2YXIgaSA9IDBcblx0ICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcblx0ICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuXHQgICAgdGhpc1tvZmZzZXQgKyBpXSA9ICh2YWx1ZSAvIG11bCkgJiAweEZGXG5cdCAgfVxuXHRcblx0ICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlVUludEJFID0gZnVuY3Rpb24gd3JpdGVVSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG5cdCAgdmFsdWUgPSArdmFsdWVcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpLCAwKVxuXHRcblx0ICB2YXIgaSA9IGJ5dGVMZW5ndGggLSAxXG5cdCAgdmFyIG11bCA9IDFcblx0ICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGXG5cdCAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XG5cdCAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkZcblx0ICB9XG5cdFxuXHQgIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50OCA9IGZ1bmN0aW9uIHdyaXRlVUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgdmFsdWUgPSArdmFsdWVcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHhmZiwgMClcblx0ICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXG5cdCAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcblx0ICByZXR1cm4gb2Zmc2V0ICsgMVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBvYmplY3RXcml0ZVVJbnQxNiAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcblx0ICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZiArIHZhbHVlICsgMVxuXHQgIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgMik7IGkgPCBqOyBpKyspIHtcblx0ICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSAmICgweGZmIDw8ICg4ICogKGxpdHRsZUVuZGlhbiA/IGkgOiAxIC0gaSkpKSkgPj4+XG5cdCAgICAgIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpICogOFxuXHQgIH1cblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXG5cdCAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuXHQgICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcblx0ICB9IGVsc2Uge1xuXHQgICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcblx0ICB9XG5cdCAgcmV0dXJuIG9mZnNldCArIDJcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXG5cdCAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpXG5cdCAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZilcblx0ICB9IGVsc2Uge1xuXHQgICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG5cdCAgfVxuXHQgIHJldHVybiBvZmZzZXQgKyAyXG5cdH1cblx0XG5cdGZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDMyIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuXHQgIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMVxuXHQgIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgNCk7IGkgPCBqOyBpKyspIHtcblx0ICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSA+Pj4gKGxpdHRsZUVuZGlhbiA/IGkgOiAzIC0gaSkgKiA4KSAmIDB4ZmZcblx0ICB9XG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgdmFsdWUgPSArdmFsdWVcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMClcblx0ICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuXHQgICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpXG5cdCAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuXHQgICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcblx0ICB9IGVsc2Uge1xuXHQgICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcblx0ICB9XG5cdCAgcmV0dXJuIG9mZnNldCArIDRcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKVxuXHQgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuXHQgICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcblx0ICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KVxuXHQgICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gOClcblx0ICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKVxuXHQgIH0gZWxzZSB7XG5cdCAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcblx0ICB9XG5cdCAgcmV0dXJuIG9mZnNldCArIDRcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZUludExFID0gZnVuY3Rpb24gd3JpdGVJbnRMRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSB7XG5cdCAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpXG5cdFxuXHQgICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpXG5cdCAgfVxuXHRcblx0ICB2YXIgaSA9IDBcblx0ICB2YXIgbXVsID0gMVxuXHQgIHZhciBzdWIgPSB2YWx1ZSA8IDAgPyAxIDogMFxuXHQgIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRlxuXHQgIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG5cdCAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXG5cdCAgfVxuXHRcblx0ICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlSW50QkUgPSBmdW5jdGlvbiB3cml0ZUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuXHQgIHZhbHVlID0gK3ZhbHVlXG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIHtcblx0ICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSlcblx0XG5cdCAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdClcblx0ICB9XG5cdFxuXHQgIHZhciBpID0gYnl0ZUxlbmd0aCAtIDFcblx0ICB2YXIgbXVsID0gMVxuXHQgIHZhciBzdWIgPSB2YWx1ZSA8IDAgPyAxIDogMFxuXHQgIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkZcblx0ICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcblx0ICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAoKHZhbHVlIC8gbXVsKSA+PiAwKSAtIHN1YiAmIDB4RkZcblx0ICB9XG5cdFxuXHQgIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVJbnQ4ICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIHZhbHVlID0gK3ZhbHVlXG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDB4N2YsIC0weDgwKVxuXHQgIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSlcblx0ICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmYgKyB2YWx1ZSArIDFcblx0ICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuXHQgIHJldHVybiBvZmZzZXQgKyAxXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVJbnQxNkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIHZhbHVlID0gK3ZhbHVlXG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMClcblx0ICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG5cdCAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuXHQgIH0gZWxzZSB7XG5cdCAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuXHQgIH1cblx0ICByZXR1cm4gb2Zmc2V0ICsgMlxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApXG5cdCAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpXG5cdCAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZilcblx0ICB9IGVsc2Uge1xuXHQgICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG5cdCAgfVxuXHQgIHJldHVybiBvZmZzZXQgKyAyXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkxFID0gZnVuY3Rpb24gd3JpdGVJbnQzMkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIHZhbHVlID0gK3ZhbHVlXG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKVxuXHQgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuXHQgICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcblx0ICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG5cdCAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNilcblx0ICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuXHQgIH0gZWxzZSB7XG5cdCAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuXHQgIH1cblx0ICByZXR1cm4gb2Zmc2V0ICsgNFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMClcblx0ICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDFcblx0ICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gMjQpXG5cdCAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNilcblx0ICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpXG5cdCAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlICYgMHhmZilcblx0ICB9IGVsc2Uge1xuXHQgICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG5cdCAgfVxuXHQgIHJldHVybiBvZmZzZXQgKyA0XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNoZWNrSUVFRTc1NCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG5cdCAgaWYgKHZhbHVlID4gbWF4IHx8IHZhbHVlIDwgbWluKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndmFsdWUgaXMgb3V0IG9mIGJvdW5kcycpXG5cdCAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdpbmRleCBvdXQgb2YgcmFuZ2UnKVxuXHQgIGlmIChvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignaW5kZXggb3V0IG9mIHJhbmdlJylcblx0fVxuXHRcblx0ZnVuY3Rpb24gd3JpdGVGbG9hdCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkge1xuXHQgICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgNCwgMy40MDI4MjM0NjYzODUyODg2ZSszOCwgLTMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgpXG5cdCAgfVxuXHQgIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDIzLCA0KVxuXHQgIHJldHVybiBvZmZzZXQgKyA0XG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdExFID0gZnVuY3Rpb24gd3JpdGVGbG9hdExFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRCRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHdyaXRlRG91YmxlIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSB7XG5cdCAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA4LCAxLjc5NzY5MzEzNDg2MjMxNTdFKzMwOCwgLTEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4KVxuXHQgIH1cblx0ICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCA1MiwgOClcblx0ICByZXR1cm4gb2Zmc2V0ICsgOFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlTEUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydClcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUJFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KVxuXHR9XG5cdFxuXHQvLyBjb3B5KHRhcmdldEJ1ZmZlciwgdGFyZ2V0U3RhcnQ9MCwgc291cmNlU3RhcnQ9MCwgc291cmNlRW5kPWJ1ZmZlci5sZW5ndGgpXG5cdEJ1ZmZlci5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIGNvcHkgKHRhcmdldCwgdGFyZ2V0U3RhcnQsIHN0YXJ0LCBlbmQpIHtcblx0ICBpZiAoIXN0YXJ0KSBzdGFydCA9IDBcblx0ICBpZiAoIWVuZCAmJiBlbmQgIT09IDApIGVuZCA9IHRoaXMubGVuZ3RoXG5cdCAgaWYgKHRhcmdldFN0YXJ0ID49IHRhcmdldC5sZW5ndGgpIHRhcmdldFN0YXJ0ID0gdGFyZ2V0Lmxlbmd0aFxuXHQgIGlmICghdGFyZ2V0U3RhcnQpIHRhcmdldFN0YXJ0ID0gMFxuXHQgIGlmIChlbmQgPiAwICYmIGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydFxuXHRcblx0ICAvLyBDb3B5IDAgYnl0ZXM7IHdlJ3JlIGRvbmVcblx0ICBpZiAoZW5kID09PSBzdGFydCkgcmV0dXJuIDBcblx0ICBpZiAodGFyZ2V0Lmxlbmd0aCA9PT0gMCB8fCB0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDBcblx0XG5cdCAgLy8gRmF0YWwgZXJyb3IgY29uZGl0aW9uc1xuXHQgIGlmICh0YXJnZXRTdGFydCA8IDApIHtcblx0ICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCd0YXJnZXRTdGFydCBvdXQgb2YgYm91bmRzJylcblx0ICB9XG5cdCAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZVN0YXJ0IG91dCBvZiBib3VuZHMnKVxuXHQgIGlmIChlbmQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc291cmNlRW5kIG91dCBvZiBib3VuZHMnKVxuXHRcblx0ICAvLyBBcmUgd2Ugb29iP1xuXHQgIGlmIChlbmQgPiB0aGlzLmxlbmd0aCkgZW5kID0gdGhpcy5sZW5ndGhcblx0ICBpZiAodGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0IDwgZW5kIC0gc3RhcnQpIHtcblx0ICAgIGVuZCA9IHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCArIHN0YXJ0XG5cdCAgfVxuXHRcblx0ICB2YXIgbGVuID0gZW5kIC0gc3RhcnRcblx0ICB2YXIgaVxuXHRcblx0ICBpZiAodGhpcyA9PT0gdGFyZ2V0ICYmIHN0YXJ0IDwgdGFyZ2V0U3RhcnQgJiYgdGFyZ2V0U3RhcnQgPCBlbmQpIHtcblx0ICAgIC8vIGRlc2NlbmRpbmcgY29weSBmcm9tIGVuZFxuXHQgICAgZm9yIChpID0gbGVuIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0ICAgICAgdGFyZ2V0W2kgKyB0YXJnZXRTdGFydF0gPSB0aGlzW2kgKyBzdGFydF1cblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKGxlbiA8IDEwMDAgfHwgIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgICAvLyBhc2NlbmRpbmcgY29weSBmcm9tIHN0YXJ0XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgdGFyZ2V0W2kgKyB0YXJnZXRTdGFydF0gPSB0aGlzW2kgKyBzdGFydF1cblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgdGFyZ2V0Ll9zZXQodGhpcy5zdWJhcnJheShzdGFydCwgc3RhcnQgKyBsZW4pLCB0YXJnZXRTdGFydClcblx0ICB9XG5cdFxuXHQgIHJldHVybiBsZW5cblx0fVxuXHRcblx0Ly8gZmlsbCh2YWx1ZSwgc3RhcnQ9MCwgZW5kPWJ1ZmZlci5sZW5ndGgpXG5cdEJ1ZmZlci5wcm90b3R5cGUuZmlsbCA9IGZ1bmN0aW9uIGZpbGwgKHZhbHVlLCBzdGFydCwgZW5kKSB7XG5cdCAgaWYgKCF2YWx1ZSkgdmFsdWUgPSAwXG5cdCAgaWYgKCFzdGFydCkgc3RhcnQgPSAwXG5cdCAgaWYgKCFlbmQpIGVuZCA9IHRoaXMubGVuZ3RoXG5cdFxuXHQgIGlmIChlbmQgPCBzdGFydCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2VuZCA8IHN0YXJ0Jylcblx0XG5cdCAgLy8gRmlsbCAwIGJ5dGVzOyB3ZSdyZSBkb25lXG5cdCAgaWYgKGVuZCA9PT0gc3RhcnQpIHJldHVyblxuXHQgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuXG5cdFxuXHQgIGlmIChzdGFydCA8IDAgfHwgc3RhcnQgPj0gdGhpcy5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdzdGFydCBvdXQgb2YgYm91bmRzJylcblx0ICBpZiAoZW5kIDwgMCB8fCBlbmQgPiB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2VuZCBvdXQgb2YgYm91bmRzJylcblx0XG5cdCAgdmFyIGlcblx0ICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuXHQgICAgZm9yIChpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykge1xuXHQgICAgICB0aGlzW2ldID0gdmFsdWVcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGJ5dGVzID0gdXRmOFRvQnl0ZXModmFsdWUudG9TdHJpbmcoKSlcblx0ICAgIHZhciBsZW4gPSBieXRlcy5sZW5ndGhcblx0ICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcblx0ICAgICAgdGhpc1tpXSA9IGJ5dGVzW2kgJSBsZW5dXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gdGhpc1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlcyBhIG5ldyBgQXJyYXlCdWZmZXJgIHdpdGggdGhlICpjb3BpZWQqIG1lbW9yeSBvZiB0aGUgYnVmZmVyIGluc3RhbmNlLlxuXHQgKiBBZGRlZCBpbiBOb2RlIDAuMTIuIE9ubHkgYXZhaWxhYmxlIGluIGJyb3dzZXJzIHRoYXQgc3VwcG9ydCBBcnJheUJ1ZmZlci5cblx0ICovXG5cdEJ1ZmZlci5wcm90b3R5cGUudG9BcnJheUJ1ZmZlciA9IGZ1bmN0aW9uIHRvQXJyYXlCdWZmZXIgKCkge1xuXHQgIGlmICh0eXBlb2YgVWludDhBcnJheSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuXHQgICAgICByZXR1cm4gKG5ldyBCdWZmZXIodGhpcykpLmJ1ZmZlclxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIGJ1ZiA9IG5ldyBVaW50OEFycmF5KHRoaXMubGVuZ3RoKVxuXHQgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gYnVmLmxlbmd0aDsgaSA8IGxlbjsgaSArPSAxKSB7XG5cdCAgICAgICAgYnVmW2ldID0gdGhpc1tpXVxuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBidWYuYnVmZmVyXG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0J1ZmZlci50b0FycmF5QnVmZmVyIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyJylcblx0ICB9XG5cdH1cblx0XG5cdC8vIEhFTFBFUiBGVU5DVElPTlNcblx0Ly8gPT09PT09PT09PT09PT09PVxuXHRcblx0dmFyIEJQID0gQnVmZmVyLnByb3RvdHlwZVxuXHRcblx0LyoqXG5cdCAqIEF1Z21lbnQgYSBVaW50OEFycmF5ICppbnN0YW5jZSogKG5vdCB0aGUgVWludDhBcnJheSBjbGFzcyEpIHdpdGggQnVmZmVyIG1ldGhvZHNcblx0ICovXG5cdEJ1ZmZlci5fYXVnbWVudCA9IGZ1bmN0aW9uIF9hdWdtZW50IChhcnIpIHtcblx0ICBhcnIuY29uc3RydWN0b3IgPSBCdWZmZXJcblx0ICBhcnIuX2lzQnVmZmVyID0gdHJ1ZVxuXHRcblx0ICAvLyBzYXZlIHJlZmVyZW5jZSB0byBvcmlnaW5hbCBVaW50OEFycmF5IHNldCBtZXRob2QgYmVmb3JlIG92ZXJ3cml0aW5nXG5cdCAgYXJyLl9zZXQgPSBhcnIuc2V0XG5cdFxuXHQgIC8vIGRlcHJlY2F0ZWRcblx0ICBhcnIuZ2V0ID0gQlAuZ2V0XG5cdCAgYXJyLnNldCA9IEJQLnNldFxuXHRcblx0ICBhcnIud3JpdGUgPSBCUC53cml0ZVxuXHQgIGFyci50b1N0cmluZyA9IEJQLnRvU3RyaW5nXG5cdCAgYXJyLnRvTG9jYWxlU3RyaW5nID0gQlAudG9TdHJpbmdcblx0ICBhcnIudG9KU09OID0gQlAudG9KU09OXG5cdCAgYXJyLmVxdWFscyA9IEJQLmVxdWFsc1xuXHQgIGFyci5jb21wYXJlID0gQlAuY29tcGFyZVxuXHQgIGFyci5pbmRleE9mID0gQlAuaW5kZXhPZlxuXHQgIGFyci5jb3B5ID0gQlAuY29weVxuXHQgIGFyci5zbGljZSA9IEJQLnNsaWNlXG5cdCAgYXJyLnJlYWRVSW50TEUgPSBCUC5yZWFkVUludExFXG5cdCAgYXJyLnJlYWRVSW50QkUgPSBCUC5yZWFkVUludEJFXG5cdCAgYXJyLnJlYWRVSW50OCA9IEJQLnJlYWRVSW50OFxuXHQgIGFyci5yZWFkVUludDE2TEUgPSBCUC5yZWFkVUludDE2TEVcblx0ICBhcnIucmVhZFVJbnQxNkJFID0gQlAucmVhZFVJbnQxNkJFXG5cdCAgYXJyLnJlYWRVSW50MzJMRSA9IEJQLnJlYWRVSW50MzJMRVxuXHQgIGFyci5yZWFkVUludDMyQkUgPSBCUC5yZWFkVUludDMyQkVcblx0ICBhcnIucmVhZEludExFID0gQlAucmVhZEludExFXG5cdCAgYXJyLnJlYWRJbnRCRSA9IEJQLnJlYWRJbnRCRVxuXHQgIGFyci5yZWFkSW50OCA9IEJQLnJlYWRJbnQ4XG5cdCAgYXJyLnJlYWRJbnQxNkxFID0gQlAucmVhZEludDE2TEVcblx0ICBhcnIucmVhZEludDE2QkUgPSBCUC5yZWFkSW50MTZCRVxuXHQgIGFyci5yZWFkSW50MzJMRSA9IEJQLnJlYWRJbnQzMkxFXG5cdCAgYXJyLnJlYWRJbnQzMkJFID0gQlAucmVhZEludDMyQkVcblx0ICBhcnIucmVhZEZsb2F0TEUgPSBCUC5yZWFkRmxvYXRMRVxuXHQgIGFyci5yZWFkRmxvYXRCRSA9IEJQLnJlYWRGbG9hdEJFXG5cdCAgYXJyLnJlYWREb3VibGVMRSA9IEJQLnJlYWREb3VibGVMRVxuXHQgIGFyci5yZWFkRG91YmxlQkUgPSBCUC5yZWFkRG91YmxlQkVcblx0ICBhcnIud3JpdGVVSW50OCA9IEJQLndyaXRlVUludDhcblx0ICBhcnIud3JpdGVVSW50TEUgPSBCUC53cml0ZVVJbnRMRVxuXHQgIGFyci53cml0ZVVJbnRCRSA9IEJQLndyaXRlVUludEJFXG5cdCAgYXJyLndyaXRlVUludDE2TEUgPSBCUC53cml0ZVVJbnQxNkxFXG5cdCAgYXJyLndyaXRlVUludDE2QkUgPSBCUC53cml0ZVVJbnQxNkJFXG5cdCAgYXJyLndyaXRlVUludDMyTEUgPSBCUC53cml0ZVVJbnQzMkxFXG5cdCAgYXJyLndyaXRlVUludDMyQkUgPSBCUC53cml0ZVVJbnQzMkJFXG5cdCAgYXJyLndyaXRlSW50TEUgPSBCUC53cml0ZUludExFXG5cdCAgYXJyLndyaXRlSW50QkUgPSBCUC53cml0ZUludEJFXG5cdCAgYXJyLndyaXRlSW50OCA9IEJQLndyaXRlSW50OFxuXHQgIGFyci53cml0ZUludDE2TEUgPSBCUC53cml0ZUludDE2TEVcblx0ICBhcnIud3JpdGVJbnQxNkJFID0gQlAud3JpdGVJbnQxNkJFXG5cdCAgYXJyLndyaXRlSW50MzJMRSA9IEJQLndyaXRlSW50MzJMRVxuXHQgIGFyci53cml0ZUludDMyQkUgPSBCUC53cml0ZUludDMyQkVcblx0ICBhcnIud3JpdGVGbG9hdExFID0gQlAud3JpdGVGbG9hdExFXG5cdCAgYXJyLndyaXRlRmxvYXRCRSA9IEJQLndyaXRlRmxvYXRCRVxuXHQgIGFyci53cml0ZURvdWJsZUxFID0gQlAud3JpdGVEb3VibGVMRVxuXHQgIGFyci53cml0ZURvdWJsZUJFID0gQlAud3JpdGVEb3VibGVCRVxuXHQgIGFyci5maWxsID0gQlAuZmlsbFxuXHQgIGFyci5pbnNwZWN0ID0gQlAuaW5zcGVjdFxuXHQgIGFyci50b0FycmF5QnVmZmVyID0gQlAudG9BcnJheUJ1ZmZlclxuXHRcblx0ICByZXR1cm4gYXJyXG5cdH1cblx0XG5cdHZhciBJTlZBTElEX0JBU0U2NF9SRSA9IC9bXitcXC8wLTlBLVphLXotX10vZ1xuXHRcblx0ZnVuY3Rpb24gYmFzZTY0Y2xlYW4gKHN0cikge1xuXHQgIC8vIE5vZGUgc3RyaXBzIG91dCBpbnZhbGlkIGNoYXJhY3RlcnMgbGlrZSBcXG4gYW5kIFxcdCBmcm9tIHRoZSBzdHJpbmcsIGJhc2U2NC1qcyBkb2VzIG5vdFxuXHQgIHN0ciA9IHN0cmluZ3RyaW0oc3RyKS5yZXBsYWNlKElOVkFMSURfQkFTRTY0X1JFLCAnJylcblx0ICAvLyBOb2RlIGNvbnZlcnRzIHN0cmluZ3Mgd2l0aCBsZW5ndGggPCAyIHRvICcnXG5cdCAgaWYgKHN0ci5sZW5ndGggPCAyKSByZXR1cm4gJydcblx0ICAvLyBOb2RlIGFsbG93cyBmb3Igbm9uLXBhZGRlZCBiYXNlNjQgc3RyaW5ncyAobWlzc2luZyB0cmFpbGluZyA9PT0pLCBiYXNlNjQtanMgZG9lcyBub3Rcblx0ICB3aGlsZSAoc3RyLmxlbmd0aCAlIDQgIT09IDApIHtcblx0ICAgIHN0ciA9IHN0ciArICc9J1xuXHQgIH1cblx0ICByZXR1cm4gc3RyXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHN0cmluZ3RyaW0gKHN0cikge1xuXHQgIGlmIChzdHIudHJpbSkgcmV0dXJuIHN0ci50cmltKClcblx0ICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB0b0hleCAobikge1xuXHQgIGlmIChuIDwgMTYpIHJldHVybiAnMCcgKyBuLnRvU3RyaW5nKDE2KVxuXHQgIHJldHVybiBuLnRvU3RyaW5nKDE2KVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB1dGY4VG9CeXRlcyAoc3RyaW5nLCB1bml0cykge1xuXHQgIHVuaXRzID0gdW5pdHMgfHwgSW5maW5pdHlcblx0ICB2YXIgY29kZVBvaW50XG5cdCAgdmFyIGxlbmd0aCA9IHN0cmluZy5sZW5ndGhcblx0ICB2YXIgbGVhZFN1cnJvZ2F0ZSA9IG51bGxcblx0ICB2YXIgYnl0ZXMgPSBbXVxuXHRcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdCAgICBjb2RlUG9pbnQgPSBzdHJpbmcuY2hhckNvZGVBdChpKVxuXHRcblx0ICAgIC8vIGlzIHN1cnJvZ2F0ZSBjb21wb25lbnRcblx0ICAgIGlmIChjb2RlUG9pbnQgPiAweEQ3RkYgJiYgY29kZVBvaW50IDwgMHhFMDAwKSB7XG5cdCAgICAgIC8vIGxhc3QgY2hhciB3YXMgYSBsZWFkXG5cdCAgICAgIGlmICghbGVhZFN1cnJvZ2F0ZSkge1xuXHQgICAgICAgIC8vIG5vIGxlYWQgeWV0XG5cdCAgICAgICAgaWYgKGNvZGVQb2ludCA+IDB4REJGRikge1xuXHQgICAgICAgICAgLy8gdW5leHBlY3RlZCB0cmFpbFxuXHQgICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG5cdCAgICAgICAgICBjb250aW51ZVxuXHQgICAgICAgIH0gZWxzZSBpZiAoaSArIDEgPT09IGxlbmd0aCkge1xuXHQgICAgICAgICAgLy8gdW5wYWlyZWQgbGVhZFxuXHQgICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG5cdCAgICAgICAgICBjb250aW51ZVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gdmFsaWQgbGVhZFxuXHQgICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnRcblx0XG5cdCAgICAgICAgY29udGludWVcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gMiBsZWFkcyBpbiBhIHJvd1xuXHQgICAgICBpZiAoY29kZVBvaW50IDwgMHhEQzAwKSB7XG5cdCAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG5cdCAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludFxuXHQgICAgICAgIGNvbnRpbnVlXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIHZhbGlkIHN1cnJvZ2F0ZSBwYWlyXG5cdCAgICAgIGNvZGVQb2ludCA9IChsZWFkU3Vycm9nYXRlIC0gMHhEODAwIDw8IDEwIHwgY29kZVBvaW50IC0gMHhEQzAwKSArIDB4MTAwMDBcblx0ICAgIH0gZWxzZSBpZiAobGVhZFN1cnJvZ2F0ZSkge1xuXHQgICAgICAvLyB2YWxpZCBibXAgY2hhciwgYnV0IGxhc3QgY2hhciB3YXMgYSBsZWFkXG5cdCAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuXHQgICAgfVxuXHRcblx0ICAgIGxlYWRTdXJyb2dhdGUgPSBudWxsXG5cdFxuXHQgICAgLy8gZW5jb2RlIHV0Zjhcblx0ICAgIGlmIChjb2RlUG9pbnQgPCAweDgwKSB7XG5cdCAgICAgIGlmICgodW5pdHMgLT0gMSkgPCAwKSBicmVha1xuXHQgICAgICBieXRlcy5wdXNoKGNvZGVQb2ludClcblx0ICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHg4MDApIHtcblx0ICAgICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXG5cdCAgICAgIGJ5dGVzLnB1c2goXG5cdCAgICAgICAgY29kZVBvaW50ID4+IDB4NiB8IDB4QzAsXG5cdCAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcblx0ICAgICAgKVxuXHQgICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDEwMDAwKSB7XG5cdCAgICAgIGlmICgodW5pdHMgLT0gMykgPCAwKSBicmVha1xuXHQgICAgICBieXRlcy5wdXNoKFxuXHQgICAgICAgIGNvZGVQb2ludCA+PiAweEMgfCAweEUwLFxuXHQgICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCxcblx0ICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuXHQgICAgICApXG5cdCAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTEwMDAwKSB7XG5cdCAgICAgIGlmICgodW5pdHMgLT0gNCkgPCAwKSBicmVha1xuXHQgICAgICBieXRlcy5wdXNoKFxuXHQgICAgICAgIGNvZGVQb2ludCA+PiAweDEyIHwgMHhGMCxcblx0ICAgICAgICBjb2RlUG9pbnQgPj4gMHhDICYgMHgzRiB8IDB4ODAsXG5cdCAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxuXHQgICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG5cdCAgICAgIClcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjb2RlIHBvaW50Jylcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiBieXRlc1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhc2NpaVRvQnl0ZXMgKHN0cikge1xuXHQgIHZhciBieXRlQXJyYXkgPSBbXVxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAvLyBOb2RlJ3MgY29kZSBzZWVtcyB0byBiZSBkb2luZyB0aGlzIGFuZCBub3QgJiAweDdGLi5cblx0ICAgIGJ5dGVBcnJheS5wdXNoKHN0ci5jaGFyQ29kZUF0KGkpICYgMHhGRilcblx0ICB9XG5cdCAgcmV0dXJuIGJ5dGVBcnJheVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB1dGYxNmxlVG9CeXRlcyAoc3RyLCB1bml0cykge1xuXHQgIHZhciBjLCBoaSwgbG9cblx0ICB2YXIgYnl0ZUFycmF5ID0gW11cblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuXHQgICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXG5cdFxuXHQgICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpXG5cdCAgICBoaSA9IGMgPj4gOFxuXHQgICAgbG8gPSBjICUgMjU2XG5cdCAgICBieXRlQXJyYXkucHVzaChsbylcblx0ICAgIGJ5dGVBcnJheS5wdXNoKGhpKVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGJ5dGVBcnJheVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBiYXNlNjRUb0J5dGVzIChzdHIpIHtcblx0ICByZXR1cm4gYmFzZTY0LnRvQnl0ZUFycmF5KGJhc2U2NGNsZWFuKHN0cikpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGJsaXRCdWZmZXIgKHNyYywgZHN0LCBvZmZzZXQsIGxlbmd0aCkge1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcblx0ICAgIGlmICgoaSArIG9mZnNldCA+PSBkc3QubGVuZ3RoKSB8fCAoaSA+PSBzcmMubGVuZ3RoKSkgYnJlYWtcblx0ICAgIGRzdFtpICsgb2Zmc2V0XSA9IHNyY1tpXVxuXHQgIH1cblx0ICByZXR1cm4gaVxuXHR9XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygzMikuQnVmZmVyLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSxcbi8qIDMzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgbG9va3VwID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nO1xuXHRcblx0OyhmdW5jdGlvbiAoZXhwb3J0cykge1xuXHRcdCd1c2Ugc3RyaWN0Jztcblx0XG5cdCAgdmFyIEFyciA9ICh0eXBlb2YgVWludDhBcnJheSAhPT0gJ3VuZGVmaW5lZCcpXG5cdCAgICA/IFVpbnQ4QXJyYXlcblx0ICAgIDogQXJyYXlcblx0XG5cdFx0dmFyIFBMVVMgICA9ICcrJy5jaGFyQ29kZUF0KDApXG5cdFx0dmFyIFNMQVNIICA9ICcvJy5jaGFyQ29kZUF0KDApXG5cdFx0dmFyIE5VTUJFUiA9ICcwJy5jaGFyQ29kZUF0KDApXG5cdFx0dmFyIExPV0VSICA9ICdhJy5jaGFyQ29kZUF0KDApXG5cdFx0dmFyIFVQUEVSICA9ICdBJy5jaGFyQ29kZUF0KDApXG5cdFx0dmFyIFBMVVNfVVJMX1NBRkUgPSAnLScuY2hhckNvZGVBdCgwKVxuXHRcdHZhciBTTEFTSF9VUkxfU0FGRSA9ICdfJy5jaGFyQ29kZUF0KDApXG5cdFxuXHRcdGZ1bmN0aW9uIGRlY29kZSAoZWx0KSB7XG5cdFx0XHR2YXIgY29kZSA9IGVsdC5jaGFyQ29kZUF0KDApXG5cdFx0XHRpZiAoY29kZSA9PT0gUExVUyB8fFxuXHRcdFx0ICAgIGNvZGUgPT09IFBMVVNfVVJMX1NBRkUpXG5cdFx0XHRcdHJldHVybiA2MiAvLyAnKydcblx0XHRcdGlmIChjb2RlID09PSBTTEFTSCB8fFxuXHRcdFx0ICAgIGNvZGUgPT09IFNMQVNIX1VSTF9TQUZFKVxuXHRcdFx0XHRyZXR1cm4gNjMgLy8gJy8nXG5cdFx0XHRpZiAoY29kZSA8IE5VTUJFUilcblx0XHRcdFx0cmV0dXJuIC0xIC8vbm8gbWF0Y2hcblx0XHRcdGlmIChjb2RlIDwgTlVNQkVSICsgMTApXG5cdFx0XHRcdHJldHVybiBjb2RlIC0gTlVNQkVSICsgMjYgKyAyNlxuXHRcdFx0aWYgKGNvZGUgPCBVUFBFUiArIDI2KVxuXHRcdFx0XHRyZXR1cm4gY29kZSAtIFVQUEVSXG5cdFx0XHRpZiAoY29kZSA8IExPV0VSICsgMjYpXG5cdFx0XHRcdHJldHVybiBjb2RlIC0gTE9XRVIgKyAyNlxuXHRcdH1cblx0XG5cdFx0ZnVuY3Rpb24gYjY0VG9CeXRlQXJyYXkgKGI2NCkge1xuXHRcdFx0dmFyIGksIGosIGwsIHRtcCwgcGxhY2VIb2xkZXJzLCBhcnJcblx0XG5cdFx0XHRpZiAoYjY0Lmxlbmd0aCAlIDQgPiAwKSB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzdHJpbmcuIExlbmd0aCBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNCcpXG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gdGhlIG51bWJlciBvZiBlcXVhbCBzaWducyAocGxhY2UgaG9sZGVycylcblx0XHRcdC8vIGlmIHRoZXJlIGFyZSB0d28gcGxhY2Vob2xkZXJzLCB0aGFuIHRoZSB0d28gY2hhcmFjdGVycyBiZWZvcmUgaXRcblx0XHRcdC8vIHJlcHJlc2VudCBvbmUgYnl0ZVxuXHRcdFx0Ly8gaWYgdGhlcmUgaXMgb25seSBvbmUsIHRoZW4gdGhlIHRocmVlIGNoYXJhY3RlcnMgYmVmb3JlIGl0IHJlcHJlc2VudCAyIGJ5dGVzXG5cdFx0XHQvLyB0aGlzIGlzIGp1c3QgYSBjaGVhcCBoYWNrIHRvIG5vdCBkbyBpbmRleE9mIHR3aWNlXG5cdFx0XHR2YXIgbGVuID0gYjY0Lmxlbmd0aFxuXHRcdFx0cGxhY2VIb2xkZXJzID0gJz0nID09PSBiNjQuY2hhckF0KGxlbiAtIDIpID8gMiA6ICc9JyA9PT0gYjY0LmNoYXJBdChsZW4gLSAxKSA/IDEgOiAwXG5cdFxuXHRcdFx0Ly8gYmFzZTY0IGlzIDQvMyArIHVwIHRvIHR3byBjaGFyYWN0ZXJzIG9mIHRoZSBvcmlnaW5hbCBkYXRhXG5cdFx0XHRhcnIgPSBuZXcgQXJyKGI2NC5sZW5ndGggKiAzIC8gNCAtIHBsYWNlSG9sZGVycylcblx0XG5cdFx0XHQvLyBpZiB0aGVyZSBhcmUgcGxhY2Vob2xkZXJzLCBvbmx5IGdldCB1cCB0byB0aGUgbGFzdCBjb21wbGV0ZSA0IGNoYXJzXG5cdFx0XHRsID0gcGxhY2VIb2xkZXJzID4gMCA/IGI2NC5sZW5ndGggLSA0IDogYjY0Lmxlbmd0aFxuXHRcblx0XHRcdHZhciBMID0gMFxuXHRcblx0XHRcdGZ1bmN0aW9uIHB1c2ggKHYpIHtcblx0XHRcdFx0YXJyW0wrK10gPSB2XG5cdFx0XHR9XG5cdFxuXHRcdFx0Zm9yIChpID0gMCwgaiA9IDA7IGkgPCBsOyBpICs9IDQsIGogKz0gMykge1xuXHRcdFx0XHR0bXAgPSAoZGVjb2RlKGI2NC5jaGFyQXQoaSkpIDw8IDE4KSB8IChkZWNvZGUoYjY0LmNoYXJBdChpICsgMSkpIDw8IDEyKSB8IChkZWNvZGUoYjY0LmNoYXJBdChpICsgMikpIDw8IDYpIHwgZGVjb2RlKGI2NC5jaGFyQXQoaSArIDMpKVxuXHRcdFx0XHRwdXNoKCh0bXAgJiAweEZGMDAwMCkgPj4gMTYpXG5cdFx0XHRcdHB1c2goKHRtcCAmIDB4RkYwMCkgPj4gOClcblx0XHRcdFx0cHVzaCh0bXAgJiAweEZGKVxuXHRcdFx0fVxuXHRcblx0XHRcdGlmIChwbGFjZUhvbGRlcnMgPT09IDIpIHtcblx0XHRcdFx0dG1wID0gKGRlY29kZShiNjQuY2hhckF0KGkpKSA8PCAyKSB8IChkZWNvZGUoYjY0LmNoYXJBdChpICsgMSkpID4+IDQpXG5cdFx0XHRcdHB1c2godG1wICYgMHhGRilcblx0XHRcdH0gZWxzZSBpZiAocGxhY2VIb2xkZXJzID09PSAxKSB7XG5cdFx0XHRcdHRtcCA9IChkZWNvZGUoYjY0LmNoYXJBdChpKSkgPDwgMTApIHwgKGRlY29kZShiNjQuY2hhckF0KGkgKyAxKSkgPDwgNCkgfCAoZGVjb2RlKGI2NC5jaGFyQXQoaSArIDIpKSA+PiAyKVxuXHRcdFx0XHRwdXNoKCh0bXAgPj4gOCkgJiAweEZGKVxuXHRcdFx0XHRwdXNoKHRtcCAmIDB4RkYpXG5cdFx0XHR9XG5cdFxuXHRcdFx0cmV0dXJuIGFyclxuXHRcdH1cblx0XG5cdFx0ZnVuY3Rpb24gdWludDhUb0Jhc2U2NCAodWludDgpIHtcblx0XHRcdHZhciBpLFxuXHRcdFx0XHRleHRyYUJ5dGVzID0gdWludDgubGVuZ3RoICUgMywgLy8gaWYgd2UgaGF2ZSAxIGJ5dGUgbGVmdCwgcGFkIDIgYnl0ZXNcblx0XHRcdFx0b3V0cHV0ID0gXCJcIixcblx0XHRcdFx0dGVtcCwgbGVuZ3RoXG5cdFxuXHRcdFx0ZnVuY3Rpb24gZW5jb2RlIChudW0pIHtcblx0XHRcdFx0cmV0dXJuIGxvb2t1cC5jaGFyQXQobnVtKVxuXHRcdFx0fVxuXHRcblx0XHRcdGZ1bmN0aW9uIHRyaXBsZXRUb0Jhc2U2NCAobnVtKSB7XG5cdFx0XHRcdHJldHVybiBlbmNvZGUobnVtID4+IDE4ICYgMHgzRikgKyBlbmNvZGUobnVtID4+IDEyICYgMHgzRikgKyBlbmNvZGUobnVtID4+IDYgJiAweDNGKSArIGVuY29kZShudW0gJiAweDNGKVxuXHRcdFx0fVxuXHRcblx0XHRcdC8vIGdvIHRocm91Z2ggdGhlIGFycmF5IGV2ZXJ5IHRocmVlIGJ5dGVzLCB3ZSdsbCBkZWFsIHdpdGggdHJhaWxpbmcgc3R1ZmYgbGF0ZXJcblx0XHRcdGZvciAoaSA9IDAsIGxlbmd0aCA9IHVpbnQ4Lmxlbmd0aCAtIGV4dHJhQnl0ZXM7IGkgPCBsZW5ndGg7IGkgKz0gMykge1xuXHRcdFx0XHR0ZW1wID0gKHVpbnQ4W2ldIDw8IDE2KSArICh1aW50OFtpICsgMV0gPDwgOCkgKyAodWludDhbaSArIDJdKVxuXHRcdFx0XHRvdXRwdXQgKz0gdHJpcGxldFRvQmFzZTY0KHRlbXApXG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gcGFkIHRoZSBlbmQgd2l0aCB6ZXJvcywgYnV0IG1ha2Ugc3VyZSB0byBub3QgZm9yZ2V0IHRoZSBleHRyYSBieXRlc1xuXHRcdFx0c3dpdGNoIChleHRyYUJ5dGVzKSB7XG5cdFx0XHRcdGNhc2UgMTpcblx0XHRcdFx0XHR0ZW1wID0gdWludDhbdWludDgubGVuZ3RoIC0gMV1cblx0XHRcdFx0XHRvdXRwdXQgKz0gZW5jb2RlKHRlbXAgPj4gMilcblx0XHRcdFx0XHRvdXRwdXQgKz0gZW5jb2RlKCh0ZW1wIDw8IDQpICYgMHgzRilcblx0XHRcdFx0XHRvdXRwdXQgKz0gJz09J1xuXHRcdFx0XHRcdGJyZWFrXG5cdFx0XHRcdGNhc2UgMjpcblx0XHRcdFx0XHR0ZW1wID0gKHVpbnQ4W3VpbnQ4Lmxlbmd0aCAtIDJdIDw8IDgpICsgKHVpbnQ4W3VpbnQ4Lmxlbmd0aCAtIDFdKVxuXHRcdFx0XHRcdG91dHB1dCArPSBlbmNvZGUodGVtcCA+PiAxMClcblx0XHRcdFx0XHRvdXRwdXQgKz0gZW5jb2RlKCh0ZW1wID4+IDQpICYgMHgzRilcblx0XHRcdFx0XHRvdXRwdXQgKz0gZW5jb2RlKCh0ZW1wIDw8IDIpICYgMHgzRilcblx0XHRcdFx0XHRvdXRwdXQgKz0gJz0nXG5cdFx0XHRcdFx0YnJlYWtcblx0XHRcdH1cblx0XG5cdFx0XHRyZXR1cm4gb3V0cHV0XG5cdFx0fVxuXHRcblx0XHRleHBvcnRzLnRvQnl0ZUFycmF5ID0gYjY0VG9CeXRlQXJyYXlcblx0XHRleHBvcnRzLmZyb21CeXRlQXJyYXkgPSB1aW50OFRvQmFzZTY0XG5cdH0oIGZhbHNlID8gKHRoaXMuYmFzZTY0anMgPSB7fSkgOiBleHBvcnRzKSlcblxuXG4vKioqLyB9LFxuLyogMzQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdGV4cG9ydHMucmVhZCA9IGZ1bmN0aW9uIChidWZmZXIsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7XG5cdCAgdmFyIGUsIG1cblx0ICB2YXIgZUxlbiA9IG5CeXRlcyAqIDggLSBtTGVuIC0gMVxuXHQgIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxXG5cdCAgdmFyIGVCaWFzID0gZU1heCA+PiAxXG5cdCAgdmFyIG5CaXRzID0gLTdcblx0ICB2YXIgaSA9IGlzTEUgPyAobkJ5dGVzIC0gMSkgOiAwXG5cdCAgdmFyIGQgPSBpc0xFID8gLTEgOiAxXG5cdCAgdmFyIHMgPSBidWZmZXJbb2Zmc2V0ICsgaV1cblx0XG5cdCAgaSArPSBkXG5cdFxuXHQgIGUgPSBzICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG5cdCAgcyA+Pj0gKC1uQml0cylcblx0ICBuQml0cyArPSBlTGVuXG5cdCAgZm9yICg7IG5CaXRzID4gMDsgZSA9IGUgKiAyNTYgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge31cblx0XG5cdCAgbSA9IGUgJiAoKDEgPDwgKC1uQml0cykpIC0gMSlcblx0ICBlID4+PSAoLW5CaXRzKVxuXHQgIG5CaXRzICs9IG1MZW5cblx0ICBmb3IgKDsgbkJpdHMgPiAwOyBtID0gbSAqIDI1NiArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fVxuXHRcblx0ICBpZiAoZSA9PT0gMCkge1xuXHQgICAgZSA9IDEgLSBlQmlhc1xuXHQgIH0gZWxzZSBpZiAoZSA9PT0gZU1heCkge1xuXHQgICAgcmV0dXJuIG0gPyBOYU4gOiAoKHMgPyAtMSA6IDEpICogSW5maW5pdHkpXG5cdCAgfSBlbHNlIHtcblx0ICAgIG0gPSBtICsgTWF0aC5wb3coMiwgbUxlbilcblx0ICAgIGUgPSBlIC0gZUJpYXNcblx0ICB9XG5cdCAgcmV0dXJuIChzID8gLTEgOiAxKSAqIG0gKiBNYXRoLnBvdygyLCBlIC0gbUxlbilcblx0fVxuXHRcblx0ZXhwb3J0cy53cml0ZSA9IGZ1bmN0aW9uIChidWZmZXIsIHZhbHVlLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuXHQgIHZhciBlLCBtLCBjXG5cdCAgdmFyIGVMZW4gPSBuQnl0ZXMgKiA4IC0gbUxlbiAtIDFcblx0ICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMVxuXHQgIHZhciBlQmlhcyA9IGVNYXggPj4gMVxuXHQgIHZhciBydCA9IChtTGVuID09PSAyMyA/IE1hdGgucG93KDIsIC0yNCkgLSBNYXRoLnBvdygyLCAtNzcpIDogMClcblx0ICB2YXIgaSA9IGlzTEUgPyAwIDogKG5CeXRlcyAtIDEpXG5cdCAgdmFyIGQgPSBpc0xFID8gMSA6IC0xXG5cdCAgdmFyIHMgPSB2YWx1ZSA8IDAgfHwgKHZhbHVlID09PSAwICYmIDEgLyB2YWx1ZSA8IDApID8gMSA6IDBcblx0XG5cdCAgdmFsdWUgPSBNYXRoLmFicyh2YWx1ZSlcblx0XG5cdCAgaWYgKGlzTmFOKHZhbHVlKSB8fCB2YWx1ZSA9PT0gSW5maW5pdHkpIHtcblx0ICAgIG0gPSBpc05hTih2YWx1ZSkgPyAxIDogMFxuXHQgICAgZSA9IGVNYXhcblx0ICB9IGVsc2Uge1xuXHQgICAgZSA9IE1hdGguZmxvb3IoTWF0aC5sb2codmFsdWUpIC8gTWF0aC5MTjIpXG5cdCAgICBpZiAodmFsdWUgKiAoYyA9IE1hdGgucG93KDIsIC1lKSkgPCAxKSB7XG5cdCAgICAgIGUtLVxuXHQgICAgICBjICo9IDJcblx0ICAgIH1cblx0ICAgIGlmIChlICsgZUJpYXMgPj0gMSkge1xuXHQgICAgICB2YWx1ZSArPSBydCAvIGNcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhbHVlICs9IHJ0ICogTWF0aC5wb3coMiwgMSAtIGVCaWFzKVxuXHQgICAgfVxuXHQgICAgaWYgKHZhbHVlICogYyA+PSAyKSB7XG5cdCAgICAgIGUrK1xuXHQgICAgICBjIC89IDJcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoZSArIGVCaWFzID49IGVNYXgpIHtcblx0ICAgICAgbSA9IDBcblx0ICAgICAgZSA9IGVNYXhcblx0ICAgIH0gZWxzZSBpZiAoZSArIGVCaWFzID49IDEpIHtcblx0ICAgICAgbSA9ICh2YWx1ZSAqIGMgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pXG5cdCAgICAgIGUgPSBlICsgZUJpYXNcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIG0gPSB2YWx1ZSAqIE1hdGgucG93KDIsIGVCaWFzIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKVxuXHQgICAgICBlID0gMFxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZm9yICg7IG1MZW4gPj0gODsgYnVmZmVyW29mZnNldCArIGldID0gbSAmIDB4ZmYsIGkgKz0gZCwgbSAvPSAyNTYsIG1MZW4gLT0gOCkge31cblx0XG5cdCAgZSA9IChlIDw8IG1MZW4pIHwgbVxuXHQgIGVMZW4gKz0gbUxlblxuXHQgIGZvciAoOyBlTGVuID4gMDsgYnVmZmVyW29mZnNldCArIGldID0gZSAmIDB4ZmYsIGkgKz0gZCwgZSAvPSAyNTYsIGVMZW4gLT0gOCkge31cblx0XG5cdCAgYnVmZmVyW29mZnNldCArIGkgLSBkXSB8PSBzICogMTI4XG5cdH1cblxuXG4vKioqLyB9LFxuLyogMzUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFxuXHQvKipcblx0ICogaXNBcnJheVxuXHQgKi9cblx0XG5cdHZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblx0XG5cdC8qKlxuXHQgKiB0b1N0cmluZ1xuXHQgKi9cblx0XG5cdHZhciBzdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXHRcblx0LyoqXG5cdCAqIFdoZXRoZXIgb3Igbm90IHRoZSBnaXZlbiBgdmFsYFxuXHQgKiBpcyBhbiBhcnJheS5cblx0ICpcblx0ICogZXhhbXBsZTpcblx0ICpcblx0ICogICAgICAgIGlzQXJyYXkoW10pO1xuXHQgKiAgICAgICAgLy8gPiB0cnVlXG5cdCAqICAgICAgICBpc0FycmF5KGFyZ3VtZW50cyk7XG5cdCAqICAgICAgICAvLyA+IGZhbHNlXG5cdCAqICAgICAgICBpc0FycmF5KCcnKTtcblx0ICogICAgICAgIC8vID4gZmFsc2Vcblx0ICpcblx0ICogQHBhcmFtIHttaXhlZH0gdmFsXG5cdCAqIEByZXR1cm4ge2Jvb2x9XG5cdCAqL1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc0FycmF5IHx8IGZ1bmN0aW9uICh2YWwpIHtcblx0ICByZXR1cm4gISEgdmFsICYmICdbb2JqZWN0IEFycmF5XScgPT0gc3RyLmNhbGwodmFsKTtcblx0fTtcblxuXG4vKioqLyB9LFxuLyogMzYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIVxuXHQgKiBDaGFpIC0gZ2V0UGF0aFZhbHVlIHV0aWxpdHlcblx0ICogQ29weXJpZ2h0KGMpIDIwMTItMjAxNCBKYWtlIEx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cblx0ICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vbG9naWNhbHBhcmFkb3gvZmlsdHJcblx0ICogTUlUIExpY2Vuc2VkXG5cdCAqL1xuXHRcblx0dmFyIGdldFBhdGhJbmZvID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNyk7XG5cdFxuXHQvKipcblx0ICogIyMjIC5nZXRQYXRoVmFsdWUocGF0aCwgb2JqZWN0KVxuXHQgKlxuXHQgKiBUaGlzIGFsbG93cyB0aGUgcmV0cmlldmFsIG9mIHZhbHVlcyBpbiBhblxuXHQgKiBvYmplY3QgZ2l2ZW4gYSBzdHJpbmcgcGF0aC5cblx0ICpcblx0ICogICAgIHZhciBvYmogPSB7XG5cdCAqICAgICAgICAgcHJvcDE6IHtcblx0ICogICAgICAgICAgICAgYXJyOiBbJ2EnLCAnYicsICdjJ11cblx0ICogICAgICAgICAgICwgc3RyOiAnSGVsbG8nXG5cdCAqICAgICAgICAgfVxuXHQgKiAgICAgICAsIHByb3AyOiB7XG5cdCAqICAgICAgICAgICAgIGFycjogWyB7IG5lc3RlZDogJ1VuaXZlcnNlJyB9IF1cblx0ICogICAgICAgICAgICwgc3RyOiAnSGVsbG8gYWdhaW4hJ1xuXHQgKiAgICAgICAgIH1cblx0ICogICAgIH1cblx0ICpcblx0ICogVGhlIGZvbGxvd2luZyB3b3VsZCBiZSB0aGUgcmVzdWx0cy5cblx0ICpcblx0ICogICAgIGdldFBhdGhWYWx1ZSgncHJvcDEuc3RyJywgb2JqKTsgLy8gSGVsbG9cblx0ICogICAgIGdldFBhdGhWYWx1ZSgncHJvcDEuYXR0WzJdJywgb2JqKTsgLy8gYlxuXHQgKiAgICAgZ2V0UGF0aFZhbHVlKCdwcm9wMi5hcnJbMF0ubmVzdGVkJywgb2JqKTsgLy8gVW5pdmVyc2Vcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuXHQgKiBAcmV0dXJucyB7T2JqZWN0fSB2YWx1ZSBvciBgdW5kZWZpbmVkYFxuXHQgKiBAbmFtZSBnZXRQYXRoVmFsdWVcblx0ICogQGFwaSBwdWJsaWNcblx0ICovXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ocGF0aCwgb2JqKSB7XG5cdCAgdmFyIGluZm8gPSBnZXRQYXRoSW5mbyhwYXRoLCBvYmopO1xuXHQgIHJldHVybiBpbmZvLnZhbHVlO1xuXHR9OyBcblxuXG4vKioqLyB9LFxuLyogMzcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIVxuXHQgKiBDaGFpIC0gZ2V0UGF0aEluZm8gdXRpbGl0eVxuXHQgKiBDb3B5cmlnaHQoYykgMjAxMi0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuXHQgKiBNSVQgTGljZW5zZWRcblx0ICovXG5cdFxuXHR2YXIgaGFzUHJvcGVydHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KTtcblx0XG5cdC8qKlxuXHQgKiAjIyMgLmdldFBhdGhJbmZvKHBhdGgsIG9iamVjdClcblx0ICpcblx0ICogVGhpcyBhbGxvd3MgdGhlIHJldHJpZXZhbCBvZiBwcm9wZXJ0eSBpbmZvIGluIGFuXG5cdCAqIG9iamVjdCBnaXZlbiBhIHN0cmluZyBwYXRoLlxuXHQgKlxuXHQgKiBUaGUgcGF0aCBpbmZvIGNvbnNpc3RzIG9mIGFuIG9iamVjdCB3aXRoIHRoZVxuXHQgKiBmb2xsb3dpbmcgcHJvcGVydGllczpcblx0ICpcblx0ICogKiBwYXJlbnQgLSBUaGUgcGFyZW50IG9iamVjdCBvZiB0aGUgcHJvcGVydHkgcmVmZXJlbmNlZCBieSBgcGF0aGBcblx0ICogKiBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGZpbmFsIHByb3BlcnR5LCBhIG51bWJlciBpZiBpdCB3YXMgYW4gYXJyYXkgaW5kZXhlclxuXHQgKiAqIHZhbHVlIC0gVGhlIHZhbHVlIG9mIHRoZSBwcm9wZXJ0eSwgaWYgaXQgZXhpc3RzLCBvdGhlcndpc2UgYHVuZGVmaW5lZGBcblx0ICogKiBleGlzdHMgLSBXaGV0aGVyIHRoZSBwcm9wZXJ0eSBleGlzdHMgb3Igbm90XG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3Rcblx0ICogQHJldHVybnMge09iamVjdH0gaW5mb1xuXHQgKiBAbmFtZSBnZXRQYXRoSW5mb1xuXHQgKiBAYXBpIHB1YmxpY1xuXHQgKi9cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZ2V0UGF0aEluZm8ocGF0aCwgb2JqKSB7XG5cdCAgdmFyIHBhcnNlZCA9IHBhcnNlUGF0aChwYXRoKSxcblx0ICAgICAgbGFzdCA9IHBhcnNlZFtwYXJzZWQubGVuZ3RoIC0gMV07XG5cdFxuXHQgIHZhciBpbmZvID0ge1xuXHQgICAgcGFyZW50OiBwYXJzZWQubGVuZ3RoID4gMSA/IF9nZXRQYXRoVmFsdWUocGFyc2VkLCBvYmosIHBhcnNlZC5sZW5ndGggLSAxKSA6IG9iaixcblx0ICAgIG5hbWU6IGxhc3QucCB8fCBsYXN0LmksXG5cdCAgICB2YWx1ZTogX2dldFBhdGhWYWx1ZShwYXJzZWQsIG9iailcblx0ICB9O1xuXHQgIGluZm8uZXhpc3RzID0gaGFzUHJvcGVydHkoaW5mby5uYW1lLCBpbmZvLnBhcmVudCk7XG5cdFxuXHQgIHJldHVybiBpbmZvO1xuXHR9O1xuXHRcblx0XG5cdC8qIVxuXHQgKiAjIyBwYXJzZVBhdGgocGF0aClcblx0ICpcblx0ICogSGVscGVyIGZ1bmN0aW9uIHVzZWQgdG8gcGFyc2Ugc3RyaW5nIG9iamVjdFxuXHQgKiBwYXRocy4gVXNlIGluIGNvbmp1bmN0aW9uIHdpdGggYF9nZXRQYXRoVmFsdWVgLlxuXHQgKlxuXHQgKiAgICAgIHZhciBwYXJzZWQgPSBwYXJzZVBhdGgoJ215b2JqZWN0LnByb3BlcnR5LnN1YnByb3AnKTtcblx0ICpcblx0ICogIyMjIFBhdGhzOlxuXHQgKlxuXHQgKiAqIENhbiBiZSBhcyBuZWFyIGluZmluaXRlbHkgZGVlcCBhbmQgbmVzdGVkXG5cdCAqICogQXJyYXlzIGFyZSBhbHNvIHZhbGlkIHVzaW5nIHRoZSBmb3JtYWwgYG15b2JqZWN0LmRvY3VtZW50WzNdLnByb3BlcnR5YC5cblx0ICogKiBMaXRlcmFsIGRvdHMgYW5kIGJyYWNrZXRzIChub3QgZGVsaW1pdGVyKSBtdXN0IGJlIGJhY2tzbGFzaC1lc2NhcGVkLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgKiBAcmV0dXJucyB7T2JqZWN0fSBwYXJzZWRcblx0ICogQGFwaSBwcml2YXRlXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcGFyc2VQYXRoIChwYXRoKSB7XG5cdCAgdmFyIHN0ciA9IHBhdGgucmVwbGFjZSgvKFteXFxcXF0pXFxbL2csICckMS5bJylcblx0ICAgICwgcGFydHMgPSBzdHIubWF0Y2goLyhcXFxcXFwufFteLl0rPykrL2cpO1xuXHQgIHJldHVybiBwYXJ0cy5tYXAoZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICB2YXIgcmUgPSAvXlxcWyhcXGQrKVxcXSQvXG5cdCAgICAgICwgbUFyciA9IHJlLmV4ZWModmFsdWUpO1xuXHQgICAgaWYgKG1BcnIpIHJldHVybiB7IGk6IHBhcnNlRmxvYXQobUFyclsxXSkgfTtcblx0ICAgIGVsc2UgcmV0dXJuIHsgcDogdmFsdWUucmVwbGFjZSgvXFxcXChbLlxcW1xcXV0pL2csICckMScpIH07XG5cdCAgfSk7XG5cdH1cblx0XG5cdFxuXHQvKiFcblx0ICogIyMgX2dldFBhdGhWYWx1ZShwYXJzZWQsIG9iailcblx0ICpcblx0ICogSGVscGVyIGNvbXBhbmlvbiBmdW5jdGlvbiBmb3IgYC5wYXJzZVBhdGhgIHRoYXQgcmV0dXJuc1xuXHQgKiB0aGUgdmFsdWUgbG9jYXRlZCBhdCB0aGUgcGFyc2VkIGFkZHJlc3MuXG5cdCAqXG5cdCAqICAgICAgdmFyIHZhbHVlID0gZ2V0UGF0aFZhbHVlKHBhcnNlZCwgb2JqKTtcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHBhcnNlZCBkZWZpbml0aW9uIGZyb20gYHBhcnNlUGF0aGAuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgdG8gc2VhcmNoIGFnYWluc3Rcblx0ICogQHBhcmFtIHtOdW1iZXJ9IG9iamVjdCB0byBzZWFyY2ggYWdhaW5zdFxuXHQgKiBAcmV0dXJucyB7T2JqZWN0fFVuZGVmaW5lZH0gdmFsdWVcblx0ICogQGFwaSBwcml2YXRlXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gX2dldFBhdGhWYWx1ZSAocGFyc2VkLCBvYmosIGluZGV4KSB7XG5cdCAgdmFyIHRtcCA9IG9ialxuXHQgICAgLCByZXM7XG5cdFxuXHQgIGluZGV4ID0gKGluZGV4ID09PSB1bmRlZmluZWQgPyBwYXJzZWQubGVuZ3RoIDogaW5kZXgpO1xuXHRcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGluZGV4OyBpIDwgbDsgaSsrKSB7XG5cdCAgICB2YXIgcGFydCA9IHBhcnNlZFtpXTtcblx0ICAgIGlmICh0bXApIHtcblx0ICAgICAgaWYgKCd1bmRlZmluZWQnICE9PSB0eXBlb2YgcGFydC5wKVxuXHQgICAgICAgIHRtcCA9IHRtcFtwYXJ0LnBdO1xuXHQgICAgICBlbHNlIGlmICgndW5kZWZpbmVkJyAhPT0gdHlwZW9mIHBhcnQuaSlcblx0ICAgICAgICB0bXAgPSB0bXBbcGFydC5pXTtcblx0ICAgICAgaWYgKGkgPT0gKGwgLSAxKSkgcmVzID0gdG1wO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmVzID0gdW5kZWZpbmVkO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcmVzO1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDM4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiFcblx0ICogQ2hhaSAtIGhhc1Byb3BlcnR5IHV0aWxpdHlcblx0ICogQ29weXJpZ2h0KGMpIDIwMTItMjAxNCBKYWtlIEx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cblx0ICogTUlUIExpY2Vuc2VkXG5cdCAqL1xuXHRcblx0dmFyIHR5cGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblx0XG5cdC8qKlxuXHQgKiAjIyMgLmhhc1Byb3BlcnR5KG9iamVjdCwgbmFtZSlcblx0ICpcblx0ICogVGhpcyBhbGxvd3MgY2hlY2tpbmcgd2hldGhlciBhbiBvYmplY3QgaGFzXG5cdCAqIG5hbWVkIHByb3BlcnR5IG9yIG51bWVyaWMgYXJyYXkgaW5kZXguXG5cdCAqXG5cdCAqIEJhc2ljYWxseSBkb2VzIHRoZSBzYW1lIHRoaW5nIGFzIHRoZSBgaW5gXG5cdCAqIG9wZXJhdG9yIGJ1dCB3b3JrcyBwcm9wZXJseSB3aXRoIG5hdGl2ZXNcblx0ICogYW5kIG51bGwvdW5kZWZpbmVkIHZhbHVlcy5cblx0ICpcblx0ICogICAgIHZhciBvYmogPSB7XG5cdCAqICAgICAgICAgYXJyOiBbJ2EnLCAnYicsICdjJ11cblx0ICogICAgICAgLCBzdHI6ICdIZWxsbydcblx0ICogICAgIH1cblx0ICpcblx0ICogVGhlIGZvbGxvd2luZyB3b3VsZCBiZSB0aGUgcmVzdWx0cy5cblx0ICpcblx0ICogICAgIGhhc1Byb3BlcnR5KCdzdHInLCBvYmopOyAgLy8gdHJ1ZVxuXHQgKiAgICAgaGFzUHJvcGVydHkoJ2NvbnN0cnVjdG9yJywgb2JqKTsgIC8vIHRydWVcblx0ICogICAgIGhhc1Byb3BlcnR5KCdiYXInLCBvYmopOyAgLy8gZmFsc2Vcblx0ICogICAgIFxuXHQgKiAgICAgaGFzUHJvcGVydHkoJ2xlbmd0aCcsIG9iai5zdHIpOyAvLyB0cnVlXG5cdCAqICAgICBoYXNQcm9wZXJ0eSgxLCBvYmouc3RyKTsgIC8vIHRydWVcblx0ICogICAgIGhhc1Byb3BlcnR5KDUsIG9iai5zdHIpOyAgLy8gZmFsc2Vcblx0ICpcblx0ICogICAgIGhhc1Byb3BlcnR5KCdsZW5ndGgnLCBvYmouYXJyKTsgIC8vIHRydWVcblx0ICogICAgIGhhc1Byb3BlcnR5KDIsIG9iai5hcnIpOyAgLy8gdHJ1ZVxuXHQgKiAgICAgaGFzUHJvcGVydHkoMywgb2JqLmFycik7ICAvLyBmYWxzZVxuXHQgKlxuXHQgKiBAcGFyYW0ge09ianVlY3R9IG9iamVjdFxuXHQgKiBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ9IG5hbWVcblx0ICogQHJldHVybnMge0Jvb2xlYW59IHdoZXRoZXIgaXQgZXhpc3RzXG5cdCAqIEBuYW1lIGdldFBhdGhJbmZvXG5cdCAqIEBhcGkgcHVibGljXG5cdCAqL1xuXHRcblx0dmFyIGxpdGVyYWxzID0ge1xuXHQgICAgJ251bWJlcic6IE51bWJlclxuXHQgICwgJ3N0cmluZyc6IFN0cmluZ1xuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBoYXNQcm9wZXJ0eShuYW1lLCBvYmopIHtcblx0ICB2YXIgb3QgPSB0eXBlKG9iaik7XG5cdFxuXHQgIC8vIEJhZCBPYmplY3QsIG9idmlvdXNseSBubyBwcm9wcyBhdCBhbGxcblx0ICBpZihvdCA9PT0gJ251bGwnIHx8IG90ID09PSAndW5kZWZpbmVkJylcblx0ICAgIHJldHVybiBmYWxzZTtcblx0XG5cdCAgLy8gVGhlIGBpbmAgb3BlcmF0b3IgZG9lcyBub3Qgd29yayB3aXRoIGNlcnRhaW4gbGl0ZXJhbHNcblx0ICAvLyBib3ggdGhlc2UgYmVmb3JlIHRoZSBjaGVja1xuXHQgIGlmKGxpdGVyYWxzW290XSAmJiB0eXBlb2Ygb2JqICE9PSAnb2JqZWN0Jylcblx0ICAgIG9iaiA9IG5ldyBsaXRlcmFsc1tvdF0ob2JqKTtcblx0XG5cdCAgcmV0dXJuIG5hbWUgaW4gb2JqO1xuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiAzOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyohXG5cdCAqIENoYWkgLSBhZGRQcm9wZXJ0eSB1dGlsaXR5XG5cdCAqIENvcHlyaWdodChjKSAyMDEyLTIwMTQgSmFrZSBMdWVyIDxqYWtlQGFsb2dpY2FscGFyYWRveC5jb20+XG5cdCAqIE1JVCBMaWNlbnNlZFxuXHQgKi9cblx0XG5cdHZhciBjb25maWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KTtcblx0dmFyIGZsYWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0XG5cdC8qKlxuXHQgKiAjIyMgYWRkUHJvcGVydHkgKGN0eCwgbmFtZSwgZ2V0dGVyKVxuXHQgKlxuXHQgKiBBZGRzIGEgcHJvcGVydHkgdG8gdGhlIHByb3RvdHlwZSBvZiBhbiBvYmplY3QuXG5cdCAqXG5cdCAqICAgICB1dGlscy5hZGRQcm9wZXJ0eShjaGFpLkFzc2VydGlvbi5wcm90b3R5cGUsICdmb28nLCBmdW5jdGlvbiAoKSB7XG5cdCAqICAgICAgIHZhciBvYmogPSB1dGlscy5mbGFnKHRoaXMsICdvYmplY3QnKTtcblx0ICogICAgICAgbmV3IGNoYWkuQXNzZXJ0aW9uKG9iaikudG8uYmUuaW5zdGFuY2VvZihGb28pO1xuXHQgKiAgICAgfSk7XG5cdCAqXG5cdCAqIENhbiBhbHNvIGJlIGFjY2Vzc2VkIGRpcmVjdGx5IGZyb20gYGNoYWkuQXNzZXJ0aW9uYC5cblx0ICpcblx0ICogICAgIGNoYWkuQXNzZXJ0aW9uLmFkZFByb3BlcnR5KCdmb28nLCBmbik7XG5cdCAqXG5cdCAqIFRoZW4gY2FuIGJlIHVzZWQgYXMgYW55IG90aGVyIGFzc2VydGlvbi5cblx0ICpcblx0ICogICAgIGV4cGVjdChteUZvbykudG8uYmUuZm9vO1xuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gY3R4IG9iamVjdCB0byB3aGljaCB0aGUgcHJvcGVydHkgaXMgYWRkZWRcblx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgb2YgcHJvcGVydHkgdG8gYWRkXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGdldHRlciBmdW5jdGlvbiB0byBiZSB1c2VkIGZvciBuYW1lXG5cdCAqIEBuYW1lIGFkZFByb3BlcnR5XG5cdCAqIEBhcGkgcHVibGljXG5cdCAqL1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY3R4LCBuYW1lLCBnZXR0ZXIpIHtcblx0ICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBuYW1lLFxuXHQgICAgeyBnZXQ6IGZ1bmN0aW9uIGFkZFByb3BlcnR5KCkge1xuXHQgICAgICAgIHZhciBvbGRfc3NmaSA9IGZsYWcodGhpcywgJ3NzZmknKTtcblx0ICAgICAgICBpZiAob2xkX3NzZmkgJiYgY29uZmlnLmluY2x1ZGVTdGFjayA9PT0gZmFsc2UpXG5cdCAgICAgICAgICBmbGFnKHRoaXMsICdzc2ZpJywgYWRkUHJvcGVydHkpO1xuXHRcblx0ICAgICAgICB2YXIgcmVzdWx0ID0gZ2V0dGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgcmV0dXJuIHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gdGhpcyA6IHJlc3VsdDtcblx0ICAgICAgfVxuXHQgICAgLCBjb25maWd1cmFibGU6IHRydWVcblx0ICB9KTtcblx0fTtcblxuXG4vKioqLyB9LFxuLyogNDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIVxuXHQgKiBDaGFpIC0gYWRkTWV0aG9kIHV0aWxpdHlcblx0ICogQ29weXJpZ2h0KGMpIDIwMTItMjAxNCBKYWtlIEx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cblx0ICogTUlUIExpY2Vuc2VkXG5cdCAqL1xuXHRcblx0dmFyIGNvbmZpZyA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXHRcblx0LyoqXG5cdCAqICMjIyAuYWRkTWV0aG9kIChjdHgsIG5hbWUsIG1ldGhvZClcblx0ICpcblx0ICogQWRkcyBhIG1ldGhvZCB0byB0aGUgcHJvdG90eXBlIG9mIGFuIG9iamVjdC5cblx0ICpcblx0ICogICAgIHV0aWxzLmFkZE1ldGhvZChjaGFpLkFzc2VydGlvbi5wcm90b3R5cGUsICdmb28nLCBmdW5jdGlvbiAoc3RyKSB7XG5cdCAqICAgICAgIHZhciBvYmogPSB1dGlscy5mbGFnKHRoaXMsICdvYmplY3QnKTtcblx0ICogICAgICAgbmV3IGNoYWkuQXNzZXJ0aW9uKG9iaikudG8uYmUuZXF1YWwoc3RyKTtcblx0ICogICAgIH0pO1xuXHQgKlxuXHQgKiBDYW4gYWxzbyBiZSBhY2Nlc3NlZCBkaXJlY3RseSBmcm9tIGBjaGFpLkFzc2VydGlvbmAuXG5cdCAqXG5cdCAqICAgICBjaGFpLkFzc2VydGlvbi5hZGRNZXRob2QoJ2ZvbycsIGZuKTtcblx0ICpcblx0ICogVGhlbiBjYW4gYmUgdXNlZCBhcyBhbnkgb3RoZXIgYXNzZXJ0aW9uLlxuXHQgKlxuXHQgKiAgICAgZXhwZWN0KGZvb1N0cikudG8uYmUuZm9vKCdiYXInKTtcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IGN0eCBvYmplY3QgdG8gd2hpY2ggdGhlIG1ldGhvZCBpcyBhZGRlZFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBvZiBtZXRob2QgdG8gYWRkXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IG1ldGhvZCBmdW5jdGlvbiB0byBiZSB1c2VkIGZvciBuYW1lXG5cdCAqIEBuYW1lIGFkZE1ldGhvZFxuXHQgKiBAYXBpIHB1YmxpY1xuXHQgKi9cblx0dmFyIGZsYWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGN0eCwgbmFtZSwgbWV0aG9kKSB7XG5cdCAgY3R4W25hbWVdID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIG9sZF9zc2ZpID0gZmxhZyh0aGlzLCAnc3NmaScpO1xuXHQgICAgaWYgKG9sZF9zc2ZpICYmIGNvbmZpZy5pbmNsdWRlU3RhY2sgPT09IGZhbHNlKVxuXHQgICAgICBmbGFnKHRoaXMsICdzc2ZpJywgY3R4W25hbWVdKTtcblx0ICAgIHZhciByZXN1bHQgPSBtZXRob2QuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIHJldHVybiByZXN1bHQgPT09IHVuZGVmaW5lZCA/IHRoaXMgOiByZXN1bHQ7XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9LFxuLyogNDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIVxuXHQgKiBDaGFpIC0gb3ZlcndyaXRlUHJvcGVydHkgdXRpbGl0eVxuXHQgKiBDb3B5cmlnaHQoYykgMjAxMi0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuXHQgKiBNSVQgTGljZW5zZWRcblx0ICovXG5cdFxuXHQvKipcblx0ICogIyMjIG92ZXJ3cml0ZVByb3BlcnR5IChjdHgsIG5hbWUsIGZuKVxuXHQgKlxuXHQgKiBPdmVyd2l0ZXMgYW4gYWxyZWFkeSBleGlzdGluZyBwcm9wZXJ0eSBnZXR0ZXIgYW5kIHByb3ZpZGVzXG5cdCAqIGFjY2VzcyB0byBwcmV2aW91cyB2YWx1ZS4gTXVzdCByZXR1cm4gZnVuY3Rpb24gdG8gdXNlIGFzIGdldHRlci5cblx0ICpcblx0ICogICAgIHV0aWxzLm92ZXJ3cml0ZVByb3BlcnR5KGNoYWkuQXNzZXJ0aW9uLnByb3RvdHlwZSwgJ29rJywgZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgKiAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgKiAgICAgICAgIHZhciBvYmogPSB1dGlscy5mbGFnKHRoaXMsICdvYmplY3QnKTtcblx0ICogICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgRm9vKSB7XG5cdCAqICAgICAgICAgICBuZXcgY2hhaS5Bc3NlcnRpb24ob2JqLm5hbWUpLnRvLmVxdWFsKCdiYXInKTtcblx0ICogICAgICAgICB9IGVsc2Uge1xuXHQgKiAgICAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cdCAqICAgICAgICAgfVxuXHQgKiAgICAgICB9XG5cdCAqICAgICB9KTtcblx0ICpcblx0ICpcblx0ICogQ2FuIGFsc28gYmUgYWNjZXNzZWQgZGlyZWN0bHkgZnJvbSBgY2hhaS5Bc3NlcnRpb25gLlxuXHQgKlxuXHQgKiAgICAgY2hhaS5Bc3NlcnRpb24ub3ZlcndyaXRlUHJvcGVydHkoJ2ZvbycsIGZuKTtcblx0ICpcblx0ICogVGhlbiBjYW4gYmUgdXNlZCBhcyBhbnkgb3RoZXIgYXNzZXJ0aW9uLlxuXHQgKlxuXHQgKiAgICAgZXhwZWN0KG15Rm9vKS50by5iZS5vaztcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IGN0eCBvYmplY3Qgd2hvc2UgcHJvcGVydHkgaXMgdG8gYmUgb3ZlcndyaXR0ZW5cblx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgb2YgcHJvcGVydHkgdG8gb3ZlcndyaXRlXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGdldHRlciBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBnZXR0ZXIgZnVuY3Rpb24gdG8gYmUgdXNlZCBmb3IgbmFtZVxuXHQgKiBAbmFtZSBvdmVyd3JpdGVQcm9wZXJ0eVxuXHQgKiBAYXBpIHB1YmxpY1xuXHQgKi9cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGN0eCwgbmFtZSwgZ2V0dGVyKSB7XG5cdCAgdmFyIF9nZXQgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGN0eCwgbmFtZSlcblx0ICAgICwgX3N1cGVyID0gZnVuY3Rpb24gKCkge307XG5cdFxuXHQgIGlmIChfZ2V0ICYmICdmdW5jdGlvbicgPT09IHR5cGVvZiBfZ2V0LmdldClcblx0ICAgIF9zdXBlciA9IF9nZXQuZ2V0XG5cdFxuXHQgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdHgsIG5hbWUsXG5cdCAgICB7IGdldDogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciByZXN1bHQgPSBnZXR0ZXIoX3N1cGVyKS5jYWxsKHRoaXMpO1xuXHQgICAgICAgIHJldHVybiByZXN1bHQgPT09IHVuZGVmaW5lZCA/IHRoaXMgOiByZXN1bHQ7XG5cdCAgICAgIH1cblx0ICAgICwgY29uZmlndXJhYmxlOiB0cnVlXG5cdCAgfSk7XG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDQyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiFcblx0ICogQ2hhaSAtIG92ZXJ3cml0ZU1ldGhvZCB1dGlsaXR5XG5cdCAqIENvcHlyaWdodChjKSAyMDEyLTIwMTQgSmFrZSBMdWVyIDxqYWtlQGFsb2dpY2FscGFyYWRveC5jb20+XG5cdCAqIE1JVCBMaWNlbnNlZFxuXHQgKi9cblx0XG5cdC8qKlxuXHQgKiAjIyMgb3ZlcndyaXRlTWV0aG9kIChjdHgsIG5hbWUsIGZuKVxuXHQgKlxuXHQgKiBPdmVyd2l0ZXMgYW4gYWxyZWFkeSBleGlzdGluZyBtZXRob2QgYW5kIHByb3ZpZGVzXG5cdCAqIGFjY2VzcyB0byBwcmV2aW91cyBmdW5jdGlvbi4gTXVzdCByZXR1cm4gZnVuY3Rpb25cblx0ICogdG8gYmUgdXNlZCBmb3IgbmFtZS5cblx0ICpcblx0ICogICAgIHV0aWxzLm92ZXJ3cml0ZU1ldGhvZChjaGFpLkFzc2VydGlvbi5wcm90b3R5cGUsICdlcXVhbCcsIGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICogICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzdHIpIHtcblx0ICogICAgICAgICB2YXIgb2JqID0gdXRpbHMuZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG5cdCAqICAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIEZvbykge1xuXHQgKiAgICAgICAgICAgbmV3IGNoYWkuQXNzZXJ0aW9uKG9iai52YWx1ZSkudG8uZXF1YWwoc3RyKTtcblx0ICogICAgICAgICB9IGVsc2Uge1xuXHQgKiAgICAgICAgICAgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAqICAgICAgICAgfVxuXHQgKiAgICAgICB9XG5cdCAqICAgICB9KTtcblx0ICpcblx0ICogQ2FuIGFsc28gYmUgYWNjZXNzZWQgZGlyZWN0bHkgZnJvbSBgY2hhaS5Bc3NlcnRpb25gLlxuXHQgKlxuXHQgKiAgICAgY2hhaS5Bc3NlcnRpb24ub3ZlcndyaXRlTWV0aG9kKCdmb28nLCBmbik7XG5cdCAqXG5cdCAqIFRoZW4gY2FuIGJlIHVzZWQgYXMgYW55IG90aGVyIGFzc2VydGlvbi5cblx0ICpcblx0ICogICAgIGV4cGVjdChteUZvbykudG8uZXF1YWwoJ2JhcicpO1xuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gY3R4IG9iamVjdCB3aG9zZSBtZXRob2QgaXMgdG8gYmUgb3ZlcndyaXR0ZW5cblx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgb2YgbWV0aG9kIHRvIG92ZXJ3cml0ZVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBtZXRob2QgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgZnVuY3Rpb24gdG8gYmUgdXNlZCBmb3IgbmFtZVxuXHQgKiBAbmFtZSBvdmVyd3JpdGVNZXRob2Rcblx0ICogQGFwaSBwdWJsaWNcblx0ICovXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjdHgsIG5hbWUsIG1ldGhvZCkge1xuXHQgIHZhciBfbWV0aG9kID0gY3R4W25hbWVdXG5cdCAgICAsIF9zdXBlciA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH07XG5cdFxuXHQgIGlmIChfbWV0aG9kICYmICdmdW5jdGlvbicgPT09IHR5cGVvZiBfbWV0aG9kKVxuXHQgICAgX3N1cGVyID0gX21ldGhvZDtcblx0XG5cdCAgY3R4W25hbWVdID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIHJlc3VsdCA9IG1ldGhvZChfc3VwZXIpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICByZXR1cm4gcmVzdWx0ID09PSB1bmRlZmluZWQgPyB0aGlzIDogcmVzdWx0O1xuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9LFxuLyogNDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIVxuXHQgKiBDaGFpIC0gYWRkQ2hhaW5pbmdNZXRob2QgdXRpbGl0eVxuXHQgKiBDb3B5cmlnaHQoYykgMjAxMi0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuXHQgKiBNSVQgTGljZW5zZWRcblx0ICovXG5cdFxuXHQvKiFcblx0ICogTW9kdWxlIGRlcGVuZGVuY2llc1xuXHQgKi9cblx0XG5cdHZhciB0cmFuc2ZlckZsYWdzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNyk7XG5cdHZhciBmbGFnID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdHZhciBjb25maWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KTtcblx0XG5cdC8qIVxuXHQgKiBNb2R1bGUgdmFyaWFibGVzXG5cdCAqL1xuXHRcblx0Ly8gQ2hlY2sgd2hldGhlciBgX19wcm90b19fYCBpcyBzdXBwb3J0ZWRcblx0dmFyIGhhc1Byb3RvU3VwcG9ydCA9ICdfX3Byb3RvX18nIGluIE9iamVjdDtcblx0XG5cdC8vIFdpdGhvdXQgYF9fcHJvdG9fX2Agc3VwcG9ydCwgdGhpcyBtb2R1bGUgd2lsbCBuZWVkIHRvIGFkZCBwcm9wZXJ0aWVzIHRvIGEgZnVuY3Rpb24uXG5cdC8vIEhvd2V2ZXIsIHNvbWUgRnVuY3Rpb24ucHJvdG90eXBlIG1ldGhvZHMgY2Fubm90IGJlIG92ZXJ3cml0dGVuLFxuXHQvLyBhbmQgdGhlcmUgc2VlbXMgbm8gZWFzeSBjcm9zcy1wbGF0Zm9ybSB3YXkgdG8gZGV0ZWN0IHRoZW0gKEBzZWUgY2hhaWpzL2NoYWkvaXNzdWVzLzY5KS5cblx0dmFyIGV4Y2x1ZGVOYW1lcyA9IC9eKD86bGVuZ3RofG5hbWV8YXJndW1lbnRzfGNhbGxlcikkLztcblx0XG5cdC8vIENhY2hlIGBGdW5jdGlvbmAgcHJvcGVydGllc1xuXHR2YXIgY2FsbCAgPSBGdW5jdGlvbi5wcm90b3R5cGUuY2FsbCxcblx0ICAgIGFwcGx5ID0gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5O1xuXHRcblx0LyoqXG5cdCAqICMjIyBhZGRDaGFpbmFibGVNZXRob2QgKGN0eCwgbmFtZSwgbWV0aG9kLCBjaGFpbmluZ0JlaGF2aW9yKVxuXHQgKlxuXHQgKiBBZGRzIGEgbWV0aG9kIHRvIGFuIG9iamVjdCwgc3VjaCB0aGF0IHRoZSBtZXRob2QgY2FuIGFsc28gYmUgY2hhaW5lZC5cblx0ICpcblx0ICogICAgIHV0aWxzLmFkZENoYWluYWJsZU1ldGhvZChjaGFpLkFzc2VydGlvbi5wcm90b3R5cGUsICdmb28nLCBmdW5jdGlvbiAoc3RyKSB7XG5cdCAqICAgICAgIHZhciBvYmogPSB1dGlscy5mbGFnKHRoaXMsICdvYmplY3QnKTtcblx0ICogICAgICAgbmV3IGNoYWkuQXNzZXJ0aW9uKG9iaikudG8uYmUuZXF1YWwoc3RyKTtcblx0ICogICAgIH0pO1xuXHQgKlxuXHQgKiBDYW4gYWxzbyBiZSBhY2Nlc3NlZCBkaXJlY3RseSBmcm9tIGBjaGFpLkFzc2VydGlvbmAuXG5cdCAqXG5cdCAqICAgICBjaGFpLkFzc2VydGlvbi5hZGRDaGFpbmFibGVNZXRob2QoJ2ZvbycsIGZuLCBjaGFpbmluZ0JlaGF2aW9yKTtcblx0ICpcblx0ICogVGhlIHJlc3VsdCBjYW4gdGhlbiBiZSB1c2VkIGFzIGJvdGggYSBtZXRob2QgYXNzZXJ0aW9uLCBleGVjdXRpbmcgYm90aCBgbWV0aG9kYCBhbmRcblx0ICogYGNoYWluaW5nQmVoYXZpb3JgLCBvciBhcyBhIGxhbmd1YWdlIGNoYWluLCB3aGljaCBvbmx5IGV4ZWN1dGVzIGBjaGFpbmluZ0JlaGF2aW9yYC5cblx0ICpcblx0ICogICAgIGV4cGVjdChmb29TdHIpLnRvLmJlLmZvbygnYmFyJyk7XG5cdCAqICAgICBleHBlY3QoZm9vU3RyKS50by5iZS5mb28uZXF1YWwoJ2ZvbycpO1xuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gY3R4IG9iamVjdCB0byB3aGljaCB0aGUgbWV0aG9kIGlzIGFkZGVkXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIG9mIG1ldGhvZCB0byBhZGRcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gbWV0aG9kIGZ1bmN0aW9uIHRvIGJlIHVzZWQgZm9yIGBuYW1lYCwgd2hlbiBjYWxsZWRcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2hhaW5pbmdCZWhhdmlvciBmdW5jdGlvbiB0byBiZSBjYWxsZWQgZXZlcnkgdGltZSB0aGUgcHJvcGVydHkgaXMgYWNjZXNzZWRcblx0ICogQG5hbWUgYWRkQ2hhaW5hYmxlTWV0aG9kXG5cdCAqIEBhcGkgcHVibGljXG5cdCAqL1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY3R4LCBuYW1lLCBtZXRob2QsIGNoYWluaW5nQmVoYXZpb3IpIHtcblx0ICBpZiAodHlwZW9mIGNoYWluaW5nQmVoYXZpb3IgIT09ICdmdW5jdGlvbicpIHtcblx0ICAgIGNoYWluaW5nQmVoYXZpb3IgPSBmdW5jdGlvbiAoKSB7IH07XG5cdCAgfVxuXHRcblx0ICB2YXIgY2hhaW5hYmxlQmVoYXZpb3IgPSB7XG5cdCAgICAgIG1ldGhvZDogbWV0aG9kXG5cdCAgICAsIGNoYWluaW5nQmVoYXZpb3I6IGNoYWluaW5nQmVoYXZpb3Jcblx0ICB9O1xuXHRcblx0ICAvLyBzYXZlIHRoZSBtZXRob2RzIHNvIHdlIGNhbiBvdmVyd3JpdGUgdGhlbSBsYXRlciwgaWYgd2UgbmVlZCB0by5cblx0ICBpZiAoIWN0eC5fX21ldGhvZHMpIHtcblx0ICAgIGN0eC5fX21ldGhvZHMgPSB7fTtcblx0ICB9XG5cdCAgY3R4Ll9fbWV0aG9kc1tuYW1lXSA9IGNoYWluYWJsZUJlaGF2aW9yO1xuXHRcblx0ICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBuYW1lLFxuXHQgICAgeyBnZXQ6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBjaGFpbmFibGVCZWhhdmlvci5jaGFpbmluZ0JlaGF2aW9yLmNhbGwodGhpcyk7XG5cdFxuXHQgICAgICAgIHZhciBhc3NlcnQgPSBmdW5jdGlvbiBhc3NlcnQoKSB7XG5cdCAgICAgICAgICB2YXIgb2xkX3NzZmkgPSBmbGFnKHRoaXMsICdzc2ZpJyk7XG5cdCAgICAgICAgICBpZiAob2xkX3NzZmkgJiYgY29uZmlnLmluY2x1ZGVTdGFjayA9PT0gZmFsc2UpXG5cdCAgICAgICAgICAgIGZsYWcodGhpcywgJ3NzZmknLCBhc3NlcnQpO1xuXHQgICAgICAgICAgdmFyIHJlc3VsdCA9IGNoYWluYWJsZUJlaGF2aW9yLm1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICAgICAgcmV0dXJuIHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gdGhpcyA6IHJlc3VsdDtcblx0ICAgICAgICB9O1xuXHRcblx0ICAgICAgICAvLyBVc2UgYF9fcHJvdG9fX2AgaWYgYXZhaWxhYmxlXG5cdCAgICAgICAgaWYgKGhhc1Byb3RvU3VwcG9ydCkge1xuXHQgICAgICAgICAgLy8gSW5oZXJpdCBhbGwgcHJvcGVydGllcyBmcm9tIHRoZSBvYmplY3QgYnkgcmVwbGFjaW5nIHRoZSBgRnVuY3Rpb25gIHByb3RvdHlwZVxuXHQgICAgICAgICAgdmFyIHByb3RvdHlwZSA9IGFzc2VydC5fX3Byb3RvX18gPSBPYmplY3QuY3JlYXRlKHRoaXMpO1xuXHQgICAgICAgICAgLy8gUmVzdG9yZSB0aGUgYGNhbGxgIGFuZCBgYXBwbHlgIG1ldGhvZHMgZnJvbSBgRnVuY3Rpb25gXG5cdCAgICAgICAgICBwcm90b3R5cGUuY2FsbCA9IGNhbGw7XG5cdCAgICAgICAgICBwcm90b3R5cGUuYXBwbHkgPSBhcHBseTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gT3RoZXJ3aXNlLCByZWRlZmluZSBhbGwgcHJvcGVydGllcyAoc2xvdyEpXG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICB2YXIgYXNzZXJ0ZXJOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGN0eCk7XG5cdCAgICAgICAgICBhc3NlcnRlck5hbWVzLmZvckVhY2goZnVuY3Rpb24gKGFzc2VydGVyTmFtZSkge1xuXHQgICAgICAgICAgICBpZiAoIWV4Y2x1ZGVOYW1lcy50ZXN0KGFzc2VydGVyTmFtZSkpIHtcblx0ICAgICAgICAgICAgICB2YXIgcGQgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGN0eCwgYXNzZXJ0ZXJOYW1lKTtcblx0ICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYXNzZXJ0LCBhc3NlcnRlck5hbWUsIHBkKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB0cmFuc2ZlckZsYWdzKHRoaXMsIGFzc2VydCk7XG5cdCAgICAgICAgcmV0dXJuIGFzc2VydDtcblx0ICAgICAgfVxuXHQgICAgLCBjb25maWd1cmFibGU6IHRydWVcblx0ICB9KTtcblx0fTtcblxuXG4vKioqLyB9LFxuLyogNDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIVxuXHQgKiBDaGFpIC0gb3ZlcndyaXRlQ2hhaW5hYmxlTWV0aG9kIHV0aWxpdHlcblx0ICogQ29weXJpZ2h0KGMpIDIwMTItMjAxNCBKYWtlIEx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cblx0ICogTUlUIExpY2Vuc2VkXG5cdCAqL1xuXHRcblx0LyoqXG5cdCAqICMjIyBvdmVyd3JpdGVDaGFpbmFibGVNZXRob2QgKGN0eCwgbmFtZSwgbWV0aG9kLCBjaGFpbmluZ0JlaGF2aW9yKVxuXHQgKlxuXHQgKiBPdmVyd2l0ZXMgYW4gYWxyZWFkeSBleGlzdGluZyBjaGFpbmFibGUgbWV0aG9kXG5cdCAqIGFuZCBwcm92aWRlcyBhY2Nlc3MgdG8gdGhlIHByZXZpb3VzIGZ1bmN0aW9uIG9yXG5cdCAqIHByb3BlcnR5LiAgTXVzdCByZXR1cm4gZnVuY3Rpb25zIHRvIGJlIHVzZWQgZm9yXG5cdCAqIG5hbWUuXG5cdCAqXG5cdCAqICAgICB1dGlscy5vdmVyd3JpdGVDaGFpbmFibGVNZXRob2QoY2hhaS5Bc3NlcnRpb24ucHJvdG90eXBlLCAnbGVuZ3RoJyxcblx0ICogICAgICAgZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgKiAgICAgICB9XG5cdCAqICAgICAsIGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICogICAgICAgfVxuXHQgKiAgICAgKTtcblx0ICpcblx0ICogQ2FuIGFsc28gYmUgYWNjZXNzZWQgZGlyZWN0bHkgZnJvbSBgY2hhaS5Bc3NlcnRpb25gLlxuXHQgKlxuXHQgKiAgICAgY2hhaS5Bc3NlcnRpb24ub3ZlcndyaXRlQ2hhaW5hYmxlTWV0aG9kKCdmb28nLCBmbiwgZm4pO1xuXHQgKlxuXHQgKiBUaGVuIGNhbiBiZSB1c2VkIGFzIGFueSBvdGhlciBhc3NlcnRpb24uXG5cdCAqXG5cdCAqICAgICBleHBlY3QobXlGb28pLnRvLmhhdmUubGVuZ3RoKDMpO1xuXHQgKiAgICAgZXhwZWN0KG15Rm9vKS50by5oYXZlLmxlbmd0aC5hYm92ZSgzKTtcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IGN0eCBvYmplY3Qgd2hvc2UgbWV0aG9kIC8gcHJvcGVydHkgaXMgdG8gYmUgb3ZlcndyaXR0ZW5cblx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgb2YgbWV0aG9kIC8gcHJvcGVydHkgdG8gb3ZlcndyaXRlXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IG1ldGhvZCBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBmdW5jdGlvbiB0byBiZSB1c2VkIGZvciBuYW1lXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNoYWluaW5nQmVoYXZpb3IgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgZnVuY3Rpb24gdG8gYmUgdXNlZCBmb3IgcHJvcGVydHlcblx0ICogQG5hbWUgb3ZlcndyaXRlQ2hhaW5hYmxlTWV0aG9kXG5cdCAqIEBhcGkgcHVibGljXG5cdCAqL1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY3R4LCBuYW1lLCBtZXRob2QsIGNoYWluaW5nQmVoYXZpb3IpIHtcblx0ICB2YXIgY2hhaW5hYmxlQmVoYXZpb3IgPSBjdHguX19tZXRob2RzW25hbWVdO1xuXHRcblx0ICB2YXIgX2NoYWluaW5nQmVoYXZpb3IgPSBjaGFpbmFibGVCZWhhdmlvci5jaGFpbmluZ0JlaGF2aW9yO1xuXHQgIGNoYWluYWJsZUJlaGF2aW9yLmNoYWluaW5nQmVoYXZpb3IgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgcmVzdWx0ID0gY2hhaW5pbmdCZWhhdmlvcihfY2hhaW5pbmdCZWhhdmlvcikuY2FsbCh0aGlzKTtcblx0ICAgIHJldHVybiByZXN1bHQgPT09IHVuZGVmaW5lZCA/IHRoaXMgOiByZXN1bHQ7XG5cdCAgfTtcblx0XG5cdCAgdmFyIF9tZXRob2QgPSBjaGFpbmFibGVCZWhhdmlvci5tZXRob2Q7XG5cdCAgY2hhaW5hYmxlQmVoYXZpb3IubWV0aG9kID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIHJlc3VsdCA9IG1ldGhvZChfbWV0aG9kKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgcmV0dXJuIHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gdGhpcyA6IHJlc3VsdDtcblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiA0NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyohXG5cdCAqIGNoYWlcblx0ICogaHR0cDovL2NoYWlqcy5jb21cblx0ICogQ29weXJpZ2h0KGMpIDIwMTEtMjAxNCBKYWtlIEx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cblx0ICogTUlUIExpY2Vuc2VkXG5cdCAqL1xuXHRcblx0dmFyIGNvbmZpZyA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoX2NoYWksIHV0aWwpIHtcblx0ICAvKiFcblx0ICAgKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuXHQgICAqL1xuXHRcblx0ICB2YXIgQXNzZXJ0aW9uRXJyb3IgPSBfY2hhaS5Bc3NlcnRpb25FcnJvclxuXHQgICAgLCBmbGFnID0gdXRpbC5mbGFnO1xuXHRcblx0ICAvKiFcblx0ICAgKiBNb2R1bGUgZXhwb3J0LlxuXHQgICAqL1xuXHRcblx0ICBfY2hhaS5Bc3NlcnRpb24gPSBBc3NlcnRpb247XG5cdFxuXHQgIC8qIVxuXHQgICAqIEFzc2VydGlvbiBDb25zdHJ1Y3RvclxuXHQgICAqXG5cdCAgICogQ3JlYXRlcyBvYmplY3QgZm9yIGNoYWluaW5nLlxuXHQgICAqXG5cdCAgICogQGFwaSBwcml2YXRlXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIEFzc2VydGlvbiAob2JqLCBtc2csIHN0YWNrKSB7XG5cdCAgICBmbGFnKHRoaXMsICdzc2ZpJywgc3RhY2sgfHwgYXJndW1lbnRzLmNhbGxlZSk7XG5cdCAgICBmbGFnKHRoaXMsICdvYmplY3QnLCBvYmopO1xuXHQgICAgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG5cdCAgfVxuXHRcblx0ICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQXNzZXJ0aW9uLCAnaW5jbHVkZVN0YWNrJywge1xuXHQgICAgZ2V0OiBmdW5jdGlvbigpIHtcblx0ICAgICAgY29uc29sZS53YXJuKCdBc3NlcnRpb24uaW5jbHVkZVN0YWNrIGlzIGRlcHJlY2F0ZWQsIHVzZSBjaGFpLmNvbmZpZy5pbmNsdWRlU3RhY2sgaW5zdGVhZC4nKTtcblx0ICAgICAgcmV0dXJuIGNvbmZpZy5pbmNsdWRlU3RhY2s7XG5cdCAgICB9LFxuXHQgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICBjb25zb2xlLndhcm4oJ0Fzc2VydGlvbi5pbmNsdWRlU3RhY2sgaXMgZGVwcmVjYXRlZCwgdXNlIGNoYWkuY29uZmlnLmluY2x1ZGVTdGFjayBpbnN0ZWFkLicpO1xuXHQgICAgICBjb25maWcuaW5jbHVkZVN0YWNrID0gdmFsdWU7XG5cdCAgICB9XG5cdCAgfSk7XG5cdFxuXHQgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBc3NlcnRpb24sICdzaG93RGlmZicsIHtcblx0ICAgIGdldDogZnVuY3Rpb24oKSB7XG5cdCAgICAgIGNvbnNvbGUud2FybignQXNzZXJ0aW9uLnNob3dEaWZmIGlzIGRlcHJlY2F0ZWQsIHVzZSBjaGFpLmNvbmZpZy5zaG93RGlmZiBpbnN0ZWFkLicpO1xuXHQgICAgICByZXR1cm4gY29uZmlnLnNob3dEaWZmO1xuXHQgICAgfSxcblx0ICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgICAgY29uc29sZS53YXJuKCdBc3NlcnRpb24uc2hvd0RpZmYgaXMgZGVwcmVjYXRlZCwgdXNlIGNoYWkuY29uZmlnLnNob3dEaWZmIGluc3RlYWQuJyk7XG5cdCAgICAgIGNvbmZpZy5zaG93RGlmZiA9IHZhbHVlO1xuXHQgICAgfVxuXHQgIH0pO1xuXHRcblx0ICBBc3NlcnRpb24uYWRkUHJvcGVydHkgPSBmdW5jdGlvbiAobmFtZSwgZm4pIHtcblx0ICAgIHV0aWwuYWRkUHJvcGVydHkodGhpcy5wcm90b3R5cGUsIG5hbWUsIGZuKTtcblx0ICB9O1xuXHRcblx0ICBBc3NlcnRpb24uYWRkTWV0aG9kID0gZnVuY3Rpb24gKG5hbWUsIGZuKSB7XG5cdCAgICB1dGlsLmFkZE1ldGhvZCh0aGlzLnByb3RvdHlwZSwgbmFtZSwgZm4pO1xuXHQgIH07XG5cdFxuXHQgIEFzc2VydGlvbi5hZGRDaGFpbmFibGVNZXRob2QgPSBmdW5jdGlvbiAobmFtZSwgZm4sIGNoYWluaW5nQmVoYXZpb3IpIHtcblx0ICAgIHV0aWwuYWRkQ2hhaW5hYmxlTWV0aG9kKHRoaXMucHJvdG90eXBlLCBuYW1lLCBmbiwgY2hhaW5pbmdCZWhhdmlvcik7XG5cdCAgfTtcblx0XG5cdCAgQXNzZXJ0aW9uLm92ZXJ3cml0ZVByb3BlcnR5ID0gZnVuY3Rpb24gKG5hbWUsIGZuKSB7XG5cdCAgICB1dGlsLm92ZXJ3cml0ZVByb3BlcnR5KHRoaXMucHJvdG90eXBlLCBuYW1lLCBmbik7XG5cdCAgfTtcblx0XG5cdCAgQXNzZXJ0aW9uLm92ZXJ3cml0ZU1ldGhvZCA9IGZ1bmN0aW9uIChuYW1lLCBmbikge1xuXHQgICAgdXRpbC5vdmVyd3JpdGVNZXRob2QodGhpcy5wcm90b3R5cGUsIG5hbWUsIGZuKTtcblx0ICB9O1xuXHRcblx0ICBBc3NlcnRpb24ub3ZlcndyaXRlQ2hhaW5hYmxlTWV0aG9kID0gZnVuY3Rpb24gKG5hbWUsIGZuLCBjaGFpbmluZ0JlaGF2aW9yKSB7XG5cdCAgICB1dGlsLm92ZXJ3cml0ZUNoYWluYWJsZU1ldGhvZCh0aGlzLnByb3RvdHlwZSwgbmFtZSwgZm4sIGNoYWluaW5nQmVoYXZpb3IpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuYXNzZXJ0KGV4cHJlc3Npb24sIG1lc3NhZ2UsIG5lZ2F0ZU1lc3NhZ2UsIGV4cGVjdGVkLCBhY3R1YWwsIHNob3dEaWZmKVxuXHQgICAqXG5cdCAgICogRXhlY3V0ZXMgYW4gZXhwcmVzc2lvbiBhbmQgY2hlY2sgZXhwZWN0YXRpb25zLiBUaHJvd3MgQXNzZXJ0aW9uRXJyb3IgZm9yIHJlcG9ydGluZyBpZiB0ZXN0IGRvZXNuJ3QgcGFzcy5cblx0ICAgKlxuXHQgICAqIEBuYW1lIGFzc2VydFxuXHQgICAqIEBwYXJhbSB7UGhpbG9zb3BoaWNhbH0gZXhwcmVzc2lvbiB0byBiZSB0ZXN0ZWRcblx0ICAgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gbWVzc2FnZSBvciBmdW5jdGlvbiB0aGF0IHJldHVybnMgbWVzc2FnZSB0byBkaXNwbGF5IGlmIGV4cHJlc3Npb24gZmFpbHNcblx0ICAgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gbmVnYXRlZE1lc3NhZ2Ugb3IgZnVuY3Rpb24gdGhhdCByZXR1cm5zIG5lZ2F0ZWRNZXNzYWdlIHRvIGRpc3BsYXkgaWYgbmVnYXRlZCBleHByZXNzaW9uIGZhaWxzXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gZXhwZWN0ZWQgdmFsdWUgKHJlbWVtYmVyIHRvIGNoZWNrIGZvciBuZWdhdGlvbilcblx0ICAgKiBAcGFyYW0ge01peGVkfSBhY3R1YWwgKG9wdGlvbmFsKSB3aWxsIGRlZmF1bHQgdG8gYHRoaXMub2JqYFxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gc2hvd0RpZmYgKG9wdGlvbmFsKSB3aGVuIHNldCB0byBgdHJ1ZWAsIGFzc2VydCB3aWxsIGRpc3BsYXkgYSBkaWZmIGluIGFkZGl0aW9uIHRvIHRoZSBtZXNzYWdlIGlmIGV4cHJlc3Npb24gZmFpbHNcblx0ICAgKiBAYXBpIHByaXZhdGVcblx0ICAgKi9cblx0XG5cdCAgQXNzZXJ0aW9uLnByb3RvdHlwZS5hc3NlcnQgPSBmdW5jdGlvbiAoZXhwciwgbXNnLCBuZWdhdGVNc2csIGV4cGVjdGVkLCBfYWN0dWFsLCBzaG93RGlmZikge1xuXHQgICAgdmFyIG9rID0gdXRpbC50ZXN0KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICBpZiAodHJ1ZSAhPT0gc2hvd0RpZmYpIHNob3dEaWZmID0gZmFsc2U7XG5cdCAgICBpZiAodHJ1ZSAhPT0gY29uZmlnLnNob3dEaWZmKSBzaG93RGlmZiA9IGZhbHNlO1xuXHRcblx0ICAgIGlmICghb2spIHtcblx0ICAgICAgdmFyIG1zZyA9IHV0aWwuZ2V0TWVzc2FnZSh0aGlzLCBhcmd1bWVudHMpXG5cdCAgICAgICAgLCBhY3R1YWwgPSB1dGlsLmdldEFjdHVhbCh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICB0aHJvdyBuZXcgQXNzZXJ0aW9uRXJyb3IobXNnLCB7XG5cdCAgICAgICAgICBhY3R1YWw6IGFjdHVhbFxuXHQgICAgICAgICwgZXhwZWN0ZWQ6IGV4cGVjdGVkXG5cdCAgICAgICAgLCBzaG93RGlmZjogc2hvd0RpZmZcblx0ICAgICAgfSwgKGNvbmZpZy5pbmNsdWRlU3RhY2spID8gdGhpcy5hc3NlcnQgOiBmbGFnKHRoaXMsICdzc2ZpJykpO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qIVxuXHQgICAqICMjIyAuX29ialxuXHQgICAqXG5cdCAgICogUXVpY2sgcmVmZXJlbmNlIHRvIHN0b3JlZCBgYWN0dWFsYCB2YWx1ZSBmb3IgcGx1Z2luIGRldmVsb3BlcnMuXG5cdCAgICpcblx0ICAgKiBAYXBpIHByaXZhdGVcblx0ICAgKi9cblx0XG5cdCAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFzc2VydGlvbi5wcm90b3R5cGUsICdfb2JqJyxcblx0ICAgIHsgZ2V0OiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIGZsYWcodGhpcywgJ29iamVjdCcpO1xuXHQgICAgICB9XG5cdCAgICAsIHNldDogZnVuY3Rpb24gKHZhbCkge1xuXHQgICAgICAgIGZsYWcodGhpcywgJ29iamVjdCcsIHZhbCk7XG5cdCAgICAgIH1cblx0ICB9KTtcblx0fTtcblxuXG4vKioqLyB9LFxuLyogNDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIVxuXHQgKiBjaGFpXG5cdCAqIGh0dHA6Ly9jaGFpanMuY29tXG5cdCAqIENvcHlyaWdodChjKSAyMDExLTIwMTQgSmFrZSBMdWVyIDxqYWtlQGFsb2dpY2FscGFyYWRveC5jb20+XG5cdCAqIE1JVCBMaWNlbnNlZFxuXHQgKi9cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGNoYWksIF8pIHtcblx0ICB2YXIgQXNzZXJ0aW9uID0gY2hhaS5Bc3NlcnRpb25cblx0ICAgICwgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nXG5cdCAgICAsIGZsYWcgPSBfLmZsYWc7XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyBMYW5ndWFnZSBDaGFpbnNcblx0ICAgKlxuXHQgICAqIFRoZSBmb2xsb3dpbmcgYXJlIHByb3ZpZGVkIGFzIGNoYWluYWJsZSBnZXR0ZXJzIHRvXG5cdCAgICogaW1wcm92ZSB0aGUgcmVhZGFiaWxpdHkgb2YgeW91ciBhc3NlcnRpb25zLiBUaGV5XG5cdCAgICogZG8gbm90IHByb3ZpZGUgdGVzdGluZyBjYXBhYmlsaXRpZXMgdW5sZXNzIHRoZXlcblx0ICAgKiBoYXZlIGJlZW4gb3ZlcndyaXR0ZW4gYnkgYSBwbHVnaW4uXG5cdCAgICpcblx0ICAgKiAqKkNoYWlucyoqXG5cdCAgICpcblx0ICAgKiAtIHRvXG5cdCAgICogLSBiZVxuXHQgICAqIC0gYmVlblxuXHQgICAqIC0gaXNcblx0ICAgKiAtIHRoYXRcblx0ICAgKiAtIHdoaWNoXG5cdCAgICogLSBhbmRcblx0ICAgKiAtIGhhc1xuXHQgICAqIC0gaGF2ZVxuXHQgICAqIC0gd2l0aFxuXHQgICAqIC0gYXRcblx0ICAgKiAtIG9mXG5cdCAgICogLSBzYW1lXG5cdCAgICpcblx0ICAgKiBAbmFtZSBsYW5ndWFnZSBjaGFpbnNcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBbICd0bycsICdiZScsICdiZWVuJ1xuXHQgICwgJ2lzJywgJ2FuZCcsICdoYXMnLCAnaGF2ZSdcblx0ICAsICd3aXRoJywgJ3RoYXQnLCAnd2hpY2gnLCAnYXQnXG5cdCAgLCAnb2YnLCAnc2FtZScgXS5mb3JFYWNoKGZ1bmN0aW9uIChjaGFpbikge1xuXHQgICAgQXNzZXJ0aW9uLmFkZFByb3BlcnR5KGNoYWluLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfSk7XG5cdCAgfSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAubm90XG5cdCAgICpcblx0ICAgKiBOZWdhdGVzIGFueSBvZiBhc3NlcnRpb25zIGZvbGxvd2luZyBpbiB0aGUgY2hhaW4uXG5cdCAgICpcblx0ICAgKiAgICAgZXhwZWN0KGZvbykudG8ubm90LmVxdWFsKCdiYXInKTtcblx0ICAgKiAgICAgZXhwZWN0KGdvb2RGbikudG8ubm90LnRocm93KEVycm9yKTtcblx0ICAgKiAgICAgZXhwZWN0KHsgZm9vOiAnYmF6JyB9KS50by5oYXZlLnByb3BlcnR5KCdmb28nKVxuXHQgICAqICAgICAgIC5hbmQubm90LmVxdWFsKCdiYXInKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIG5vdFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIEFzc2VydGlvbi5hZGRQcm9wZXJ0eSgnbm90JywgZnVuY3Rpb24gKCkge1xuXHQgICAgZmxhZyh0aGlzLCAnbmVnYXRlJywgdHJ1ZSk7XG5cdCAgfSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuZGVlcFxuXHQgICAqXG5cdCAgICogU2V0cyB0aGUgYGRlZXBgIGZsYWcsIGxhdGVyIHVzZWQgYnkgdGhlIGBlcXVhbGAgYW5kXG5cdCAgICogYHByb3BlcnR5YCBhc3NlcnRpb25zLlxuXHQgICAqXG5cdCAgICogICAgIGV4cGVjdChmb28pLnRvLmRlZXAuZXF1YWwoeyBiYXI6ICdiYXonIH0pO1xuXHQgICAqICAgICBleHBlY3QoeyBmb286IHsgYmFyOiB7IGJhejogJ3F1dXgnIH0gfSB9KVxuXHQgICAqICAgICAgIC50by5oYXZlLmRlZXAucHJvcGVydHkoJ2Zvby5iYXIuYmF6JywgJ3F1dXgnKTtcblx0ICAgKlxuXHQgICAqIGAuZGVlcC5wcm9wZXJ0eWAgc3BlY2lhbCBjaGFyYWN0ZXJzIGNhbiBiZSBlc2NhcGVkXG5cdCAgICogYnkgYWRkaW5nIHR3byBzbGFzaGVzIGJlZm9yZSB0aGUgYC5gIG9yIGBbXWAuXG5cdCAgICpcblx0ICAgKiAgICAgdmFyIGRlZXBDc3MgPSB7ICcubGluayc6IHsgJ1t0YXJnZXRdJzogNDIgfX07XG5cdCAgICogICAgIGV4cGVjdChkZWVwQ3NzKS50by5oYXZlLmRlZXAucHJvcGVydHkoJ1xcXFwubGluay5cXFxcW3RhcmdldFxcXFxdJywgNDIpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgZGVlcFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIEFzc2VydGlvbi5hZGRQcm9wZXJ0eSgnZGVlcCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgIGZsYWcodGhpcywgJ2RlZXAnLCB0cnVlKTtcblx0ICB9KTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5hbnlcblx0ICAgKlxuXHQgICAqIFNldHMgdGhlIGBhbnlgIGZsYWcsIChvcHBvc2l0ZSBvZiB0aGUgYGFsbGAgZmxhZylcblx0ICAgKiBsYXRlciB1c2VkIGluIHRoZSBga2V5c2AgYXNzZXJ0aW9uLlxuXHQgICAqXG5cdCAgICogICAgIGV4cGVjdChmb28pLnRvLmhhdmUuYW55LmtleXMoJ2JhcicsICdiYXonKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGFueVxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIEFzc2VydGlvbi5hZGRQcm9wZXJ0eSgnYW55JywgZnVuY3Rpb24gKCkge1xuXHQgICAgZmxhZyh0aGlzLCAnYW55JywgdHJ1ZSk7XG5cdCAgICBmbGFnKHRoaXMsICdhbGwnLCBmYWxzZSlcblx0ICB9KTtcblx0XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuYWxsXG5cdCAgICpcblx0ICAgKiBTZXRzIHRoZSBgYWxsYCBmbGFnIChvcHBvc2l0ZSBvZiB0aGUgYGFueWAgZmxhZylcblx0ICAgKiBsYXRlciB1c2VkIGJ5IHRoZSBga2V5c2AgYXNzZXJ0aW9uLlxuXHQgICAqXG5cdCAgICogICAgIGV4cGVjdChmb28pLnRvLmhhdmUuYWxsLmtleXMoJ2JhcicsICdiYXonKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGFsbFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIEFzc2VydGlvbi5hZGRQcm9wZXJ0eSgnYWxsJywgZnVuY3Rpb24gKCkge1xuXHQgICAgZmxhZyh0aGlzLCAnYWxsJywgdHJ1ZSk7XG5cdCAgICBmbGFnKHRoaXMsICdhbnknLCBmYWxzZSk7XG5cdCAgfSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuYSh0eXBlKVxuXHQgICAqXG5cdCAgICogVGhlIGBhYCBhbmQgYGFuYCBhc3NlcnRpb25zIGFyZSBhbGlhc2VzIHRoYXQgY2FuIGJlXG5cdCAgICogdXNlZCBlaXRoZXIgYXMgbGFuZ3VhZ2UgY2hhaW5zIG9yIHRvIGFzc2VydCBhIHZhbHVlJ3Ncblx0ICAgKiB0eXBlLlxuXHQgICAqXG5cdCAgICogICAgIC8vIHR5cGVvZlxuXHQgICAqICAgICBleHBlY3QoJ3Rlc3QnKS50by5iZS5hKCdzdHJpbmcnKTtcblx0ICAgKiAgICAgZXhwZWN0KHsgZm9vOiAnYmFyJyB9KS50by5iZS5hbignb2JqZWN0Jyk7XG5cdCAgICogICAgIGV4cGVjdChudWxsKS50by5iZS5hKCdudWxsJyk7XG5cdCAgICogICAgIGV4cGVjdCh1bmRlZmluZWQpLnRvLmJlLmFuKCd1bmRlZmluZWQnKTtcblx0ICAgKiAgICAgZXhwZWN0KG5ldyBFcnJvcikudG8uYmUuYW4oJ2Vycm9yJyk7XG5cdCAgICogICAgIGV4cGVjdChuZXcgUHJvbWlzZSkudG8uYmUuYSgncHJvbWlzZScpO1xuXHQgICAqICAgICBleHBlY3QobmV3IEZsb2F0MzJBcnJheSgpKS50by5iZS5hKCdmbG9hdDMyYXJyYXknKTtcblx0ICAgKiAgICAgZXhwZWN0KFN5bWJvbCgpKS50by5iZS5hKCdzeW1ib2wnKTtcblx0ICAgKlxuXHQgICAqICAgICAvLyBlczYgb3ZlcnJpZGVzXG5cdCAgICogICAgIGV4cGVjdCh7W1N5bWJvbC50b1N0cmluZ1RhZ106KCk9Pidmb28nfSkudG8uYmUuYSgnZm9vJyk7XG5cdCAgICpcblx0ICAgKiAgICAgLy8gbGFuZ3VhZ2UgY2hhaW5cblx0ICAgKiAgICAgZXhwZWN0KGZvbykudG8uYmUuYW4uaW5zdGFuY2VvZihGb28pO1xuXHQgICAqXG5cdCAgICogQG5hbWUgYVxuXHQgICAqIEBhbGlhcyBhblxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGFuICh0eXBlLCBtc2cpIHtcblx0ICAgIGlmIChtc2cpIGZsYWcodGhpcywgJ21lc3NhZ2UnLCBtc2cpO1xuXHQgICAgdHlwZSA9IHR5cGUudG9Mb3dlckNhc2UoKTtcblx0ICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKVxuXHQgICAgICAsIGFydGljbGUgPSB+WyAnYScsICdlJywgJ2knLCAnbycsICd1JyBdLmluZGV4T2YodHlwZS5jaGFyQXQoMCkpID8gJ2FuICcgOiAnYSAnO1xuXHRcblx0ICAgIHRoaXMuYXNzZXJ0KFxuXHQgICAgICAgIHR5cGUgPT09IF8udHlwZShvYmopXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgJyArIGFydGljbGUgKyB0eXBlXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gbm90IHRvIGJlICcgKyBhcnRpY2xlICsgdHlwZVxuXHQgICAgKTtcblx0ICB9XG5cdFxuXHQgIEFzc2VydGlvbi5hZGRDaGFpbmFibGVNZXRob2QoJ2FuJywgYW4pO1xuXHQgIEFzc2VydGlvbi5hZGRDaGFpbmFibGVNZXRob2QoJ2EnLCBhbik7XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuaW5jbHVkZSh2YWx1ZSlcblx0ICAgKlxuXHQgICAqIFRoZSBgaW5jbHVkZWAgYW5kIGBjb250YWluYCBhc3NlcnRpb25zIGNhbiBiZSB1c2VkIGFzIGVpdGhlciBwcm9wZXJ0eVxuXHQgICAqIGJhc2VkIGxhbmd1YWdlIGNoYWlucyBvciBhcyBtZXRob2RzIHRvIGFzc2VydCB0aGUgaW5jbHVzaW9uIG9mIGFuIG9iamVjdFxuXHQgICAqIGluIGFuIGFycmF5IG9yIGEgc3Vic3RyaW5nIGluIGEgc3RyaW5nLiBXaGVuIHVzZWQgYXMgbGFuZ3VhZ2UgY2hhaW5zLFxuXHQgICAqIHRoZXkgdG9nZ2xlIHRoZSBgY29udGFpbnNgIGZsYWcgZm9yIHRoZSBga2V5c2AgYXNzZXJ0aW9uLlxuXHQgICAqXG5cdCAgICogICAgIGV4cGVjdChbMSwyLDNdKS50by5pbmNsdWRlKDIpO1xuXHQgICAqICAgICBleHBlY3QoJ2Zvb2JhcicpLnRvLmNvbnRhaW4oJ2ZvbycpO1xuXHQgICAqICAgICBleHBlY3QoeyBmb286ICdiYXInLCBoZWxsbzogJ3VuaXZlcnNlJyB9KS50by5pbmNsdWRlLmtleXMoJ2ZvbycpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgaW5jbHVkZVxuXHQgICAqIEBhbGlhcyBjb250YWluXG5cdCAgICogQGFsaWFzIGluY2x1ZGVzXG5cdCAgICogQGFsaWFzIGNvbnRhaW5zXG5cdCAgICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfE51bWJlcn0gb2JqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGluY2x1ZGVDaGFpbmluZ0JlaGF2aW9yICgpIHtcblx0ICAgIGZsYWcodGhpcywgJ2NvbnRhaW5zJywgdHJ1ZSk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBpbmNsdWRlICh2YWwsIG1zZykge1xuXHQgICAgXy5leHBlY3RUeXBlcyh0aGlzLCBbJ2FycmF5JywgJ29iamVjdCcsICdzdHJpbmcnXSk7XG5cdFxuXHQgICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG5cdCAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG5cdCAgICB2YXIgZXhwZWN0ZWQgPSBmYWxzZTtcblx0XG5cdCAgICBpZiAoXy50eXBlKG9iaikgPT09ICdhcnJheScgJiYgXy50eXBlKHZhbCkgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgIGZvciAodmFyIGkgaW4gb2JqKSB7XG5cdCAgICAgICAgaWYgKF8uZXFsKG9ialtpXSwgdmFsKSkge1xuXHQgICAgICAgICAgZXhwZWN0ZWQgPSB0cnVlO1xuXHQgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKF8udHlwZSh2YWwpID09PSAnb2JqZWN0Jykge1xuXHQgICAgICBpZiAoIWZsYWcodGhpcywgJ25lZ2F0ZScpKSB7XG5cdCAgICAgICAgZm9yICh2YXIgayBpbiB2YWwpIG5ldyBBc3NlcnRpb24ob2JqKS5wcm9wZXJ0eShrLCB2YWxba10pO1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgc3Vic2V0ID0ge307XG5cdCAgICAgIGZvciAodmFyIGsgaW4gdmFsKSBzdWJzZXRba10gPSBvYmpba107XG5cdCAgICAgIGV4cGVjdGVkID0gXy5lcWwoc3Vic2V0LCB2YWwpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZXhwZWN0ZWQgPSAob2JqICE9IHVuZGVmaW5lZCkgJiYgfm9iai5pbmRleE9mKHZhbCk7XG5cdCAgICB9XG5cdCAgICB0aGlzLmFzc2VydChcblx0ICAgICAgICBleHBlY3RlZFxuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGluY2x1ZGUgJyArIF8uaW5zcGVjdCh2YWwpXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IGluY2x1ZGUgJyArIF8uaW5zcGVjdCh2YWwpKTtcblx0ICB9XG5cdFxuXHQgIEFzc2VydGlvbi5hZGRDaGFpbmFibGVNZXRob2QoJ2luY2x1ZGUnLCBpbmNsdWRlLCBpbmNsdWRlQ2hhaW5pbmdCZWhhdmlvcik7XG5cdCAgQXNzZXJ0aW9uLmFkZENoYWluYWJsZU1ldGhvZCgnY29udGFpbicsIGluY2x1ZGUsIGluY2x1ZGVDaGFpbmluZ0JlaGF2aW9yKTtcblx0ICBBc3NlcnRpb24uYWRkQ2hhaW5hYmxlTWV0aG9kKCdjb250YWlucycsIGluY2x1ZGUsIGluY2x1ZGVDaGFpbmluZ0JlaGF2aW9yKTtcblx0ICBBc3NlcnRpb24uYWRkQ2hhaW5hYmxlTWV0aG9kKCdpbmNsdWRlcycsIGluY2x1ZGUsIGluY2x1ZGVDaGFpbmluZ0JlaGF2aW9yKTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5va1xuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaXMgdHJ1dGh5LlxuXHQgICAqXG5cdCAgICogICAgIGV4cGVjdCgnZXZlcnl0aGluZycpLnRvLmJlLm9rO1xuXHQgICAqICAgICBleHBlY3QoMSkudG8uYmUub2s7XG5cdCAgICogICAgIGV4cGVjdChmYWxzZSkudG8ubm90LmJlLm9rO1xuXHQgICAqICAgICBleHBlY3QodW5kZWZpbmVkKS50by5ub3QuYmUub2s7XG5cdCAgICogICAgIGV4cGVjdChudWxsKS50by5ub3QuYmUub2s7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBva1xuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIEFzc2VydGlvbi5hZGRQcm9wZXJ0eSgnb2snLCBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLmFzc2VydChcblx0ICAgICAgICBmbGFnKHRoaXMsICdvYmplY3QnKVxuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIHRydXRoeSdcblx0ICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSBmYWxzeScpO1xuXHQgIH0pO1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLnRydWVcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IGlzIGB0cnVlYC5cblx0ICAgKlxuXHQgICAqICAgICBleHBlY3QodHJ1ZSkudG8uYmUudHJ1ZTtcblx0ICAgKiAgICAgZXhwZWN0KDEpLnRvLm5vdC5iZS50cnVlO1xuXHQgICAqXG5cdCAgICogQG5hbWUgdHJ1ZVxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIEFzc2VydGlvbi5hZGRQcm9wZXJ0eSgndHJ1ZScsIGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuYXNzZXJ0KFxuXHQgICAgICAgIHRydWUgPT09IGZsYWcodGhpcywgJ29iamVjdCcpXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgdHJ1ZSdcblx0ICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSBmYWxzZSdcblx0ICAgICAgLCB0aGlzLm5lZ2F0ZSA/IGZhbHNlIDogdHJ1ZVxuXHQgICAgKTtcblx0ICB9KTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5mYWxzZVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaXMgYGZhbHNlYC5cblx0ICAgKlxuXHQgICAqICAgICBleHBlY3QoZmFsc2UpLnRvLmJlLmZhbHNlO1xuXHQgICAqICAgICBleHBlY3QoMCkudG8ubm90LmJlLmZhbHNlO1xuXHQgICAqXG5cdCAgICogQG5hbWUgZmFsc2Vcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBBc3NlcnRpb24uYWRkUHJvcGVydHkoJ2ZhbHNlJywgZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgICAgZmFsc2UgPT09IGZsYWcodGhpcywgJ29iamVjdCcpXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgZmFsc2UnXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgdHJ1ZSdcblx0ICAgICAgLCB0aGlzLm5lZ2F0ZSA/IHRydWUgOiBmYWxzZVxuXHQgICAgKTtcblx0ICB9KTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5udWxsXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBgbnVsbGAuXG5cdCAgICpcblx0ICAgKiAgICAgZXhwZWN0KG51bGwpLnRvLmJlLm51bGw7XG5cdCAgICogICAgIGV4cGVjdCh1bmRlZmluZWQpLnRvLm5vdC5iZS5udWxsO1xuXHQgICAqXG5cdCAgICogQG5hbWUgbnVsbFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIEFzc2VydGlvbi5hZGRQcm9wZXJ0eSgnbnVsbCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuYXNzZXJ0KFxuXHQgICAgICAgIG51bGwgPT09IGZsYWcodGhpcywgJ29iamVjdCcpXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgbnVsbCdcblx0ICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSBub3QgdG8gYmUgbnVsbCdcblx0ICAgICk7XG5cdCAgfSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAudW5kZWZpbmVkXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBgdW5kZWZpbmVkYC5cblx0ICAgKlxuXHQgICAqICAgICBleHBlY3QodW5kZWZpbmVkKS50by5iZS51bmRlZmluZWQ7XG5cdCAgICogICAgIGV4cGVjdChudWxsKS50by5ub3QuYmUudW5kZWZpbmVkO1xuXHQgICAqXG5cdCAgICogQG5hbWUgdW5kZWZpbmVkXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgQXNzZXJ0aW9uLmFkZFByb3BlcnR5KCd1bmRlZmluZWQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLmFzc2VydChcblx0ICAgICAgICB1bmRlZmluZWQgPT09IGZsYWcodGhpcywgJ29iamVjdCcpXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgdW5kZWZpbmVkJ1xuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IG5vdCB0byBiZSB1bmRlZmluZWQnXG5cdCAgICApO1xuXHQgIH0pO1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLk5hTlxuXHQgICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IGlzIGBOYU5gLlxuXHQgICAqXG5cdCAgICogICAgIGV4cGVjdCgnZm9vJykudG8uYmUuTmFOO1xuXHQgICAqICAgICBleHBlY3QoNCkubm90LnRvLmJlLk5hTjtcblx0ICAgKlxuXHQgICAqIEBuYW1lIE5hTlxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIEFzc2VydGlvbi5hZGRQcm9wZXJ0eSgnTmFOJywgZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgICAgaXNOYU4oZmxhZyh0aGlzLCAnb2JqZWN0JykpXG5cdCAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSBOYU4nXG5cdCAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSBub3QgdG8gYmUgTmFOJ1xuXHQgICAgKTtcblx0ICB9KTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5leGlzdFxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaXMgbmVpdGhlciBgbnVsbGAgbm9yIGB1bmRlZmluZWRgLlxuXHQgICAqXG5cdCAgICogICAgIHZhciBmb28gPSAnaGknXG5cdCAgICogICAgICAgLCBiYXIgPSBudWxsXG5cdCAgICogICAgICAgLCBiYXo7XG5cdCAgICpcblx0ICAgKiAgICAgZXhwZWN0KGZvbykudG8uZXhpc3Q7XG5cdCAgICogICAgIGV4cGVjdChiYXIpLnRvLm5vdC5leGlzdDtcblx0ICAgKiAgICAgZXhwZWN0KGJheikudG8ubm90LmV4aXN0O1xuXHQgICAqXG5cdCAgICogQG5hbWUgZXhpc3Rcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBBc3NlcnRpb24uYWRkUHJvcGVydHkoJ2V4aXN0JywgZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgICAgbnVsbCAhPSBmbGFnKHRoaXMsICdvYmplY3QnKVxuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGV4aXN0J1xuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBleGlzdCdcblx0ICAgICk7XG5cdCAgfSk7XG5cdFxuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLmVtcHR5XG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCdzIGxlbmd0aCBpcyBgMGAuIEZvciBhcnJheXMgYW5kIHN0cmluZ3MsIGl0IGNoZWNrc1xuXHQgICAqIHRoZSBgbGVuZ3RoYCBwcm9wZXJ0eS4gRm9yIG9iamVjdHMsIGl0IGdldHMgdGhlIGNvdW50IG9mXG5cdCAgICogZW51bWVyYWJsZSBrZXlzLlxuXHQgICAqXG5cdCAgICogICAgIGV4cGVjdChbXSkudG8uYmUuZW1wdHk7XG5cdCAgICogICAgIGV4cGVjdCgnJykudG8uYmUuZW1wdHk7XG5cdCAgICogICAgIGV4cGVjdCh7fSkudG8uYmUuZW1wdHk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBlbXB0eVxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIEFzc2VydGlvbi5hZGRQcm9wZXJ0eSgnZW1wdHknLCBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0Jylcblx0ICAgICAgLCBleHBlY3RlZCA9IG9iajtcblx0XG5cdCAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopIHx8ICdzdHJpbmcnID09PSB0eXBlb2Ygb2JqZWN0KSB7XG5cdCAgICAgIGV4cGVjdGVkID0gb2JqLmxlbmd0aDtcblx0ICAgIH0gZWxzZSBpZiAodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgZXhwZWN0ZWQgPSBPYmplY3Qua2V5cyhvYmopLmxlbmd0aDtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLmFzc2VydChcblx0ICAgICAgICAhZXhwZWN0ZWRcblx0ICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSBlbXB0eSdcblx0ICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSBub3QgdG8gYmUgZW1wdHknXG5cdCAgICApO1xuXHQgIH0pO1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLmFyZ3VtZW50c1xuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaXMgYW4gYXJndW1lbnRzIG9iamVjdC5cblx0ICAgKlxuXHQgICAqICAgICBmdW5jdGlvbiB0ZXN0ICgpIHtcblx0ICAgKiAgICAgICBleHBlY3QoYXJndW1lbnRzKS50by5iZS5hcmd1bWVudHM7XG5cdCAgICogICAgIH1cblx0ICAgKlxuXHQgICAqIEBuYW1lIGFyZ3VtZW50c1xuXHQgICAqIEBhbGlhcyBBcmd1bWVudHNcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBjaGVja0FyZ3VtZW50cyAoKSB7XG5cdCAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0Jylcblx0ICAgICAgLCB0eXBlID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaik7XG5cdCAgICB0aGlzLmFzc2VydChcblx0ICAgICAgICAnW29iamVjdCBBcmd1bWVudHNdJyA9PT0gdHlwZVxuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIGFyZ3VtZW50cyBidXQgZ290ICcgKyB0eXBlXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IGJlIGFyZ3VtZW50cydcblx0ICAgICk7XG5cdCAgfVxuXHRcblx0ICBBc3NlcnRpb24uYWRkUHJvcGVydHkoJ2FyZ3VtZW50cycsIGNoZWNrQXJndW1lbnRzKTtcblx0ICBBc3NlcnRpb24uYWRkUHJvcGVydHkoJ0FyZ3VtZW50cycsIGNoZWNrQXJndW1lbnRzKTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5lcXVhbCh2YWx1ZSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IGlzIHN0cmljdGx5IGVxdWFsIChgPT09YCkgdG8gYHZhbHVlYC5cblx0ICAgKiBBbHRlcm5hdGVseSwgaWYgdGhlIGBkZWVwYCBmbGFnIGlzIHNldCwgYXNzZXJ0cyB0aGF0XG5cdCAgICogdGhlIHRhcmdldCBpcyBkZWVwbHkgZXF1YWwgdG8gYHZhbHVlYC5cblx0ICAgKlxuXHQgICAqICAgICBleHBlY3QoJ2hlbGxvJykudG8uZXF1YWwoJ2hlbGxvJyk7XG5cdCAgICogICAgIGV4cGVjdCg0MikudG8uZXF1YWwoNDIpO1xuXHQgICAqICAgICBleHBlY3QoMSkudG8ubm90LmVxdWFsKHRydWUpO1xuXHQgICAqICAgICBleHBlY3QoeyBmb286ICdiYXInIH0pLnRvLm5vdC5lcXVhbCh7IGZvbzogJ2JhcicgfSk7XG5cdCAgICogICAgIGV4cGVjdCh7IGZvbzogJ2JhcicgfSkudG8uZGVlcC5lcXVhbCh7IGZvbzogJ2JhcicgfSk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBlcXVhbFxuXHQgICAqIEBhbGlhcyBlcXVhbHNcblx0ICAgKiBAYWxpYXMgZXFcblx0ICAgKiBAYWxpYXMgZGVlcC5lcXVhbFxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGFzc2VydEVxdWFsICh2YWwsIG1zZykge1xuXHQgICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG5cdCAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG5cdCAgICBpZiAoZmxhZyh0aGlzLCAnZGVlcCcpKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLmVxbCh2YWwpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgICAgICB2YWwgPT09IG9ialxuXHQgICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gZXF1YWwgI3tleHB9J1xuXHQgICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IGVxdWFsICN7ZXhwfSdcblx0ICAgICAgICAsIHZhbFxuXHQgICAgICAgICwgdGhpcy5fb2JqXG5cdCAgICAgICAgLCB0cnVlXG5cdCAgICAgICk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBBc3NlcnRpb24uYWRkTWV0aG9kKCdlcXVhbCcsIGFzc2VydEVxdWFsKTtcblx0ICBBc3NlcnRpb24uYWRkTWV0aG9kKCdlcXVhbHMnLCBhc3NlcnRFcXVhbCk7XG5cdCAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnZXEnLCBhc3NlcnRFcXVhbCk7XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuZXFsKHZhbHVlKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaXMgZGVlcGx5IGVxdWFsIHRvIGB2YWx1ZWAuXG5cdCAgICpcblx0ICAgKiAgICAgZXhwZWN0KHsgZm9vOiAnYmFyJyB9KS50by5lcWwoeyBmb286ICdiYXInIH0pO1xuXHQgICAqICAgICBleHBlY3QoWyAxLCAyLCAzIF0pLnRvLmVxbChbIDEsIDIsIDMgXSk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBlcWxcblx0ICAgKiBAYWxpYXMgZXFsc1xuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGFzc2VydEVxbChvYmosIG1zZykge1xuXHQgICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG5cdCAgICB0aGlzLmFzc2VydChcblx0ICAgICAgICBfLmVxbChvYmosIGZsYWcodGhpcywgJ29iamVjdCcpKVxuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGRlZXBseSBlcXVhbCAje2V4cH0nXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IGRlZXBseSBlcXVhbCAje2V4cH0nXG5cdCAgICAgICwgb2JqXG5cdCAgICAgICwgdGhpcy5fb2JqXG5cdCAgICAgICwgdHJ1ZVxuXHQgICAgKTtcblx0ICB9XG5cdFxuXHQgIEFzc2VydGlvbi5hZGRNZXRob2QoJ2VxbCcsIGFzc2VydEVxbCk7XG5cdCAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnZXFscycsIGFzc2VydEVxbCk7XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuYWJvdmUodmFsdWUpXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBncmVhdGVyIHRoYW4gYHZhbHVlYC5cblx0ICAgKlxuXHQgICAqICAgICBleHBlY3QoMTApLnRvLmJlLmFib3ZlKDUpO1xuXHQgICAqXG5cdCAgICogQ2FuIGFsc28gYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIGBsZW5ndGhgIHRvXG5cdCAgICogYXNzZXJ0IGEgbWluaW11bSBsZW5ndGguIFRoZSBiZW5lZml0IGJlaW5nIGFcblx0ICAgKiBtb3JlIGluZm9ybWF0aXZlIGVycm9yIG1lc3NhZ2UgdGhhbiBpZiB0aGUgbGVuZ3RoXG5cdCAgICogd2FzIHN1cHBsaWVkIGRpcmVjdGx5LlxuXHQgICAqXG5cdCAgICogICAgIGV4cGVjdCgnZm9vJykudG8uaGF2ZS5sZW5ndGguYWJvdmUoMik7XG5cdCAgICogICAgIGV4cGVjdChbIDEsIDIsIDMgXSkudG8uaGF2ZS5sZW5ndGguYWJvdmUoMik7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBhYm92ZVxuXHQgICAqIEBhbGlhcyBndFxuXHQgICAqIEBhbGlhcyBncmVhdGVyVGhhblxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBhc3NlcnRBYm92ZSAobiwgbXNnKSB7XG5cdCAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcblx0ICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKTtcblx0ICAgIGlmIChmbGFnKHRoaXMsICdkb0xlbmd0aCcpKSB7XG5cdCAgICAgIG5ldyBBc3NlcnRpb24ob2JqLCBtc2cpLnRvLmhhdmUucHJvcGVydHkoJ2xlbmd0aCcpO1xuXHQgICAgICB2YXIgbGVuID0gb2JqLmxlbmd0aDtcblx0ICAgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgICAgICBsZW4gPiBuXG5cdCAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBoYXZlIGEgbGVuZ3RoIGFib3ZlICN7ZXhwfSBidXQgZ290ICN7YWN0fSdcblx0ICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBoYXZlIGEgbGVuZ3RoIGFib3ZlICN7ZXhwfSdcblx0ICAgICAgICAsIG5cblx0ICAgICAgICAsIGxlblxuXHQgICAgICApO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgICAgICBvYmogPiBuXG5cdCAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSBhYm92ZSAnICsgblxuXHQgICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgYXQgbW9zdCAnICsgblxuXHQgICAgICApO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnYWJvdmUnLCBhc3NlcnRBYm92ZSk7XG5cdCAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnZ3QnLCBhc3NlcnRBYm92ZSk7XG5cdCAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnZ3JlYXRlclRoYW4nLCBhc3NlcnRBYm92ZSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAubGVhc3QodmFsdWUpXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gYHZhbHVlYC5cblx0ICAgKlxuXHQgICAqICAgICBleHBlY3QoMTApLnRvLmJlLmF0LmxlYXN0KDEwKTtcblx0ICAgKlxuXHQgICAqIENhbiBhbHNvIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBgbGVuZ3RoYCB0b1xuXHQgICAqIGFzc2VydCBhIG1pbmltdW0gbGVuZ3RoLiBUaGUgYmVuZWZpdCBiZWluZyBhXG5cdCAgICogbW9yZSBpbmZvcm1hdGl2ZSBlcnJvciBtZXNzYWdlIHRoYW4gaWYgdGhlIGxlbmd0aFxuXHQgICAqIHdhcyBzdXBwbGllZCBkaXJlY3RseS5cblx0ICAgKlxuXHQgICAqICAgICBleHBlY3QoJ2ZvbycpLnRvLmhhdmUubGVuZ3RoLm9mLmF0LmxlYXN0KDIpO1xuXHQgICAqICAgICBleHBlY3QoWyAxLCAyLCAzIF0pLnRvLmhhdmUubGVuZ3RoLm9mLmF0LmxlYXN0KDMpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgbGVhc3Rcblx0ICAgKiBAYWxpYXMgZ3RlXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGFzc2VydExlYXN0IChuLCBtc2cpIHtcblx0ICAgIGlmIChtc2cpIGZsYWcodGhpcywgJ21lc3NhZ2UnLCBtc2cpO1xuXHQgICAgdmFyIG9iaiA9IGZsYWcodGhpcywgJ29iamVjdCcpO1xuXHQgICAgaWYgKGZsYWcodGhpcywgJ2RvTGVuZ3RoJykpIHtcblx0ICAgICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8uaGF2ZS5wcm9wZXJ0eSgnbGVuZ3RoJyk7XG5cdCAgICAgIHZhciBsZW4gPSBvYmoubGVuZ3RoO1xuXHQgICAgICB0aGlzLmFzc2VydChcblx0ICAgICAgICAgIGxlbiA+PSBuXG5cdCAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBoYXZlIGEgbGVuZ3RoIGF0IGxlYXN0ICN7ZXhwfSBidXQgZ290ICN7YWN0fSdcblx0ICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGhhdmUgYSBsZW5ndGggYmVsb3cgI3tleHB9J1xuXHQgICAgICAgICwgblxuXHQgICAgICAgICwgbGVuXG5cdCAgICAgICk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLmFzc2VydChcblx0ICAgICAgICAgIG9iaiA+PSBuXG5cdCAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSBhdCBsZWFzdCAnICsgblxuXHQgICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgYmVsb3cgJyArIG5cblx0ICAgICAgKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIEFzc2VydGlvbi5hZGRNZXRob2QoJ2xlYXN0JywgYXNzZXJ0TGVhc3QpO1xuXHQgIEFzc2VydGlvbi5hZGRNZXRob2QoJ2d0ZScsIGFzc2VydExlYXN0KTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5iZWxvdyh2YWx1ZSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IGlzIGxlc3MgdGhhbiBgdmFsdWVgLlxuXHQgICAqXG5cdCAgICogICAgIGV4cGVjdCg1KS50by5iZS5iZWxvdygxMCk7XG5cdCAgICpcblx0ICAgKiBDYW4gYWxzbyBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggYGxlbmd0aGAgdG9cblx0ICAgKiBhc3NlcnQgYSBtYXhpbXVtIGxlbmd0aC4gVGhlIGJlbmVmaXQgYmVpbmcgYVxuXHQgICAqIG1vcmUgaW5mb3JtYXRpdmUgZXJyb3IgbWVzc2FnZSB0aGFuIGlmIHRoZSBsZW5ndGhcblx0ICAgKiB3YXMgc3VwcGxpZWQgZGlyZWN0bHkuXG5cdCAgICpcblx0ICAgKiAgICAgZXhwZWN0KCdmb28nKS50by5oYXZlLmxlbmd0aC5iZWxvdyg0KTtcblx0ICAgKiAgICAgZXhwZWN0KFsgMSwgMiwgMyBdKS50by5oYXZlLmxlbmd0aC5iZWxvdyg0KTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGJlbG93XG5cdCAgICogQGFsaWFzIGx0XG5cdCAgICogQGFsaWFzIGxlc3NUaGFuXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGFzc2VydEJlbG93IChuLCBtc2cpIHtcblx0ICAgIGlmIChtc2cpIGZsYWcodGhpcywgJ21lc3NhZ2UnLCBtc2cpO1xuXHQgICAgdmFyIG9iaiA9IGZsYWcodGhpcywgJ29iamVjdCcpO1xuXHQgICAgaWYgKGZsYWcodGhpcywgJ2RvTGVuZ3RoJykpIHtcblx0ICAgICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8uaGF2ZS5wcm9wZXJ0eSgnbGVuZ3RoJyk7XG5cdCAgICAgIHZhciBsZW4gPSBvYmoubGVuZ3RoO1xuXHQgICAgICB0aGlzLmFzc2VydChcblx0ICAgICAgICAgIGxlbiA8IG5cblx0ICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGhhdmUgYSBsZW5ndGggYmVsb3cgI3tleHB9IGJ1dCBnb3QgI3thY3R9J1xuXHQgICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IGhhdmUgYSBsZW5ndGggYmVsb3cgI3tleHB9J1xuXHQgICAgICAgICwgblxuXHQgICAgICAgICwgbGVuXG5cdCAgICAgICk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLmFzc2VydChcblx0ICAgICAgICAgIG9iaiA8IG5cblx0ICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIGJlbG93ICcgKyBuXG5cdCAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSBhdCBsZWFzdCAnICsgblxuXHQgICAgICApO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnYmVsb3cnLCBhc3NlcnRCZWxvdyk7XG5cdCAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnbHQnLCBhc3NlcnRCZWxvdyk7XG5cdCAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnbGVzc1RoYW4nLCBhc3NlcnRCZWxvdyk7XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAubW9zdCh2YWx1ZSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IGlzIGxlc3MgdGhhbiBvciBlcXVhbCB0byBgdmFsdWVgLlxuXHQgICAqXG5cdCAgICogICAgIGV4cGVjdCg1KS50by5iZS5hdC5tb3N0KDUpO1xuXHQgICAqXG5cdCAgICogQ2FuIGFsc28gYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIGBsZW5ndGhgIHRvXG5cdCAgICogYXNzZXJ0IGEgbWF4aW11bSBsZW5ndGguIFRoZSBiZW5lZml0IGJlaW5nIGFcblx0ICAgKiBtb3JlIGluZm9ybWF0aXZlIGVycm9yIG1lc3NhZ2UgdGhhbiBpZiB0aGUgbGVuZ3RoXG5cdCAgICogd2FzIHN1cHBsaWVkIGRpcmVjdGx5LlxuXHQgICAqXG5cdCAgICogICAgIGV4cGVjdCgnZm9vJykudG8uaGF2ZS5sZW5ndGgub2YuYXQubW9zdCg0KTtcblx0ICAgKiAgICAgZXhwZWN0KFsgMSwgMiwgMyBdKS50by5oYXZlLmxlbmd0aC5vZi5hdC5tb3N0KDMpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgbW9zdFxuXHQgICAqIEBhbGlhcyBsdGVcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gYXNzZXJ0TW9zdCAobiwgbXNnKSB7XG5cdCAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcblx0ICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKTtcblx0ICAgIGlmIChmbGFnKHRoaXMsICdkb0xlbmd0aCcpKSB7XG5cdCAgICAgIG5ldyBBc3NlcnRpb24ob2JqLCBtc2cpLnRvLmhhdmUucHJvcGVydHkoJ2xlbmd0aCcpO1xuXHQgICAgICB2YXIgbGVuID0gb2JqLmxlbmd0aDtcblx0ICAgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgICAgICBsZW4gPD0gblxuXHQgICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gaGF2ZSBhIGxlbmd0aCBhdCBtb3N0ICN7ZXhwfSBidXQgZ290ICN7YWN0fSdcblx0ICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGhhdmUgYSBsZW5ndGggYWJvdmUgI3tleHB9J1xuXHQgICAgICAgICwgblxuXHQgICAgICAgICwgbGVuXG5cdCAgICAgICk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLmFzc2VydChcblx0ICAgICAgICAgIG9iaiA8PSBuXG5cdCAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSBhdCBtb3N0ICcgKyBuXG5cdCAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSBhYm92ZSAnICsgblxuXHQgICAgICApO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnbW9zdCcsIGFzc2VydE1vc3QpO1xuXHQgIEFzc2VydGlvbi5hZGRNZXRob2QoJ2x0ZScsIGFzc2VydE1vc3QpO1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLndpdGhpbihzdGFydCwgZmluaXNoKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaXMgd2l0aGluIGEgcmFuZ2UuXG5cdCAgICpcblx0ICAgKiAgICAgZXhwZWN0KDcpLnRvLmJlLndpdGhpbig1LDEwKTtcblx0ICAgKlxuXHQgICAqIENhbiBhbHNvIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBgbGVuZ3RoYCB0b1xuXHQgICAqIGFzc2VydCBhIGxlbmd0aCByYW5nZS4gVGhlIGJlbmVmaXQgYmVpbmcgYVxuXHQgICAqIG1vcmUgaW5mb3JtYXRpdmUgZXJyb3IgbWVzc2FnZSB0aGFuIGlmIHRoZSBsZW5ndGhcblx0ICAgKiB3YXMgc3VwcGxpZWQgZGlyZWN0bHkuXG5cdCAgICpcblx0ICAgKiAgICAgZXhwZWN0KCdmb28nKS50by5oYXZlLmxlbmd0aC53aXRoaW4oMiw0KTtcblx0ICAgKiAgICAgZXhwZWN0KFsgMSwgMiwgMyBdKS50by5oYXZlLmxlbmd0aC53aXRoaW4oMiw0KTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIHdpdGhpblxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGFydCBsb3dlcmJvdW5kIGluY2x1c2l2ZVxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBmaW5pc2ggdXBwZXJib3VuZCBpbmNsdXNpdmVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnd2l0aGluJywgZnVuY3Rpb24gKHN0YXJ0LCBmaW5pc2gsIG1zZykge1xuXHQgICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG5cdCAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0Jylcblx0ICAgICAgLCByYW5nZSA9IHN0YXJ0ICsgJy4uJyArIGZpbmlzaDtcblx0ICAgIGlmIChmbGFnKHRoaXMsICdkb0xlbmd0aCcpKSB7XG5cdCAgICAgIG5ldyBBc3NlcnRpb24ob2JqLCBtc2cpLnRvLmhhdmUucHJvcGVydHkoJ2xlbmd0aCcpO1xuXHQgICAgICB2YXIgbGVuID0gb2JqLmxlbmd0aDtcblx0ICAgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgICAgICBsZW4gPj0gc3RhcnQgJiYgbGVuIDw9IGZpbmlzaFxuXHQgICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gaGF2ZSBhIGxlbmd0aCB3aXRoaW4gJyArIHJhbmdlXG5cdCAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3QgaGF2ZSBhIGxlbmd0aCB3aXRoaW4gJyArIHJhbmdlXG5cdCAgICAgICk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLmFzc2VydChcblx0ICAgICAgICAgIG9iaiA+PSBzdGFydCAmJiBvYmogPD0gZmluaXNoXG5cdCAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSB3aXRoaW4gJyArIHJhbmdlXG5cdCAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3QgYmUgd2l0aGluICcgKyByYW5nZVxuXHQgICAgICApO1xuXHQgICAgfVxuXHQgIH0pO1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLmluc3RhbmNlb2YoY29uc3RydWN0b3IpXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBhbiBpbnN0YW5jZSBvZiBgY29uc3RydWN0b3JgLlxuXHQgICAqXG5cdCAgICogICAgIHZhciBUZWEgPSBmdW5jdGlvbiAobmFtZSkgeyB0aGlzLm5hbWUgPSBuYW1lOyB9XG5cdCAgICogICAgICAgLCBDaGFpID0gbmV3IFRlYSgnY2hhaScpO1xuXHQgICAqXG5cdCAgICogICAgIGV4cGVjdChDaGFpKS50by5iZS5hbi5pbnN0YW5jZW9mKFRlYSk7XG5cdCAgICogICAgIGV4cGVjdChbIDEsIDIsIDMgXSkudG8uYmUuaW5zdGFuY2VvZihBcnJheSk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBpbnN0YW5jZW9mXG5cdCAgICogQHBhcmFtIHtDb25zdHJ1Y3Rvcn0gY29uc3RydWN0b3Jcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG5cdCAgICogQGFsaWFzIGluc3RhbmNlT2Zcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBhc3NlcnRJbnN0YW5jZU9mIChjb25zdHJ1Y3RvciwgbXNnKSB7XG5cdCAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcblx0ICAgIHZhciBuYW1lID0gXy5nZXROYW1lKGNvbnN0cnVjdG9yKTtcblx0ICAgIHRoaXMuYXNzZXJ0KFxuXHQgICAgICAgIGZsYWcodGhpcywgJ29iamVjdCcpIGluc3RhbmNlb2YgY29uc3RydWN0b3Jcblx0ICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSBhbiBpbnN0YW5jZSBvZiAnICsgbmFtZVxuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBiZSBhbiBpbnN0YW5jZSBvZiAnICsgbmFtZVxuXHQgICAgKTtcblx0ICB9O1xuXHRcblx0ICBBc3NlcnRpb24uYWRkTWV0aG9kKCdpbnN0YW5jZW9mJywgYXNzZXJ0SW5zdGFuY2VPZik7XG5cdCAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnaW5zdGFuY2VPZicsIGFzc2VydEluc3RhbmNlT2YpO1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLnByb3BlcnR5KG5hbWUsIFt2YWx1ZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBoYXMgYSBwcm9wZXJ0eSBgbmFtZWAsIG9wdGlvbmFsbHkgYXNzZXJ0aW5nIHRoYXRcblx0ICAgKiB0aGUgdmFsdWUgb2YgdGhhdCBwcm9wZXJ0eSBpcyBzdHJpY3RseSBlcXVhbCB0byAgYHZhbHVlYC5cblx0ICAgKiBJZiB0aGUgYGRlZXBgIGZsYWcgaXMgc2V0LCB5b3UgY2FuIHVzZSBkb3QtIGFuZCBicmFja2V0LW5vdGF0aW9uIGZvciBkZWVwXG5cdCAgICogcmVmZXJlbmNlcyBpbnRvIG9iamVjdHMgYW5kIGFycmF5cy5cblx0ICAgKlxuXHQgICAqICAgICAvLyBzaW1wbGUgcmVmZXJlbmNpbmdcblx0ICAgKiAgICAgdmFyIG9iaiA9IHsgZm9vOiAnYmFyJyB9O1xuXHQgICAqICAgICBleHBlY3Qob2JqKS50by5oYXZlLnByb3BlcnR5KCdmb28nKTtcblx0ICAgKiAgICAgZXhwZWN0KG9iaikudG8uaGF2ZS5wcm9wZXJ0eSgnZm9vJywgJ2JhcicpO1xuXHQgICAqXG5cdCAgICogICAgIC8vIGRlZXAgcmVmZXJlbmNpbmdcblx0ICAgKiAgICAgdmFyIGRlZXBPYmogPSB7XG5cdCAgICogICAgICAgICBncmVlbjogeyB0ZWE6ICdtYXRjaGEnIH1cblx0ICAgKiAgICAgICAsIHRlYXM6IFsgJ2NoYWknLCAnbWF0Y2hhJywgeyB0ZWE6ICdrb25hY2hhJyB9IF1cblx0ICAgKiAgICAgfTtcblx0ICAgKlxuXHQgICAqICAgICBleHBlY3QoZGVlcE9iaikudG8uaGF2ZS5kZWVwLnByb3BlcnR5KCdncmVlbi50ZWEnLCAnbWF0Y2hhJyk7XG5cdCAgICogICAgIGV4cGVjdChkZWVwT2JqKS50by5oYXZlLmRlZXAucHJvcGVydHkoJ3RlYXNbMV0nLCAnbWF0Y2hhJyk7XG5cdCAgICogICAgIGV4cGVjdChkZWVwT2JqKS50by5oYXZlLmRlZXAucHJvcGVydHkoJ3RlYXNbMl0udGVhJywgJ2tvbmFjaGEnKTtcblx0ICAgKlxuXHQgICAqIFlvdSBjYW4gYWxzbyB1c2UgYW4gYXJyYXkgYXMgdGhlIHN0YXJ0aW5nIHBvaW50IG9mIGEgYGRlZXAucHJvcGVydHlgXG5cdCAgICogYXNzZXJ0aW9uLCBvciB0cmF2ZXJzZSBuZXN0ZWQgYXJyYXlzLlxuXHQgICAqXG5cdCAgICogICAgIHZhciBhcnIgPSBbXG5cdCAgICogICAgICAgICBbICdjaGFpJywgJ21hdGNoYScsICdrb25hY2hhJyBdXG5cdCAgICogICAgICAgLCBbIHsgdGVhOiAnY2hhaScgfVxuXHQgICAqICAgICAgICAgLCB7IHRlYTogJ21hdGNoYScgfVxuXHQgICAqICAgICAgICAgLCB7IHRlYTogJ2tvbmFjaGEnIH0gXVxuXHQgICAqICAgICBdO1xuXHQgICAqXG5cdCAgICogICAgIGV4cGVjdChhcnIpLnRvLmhhdmUuZGVlcC5wcm9wZXJ0eSgnWzBdWzFdJywgJ21hdGNoYScpO1xuXHQgICAqICAgICBleHBlY3QoYXJyKS50by5oYXZlLmRlZXAucHJvcGVydHkoJ1sxXVsyXS50ZWEnLCAna29uYWNoYScpO1xuXHQgICAqXG5cdCAgICogRnVydGhlcm1vcmUsIGBwcm9wZXJ0eWAgY2hhbmdlcyB0aGUgc3ViamVjdCBvZiB0aGUgYXNzZXJ0aW9uXG5cdCAgICogdG8gYmUgdGhlIHZhbHVlIG9mIHRoYXQgcHJvcGVydHkgZnJvbSB0aGUgb3JpZ2luYWwgb2JqZWN0LiBUaGlzXG5cdCAgICogcGVybWl0cyBmb3IgZnVydGhlciBjaGFpbmFibGUgYXNzZXJ0aW9ucyBvbiB0aGF0IHByb3BlcnR5LlxuXHQgICAqXG5cdCAgICogICAgIGV4cGVjdChvYmopLnRvLmhhdmUucHJvcGVydHkoJ2ZvbycpXG5cdCAgICogICAgICAgLnRoYXQuaXMuYSgnc3RyaW5nJyk7XG5cdCAgICogICAgIGV4cGVjdChkZWVwT2JqKS50by5oYXZlLnByb3BlcnR5KCdncmVlbicpXG5cdCAgICogICAgICAgLnRoYXQuaXMuYW4oJ29iamVjdCcpXG5cdCAgICogICAgICAgLnRoYXQuZGVlcC5lcXVhbHMoeyB0ZWE6ICdtYXRjaGEnIH0pO1xuXHQgICAqICAgICBleHBlY3QoZGVlcE9iaikudG8uaGF2ZS5wcm9wZXJ0eSgndGVhcycpXG5cdCAgICogICAgICAgLnRoYXQuaXMuYW4oJ2FycmF5Jylcblx0ICAgKiAgICAgICAud2l0aC5kZWVwLnByb3BlcnR5KCdbMl0nKVxuXHQgICAqICAgICAgICAgLnRoYXQuZGVlcC5lcXVhbHMoeyB0ZWE6ICdrb25hY2hhJyB9KTtcblx0ICAgKlxuXHQgICAqIE5vdGUgdGhhdCBkb3RzIGFuZCBicmFja2V0IGluIGBuYW1lYCBtdXN0IGJlIGJhY2tzbGFzaC1lc2NhcGVkIHdoZW5cblx0ICAgKiB0aGUgYGRlZXBgIGZsYWcgaXMgc2V0LCB3aGlsZSB0aGV5IG11c3QgTk9UIGJlIGVzY2FwZWQgd2hlbiB0aGUgYGRlZXBgXG5cdCAgICogZmxhZyBpcyBub3Qgc2V0LlxuXHQgICAqXG5cdCAgICogICAgIC8vIHNpbXBsZSByZWZlcmVuY2luZ1xuXHQgICAqICAgICB2YXIgY3NzID0geyAnLmxpbmtbdGFyZ2V0XSc6IDQyIH07XG5cdCAgICogICAgIGV4cGVjdChjc3MpLnRvLmhhdmUucHJvcGVydHkoJy5saW5rW3RhcmdldF0nLCA0Mik7XG5cdCAgICpcblx0ICAgKiAgICAgLy8gZGVlcCByZWZlcmVuY2luZ1xuXHQgICAqICAgICB2YXIgZGVlcENzcyA9IHsgJy5saW5rJzogeyAnW3RhcmdldF0nOiA0MiB9fTtcblx0ICAgKiAgICAgZXhwZWN0KGRlZXBDc3MpLnRvLmhhdmUuZGVlcC5wcm9wZXJ0eSgnXFxcXC5saW5rLlxcXFxbdGFyZ2V0XFxcXF0nLCA0Mik7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBwcm9wZXJ0eVxuXHQgICAqIEBhbGlhcyBkZWVwLnByb3BlcnR5XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0ICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZSAob3B0aW9uYWwpXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuXHQgICAqIEByZXR1cm5zIHZhbHVlIG9mIHByb3BlcnR5IGZvciBjaGFpbmluZ1xuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIEFzc2VydGlvbi5hZGRNZXRob2QoJ3Byb3BlcnR5JywgZnVuY3Rpb24gKG5hbWUsIHZhbCwgbXNnKSB7XG5cdCAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcblx0XG5cdCAgICB2YXIgaXNEZWVwID0gISFmbGFnKHRoaXMsICdkZWVwJylcblx0ICAgICAgLCBkZXNjcmlwdG9yID0gaXNEZWVwID8gJ2RlZXAgcHJvcGVydHkgJyA6ICdwcm9wZXJ0eSAnXG5cdCAgICAgICwgbmVnYXRlID0gZmxhZyh0aGlzLCAnbmVnYXRlJylcblx0ICAgICAgLCBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKVxuXHQgICAgICAsIHBhdGhJbmZvID0gaXNEZWVwID8gXy5nZXRQYXRoSW5mbyhuYW1lLCBvYmopIDogbnVsbFxuXHQgICAgICAsIGhhc1Byb3BlcnR5ID0gaXNEZWVwXG5cdCAgICAgICAgPyBwYXRoSW5mby5leGlzdHNcblx0ICAgICAgICA6IF8uaGFzUHJvcGVydHkobmFtZSwgb2JqKVxuXHQgICAgICAsIHZhbHVlID0gaXNEZWVwXG5cdCAgICAgICAgPyBwYXRoSW5mby52YWx1ZVxuXHQgICAgICAgIDogb2JqW25hbWVdO1xuXHRcblx0ICAgIGlmIChuZWdhdGUgJiYgYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcblx0ICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdmFsdWUpIHtcblx0ICAgICAgICBtc2cgPSAobXNnICE9IG51bGwpID8gbXNnICsgJzogJyA6ICcnO1xuXHQgICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cgKyBfLmluc3BlY3Qob2JqKSArICcgaGFzIG5vICcgKyBkZXNjcmlwdG9yICsgXy5pbnNwZWN0KG5hbWUpKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgICAgICBoYXNQcm9wZXJ0eVxuXHQgICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gaGF2ZSBhICcgKyBkZXNjcmlwdG9yICsgXy5pbnNwZWN0KG5hbWUpXG5cdCAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3QgaGF2ZSAnICsgZGVzY3JpcHRvciArIF8uaW5zcGVjdChuYW1lKSk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG5cdCAgICAgIHRoaXMuYXNzZXJ0KFxuXHQgICAgICAgICAgdmFsID09PSB2YWx1ZVxuXHQgICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gaGF2ZSBhICcgKyBkZXNjcmlwdG9yICsgXy5pbnNwZWN0KG5hbWUpICsgJyBvZiAje2V4cH0sIGJ1dCBnb3QgI3thY3R9J1xuXHQgICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IGhhdmUgYSAnICsgZGVzY3JpcHRvciArIF8uaW5zcGVjdChuYW1lKSArICcgb2YgI3thY3R9J1xuXHQgICAgICAgICwgdmFsXG5cdCAgICAgICAgLCB2YWx1ZVxuXHQgICAgICApO1xuXHQgICAgfVxuXHRcblx0ICAgIGZsYWcodGhpcywgJ29iamVjdCcsIHZhbHVlKTtcblx0ICB9KTtcblx0XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAub3duUHJvcGVydHkobmFtZSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IGhhcyBhbiBvd24gcHJvcGVydHkgYG5hbWVgLlxuXHQgICAqXG5cdCAgICogICAgIGV4cGVjdCgndGVzdCcpLnRvLmhhdmUub3duUHJvcGVydHkoJ2xlbmd0aCcpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgb3duUHJvcGVydHlcblx0ICAgKiBAYWxpYXMgaGF2ZU93blByb3BlcnR5XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gYXNzZXJ0T3duUHJvcGVydHkgKG5hbWUsIG1zZykge1xuXHQgICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG5cdCAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG5cdCAgICB0aGlzLmFzc2VydChcblx0ICAgICAgICBvYmouaGFzT3duUHJvcGVydHkobmFtZSlcblx0ICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBoYXZlIG93biBwcm9wZXJ0eSAnICsgXy5pbnNwZWN0KG5hbWUpXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IGhhdmUgb3duIHByb3BlcnR5ICcgKyBfLmluc3BlY3QobmFtZSlcblx0ICAgICk7XG5cdCAgfVxuXHRcblx0ICBBc3NlcnRpb24uYWRkTWV0aG9kKCdvd25Qcm9wZXJ0eScsIGFzc2VydE93blByb3BlcnR5KTtcblx0ICBBc3NlcnRpb24uYWRkTWV0aG9kKCdoYXZlT3duUHJvcGVydHknLCBhc3NlcnRPd25Qcm9wZXJ0eSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAub3duUHJvcGVydHlEZXNjcmlwdG9yKG5hbWVbLCBkZXNjcmlwdG9yWywgbWVzc2FnZV1dKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaGFzIGFuIG93biBwcm9wZXJ0eSBkZXNjcmlwdG9yIGBuYW1lYCwgdGhhdCBvcHRpb25hbGx5IG1hdGNoZXMgYGRlc2NyaXB0b3JgLlxuXHQgICAqXG5cdCAgICogICAgIGV4cGVjdCgndGVzdCcpLnRvLmhhdmUub3duUHJvcGVydHlEZXNjcmlwdG9yKCdsZW5ndGgnKTtcblx0ICAgKiAgICAgZXhwZWN0KCd0ZXN0JykudG8uaGF2ZS5vd25Qcm9wZXJ0eURlc2NyaXB0b3IoJ2xlbmd0aCcsIHsgZW51bWVyYWJsZTogZmFsc2UsIGNvbmZpZ3VyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiBmYWxzZSwgdmFsdWU6IDQgfSk7XG5cdCAgICogICAgIGV4cGVjdCgndGVzdCcpLm5vdC50by5oYXZlLm93blByb3BlcnR5RGVzY3JpcHRvcignbGVuZ3RoJywgeyBlbnVtZXJhYmxlOiBmYWxzZSwgY29uZmlndXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IGZhbHNlLCB2YWx1ZTogMyB9KTtcblx0ICAgKiAgICAgZXhwZWN0KCd0ZXN0Jykub3duUHJvcGVydHlEZXNjcmlwdG9yKCdsZW5ndGgnKS50by5oYXZlLnByb3BlcnR5KCdlbnVtZXJhYmxlJywgZmFsc2UpO1xuXHQgICAqICAgICBleHBlY3QoJ3Rlc3QnKS5vd25Qcm9wZXJ0eURlc2NyaXB0b3IoJ2xlbmd0aCcpLnRvLmhhdmUua2V5cygndmFsdWUnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIG93blByb3BlcnR5RGVzY3JpcHRvclxuXHQgICAqIEBhbGlhcyBoYXZlT3duUHJvcGVydHlEZXNjcmlwdG9yXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gZGVzY3JpcHRvciBfb3B0aW9uYWxfXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGFzc2VydE93blByb3BlcnR5RGVzY3JpcHRvciAobmFtZSwgZGVzY3JpcHRvciwgbXNnKSB7XG5cdCAgICBpZiAodHlwZW9mIGRlc2NyaXB0b3IgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIG1zZyA9IGRlc2NyaXB0b3I7XG5cdCAgICAgIGRlc2NyaXB0b3IgPSBudWxsO1xuXHQgICAgfVxuXHQgICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG5cdCAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG5cdCAgICB2YXIgYWN0dWFsRGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoT2JqZWN0KG9iaiksIG5hbWUpO1xuXHQgICAgaWYgKGFjdHVhbERlc2NyaXB0b3IgJiYgZGVzY3JpcHRvcikge1xuXHQgICAgICB0aGlzLmFzc2VydChcblx0ICAgICAgICAgIF8uZXFsKGRlc2NyaXB0b3IsIGFjdHVhbERlc2NyaXB0b3IpXG5cdCAgICAgICAgLCAnZXhwZWN0ZWQgdGhlIG93biBwcm9wZXJ0eSBkZXNjcmlwdG9yIGZvciAnICsgXy5pbnNwZWN0KG5hbWUpICsgJyBvbiAje3RoaXN9IHRvIG1hdGNoICcgKyBfLmluc3BlY3QoZGVzY3JpcHRvcikgKyAnLCBnb3QgJyArIF8uaW5zcGVjdChhY3R1YWxEZXNjcmlwdG9yKVxuXHQgICAgICAgICwgJ2V4cGVjdGVkIHRoZSBvd24gcHJvcGVydHkgZGVzY3JpcHRvciBmb3IgJyArIF8uaW5zcGVjdChuYW1lKSArICcgb24gI3t0aGlzfSB0byBub3QgbWF0Y2ggJyArIF8uaW5zcGVjdChkZXNjcmlwdG9yKVxuXHQgICAgICAgICwgZGVzY3JpcHRvclxuXHQgICAgICAgICwgYWN0dWFsRGVzY3JpcHRvclxuXHQgICAgICAgICwgdHJ1ZVxuXHQgICAgICApO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgICAgICBhY3R1YWxEZXNjcmlwdG9yXG5cdCAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBoYXZlIGFuIG93biBwcm9wZXJ0eSBkZXNjcmlwdG9yIGZvciAnICsgXy5pbnNwZWN0KG5hbWUpXG5cdCAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3QgaGF2ZSBhbiBvd24gcHJvcGVydHkgZGVzY3JpcHRvciBmb3IgJyArIF8uaW5zcGVjdChuYW1lKVxuXHQgICAgICApO1xuXHQgICAgfVxuXHQgICAgZmxhZyh0aGlzLCAnb2JqZWN0JywgYWN0dWFsRGVzY3JpcHRvcik7XG5cdCAgfVxuXHRcblx0ICBBc3NlcnRpb24uYWRkTWV0aG9kKCdvd25Qcm9wZXJ0eURlc2NyaXB0b3InLCBhc3NlcnRPd25Qcm9wZXJ0eURlc2NyaXB0b3IpO1xuXHQgIEFzc2VydGlvbi5hZGRNZXRob2QoJ2hhdmVPd25Qcm9wZXJ0eURlc2NyaXB0b3InLCBhc3NlcnRPd25Qcm9wZXJ0eURlc2NyaXB0b3IpO1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLmxlbmd0aFxuXHQgICAqXG5cdCAgICogU2V0cyB0aGUgYGRvTGVuZ3RoYCBmbGFnIGxhdGVyIHVzZWQgYXMgYSBjaGFpbiBwcmVjdXJzb3IgdG8gYSB2YWx1ZVxuXHQgICAqIGNvbXBhcmlzb24gZm9yIHRoZSBgbGVuZ3RoYCBwcm9wZXJ0eS5cblx0ICAgKlxuXHQgICAqICAgICBleHBlY3QoJ2ZvbycpLnRvLmhhdmUubGVuZ3RoLmFib3ZlKDIpO1xuXHQgICAqICAgICBleHBlY3QoWyAxLCAyLCAzIF0pLnRvLmhhdmUubGVuZ3RoLmFib3ZlKDIpO1xuXHQgICAqICAgICBleHBlY3QoJ2ZvbycpLnRvLmhhdmUubGVuZ3RoLmJlbG93KDQpO1xuXHQgICAqICAgICBleHBlY3QoWyAxLCAyLCAzIF0pLnRvLmhhdmUubGVuZ3RoLmJlbG93KDQpO1xuXHQgICAqICAgICBleHBlY3QoJ2ZvbycpLnRvLmhhdmUubGVuZ3RoLndpdGhpbigyLDQpO1xuXHQgICAqICAgICBleHBlY3QoWyAxLCAyLCAzIF0pLnRvLmhhdmUubGVuZ3RoLndpdGhpbigyLDQpO1xuXHQgICAqXG5cdCAgICogKkRlcHJlY2F0aW9uIG5vdGljZToqIFVzaW5nIGBsZW5ndGhgIGFzIGFuIGFzc2VydGlvbiB3aWxsIGJlIGRlcHJlY2F0ZWRcblx0ICAgKiBpbiB2ZXJzaW9uIDIuNC4wIGFuZCByZW1vdmVkIGluIDMuMC4wLiBDb2RlIHVzaW5nIHRoZSBvbGQgc3R5bGUgb2Zcblx0ICAgKiBhc3NlcnRpbmcgZm9yIGBsZW5ndGhgIHByb3BlcnR5IHZhbHVlIHVzaW5nIGBsZW5ndGgodmFsdWUpYCBzaG91bGQgYmVcblx0ICAgKiBzd2l0Y2hlZCB0byB1c2UgYGxlbmd0aE9mKHZhbHVlKWAgaW5zdGVhZC5cblx0ICAgKlxuXHQgICAqIEBuYW1lIGxlbmd0aFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAubGVuZ3RoT2YodmFsdWVbLCBtZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0J3MgYGxlbmd0aGAgcHJvcGVydHkgaGFzXG5cdCAgICogdGhlIGV4cGVjdGVkIHZhbHVlLlxuXHQgICAqXG5cdCAgICogICAgIGV4cGVjdChbIDEsIDIsIDNdKS50by5oYXZlLmxlbmd0aE9mKDMpO1xuXHQgICAqICAgICBleHBlY3QoJ2Zvb2JhcicpLnRvLmhhdmUubGVuZ3RoT2YoNik7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBsZW5ndGhPZlxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBsZW5ndGhcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gYXNzZXJ0TGVuZ3RoQ2hhaW4gKCkge1xuXHQgICAgZmxhZyh0aGlzLCAnZG9MZW5ndGgnLCB0cnVlKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGFzc2VydExlbmd0aCAobiwgbXNnKSB7XG5cdCAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcblx0ICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKTtcblx0ICAgIG5ldyBBc3NlcnRpb24ob2JqLCBtc2cpLnRvLmhhdmUucHJvcGVydHkoJ2xlbmd0aCcpO1xuXHQgICAgdmFyIGxlbiA9IG9iai5sZW5ndGg7XG5cdFxuXHQgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgICAgbGVuID09IG5cblx0ICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBoYXZlIGEgbGVuZ3RoIG9mICN7ZXhwfSBidXQgZ290ICN7YWN0fSdcblx0ICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3QgaGF2ZSBhIGxlbmd0aCBvZiAje2FjdH0nXG5cdCAgICAgICwgblxuXHQgICAgICAsIGxlblxuXHQgICAgKTtcblx0ICB9XG5cdFxuXHQgIEFzc2VydGlvbi5hZGRDaGFpbmFibGVNZXRob2QoJ2xlbmd0aCcsIGFzc2VydExlbmd0aCwgYXNzZXJ0TGVuZ3RoQ2hhaW4pO1xuXHQgIEFzc2VydGlvbi5hZGRNZXRob2QoJ2xlbmd0aE9mJywgYXNzZXJ0TGVuZ3RoKTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5tYXRjaChyZWdleHApXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBtYXRjaGVzIGEgcmVndWxhciBleHByZXNzaW9uLlxuXHQgICAqXG5cdCAgICogICAgIGV4cGVjdCgnZm9vYmFyJykudG8ubWF0Y2goL15mb28vKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIG1hdGNoXG5cdCAgICogQGFsaWFzIG1hdGNoZXNcblx0ICAgKiBAcGFyYW0ge1JlZ0V4cH0gUmVndWxhckV4cHJlc3Npb25cblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0ICBmdW5jdGlvbiBhc3NlcnRNYXRjaChyZSwgbXNnKSB7XG5cdCAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcblx0ICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKTtcblx0ICAgIHRoaXMuYXNzZXJ0KFxuXHQgICAgICAgIHJlLmV4ZWMob2JqKVxuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG1hdGNoICcgKyByZVxuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IG5vdCB0byBtYXRjaCAnICsgcmVcblx0ICAgICk7XG5cdCAgfVxuXHRcblx0ICBBc3NlcnRpb24uYWRkTWV0aG9kKCdtYXRjaCcsIGFzc2VydE1hdGNoKTtcblx0ICBBc3NlcnRpb24uYWRkTWV0aG9kKCdtYXRjaGVzJywgYXNzZXJ0TWF0Y2gpO1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLnN0cmluZyhzdHJpbmcpXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgdGhlIHN0cmluZyB0YXJnZXQgY29udGFpbnMgYW5vdGhlciBzdHJpbmcuXG5cdCAgICpcblx0ICAgKiAgICAgZXhwZWN0KCdmb29iYXInKS50by5oYXZlLnN0cmluZygnYmFyJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBzdHJpbmdcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gc3RyaW5nXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIEFzc2VydGlvbi5hZGRNZXRob2QoJ3N0cmluZycsIGZ1bmN0aW9uIChzdHIsIG1zZykge1xuXHQgICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG5cdCAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKG9iaiwgbXNnKS5pcy5hKCdzdHJpbmcnKTtcblx0XG5cdCAgICB0aGlzLmFzc2VydChcblx0ICAgICAgICB+b2JqLmluZGV4T2Yoc3RyKVxuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGNvbnRhaW4gJyArIF8uaW5zcGVjdChzdHIpXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IGNvbnRhaW4gJyArIF8uaW5zcGVjdChzdHIpXG5cdCAgICApO1xuXHQgIH0pO1xuXHRcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5rZXlzKGtleTEsIFtrZXkyXSwgWy4uLl0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBjb250YWlucyBhbnkgb3IgYWxsIG9mIHRoZSBwYXNzZWQtaW4ga2V5cy5cblx0ICAgKiBVc2UgaW4gY29tYmluYXRpb24gd2l0aCBgYW55YCwgYGFsbGAsIGBjb250YWluc2AsIG9yIGBoYXZlYCB3aWxsIGFmZmVjdFxuXHQgICAqIHdoYXQgd2lsbCBwYXNzLlxuXHQgICAqXG5cdCAgICogV2hlbiB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggYGFueWAsIGF0IGxlYXN0IG9uZSBrZXkgdGhhdCBpcyBwYXNzZWRcblx0ICAgKiBpbiBtdXN0IGV4aXN0IGluIHRoZSB0YXJnZXQgb2JqZWN0LiBUaGlzIGlzIHJlZ2FyZGxlc3Mgd2hldGhlciBvciBub3Rcblx0ICAgKiB0aGUgYGhhdmVgIG9yIGBjb250YWluYCBxdWFsaWZpZXJzIGFyZSB1c2VkLiBOb3RlLCBlaXRoZXIgYGFueWAgb3IgYGFsbGBcblx0ICAgKiBzaG91bGQgYmUgdXNlZCBpbiB0aGUgYXNzZXJ0aW9uLiBJZiBuZWl0aGVyIGFyZSB1c2VkLCB0aGUgYXNzZXJ0aW9uIGlzXG5cdCAgICogZGVmYXVsdGVkIHRvIGBhbGxgLlxuXHQgICAqXG5cdCAgICogV2hlbiBib3RoIGBhbGxgIGFuZCBgY29udGFpbmAgYXJlIHVzZWQsIHRoZSB0YXJnZXQgb2JqZWN0IG11c3QgaGF2ZSBhdFxuXHQgICAqIGxlYXN0IGFsbCBvZiB0aGUgcGFzc2VkLWluIGtleXMgYnV0IG1heSBoYXZlIG1vcmUga2V5cyBub3QgbGlzdGVkLlxuXHQgICAqXG5cdCAgICogV2hlbiBib3RoIGBhbGxgIGFuZCBgaGF2ZWAgYXJlIHVzZWQsIHRoZSB0YXJnZXQgb2JqZWN0IG11c3QgYm90aCBjb250YWluXG5cdCAgICogYWxsIG9mIHRoZSBwYXNzZWQtaW4ga2V5cyBBTkQgdGhlIG51bWJlciBvZiBrZXlzIGluIHRoZSB0YXJnZXQgb2JqZWN0IG11c3Rcblx0ICAgKiBtYXRjaCB0aGUgbnVtYmVyIG9mIGtleXMgcGFzc2VkIGluIChpbiBvdGhlciB3b3JkcywgYSB0YXJnZXQgb2JqZWN0IG11c3Rcblx0ICAgKiBoYXZlIGFsbCBhbmQgb25seSBhbGwgb2YgdGhlIHBhc3NlZC1pbiBrZXlzKS5cblx0ICAgKlxuXHQgICAqICAgICBleHBlY3QoeyBmb286IDEsIGJhcjogMiB9KS50by5oYXZlLmFueS5rZXlzKCdmb28nLCAnYmF6Jyk7XG5cdCAgICogICAgIGV4cGVjdCh7IGZvbzogMSwgYmFyOiAyIH0pLnRvLmhhdmUuYW55LmtleXMoJ2ZvbycpO1xuXHQgICAqICAgICBleHBlY3QoeyBmb286IDEsIGJhcjogMiB9KS50by5jb250YWluLmFueS5rZXlzKCdiYXInLCAnYmF6Jyk7XG5cdCAgICogICAgIGV4cGVjdCh7IGZvbzogMSwgYmFyOiAyIH0pLnRvLmNvbnRhaW4uYW55LmtleXMoWydmb28nXSk7XG5cdCAgICogICAgIGV4cGVjdCh7IGZvbzogMSwgYmFyOiAyIH0pLnRvLmNvbnRhaW4uYW55LmtleXMoeydmb28nOiA2fSk7XG5cdCAgICogICAgIGV4cGVjdCh7IGZvbzogMSwgYmFyOiAyIH0pLnRvLmhhdmUuYWxsLmtleXMoWydiYXInLCAnZm9vJ10pO1xuXHQgICAqICAgICBleHBlY3QoeyBmb286IDEsIGJhcjogMiB9KS50by5oYXZlLmFsbC5rZXlzKHsnYmFyJzogNiwgJ2Zvbyc6IDd9KTtcblx0ICAgKiAgICAgZXhwZWN0KHsgZm9vOiAxLCBiYXI6IDIsIGJhejogMyB9KS50by5jb250YWluLmFsbC5rZXlzKFsnYmFyJywgJ2ZvbyddKTtcblx0ICAgKiAgICAgZXhwZWN0KHsgZm9vOiAxLCBiYXI6IDIsIGJhejogMyB9KS50by5jb250YWluLmFsbC5rZXlzKHsnYmFyJzogNn0pO1xuXHQgICAqXG5cdCAgICpcblx0ICAgKiBAbmFtZSBrZXlzXG5cdCAgICogQGFsaWFzIGtleVxuXHQgICAqIEBwYXJhbSB7Li4uU3RyaW5nfEFycmF5fE9iamVjdH0ga2V5c1xuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGFzc2VydEtleXMgKGtleXMpIHtcblx0ICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKVxuXHQgICAgICAsIHN0clxuXHQgICAgICAsIG9rID0gdHJ1ZVxuXHQgICAgICAsIG1peGVkQXJnc01zZyA9ICdrZXlzIG11c3QgYmUgZ2l2ZW4gc2luZ2xlIGFyZ3VtZW50IG9mIEFycmF5fE9iamVjdHxTdHJpbmcsIG9yIG11bHRpcGxlIFN0cmluZyBhcmd1bWVudHMnO1xuXHRcblx0ICAgIHN3aXRjaCAoXy50eXBlKGtleXMpKSB7XG5cdCAgICAgIGNhc2UgXCJhcnJheVwiOlxuXHQgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkgdGhyb3cgKG5ldyBFcnJvcihtaXhlZEFyZ3NNc2cpKTtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgY2FzZSBcIm9iamVjdFwiOlxuXHQgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkgdGhyb3cgKG5ldyBFcnJvcihtaXhlZEFyZ3NNc2cpKTtcblx0ICAgICAgICBrZXlzID0gT2JqZWN0LmtleXMoa2V5cyk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAga2V5cyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKCFrZXlzLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKCdrZXlzIHJlcXVpcmVkJyk7XG5cdFxuXHQgICAgdmFyIGFjdHVhbCA9IE9iamVjdC5rZXlzKG9iailcblx0ICAgICAgLCBleHBlY3RlZCA9IGtleXNcblx0ICAgICAgLCBsZW4gPSBrZXlzLmxlbmd0aFxuXHQgICAgICAsIGFueSA9IGZsYWcodGhpcywgJ2FueScpXG5cdCAgICAgICwgYWxsID0gZmxhZyh0aGlzLCAnYWxsJyk7XG5cdFxuXHQgICAgaWYgKCFhbnkgJiYgIWFsbCkge1xuXHQgICAgICBhbGwgPSB0cnVlO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIEhhcyBhbnlcblx0ICAgIGlmIChhbnkpIHtcblx0ICAgICAgdmFyIGludGVyc2VjdGlvbiA9IGV4cGVjdGVkLmZpbHRlcihmdW5jdGlvbihrZXkpIHtcblx0ICAgICAgICByZXR1cm4gfmFjdHVhbC5pbmRleE9mKGtleSk7XG5cdCAgICAgIH0pO1xuXHQgICAgICBvayA9IGludGVyc2VjdGlvbi5sZW5ndGggPiAwO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIEhhcyBhbGxcblx0ICAgIGlmIChhbGwpIHtcblx0ICAgICAgb2sgPSBrZXlzLmV2ZXJ5KGZ1bmN0aW9uKGtleSl7XG5cdCAgICAgICAgcmV0dXJuIH5hY3R1YWwuaW5kZXhPZihrZXkpO1xuXHQgICAgICB9KTtcblx0ICAgICAgaWYgKCFmbGFnKHRoaXMsICduZWdhdGUnKSAmJiAhZmxhZyh0aGlzLCAnY29udGFpbnMnKSkge1xuXHQgICAgICAgIG9rID0gb2sgJiYga2V5cy5sZW5ndGggPT0gYWN0dWFsLmxlbmd0aDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIC8vIEtleSBzdHJpbmdcblx0ICAgIGlmIChsZW4gPiAxKSB7XG5cdCAgICAgIGtleXMgPSBrZXlzLm1hcChmdW5jdGlvbihrZXkpe1xuXHQgICAgICAgIHJldHVybiBfLmluc3BlY3Qoa2V5KTtcblx0ICAgICAgfSk7XG5cdCAgICAgIHZhciBsYXN0ID0ga2V5cy5wb3AoKTtcblx0ICAgICAgaWYgKGFsbCkge1xuXHQgICAgICAgIHN0ciA9IGtleXMuam9pbignLCAnKSArICcsIGFuZCAnICsgbGFzdDtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoYW55KSB7XG5cdCAgICAgICAgc3RyID0ga2V5cy5qb2luKCcsICcpICsgJywgb3IgJyArIGxhc3Q7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHN0ciA9IF8uaW5zcGVjdChrZXlzWzBdKTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBGb3JtXG5cdCAgICBzdHIgPSAobGVuID4gMSA/ICdrZXlzICcgOiAna2V5ICcpICsgc3RyO1xuXHRcblx0ICAgIC8vIEhhdmUgLyBpbmNsdWRlXG5cdCAgICBzdHIgPSAoZmxhZyh0aGlzLCAnY29udGFpbnMnKSA/ICdjb250YWluICcgOiAnaGF2ZSAnKSArIHN0cjtcblx0XG5cdCAgICAvLyBBc3NlcnRpb25cblx0ICAgIHRoaXMuYXNzZXJ0KFxuXHQgICAgICAgIG9rXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gJyArIHN0clxuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCAnICsgc3RyXG5cdCAgICAgICwgZXhwZWN0ZWQuc2xpY2UoMCkuc29ydCgpXG5cdCAgICAgICwgYWN0dWFsLnNvcnQoKVxuXHQgICAgICAsIHRydWVcblx0ICAgICk7XG5cdCAgfVxuXHRcblx0ICBBc3NlcnRpb24uYWRkTWV0aG9kKCdrZXlzJywgYXNzZXJ0S2V5cyk7XG5cdCAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgna2V5JywgYXNzZXJ0S2V5cyk7XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAudGhyb3coY29uc3RydWN0b3IpXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgdGhlIGZ1bmN0aW9uIHRhcmdldCB3aWxsIHRocm93IGEgc3BlY2lmaWMgZXJyb3IsIG9yIHNwZWNpZmljIHR5cGUgb2YgZXJyb3Jcblx0ICAgKiAoYXMgZGV0ZXJtaW5lZCB1c2luZyBgaW5zdGFuY2VvZmApLCBvcHRpb25hbGx5IHdpdGggYSBSZWdFeHAgb3Igc3RyaW5nIGluY2x1c2lvbiB0ZXN0XG5cdCAgICogZm9yIHRoZSBlcnJvcidzIG1lc3NhZ2UuXG5cdCAgICpcblx0ICAgKiAgICAgdmFyIGVyciA9IG5ldyBSZWZlcmVuY2VFcnJvcignVGhpcyBpcyBhIGJhZCBmdW5jdGlvbi4nKTtcblx0ICAgKiAgICAgdmFyIGZuID0gZnVuY3Rpb24gKCkgeyB0aHJvdyBlcnI7IH1cblx0ICAgKiAgICAgZXhwZWN0KGZuKS50by50aHJvdyhSZWZlcmVuY2VFcnJvcik7XG5cdCAgICogICAgIGV4cGVjdChmbikudG8udGhyb3coRXJyb3IpO1xuXHQgICAqICAgICBleHBlY3QoZm4pLnRvLnRocm93KC9iYWQgZnVuY3Rpb24vKTtcblx0ICAgKiAgICAgZXhwZWN0KGZuKS50by5ub3QudGhyb3coJ2dvb2QgZnVuY3Rpb24nKTtcblx0ICAgKiAgICAgZXhwZWN0KGZuKS50by50aHJvdyhSZWZlcmVuY2VFcnJvciwgL2JhZCBmdW5jdGlvbi8pO1xuXHQgICAqICAgICBleHBlY3QoZm4pLnRvLnRocm93KGVycik7XG5cdCAgICpcblx0ICAgKiBQbGVhc2Ugbm90ZSB0aGF0IHdoZW4gYSB0aHJvdyBleHBlY3RhdGlvbiBpcyBuZWdhdGVkLCBpdCB3aWxsIGNoZWNrIGVhY2hcblx0ICAgKiBwYXJhbWV0ZXIgaW5kZXBlbmRlbnRseSwgc3RhcnRpbmcgd2l0aCBlcnJvciBjb25zdHJ1Y3RvciB0eXBlLiBUaGUgYXBwcm9wcmlhdGUgd2F5XG5cdCAgICogdG8gY2hlY2sgZm9yIHRoZSBleGlzdGVuY2Ugb2YgYSB0eXBlIG9mIGVycm9yIGJ1dCBmb3IgYSBtZXNzYWdlIHRoYXQgZG9lcyBub3QgbWF0Y2hcblx0ICAgKiBpcyB0byB1c2UgYGFuZGAuXG5cdCAgICpcblx0ICAgKiAgICAgZXhwZWN0KGZuKS50by50aHJvdyhSZWZlcmVuY2VFcnJvcilcblx0ICAgKiAgICAgICAgLmFuZC5ub3QudGhyb3coL2dvb2QgZnVuY3Rpb24vKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIHRocm93XG5cdCAgICogQGFsaWFzIHRocm93c1xuXHQgICAqIEBhbGlhcyBUaHJvd1xuXHQgICAqIEBwYXJhbSB7RXJyb3JDb25zdHJ1Y3Rvcn0gY29uc3RydWN0b3Jcblx0ICAgKiBAcGFyYW0ge1N0cmluZ3xSZWdFeHB9IGV4cGVjdGVkIGVycm9yIG1lc3NhZ2Vcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG5cdCAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9FcnJvciNFcnJvcl90eXBlc1xuXHQgICAqIEByZXR1cm5zIGVycm9yIGZvciBjaGFpbmluZyAobnVsbCBpZiBubyBlcnJvcilcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBhc3NlcnRUaHJvd3MgKGNvbnN0cnVjdG9yLCBlcnJNc2csIG1zZykge1xuXHQgICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG5cdCAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKG9iaiwgbXNnKS5pcy5hKCdmdW5jdGlvbicpO1xuXHRcblx0ICAgIHZhciB0aHJvd24gPSBmYWxzZVxuXHQgICAgICAsIGRlc2lyZWRFcnJvciA9IG51bGxcblx0ICAgICAgLCBuYW1lID0gbnVsbFxuXHQgICAgICAsIHRocm93bkVycm9yID0gbnVsbDtcblx0XG5cdCAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgICBlcnJNc2cgPSBudWxsO1xuXHQgICAgICBjb25zdHJ1Y3RvciA9IG51bGw7XG5cdCAgICB9IGVsc2UgaWYgKGNvbnN0cnVjdG9yICYmIChjb25zdHJ1Y3RvciBpbnN0YW5jZW9mIFJlZ0V4cCB8fCAnc3RyaW5nJyA9PT0gdHlwZW9mIGNvbnN0cnVjdG9yKSkge1xuXHQgICAgICBlcnJNc2cgPSBjb25zdHJ1Y3Rvcjtcblx0ICAgICAgY29uc3RydWN0b3IgPSBudWxsO1xuXHQgICAgfSBlbHNlIGlmIChjb25zdHJ1Y3RvciAmJiBjb25zdHJ1Y3RvciBpbnN0YW5jZW9mIEVycm9yKSB7XG5cdCAgICAgIGRlc2lyZWRFcnJvciA9IGNvbnN0cnVjdG9yO1xuXHQgICAgICBjb25zdHJ1Y3RvciA9IG51bGw7XG5cdCAgICAgIGVyck1zZyA9IG51bGw7XG5cdCAgICB9IGVsc2UgaWYgKHR5cGVvZiBjb25zdHJ1Y3RvciA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICBuYW1lID0gY29uc3RydWN0b3IucHJvdG90eXBlLm5hbWU7XG5cdCAgICAgIGlmICghbmFtZSB8fCAobmFtZSA9PT0gJ0Vycm9yJyAmJiBjb25zdHJ1Y3RvciAhPT0gRXJyb3IpKSB7XG5cdCAgICAgICAgbmFtZSA9IGNvbnN0cnVjdG9yLm5hbWUgfHwgKG5ldyBjb25zdHJ1Y3RvcigpKS5uYW1lO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBjb25zdHJ1Y3RvciA9IG51bGw7XG5cdCAgICB9XG5cdFxuXHQgICAgdHJ5IHtcblx0ICAgICAgb2JqKCk7XG5cdCAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgLy8gZmlyc3QsIGNoZWNrIGRlc2lyZWQgZXJyb3Jcblx0ICAgICAgaWYgKGRlc2lyZWRFcnJvcikge1xuXHQgICAgICAgIHRoaXMuYXNzZXJ0KFxuXHQgICAgICAgICAgICBlcnIgPT09IGRlc2lyZWRFcnJvclxuXHQgICAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byB0aHJvdyAje2V4cH0gYnV0ICN7YWN0fSB3YXMgdGhyb3duJ1xuXHQgICAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3QgdGhyb3cgI3tleHB9J1xuXHQgICAgICAgICAgLCAoZGVzaXJlZEVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBkZXNpcmVkRXJyb3IudG9TdHJpbmcoKSA6IGRlc2lyZWRFcnJvcilcblx0ICAgICAgICAgICwgKGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLnRvU3RyaW5nKCkgOiBlcnIpXG5cdCAgICAgICAgKTtcblx0XG5cdCAgICAgICAgZmxhZyh0aGlzLCAnb2JqZWN0JywgZXJyKTtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gbmV4dCwgY2hlY2sgY29uc3RydWN0b3Jcblx0ICAgICAgaWYgKGNvbnN0cnVjdG9yKSB7XG5cdCAgICAgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgICAgICAgIGVyciBpbnN0YW5jZW9mIGNvbnN0cnVjdG9yXG5cdCAgICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIHRocm93ICN7ZXhwfSBidXQgI3thY3R9IHdhcyB0aHJvd24nXG5cdCAgICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCB0aHJvdyAje2V4cH0gYnV0ICN7YWN0fSB3YXMgdGhyb3duJ1xuXHQgICAgICAgICAgLCBuYW1lXG5cdCAgICAgICAgICAsIChlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci50b1N0cmluZygpIDogZXJyKVxuXHQgICAgICAgICk7XG5cdFxuXHQgICAgICAgIGlmICghZXJyTXNnKSB7XG5cdCAgICAgICAgICBmbGFnKHRoaXMsICdvYmplY3QnLCBlcnIpO1xuXHQgICAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBuZXh0LCBjaGVjayBtZXNzYWdlXG5cdCAgICAgIHZhciBtZXNzYWdlID0gJ2Vycm9yJyA9PT0gXy50eXBlKGVycikgJiYgXCJtZXNzYWdlXCIgaW4gZXJyXG5cdCAgICAgICAgPyBlcnIubWVzc2FnZVxuXHQgICAgICAgIDogJycgKyBlcnI7XG5cdFxuXHQgICAgICBpZiAoKG1lc3NhZ2UgIT0gbnVsbCkgJiYgZXJyTXNnICYmIGVyck1zZyBpbnN0YW5jZW9mIFJlZ0V4cCkge1xuXHQgICAgICAgIHRoaXMuYXNzZXJ0KFxuXHQgICAgICAgICAgICBlcnJNc2cuZXhlYyhtZXNzYWdlKVxuXHQgICAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byB0aHJvdyBlcnJvciBtYXRjaGluZyAje2V4cH0gYnV0IGdvdCAje2FjdH0nXG5cdCAgICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIHRocm93IGVycm9yIG5vdCBtYXRjaGluZyAje2V4cH0nXG5cdCAgICAgICAgICAsIGVyck1zZ1xuXHQgICAgICAgICAgLCBtZXNzYWdlXG5cdCAgICAgICAgKTtcblx0XG5cdCAgICAgICAgZmxhZyh0aGlzLCAnb2JqZWN0JywgZXJyKTtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgfSBlbHNlIGlmICgobWVzc2FnZSAhPSBudWxsKSAmJiBlcnJNc2cgJiYgJ3N0cmluZycgPT09IHR5cGVvZiBlcnJNc2cpIHtcblx0ICAgICAgICB0aGlzLmFzc2VydChcblx0ICAgICAgICAgICAgfm1lc3NhZ2UuaW5kZXhPZihlcnJNc2cpXG5cdCAgICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIHRocm93IGVycm9yIGluY2x1ZGluZyAje2V4cH0gYnV0IGdvdCAje2FjdH0nXG5cdCAgICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIHRocm93IGVycm9yIG5vdCBpbmNsdWRpbmcgI3thY3R9J1xuXHQgICAgICAgICAgLCBlcnJNc2dcblx0ICAgICAgICAgICwgbWVzc2FnZVxuXHQgICAgICAgICk7XG5cdFxuXHQgICAgICAgIGZsYWcodGhpcywgJ29iamVjdCcsIGVycik7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhyb3duID0gdHJ1ZTtcblx0ICAgICAgICB0aHJvd25FcnJvciA9IGVycjtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHZhciBhY3R1YWxseUdvdCA9ICcnXG5cdCAgICAgICwgZXhwZWN0ZWRUaHJvd24gPSBuYW1lICE9PSBudWxsXG5cdCAgICAgICAgPyBuYW1lXG5cdCAgICAgICAgOiBkZXNpcmVkRXJyb3Jcblx0ICAgICAgICAgID8gJyN7ZXhwfScgLy9fLmluc3BlY3QoZGVzaXJlZEVycm9yKVxuXHQgICAgICAgICAgOiAnYW4gZXJyb3InO1xuXHRcblx0ICAgIGlmICh0aHJvd24pIHtcblx0ICAgICAgYWN0dWFsbHlHb3QgPSAnIGJ1dCAje2FjdH0gd2FzIHRocm93bidcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLmFzc2VydChcblx0ICAgICAgICB0aHJvd24gPT09IHRydWVcblx0ICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byB0aHJvdyAnICsgZXhwZWN0ZWRUaHJvd24gKyBhY3R1YWxseUdvdFxuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCB0aHJvdyAnICsgZXhwZWN0ZWRUaHJvd24gKyBhY3R1YWxseUdvdFxuXHQgICAgICAsIChkZXNpcmVkRXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGRlc2lyZWRFcnJvci50b1N0cmluZygpIDogZGVzaXJlZEVycm9yKVxuXHQgICAgICAsICh0aHJvd25FcnJvciBpbnN0YW5jZW9mIEVycm9yID8gdGhyb3duRXJyb3IudG9TdHJpbmcoKSA6IHRocm93bkVycm9yKVxuXHQgICAgKTtcblx0XG5cdCAgICBmbGFnKHRoaXMsICdvYmplY3QnLCB0aHJvd25FcnJvcik7XG5cdCAgfTtcblx0XG5cdCAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgndGhyb3cnLCBhc3NlcnRUaHJvd3MpO1xuXHQgIEFzc2VydGlvbi5hZGRNZXRob2QoJ3Rocm93cycsIGFzc2VydFRocm93cyk7XG5cdCAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnVGhyb3cnLCBhc3NlcnRUaHJvd3MpO1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLnJlc3BvbmRUbyhtZXRob2QpXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgdGhlIG9iamVjdCBvciBjbGFzcyB0YXJnZXQgd2lsbCByZXNwb25kIHRvIGEgbWV0aG9kLlxuXHQgICAqXG5cdCAgICogICAgIEtsYXNzLnByb3RvdHlwZS5iYXIgPSBmdW5jdGlvbigpe307XG5cdCAgICogICAgIGV4cGVjdChLbGFzcykudG8ucmVzcG9uZFRvKCdiYXInKTtcblx0ICAgKiAgICAgZXhwZWN0KG9iaikudG8ucmVzcG9uZFRvKCdiYXInKTtcblx0ICAgKlxuXHQgICAqIFRvIGNoZWNrIGlmIGEgY29uc3RydWN0b3Igd2lsbCByZXNwb25kIHRvIGEgc3RhdGljIGZ1bmN0aW9uLFxuXHQgICAqIHNldCB0aGUgYGl0c2VsZmAgZmxhZy5cblx0ICAgKlxuXHQgICAqICAgICBLbGFzcy5iYXogPSBmdW5jdGlvbigpe307XG5cdCAgICogICAgIGV4cGVjdChLbGFzcykuaXRzZWxmLnRvLnJlc3BvbmRUbygnYmF6Jyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSByZXNwb25kVG9cblx0ICAgKiBAYWxpYXMgcmVzcG9uZHNUb1xuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXRob2Rcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gcmVzcG9uZFRvIChtZXRob2QsIG1zZykge1xuXHQgICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG5cdCAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0Jylcblx0ICAgICAgLCBpdHNlbGYgPSBmbGFnKHRoaXMsICdpdHNlbGYnKVxuXHQgICAgICAsIGNvbnRleHQgPSAoJ2Z1bmN0aW9uJyA9PT0gXy50eXBlKG9iaikgJiYgIWl0c2VsZilcblx0ICAgICAgICA/IG9iai5wcm90b3R5cGVbbWV0aG9kXVxuXHQgICAgICAgIDogb2JqW21ldGhvZF07XG5cdFxuXHQgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgICAgJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIGNvbnRleHRcblx0ICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byByZXNwb25kIHRvICcgKyBfLmluc3BlY3QobWV0aG9kKVxuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCByZXNwb25kIHRvICcgKyBfLmluc3BlY3QobWV0aG9kKVxuXHQgICAgKTtcblx0ICB9XG5cdFxuXHQgIEFzc2VydGlvbi5hZGRNZXRob2QoJ3Jlc3BvbmRUbycsIHJlc3BvbmRUbyk7XG5cdCAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgncmVzcG9uZHNUbycsIHJlc3BvbmRUbyk7XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuaXRzZWxmXG5cdCAgICpcblx0ICAgKiBTZXRzIHRoZSBgaXRzZWxmYCBmbGFnLCBsYXRlciB1c2VkIGJ5IHRoZSBgcmVzcG9uZFRvYCBhc3NlcnRpb24uXG5cdCAgICpcblx0ICAgKiAgICAgZnVuY3Rpb24gRm9vKCkge31cblx0ICAgKiAgICAgRm9vLmJhciA9IGZ1bmN0aW9uKCkge31cblx0ICAgKiAgICAgRm9vLnByb3RvdHlwZS5iYXogPSBmdW5jdGlvbigpIHt9XG5cdCAgICpcblx0ICAgKiAgICAgZXhwZWN0KEZvbykuaXRzZWxmLnRvLnJlc3BvbmRUbygnYmFyJyk7XG5cdCAgICogICAgIGV4cGVjdChGb28pLml0c2VsZi5ub3QudG8ucmVzcG9uZFRvKCdiYXonKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGl0c2VsZlxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIEFzc2VydGlvbi5hZGRQcm9wZXJ0eSgnaXRzZWxmJywgZnVuY3Rpb24gKCkge1xuXHQgICAgZmxhZyh0aGlzLCAnaXRzZWxmJywgdHJ1ZSk7XG5cdCAgfSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuc2F0aXNmeShtZXRob2QpXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBwYXNzZXMgYSBnaXZlbiB0cnV0aCB0ZXN0LlxuXHQgICAqXG5cdCAgICogICAgIGV4cGVjdCgxKS50by5zYXRpc2Z5KGZ1bmN0aW9uKG51bSkgeyByZXR1cm4gbnVtID4gMDsgfSk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBzYXRpc2Z5XG5cdCAgICogQGFsaWFzIHNhdGlzZmllc1xuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IG1hdGNoZXJcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gc2F0aXNmeSAobWF0Y2hlciwgbXNnKSB7XG5cdCAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcblx0ICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKTtcblx0ICAgIHZhciByZXN1bHQgPSBtYXRjaGVyKG9iaik7XG5cdCAgICB0aGlzLmFzc2VydChcblx0ICAgICAgICByZXN1bHRcblx0ICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBzYXRpc2Z5ICcgKyBfLm9iakRpc3BsYXkobWF0Y2hlcilcblx0ICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3Qgc2F0aXNmeScgKyBfLm9iakRpc3BsYXkobWF0Y2hlcilcblx0ICAgICAgLCB0aGlzLm5lZ2F0ZSA/IGZhbHNlIDogdHJ1ZVxuXHQgICAgICAsIHJlc3VsdFxuXHQgICAgKTtcblx0ICB9XG5cdFxuXHQgIEFzc2VydGlvbi5hZGRNZXRob2QoJ3NhdGlzZnknLCBzYXRpc2Z5KTtcblx0ICBBc3NlcnRpb24uYWRkTWV0aG9kKCdzYXRpc2ZpZXMnLCBzYXRpc2Z5KTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5jbG9zZVRvKGV4cGVjdGVkLCBkZWx0YSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IGlzIGVxdWFsIGBleHBlY3RlZGAsIHRvIHdpdGhpbiBhICsvLSBgZGVsdGFgIHJhbmdlLlxuXHQgICAqXG5cdCAgICogICAgIGV4cGVjdCgxLjUpLnRvLmJlLmNsb3NlVG8oMSwgMC41KTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGNsb3NlVG9cblx0ICAgKiBAYWxpYXMgYXBwcm94aW1hdGVseVxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBleHBlY3RlZFxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBkZWx0YVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBjbG9zZVRvKGV4cGVjdGVkLCBkZWx0YSwgbXNnKSB7XG5cdCAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcblx0ICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKTtcblx0XG5cdCAgICBuZXcgQXNzZXJ0aW9uKG9iaiwgbXNnKS5pcy5hKCdudW1iZXInKTtcblx0ICAgIGlmIChfLnR5cGUoZXhwZWN0ZWQpICE9PSAnbnVtYmVyJyB8fCBfLnR5cGUoZGVsdGEpICE9PSAnbnVtYmVyJykge1xuXHQgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3RoZSBhcmd1bWVudHMgdG8gY2xvc2VUbyBvciBhcHByb3hpbWF0ZWx5IG11c3QgYmUgbnVtYmVycycpO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMuYXNzZXJ0KFxuXHQgICAgICAgIE1hdGguYWJzKG9iaiAtIGV4cGVjdGVkKSA8PSBkZWx0YVxuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIGNsb3NlIHRvICcgKyBleHBlY3RlZCArICcgKy8tICcgKyBkZWx0YVxuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IG5vdCB0byBiZSBjbG9zZSB0byAnICsgZXhwZWN0ZWQgKyAnICsvLSAnICsgZGVsdGFcblx0ICAgICk7XG5cdCAgfVxuXHRcblx0ICBBc3NlcnRpb24uYWRkTWV0aG9kKCdjbG9zZVRvJywgY2xvc2VUbyk7XG5cdCAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnYXBwcm94aW1hdGVseScsIGNsb3NlVG8pO1xuXHRcblx0ICBmdW5jdGlvbiBpc1N1YnNldE9mKHN1YnNldCwgc3VwZXJzZXQsIGNtcCkge1xuXHQgICAgcmV0dXJuIHN1YnNldC5ldmVyeShmdW5jdGlvbihlbGVtKSB7XG5cdCAgICAgIGlmICghY21wKSByZXR1cm4gc3VwZXJzZXQuaW5kZXhPZihlbGVtKSAhPT0gLTE7XG5cdFxuXHQgICAgICByZXR1cm4gc3VwZXJzZXQuc29tZShmdW5jdGlvbihlbGVtMikge1xuXHQgICAgICAgIHJldHVybiBjbXAoZWxlbSwgZWxlbTIpO1xuXHQgICAgICB9KTtcblx0ICAgIH0pXG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLm1lbWJlcnMoc2V0KVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaXMgYSBzdXBlcnNldCBvZiBgc2V0YCxcblx0ICAgKiBvciB0aGF0IHRoZSB0YXJnZXQgYW5kIGBzZXRgIGhhdmUgdGhlIHNhbWUgc3RyaWN0bHktZXF1YWwgKD09PSkgbWVtYmVycy5cblx0ICAgKiBBbHRlcm5hdGVseSwgaWYgdGhlIGBkZWVwYCBmbGFnIGlzIHNldCwgc2V0IG1lbWJlcnMgYXJlIGNvbXBhcmVkIGZvciBkZWVwXG5cdCAgICogZXF1YWxpdHkuXG5cdCAgICpcblx0ICAgKiAgICAgZXhwZWN0KFsxLCAyLCAzXSkudG8uaW5jbHVkZS5tZW1iZXJzKFszLCAyXSk7XG5cdCAgICogICAgIGV4cGVjdChbMSwgMiwgM10pLnRvLm5vdC5pbmNsdWRlLm1lbWJlcnMoWzMsIDIsIDhdKTtcblx0ICAgKlxuXHQgICAqICAgICBleHBlY3QoWzQsIDJdKS50by5oYXZlLm1lbWJlcnMoWzIsIDRdKTtcblx0ICAgKiAgICAgZXhwZWN0KFs1LCAyXSkudG8ubm90LmhhdmUubWVtYmVycyhbNSwgMiwgMV0pO1xuXHQgICAqXG5cdCAgICogICAgIGV4cGVjdChbeyBpZDogMSB9XSkudG8uZGVlcC5pbmNsdWRlLm1lbWJlcnMoW3sgaWQ6IDEgfV0pO1xuXHQgICAqXG5cdCAgICogQG5hbWUgbWVtYmVyc1xuXHQgICAqIEBwYXJhbSB7QXJyYXl9IHNldFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBBc3NlcnRpb24uYWRkTWV0aG9kKCdtZW1iZXJzJywgZnVuY3Rpb24gKHN1YnNldCwgbXNnKSB7XG5cdCAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcblx0ICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKTtcblx0XG5cdCAgICBuZXcgQXNzZXJ0aW9uKG9iaikudG8uYmUuYW4oJ2FycmF5Jyk7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKHN1YnNldCkudG8uYmUuYW4oJ2FycmF5Jyk7XG5cdFxuXHQgICAgdmFyIGNtcCA9IGZsYWcodGhpcywgJ2RlZXAnKSA/IF8uZXFsIDogdW5kZWZpbmVkO1xuXHRcblx0ICAgIGlmIChmbGFnKHRoaXMsICdjb250YWlucycpKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLmFzc2VydChcblx0ICAgICAgICAgIGlzU3Vic2V0T2Yoc3Vic2V0LCBvYmosIGNtcClcblx0ICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIGEgc3VwZXJzZXQgb2YgI3thY3R9J1xuXHQgICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IGJlIGEgc3VwZXJzZXQgb2YgI3thY3R9J1xuXHQgICAgICAgICwgb2JqXG5cdCAgICAgICAgLCBzdWJzZXRcblx0ICAgICAgKTtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLmFzc2VydChcblx0ICAgICAgICBpc1N1YnNldE9mKG9iaiwgc3Vic2V0LCBjbXApICYmIGlzU3Vic2V0T2Yoc3Vic2V0LCBvYmosIGNtcClcblx0ICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGhhdmUgdGhlIHNhbWUgbWVtYmVycyBhcyAje2FjdH0nXG5cdCAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3QgaGF2ZSB0aGUgc2FtZSBtZW1iZXJzIGFzICN7YWN0fSdcblx0ICAgICAgICAsIG9ialxuXHQgICAgICAgICwgc3Vic2V0XG5cdCAgICApO1xuXHQgIH0pO1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLm9uZU9mKGxpc3QpXG5cdCAgICpcblx0ICAgKiBBc3NlcnQgdGhhdCBhIHZhbHVlIGFwcGVhcnMgc29tZXdoZXJlIGluIHRoZSB0b3AgbGV2ZWwgb2YgYXJyYXkgYGxpc3RgLlxuXHQgICAqXG5cdCAgICogICAgIGV4cGVjdCgnYScpLnRvLmJlLm9uZU9mKFsnYScsICdiJywgJ2MnXSk7XG5cdCAgICogICAgIGV4cGVjdCg5KS50by5ub3QuYmUub25lT2YoWyd6J10pO1xuXHQgICAqICAgICBleHBlY3QoWzNdKS50by5ub3QuYmUub25lT2YoWzEsIDIsIFszXV0pO1xuXHQgICAqXG5cdCAgICogICAgIHZhciB0aHJlZSA9IFszXTtcblx0ICAgKiAgICAgLy8gZm9yIG9iamVjdC10eXBlcywgY29udGVudHMgYXJlIG5vdCBjb21wYXJlZFxuXHQgICAqICAgICBleHBlY3QodGhyZWUpLnRvLm5vdC5iZS5vbmVPZihbMSwgMiwgWzNdXSk7XG5cdCAgICogICAgIC8vIGNvbXBhcmluZyByZWZlcmVuY2VzIHdvcmtzXG5cdCAgICogICAgIGV4cGVjdCh0aHJlZSkudG8uYmUub25lT2YoWzEsIDIsIHRocmVlXSk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBvbmVPZlxuXHQgICAqIEBwYXJhbSB7QXJyYXk8Kj59IGxpc3Rcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gb25lT2YgKGxpc3QsIG1zZykge1xuXHQgICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG5cdCAgICB2YXIgZXhwZWN0ZWQgPSBmbGFnKHRoaXMsICdvYmplY3QnKTtcblx0ICAgIG5ldyBBc3NlcnRpb24obGlzdCkudG8uYmUuYW4oJ2FycmF5Jyk7XG5cdFxuXHQgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgICAgbGlzdC5pbmRleE9mKGV4cGVjdGVkKSA+IC0xXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgb25lIG9mICN7ZXhwfSdcblx0ICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3QgYmUgb25lIG9mICN7ZXhwfSdcblx0ICAgICAgLCBsaXN0XG5cdCAgICAgICwgZXhwZWN0ZWRcblx0ICAgICk7XG5cdCAgfVxuXHRcblx0ICBBc3NlcnRpb24uYWRkTWV0aG9kKCdvbmVPZicsIG9uZU9mKTtcblx0XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuY2hhbmdlKGZ1bmN0aW9uKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGEgZnVuY3Rpb24gY2hhbmdlcyBhbiBvYmplY3QgcHJvcGVydHlcblx0ICAgKlxuXHQgICAqICAgICB2YXIgb2JqID0geyB2YWw6IDEwIH07XG5cdCAgICogICAgIHZhciBmbiA9IGZ1bmN0aW9uKCkgeyBvYmoudmFsICs9IDMgfTtcblx0ICAgKiAgICAgdmFyIG5vQ2hhbmdlRm4gPSBmdW5jdGlvbigpIHsgcmV0dXJuICdmb28nICsgJ2Jhcic7IH1cblx0ICAgKiAgICAgZXhwZWN0KGZuKS50by5jaGFuZ2Uob2JqLCAndmFsJyk7XG5cdCAgICogICAgIGV4cGVjdChub0NoYW5nRm4pLnRvLm5vdC5jaGFuZ2Uob2JqLCAndmFsJylcblx0ICAgKlxuXHQgICAqIEBuYW1lIGNoYW5nZVxuXHQgICAqIEBhbGlhcyBjaGFuZ2VzXG5cdCAgICogQGFsaWFzIENoYW5nZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBvYmplY3Rcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHkgbmFtZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBhc3NlcnRDaGFuZ2VzIChvYmplY3QsIHByb3AsIG1zZykge1xuXHQgICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG5cdCAgICB2YXIgZm4gPSBmbGFnKHRoaXMsICdvYmplY3QnKTtcblx0ICAgIG5ldyBBc3NlcnRpb24ob2JqZWN0LCBtc2cpLnRvLmhhdmUucHJvcGVydHkocHJvcCk7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKGZuKS5pcy5hKCdmdW5jdGlvbicpO1xuXHRcblx0ICAgIHZhciBpbml0aWFsID0gb2JqZWN0W3Byb3BdO1xuXHQgICAgZm4oKTtcblx0XG5cdCAgICB0aGlzLmFzc2VydChcblx0ICAgICAgaW5pdGlhbCAhPT0gb2JqZWN0W3Byb3BdXG5cdCAgICAgICwgJ2V4cGVjdGVkIC4nICsgcHJvcCArICcgdG8gY2hhbmdlJ1xuXHQgICAgICAsICdleHBlY3RlZCAuJyArIHByb3AgKyAnIHRvIG5vdCBjaGFuZ2UnXG5cdCAgICApO1xuXHQgIH1cblx0XG5cdCAgQXNzZXJ0aW9uLmFkZENoYWluYWJsZU1ldGhvZCgnY2hhbmdlJywgYXNzZXJ0Q2hhbmdlcyk7XG5cdCAgQXNzZXJ0aW9uLmFkZENoYWluYWJsZU1ldGhvZCgnY2hhbmdlcycsIGFzc2VydENoYW5nZXMpO1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLmluY3JlYXNlKGZ1bmN0aW9uKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGEgZnVuY3Rpb24gaW5jcmVhc2VzIGFuIG9iamVjdCBwcm9wZXJ0eVxuXHQgICAqXG5cdCAgICogICAgIHZhciBvYmogPSB7IHZhbDogMTAgfTtcblx0ICAgKiAgICAgdmFyIGZuID0gZnVuY3Rpb24oKSB7IG9iai52YWwgPSAxNSB9O1xuXHQgICAqICAgICBleHBlY3QoZm4pLnRvLmluY3JlYXNlKG9iaiwgJ3ZhbCcpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgaW5jcmVhc2Vcblx0ICAgKiBAYWxpYXMgaW5jcmVhc2VzXG5cdCAgICogQGFsaWFzIEluY3JlYXNlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG9iamVjdFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eSBuYW1lXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGFzc2VydEluY3JlYXNlcyAob2JqZWN0LCBwcm9wLCBtc2cpIHtcblx0ICAgIGlmIChtc2cpIGZsYWcodGhpcywgJ21lc3NhZ2UnLCBtc2cpO1xuXHQgICAgdmFyIGZuID0gZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKG9iamVjdCwgbXNnKS50by5oYXZlLnByb3BlcnR5KHByb3ApO1xuXHQgICAgbmV3IEFzc2VydGlvbihmbikuaXMuYSgnZnVuY3Rpb24nKTtcblx0XG5cdCAgICB2YXIgaW5pdGlhbCA9IG9iamVjdFtwcm9wXTtcblx0ICAgIGZuKCk7XG5cdFxuXHQgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgIG9iamVjdFtwcm9wXSAtIGluaXRpYWwgPiAwXG5cdCAgICAgICwgJ2V4cGVjdGVkIC4nICsgcHJvcCArICcgdG8gaW5jcmVhc2UnXG5cdCAgICAgICwgJ2V4cGVjdGVkIC4nICsgcHJvcCArICcgdG8gbm90IGluY3JlYXNlJ1xuXHQgICAgKTtcblx0ICB9XG5cdFxuXHQgIEFzc2VydGlvbi5hZGRDaGFpbmFibGVNZXRob2QoJ2luY3JlYXNlJywgYXNzZXJ0SW5jcmVhc2VzKTtcblx0ICBBc3NlcnRpb24uYWRkQ2hhaW5hYmxlTWV0aG9kKCdpbmNyZWFzZXMnLCBhc3NlcnRJbmNyZWFzZXMpO1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLmRlY3JlYXNlKGZ1bmN0aW9uKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGEgZnVuY3Rpb24gZGVjcmVhc2VzIGFuIG9iamVjdCBwcm9wZXJ0eVxuXHQgICAqXG5cdCAgICogICAgIHZhciBvYmogPSB7IHZhbDogMTAgfTtcblx0ICAgKiAgICAgdmFyIGZuID0gZnVuY3Rpb24oKSB7IG9iai52YWwgPSA1IH07XG5cdCAgICogICAgIGV4cGVjdChmbikudG8uZGVjcmVhc2Uob2JqLCAndmFsJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBkZWNyZWFzZVxuXHQgICAqIEBhbGlhcyBkZWNyZWFzZXNcblx0ICAgKiBAYWxpYXMgRGVjcmVhc2Vcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gb2JqZWN0XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5IG5hbWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gYXNzZXJ0RGVjcmVhc2VzIChvYmplY3QsIHByb3AsIG1zZykge1xuXHQgICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG5cdCAgICB2YXIgZm4gPSBmbGFnKHRoaXMsICdvYmplY3QnKTtcblx0ICAgIG5ldyBBc3NlcnRpb24ob2JqZWN0LCBtc2cpLnRvLmhhdmUucHJvcGVydHkocHJvcCk7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKGZuKS5pcy5hKCdmdW5jdGlvbicpO1xuXHRcblx0ICAgIHZhciBpbml0aWFsID0gb2JqZWN0W3Byb3BdO1xuXHQgICAgZm4oKTtcblx0XG5cdCAgICB0aGlzLmFzc2VydChcblx0ICAgICAgb2JqZWN0W3Byb3BdIC0gaW5pdGlhbCA8IDBcblx0ICAgICAgLCAnZXhwZWN0ZWQgLicgKyBwcm9wICsgJyB0byBkZWNyZWFzZSdcblx0ICAgICAgLCAnZXhwZWN0ZWQgLicgKyBwcm9wICsgJyB0byBub3QgZGVjcmVhc2UnXG5cdCAgICApO1xuXHQgIH1cblx0XG5cdCAgQXNzZXJ0aW9uLmFkZENoYWluYWJsZU1ldGhvZCgnZGVjcmVhc2UnLCBhc3NlcnREZWNyZWFzZXMpO1xuXHQgIEFzc2VydGlvbi5hZGRDaGFpbmFibGVNZXRob2QoJ2RlY3JlYXNlcycsIGFzc2VydERlY3JlYXNlcyk7XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuZXh0ZW5zaWJsZVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaXMgZXh0ZW5zaWJsZSAoY2FuIGhhdmUgbmV3IHByb3BlcnRpZXMgYWRkZWQgdG9cblx0ICAgKiBpdCkuXG5cdCAgICpcblx0ICAgKiAgICAgdmFyIG5vbkV4dGVuc2libGVPYmplY3QgPSBPYmplY3QucHJldmVudEV4dGVuc2lvbnMoe30pO1xuXHQgICAqICAgICB2YXIgc2VhbGVkT2JqZWN0ID0gT2JqZWN0LnNlYWwoe30pO1xuXHQgICAqICAgICB2YXIgZnJvemVuT2JqZWN0ID0gT2JqZWN0LmZyZWV6ZSh7fSk7XG5cdCAgICpcblx0ICAgKiAgICAgZXhwZWN0KHt9KS50by5iZS5leHRlbnNpYmxlO1xuXHQgICAqICAgICBleHBlY3Qobm9uRXh0ZW5zaWJsZU9iamVjdCkudG8ubm90LmJlLmV4dGVuc2libGU7XG5cdCAgICogICAgIGV4cGVjdChzZWFsZWRPYmplY3QpLnRvLm5vdC5iZS5leHRlbnNpYmxlO1xuXHQgICAqICAgICBleHBlY3QoZnJvemVuT2JqZWN0KS50by5ub3QuYmUuZXh0ZW5zaWJsZTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGV4dGVuc2libGVcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBBc3NlcnRpb24uYWRkUHJvcGVydHkoJ2V4dGVuc2libGUnLCBmdW5jdGlvbigpIHtcblx0ICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKTtcblx0XG5cdCAgICAvLyBJbiBFUzUsIGlmIHRoZSBhcmd1bWVudCB0byB0aGlzIG1ldGhvZCBpcyBub3QgYW4gb2JqZWN0IChhIHByaW1pdGl2ZSksIHRoZW4gaXQgd2lsbCBjYXVzZSBhIFR5cGVFcnJvci5cblx0ICAgIC8vIEluIEVTNiwgYSBub24tb2JqZWN0IGFyZ3VtZW50IHdpbGwgYmUgdHJlYXRlZCBhcyBpZiBpdCB3YXMgYSBub24tZXh0ZW5zaWJsZSBvcmRpbmFyeSBvYmplY3QsIHNpbXBseSByZXR1cm4gZmFsc2UuXG5cdCAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvaXNFeHRlbnNpYmxlXG5cdCAgICAvLyBUaGUgZm9sbG93aW5nIHByb3ZpZGVzIEVTNiBiZWhhdmlvciB3aGVuIGEgVHlwZUVycm9yIGlzIHRocm93biB1bmRlciBFUzUuXG5cdFxuXHQgICAgdmFyIGlzRXh0ZW5zaWJsZTtcblx0XG5cdCAgICB0cnkge1xuXHQgICAgICBpc0V4dGVuc2libGUgPSBPYmplY3QuaXNFeHRlbnNpYmxlKG9iaik7XG5cdCAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIFR5cGVFcnJvcikgaXNFeHRlbnNpYmxlID0gZmFsc2U7XG5cdCAgICAgIGVsc2UgdGhyb3cgZXJyO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMuYXNzZXJ0KFxuXHQgICAgICBpc0V4dGVuc2libGVcblx0ICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSBleHRlbnNpYmxlJ1xuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBiZSBleHRlbnNpYmxlJ1xuXHQgICAgKTtcblx0ICB9KTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5zZWFsZWRcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IGlzIHNlYWxlZCAoY2Fubm90IGhhdmUgbmV3IHByb3BlcnRpZXMgYWRkZWQgdG8gaXRcblx0ICAgKiBhbmQgaXRzIGV4aXN0aW5nIHByb3BlcnRpZXMgY2Fubm90IGJlIHJlbW92ZWQpLlxuXHQgICAqXG5cdCAgICogICAgIHZhciBzZWFsZWRPYmplY3QgPSBPYmplY3Quc2VhbCh7fSk7XG5cdCAgICogICAgIHZhciBmcm96ZW5PYmplY3QgPSBPYmplY3QuZnJlZXplKHt9KTtcblx0ICAgKlxuXHQgICAqICAgICBleHBlY3Qoc2VhbGVkT2JqZWN0KS50by5iZS5zZWFsZWQ7XG5cdCAgICogICAgIGV4cGVjdChmcm96ZW5PYmplY3QpLnRvLmJlLnNlYWxlZDtcblx0ICAgKiAgICAgZXhwZWN0KHt9KS50by5ub3QuYmUuc2VhbGVkO1xuXHQgICAqXG5cdCAgICogQG5hbWUgc2VhbGVkXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgQXNzZXJ0aW9uLmFkZFByb3BlcnR5KCdzZWFsZWQnLCBmdW5jdGlvbigpIHtcblx0ICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKTtcblx0XG5cdCAgICAvLyBJbiBFUzUsIGlmIHRoZSBhcmd1bWVudCB0byB0aGlzIG1ldGhvZCBpcyBub3QgYW4gb2JqZWN0IChhIHByaW1pdGl2ZSksIHRoZW4gaXQgd2lsbCBjYXVzZSBhIFR5cGVFcnJvci5cblx0ICAgIC8vIEluIEVTNiwgYSBub24tb2JqZWN0IGFyZ3VtZW50IHdpbGwgYmUgdHJlYXRlZCBhcyBpZiBpdCB3YXMgYSBzZWFsZWQgb3JkaW5hcnkgb2JqZWN0LCBzaW1wbHkgcmV0dXJuIHRydWUuXG5cdCAgICAvLyBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2lzU2VhbGVkXG5cdCAgICAvLyBUaGUgZm9sbG93aW5nIHByb3ZpZGVzIEVTNiBiZWhhdmlvciB3aGVuIGEgVHlwZUVycm9yIGlzIHRocm93biB1bmRlciBFUzUuXG5cdFxuXHQgICAgdmFyIGlzU2VhbGVkO1xuXHRcblx0ICAgIHRyeSB7XG5cdCAgICAgIGlzU2VhbGVkID0gT2JqZWN0LmlzU2VhbGVkKG9iaik7XG5cdCAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIFR5cGVFcnJvcikgaXNTZWFsZWQgPSB0cnVlO1xuXHQgICAgICBlbHNlIHRocm93IGVycjtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLmFzc2VydChcblx0ICAgICAgaXNTZWFsZWRcblx0ICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSBzZWFsZWQnXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IGJlIHNlYWxlZCdcblx0ICAgICk7XG5cdCAgfSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuZnJvemVuXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBmcm96ZW4gKGNhbm5vdCBoYXZlIG5ldyBwcm9wZXJ0aWVzIGFkZGVkIHRvIGl0XG5cdCAgICogYW5kIGl0cyBleGlzdGluZyBwcm9wZXJ0aWVzIGNhbm5vdCBiZSBtb2RpZmllZCkuXG5cdCAgICpcblx0ICAgKiAgICAgdmFyIGZyb3plbk9iamVjdCA9IE9iamVjdC5mcmVlemUoe30pO1xuXHQgICAqXG5cdCAgICogICAgIGV4cGVjdChmcm96ZW5PYmplY3QpLnRvLmJlLmZyb3plbjtcblx0ICAgKiAgICAgZXhwZWN0KHt9KS50by5ub3QuYmUuZnJvemVuO1xuXHQgICAqXG5cdCAgICogQG5hbWUgZnJvemVuXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgQXNzZXJ0aW9uLmFkZFByb3BlcnR5KCdmcm96ZW4nLCBmdW5jdGlvbigpIHtcblx0ICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKTtcblx0XG5cdCAgICAvLyBJbiBFUzUsIGlmIHRoZSBhcmd1bWVudCB0byB0aGlzIG1ldGhvZCBpcyBub3QgYW4gb2JqZWN0IChhIHByaW1pdGl2ZSksIHRoZW4gaXQgd2lsbCBjYXVzZSBhIFR5cGVFcnJvci5cblx0ICAgIC8vIEluIEVTNiwgYSBub24tb2JqZWN0IGFyZ3VtZW50IHdpbGwgYmUgdHJlYXRlZCBhcyBpZiBpdCB3YXMgYSBmcm96ZW4gb3JkaW5hcnkgb2JqZWN0LCBzaW1wbHkgcmV0dXJuIHRydWUuXG5cdCAgICAvLyBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2lzRnJvemVuXG5cdCAgICAvLyBUaGUgZm9sbG93aW5nIHByb3ZpZGVzIEVTNiBiZWhhdmlvciB3aGVuIGEgVHlwZUVycm9yIGlzIHRocm93biB1bmRlciBFUzUuXG5cdFxuXHQgICAgdmFyIGlzRnJvemVuO1xuXHRcblx0ICAgIHRyeSB7XG5cdCAgICAgIGlzRnJvemVuID0gT2JqZWN0LmlzRnJvemVuKG9iaik7XG5cdCAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIFR5cGVFcnJvcikgaXNGcm96ZW4gPSB0cnVlO1xuXHQgICAgICBlbHNlIHRocm93IGVycjtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLmFzc2VydChcblx0ICAgICAgaXNGcm96ZW5cblx0ICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSBmcm96ZW4nXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IGJlIGZyb3plbidcblx0ICAgICk7XG5cdCAgfSk7XG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDQ3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiFcblx0ICogY2hhaVxuXHQgKiBDb3B5cmlnaHQoYykgMjAxMS0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuXHQgKiBNSVQgTGljZW5zZWRcblx0ICovXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjaGFpLCB1dGlsKSB7XG5cdCAgY2hhaS5leHBlY3QgPSBmdW5jdGlvbiAodmFsLCBtZXNzYWdlKSB7XG5cdCAgICByZXR1cm4gbmV3IGNoYWkuQXNzZXJ0aW9uKHZhbCwgbWVzc2FnZSk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5mYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIFttZXNzYWdlXSwgW29wZXJhdG9yXSlcblx0ICAgKlxuXHQgICAqIFRocm93IGEgZmFpbHVyZS5cblx0ICAgKlxuXHQgICAqIEBuYW1lIGZhaWxcblx0ICAgKiBAcGFyYW0ge01peGVkfSBhY3R1YWxcblx0ICAgKiBAcGFyYW0ge01peGVkfSBleHBlY3RlZFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG9wZXJhdG9yXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgY2hhaS5leHBlY3QuZmFpbCA9IGZ1bmN0aW9uIChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCBvcGVyYXRvcikge1xuXHQgICAgbWVzc2FnZSA9IG1lc3NhZ2UgfHwgJ2V4cGVjdC5mYWlsKCknO1xuXHQgICAgdGhyb3cgbmV3IGNoYWkuQXNzZXJ0aW9uRXJyb3IobWVzc2FnZSwge1xuXHQgICAgICAgIGFjdHVhbDogYWN0dWFsXG5cdCAgICAgICwgZXhwZWN0ZWQ6IGV4cGVjdGVkXG5cdCAgICAgICwgb3BlcmF0b3I6IG9wZXJhdG9yXG5cdCAgICB9LCBjaGFpLmV4cGVjdC5mYWlsKTtcblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiA0OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyohXG5cdCAqIGNoYWlcblx0ICogQ29weXJpZ2h0KGMpIDIwMTEtMjAxNCBKYWtlIEx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cblx0ICogTUlUIExpY2Vuc2VkXG5cdCAqL1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY2hhaSwgdXRpbCkge1xuXHQgIHZhciBBc3NlcnRpb24gPSBjaGFpLkFzc2VydGlvbjtcblx0XG5cdCAgZnVuY3Rpb24gbG9hZFNob3VsZCAoKSB7XG5cdCAgICAvLyBleHBsaWNpdGx5IGRlZmluZSB0aGlzIG1ldGhvZCBhcyBmdW5jdGlvbiBhcyB0byBoYXZlIGl0J3MgbmFtZSB0byBpbmNsdWRlIGFzIGBzc2ZpYFxuXHQgICAgZnVuY3Rpb24gc2hvdWxkR2V0dGVyKCkge1xuXHQgICAgICBpZiAodGhpcyBpbnN0YW5jZW9mIFN0cmluZyB8fCB0aGlzIGluc3RhbmNlb2YgTnVtYmVyIHx8IHRoaXMgaW5zdGFuY2VvZiBCb29sZWFuICkge1xuXHQgICAgICAgIHJldHVybiBuZXcgQXNzZXJ0aW9uKHRoaXMudmFsdWVPZigpLCBudWxsLCBzaG91bGRHZXR0ZXIpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBuZXcgQXNzZXJ0aW9uKHRoaXMsIG51bGwsIHNob3VsZEdldHRlcik7XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBzaG91bGRTZXR0ZXIodmFsdWUpIHtcblx0ICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9jaGFpanMvY2hhaS9pc3N1ZXMvODY6IHRoaXMgbWFrZXNcblx0ICAgICAgLy8gYHdoYXRldmVyLnNob3VsZCA9IHNvbWVWYWx1ZWAgYWN0dWFsbHkgc2V0IGBzb21lVmFsdWVgLCB3aGljaCBpc1xuXHQgICAgICAvLyBlc3BlY2lhbGx5IHVzZWZ1bCBmb3IgYGdsb2JhbC5zaG91bGQgPSByZXF1aXJlKCdjaGFpJykuc2hvdWxkKClgLlxuXHQgICAgICAvL1xuXHQgICAgICAvLyBOb3RlIHRoYXQgd2UgaGF2ZSB0byB1c2UgW1tEZWZpbmVQcm9wZXJ0eV1dIGluc3RlYWQgb2YgW1tQdXRdXVxuXHQgICAgICAvLyBzaW5jZSBvdGhlcndpc2Ugd2Ugd291bGQgdHJpZ2dlciB0aGlzIHZlcnkgc2V0dGVyIVxuXHQgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ3Nob3VsZCcsIHtcblx0ICAgICAgICB2YWx1ZTogdmFsdWUsXG5cdCAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG5cdCAgICAgICAgd3JpdGFibGU6IHRydWVcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgICAvLyBtb2RpZnkgT2JqZWN0LnByb3RvdHlwZSB0byBoYXZlIGBzaG91bGRgXG5cdCAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoT2JqZWN0LnByb3RvdHlwZSwgJ3Nob3VsZCcsIHtcblx0ICAgICAgc2V0OiBzaG91bGRTZXR0ZXJcblx0ICAgICAgLCBnZXQ6IHNob3VsZEdldHRlclxuXHQgICAgICAsIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHQgICAgfSk7XG5cdFxuXHQgICAgdmFyIHNob3VsZCA9IHt9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogIyMjIC5mYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIFttZXNzYWdlXSwgW29wZXJhdG9yXSlcblx0ICAgICAqXG5cdCAgICAgKiBUaHJvdyBhIGZhaWx1cmUuXG5cdCAgICAgKlxuXHQgICAgICogQG5hbWUgZmFpbFxuXHQgICAgICogQHBhcmFtIHtNaXhlZH0gYWN0dWFsXG5cdCAgICAgKiBAcGFyYW0ge01peGVkfSBleHBlY3RlZFxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgICAqIEBwYXJhbSB7U3RyaW5nfSBvcGVyYXRvclxuXHQgICAgICogQGFwaSBwdWJsaWNcblx0ICAgICAqL1xuXHRcblx0ICAgIHNob3VsZC5mYWlsID0gZnVuY3Rpb24gKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsIG9wZXJhdG9yKSB7XG5cdCAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlIHx8ICdzaG91bGQuZmFpbCgpJztcblx0ICAgICAgdGhyb3cgbmV3IGNoYWkuQXNzZXJ0aW9uRXJyb3IobWVzc2FnZSwge1xuXHQgICAgICAgICAgYWN0dWFsOiBhY3R1YWxcblx0ICAgICAgICAsIGV4cGVjdGVkOiBleHBlY3RlZFxuXHQgICAgICAgICwgb3BlcmF0b3I6IG9wZXJhdG9yXG5cdCAgICAgIH0sIHNob3VsZC5mYWlsKTtcblx0ICAgIH07XG5cdFxuXHQgICAgc2hvdWxkLmVxdWFsID0gZnVuY3Rpb24gKHZhbDEsIHZhbDIsIG1zZykge1xuXHQgICAgICBuZXcgQXNzZXJ0aW9uKHZhbDEsIG1zZykudG8uZXF1YWwodmFsMik7XG5cdCAgICB9O1xuXHRcblx0ICAgIHNob3VsZC5UaHJvdyA9IGZ1bmN0aW9uIChmbiwgZXJydCwgZXJycywgbXNnKSB7XG5cdCAgICAgIG5ldyBBc3NlcnRpb24oZm4sIG1zZykudG8uVGhyb3coZXJydCwgZXJycyk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHNob3VsZC5leGlzdCA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuXHQgICAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5leGlzdDtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBuZWdhdGlvblxuXHQgICAgc2hvdWxkLm5vdCA9IHt9XG5cdFxuXHQgICAgc2hvdWxkLm5vdC5lcXVhbCA9IGZ1bmN0aW9uICh2YWwxLCB2YWwyLCBtc2cpIHtcblx0ICAgICAgbmV3IEFzc2VydGlvbih2YWwxLCBtc2cpLnRvLm5vdC5lcXVhbCh2YWwyKTtcblx0ICAgIH07XG5cdFxuXHQgICAgc2hvdWxkLm5vdC5UaHJvdyA9IGZ1bmN0aW9uIChmbiwgZXJydCwgZXJycywgbXNnKSB7XG5cdCAgICAgIG5ldyBBc3NlcnRpb24oZm4sIG1zZykudG8ubm90LlRocm93KGVycnQsIGVycnMpO1xuXHQgICAgfTtcblx0XG5cdCAgICBzaG91bGQubm90LmV4aXN0ID0gZnVuY3Rpb24gKHZhbCwgbXNnKSB7XG5cdCAgICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLm5vdC5leGlzdDtcblx0ICAgIH1cblx0XG5cdCAgICBzaG91bGRbJ3Rocm93J10gPSBzaG91bGRbJ1Rocm93J107XG5cdCAgICBzaG91bGQubm90Wyd0aHJvdyddID0gc2hvdWxkLm5vdFsnVGhyb3cnXTtcblx0XG5cdCAgICByZXR1cm4gc2hvdWxkO1xuXHQgIH07XG5cdFxuXHQgIGNoYWkuc2hvdWxkID0gbG9hZFNob3VsZDtcblx0ICBjaGFpLlNob3VsZCA9IGxvYWRTaG91bGQ7XG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDQ5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiFcblx0ICogY2hhaVxuXHQgKiBDb3B5cmlnaHQoYykgMjAxMS0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuXHQgKiBNSVQgTGljZW5zZWRcblx0ICovXG5cdFxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY2hhaSwgdXRpbCkge1xuXHRcblx0ICAvKiFcblx0ICAgKiBDaGFpIGRlcGVuZGVuY2llcy5cblx0ICAgKi9cblx0XG5cdCAgdmFyIEFzc2VydGlvbiA9IGNoYWkuQXNzZXJ0aW9uXG5cdCAgICAsIGZsYWcgPSB1dGlsLmZsYWc7XG5cdFxuXHQgIC8qIVxuXHQgICAqIE1vZHVsZSBleHBvcnQuXG5cdCAgICovXG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyBhc3NlcnQoZXhwcmVzc2lvbiwgbWVzc2FnZSlcblx0ICAgKlxuXHQgICAqIFdyaXRlIHlvdXIgb3duIHRlc3QgZXhwcmVzc2lvbnMuXG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0KCdmb28nICE9PSAnYmFyJywgJ2ZvbyBpcyBub3QgYmFyJyk7XG5cdCAgICogICAgIGFzc2VydChBcnJheS5pc0FycmF5KFtdKSwgJ2VtcHR5IGFycmF5cyBhcmUgYXJyYXlzJyk7XG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge01peGVkfSBleHByZXNzaW9uIHRvIHRlc3QgZm9yIHRydXRoaW5lc3Ncblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSB0byBkaXNwbGF5IG9uIGVycm9yXG5cdCAgICogQG5hbWUgYXNzZXJ0XG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgdmFyIGFzc2VydCA9IGNoYWkuYXNzZXJ0ID0gZnVuY3Rpb24gKGV4cHJlc3MsIGVycm1zZykge1xuXHQgICAgdmFyIHRlc3QgPSBuZXcgQXNzZXJ0aW9uKG51bGwsIG51bGwsIGNoYWkuYXNzZXJ0KTtcblx0ICAgIHRlc3QuYXNzZXJ0KFxuXHQgICAgICAgIGV4cHJlc3Ncblx0ICAgICAgLCBlcnJtc2dcblx0ICAgICAgLCAnWyBuZWdhdGlvbiBtZXNzYWdlIHVuYXZhaWxhYmxlIF0nXG5cdCAgICApO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBbbWVzc2FnZV0sIFtvcGVyYXRvcl0pXG5cdCAgICpcblx0ICAgKiBUaHJvdyBhIGZhaWx1cmUuIE5vZGUuanMgYGFzc2VydGAgbW9kdWxlLWNvbXBhdGlibGUuXG5cdCAgICpcblx0ICAgKiBAbmFtZSBmYWlsXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gYWN0dWFsXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gZXhwZWN0ZWRcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBvcGVyYXRvclxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5mYWlsID0gZnVuY3Rpb24gKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsIG9wZXJhdG9yKSB7XG5cdCAgICBtZXNzYWdlID0gbWVzc2FnZSB8fCAnYXNzZXJ0LmZhaWwoKSc7XG5cdCAgICB0aHJvdyBuZXcgY2hhaS5Bc3NlcnRpb25FcnJvcihtZXNzYWdlLCB7XG5cdCAgICAgICAgYWN0dWFsOiBhY3R1YWxcblx0ICAgICAgLCBleHBlY3RlZDogZXhwZWN0ZWRcblx0ICAgICAgLCBvcGVyYXRvcjogb3BlcmF0b3Jcblx0ICAgIH0sIGFzc2VydC5mYWlsKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLmlzT2sob2JqZWN0LCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYG9iamVjdGAgaXMgdHJ1dGh5LlxuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5pc09rKCdldmVyeXRoaW5nJywgJ2V2ZXJ5dGhpbmcgaXMgb2snKTtcblx0ICAgKiAgICAgYXNzZXJ0LmlzT2soZmFsc2UsICd0aGlzIHdpbGwgZmFpbCcpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgaXNPa1xuXHQgICAqIEBhbGlhcyBva1xuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IG9iamVjdCB0byB0ZXN0XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQuaXNPayA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykuaXMub2s7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5pc05vdE9rKG9iamVjdCwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGBvYmplY3RgIGlzIGZhbHN5LlxuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5pc05vdE9rKCdldmVyeXRoaW5nJywgJ3RoaXMgd2lsbCBmYWlsJyk7XG5cdCAgICogICAgIGFzc2VydC5pc05vdE9rKGZhbHNlLCAndGhpcyB3aWxsIHBhc3MnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGlzTm90T2tcblx0ICAgKiBAYWxpYXMgbm90T2tcblx0ICAgKiBAcGFyYW0ge01peGVkfSBvYmplY3QgdG8gdGVzdFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmlzTm90T2sgPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLmlzLm5vdC5vaztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLmVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgbm9uLXN0cmljdCBlcXVhbGl0eSAoYD09YCkgb2YgYGFjdHVhbGAgYW5kIGBleHBlY3RlZGAuXG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0LmVxdWFsKDMsICczJywgJz09IGNvZXJjZXMgdmFsdWVzIHRvIHN0cmluZ3MnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGVxdWFsXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gYWN0dWFsXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gZXhwZWN0ZWRcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5lcXVhbCA9IGZ1bmN0aW9uIChhY3QsIGV4cCwgbXNnKSB7XG5cdCAgICB2YXIgdGVzdCA9IG5ldyBBc3NlcnRpb24oYWN0LCBtc2csIGFzc2VydC5lcXVhbCk7XG5cdFxuXHQgICAgdGVzdC5hc3NlcnQoXG5cdCAgICAgICAgZXhwID09IGZsYWcodGVzdCwgJ29iamVjdCcpXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gZXF1YWwgI3tleHB9J1xuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBlcXVhbCAje2FjdH0nXG5cdCAgICAgICwgZXhwXG5cdCAgICAgICwgYWN0XG5cdCAgICApO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAubm90RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyBub24tc3RyaWN0IGluZXF1YWxpdHkgKGAhPWApIG9mIGBhY3R1YWxgIGFuZCBgZXhwZWN0ZWRgLlxuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5ub3RFcXVhbCgzLCA0LCAndGhlc2UgbnVtYmVycyBhcmUgbm90IGVxdWFsJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBub3RFcXVhbFxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IGFjdHVhbFxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IGV4cGVjdGVkXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQubm90RXF1YWwgPSBmdW5jdGlvbiAoYWN0LCBleHAsIG1zZykge1xuXHQgICAgdmFyIHRlc3QgPSBuZXcgQXNzZXJ0aW9uKGFjdCwgbXNnLCBhc3NlcnQubm90RXF1YWwpO1xuXHRcblx0ICAgIHRlc3QuYXNzZXJ0KFxuXHQgICAgICAgIGV4cCAhPSBmbGFnKHRlc3QsICdvYmplY3QnKVxuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBlcXVhbCAje2V4cH0nXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gZXF1YWwgI3thY3R9J1xuXHQgICAgICAsIGV4cFxuXHQgICAgICAsIGFjdFxuXHQgICAgKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLnN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgc3RyaWN0IGVxdWFsaXR5IChgPT09YCkgb2YgYGFjdHVhbGAgYW5kIGBleHBlY3RlZGAuXG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0LnN0cmljdEVxdWFsKHRydWUsIHRydWUsICd0aGVzZSBib29sZWFucyBhcmUgc3RyaWN0bHkgZXF1YWwnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIHN0cmljdEVxdWFsXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gYWN0dWFsXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gZXhwZWN0ZWRcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5zdHJpY3RFcXVhbCA9IGZ1bmN0aW9uIChhY3QsIGV4cCwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKGFjdCwgbXNnKS50by5lcXVhbChleHApO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAubm90U3RyaWN0RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyBzdHJpY3QgaW5lcXVhbGl0eSAoYCE9PWApIG9mIGBhY3R1YWxgIGFuZCBgZXhwZWN0ZWRgLlxuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5ub3RTdHJpY3RFcXVhbCgzLCAnMycsICdubyBjb2VyY2lvbiBmb3Igc3RyaWN0IGVxdWFsaXR5Jyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBub3RTdHJpY3RFcXVhbFxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IGFjdHVhbFxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IGV4cGVjdGVkXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQubm90U3RyaWN0RXF1YWwgPSBmdW5jdGlvbiAoYWN0LCBleHAsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbihhY3QsIG1zZykudG8ubm90LmVxdWFsKGV4cCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGBhY3R1YWxgIGlzIGRlZXBseSBlcXVhbCB0byBgZXhwZWN0ZWRgLlxuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5kZWVwRXF1YWwoeyB0ZWE6ICdncmVlbicgfSwgeyB0ZWE6ICdncmVlbicgfSk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBkZWVwRXF1YWxcblx0ICAgKiBAcGFyYW0ge01peGVkfSBhY3R1YWxcblx0ICAgKiBAcGFyYW0ge01peGVkfSBleHBlY3RlZFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmRlZXBFcXVhbCA9IGZ1bmN0aW9uIChhY3QsIGV4cCwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKGFjdCwgbXNnKS50by5lcWwoZXhwKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLm5vdERlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnQgdGhhdCBgYWN0dWFsYCBpcyBub3QgZGVlcGx5IGVxdWFsIHRvIGBleHBlY3RlZGAuXG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0Lm5vdERlZXBFcXVhbCh7IHRlYTogJ2dyZWVuJyB9LCB7IHRlYTogJ2phc21pbmUnIH0pO1xuXHQgICAqXG5cdCAgICogQG5hbWUgbm90RGVlcEVxdWFsXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gYWN0dWFsXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gZXhwZWN0ZWRcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5ub3REZWVwRXF1YWwgPSBmdW5jdGlvbiAoYWN0LCBleHAsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbihhY3QsIG1zZykudG8ubm90LmVxbChleHApO1xuXHQgIH07XG5cdFxuXHQgICAvKipcblx0ICAgKiAjIyMgLmlzQWJvdmUodmFsdWVUb0NoZWNrLCB2YWx1ZVRvQmVBYm92ZSwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyBgdmFsdWVUb0NoZWNrYCBpcyBzdHJpY3RseSBncmVhdGVyIHRoYW4gKD4pIGB2YWx1ZVRvQmVBYm92ZWBcblx0ICAgKlxuXHQgICAqICAgICBhc3NlcnQuaXNBYm92ZSg1LCAyLCAnNSBpcyBzdHJpY3RseSBncmVhdGVyIHRoYW4gMicpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgaXNBYm92ZVxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlVG9DaGVja1xuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlVG9CZUFib3ZlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQuaXNBYm92ZSA9IGZ1bmN0aW9uICh2YWwsIGFidiwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5iZS5hYm92ZShhYnYpO1xuXHQgIH07XG5cdFxuXHQgICAvKipcblx0ICAgKiAjIyMgLmlzQXRMZWFzdCh2YWx1ZVRvQ2hlY2ssIHZhbHVlVG9CZUF0TGVhc3QsIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgYHZhbHVlVG9DaGVja2AgaXMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICg+PSkgYHZhbHVlVG9CZUF0TGVhc3RgXG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0LmlzQXRMZWFzdCg1LCAyLCAnNSBpcyBncmVhdGVyIG9yIGVxdWFsIHRvIDInKTtcblx0ICAgKiAgICAgYXNzZXJ0LmlzQXRMZWFzdCgzLCAzLCAnMyBpcyBncmVhdGVyIG9yIGVxdWFsIHRvIDMnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGlzQXRMZWFzdFxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlVG9DaGVja1xuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlVG9CZUF0TGVhc3Rcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5pc0F0TGVhc3QgPSBmdW5jdGlvbiAodmFsLCBhdGxzdCwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5iZS5sZWFzdChhdGxzdCk7XG5cdCAgfTtcblx0XG5cdCAgIC8qKlxuXHQgICAqICMjIyAuaXNCZWxvdyh2YWx1ZVRvQ2hlY2ssIHZhbHVlVG9CZUJlbG93LCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIGB2YWx1ZVRvQ2hlY2tgIGlzIHN0cmljdGx5IGxlc3MgdGhhbiAoPCkgYHZhbHVlVG9CZUJlbG93YFxuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5pc0JlbG93KDMsIDYsICczIGlzIHN0cmljdGx5IGxlc3MgdGhhbiA2Jyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBpc0JlbG93XG5cdCAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVUb0NoZWNrXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVUb0JlQmVsb3dcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5pc0JlbG93ID0gZnVuY3Rpb24gKHZhbCwgYmx3LCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLmJlLmJlbG93KGJsdyk7XG5cdCAgfTtcblx0XG5cdCAgIC8qKlxuXHQgICAqICMjIyAuaXNBdE1vc3QodmFsdWVUb0NoZWNrLCB2YWx1ZVRvQmVBdE1vc3QsIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgYHZhbHVlVG9DaGVja2AgaXMgbGVzcyB0aGFuIG9yIGVxdWFsIHRvICg8PSkgYHZhbHVlVG9CZUF0TW9zdGBcblx0ICAgKlxuXHQgICAqICAgICBhc3NlcnQuaXNBdE1vc3QoMywgNiwgJzMgaXMgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIDYnKTtcblx0ICAgKiAgICAgYXNzZXJ0LmlzQXRNb3N0KDQsIDQsICc0IGlzIGxlc3MgdGhhbiBvciBlcXVhbCB0byA0Jyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBpc0F0TW9zdFxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlVG9DaGVja1xuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlVG9CZUF0TW9zdFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmlzQXRNb3N0ID0gZnVuY3Rpb24gKHZhbCwgYXRtc3QsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8uYmUubW9zdChhdG1zdCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5pc1RydWUodmFsdWUsIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBgdmFsdWVgIGlzIHRydWUuXG5cdCAgICpcblx0ICAgKiAgICAgdmFyIHRlYVNlcnZlZCA9IHRydWU7XG5cdCAgICogICAgIGFzc2VydC5pc1RydWUodGVhU2VydmVkLCAndGhlIHRlYSBoYXMgYmVlbiBzZXJ2ZWQnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGlzVHJ1ZVxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQuaXNUcnVlID0gZnVuY3Rpb24gKHZhbCwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS5pc1sndHJ1ZSddO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuaXNOb3RUcnVlKHZhbHVlLCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYHZhbHVlYCBpcyBub3QgdHJ1ZS5cblx0ICAgKlxuXHQgICAqICAgICB2YXIgdGVhID0gJ3Rhc3R5IGNoYWknO1xuXHQgICAqICAgICBhc3NlcnQuaXNOb3RUcnVlKHRlYSwgJ2dyZWF0LCB0aW1lIGZvciB0ZWEhJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBpc05vdFRydWVcblx0ICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmlzTm90VHJ1ZSA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8ubm90LmVxdWFsKHRydWUpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuaXNGYWxzZSh2YWx1ZSwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAgaXMgZmFsc2UuXG5cdCAgICpcblx0ICAgKiAgICAgdmFyIHRlYVNlcnZlZCA9IGZhbHNlO1xuXHQgICAqICAgICBhc3NlcnQuaXNGYWxzZSh0ZWFTZXJ2ZWQsICdubyB0ZWEgeWV0PyBobW0uLi4nKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGlzRmFsc2Vcblx0ICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmlzRmFsc2UgPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLmlzWydmYWxzZSddO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuaXNOb3RGYWxzZSh2YWx1ZSwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAgaXMgbm90IGZhbHNlLlxuXHQgICAqXG5cdCAgICogICAgIHZhciB0ZWEgPSAndGFzdHkgY2hhaSc7XG5cdCAgICogICAgIGFzc2VydC5pc05vdEZhbHNlKHRlYSwgJ2dyZWF0LCB0aW1lIGZvciB0ZWEhJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBpc05vdEZhbHNlXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5pc05vdEZhbHNlID0gZnVuY3Rpb24gKHZhbCwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5ub3QuZXF1YWwoZmFsc2UpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuaXNOdWxsKHZhbHVlLCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYHZhbHVlYCBpcyBudWxsLlxuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5pc051bGwoZXJyLCAndGhlcmUgd2FzIG5vIGVycm9yJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBpc051bGxcblx0ICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmlzTnVsbCA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8uZXF1YWwobnVsbCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5pc05vdE51bGwodmFsdWUsIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBgdmFsdWVgIGlzIG5vdCBudWxsLlxuXHQgICAqXG5cdCAgICogICAgIHZhciB0ZWEgPSAndGFzdHkgY2hhaSc7XG5cdCAgICogICAgIGFzc2VydC5pc05vdE51bGwodGVhLCAnZ3JlYXQsIHRpbWUgZm9yIHRlYSEnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGlzTm90TnVsbFxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQuaXNOb3ROdWxsID0gZnVuY3Rpb24gKHZhbCwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5ub3QuZXF1YWwobnVsbCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5pc05hTlxuXHQgICAqIEFzc2VydHMgdGhhdCB2YWx1ZSBpcyBOYU5cblx0ICAgKlxuXHQgICAqICAgIGFzc2VydC5pc05hTignZm9vJywgJ2ZvbyBpcyBOYU4nKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGlzTmFOXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5pc05hTiA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8uYmUuTmFOO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuaXNOb3ROYU5cblx0ICAgKiBBc3NlcnRzIHRoYXQgdmFsdWUgaXMgbm90IE5hTlxuXHQgICAqXG5cdCAgICogICAgYXNzZXJ0LmlzTm90TmFOKDQsICc0IGlzIG5vdCBOYU4nKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGlzTm90TmFOXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdCAgYXNzZXJ0LmlzTm90TmFOID0gZnVuY3Rpb24gKHZhbCwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS5ub3QudG8uYmUuTmFOO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuaXNVbmRlZmluZWQodmFsdWUsIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBgdmFsdWVgIGlzIGB1bmRlZmluZWRgLlxuXHQgICAqXG5cdCAgICogICAgIHZhciB0ZWE7XG5cdCAgICogICAgIGFzc2VydC5pc1VuZGVmaW5lZCh0ZWEsICdubyB0ZWEgZGVmaW5lZCcpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgaXNVbmRlZmluZWRcblx0ICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmlzVW5kZWZpbmVkID0gZnVuY3Rpb24gKHZhbCwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5lcXVhbCh1bmRlZmluZWQpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuaXNEZWZpbmVkKHZhbHVlLCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYHZhbHVlYCBpcyBub3QgYHVuZGVmaW5lZGAuXG5cdCAgICpcblx0ICAgKiAgICAgdmFyIHRlYSA9ICdjdXAgb2YgY2hhaSc7XG5cdCAgICogICAgIGFzc2VydC5pc0RlZmluZWQodGVhLCAndGVhIGhhcyBiZWVuIGRlZmluZWQnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGlzRGVmaW5lZFxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQuaXNEZWZpbmVkID0gZnVuY3Rpb24gKHZhbCwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5ub3QuZXF1YWwodW5kZWZpbmVkKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLmlzRnVuY3Rpb24odmFsdWUsIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBgdmFsdWVgIGlzIGEgZnVuY3Rpb24uXG5cdCAgICpcblx0ICAgKiAgICAgZnVuY3Rpb24gc2VydmVUZWEoKSB7IHJldHVybiAnY3VwIG9mIHRlYSc7IH07XG5cdCAgICogICAgIGFzc2VydC5pc0Z1bmN0aW9uKHNlcnZlVGVhLCAnZ3JlYXQsIHdlIGNhbiBoYXZlIHRlYSBub3cnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGlzRnVuY3Rpb25cblx0ICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmlzRnVuY3Rpb24gPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLmJlLmEoJ2Z1bmN0aW9uJyk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5pc05vdEZ1bmN0aW9uKHZhbHVlLCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYHZhbHVlYCBpcyBfbm90XyBhIGZ1bmN0aW9uLlxuXHQgICAqXG5cdCAgICogICAgIHZhciBzZXJ2ZVRlYSA9IFsgJ2hlYXQnLCAncG91cicsICdzaXAnIF07XG5cdCAgICogICAgIGFzc2VydC5pc05vdEZ1bmN0aW9uKHNlcnZlVGVhLCAnZ3JlYXQsIHdlIGhhdmUgbGlzdGVkIHRoZSBzdGVwcycpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgaXNOb3RGdW5jdGlvblxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQuaXNOb3RGdW5jdGlvbiA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8ubm90LmJlLmEoJ2Z1bmN0aW9uJyk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5pc09iamVjdCh2YWx1ZSwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAgaXMgYW4gb2JqZWN0IChhcyByZXZlYWxlZCBieVxuXHQgICAqIGBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nYCkuXG5cdCAgICpcblx0ICAgKiAgICAgdmFyIHNlbGVjdGlvbiA9IHsgbmFtZTogJ0NoYWknLCBzZXJ2ZTogJ3dpdGggc3BpY2VzJyB9O1xuXHQgICAqICAgICBhc3NlcnQuaXNPYmplY3Qoc2VsZWN0aW9uLCAndGVhIHNlbGVjdGlvbiBpcyBhbiBvYmplY3QnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGlzT2JqZWN0XG5cdCAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5pc09iamVjdCA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8uYmUuYSgnb2JqZWN0Jyk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5pc05vdE9iamVjdCh2YWx1ZSwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAgaXMgX25vdF8gYW4gb2JqZWN0LlxuXHQgICAqXG5cdCAgICogICAgIHZhciBzZWxlY3Rpb24gPSAnY2hhaSdcblx0ICAgKiAgICAgYXNzZXJ0LmlzTm90T2JqZWN0KHNlbGVjdGlvbiwgJ3RlYSBzZWxlY3Rpb24gaXMgbm90IGFuIG9iamVjdCcpO1xuXHQgICAqICAgICBhc3NlcnQuaXNOb3RPYmplY3QobnVsbCwgJ251bGwgaXMgbm90IGFuIG9iamVjdCcpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgaXNOb3RPYmplY3Rcblx0ICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmlzTm90T2JqZWN0ID0gZnVuY3Rpb24gKHZhbCwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5ub3QuYmUuYSgnb2JqZWN0Jyk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5pc0FycmF5KHZhbHVlLCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYHZhbHVlYCBpcyBhbiBhcnJheS5cblx0ICAgKlxuXHQgICAqICAgICB2YXIgbWVudSA9IFsgJ2dyZWVuJywgJ2NoYWknLCAnb29sb25nJyBdO1xuXHQgICAqICAgICBhc3NlcnQuaXNBcnJheShtZW51LCAnd2hhdCBraW5kIG9mIHRlYSBkbyB3ZSB3YW50PycpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgaXNBcnJheVxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQuaXNBcnJheSA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8uYmUuYW4oJ2FycmF5Jyk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5pc05vdEFycmF5KHZhbHVlLCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYHZhbHVlYCBpcyBfbm90XyBhbiBhcnJheS5cblx0ICAgKlxuXHQgICAqICAgICB2YXIgbWVudSA9ICdncmVlbnxjaGFpfG9vbG9uZyc7XG5cdCAgICogICAgIGFzc2VydC5pc05vdEFycmF5KG1lbnUsICd3aGF0IGtpbmQgb2YgdGVhIGRvIHdlIHdhbnQ/Jyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBpc05vdEFycmF5XG5cdCAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5pc05vdEFycmF5ID0gZnVuY3Rpb24gKHZhbCwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5ub3QuYmUuYW4oJ2FycmF5Jyk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5pc1N0cmluZyh2YWx1ZSwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAgaXMgYSBzdHJpbmcuXG5cdCAgICpcblx0ICAgKiAgICAgdmFyIHRlYU9yZGVyID0gJ2NoYWknO1xuXHQgICAqICAgICBhc3NlcnQuaXNTdHJpbmcodGVhT3JkZXIsICdvcmRlciBwbGFjZWQnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGlzU3RyaW5nXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5pc1N0cmluZyA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8uYmUuYSgnc3RyaW5nJyk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5pc05vdFN0cmluZyh2YWx1ZSwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAgaXMgX25vdF8gYSBzdHJpbmcuXG5cdCAgICpcblx0ICAgKiAgICAgdmFyIHRlYU9yZGVyID0gNDtcblx0ICAgKiAgICAgYXNzZXJ0LmlzTm90U3RyaW5nKHRlYU9yZGVyLCAnb3JkZXIgcGxhY2VkJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBpc05vdFN0cmluZ1xuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQuaXNOb3RTdHJpbmcgPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLm5vdC5iZS5hKCdzdHJpbmcnKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLmlzTnVtYmVyKHZhbHVlLCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYHZhbHVlYCBpcyBhIG51bWJlci5cblx0ICAgKlxuXHQgICAqICAgICB2YXIgY3VwcyA9IDI7XG5cdCAgICogICAgIGFzc2VydC5pc051bWJlcihjdXBzLCAnaG93IG1hbnkgY3VwcycpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgaXNOdW1iZXJcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5pc051bWJlciA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8uYmUuYSgnbnVtYmVyJyk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5pc05vdE51bWJlcih2YWx1ZSwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAgaXMgX25vdF8gYSBudW1iZXIuXG5cdCAgICpcblx0ICAgKiAgICAgdmFyIGN1cHMgPSAnMiBjdXBzIHBsZWFzZSc7XG5cdCAgICogICAgIGFzc2VydC5pc05vdE51bWJlcihjdXBzLCAnaG93IG1hbnkgY3VwcycpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgaXNOb3ROdW1iZXJcblx0ICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmlzTm90TnVtYmVyID0gZnVuY3Rpb24gKHZhbCwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5ub3QuYmUuYSgnbnVtYmVyJyk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5pc0Jvb2xlYW4odmFsdWUsIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBgdmFsdWVgIGlzIGEgYm9vbGVhbi5cblx0ICAgKlxuXHQgICAqICAgICB2YXIgdGVhUmVhZHkgPSB0cnVlXG5cdCAgICogICAgICAgLCB0ZWFTZXJ2ZWQgPSBmYWxzZTtcblx0ICAgKlxuXHQgICAqICAgICBhc3NlcnQuaXNCb29sZWFuKHRlYVJlYWR5LCAnaXMgdGhlIHRlYSByZWFkeScpO1xuXHQgICAqICAgICBhc3NlcnQuaXNCb29sZWFuKHRlYVNlcnZlZCwgJ2hhcyB0ZWEgYmVlbiBzZXJ2ZWQnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGlzQm9vbGVhblxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQuaXNCb29sZWFuID0gZnVuY3Rpb24gKHZhbCwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5iZS5hKCdib29sZWFuJyk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5pc05vdEJvb2xlYW4odmFsdWUsIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBgdmFsdWVgIGlzIF9ub3RfIGEgYm9vbGVhbi5cblx0ICAgKlxuXHQgICAqICAgICB2YXIgdGVhUmVhZHkgPSAneWVwJ1xuXHQgICAqICAgICAgICwgdGVhU2VydmVkID0gJ25vcGUnO1xuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5pc05vdEJvb2xlYW4odGVhUmVhZHksICdpcyB0aGUgdGVhIHJlYWR5Jyk7XG5cdCAgICogICAgIGFzc2VydC5pc05vdEJvb2xlYW4odGVhU2VydmVkLCAnaGFzIHRlYSBiZWVuIHNlcnZlZCcpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgaXNOb3RCb29sZWFuXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5pc05vdEJvb2xlYW4gPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLm5vdC5iZS5hKCdib29sZWFuJyk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC50eXBlT2YodmFsdWUsIG5hbWUsIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBgdmFsdWVgJ3MgdHlwZSBpcyBgbmFtZWAsIGFzIGRldGVybWluZWQgYnlcblx0ICAgKiBgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ2AuXG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0LnR5cGVPZih7IHRlYTogJ2NoYWknIH0sICdvYmplY3QnLCAnd2UgaGF2ZSBhbiBvYmplY3QnKTtcblx0ICAgKiAgICAgYXNzZXJ0LnR5cGVPZihbJ2NoYWknLCAnamFzbWluZSddLCAnYXJyYXknLCAnd2UgaGF2ZSBhbiBhcnJheScpO1xuXHQgICAqICAgICBhc3NlcnQudHlwZU9mKCd0ZWEnLCAnc3RyaW5nJywgJ3dlIGhhdmUgYSBzdHJpbmcnKTtcblx0ICAgKiAgICAgYXNzZXJ0LnR5cGVPZigvdGVhLywgJ3JlZ2V4cCcsICd3ZSBoYXZlIGEgcmVndWxhciBleHByZXNzaW9uJyk7XG5cdCAgICogICAgIGFzc2VydC50eXBlT2YobnVsbCwgJ251bGwnLCAnd2UgaGF2ZSBhIG51bGwnKTtcblx0ICAgKiAgICAgYXNzZXJ0LnR5cGVPZih1bmRlZmluZWQsICd1bmRlZmluZWQnLCAnd2UgaGF2ZSBhbiB1bmRlZmluZWQnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIHR5cGVPZlxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC50eXBlT2YgPSBmdW5jdGlvbiAodmFsLCB0eXBlLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLmJlLmEodHlwZSk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5ub3RUeXBlT2YodmFsdWUsIG5hbWUsIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBgdmFsdWVgJ3MgdHlwZSBpcyBfbm90XyBgbmFtZWAsIGFzIGRldGVybWluZWQgYnlcblx0ICAgKiBgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ2AuXG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0Lm5vdFR5cGVPZigndGVhJywgJ251bWJlcicsICdzdHJpbmdzIGFyZSBub3QgbnVtYmVycycpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgbm90VHlwZU9mXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZW9mIG5hbWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5ub3RUeXBlT2YgPSBmdW5jdGlvbiAodmFsLCB0eXBlLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLm5vdC5iZS5hKHR5cGUpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuaW5zdGFuY2VPZihvYmplY3QsIGNvbnN0cnVjdG9yLCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYHZhbHVlYCBpcyBhbiBpbnN0YW5jZSBvZiBgY29uc3RydWN0b3JgLlxuXHQgICAqXG5cdCAgICogICAgIHZhciBUZWEgPSBmdW5jdGlvbiAobmFtZSkgeyB0aGlzLm5hbWUgPSBuYW1lOyB9XG5cdCAgICogICAgICAgLCBjaGFpID0gbmV3IFRlYSgnY2hhaScpO1xuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5pbnN0YW5jZU9mKGNoYWksIFRlYSwgJ2NoYWkgaXMgYW4gaW5zdGFuY2Ugb2YgdGVhJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBpbnN0YW5jZU9mXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuXHQgICAqIEBwYXJhbSB7Q29uc3RydWN0b3J9IGNvbnN0cnVjdG9yXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQuaW5zdGFuY2VPZiA9IGZ1bmN0aW9uICh2YWwsIHR5cGUsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8uYmUuaW5zdGFuY2VPZih0eXBlKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLm5vdEluc3RhbmNlT2Yob2JqZWN0LCBjb25zdHJ1Y3RvciwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyBgdmFsdWVgIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiBgY29uc3RydWN0b3JgLlxuXHQgICAqXG5cdCAgICogICAgIHZhciBUZWEgPSBmdW5jdGlvbiAobmFtZSkgeyB0aGlzLm5hbWUgPSBuYW1lOyB9XG5cdCAgICogICAgICAgLCBjaGFpID0gbmV3IFN0cmluZygnY2hhaScpO1xuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5ub3RJbnN0YW5jZU9mKGNoYWksIFRlYSwgJ2NoYWkgaXMgbm90IGFuIGluc3RhbmNlIG9mIHRlYScpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgbm90SW5zdGFuY2VPZlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3Rcblx0ICAgKiBAcGFyYW0ge0NvbnN0cnVjdG9yfSBjb25zdHJ1Y3RvclxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0Lm5vdEluc3RhbmNlT2YgPSBmdW5jdGlvbiAodmFsLCB0eXBlLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLm5vdC5iZS5pbnN0YW5jZU9mKHR5cGUpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuaW5jbHVkZShoYXlzdGFjaywgbmVlZGxlLCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYGhheXN0YWNrYCBpbmNsdWRlcyBgbmVlZGxlYC4gV29ya3Ncblx0ICAgKiBmb3Igc3RyaW5ncyBhbmQgYXJyYXlzLlxuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5pbmNsdWRlKCdmb29iYXInLCAnYmFyJywgJ2Zvb2JhciBjb250YWlucyBzdHJpbmcgXCJiYXJcIicpO1xuXHQgICAqICAgICBhc3NlcnQuaW5jbHVkZShbIDEsIDIsIDMgXSwgMywgJ2FycmF5IGNvbnRhaW5zIHZhbHVlJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBpbmNsdWRlXG5cdCAgICogQHBhcmFtIHtBcnJheXxTdHJpbmd9IGhheXN0YWNrXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gbmVlZGxlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQuaW5jbHVkZSA9IGZ1bmN0aW9uIChleHAsIGluYywgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKGV4cCwgbXNnLCBhc3NlcnQuaW5jbHVkZSkuaW5jbHVkZShpbmMpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAubm90SW5jbHVkZShoYXlzdGFjaywgbmVlZGxlLCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYGhheXN0YWNrYCBkb2VzIG5vdCBpbmNsdWRlIGBuZWVkbGVgLiBXb3Jrc1xuXHQgICAqIGZvciBzdHJpbmdzIGFuZCBhcnJheXMuXG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0Lm5vdEluY2x1ZGUoJ2Zvb2JhcicsICdiYXonLCAnc3RyaW5nIG5vdCBpbmNsdWRlIHN1YnN0cmluZycpO1xuXHQgICAqICAgICBhc3NlcnQubm90SW5jbHVkZShbIDEsIDIsIDMgXSwgNCwgJ2FycmF5IG5vdCBpbmNsdWRlIGNvbnRhaW4gdmFsdWUnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIG5vdEluY2x1ZGVcblx0ICAgKiBAcGFyYW0ge0FycmF5fFN0cmluZ30gaGF5c3RhY2tcblx0ICAgKiBAcGFyYW0ge01peGVkfSBuZWVkbGVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5ub3RJbmNsdWRlID0gZnVuY3Rpb24gKGV4cCwgaW5jLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24oZXhwLCBtc2csIGFzc2VydC5ub3RJbmNsdWRlKS5ub3QuaW5jbHVkZShpbmMpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAubWF0Y2godmFsdWUsIHJlZ2V4cCwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAgbWF0Y2hlcyB0aGUgcmVndWxhciBleHByZXNzaW9uIGByZWdleHBgLlxuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5tYXRjaCgnZm9vYmFyJywgL15mb28vLCAncmVnZXhwIG1hdGNoZXMnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIG1hdGNoXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge1JlZ0V4cH0gcmVnZXhwXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQubWF0Y2ggPSBmdW5jdGlvbiAoZXhwLCByZSwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKGV4cCwgbXNnKS50by5tYXRjaChyZSk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5ub3RNYXRjaCh2YWx1ZSwgcmVnZXhwLCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYHZhbHVlYCBkb2VzIG5vdCBtYXRjaCB0aGUgcmVndWxhciBleHByZXNzaW9uIGByZWdleHBgLlxuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5ub3RNYXRjaCgnZm9vYmFyJywgL15mb28vLCAncmVnZXhwIGRvZXMgbm90IG1hdGNoJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBub3RNYXRjaFxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtSZWdFeHB9IHJlZ2V4cFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0Lm5vdE1hdGNoID0gZnVuY3Rpb24gKGV4cCwgcmUsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbihleHAsIG1zZykudG8ubm90Lm1hdGNoKHJlKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLnByb3BlcnR5KG9iamVjdCwgcHJvcGVydHksIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBgb2JqZWN0YCBoYXMgYSBwcm9wZXJ0eSBuYW1lZCBieSBgcHJvcGVydHlgLlxuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5wcm9wZXJ0eSh7IHRlYTogeyBncmVlbjogJ21hdGNoYScgfX0sICd0ZWEnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIHByb3BlcnR5XG5cdCAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LnByb3BlcnR5ID0gZnVuY3Rpb24gKG9iaiwgcHJvcCwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKG9iaiwgbXNnKS50by5oYXZlLnByb3BlcnR5KHByb3ApO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAubm90UHJvcGVydHkob2JqZWN0LCBwcm9wZXJ0eSwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGBvYmplY3RgIGRvZXMgX25vdF8gaGF2ZSBhIHByb3BlcnR5IG5hbWVkIGJ5IGBwcm9wZXJ0eWAuXG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0Lm5vdFByb3BlcnR5KHsgdGVhOiB7IGdyZWVuOiAnbWF0Y2hhJyB9fSwgJ2NvZmZlZScpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgbm90UHJvcGVydHlcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQubm90UHJvcGVydHkgPSBmdW5jdGlvbiAob2JqLCBwcm9wLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24ob2JqLCBtc2cpLnRvLm5vdC5oYXZlLnByb3BlcnR5KHByb3ApO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuZGVlcFByb3BlcnR5KG9iamVjdCwgcHJvcGVydHksIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBgb2JqZWN0YCBoYXMgYSBwcm9wZXJ0eSBuYW1lZCBieSBgcHJvcGVydHlgLCB3aGljaCBjYW4gYmUgYVxuXHQgICAqIHN0cmluZyB1c2luZyBkb3QtIGFuZCBicmFja2V0LW5vdGF0aW9uIGZvciBkZWVwIHJlZmVyZW5jZS5cblx0ICAgKlxuXHQgICAqICAgICBhc3NlcnQuZGVlcFByb3BlcnR5KHsgdGVhOiB7IGdyZWVuOiAnbWF0Y2hhJyB9fSwgJ3RlYS5ncmVlbicpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgZGVlcFByb3BlcnR5XG5cdCAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmRlZXBQcm9wZXJ0eSA9IGZ1bmN0aW9uIChvYmosIHByb3AsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8uaGF2ZS5kZWVwLnByb3BlcnR5KHByb3ApO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAubm90RGVlcFByb3BlcnR5KG9iamVjdCwgcHJvcGVydHksIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBgb2JqZWN0YCBkb2VzIF9ub3RfIGhhdmUgYSBwcm9wZXJ0eSBuYW1lZCBieSBgcHJvcGVydHlgLCB3aGljaFxuXHQgICAqIGNhbiBiZSBhIHN0cmluZyB1c2luZyBkb3QtIGFuZCBicmFja2V0LW5vdGF0aW9uIGZvciBkZWVwIHJlZmVyZW5jZS5cblx0ICAgKlxuXHQgICAqICAgICBhc3NlcnQubm90RGVlcFByb3BlcnR5KHsgdGVhOiB7IGdyZWVuOiAnbWF0Y2hhJyB9fSwgJ3RlYS5vb2xvbmcnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIG5vdERlZXBQcm9wZXJ0eVxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3Rcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHlcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5ub3REZWVwUHJvcGVydHkgPSBmdW5jdGlvbiAob2JqLCBwcm9wLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24ob2JqLCBtc2cpLnRvLm5vdC5oYXZlLmRlZXAucHJvcGVydHkocHJvcCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5wcm9wZXJ0eVZhbChvYmplY3QsIHByb3BlcnR5LCB2YWx1ZSwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGBvYmplY3RgIGhhcyBhIHByb3BlcnR5IG5hbWVkIGJ5IGBwcm9wZXJ0eWAgd2l0aCB2YWx1ZSBnaXZlblxuXHQgICAqIGJ5IGB2YWx1ZWAuXG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0LnByb3BlcnR5VmFsKHsgdGVhOiAnaXMgZ29vZCcgfSwgJ3RlYScsICdpcyBnb29kJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBwcm9wZXJ0eVZhbFxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3Rcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHlcblx0ICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LnByb3BlcnR5VmFsID0gZnVuY3Rpb24gKG9iaiwgcHJvcCwgdmFsLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24ob2JqLCBtc2cpLnRvLmhhdmUucHJvcGVydHkocHJvcCwgdmFsKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLnByb3BlcnR5Tm90VmFsKG9iamVjdCwgcHJvcGVydHksIHZhbHVlLCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYG9iamVjdGAgaGFzIGEgcHJvcGVydHkgbmFtZWQgYnkgYHByb3BlcnR5YCwgYnV0IHdpdGggYSB2YWx1ZVxuXHQgICAqIGRpZmZlcmVudCBmcm9tIHRoYXQgZ2l2ZW4gYnkgYHZhbHVlYC5cblx0ICAgKlxuXHQgICAqICAgICBhc3NlcnQucHJvcGVydHlOb3RWYWwoeyB0ZWE6ICdpcyBnb29kJyB9LCAndGVhJywgJ2lzIGJhZCcpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgcHJvcGVydHlOb3RWYWxcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5XG5cdCAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5wcm9wZXJ0eU5vdFZhbCA9IGZ1bmN0aW9uIChvYmosIHByb3AsIHZhbCwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKG9iaiwgbXNnKS50by5ub3QuaGF2ZS5wcm9wZXJ0eShwcm9wLCB2YWwpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuZGVlcFByb3BlcnR5VmFsKG9iamVjdCwgcHJvcGVydHksIHZhbHVlLCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYG9iamVjdGAgaGFzIGEgcHJvcGVydHkgbmFtZWQgYnkgYHByb3BlcnR5YCB3aXRoIHZhbHVlIGdpdmVuXG5cdCAgICogYnkgYHZhbHVlYC4gYHByb3BlcnR5YCBjYW4gdXNlIGRvdC0gYW5kIGJyYWNrZXQtbm90YXRpb24gZm9yIGRlZXBcblx0ICAgKiByZWZlcmVuY2UuXG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0LmRlZXBQcm9wZXJ0eVZhbCh7IHRlYTogeyBncmVlbjogJ21hdGNoYScgfX0sICd0ZWEuZ3JlZW4nLCAnbWF0Y2hhJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBkZWVwUHJvcGVydHlWYWxcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5XG5cdCAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5kZWVwUHJvcGVydHlWYWwgPSBmdW5jdGlvbiAob2JqLCBwcm9wLCB2YWwsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8uaGF2ZS5kZWVwLnByb3BlcnR5KHByb3AsIHZhbCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5kZWVwUHJvcGVydHlOb3RWYWwob2JqZWN0LCBwcm9wZXJ0eSwgdmFsdWUsIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBgb2JqZWN0YCBoYXMgYSBwcm9wZXJ0eSBuYW1lZCBieSBgcHJvcGVydHlgLCBidXQgd2l0aCBhIHZhbHVlXG5cdCAgICogZGlmZmVyZW50IGZyb20gdGhhdCBnaXZlbiBieSBgdmFsdWVgLiBgcHJvcGVydHlgIGNhbiB1c2UgZG90LSBhbmRcblx0ICAgKiBicmFja2V0LW5vdGF0aW9uIGZvciBkZWVwIHJlZmVyZW5jZS5cblx0ICAgKlxuXHQgICAqICAgICBhc3NlcnQuZGVlcFByb3BlcnR5Tm90VmFsKHsgdGVhOiB7IGdyZWVuOiAnbWF0Y2hhJyB9fSwgJ3RlYS5ncmVlbicsICdrb25hY2hhJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBkZWVwUHJvcGVydHlOb3RWYWxcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5XG5cdCAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5kZWVwUHJvcGVydHlOb3RWYWwgPSBmdW5jdGlvbiAob2JqLCBwcm9wLCB2YWwsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8ubm90LmhhdmUuZGVlcC5wcm9wZXJ0eShwcm9wLCB2YWwpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAubGVuZ3RoT2Yob2JqZWN0LCBsZW5ndGgsIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBgb2JqZWN0YCBoYXMgYSBgbGVuZ3RoYCBwcm9wZXJ0eSB3aXRoIHRoZSBleHBlY3RlZCB2YWx1ZS5cblx0ICAgKlxuXHQgICAqICAgICBhc3NlcnQubGVuZ3RoT2YoWzEsMiwzXSwgMywgJ2FycmF5IGhhcyBsZW5ndGggb2YgMycpO1xuXHQgICAqICAgICBhc3NlcnQubGVuZ3RoT2YoJ2Zvb2JhcicsIDYsICdzdHJpbmcgaGFzIGxlbmd0aCBvZiA2Jyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBsZW5ndGhPZlxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IG9iamVjdFxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBsZW5ndGhcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5sZW5ndGhPZiA9IGZ1bmN0aW9uIChleHAsIGxlbiwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKGV4cCwgbXNnKS50by5oYXZlLmxlbmd0aChsZW4pO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAudGhyb3dzKGZ1bmN0aW9uLCBbY29uc3RydWN0b3Ivc3RyaW5nL3JlZ2V4cF0sIFtzdHJpbmcvcmVnZXhwXSwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGBmdW5jdGlvbmAgd2lsbCB0aHJvdyBhbiBlcnJvciB0aGF0IGlzIGFuIGluc3RhbmNlIG9mXG5cdCAgICogYGNvbnN0cnVjdG9yYCwgb3IgYWx0ZXJuYXRlbHkgdGhhdCBpdCB3aWxsIHRocm93IGFuIGVycm9yIHdpdGggbWVzc2FnZVxuXHQgICAqIG1hdGNoaW5nIGByZWdleHBgLlxuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC50aHJvd3MoZm4sICdmdW5jdGlvbiB0aHJvd3MgYSByZWZlcmVuY2UgZXJyb3InKTtcblx0ICAgKiAgICAgYXNzZXJ0LnRocm93cyhmbiwgL2Z1bmN0aW9uIHRocm93cyBhIHJlZmVyZW5jZSBlcnJvci8pO1xuXHQgICAqICAgICBhc3NlcnQudGhyb3dzKGZuLCBSZWZlcmVuY2VFcnJvcik7XG5cdCAgICogICAgIGFzc2VydC50aHJvd3MoZm4sIFJlZmVyZW5jZUVycm9yLCAnZnVuY3Rpb24gdGhyb3dzIGEgcmVmZXJlbmNlIGVycm9yJyk7XG5cdCAgICogICAgIGFzc2VydC50aHJvd3MoZm4sIFJlZmVyZW5jZUVycm9yLCAvZnVuY3Rpb24gdGhyb3dzIGEgcmVmZXJlbmNlIGVycm9yLyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSB0aHJvd3Ncblx0ICAgKiBAYWxpYXMgdGhyb3dcblx0ICAgKiBAYWxpYXMgVGhyb3dcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jdGlvblxuXHQgICAqIEBwYXJhbSB7RXJyb3JDb25zdHJ1Y3Rvcn0gY29uc3RydWN0b3Jcblx0ICAgKiBAcGFyYW0ge1JlZ0V4cH0gcmVnZXhwXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Vycm9yI0Vycm9yX3R5cGVzXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LnRocm93cyA9IGZ1bmN0aW9uIChmbiwgZXJydCwgZXJycywgbXNnKSB7XG5cdCAgICBpZiAoJ3N0cmluZycgPT09IHR5cGVvZiBlcnJ0IHx8IGVycnQgaW5zdGFuY2VvZiBSZWdFeHApIHtcblx0ICAgICAgZXJycyA9IGVycnQ7XG5cdCAgICAgIGVycnQgPSBudWxsO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBhc3NlcnRFcnIgPSBuZXcgQXNzZXJ0aW9uKGZuLCBtc2cpLnRvLnRocm93KGVycnQsIGVycnMpO1xuXHQgICAgcmV0dXJuIGZsYWcoYXNzZXJ0RXJyLCAnb2JqZWN0Jyk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5kb2VzTm90VGhyb3coZnVuY3Rpb24sIFtjb25zdHJ1Y3Rvci9yZWdleHBdLCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYGZ1bmN0aW9uYCB3aWxsIF9ub3RfIHRocm93IGFuIGVycm9yIHRoYXQgaXMgYW4gaW5zdGFuY2Ugb2Zcblx0ICAgKiBgY29uc3RydWN0b3JgLCBvciBhbHRlcm5hdGVseSB0aGF0IGl0IHdpbGwgbm90IHRocm93IGFuIGVycm9yIHdpdGggbWVzc2FnZVxuXHQgICAqIG1hdGNoaW5nIGByZWdleHBgLlxuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5kb2VzTm90VGhyb3coZm4sIEVycm9yLCAnZnVuY3Rpb24gZG9lcyBub3QgdGhyb3cnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGRvZXNOb3RUaHJvd1xuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmN0aW9uXG5cdCAgICogQHBhcmFtIHtFcnJvckNvbnN0cnVjdG9yfSBjb25zdHJ1Y3RvclxuXHQgICAqIEBwYXJhbSB7UmVnRXhwfSByZWdleHBcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRXJyb3IjRXJyb3JfdHlwZXNcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQuZG9lc05vdFRocm93ID0gZnVuY3Rpb24gKGZuLCB0eXBlLCBtc2cpIHtcblx0ICAgIGlmICgnc3RyaW5nJyA9PT0gdHlwZW9mIHR5cGUpIHtcblx0ICAgICAgbXNnID0gdHlwZTtcblx0ICAgICAgdHlwZSA9IG51bGw7XG5cdCAgICB9XG5cdFxuXHQgICAgbmV3IEFzc2VydGlvbihmbiwgbXNnKS50by5ub3QuVGhyb3codHlwZSk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5vcGVyYXRvcih2YWwxLCBvcGVyYXRvciwgdmFsMiwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQ29tcGFyZXMgdHdvIHZhbHVlcyB1c2luZyBgb3BlcmF0b3JgLlxuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5vcGVyYXRvcigxLCAnPCcsIDIsICdldmVyeXRoaW5nIGlzIG9rJyk7XG5cdCAgICogICAgIGFzc2VydC5vcGVyYXRvcigxLCAnPicsIDIsICd0aGlzIHdpbGwgZmFpbCcpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgb3BlcmF0b3Jcblx0ICAgKiBAcGFyYW0ge01peGVkfSB2YWwxXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG9wZXJhdG9yXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gdmFsMlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0Lm9wZXJhdG9yID0gZnVuY3Rpb24gKHZhbCwgb3BlcmF0b3IsIHZhbDIsIG1zZykge1xuXHQgICAgdmFyIG9rO1xuXHQgICAgc3dpdGNoKG9wZXJhdG9yKSB7XG5cdCAgICAgIGNhc2UgJz09Jzpcblx0ICAgICAgICBvayA9IHZhbCA9PSB2YWwyO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBjYXNlICc9PT0nOlxuXHQgICAgICAgIG9rID0gdmFsID09PSB2YWwyO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBjYXNlICc+Jzpcblx0ICAgICAgICBvayA9IHZhbCA+IHZhbDI7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGNhc2UgJz49Jzpcblx0ICAgICAgICBvayA9IHZhbCA+PSB2YWwyO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBjYXNlICc8Jzpcblx0ICAgICAgICBvayA9IHZhbCA8IHZhbDI7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGNhc2UgJzw9Jzpcblx0ICAgICAgICBvayA9IHZhbCA8PSB2YWwyO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBjYXNlICchPSc6XG5cdCAgICAgICAgb2sgPSB2YWwgIT0gdmFsMjtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgY2FzZSAnIT09Jzpcblx0ICAgICAgICBvayA9IHZhbCAhPT0gdmFsMjtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgZGVmYXVsdDpcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgb3BlcmF0b3IgXCInICsgb3BlcmF0b3IgKyAnXCInKTtcblx0ICAgIH1cblx0ICAgIHZhciB0ZXN0ID0gbmV3IEFzc2VydGlvbihvaywgbXNnKTtcblx0ICAgIHRlc3QuYXNzZXJ0KFxuXHQgICAgICAgIHRydWUgPT09IGZsYWcodGVzdCwgJ29iamVjdCcpXG5cdCAgICAgICwgJ2V4cGVjdGVkICcgKyB1dGlsLmluc3BlY3QodmFsKSArICcgdG8gYmUgJyArIG9wZXJhdG9yICsgJyAnICsgdXRpbC5pbnNwZWN0KHZhbDIpXG5cdCAgICAgICwgJ2V4cGVjdGVkICcgKyB1dGlsLmluc3BlY3QodmFsKSArICcgdG8gbm90IGJlICcgKyBvcGVyYXRvciArICcgJyArIHV0aWwuaW5zcGVjdCh2YWwyKSApO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuY2xvc2VUbyhhY3R1YWwsIGV4cGVjdGVkLCBkZWx0YSwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaXMgZXF1YWwgYGV4cGVjdGVkYCwgdG8gd2l0aGluIGEgKy8tIGBkZWx0YWAgcmFuZ2UuXG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0LmNsb3NlVG8oMS41LCAxLCAwLjUsICdudW1iZXJzIGFyZSBjbG9zZScpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgY2xvc2VUb1xuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBhY3R1YWxcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gZXhwZWN0ZWRcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gZGVsdGFcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5jbG9zZVRvID0gZnVuY3Rpb24gKGFjdCwgZXhwLCBkZWx0YSwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKGFjdCwgbXNnKS50by5iZS5jbG9zZVRvKGV4cCwgZGVsdGEpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuYXBwcm94aW1hdGVseShhY3R1YWwsIGV4cGVjdGVkLCBkZWx0YSwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaXMgZXF1YWwgYGV4cGVjdGVkYCwgdG8gd2l0aGluIGEgKy8tIGBkZWx0YWAgcmFuZ2UuXG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0LmFwcHJveGltYXRlbHkoMS41LCAxLCAwLjUsICdudW1iZXJzIGFyZSBjbG9zZScpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgYXBwcm94aW1hdGVseVxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBhY3R1YWxcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gZXhwZWN0ZWRcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gZGVsdGFcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5hcHByb3hpbWF0ZWx5ID0gZnVuY3Rpb24gKGFjdCwgZXhwLCBkZWx0YSwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKGFjdCwgbXNnKS50by5iZS5hcHByb3hpbWF0ZWx5KGV4cCwgZGVsdGEpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuc2FtZU1lbWJlcnMoc2V0MSwgc2V0MiwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGBzZXQxYCBhbmQgYHNldDJgIGhhdmUgdGhlIHNhbWUgbWVtYmVycy5cblx0ICAgKiBPcmRlciBpcyBub3QgdGFrZW4gaW50byBhY2NvdW50LlxuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5zYW1lTWVtYmVycyhbIDEsIDIsIDMgXSwgWyAyLCAxLCAzIF0sICdzYW1lIG1lbWJlcnMnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIHNhbWVNZW1iZXJzXG5cdCAgICogQHBhcmFtIHtBcnJheX0gc2V0MVxuXHQgICAqIEBwYXJhbSB7QXJyYXl9IHNldDJcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5zYW1lTWVtYmVycyA9IGZ1bmN0aW9uIChzZXQxLCBzZXQyLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24oc2V0MSwgbXNnKS50by5oYXZlLnNhbWUubWVtYmVycyhzZXQyKTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuc2FtZURlZXBNZW1iZXJzKHNldDEsIHNldDIsIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBgc2V0MWAgYW5kIGBzZXQyYCBoYXZlIHRoZSBzYW1lIG1lbWJlcnMgLSB1c2luZyBhIGRlZXAgZXF1YWxpdHkgY2hlY2tpbmcuXG5cdCAgICogT3JkZXIgaXMgbm90IHRha2VuIGludG8gYWNjb3VudC5cblx0ICAgKlxuXHQgICAqICAgICBhc3NlcnQuc2FtZURlZXBNZW1iZXJzKFsge2I6IDN9LCB7YTogMn0sIHtjOiA1fSBdLCBbIHtjOiA1fSwge2I6IDN9LCB7YTogMn0gXSwgJ3NhbWUgZGVlcCBtZW1iZXJzJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBzYW1lRGVlcE1lbWJlcnNcblx0ICAgKiBAcGFyYW0ge0FycmF5fSBzZXQxXG5cdCAgICogQHBhcmFtIHtBcnJheX0gc2V0MlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LnNhbWVEZWVwTWVtYmVycyA9IGZ1bmN0aW9uIChzZXQxLCBzZXQyLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24oc2V0MSwgbXNnKS50by5oYXZlLnNhbWUuZGVlcC5tZW1iZXJzKHNldDIpO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5pbmNsdWRlTWVtYmVycyhzdXBlcnNldCwgc3Vic2V0LCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYHN1YnNldGAgaXMgaW5jbHVkZWQgaW4gYHN1cGVyc2V0YC5cblx0ICAgKiBPcmRlciBpcyBub3QgdGFrZW4gaW50byBhY2NvdW50LlxuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5pbmNsdWRlTWVtYmVycyhbIDEsIDIsIDMgXSwgWyAyLCAxIF0sICdpbmNsdWRlIG1lbWJlcnMnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGluY2x1ZGVNZW1iZXJzXG5cdCAgICogQHBhcmFtIHtBcnJheX0gc3VwZXJzZXRcblx0ICAgKiBAcGFyYW0ge0FycmF5fSBzdWJzZXRcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5pbmNsdWRlTWVtYmVycyA9IGZ1bmN0aW9uIChzdXBlcnNldCwgc3Vic2V0LCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24oc3VwZXJzZXQsIG1zZykudG8uaW5jbHVkZS5tZW1iZXJzKHN1YnNldCk7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLm9uZU9mKGluTGlzdCwgbGlzdCwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IG5vbi1vYmplY3QsIG5vbi1hcnJheSB2YWx1ZSBgaW5MaXN0YCBhcHBlYXJzIGluIHRoZSBmbGF0IGFycmF5IGBsaXN0YC5cblx0ICAgKlxuXHQgICAqICAgICBhc3NlcnQub25lT2YoMSwgWyAyLCAxIF0sICdOb3QgZm91bmQgaW4gbGlzdCcpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgb25lT2Zcblx0ICAgKiBAcGFyYW0geyp9IGluTGlzdFxuXHQgICAqIEBwYXJhbSB7QXJyYXk8Kj59IGxpc3Rcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5vbmVPZiA9IGZ1bmN0aW9uIChpbkxpc3QsIGxpc3QsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbihpbkxpc3QsIG1zZykudG8uYmUub25lT2YobGlzdCk7XG5cdCAgfVxuXHRcblx0ICAgLyoqXG5cdCAgICogIyMjIC5jaGFuZ2VzKGZ1bmN0aW9uLCBvYmplY3QsIHByb3BlcnR5KVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGEgZnVuY3Rpb24gY2hhbmdlcyB0aGUgdmFsdWUgb2YgYSBwcm9wZXJ0eVxuXHQgICAqXG5cdCAgICogICAgIHZhciBvYmogPSB7IHZhbDogMTAgfTtcblx0ICAgKiAgICAgdmFyIGZuID0gZnVuY3Rpb24oKSB7IG9iai52YWwgPSAyMiB9O1xuXHQgICAqICAgICBhc3NlcnQuY2hhbmdlcyhmbiwgb2JqLCAndmFsJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBjaGFuZ2VzXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gbW9kaWZpZXIgZnVuY3Rpb25cblx0ICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5IG5hbWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmNoYW5nZXMgPSBmdW5jdGlvbiAoZm4sIG9iaiwgcHJvcCkge1xuXHQgICAgbmV3IEFzc2VydGlvbihmbikudG8uY2hhbmdlKG9iaiwgcHJvcCk7XG5cdCAgfVxuXHRcblx0ICAgLyoqXG5cdCAgICogIyMjIC5kb2VzTm90Q2hhbmdlKGZ1bmN0aW9uLCBvYmplY3QsIHByb3BlcnR5KVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGEgZnVuY3Rpb24gZG9lcyBub3QgY2hhbmdlcyB0aGUgdmFsdWUgb2YgYSBwcm9wZXJ0eVxuXHQgICAqXG5cdCAgICogICAgIHZhciBvYmogPSB7IHZhbDogMTAgfTtcblx0ICAgKiAgICAgdmFyIGZuID0gZnVuY3Rpb24oKSB7IGNvbnNvbGUubG9nKCdmb28nKTsgfTtcblx0ICAgKiAgICAgYXNzZXJ0LmRvZXNOb3RDaGFuZ2UoZm4sIG9iaiwgJ3ZhbCcpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgZG9lc05vdENoYW5nZVxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IG1vZGlmaWVyIGZ1bmN0aW9uXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eSBuYW1lXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5kb2VzTm90Q2hhbmdlID0gZnVuY3Rpb24gKGZuLCBvYmosIHByb3ApIHtcblx0ICAgIG5ldyBBc3NlcnRpb24oZm4pLnRvLm5vdC5jaGFuZ2Uob2JqLCBwcm9wKTtcblx0ICB9XG5cdFxuXHQgICAvKipcblx0ICAgKiAjIyMgLmluY3JlYXNlcyhmdW5jdGlvbiwgb2JqZWN0LCBwcm9wZXJ0eSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBhIGZ1bmN0aW9uIGluY3JlYXNlcyBhbiBvYmplY3QgcHJvcGVydHlcblx0ICAgKlxuXHQgICAqICAgICB2YXIgb2JqID0geyB2YWw6IDEwIH07XG5cdCAgICogICAgIHZhciBmbiA9IGZ1bmN0aW9uKCkgeyBvYmoudmFsID0gMTMgfTtcblx0ICAgKiAgICAgYXNzZXJ0LmluY3JlYXNlcyhmbiwgb2JqLCAndmFsJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBpbmNyZWFzZXNcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBtb2RpZmllciBmdW5jdGlvblxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3Rcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHkgbmFtZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQuaW5jcmVhc2VzID0gZnVuY3Rpb24gKGZuLCBvYmosIHByb3ApIHtcblx0ICAgIG5ldyBBc3NlcnRpb24oZm4pLnRvLmluY3JlYXNlKG9iaiwgcHJvcCk7XG5cdCAgfVxuXHRcblx0ICAgLyoqXG5cdCAgICogIyMjIC5kb2VzTm90SW5jcmVhc2UoZnVuY3Rpb24sIG9iamVjdCwgcHJvcGVydHkpXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYSBmdW5jdGlvbiBkb2VzIG5vdCBpbmNyZWFzZSBvYmplY3QgcHJvcGVydHlcblx0ICAgKlxuXHQgICAqICAgICB2YXIgb2JqID0geyB2YWw6IDEwIH07XG5cdCAgICogICAgIHZhciBmbiA9IGZ1bmN0aW9uKCkgeyBvYmoudmFsID0gOCB9O1xuXHQgICAqICAgICBhc3NlcnQuZG9lc05vdEluY3JlYXNlKGZuLCBvYmosICd2YWwnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGRvZXNOb3RJbmNyZWFzZVxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IG1vZGlmaWVyIGZ1bmN0aW9uXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eSBuYW1lXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5kb2VzTm90SW5jcmVhc2UgPSBmdW5jdGlvbiAoZm4sIG9iaiwgcHJvcCkge1xuXHQgICAgbmV3IEFzc2VydGlvbihmbikudG8ubm90LmluY3JlYXNlKG9iaiwgcHJvcCk7XG5cdCAgfVxuXHRcblx0ICAgLyoqXG5cdCAgICogIyMjIC5kZWNyZWFzZXMoZnVuY3Rpb24sIG9iamVjdCwgcHJvcGVydHkpXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYSBmdW5jdGlvbiBkZWNyZWFzZXMgYW4gb2JqZWN0IHByb3BlcnR5XG5cdCAgICpcblx0ICAgKiAgICAgdmFyIG9iaiA9IHsgdmFsOiAxMCB9O1xuXHQgICAqICAgICB2YXIgZm4gPSBmdW5jdGlvbigpIHsgb2JqLnZhbCA9IDUgfTtcblx0ICAgKiAgICAgYXNzZXJ0LmRlY3JlYXNlcyhmbiwgb2JqLCAndmFsJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBkZWNyZWFzZXNcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBtb2RpZmllciBmdW5jdGlvblxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3Rcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHkgbmFtZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQuZGVjcmVhc2VzID0gZnVuY3Rpb24gKGZuLCBvYmosIHByb3ApIHtcblx0ICAgIG5ldyBBc3NlcnRpb24oZm4pLnRvLmRlY3JlYXNlKG9iaiwgcHJvcCk7XG5cdCAgfVxuXHRcblx0ICAgLyoqXG5cdCAgICogIyMjIC5kb2VzTm90RGVjcmVhc2UoZnVuY3Rpb24sIG9iamVjdCwgcHJvcGVydHkpXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYSBmdW5jdGlvbiBkb2VzIG5vdCBkZWNyZWFzZXMgYW4gb2JqZWN0IHByb3BlcnR5XG5cdCAgICpcblx0ICAgKiAgICAgdmFyIG9iaiA9IHsgdmFsOiAxMCB9O1xuXHQgICAqICAgICB2YXIgZm4gPSBmdW5jdGlvbigpIHsgb2JqLnZhbCA9IDE1IH07XG5cdCAgICogICAgIGFzc2VydC5kb2VzTm90RGVjcmVhc2UoZm4sIG9iaiwgJ3ZhbCcpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgZG9lc05vdERlY3JlYXNlXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gbW9kaWZpZXIgZnVuY3Rpb25cblx0ICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5IG5hbWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmRvZXNOb3REZWNyZWFzZSA9IGZ1bmN0aW9uIChmbiwgb2JqLCBwcm9wKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKGZuKS50by5ub3QuZGVjcmVhc2Uob2JqLCBwcm9wKTtcblx0ICB9XG5cdFxuXHQgIC8qIVxuXHQgICAqICMjIyAuaWZFcnJvcihvYmplY3QpXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIGlmIHZhbHVlIGlzIG5vdCBhIGZhbHNlIHZhbHVlLCBhbmQgdGhyb3dzIGlmIGl0IGlzIGEgdHJ1ZSB2YWx1ZS5cblx0ICAgKiBUaGlzIGlzIGFkZGVkIHRvIGFsbG93IGZvciBjaGFpIHRvIGJlIGEgZHJvcC1pbiByZXBsYWNlbWVudCBmb3IgTm9kZSdzXG5cdCAgICogYXNzZXJ0IGNsYXNzLlxuXHQgICAqXG5cdCAgICogICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ0kgYW0gYSBjdXN0b20gZXJyb3InKTtcblx0ICAgKiAgICAgYXNzZXJ0LmlmRXJyb3IoZXJyKTsgLy8gUmV0aHJvd3MgZXJyIVxuXHQgICAqXG5cdCAgICogQG5hbWUgaWZFcnJvclxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3Rcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQuaWZFcnJvciA9IGZ1bmN0aW9uICh2YWwpIHtcblx0ICAgIGlmICh2YWwpIHtcblx0ICAgICAgdGhyb3codmFsKTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLmlzRXh0ZW5zaWJsZShvYmplY3QpXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYG9iamVjdGAgaXMgZXh0ZW5zaWJsZSAoY2FuIGhhdmUgbmV3IHByb3BlcnRpZXMgYWRkZWQgdG8gaXQpLlxuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5pc0V4dGVuc2libGUoe30pO1xuXHQgICAqXG5cdCAgICogQG5hbWUgaXNFeHRlbnNpYmxlXG5cdCAgICogQGFsaWFzIGV4dGVuc2libGVcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5pc0V4dGVuc2libGUgPSBmdW5jdGlvbiAob2JqLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24ob2JqLCBtc2cpLnRvLmJlLmV4dGVuc2libGU7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5pc05vdEV4dGVuc2libGUob2JqZWN0KVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGBvYmplY3RgIGlzIF9ub3RfIGV4dGVuc2libGUuXG5cdCAgICpcblx0ICAgKiAgICAgdmFyIG5vbkV4dGVuc2libGVPYmplY3QgPSBPYmplY3QucHJldmVudEV4dGVuc2lvbnMoe30pO1xuXHQgICAqICAgICB2YXIgc2VhbGVkT2JqZWN0ID0gT2JqZWN0LnNlYWwoe30pO1xuXHQgICAqICAgICB2YXIgZnJvemVuT2JqZWN0ID0gT2JqZWN0LmZyZWVzZSh7fSk7XG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0LmlzTm90RXh0ZW5zaWJsZShub25FeHRlbnNpYmxlT2JqZWN0KTtcblx0ICAgKiAgICAgYXNzZXJ0LmlzTm90RXh0ZW5zaWJsZShzZWFsZWRPYmplY3QpO1xuXHQgICAqICAgICBhc3NlcnQuaXNOb3RFeHRlbnNpYmxlKGZyb3plbk9iamVjdCk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBpc05vdEV4dGVuc2libGVcblx0ICAgKiBAYWxpYXMgbm90RXh0ZW5zaWJsZVxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3Rcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmlzTm90RXh0ZW5zaWJsZSA9IGZ1bmN0aW9uIChvYmosIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8ubm90LmJlLmV4dGVuc2libGU7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5pc1NlYWxlZChvYmplY3QpXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYG9iamVjdGAgaXMgc2VhbGVkIChjYW5ub3QgaGF2ZSBuZXcgcHJvcGVydGllcyBhZGRlZCB0byBpdFxuXHQgICAqIGFuZCBpdHMgZXhpc3RpbmcgcHJvcGVydGllcyBjYW5ub3QgYmUgcmVtb3ZlZCkuXG5cdCAgICpcblx0ICAgKiAgICAgdmFyIHNlYWxlZE9iamVjdCA9IE9iamVjdC5zZWFsKHt9KTtcblx0ICAgKiAgICAgdmFyIGZyb3plbk9iamVjdCA9IE9iamVjdC5zZWFsKHt9KTtcblx0ICAgKlxuXHQgICAqICAgICBhc3NlcnQuaXNTZWFsZWQoc2VhbGVkT2JqZWN0KTtcblx0ICAgKiAgICAgYXNzZXJ0LmlzU2VhbGVkKGZyb3plbk9iamVjdCk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBpc1NlYWxlZFxuXHQgICAqIEBhbGlhcyBzZWFsZWRcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5pc1NlYWxlZCA9IGZ1bmN0aW9uIChvYmosIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8uYmUuc2VhbGVkO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuaXNOb3RTZWFsZWQob2JqZWN0KVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGBvYmplY3RgIGlzIF9ub3RfIHNlYWxlZC5cblx0ICAgKlxuXHQgICAqICAgICBhc3NlcnQuaXNOb3RTZWFsZWQoe30pO1xuXHQgICAqXG5cdCAgICogQG5hbWUgaXNOb3RTZWFsZWRcblx0ICAgKiBAYWxpYXMgbm90U2VhbGVkXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQuaXNOb3RTZWFsZWQgPSBmdW5jdGlvbiAob2JqLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24ob2JqLCBtc2cpLnRvLm5vdC5iZS5zZWFsZWQ7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5pc0Zyb3plbihvYmplY3QpXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYG9iamVjdGAgaXMgZnJvemVuIChjYW5ub3QgaGF2ZSBuZXcgcHJvcGVydGllcyBhZGRlZCB0byBpdFxuXHQgICAqIGFuZCBpdHMgZXhpc3RpbmcgcHJvcGVydGllcyBjYW5ub3QgYmUgbW9kaWZpZWQpLlxuXHQgICAqXG5cdCAgICogICAgIHZhciBmcm96ZW5PYmplY3QgPSBPYmplY3QuZnJlZXplKHt9KTtcblx0ICAgKiAgICAgYXNzZXJ0LmZyb3plbihmcm96ZW5PYmplY3QpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgaXNGcm96ZW5cblx0ICAgKiBAYWxpYXMgZnJvemVuXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQuaXNGcm96ZW4gPSBmdW5jdGlvbiAob2JqLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24ob2JqLCBtc2cpLnRvLmJlLmZyb3plbjtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLmlzTm90RnJvemVuKG9iamVjdClcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBgb2JqZWN0YCBpcyBfbm90XyBmcm96ZW4uXG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0LmlzTm90RnJvemVuKHt9KTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGlzTm90RnJvemVuXG5cdCAgICogQGFsaWFzIG5vdEZyb3plblxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3Rcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmlzTm90RnJvemVuID0gZnVuY3Rpb24gKG9iaiwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKG9iaiwgbXNnKS50by5ub3QuYmUuZnJvemVuO1xuXHQgIH07XG5cdFxuXHQgIC8qIVxuXHQgICAqIEFsaWFzZXMuXG5cdCAgICovXG5cdFxuXHQgIChmdW5jdGlvbiBhbGlhcyhuYW1lLCBhcyl7XG5cdCAgICBhc3NlcnRbYXNdID0gYXNzZXJ0W25hbWVdO1xuXHQgICAgcmV0dXJuIGFsaWFzO1xuXHQgIH0pXG5cdCAgKCdpc09rJywgJ29rJylcblx0ICAoJ2lzTm90T2snLCAnbm90T2snKVxuXHQgICgndGhyb3dzJywgJ3Rocm93Jylcblx0ICAoJ3Rocm93cycsICdUaHJvdycpXG5cdCAgKCdpc0V4dGVuc2libGUnLCAnZXh0ZW5zaWJsZScpXG5cdCAgKCdpc05vdEV4dGVuc2libGUnLCAnbm90RXh0ZW5zaWJsZScpXG5cdCAgKCdpc1NlYWxlZCcsICdzZWFsZWQnKVxuXHQgICgnaXNOb3RTZWFsZWQnLCAnbm90U2VhbGVkJylcblx0ICAoJ2lzRnJvemVuJywgJ2Zyb3plbicpXG5cdCAgKCdpc05vdEZyb3plbicsICdub3RGcm96ZW4nKTtcblx0fTtcblxuXG4vKioqLyB9LFxuLyogNTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLlBMQVlFUl9JRCA9IGV4cG9ydHMuQVBQX0lEID0gdW5kZWZpbmVkO1xuXHRcblx0dmFyIF92YXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0XG5cdHZhciBfdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHRcblx0dmFyIEFQUF9JRCA9IGV4cG9ydHMuQVBQX0lEID0gKDAsIF91dGlscy5pc0RldikoKSA/ICczM2IzNTYyYS1kMzNiLTQyZWUtODhiYy0xNDM2ZTc4MDMxMWYnIDogJzdiNjA1M2UwLTk5MTEtNDAwMy1hMGE0LWEzM2U0MTdhZDY2Myc7XG5cdHZhciBQTEFZRVJfSUQgPSBleHBvcnRzLlBMQVlFUl9JRCA9ICgwLCBfdXRpbHMuaXNEZXYpKCkgPyAnYjM0ODE1NTctNTIxZC00ZDAxLWJlNzItYWNmMmMzZjQ2ZWZmJyA6ICcxNWIyMzUxMS1lMGNmLTQ4OWEtODY4Mi03Y2YxMjljYjQ1ODUnO1xuXG4vKioqLyB9LFxuLyogNTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXywgX193ZWJwYWNrX21vZHVsZV90ZW1wbGF0ZV9hcmd1bWVudF8wX18pIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX21vZHVsZV90ZW1wbGF0ZV9hcmd1bWVudF8wX18pO1xuXG5cbi8qKiovIH1cbi8qKioqKiovIF0pKSk7XG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogdGVzdC5qc1xuICoqLyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogd2VicGFjay9ib290c3RyYXAgNTMyODVlZmM0NWUxMTY5NWVkMTVcbiAqKi8iLCJyZXF1aXJlKCcuL2FwaS5qcycpO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vdGVzdC9lbnRyeS5qc1xuICoqLyIsIi8qKiogSU1QT1JUUyBGUk9NIGltcG9ydHMtbG9hZGVyICoqKi9cbihmdW5jdGlvbigpIHtcblxuKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgaWYgKHNlbGYuZmV0Y2gpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZU5hbWUobmFtZSkge1xuICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIG5hbWUgPSBTdHJpbmcobmFtZSlcbiAgICB9XG4gICAgaWYgKC9bXmEtejAtOVxcLSMkJSYnKisuXFxeX2B8fl0vaS50ZXN0KG5hbWUpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGNoYXJhY3RlciBpbiBoZWFkZXIgZmllbGQgbmFtZScpXG4gICAgfVxuICAgIHJldHVybiBuYW1lLnRvTG93ZXJDYXNlKClcbiAgfVxuXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZVZhbHVlKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHZhbHVlID0gU3RyaW5nKHZhbHVlKVxuICAgIH1cbiAgICByZXR1cm4gdmFsdWVcbiAgfVxuXG4gIGZ1bmN0aW9uIEhlYWRlcnMoaGVhZGVycykge1xuICAgIHRoaXMubWFwID0ge31cblxuICAgIGlmIChoZWFkZXJzIGluc3RhbmNlb2YgSGVhZGVycykge1xuICAgICAgaGVhZGVycy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG4gICAgICAgIHRoaXMuYXBwZW5kKG5hbWUsIHZhbHVlKVxuICAgICAgfSwgdGhpcylcblxuICAgIH0gZWxzZSBpZiAoaGVhZGVycykge1xuICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoaGVhZGVycykuZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgIHRoaXMuYXBwZW5kKG5hbWUsIGhlYWRlcnNbbmFtZV0pXG4gICAgICB9LCB0aGlzKVxuICAgIH1cbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgbmFtZSA9IG5vcm1hbGl6ZU5hbWUobmFtZSlcbiAgICB2YWx1ZSA9IG5vcm1hbGl6ZVZhbHVlKHZhbHVlKVxuICAgIHZhciBsaXN0ID0gdGhpcy5tYXBbbmFtZV1cbiAgICBpZiAoIWxpc3QpIHtcbiAgICAgIGxpc3QgPSBbXVxuICAgICAgdGhpcy5tYXBbbmFtZV0gPSBsaXN0XG4gICAgfVxuICAgIGxpc3QucHVzaCh2YWx1ZSlcbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlWydkZWxldGUnXSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBkZWxldGUgdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV1cbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgdmFsdWVzID0gdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV1cbiAgICByZXR1cm4gdmFsdWVzID8gdmFsdWVzWzBdIDogbnVsbFxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuZ2V0QWxsID0gZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiB0aGlzLm1hcFtub3JtYWxpemVOYW1lKG5hbWUpXSB8fCBbXVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiB0aGlzLm1hcC5oYXNPd25Qcm9wZXJ0eShub3JtYWxpemVOYW1lKG5hbWUpKVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICB0aGlzLm1hcFtub3JtYWxpemVOYW1lKG5hbWUpXSA9IFtub3JtYWxpemVWYWx1ZSh2YWx1ZSldXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24oY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0aGlzLm1hcCkuZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XG4gICAgICB0aGlzLm1hcFtuYW1lXS5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgdmFsdWUsIG5hbWUsIHRoaXMpXG4gICAgICB9LCB0aGlzKVxuICAgIH0sIHRoaXMpXG4gIH1cblxuICBmdW5jdGlvbiBjb25zdW1lZChib2R5KSB7XG4gICAgaWYgKGJvZHkuYm9keVVzZWQpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgVHlwZUVycm9yKCdBbHJlYWR5IHJlYWQnKSlcbiAgICB9XG4gICAgYm9keS5ib2R5VXNlZCA9IHRydWVcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbGVSZWFkZXJSZWFkeShyZWFkZXIpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlc29sdmUocmVhZGVyLnJlc3VsdClcbiAgICAgIH1cbiAgICAgIHJlYWRlci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChyZWFkZXIuZXJyb3IpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlYWRCbG9iQXNBcnJheUJ1ZmZlcihibG9iKSB7XG4gICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKClcbiAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoYmxvYilcbiAgICByZXR1cm4gZmlsZVJlYWRlclJlYWR5KHJlYWRlcilcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlYWRCbG9iQXNUZXh0KGJsb2IpIHtcbiAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKVxuICAgIHJlYWRlci5yZWFkQXNUZXh0KGJsb2IpXG4gICAgcmV0dXJuIGZpbGVSZWFkZXJSZWFkeShyZWFkZXIpXG4gIH1cblxuICB2YXIgc3VwcG9ydCA9IHtcbiAgICBibG9iOiAnRmlsZVJlYWRlcicgaW4gc2VsZiAmJiAnQmxvYicgaW4gc2VsZiAmJiAoZnVuY3Rpb24oKSB7XG4gICAgICB0cnkge1xuICAgICAgICBuZXcgQmxvYigpO1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH0pKCksXG4gICAgZm9ybURhdGE6ICdGb3JtRGF0YScgaW4gc2VsZixcbiAgICBhcnJheUJ1ZmZlcjogJ0FycmF5QnVmZmVyJyBpbiBzZWxmXG4gIH1cblxuICBmdW5jdGlvbiBCb2R5KCkge1xuICAgIHRoaXMuYm9keVVzZWQgPSBmYWxzZVxuXG5cbiAgICB0aGlzLl9pbml0Qm9keSA9IGZ1bmN0aW9uKGJvZHkpIHtcbiAgICAgIHRoaXMuX2JvZHlJbml0ID0gYm9keVxuICAgICAgaWYgKHR5cGVvZiBib2R5ID09PSAnc3RyaW5nJykge1xuICAgICAgICB0aGlzLl9ib2R5VGV4dCA9IGJvZHlcbiAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5ibG9iICYmIEJsb2IucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgdGhpcy5fYm9keUJsb2IgPSBib2R5XG4gICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuZm9ybURhdGEgJiYgRm9ybURhdGEucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgdGhpcy5fYm9keUZvcm1EYXRhID0gYm9keVxuICAgICAgfSBlbHNlIGlmICghYm9keSkge1xuICAgICAgICB0aGlzLl9ib2R5VGV4dCA9ICcnXG4gICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuYXJyYXlCdWZmZXIgJiYgQXJyYXlCdWZmZXIucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgLy8gT25seSBzdXBwb3J0IEFycmF5QnVmZmVycyBmb3IgUE9TVCBtZXRob2QuXG4gICAgICAgIC8vIFJlY2VpdmluZyBBcnJheUJ1ZmZlcnMgaGFwcGVucyB2aWEgQmxvYnMsIGluc3RlYWQuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Vuc3VwcG9ydGVkIEJvZHlJbml0IHR5cGUnKVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzdXBwb3J0LmJsb2IpIHtcbiAgICAgIHRoaXMuYmxvYiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcmVqZWN0ZWQgPSBjb25zdW1lZCh0aGlzKVxuICAgICAgICBpZiAocmVqZWN0ZWQpIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0ZWRcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9ib2R5QmxvYikge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keUJsb2IpXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUZvcm1EYXRhKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgcmVhZCBGb3JtRGF0YSBib2R5IGFzIGJsb2InKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEJsb2IoW3RoaXMuX2JvZHlUZXh0XSkpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5hcnJheUJ1ZmZlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ibG9iKCkudGhlbihyZWFkQmxvYkFzQXJyYXlCdWZmZXIpXG4gICAgICB9XG5cbiAgICAgIHRoaXMudGV4dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcmVqZWN0ZWQgPSBjb25zdW1lZCh0aGlzKVxuICAgICAgICBpZiAocmVqZWN0ZWQpIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0ZWRcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9ib2R5QmxvYikge1xuICAgICAgICAgIHJldHVybiByZWFkQmxvYkFzVGV4dCh0aGlzLl9ib2R5QmxvYilcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5Rm9ybURhdGEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCByZWFkIEZvcm1EYXRhIGJvZHkgYXMgdGV4dCcpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5VGV4dClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnRleHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHJlamVjdGVkID0gY29uc3VtZWQodGhpcylcbiAgICAgICAgcmV0dXJuIHJlamVjdGVkID8gcmVqZWN0ZWQgOiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keVRleHQpXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHN1cHBvcnQuZm9ybURhdGEpIHtcbiAgICAgIHRoaXMuZm9ybURhdGEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oZGVjb2RlKVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuanNvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oSlNPTi5wYXJzZSlcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgLy8gSFRUUCBtZXRob2RzIHdob3NlIGNhcGl0YWxpemF0aW9uIHNob3VsZCBiZSBub3JtYWxpemVkXG4gIHZhciBtZXRob2RzID0gWydERUxFVEUnLCAnR0VUJywgJ0hFQUQnLCAnT1BUSU9OUycsICdQT1NUJywgJ1BVVCddXG5cbiAgZnVuY3Rpb24gbm9ybWFsaXplTWV0aG9kKG1ldGhvZCkge1xuICAgIHZhciB1cGNhc2VkID0gbWV0aG9kLnRvVXBwZXJDYXNlKClcbiAgICByZXR1cm4gKG1ldGhvZHMuaW5kZXhPZih1cGNhc2VkKSA+IC0xKSA/IHVwY2FzZWQgOiBtZXRob2RcbiAgfVxuXG4gIGZ1bmN0aW9uIFJlcXVlc3QoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuICAgIHZhciBib2R5ID0gb3B0aW9ucy5ib2R5XG4gICAgaWYgKFJlcXVlc3QucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoaW5wdXQpKSB7XG4gICAgICBpZiAoaW5wdXQuYm9keVVzZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQWxyZWFkeSByZWFkJylcbiAgICAgIH1cbiAgICAgIHRoaXMudXJsID0gaW5wdXQudXJsXG4gICAgICB0aGlzLmNyZWRlbnRpYWxzID0gaW5wdXQuY3JlZGVudGlhbHNcbiAgICAgIGlmICghb3B0aW9ucy5oZWFkZXJzKSB7XG4gICAgICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKGlucHV0LmhlYWRlcnMpXG4gICAgICB9XG4gICAgICB0aGlzLm1ldGhvZCA9IGlucHV0Lm1ldGhvZFxuICAgICAgdGhpcy5tb2RlID0gaW5wdXQubW9kZVxuICAgICAgaWYgKCFib2R5KSB7XG4gICAgICAgIGJvZHkgPSBpbnB1dC5fYm9keUluaXRcbiAgICAgICAgaW5wdXQuYm9keVVzZWQgPSB0cnVlXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudXJsID0gaW5wdXRcbiAgICB9XG5cbiAgICB0aGlzLmNyZWRlbnRpYWxzID0gb3B0aW9ucy5jcmVkZW50aWFscyB8fCB0aGlzLmNyZWRlbnRpYWxzIHx8ICdvbWl0J1xuICAgIGlmIChvcHRpb25zLmhlYWRlcnMgfHwgIXRoaXMuaGVhZGVycykge1xuICAgICAgdGhpcy5oZWFkZXJzID0gbmV3IEhlYWRlcnMob3B0aW9ucy5oZWFkZXJzKVxuICAgIH1cbiAgICB0aGlzLm1ldGhvZCA9IG5vcm1hbGl6ZU1ldGhvZChvcHRpb25zLm1ldGhvZCB8fCB0aGlzLm1ldGhvZCB8fCAnR0VUJylcbiAgICB0aGlzLm1vZGUgPSBvcHRpb25zLm1vZGUgfHwgdGhpcy5tb2RlIHx8IG51bGxcbiAgICB0aGlzLnJlZmVycmVyID0gbnVsbFxuXG4gICAgaWYgKCh0aGlzLm1ldGhvZCA9PT0gJ0dFVCcgfHwgdGhpcy5tZXRob2QgPT09ICdIRUFEJykgJiYgYm9keSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQm9keSBub3QgYWxsb3dlZCBmb3IgR0VUIG9yIEhFQUQgcmVxdWVzdHMnKVxuICAgIH1cbiAgICB0aGlzLl9pbml0Qm9keShib2R5KVxuICB9XG5cbiAgUmVxdWVzdC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IFJlcXVlc3QodGhpcylcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlY29kZShib2R5KSB7XG4gICAgdmFyIGZvcm0gPSBuZXcgRm9ybURhdGEoKVxuICAgIGJvZHkudHJpbSgpLnNwbGl0KCcmJykuZm9yRWFjaChmdW5jdGlvbihieXRlcykge1xuICAgICAgaWYgKGJ5dGVzKSB7XG4gICAgICAgIHZhciBzcGxpdCA9IGJ5dGVzLnNwbGl0KCc9JylcbiAgICAgICAgdmFyIG5hbWUgPSBzcGxpdC5zaGlmdCgpLnJlcGxhY2UoL1xcKy9nLCAnICcpXG4gICAgICAgIHZhciB2YWx1ZSA9IHNwbGl0LmpvaW4oJz0nKS5yZXBsYWNlKC9cXCsvZywgJyAnKVxuICAgICAgICBmb3JtLmFwcGVuZChkZWNvZGVVUklDb21wb25lbnQobmFtZSksIGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gZm9ybVxuICB9XG5cbiAgZnVuY3Rpb24gaGVhZGVycyh4aHIpIHtcbiAgICB2YXIgaGVhZCA9IG5ldyBIZWFkZXJzKClcbiAgICB2YXIgcGFpcnMgPSB4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkudHJpbSgpLnNwbGl0KCdcXG4nKVxuICAgIHBhaXJzLmZvckVhY2goZnVuY3Rpb24oaGVhZGVyKSB7XG4gICAgICB2YXIgc3BsaXQgPSBoZWFkZXIudHJpbSgpLnNwbGl0KCc6JylcbiAgICAgIHZhciBrZXkgPSBzcGxpdC5zaGlmdCgpLnRyaW0oKVxuICAgICAgdmFyIHZhbHVlID0gc3BsaXQuam9pbignOicpLnRyaW0oKVxuICAgICAgaGVhZC5hcHBlbmQoa2V5LCB2YWx1ZSlcbiAgICB9KVxuICAgIHJldHVybiBoZWFkXG4gIH1cblxuICBCb2R5LmNhbGwoUmVxdWVzdC5wcm90b3R5cGUpXG5cbiAgZnVuY3Rpb24gUmVzcG9uc2UoYm9keUluaXQsIG9wdGlvbnMpIHtcbiAgICBpZiAoIW9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSB7fVxuICAgIH1cblxuICAgIHRoaXMuX2luaXRCb2R5KGJvZHlJbml0KVxuICAgIHRoaXMudHlwZSA9ICdkZWZhdWx0J1xuICAgIHRoaXMuc3RhdHVzID0gb3B0aW9ucy5zdGF0dXNcbiAgICB0aGlzLm9rID0gdGhpcy5zdGF0dXMgPj0gMjAwICYmIHRoaXMuc3RhdHVzIDwgMzAwXG4gICAgdGhpcy5zdGF0dXNUZXh0ID0gb3B0aW9ucy5zdGF0dXNUZXh0XG4gICAgdGhpcy5oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzIGluc3RhbmNlb2YgSGVhZGVycyA/IG9wdGlvbnMuaGVhZGVycyA6IG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycylcbiAgICB0aGlzLnVybCA9IG9wdGlvbnMudXJsIHx8ICcnXG4gIH1cblxuICBCb2R5LmNhbGwoUmVzcG9uc2UucHJvdG90eXBlKVxuXG4gIFJlc3BvbnNlLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgUmVzcG9uc2UodGhpcy5fYm9keUluaXQsIHtcbiAgICAgIHN0YXR1czogdGhpcy5zdGF0dXMsXG4gICAgICBzdGF0dXNUZXh0OiB0aGlzLnN0YXR1c1RleHQsXG4gICAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh0aGlzLmhlYWRlcnMpLFxuICAgICAgdXJsOiB0aGlzLnVybFxuICAgIH0pXG4gIH1cblxuICBSZXNwb25zZS5lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciByZXNwb25zZSA9IG5ldyBSZXNwb25zZShudWxsLCB7c3RhdHVzOiAwLCBzdGF0dXNUZXh0OiAnJ30pXG4gICAgcmVzcG9uc2UudHlwZSA9ICdlcnJvcidcbiAgICByZXR1cm4gcmVzcG9uc2VcbiAgfVxuXG4gIHZhciByZWRpcmVjdFN0YXR1c2VzID0gWzMwMSwgMzAyLCAzMDMsIDMwNywgMzA4XVxuXG4gIFJlc3BvbnNlLnJlZGlyZWN0ID0gZnVuY3Rpb24odXJsLCBzdGF0dXMpIHtcbiAgICBpZiAocmVkaXJlY3RTdGF0dXNlcy5pbmRleE9mKHN0YXR1cykgPT09IC0xKSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW52YWxpZCBzdGF0dXMgY29kZScpXG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShudWxsLCB7c3RhdHVzOiBzdGF0dXMsIGhlYWRlcnM6IHtsb2NhdGlvbjogdXJsfX0pXG4gIH1cblxuICBzZWxmLkhlYWRlcnMgPSBIZWFkZXJzO1xuICBzZWxmLlJlcXVlc3QgPSBSZXF1ZXN0O1xuICBzZWxmLlJlc3BvbnNlID0gUmVzcG9uc2U7XG5cbiAgc2VsZi5mZXRjaCA9IGZ1bmN0aW9uKGlucHV0LCBpbml0KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIHJlcXVlc3RcbiAgICAgIGlmIChSZXF1ZXN0LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGlucHV0KSAmJiAhaW5pdCkge1xuICAgICAgICByZXF1ZXN0ID0gaW5wdXRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlcXVlc3QgPSBuZXcgUmVxdWVzdChpbnB1dCwgaW5pdClcbiAgICAgIH1cblxuICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpXG5cbiAgICAgIGZ1bmN0aW9uIHJlc3BvbnNlVVJMKCkge1xuICAgICAgICBpZiAoJ3Jlc3BvbnNlVVJMJyBpbiB4aHIpIHtcbiAgICAgICAgICByZXR1cm4geGhyLnJlc3BvbnNlVVJMXG4gICAgICAgIH1cblxuICAgICAgICAvLyBBdm9pZCBzZWN1cml0eSB3YXJuaW5ncyBvbiBnZXRSZXNwb25zZUhlYWRlciB3aGVuIG5vdCBhbGxvd2VkIGJ5IENPUlNcbiAgICAgICAgaWYgKC9eWC1SZXF1ZXN0LVVSTDovbS50ZXN0KHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkpIHtcbiAgICAgICAgICByZXR1cm4geGhyLmdldFJlc3BvbnNlSGVhZGVyKCdYLVJlcXVlc3QtVVJMJylcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc3RhdHVzID0gKHhoci5zdGF0dXMgPT09IDEyMjMpID8gMjA0IDogeGhyLnN0YXR1c1xuICAgICAgICBpZiAoc3RhdHVzIDwgMTAwIHx8IHN0YXR1cyA+IDU5OSkge1xuICAgICAgICAgIHJlamVjdChuZXcgVHlwZUVycm9yKCdOZXR3b3JrIHJlcXVlc3QgZmFpbGVkJykpXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICAgc3RhdHVzOiBzdGF0dXMsXG4gICAgICAgICAgc3RhdHVzVGV4dDogeGhyLnN0YXR1c1RleHQsXG4gICAgICAgICAgaGVhZGVyczogaGVhZGVycyh4aHIpLFxuICAgICAgICAgIHVybDogcmVzcG9uc2VVUkwoKVxuICAgICAgICB9XG4gICAgICAgIHZhciBib2R5ID0gJ3Jlc3BvbnNlJyBpbiB4aHIgPyB4aHIucmVzcG9uc2UgOiB4aHIucmVzcG9uc2VUZXh0O1xuICAgICAgICByZXNvbHZlKG5ldyBSZXNwb25zZShib2R5LCBvcHRpb25zKSlcbiAgICAgIH1cblxuICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ05ldHdvcmsgcmVxdWVzdCBmYWlsZWQnKSlcbiAgICAgIH1cblxuICAgICAgeGhyLm9wZW4ocmVxdWVzdC5tZXRob2QsIHJlcXVlc3QudXJsLCB0cnVlKVxuXG4gICAgICBpZiAocmVxdWVzdC5jcmVkZW50aWFscyA9PT0gJ2luY2x1ZGUnKSB7XG4gICAgICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSB0cnVlXG4gICAgICB9XG5cbiAgICAgIGlmICgncmVzcG9uc2VUeXBlJyBpbiB4aHIgJiYgc3VwcG9ydC5ibG9iKSB7XG4gICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYmxvYidcbiAgICAgIH1cblxuICAgICAgcmVxdWVzdC5oZWFkZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIobmFtZSwgdmFsdWUpXG4gICAgICB9KVxuXG4gICAgICB4aHIuc2VuZCh0eXBlb2YgcmVxdWVzdC5fYm9keUluaXQgPT09ICd1bmRlZmluZWQnID8gbnVsbCA6IHJlcXVlc3QuX2JvZHlJbml0KVxuICAgIH0pXG4gIH1cbiAgc2VsZi5mZXRjaC5wb2x5ZmlsbCA9IHRydWVcbn0pKCk7XG5cblxuLyoqKiBFWFBPUlRTIEZST00gZXhwb3J0cy1sb2FkZXIgKioqL1xubW9kdWxlLmV4cG9ydHMgPSBnbG9iYWwuZmV0Y2hcbn0uY2FsbChnbG9iYWwpKTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9pbXBvcnRzLWxvYWRlcj90aGlzPT5nbG9iYWwhLi9+L2V4cG9ydHMtbG9hZGVyP2dsb2JhbC5mZXRjaCEuL34vd2hhdHdnLWZldGNoL2ZldGNoLmpzXG4gKiogbW9kdWxlIGlkID0gM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwIDFcbiAqKi8iLCJpbXBvcnQgeyBpc0RldiB9IGZyb20gJy4vdXRpbHMuanMnO1xuXG5leHBvcnQgY29uc3QgREVWX0hPU1QgPSAnaHR0cHM6Ly8xOTIuMTY4LjEuMjA2OjMwMDAnO1xuZXhwb3J0IGNvbnN0IFBST0RfSE9TVCA9ICdodHRwczovL29uZXNpZ25hbC5jb20nO1xuZXhwb3J0IGNvbnN0IEhPU1RfVVJMID0gKGlzRGV2KCkgPyBERVZfSE9TVCA6IFBST0RfSE9TVCk7XG5leHBvcnQgY29uc3QgQVBJX1VSTCA9IChpc0RldigpID8gREVWX0hPU1QgOiBQUk9EX0hPU1QpICsgJy9hcGkvdjEvJztcblxuLy8g4qy4IOKkkVxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL3ZhcnMuanNcbiAqKi8iLCJpbXBvcnQgbG9nIGZyb20gJ2xvZ2xldmVsJztcblxuZXhwb3J0IGZ1bmN0aW9uIGlzQXJyYXkodmFyaWFibGUpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCggdmFyaWFibGUgKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEh1bWFuaXplZFRpbWVEdXJhdGlvbih0aW1lRHVyYXRpb25Jbk1pbGxpc2Vjb25kcykge1xuICBmdW5jdGlvbiBhZGRQbHVyYWxTdWZmaXgobnVtYmVyKSB7XG4gICAgcmV0dXJuIChudW1iZXIgPiAxKSA/ICdzJyA6ICcnO1xuICB9XG4gIHZhciBkdXJhdGlvbiA9IE1hdGguZmxvb3IodGltZUR1cmF0aW9uSW5NaWxsaXNlY29uZHMgLyAxMDAwKTtcblxuICB2YXIgeWVhcnMgPSBNYXRoLmZsb29yKGR1cmF0aW9uIC8gMzE1MzYwMDApO1xuICBpZiAoeWVhcnMpXG4gICAgcmV0dXJuIHllYXJzICsgJyB5ZWFyJyArIGFkZFBsdXJhbFN1ZmZpeCh5ZWFycyk7XG5cbiAgdmFyIGRheXMgPSBNYXRoLmZsb29yKChkdXJhdGlvbiAlPSAzMTUzNjAwMCkgLyA4NjQwMCk7XG4gIGlmIChkYXlzKVxuICAgIHJldHVybiBkYXlzICsgJyBkYXknICsgYWRkUGx1cmFsU3VmZml4KGRheXMpO1xuXG4gIHZhciBob3VycyA9IE1hdGguZmxvb3IoKGR1cmF0aW9uICU9IDg2NDAwKSAvIDM2MDApO1xuICBpZiAoaG91cnMpXG4gICAgcmV0dXJuIGhvdXJzICsgJyBob3VyJyArIGFkZFBsdXJhbFN1ZmZpeChob3Vycyk7XG5cbiAgdmFyIG1pbnV0ZXMgPSBNYXRoLmZsb29yKChkdXJhdGlvbiAlPSAzNjAwKSAvIDYwKTtcbiAgaWYgKG1pbnV0ZXMpXG4gICAgcmV0dXJuIG1pbnV0ZXMgKyAnIG1pbnV0ZScgKyBhZGRQbHVyYWxTdWZmaXgobWludXRlcyk7XG5cbiAgdmFyIHNlY29uZHMgPSBkdXJhdGlvbiAlIDYwO1xuICBpZiAoc2Vjb25kcylcbiAgICByZXR1cm4gc2Vjb25kcyArICcgc2Vjb25kJyArIGFkZFBsdXJhbFN1ZmZpeChzZWNvbmRzKTtcblxuICByZXR1cm4gJ2p1c3Qgbm93Jztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRGV2KCkge1xuICByZXR1cm4gX19ERVZfXztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUHVzaE5vdGlmaWNhdGlvbnNTdXBwb3J0ZWQgKCkge1xuICB2YXIgY2hyb21lVmVyc2lvbiA9IG5hdmlnYXRvci5hcHBWZXJzaW9uLm1hdGNoKC9DaHJvbWVcXC8oLio/KSAvKTtcblxuICBpZiAoaXNTdXBwb3J0ZWRGaXJlRm94KCkpXG4gICAgcmV0dXJuIHRydWU7XG5cbiAgaWYgKGlzU3VwcG9ydGVkU2FmYXJpKCkpXG4gICAgcmV0dXJuIHRydWU7XG5cbiAgLy8gQ2hyb21lIGlzIG5vdCBmb3VuZCBpbiBhcHBWZXJzaW9uLlxuICBpZiAoIWNocm9tZVZlcnNpb24pXG4gICAgcmV0dXJuIGZhbHNlO1xuXG4gIC8vIE1pY3Jvc29mdCBFZGdlXG4gIGlmIChuYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaCgvRWRnZS8pKVxuICAgIHJldHVybiBmYWxzZTtcblxuICAvLyBBbmRyb2lkIENocm9tZSBXZWJWaWV3XG4gIGlmIChuYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaCgvIHd2LykpXG4gICAgcmV0dXJuIGZhbHNlO1xuXG4gIC8vIE9wZXJhXG4gIGlmIChuYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaCgvT1BSXFwvLykpXG4gICAgcmV0dXJuIGZhbHNlO1xuXG4gIC8vIFRoZSB1c2VyIGlzIG9uIGlPU1xuICBpZiAoL2lQYWR8aVBob25lfGlQb2QvLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKSlcbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgcmV0dXJuIHBhcnNlSW50KGNocm9tZVZlcnNpb25bMV0uc3Vic3RyaW5nKDAsIDIpKSA+IDQxO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNCcm93c2VyU2FmYXJpKCkge1xuICB2YXIgc2FmYXJpVmVyc2lvbiA9IG5hdmlnYXRvci5hcHBWZXJzaW9uLm1hdGNoKFwiVmVyc2lvbi8oWzAtOV0/KS4qIFNhZmFyaVwiKTtcbiAgcmV0dXJuIHNhZmFyaVZlcnNpb24gIT0gbnVsbCA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1N1cHBvcnRlZEZpcmVGb3goKSB7XG4gIHZhciBmaXJlRm94VmVyc2lvbiA9IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goLyhGaXJlZm94XFwvKShbMC05XXsyLH1cXC5bMC05XXsxLH0pLyk7XG4gIGlmIChmaXJlRm94VmVyc2lvbilcbiAgICByZXR1cm4gcGFyc2VJbnQoZmlyZUZveFZlcnNpb25bMl0uc3Vic3RyaW5nKDAsIDIpKSA+IDQzO1xuICByZXR1cm4gZmFsc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0Jyb3dzZXJGaXJlZm94KCkge1xuICB2YXIgZmlyZUZveFZlcnNpb24gPSBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC8oRmlyZWZveFxcLykoWzAtOV17Mix9XFwuWzAtOV17MSx9KS8pO1xuICByZXR1cm4gZmlyZUZveFZlcnNpb24gIT0gbnVsbCA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGaXJlZm94VmVyc2lvbigpIHtcbiAgdmFyIGZpcmVGb3hWZXJzaW9uID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvKEZpcmVmb3hcXC8pKFswLTldezIsfVxcLlswLTldezEsfSkvKTtcbiAgaWYgKGZpcmVGb3hWZXJzaW9uKVxuICAgIHJldHVybiBwYXJzZUludChmaXJlRm94VmVyc2lvblsyXS5zdWJzdHJpbmcoMCwgMikpO1xuICBlbHNlIHJldHVybiAtMTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzU3VwcG9ydGVkU2FmYXJpKCkge1xuICB2YXIgc2FmYXJpVmVyc2lvbiA9IG5hdmlnYXRvci5hcHBWZXJzaW9uLm1hdGNoKFwiVmVyc2lvbi8oWzAtOV0/KS4qIFNhZmFyaVwiKTtcbiAgaWYgKHNhZmFyaVZlcnNpb24gPT0gbnVsbClcbiAgICByZXR1cm4gZmFsc2U7XG4gIGlmICgvaVBob25lfGlQYWR8aVBvZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpXG4gICAgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gKHBhcnNlSW50KHNhZmFyaVZlcnNpb25bMV0pID4gNik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVEb21FbGVtZW50KHNlbGVjdG9yKSB7XG4gIHZhciBlbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgaWYgKGVscy5sZW5ndGggPiAwKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbHMubGVuZ3RoOyBpKyspXG4gICAgICBlbHNbaV0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbHNbaV0pO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGREb21FbGVtZW50KHRhcmdldFNlbGVjdG9yT3JFbGVtZW50LCBhZGRPcmRlciwgZWxlbWVudEh0bWwpIHtcbiAgaWYgKHR5cGVvZiB0YXJnZXRTZWxlY3Rvck9yRWxlbWVudCA9PT0gJ3N0cmluZycpXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXRTZWxlY3Rvck9yRWxlbWVudCkuaW5zZXJ0QWRqYWNlbnRIVE1MKGFkZE9yZGVyLCBlbGVtZW50SHRtbCk7XG4gIGVsc2UgaWYgKHR5cGVvZiB0YXJnZXRTZWxlY3Rvck9yRWxlbWVudCA9PT0gJ29iamVjdCcpXG4gICAgdGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQuaW5zZXJ0QWRqYWNlbnRIVE1MKGFkZE9yZGVyLCBlbGVtZW50SHRtbCk7XG4gIGVsc2VcbiAgICB0aHJvdyBuZXcgRXJyb3IoYCR7dGFyZ2V0U2VsZWN0b3JPckVsZW1lbnR9IG11c3QgYmUgYSBDU1Mgc2VsZWN0b3Igc3RyaW5nIG9yIERPTSBFbGVtZW50IG9iamVjdC5gKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyRG9tRWxlbWVudENoaWxkcmVuKHRhcmdldFNlbGVjdG9yT3JFbGVtZW50KSB7XG4gIGlmICh0eXBlb2YgdGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldFNlbGVjdG9yT3JFbGVtZW50KTtcbiAgICB3aGlsZSAoZWxlbWVudC5maXJzdENoaWxkKSB7XG4gICAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgfVxuICB9XG4gIGVsc2UgaWYgKHR5cGVvZiB0YXJnZXRTZWxlY3Rvck9yRWxlbWVudCA9PT0gJ29iamVjdCcpIHtcbiAgICB3aGlsZSAodGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQuZmlyc3RDaGlsZCkge1xuICAgICAgdGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQucmVtb3ZlQ2hpbGQodGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgfVxuICB9XG4gIGVsc2VcbiAgICB0aHJvdyBuZXcgRXJyb3IoYCR7dGFyZ2V0U2VsZWN0b3JPckVsZW1lbnR9IG11c3QgYmUgYSBDU1Mgc2VsZWN0b3Igc3RyaW5nIG9yIERPTSBFbGVtZW50IG9iamVjdC5gKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZENzc0NsYXNzKHRhcmdldFNlbGVjdG9yT3JFbGVtZW50LCBjc3NDbGFzcykge1xuICBpZiAodHlwZW9mIHRhcmdldFNlbGVjdG9yT3JFbGVtZW50ID09PSAnc3RyaW5nJylcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldFNlbGVjdG9yT3JFbGVtZW50KS5jbGFzc0xpc3QuYWRkKGNzc0NsYXNzKTtcbiAgZWxzZSBpZiAodHlwZW9mIHRhcmdldFNlbGVjdG9yT3JFbGVtZW50ID09PSAnb2JqZWN0JylcbiAgICB0YXJnZXRTZWxlY3Rvck9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKGNzc0NsYXNzKTtcbiAgZWxzZVxuICAgIHRocm93IG5ldyBFcnJvcihgJHt0YXJnZXRTZWxlY3Rvck9yRWxlbWVudH0gbXVzdCBiZSBhIENTUyBzZWxlY3RvciBzdHJpbmcgb3IgRE9NIEVsZW1lbnQgb2JqZWN0LmApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQ3NzQ2xhc3ModGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQsIGNzc0NsYXNzKSB7XG4gIGlmICh0eXBlb2YgdGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQgPT09ICdzdHJpbmcnKVxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQpLmNsYXNzTGlzdC5yZW1vdmUoY3NzQ2xhc3MpO1xuICBlbHNlIGlmICh0eXBlb2YgdGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQgPT09ICdvYmplY3QnKVxuICAgIHRhcmdldFNlbGVjdG9yT3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY3NzQ2xhc3MpO1xuICBlbHNlXG4gICAgdGhyb3cgbmV3IEVycm9yKGAke3RhcmdldFNlbGVjdG9yT3JFbGVtZW50fSBtdXN0IGJlIGEgQ1NTIHNlbGVjdG9yIHN0cmluZyBvciBET00gRWxlbWVudCBvYmplY3QuYCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNDc3NDbGFzcyh0YXJnZXRTZWxlY3Rvck9yRWxlbWVudCwgY3NzQ2xhc3MpIHtcbiAgaWYgKHR5cGVvZiB0YXJnZXRTZWxlY3Rvck9yRWxlbWVudCA9PT0gJ3N0cmluZycpXG4gICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQpLmNsYXNzTGlzdC5jb250YWlucyhjc3NDbGFzcyk7XG4gIGVsc2UgaWYgKHR5cGVvZiB0YXJnZXRTZWxlY3Rvck9yRWxlbWVudCA9PT0gJ29iamVjdCcpXG4gICAgcmV0dXJuIHRhcmdldFNlbGVjdG9yT3JFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhjc3NDbGFzcyk7XG4gIGVsc2VcbiAgICB0aHJvdyBuZXcgRXJyb3IoYCR7dGFyZ2V0U2VsZWN0b3JPckVsZW1lbnR9IG11c3QgYmUgYSBDU1Mgc2VsZWN0b3Igc3RyaW5nIG9yIERPTSBFbGVtZW50IG9iamVjdC5gKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG9uKHRhcmdldFNlbGVjdG9yT3JFbGVtZW50LCBldmVudCwgdGFzaykge1xuICBpZiAoIWV2ZW50KSB7XG4gICAgbG9nLmVycm9yKCdDYW5ub3QgY2FsbCBvbigpIHdpdGggbm8gZXZlbnQ6ICcsIGV2ZW50KTtcbiAgfVxuICBpZiAoIXRhc2spIHtcbiAgICBsb2cuZXJyb3IoJ0Nhbm5vdCBjYWxsIG9uKCkgd2l0aCBubyB0YXNrOiAnLCB0YXNrKVxuICB9XG4gIGxvZy5kZWJ1ZygnRGVidWcgbWUgaGVyZS4nKTtcbiAgaWYgKHR5cGVvZiB0YXJnZXRTZWxlY3Rvck9yRWxlbWVudCA9PT0gJ3N0cmluZycpIHtcbiAgICBsZXQgZWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gICAgaWYgKGVscy5sZW5ndGggPiAwKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVscy5sZW5ndGg7IGkrKylcbiAgICAgICAgb24oZWxzW2ldLCB0YXNrKTtcbiAgICB9XG4gIH1cbiAgZWxzZSBpZiAoaXNBcnJheSh0YXJnZXRTZWxlY3Rvck9yRWxlbWVudCkpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRhcmdldFNlbGVjdG9yT3JFbGVtZW50Lmxlbmd0aDsgaSsrKVxuICAgICAgb24odGFyZ2V0U2VsZWN0b3JPckVsZW1lbnRbaV0sIHRhc2spO1xuICB9XG4gIGVsc2UgaWYgKHR5cGVvZiB0YXJnZXRTZWxlY3Rvck9yRWxlbWVudCA9PT0gJ29iamVjdCcpXG4gICAgdGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgdGFzayk7XG4gIGVsc2VcbiAgICB0aHJvdyBuZXcgRXJyb3IoYCR7dGFyZ2V0U2VsZWN0b3JPckVsZW1lbnR9IG11c3QgYmUgYSBDU1Mgc2VsZWN0b3Igc3RyaW5nIG9yIERPTSBFbGVtZW50IG9iamVjdC5gKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG9uY2UodGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQsIGV2ZW50LCB0YXNrLCBtYW51YWxEZXN0cm95PWZhbHNlKSB7XG4gIGlmICghZXZlbnQpIHtcbiAgICBsb2cuZXJyb3IoJ0Nhbm5vdCBjYWxsIG9uKCkgd2l0aCBubyBldmVudDogJywgZXZlbnQpO1xuICB9XG4gIGlmICghdGFzaykge1xuICAgIGxvZy5lcnJvcignQ2Fubm90IGNhbGwgb24oKSB3aXRoIG5vIHRhc2s6ICcsIHRhc2spXG4gIH1cbiAgaWYgKHR5cGVvZiB0YXJnZXRTZWxlY3Rvck9yRWxlbWVudCA9PT0gJ3N0cmluZycpIHtcbiAgICBsZXQgZWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gICAgaWYgKGVscy5sZW5ndGggPiAwKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVscy5sZW5ndGg7IGkrKylcbiAgICAgICAgb25jZShlbHNbaV0sIHRhc2spO1xuICAgIH1cbiAgfVxuICBlbHNlIGlmIChpc0FycmF5KHRhcmdldFNlbGVjdG9yT3JFbGVtZW50KSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQubGVuZ3RoOyBpKyspXG4gICAgICBvbmNlKHRhcmdldFNlbGVjdG9yT3JFbGVtZW50W2ldLCB0YXNrKTtcbiAgfVxuICBlbHNlIGlmICh0eXBlb2YgdGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQgPT09ICdvYmplY3QnKSB7XG4gICAgdmFyIHRhc2tXcmFwcGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBpbnRlcm5hbFRhc2tGdW5jdGlvbiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBkZXN0cm95RXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHRhcmdldFNlbGVjdG9yT3JFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZS50eXBlLCB0YXNrV3JhcHBlcik7XG4gICAgICAgIH07XG4gICAgICAgIGlmICghbWFudWFsRGVzdHJveSkge1xuICAgICAgICAgIGRlc3Ryb3lFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGFzayhlLCBkZXN0cm95RXZlbnRMaXN0ZW5lcik7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIGludGVybmFsVGFza0Z1bmN0aW9uO1xuICAgIH0pKCk7XG4gICAgdGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgdGFza1dyYXBwZXIpO1xuICB9XG4gIGVsc2VcbiAgICB0aHJvdyBuZXcgRXJyb3IoYCR7dGFyZ2V0U2VsZWN0b3JPckVsZW1lbnR9IG11c3QgYmUgYSBDU1Mgc2VsZWN0b3Igc3RyaW5nIG9yIERPTSBFbGVtZW50IG9iamVjdC5gKTtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGV2ZW50IGhhbmRsZXIgZnJvbSBzZWxlY3Rvci5cbiAqIEBwYXJhbSB0YXJnZXRTZWxlY3Rvck9yRWxlbWVudCBTZWxlY3RvciB0byB0YXJnZXQgb25lIG9yIG11bHRpcGxlIGVsZW1lbnRzLCBvciBhIHNpbmdsZSBvciBhcnJheSBvZiBET01FbGVtZW50LlxuICogQHBhcmFtIGV2ZW50IFRoZSBldmVudCB0byB0YXJnZXQgKGUuZy4gJ3RyYW5zaXRpb25lbmQnKVxuICogQHBhcmFtIHRhc2sgQSBzaW5nbGUgZnVuY3Rpb24gY2FsbGJhY2sgdG8gdW5iaW5kLCBvciBsZWF2ZSBlbXB0eSB0byByZW1vdmUgYWxsIGV2ZW50IGhhbmRsZXJzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gb2ZmKHRhcmdldFNlbGVjdG9yT3JFbGVtZW50LCBldmVudCwgdGFzaykge1xuICBpZiAodHlwZW9mIHRhcmdldFNlbGVjdG9yT3JFbGVtZW50ID09PSAnc3RyaW5nJykge1xuICAgIGxldCBlbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgICBpZiAoZWxzLmxlbmd0aCA+IDApIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxzLmxlbmd0aDsgaSsrKVxuICAgICAgICBvZmYoZWxzW2ldLCB0YXNrKTtcbiAgICB9XG4gIH1cbiAgZWxzZSBpZiAoaXNBcnJheSh0YXJnZXRTZWxlY3Rvck9yRWxlbWVudCkpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRhcmdldFNlbGVjdG9yT3JFbGVtZW50Lmxlbmd0aDsgaSsrKVxuICAgICAgb2ZmKHRhcmdldFNlbGVjdG9yT3JFbGVtZW50W2ldLCB0YXNrKTtcbiAgfVxuICBlbHNlIGlmICh0eXBlb2YgdGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQgPT09ICdvYmplY3QnKVxuICAgIGlmICh0YXNrKVxuICAgICAgdGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgdGFzayk7XG4gICAgZWxzZVxuICAgICAgdGFyZ2V0U2VsZWN0b3JPckVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCk7XG4gIGVsc2VcbiAgICB0aHJvdyBuZXcgRXJyb3IoYCR7dGFyZ2V0U2VsZWN0b3JPckVsZW1lbnR9IG11c3QgYmUgYSBDU1Mgc2VsZWN0b3Igc3RyaW5nIG9yIERPTSBFbGVtZW50IG9iamVjdC5gKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbnNvbGVTdHlsZShzdHlsZSkge1xuICBpZiAoc3R5bGUgPT0gJ2NvZGUnKSB7XG4gICAgcmV0dXJuIGBcbiAgICBwYWRkaW5nOiAwIDVweCAycHg7XG4gICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDtcbiAgICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDNweDtcbiAgICAtbW96LWJvcmRlci1yYWRpdXM6IDNweDtcbiAgICBib3JkZXItcmFkaXVzOiAzcHg7XG4gICAgYmFja2dyb3VuZC1jbGlwOiBwYWRkaW5nLWJveDtcbiAgICBmb250LWZhbWlseTogTW9uYWNvLFwiRGVqYVZ1IFNhbnMgTW9ub1wiLFwiQ291cmllciBOZXdcIixtb25vc3BhY2U7XG4gICAgY29sb3I6ICM2NjY7XG4gICAgYFxuICB9IGVsc2UgaWYgKHN0eWxlID09ICdib2xkJykge1xuICAgIHJldHVybiBgXG4gICAgICBmb250LXdlaWdodDogNjAwO1xuICAgIGNvbG9yOiByZ2IoNTEsIDUxLCA1MSk7XG4gICAgYDtcbiAgfSBlbHNlIGlmIChzdHlsZSA9PSAnYWxlcnQnKSB7XG4gICAgcmV0dXJuIGBcbiAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgY29sb3I6IHJlZDtcbiAgICBgO1xuICB9IGVsc2UgaWYgKHN0eWxlID09ICdldmVudCcpIHtcbiAgICByZXR1cm4gYFxuICAgIGNvbG9yOiBncmVlbjtcbiAgICBgO1xuICB9IGVsc2UgaWYgKHN0eWxlID09ICdwb3N0bWVzc2FnZScpIHtcbiAgICByZXR1cm4gYFxuICAgIGNvbG9yOiBvcmFuZ2U7XG4gICAgYDtcbiAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgc2V0VGltZW91dCgpIG1ldGhvZC5cbiAqIEBwYXJhbSBkdXJhdGlvbk1zXG4gKiBAcmV0dXJucyB7UHJvbWlzZX0gUmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSB0aW1lb3V0IGlzIGNvbXBsZXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVsYXkoZHVyYXRpb25Ncykge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBzZXRUaW1lb3V0KHJlc29sdmUsIGR1cmF0aW9uTXMpXG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbm90aGluZygpIHtcbiAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gd2hlbihjb25kaXRpb24sIHByb21pc2VJZlRydWUsIHByb21pc2VJZkZhbHNlKSB7XG4gIGlmIChwcm9taXNlSWZUcnVlID09PSB1bmRlZmluZWQpXG4gICAgcHJvbWlzZUlmVHJ1ZSA9IG5vdGhpbmcoKTtcbiAgaWYgKHByb21pc2VJZkZhbHNlID09PSB1bmRlZmluZWQpXG4gICAgcHJvbWlzZUlmRmFsc2UgPSBub3RoaW5nKCk7XG4gIHJldHVybiAoY29uZGl0aW9uID8gcHJvbWlzZUlmVHJ1ZSA6IHByb21pc2VJZkZhbHNlKTtcbn1cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy91dGlscy5qc1xuICoqLyIsImltcG9ydCB7IEFQSV9VUkwgfSBmcm9tICcuL3ZhcnMuanMnXG5pbXBvcnQgbG9nIGZyb20gJ2xvZ2xldmVsJztcblxuZXhwb3J0IGZ1bmN0aW9uIGFwaUNhbGwoYWN0aW9uLCBtZXRob2QsIGRhdGEpIHtcbiAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycygpO1xuICBoZWFkZXJzLmFwcGVuZCgnQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOCcpO1xuXG4gIGxldCBjb250ZW50cyA9IHtcbiAgICBtZXRob2Q6IG1ldGhvZCB8fCAnTk9fTUVUSE9EX1NQRUNJRklFRCcsXG4gICAgaGVhZGVyczogaGVhZGVycyxcbiAgICBjYWNoZTogJ25vLWNhY2hlJ1xuICB9O1xuICBpZiAoZGF0YSlcbiAgICBjb250ZW50cy5ib2R5ID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG5cbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBmZXRjaChBUElfVVJMICsgYWN0aW9uLCBjb250ZW50cylcbiAgICAgIC50aGVuKGZ1bmN0aW9uIHN0YXR1cyhyZXNwb25zZSkge1xuICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID49IDIwMCAmJiByZXNwb25zZS5zdGF0dXMgPCAzMDApXG4gICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IocmVzcG9uc2Uuc3RhdHVzVGV4dCkpO1xuICAgICAgfSlcbiAgICAgIC50aGVuKGpzb25SZXNwb25zZSA9PiB7XG4gICAgICAgIHJlc29sdmUoanNvblJlc3BvbnNlKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfSk7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2VuZE5vdGlmaWNhdGlvbihhcHBJZCwgcGxheWVySWRzLCB0aXRsZXMsIGNvbnRlbnRzKSB7XG4gIHZhciBwYXJhbXMgPSB7XG4gICAgJ2FwcF9pZCc6IGFwcElkLFxuICAgICdoZWFkaW5ncyc6IHRpdGxlcyxcbiAgICAnY29udGVudHMnOiBjb250ZW50cyxcbiAgICAnaW5jbHVkZV9wbGF5ZXJfaWRzJzogcGxheWVySWRzLFxuICAgICdpc0FueVdlYic6IHRydWUsXG4gICAgJ3VybCc6ICdqYXZhc2NyaXB0OnZvaWQoMCk7J1xuICB9O1xuICByZXR1cm4gYXBpQ2FsbCgnbm90aWZpY2F0aW9ucycsICdQT1NUJywgcGFyYW1zKTtcbn1cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9hcGkuanNcbiAqKi8iLCIvKlxyXG4qIGxvZ2xldmVsIC0gaHR0cHM6Ly9naXRodWIuY29tL3BpbXRlcnJ5L2xvZ2xldmVsXHJcbipcclxuKiBDb3B5cmlnaHQgKGMpIDIwMTMgVGltIFBlcnJ5XHJcbiogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxyXG4qL1xyXG4oZnVuY3Rpb24gKHJvb3QsIGRlZmluaXRpb24pIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzICYmIHR5cGVvZiByZXF1aXJlID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBkZWZpbml0aW9uKCk7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgZGVmaW5lKGRlZmluaXRpb24pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByb290LmxvZyA9IGRlZmluaXRpb24oKTtcclxuICAgIH1cclxufSh0aGlzLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgIHZhciBub29wID0gZnVuY3Rpb24oKSB7fTtcclxuICAgIHZhciB1bmRlZmluZWRUeXBlID0gXCJ1bmRlZmluZWRcIjtcclxuXHJcbiAgICBmdW5jdGlvbiByZWFsTWV0aG9kKG1ldGhvZE5hbWUpIHtcclxuICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUgPT09IHVuZGVmaW5lZFR5cGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBXZSBjYW4ndCBidWlsZCBhIHJlYWwgbWV0aG9kIHdpdGhvdXQgYSBjb25zb2xlIHRvIGxvZyB0b1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY29uc29sZVttZXRob2ROYW1lXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBiaW5kTWV0aG9kKGNvbnNvbGUsIG1ldGhvZE5hbWUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY29uc29sZS5sb2cgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gYmluZE1ldGhvZChjb25zb2xlLCAnbG9nJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5vb3A7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGJpbmRNZXRob2Qob2JqLCBtZXRob2ROYW1lKSB7XHJcbiAgICAgICAgdmFyIG1ldGhvZCA9IG9ialttZXRob2ROYW1lXTtcclxuICAgICAgICBpZiAodHlwZW9mIG1ldGhvZC5iaW5kID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtZXRob2QuYmluZChvYmopO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChtZXRob2QsIG9iaik7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIE1pc3NpbmcgYmluZCBzaGltIG9yIElFOCArIE1vZGVybml6ciwgZmFsbGJhY2sgdG8gd3JhcHBpbmdcclxuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmFwcGx5KG1ldGhvZCwgW29iaiwgYXJndW1lbnRzXSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIHRoZXNlIHByaXZhdGUgZnVuY3Rpb25zIGFsd2F5cyBuZWVkIGB0aGlzYCB0byBiZSBzZXQgcHJvcGVybHlcclxuXHJcbiAgICBmdW5jdGlvbiBlbmFibGVMb2dnaW5nV2hlbkNvbnNvbGVBcnJpdmVzKG1ldGhvZE5hbWUsIGxldmVsLCBsb2dnZXJOYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSB1bmRlZmluZWRUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICByZXBsYWNlTG9nZ2luZ01ldGhvZHMuY2FsbCh0aGlzLCBsZXZlbCwgbG9nZ2VyTmFtZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzW21ldGhvZE5hbWVdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJlcGxhY2VMb2dnaW5nTWV0aG9kcyhsZXZlbCwgbG9nZ2VyTmFtZSkge1xyXG4gICAgICAgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsb2dNZXRob2RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBtZXRob2ROYW1lID0gbG9nTWV0aG9kc1tpXTtcclxuICAgICAgICAgICAgdGhpc1ttZXRob2ROYW1lXSA9IChpIDwgbGV2ZWwpID9cclxuICAgICAgICAgICAgICAgIG5vb3AgOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5tZXRob2RGYWN0b3J5KG1ldGhvZE5hbWUsIGxldmVsLCBsb2dnZXJOYW1lKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZGVmYXVsdE1ldGhvZEZhY3RvcnkobWV0aG9kTmFtZSwgbGV2ZWwsIGxvZ2dlck5hbWUpIHtcclxuICAgICAgICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xyXG4gICAgICAgIHJldHVybiByZWFsTWV0aG9kKG1ldGhvZE5hbWUpIHx8XHJcbiAgICAgICAgICAgICAgIGVuYWJsZUxvZ2dpbmdXaGVuQ29uc29sZUFycml2ZXMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgbG9nTWV0aG9kcyA9IFtcclxuICAgICAgICBcInRyYWNlXCIsXHJcbiAgICAgICAgXCJkZWJ1Z1wiLFxyXG4gICAgICAgIFwiaW5mb1wiLFxyXG4gICAgICAgIFwid2FyblwiLFxyXG4gICAgICAgIFwiZXJyb3JcIlxyXG4gICAgXTtcclxuXHJcbiAgICBmdW5jdGlvbiBMb2dnZXIobmFtZSwgZGVmYXVsdExldmVsLCBmYWN0b3J5KSB7XHJcbiAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgdmFyIGN1cnJlbnRMZXZlbDtcclxuICAgICAgdmFyIHN0b3JhZ2VLZXkgPSBcImxvZ2xldmVsXCI7XHJcbiAgICAgIGlmIChuYW1lKSB7XHJcbiAgICAgICAgc3RvcmFnZUtleSArPSBcIjpcIiArIG5hbWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIHBlcnNpc3RMZXZlbElmUG9zc2libGUobGV2ZWxOdW0pIHtcclxuICAgICAgICAgIHZhciBsZXZlbE5hbWUgPSAobG9nTWV0aG9kc1tsZXZlbE51bV0gfHwgJ3NpbGVudCcpLnRvVXBwZXJDYXNlKCk7XHJcblxyXG4gICAgICAgICAgLy8gVXNlIGxvY2FsU3RvcmFnZSBpZiBhdmFpbGFibGVcclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZVtzdG9yYWdlS2V5XSA9IGxldmVsTmFtZTtcclxuICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9IGNhdGNoIChpZ25vcmUpIHt9XHJcblxyXG4gICAgICAgICAgLy8gVXNlIHNlc3Npb24gY29va2llIGFzIGZhbGxiYWNrXHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIHdpbmRvdy5kb2N1bWVudC5jb29raWUgPVxyXG4gICAgICAgICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KHN0b3JhZ2VLZXkpICsgXCI9XCIgKyBsZXZlbE5hbWUgKyBcIjtcIjtcclxuICAgICAgICAgIH0gY2F0Y2ggKGlnbm9yZSkge31cclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gZ2V0UGVyc2lzdGVkTGV2ZWwoKSB7XHJcbiAgICAgICAgICB2YXIgc3RvcmVkTGV2ZWw7XHJcblxyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICBzdG9yZWRMZXZlbCA9IHdpbmRvdy5sb2NhbFN0b3JhZ2Vbc3RvcmFnZUtleV07XHJcbiAgICAgICAgICB9IGNhdGNoIChpZ25vcmUpIHt9XHJcblxyXG4gICAgICAgICAgaWYgKHR5cGVvZiBzdG9yZWRMZXZlbCA9PT0gdW5kZWZpbmVkVHlwZSkge1xyXG4gICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgIHZhciBjb29raWUgPSB3aW5kb3cuZG9jdW1lbnQuY29va2llO1xyXG4gICAgICAgICAgICAgICAgICB2YXIgbG9jYXRpb24gPSBjb29raWUuaW5kZXhPZihcclxuICAgICAgICAgICAgICAgICAgICAgIGVuY29kZVVSSUNvbXBvbmVudChzdG9yYWdlS2V5KSArIFwiPVwiKTtcclxuICAgICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBzdG9yZWRMZXZlbCA9IC9eKFteO10rKS8uZXhlYyhjb29raWUuc2xpY2UobG9jYXRpb24pKVsxXTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGlnbm9yZSkge31cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBJZiB0aGUgc3RvcmVkIGxldmVsIGlzIG5vdCB2YWxpZCwgdHJlYXQgaXQgYXMgaWYgbm90aGluZyB3YXMgc3RvcmVkLlxyXG4gICAgICAgICAgaWYgKHNlbGYubGV2ZWxzW3N0b3JlZExldmVsXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgc3RvcmVkTGV2ZWwgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgcmV0dXJuIHN0b3JlZExldmVsO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvKlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBQdWJsaWMgQVBJXHJcbiAgICAgICAqXHJcbiAgICAgICAqL1xyXG5cclxuICAgICAgc2VsZi5sZXZlbHMgPSB7IFwiVFJBQ0VcIjogMCwgXCJERUJVR1wiOiAxLCBcIklORk9cIjogMiwgXCJXQVJOXCI6IDMsXHJcbiAgICAgICAgICBcIkVSUk9SXCI6IDQsIFwiU0lMRU5UXCI6IDV9O1xyXG5cclxuICAgICAgc2VsZi5tZXRob2RGYWN0b3J5ID0gZmFjdG9yeSB8fCBkZWZhdWx0TWV0aG9kRmFjdG9yeTtcclxuXHJcbiAgICAgIHNlbGYuZ2V0TGV2ZWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICByZXR1cm4gY3VycmVudExldmVsO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgc2VsZi5zZXRMZXZlbCA9IGZ1bmN0aW9uIChsZXZlbCwgcGVyc2lzdCkge1xyXG4gICAgICAgICAgaWYgKHR5cGVvZiBsZXZlbCA9PT0gXCJzdHJpbmdcIiAmJiBzZWxmLmxldmVsc1tsZXZlbC50b1VwcGVyQ2FzZSgpXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgbGV2ZWwgPSBzZWxmLmxldmVsc1tsZXZlbC50b1VwcGVyQ2FzZSgpXTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmICh0eXBlb2YgbGV2ZWwgPT09IFwibnVtYmVyXCIgJiYgbGV2ZWwgPj0gMCAmJiBsZXZlbCA8PSBzZWxmLmxldmVscy5TSUxFTlQpIHtcclxuICAgICAgICAgICAgICBjdXJyZW50TGV2ZWwgPSBsZXZlbDtcclxuICAgICAgICAgICAgICBpZiAocGVyc2lzdCAhPT0gZmFsc2UpIHsgIC8vIGRlZmF1bHRzIHRvIHRydWVcclxuICAgICAgICAgICAgICAgICAgcGVyc2lzdExldmVsSWZQb3NzaWJsZShsZXZlbCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHJlcGxhY2VMb2dnaW5nTWV0aG9kcy5jYWxsKHNlbGYsIGxldmVsLCBuYW1lKTtcclxuICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUgPT09IHVuZGVmaW5lZFR5cGUgJiYgbGV2ZWwgPCBzZWxmLmxldmVscy5TSUxFTlQpIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiTm8gY29uc29sZSBhdmFpbGFibGUgZm9yIGxvZ2dpbmdcIjtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHRocm93IFwibG9nLnNldExldmVsKCkgY2FsbGVkIHdpdGggaW52YWxpZCBsZXZlbDogXCIgKyBsZXZlbDtcclxuICAgICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIHNlbGYuc2V0RGVmYXVsdExldmVsID0gZnVuY3Rpb24gKGxldmVsKSB7XHJcbiAgICAgICAgICBpZiAoIWdldFBlcnNpc3RlZExldmVsKCkpIHtcclxuICAgICAgICAgICAgICBzZWxmLnNldExldmVsKGxldmVsLCBmYWxzZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBzZWxmLmVuYWJsZUFsbCA9IGZ1bmN0aW9uKHBlcnNpc3QpIHtcclxuICAgICAgICAgIHNlbGYuc2V0TGV2ZWwoc2VsZi5sZXZlbHMuVFJBQ0UsIHBlcnNpc3QpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgc2VsZi5kaXNhYmxlQWxsID0gZnVuY3Rpb24ocGVyc2lzdCkge1xyXG4gICAgICAgICAgc2VsZi5zZXRMZXZlbChzZWxmLmxldmVscy5TSUxFTlQsIHBlcnNpc3QpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gSW5pdGlhbGl6ZSB3aXRoIHRoZSByaWdodCBsZXZlbFxyXG4gICAgICB2YXIgaW5pdGlhbExldmVsID0gZ2V0UGVyc2lzdGVkTGV2ZWwoKTtcclxuICAgICAgaWYgKGluaXRpYWxMZXZlbCA9PSBudWxsKSB7XHJcbiAgICAgICAgICBpbml0aWFsTGV2ZWwgPSBkZWZhdWx0TGV2ZWwgPT0gbnVsbCA/IFwiV0FSTlwiIDogZGVmYXVsdExldmVsO1xyXG4gICAgICB9XHJcbiAgICAgIHNlbGYuc2V0TGV2ZWwoaW5pdGlhbExldmVsLCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLypcclxuICAgICAqXHJcbiAgICAgKiBQYWNrYWdlLWxldmVsIEFQSVxyXG4gICAgICpcclxuICAgICAqL1xyXG5cclxuICAgIHZhciBkZWZhdWx0TG9nZ2VyID0gbmV3IExvZ2dlcigpO1xyXG5cclxuICAgIHZhciBfbG9nZ2Vyc0J5TmFtZSA9IHt9O1xyXG4gICAgZGVmYXVsdExvZ2dlci5nZXRMb2dnZXIgPSBmdW5jdGlvbiBnZXRMb2dnZXIobmFtZSkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gXCJzdHJpbmdcIiB8fCBuYW1lID09PSBcIlwiKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiWW91IG11c3Qgc3VwcGx5IGEgbmFtZSB3aGVuIGNyZWF0aW5nIGEgbG9nZ2VyLlwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBsb2dnZXIgPSBfbG9nZ2Vyc0J5TmFtZVtuYW1lXTtcclxuICAgICAgICBpZiAoIWxvZ2dlcikge1xyXG4gICAgICAgICAgbG9nZ2VyID0gX2xvZ2dlcnNCeU5hbWVbbmFtZV0gPSBuZXcgTG9nZ2VyKFxyXG4gICAgICAgICAgICBuYW1lLCBkZWZhdWx0TG9nZ2VyLmdldExldmVsKCksIGRlZmF1bHRMb2dnZXIubWV0aG9kRmFjdG9yeSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBsb2dnZXI7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIEdyYWIgdGhlIGN1cnJlbnQgZ2xvYmFsIGxvZyB2YXJpYWJsZSBpbiBjYXNlIG9mIG92ZXJ3cml0ZVxyXG4gICAgdmFyIF9sb2cgPSAodHlwZW9mIHdpbmRvdyAhPT0gdW5kZWZpbmVkVHlwZSkgPyB3aW5kb3cubG9nIDogdW5kZWZpbmVkO1xyXG4gICAgZGVmYXVsdExvZ2dlci5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IHVuZGVmaW5lZFR5cGUgJiZcclxuICAgICAgICAgICAgICAgd2luZG93LmxvZyA9PT0gZGVmYXVsdExvZ2dlcikge1xyXG4gICAgICAgICAgICB3aW5kb3cubG9nID0gX2xvZztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBkZWZhdWx0TG9nZ2VyO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gZGVmYXVsdExvZ2dlcjtcclxufSkpO1xyXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2dsZXZlbC9saWIvbG9nbGV2ZWwuanNcbiAqKiBtb2R1bGUgaWQgPSA3XG4gKiogbW9kdWxlIGNodW5rcyA9IDAgMVxuICoqLyIsImltcG9ydCBleHBlY3QgZnJvbSAnY2hhaSc7XG5pbXBvcnQgeyBhcGlDYWxsIH0gZnJvbSAnLi4vc3JjL2FwaS5qcyc7XG5pbXBvcnQge0FQUF9JRCwgUExBWUVSX0lEfSBmcm9tICcuL3ZhcnMuanMnO1xuXG5kZXNjcmliZSgnYXBpLmpzJywgZnVuY3Rpb24oKSB7XG4gIGl0KCdzaG91bGQgZmFpbCBhbiBpbnZhbGlkIGNyZWF0ZSBub3RpZmljYXRpb24nLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGFwaUNhbGwoJ25vdGlmaWNhdGlvbnMnLCAnUE9TVCcsIG51bGwpLnNob3VsZC5ldmVudHVhbGx5LmJlLnJlamVjdGVkV2l0aCgnRXJyb3I6IEJhZCBSZXF1ZXN0Jyk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgc2VuZCBhIHZhbGlkIGNyZWF0ZSBub3RpZmljYXRpb24nLCBmdW5jdGlvbiAoKSB7XG4gICAgLy8gQXBwIGlzIG9uIGxvY2FsIHNlcnZlclxuICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAnYXBwX2lkJzogQVBQX0lELFxuICAgICAgJ2NvbnRlbnRzJzogeydlbic6ICdXZWIgU0RLIHVuaXQgdGVzdC4nfSxcbiAgICAgICdpbmNsdWRlX3BsYXllcl9pZHMnOiBbUExBWUVSX0lEXVxuICAgIH07XG4gICAgcmV0dXJuIGFwaUNhbGwoJ25vdGlmaWNhdGlvbnMnLCAnUE9TVCcsIHBhcmFtcykuc2hvdWxkLmV2ZW50dWFsbHkuYmUuZnVsZmlsbGVkO1xuICB9KTtcbn0pO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vdGVzdC9hcGkuanNcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vbGliL2NoYWknKTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NoYWkvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSAxMFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLyohXG4gKiBjaGFpXG4gKiBDb3B5cmlnaHQoYykgMjAxMS0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxudmFyIHVzZWQgPSBbXVxuICAsIGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vKiFcbiAqIENoYWkgdmVyc2lvblxuICovXG5cbmV4cG9ydHMudmVyc2lvbiA9ICczLjQuMSc7XG5cbi8qIVxuICogQXNzZXJ0aW9uIEVycm9yXG4gKi9cblxuZXhwb3J0cy5Bc3NlcnRpb25FcnJvciA9IHJlcXVpcmUoJ2Fzc2VydGlvbi1lcnJvcicpO1xuXG4vKiFcbiAqIFV0aWxzIGZvciBwbHVnaW5zIChub3QgZXhwb3J0ZWQpXG4gKi9cblxudmFyIHV0aWwgPSByZXF1aXJlKCcuL2NoYWkvdXRpbHMnKTtcblxuLyoqXG4gKiAjIC51c2UoZnVuY3Rpb24pXG4gKlxuICogUHJvdmlkZXMgYSB3YXkgdG8gZXh0ZW5kIHRoZSBpbnRlcm5hbHMgb2YgQ2hhaVxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259XG4gKiBAcmV0dXJucyB7dGhpc30gZm9yIGNoYWluaW5nXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMudXNlID0gZnVuY3Rpb24gKGZuKSB7XG4gIGlmICghfnVzZWQuaW5kZXhPZihmbikpIHtcbiAgICBmbih0aGlzLCB1dGlsKTtcbiAgICB1c2VkLnB1c2goZm4pO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKiFcbiAqIFV0aWxpdHkgRnVuY3Rpb25zXG4gKi9cblxuZXhwb3J0cy51dGlsID0gdXRpbDtcblxuLyohXG4gKiBDb25maWd1cmF0aW9uXG4gKi9cblxudmFyIGNvbmZpZyA9IHJlcXVpcmUoJy4vY2hhaS9jb25maWcnKTtcbmV4cG9ydHMuY29uZmlnID0gY29uZmlnO1xuXG4vKiFcbiAqIFByaW1hcnkgYEFzc2VydGlvbmAgcHJvdG90eXBlXG4gKi9cblxudmFyIGFzc2VydGlvbiA9IHJlcXVpcmUoJy4vY2hhaS9hc3NlcnRpb24nKTtcbmV4cG9ydHMudXNlKGFzc2VydGlvbik7XG5cbi8qIVxuICogQ29yZSBBc3NlcnRpb25zXG4gKi9cblxudmFyIGNvcmUgPSByZXF1aXJlKCcuL2NoYWkvY29yZS9hc3NlcnRpb25zJyk7XG5leHBvcnRzLnVzZShjb3JlKTtcblxuLyohXG4gKiBFeHBlY3QgaW50ZXJmYWNlXG4gKi9cblxudmFyIGV4cGVjdCA9IHJlcXVpcmUoJy4vY2hhaS9pbnRlcmZhY2UvZXhwZWN0Jyk7XG5leHBvcnRzLnVzZShleHBlY3QpO1xuXG4vKiFcbiAqIFNob3VsZCBpbnRlcmZhY2VcbiAqL1xuXG52YXIgc2hvdWxkID0gcmVxdWlyZSgnLi9jaGFpL2ludGVyZmFjZS9zaG91bGQnKTtcbmV4cG9ydHMudXNlKHNob3VsZCk7XG5cbi8qIVxuICogQXNzZXJ0IGludGVyZmFjZVxuICovXG5cbnZhciBhc3NlcnQgPSByZXF1aXJlKCcuL2NoYWkvaW50ZXJmYWNlL2Fzc2VydCcpO1xuZXhwb3J0cy51c2UoYXNzZXJ0KTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NoYWkvbGliL2NoYWkuanNcbiAqKiBtb2R1bGUgaWQgPSAxMVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLyohXG4gKiBhc3NlcnRpb24tZXJyb3JcbiAqIENvcHlyaWdodChjKSAyMDEzIEpha2UgTHVlciA8amFrZUBxdWFsaWFuY3kuY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxuLyohXG4gKiBSZXR1cm4gYSBmdW5jdGlvbiB0aGF0IHdpbGwgY29weSBwcm9wZXJ0aWVzIGZyb21cbiAqIG9uZSBvYmplY3QgdG8gYW5vdGhlciBleGNsdWRpbmcgYW55IG9yaWdpbmFsbHlcbiAqIGxpc3RlZC4gUmV0dXJuZWQgZnVuY3Rpb24gd2lsbCBjcmVhdGUgYSBuZXcgYHt9YC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXhjbHVkZWQgcHJvcGVydGllcyAuLi5cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIGV4Y2x1ZGUgKCkge1xuICB2YXIgZXhjbHVkZXMgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG5cbiAgZnVuY3Rpb24gZXhjbHVkZVByb3BzIChyZXMsIG9iaikge1xuICAgIE9iamVjdC5rZXlzKG9iaikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICBpZiAoIX5leGNsdWRlcy5pbmRleE9mKGtleSkpIHJlc1trZXldID0gb2JqW2tleV07XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gZXh0ZW5kRXhjbHVkZSAoKSB7XG4gICAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cylcbiAgICAgICwgaSA9IDBcbiAgICAgICwgcmVzID0ge307XG5cbiAgICBmb3IgKDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGV4Y2x1ZGVQcm9wcyhyZXMsIGFyZ3NbaV0pO1xuICAgIH1cblxuICAgIHJldHVybiByZXM7XG4gIH07XG59O1xuXG4vKiFcbiAqIFByaW1hcnkgRXhwb3J0c1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gQXNzZXJ0aW9uRXJyb3I7XG5cbi8qKlxuICogIyMjIEFzc2VydGlvbkVycm9yXG4gKlxuICogQW4gZXh0ZW5zaW9uIG9mIHRoZSBKYXZhU2NyaXB0IGBFcnJvcmAgY29uc3RydWN0b3IgZm9yXG4gKiBhc3NlcnRpb24gYW5kIHZhbGlkYXRpb24gc2NlbmFyaW9zLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcGVydGllcyB0byBpbmNsdWRlIChvcHRpb25hbClcbiAqIEBwYXJhbSB7Y2FsbGVlfSBzdGFydCBzdGFjayBmdW5jdGlvbiAob3B0aW9uYWwpXG4gKi9cblxuZnVuY3Rpb24gQXNzZXJ0aW9uRXJyb3IgKG1lc3NhZ2UsIF9wcm9wcywgc3NmKSB7XG4gIHZhciBleHRlbmQgPSBleGNsdWRlKCduYW1lJywgJ21lc3NhZ2UnLCAnc3RhY2snLCAnY29uc3RydWN0b3InLCAndG9KU09OJylcbiAgICAsIHByb3BzID0gZXh0ZW5kKF9wcm9wcyB8fCB7fSk7XG5cbiAgLy8gZGVmYXVsdCB2YWx1ZXNcbiAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZSB8fCAnVW5zcGVjaWZpZWQgQXNzZXJ0aW9uRXJyb3InO1xuICB0aGlzLnNob3dEaWZmID0gZmFsc2U7XG5cbiAgLy8gY29weSBmcm9tIHByb3BlcnRpZXNcbiAgZm9yICh2YXIga2V5IGluIHByb3BzKSB7XG4gICAgdGhpc1trZXldID0gcHJvcHNba2V5XTtcbiAgfVxuXG4gIC8vIGNhcHR1cmUgc3RhY2sgdHJhY2VcbiAgc3NmID0gc3NmIHx8IGFyZ3VtZW50cy5jYWxsZWU7XG4gIGlmIChzc2YgJiYgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcbiAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBzc2YpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuc3RhY2sgPSBuZXcgRXJyb3IoKS5zdGFjaztcbiAgfVxufVxuXG4vKiFcbiAqIEluaGVyaXQgZnJvbSBFcnJvci5wcm90b3R5cGVcbiAqL1xuXG5Bc3NlcnRpb25FcnJvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7XG5cbi8qIVxuICogU3RhdGljYWxseSBzZXQgbmFtZVxuICovXG5cbkFzc2VydGlvbkVycm9yLnByb3RvdHlwZS5uYW1lID0gJ0Fzc2VydGlvbkVycm9yJztcblxuLyohXG4gKiBFbnN1cmUgY29ycmVjdCBjb25zdHJ1Y3RvclxuICovXG5cbkFzc2VydGlvbkVycm9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEFzc2VydGlvbkVycm9yO1xuXG4vKipcbiAqIEFsbG93IGVycm9ycyB0byBiZSBjb252ZXJ0ZWQgdG8gSlNPTiBmb3Igc3RhdGljIHRyYW5zZmVyLlxuICpcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gaW5jbHVkZSBzdGFjayAoZGVmYXVsdDogYHRydWVgKVxuICogQHJldHVybiB7T2JqZWN0fSBvYmplY3QgdGhhdCBjYW4gYmUgYEpTT04uc3RyaW5naWZ5YFxuICovXG5cbkFzc2VydGlvbkVycm9yLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoc3RhY2spIHtcbiAgdmFyIGV4dGVuZCA9IGV4Y2x1ZGUoJ2NvbnN0cnVjdG9yJywgJ3RvSlNPTicsICdzdGFjaycpXG4gICAgLCBwcm9wcyA9IGV4dGVuZCh7IG5hbWU6IHRoaXMubmFtZSB9LCB0aGlzKTtcblxuICAvLyBpbmNsdWRlIHN0YWNrIGlmIGV4aXN0cyBhbmQgbm90IHR1cm5lZCBvZmZcbiAgaWYgKGZhbHNlICE9PSBzdGFjayAmJiB0aGlzLnN0YWNrKSB7XG4gICAgcHJvcHMuc3RhY2sgPSB0aGlzLnN0YWNrO1xuICB9XG5cbiAgcmV0dXJuIHByb3BzO1xufTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Fzc2VydGlvbi1lcnJvci9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDEyXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvKiFcbiAqIGNoYWlcbiAqIENvcHlyaWdodChjKSAyMDExIEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxuLyohXG4gKiBNYWluIGV4cG9ydHNcbiAqL1xuXG52YXIgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8qIVxuICogdGVzdCB1dGlsaXR5XG4gKi9cblxuZXhwb3J0cy50ZXN0ID0gcmVxdWlyZSgnLi90ZXN0Jyk7XG5cbi8qIVxuICogdHlwZSB1dGlsaXR5XG4gKi9cblxuZXhwb3J0cy50eXBlID0gcmVxdWlyZSgndHlwZS1kZXRlY3QnKTtcblxuLyohXG4gKiBleHBlY3RUeXBlcyB1dGlsaXR5XG4gKi9cbmV4cG9ydHMuZXhwZWN0VHlwZXMgPSByZXF1aXJlKCcuL2V4cGVjdFR5cGVzJyk7XG5cbi8qIVxuICogbWVzc2FnZSB1dGlsaXR5XG4gKi9cblxuZXhwb3J0cy5nZXRNZXNzYWdlID0gcmVxdWlyZSgnLi9nZXRNZXNzYWdlJyk7XG5cbi8qIVxuICogYWN0dWFsIHV0aWxpdHlcbiAqL1xuXG5leHBvcnRzLmdldEFjdHVhbCA9IHJlcXVpcmUoJy4vZ2V0QWN0dWFsJyk7XG5cbi8qIVxuICogSW5zcGVjdCB1dGlsXG4gKi9cblxuZXhwb3J0cy5pbnNwZWN0ID0gcmVxdWlyZSgnLi9pbnNwZWN0Jyk7XG5cbi8qIVxuICogT2JqZWN0IERpc3BsYXkgdXRpbFxuICovXG5cbmV4cG9ydHMub2JqRGlzcGxheSA9IHJlcXVpcmUoJy4vb2JqRGlzcGxheScpO1xuXG4vKiFcbiAqIEZsYWcgdXRpbGl0eVxuICovXG5cbmV4cG9ydHMuZmxhZyA9IHJlcXVpcmUoJy4vZmxhZycpO1xuXG4vKiFcbiAqIEZsYWcgdHJhbnNmZXJyaW5nIHV0aWxpdHlcbiAqL1xuXG5leHBvcnRzLnRyYW5zZmVyRmxhZ3MgPSByZXF1aXJlKCcuL3RyYW5zZmVyRmxhZ3MnKTtcblxuLyohXG4gKiBEZWVwIGVxdWFsIHV0aWxpdHlcbiAqL1xuXG5leHBvcnRzLmVxbCA9IHJlcXVpcmUoJ2RlZXAtZXFsJyk7XG5cbi8qIVxuICogRGVlcCBwYXRoIHZhbHVlXG4gKi9cblxuZXhwb3J0cy5nZXRQYXRoVmFsdWUgPSByZXF1aXJlKCcuL2dldFBhdGhWYWx1ZScpO1xuXG4vKiFcbiAqIERlZXAgcGF0aCBpbmZvXG4gKi9cblxuZXhwb3J0cy5nZXRQYXRoSW5mbyA9IHJlcXVpcmUoJy4vZ2V0UGF0aEluZm8nKTtcblxuLyohXG4gKiBDaGVjayBpZiBhIHByb3BlcnR5IGV4aXN0c1xuICovXG5cbmV4cG9ydHMuaGFzUHJvcGVydHkgPSByZXF1aXJlKCcuL2hhc1Byb3BlcnR5Jyk7XG5cbi8qIVxuICogRnVuY3Rpb24gbmFtZVxuICovXG5cbmV4cG9ydHMuZ2V0TmFtZSA9IHJlcXVpcmUoJy4vZ2V0TmFtZScpO1xuXG4vKiFcbiAqIGFkZCBQcm9wZXJ0eVxuICovXG5cbmV4cG9ydHMuYWRkUHJvcGVydHkgPSByZXF1aXJlKCcuL2FkZFByb3BlcnR5Jyk7XG5cbi8qIVxuICogYWRkIE1ldGhvZFxuICovXG5cbmV4cG9ydHMuYWRkTWV0aG9kID0gcmVxdWlyZSgnLi9hZGRNZXRob2QnKTtcblxuLyohXG4gKiBvdmVyd3JpdGUgUHJvcGVydHlcbiAqL1xuXG5leHBvcnRzLm92ZXJ3cml0ZVByb3BlcnR5ID0gcmVxdWlyZSgnLi9vdmVyd3JpdGVQcm9wZXJ0eScpO1xuXG4vKiFcbiAqIG92ZXJ3cml0ZSBNZXRob2RcbiAqL1xuXG5leHBvcnRzLm92ZXJ3cml0ZU1ldGhvZCA9IHJlcXVpcmUoJy4vb3ZlcndyaXRlTWV0aG9kJyk7XG5cbi8qIVxuICogQWRkIGEgY2hhaW5hYmxlIG1ldGhvZFxuICovXG5cbmV4cG9ydHMuYWRkQ2hhaW5hYmxlTWV0aG9kID0gcmVxdWlyZSgnLi9hZGRDaGFpbmFibGVNZXRob2QnKTtcblxuLyohXG4gKiBPdmVyd3JpdGUgY2hhaW5hYmxlIG1ldGhvZFxuICovXG5cbmV4cG9ydHMub3ZlcndyaXRlQ2hhaW5hYmxlTWV0aG9kID0gcmVxdWlyZSgnLi9vdmVyd3JpdGVDaGFpbmFibGVNZXRob2QnKTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NoYWkvbGliL2NoYWkvdXRpbHMvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSAxM1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLyohXG4gKiBDaGFpIC0gdGVzdCB1dGlsaXR5XG4gKiBDb3B5cmlnaHQoYykgMjAxMi0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxuLyohXG4gKiBNb2R1bGUgZGVwZW5kYW5jaWVzXG4gKi9cblxudmFyIGZsYWcgPSByZXF1aXJlKCcuL2ZsYWcnKTtcblxuLyoqXG4gKiAjIHRlc3Qob2JqZWN0LCBleHByZXNzaW9uKVxuICpcbiAqIFRlc3QgYW5kIG9iamVjdCBmb3IgZXhwcmVzc2lvbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IChjb25zdHJ1Y3RlZCBBc3NlcnRpb24pXG4gKiBAcGFyYW0ge0FyZ3VtZW50c30gY2hhaS5Bc3NlcnRpb24ucHJvdG90eXBlLmFzc2VydCBhcmd1bWVudHNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvYmosIGFyZ3MpIHtcbiAgdmFyIG5lZ2F0ZSA9IGZsYWcob2JqLCAnbmVnYXRlJylcbiAgICAsIGV4cHIgPSBhcmdzWzBdO1xuICByZXR1cm4gbmVnYXRlID8gIWV4cHIgOiBleHByO1xufTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NoYWkvbGliL2NoYWkvdXRpbHMvdGVzdC5qc1xuICoqIG1vZHVsZSBpZCA9IDE0XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvKiFcbiAqIENoYWkgLSBmbGFnIHV0aWxpdHlcbiAqIENvcHlyaWdodChjKSAyMDEyLTIwMTQgSmFrZSBMdWVyIDxqYWtlQGFsb2dpY2FscGFyYWRveC5jb20+XG4gKiBNSVQgTGljZW5zZWRcbiAqL1xuXG4vKipcbiAqICMjIyBmbGFnKG9iamVjdCwga2V5LCBbdmFsdWVdKVxuICpcbiAqIEdldCBvciBzZXQgYSBmbGFnIHZhbHVlIG9uIGFuIG9iamVjdC4gSWYgYVxuICogdmFsdWUgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSBzZXQsIGVsc2UgaXQgd2lsbFxuICogcmV0dXJuIHRoZSBjdXJyZW50bHkgc2V0IHZhbHVlIG9yIGB1bmRlZmluZWRgIGlmXG4gKiB0aGUgdmFsdWUgaXMgbm90IHNldC5cbiAqXG4gKiAgICAgdXRpbHMuZmxhZyh0aGlzLCAnZm9vJywgJ2JhcicpOyAvLyBzZXR0ZXJcbiAqICAgICB1dGlscy5mbGFnKHRoaXMsICdmb28nKTsgLy8gZ2V0dGVyLCByZXR1cm5zIGBiYXJgXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBjb25zdHJ1Y3RlZCBBc3NlcnRpb25cbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlIChvcHRpb25hbClcbiAqIEBuYW1lIGZsYWdcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9iaiwga2V5LCB2YWx1ZSkge1xuICB2YXIgZmxhZ3MgPSBvYmouX19mbGFncyB8fCAob2JqLl9fZmxhZ3MgPSBPYmplY3QuY3JlYXRlKG51bGwpKTtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDMpIHtcbiAgICBmbGFnc1trZXldID0gdmFsdWU7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZsYWdzW2tleV07XG4gIH1cbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jaGFpL2xpYi9jaGFpL3V0aWxzL2ZsYWcuanNcbiAqKiBtb2R1bGUgaWQgPSAxNVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLyohXG4gKiB0eXBlLWRldGVjdFxuICogQ29weXJpZ2h0KGMpIDIwMTMgamFrZSBsdWVyIDxqYWtlQGFsb2dpY2FscGFyYWRveC5jb20+XG4gKiBNSVQgTGljZW5zZWRcbiAqL1xuXG4vKiFcbiAqIFByaW1hcnkgRXhwb3J0c1xuICovXG5cbnZhciBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBnZXRUeXBlO1xuXG4vKipcbiAqICMjIyB0eXBlT2YgKG9iailcbiAqXG4gKiBVc2Ugc2V2ZXJhbCBkaWZmZXJlbnQgdGVjaG5pcXVlcyB0byBkZXRlcm1pbmVcbiAqIHRoZSB0eXBlIG9mIG9iamVjdCBiZWluZyB0ZXN0ZWQuXG4gKlxuICpcbiAqIEBwYXJhbSB7TWl4ZWR9IG9iamVjdFxuICogQHJldHVybiB7U3RyaW5nfSBvYmplY3QgdHlwZVxuICogQGFwaSBwdWJsaWNcbiAqL1xudmFyIG9iamVjdFR5cGVSZWdleHAgPSAvXlxcW29iamVjdCAoLiopXFxdJC87XG5cbmZ1bmN0aW9uIGdldFR5cGUob2JqKSB7XG4gIHZhciB0eXBlID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaikubWF0Y2gob2JqZWN0VHlwZVJlZ2V4cClbMV0udG9Mb3dlckNhc2UoKTtcbiAgLy8gTGV0IFwibmV3IFN0cmluZygnJylcIiByZXR1cm4gJ29iamVjdCdcbiAgaWYgKHR5cGVvZiBQcm9taXNlID09PSAnZnVuY3Rpb24nICYmIG9iaiBpbnN0YW5jZW9mIFByb21pc2UpIHJldHVybiAncHJvbWlzZSc7XG4gIC8vIFBoYW50b21KUyBoYXMgdHlwZSBcIkRPTVdpbmRvd1wiIGZvciBudWxsXG4gIGlmIChvYmogPT09IG51bGwpIHJldHVybiAnbnVsbCc7XG4gIC8vIFBoYW50b21KUyBoYXMgdHlwZSBcIkRPTVdpbmRvd1wiIGZvciB1bmRlZmluZWRcbiAgaWYgKG9iaiA9PT0gdW5kZWZpbmVkKSByZXR1cm4gJ3VuZGVmaW5lZCc7XG4gIHJldHVybiB0eXBlO1xufVxuXG5leHBvcnRzLkxpYnJhcnkgPSBMaWJyYXJ5O1xuXG4vKipcbiAqICMjIyBMaWJyYXJ5XG4gKlxuICogQ3JlYXRlIGEgcmVwb3NpdG9yeSBmb3IgY3VzdG9tIHR5cGUgZGV0ZWN0aW9uLlxuICpcbiAqIGBgYGpzXG4gKiB2YXIgbGliID0gbmV3IHR5cGUuTGlicmFyeTtcbiAqIGBgYFxuICpcbiAqL1xuXG5mdW5jdGlvbiBMaWJyYXJ5KCkge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgTGlicmFyeSkpIHJldHVybiBuZXcgTGlicmFyeSgpO1xuICB0aGlzLnRlc3RzID0ge307XG59XG5cbi8qKlxuICogIyMjIyAub2YgKG9iailcbiAqXG4gKiBFeHBvc2UgcmVwbGFjZW1lbnQgYHR5cGVvZmAgZGV0ZWN0aW9uIHRvIHRoZSBsaWJyYXJ5LlxuICpcbiAqIGBgYGpzXG4gKiBpZiAoJ3N0cmluZycgPT09IGxpYi5vZignaGVsbG8gd29ybGQnKSkge1xuICogICAvLyAuLi5cbiAqIH1cbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7TWl4ZWR9IG9iamVjdCB0byB0ZXN0XG4gKiBAcmV0dXJuIHtTdHJpbmd9IHR5cGVcbiAqL1xuXG5MaWJyYXJ5LnByb3RvdHlwZS5vZiA9IGdldFR5cGU7XG5cbi8qKlxuICogIyMjIyAuZGVmaW5lICh0eXBlLCB0ZXN0KVxuICpcbiAqIEFkZCBhIHRlc3QgdG8gZm9yIHRoZSBgLnRlc3QoKWAgYXNzZXJ0aW9uLlxuICpcbiAqIENhbiBiZSBkZWZpbmVkIGFzIGEgcmVndWxhciBleHByZXNzaW9uOlxuICpcbiAqIGBgYGpzXG4gKiBsaWIuZGVmaW5lKCdpbnQnLCAvXlswLTldKyQvKTtcbiAqIGBgYFxuICpcbiAqIC4uLiBvciBhcyBhIGZ1bmN0aW9uOlxuICpcbiAqIGBgYGpzXG4gKiBsaWIuZGVmaW5lKCdibG4nLCBmdW5jdGlvbiAob2JqKSB7XG4gKiAgIGlmICgnYm9vbGVhbicgPT09IGxpYi5vZihvYmopKSByZXR1cm4gdHJ1ZTtcbiAqICAgdmFyIGJsbnMgPSBbICd5ZXMnLCAnbm8nLCAndHJ1ZScsICdmYWxzZScsIDEsIDAgXTtcbiAqICAgaWYgKCdzdHJpbmcnID09PSBsaWIub2Yob2JqKSkgb2JqID0gb2JqLnRvTG93ZXJDYXNlKCk7XG4gKiAgIHJldHVybiAhISB+Ymxucy5pbmRleE9mKG9iaik7XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKiBAcGFyYW0ge1JlZ0V4cHxGdW5jdGlvbn0gdGVzdFxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5MaWJyYXJ5LnByb3RvdHlwZS5kZWZpbmUgPSBmdW5jdGlvbih0eXBlLCB0ZXN0KSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSByZXR1cm4gdGhpcy50ZXN0c1t0eXBlXTtcbiAgdGhpcy50ZXN0c1t0eXBlXSA9IHRlc3Q7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiAjIyMjIC50ZXN0IChvYmosIHRlc3QpXG4gKlxuICogQXNzZXJ0IHRoYXQgYW4gb2JqZWN0IGlzIG9mIHR5cGUuIFdpbGwgZmlyc3RcbiAqIGNoZWNrIG5hdGl2ZXMsIGFuZCBpZiB0aGF0IGRvZXMgbm90IHBhc3MgaXQgd2lsbFxuICogdXNlIHRoZSB1c2VyIGRlZmluZWQgY3VzdG9tIHRlc3RzLlxuICpcbiAqIGBgYGpzXG4gKiBhc3NlcnQobGliLnRlc3QoJzEnLCAnaW50JykpO1xuICogYXNzZXJ0KGxpYi50ZXN0KCd5ZXMnLCAnYmxuJykpO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHtNaXhlZH0gb2JqZWN0XG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICogQHJldHVybiB7Qm9vbGVhbn0gcmVzdWx0XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkxpYnJhcnkucHJvdG90eXBlLnRlc3QgPSBmdW5jdGlvbihvYmosIHR5cGUpIHtcbiAgaWYgKHR5cGUgPT09IGdldFR5cGUob2JqKSkgcmV0dXJuIHRydWU7XG4gIHZhciB0ZXN0ID0gdGhpcy50ZXN0c1t0eXBlXTtcblxuICBpZiAodGVzdCAmJiAncmVnZXhwJyA9PT0gZ2V0VHlwZSh0ZXN0KSkge1xuICAgIHJldHVybiB0ZXN0LnRlc3Qob2JqKTtcbiAgfSBlbHNlIGlmICh0ZXN0ICYmICdmdW5jdGlvbicgPT09IGdldFR5cGUodGVzdCkpIHtcbiAgICByZXR1cm4gdGVzdChvYmopO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcignVHlwZSB0ZXN0IFwiJyArIHR5cGUgKyAnXCIgbm90IGRlZmluZWQgb3IgaW52YWxpZC4nKTtcbiAgfVxufTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3R5cGUtZGV0ZWN0L2xpYi90eXBlLmpzXG4gKiogbW9kdWxlIGlkID0gMTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8qIVxuICogQ2hhaSAtIGV4cGVjdFR5cGVzIHV0aWxpdHlcbiAqIENvcHlyaWdodChjKSAyMDEyLTIwMTQgSmFrZSBMdWVyIDxqYWtlQGFsb2dpY2FscGFyYWRveC5jb20+XG4gKiBNSVQgTGljZW5zZWRcbiAqL1xuXG4vKipcbiAqICMjIyBleHBlY3RUeXBlcyhvYmosIHR5cGVzKVxuICpcbiAqIEVuc3VyZXMgdGhhdCB0aGUgb2JqZWN0IGJlaW5nIHRlc3RlZCBhZ2FpbnN0IGlzIG9mIGEgdmFsaWQgdHlwZS5cbiAqXG4gKiAgICAgdXRpbHMuZXhwZWN0VHlwZXModGhpcywgWydhcnJheScsICdvYmplY3QnLCAnc3RyaW5nJ10pO1xuICpcbiAqIEBwYXJhbSB7TWl4ZWR9IG9iaiBjb25zdHJ1Y3RlZCBBc3NlcnRpb25cbiAqIEBwYXJhbSB7QXJyYXl9IHR5cGUgQSBsaXN0IG9mIGFsbG93ZWQgdHlwZXMgZm9yIHRoaXMgYXNzZXJ0aW9uXG4gKiBAbmFtZSBleHBlY3RUeXBlc1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG52YXIgQXNzZXJ0aW9uRXJyb3IgPSByZXF1aXJlKCdhc3NlcnRpb24tZXJyb3InKTtcbnZhciBmbGFnID0gcmVxdWlyZSgnLi9mbGFnJyk7XG52YXIgdHlwZSA9IHJlcXVpcmUoJ3R5cGUtZGV0ZWN0Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9iaiwgdHlwZXMpIHtcbiAgdmFyIG9iaiA9IGZsYWcob2JqLCAnb2JqZWN0Jyk7XG4gIHR5cGVzID0gdHlwZXMubWFwKGZ1bmN0aW9uICh0KSB7IHJldHVybiB0LnRvTG93ZXJDYXNlKCk7IH0pO1xuICB0eXBlcy5zb3J0KCk7XG5cbiAgLy8gVHJhbnNmb3JtcyBbJ2xvcmVtJywgJ2lwc3VtJ10gaW50byAnYSBsaXJ1bSwgb3IgYW4gaXBzdW0nXG4gIHZhciBzdHIgPSB0eXBlcy5tYXAoZnVuY3Rpb24gKHQsIGluZGV4KSB7XG4gICAgdmFyIGFydCA9IH5bICdhJywgJ2UnLCAnaScsICdvJywgJ3UnIF0uaW5kZXhPZih0LmNoYXJBdCgwKSkgPyAnYW4nIDogJ2EnO1xuICAgIHZhciBvciA9IHR5cGVzLmxlbmd0aCA+IDEgJiYgaW5kZXggPT09IHR5cGVzLmxlbmd0aCAtIDEgPyAnb3IgJyA6ICcnO1xuICAgIHJldHVybiBvciArIGFydCArICcgJyArIHQ7XG4gIH0pLmpvaW4oJywgJyk7XG5cbiAgaWYgKCF0eXBlcy5zb21lKGZ1bmN0aW9uIChleHBlY3RlZCkgeyByZXR1cm4gdHlwZShvYmopID09PSBleHBlY3RlZDsgfSkpIHtcbiAgICB0aHJvdyBuZXcgQXNzZXJ0aW9uRXJyb3IoXG4gICAgICAnb2JqZWN0IHRlc3RlZCBtdXN0IGJlICcgKyBzdHIgKyAnLCBidXQgJyArIHR5cGUob2JqKSArICcgZ2l2ZW4nXG4gICAgKTtcbiAgfVxufTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NoYWkvbGliL2NoYWkvdXRpbHMvZXhwZWN0VHlwZXMuanNcbiAqKiBtb2R1bGUgaWQgPSAxOFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLyohXG4gKiBDaGFpIC0gbWVzc2FnZSBjb21wb3NpdGlvbiB1dGlsaXR5XG4gKiBDb3B5cmlnaHQoYykgMjAxMi0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxuLyohXG4gKiBNb2R1bGUgZGVwZW5kYW5jaWVzXG4gKi9cblxudmFyIGZsYWcgPSByZXF1aXJlKCcuL2ZsYWcnKVxuICAsIGdldEFjdHVhbCA9IHJlcXVpcmUoJy4vZ2V0QWN0dWFsJylcbiAgLCBpbnNwZWN0ID0gcmVxdWlyZSgnLi9pbnNwZWN0JylcbiAgLCBvYmpEaXNwbGF5ID0gcmVxdWlyZSgnLi9vYmpEaXNwbGF5Jyk7XG5cbi8qKlxuICogIyMjIC5nZXRNZXNzYWdlKG9iamVjdCwgbWVzc2FnZSwgbmVnYXRlTWVzc2FnZSlcbiAqXG4gKiBDb25zdHJ1Y3QgdGhlIGVycm9yIG1lc3NhZ2UgYmFzZWQgb24gZmxhZ3NcbiAqIGFuZCB0ZW1wbGF0ZSB0YWdzLiBUZW1wbGF0ZSB0YWdzIHdpbGwgcmV0dXJuXG4gKiBhIHN0cmluZ2lmaWVkIGluc3BlY3Rpb24gb2YgdGhlIG9iamVjdCByZWZlcmVuY2VkLlxuICpcbiAqIE1lc3NhZ2UgdGVtcGxhdGUgdGFnczpcbiAqIC0gYCN7dGhpc31gIGN1cnJlbnQgYXNzZXJ0ZWQgb2JqZWN0XG4gKiAtIGAje2FjdH1gIGFjdHVhbCB2YWx1ZVxuICogLSBgI3tleHB9YCBleHBlY3RlZCB2YWx1ZVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgKGNvbnN0cnVjdGVkIEFzc2VydGlvbilcbiAqIEBwYXJhbSB7QXJndW1lbnRzfSBjaGFpLkFzc2VydGlvbi5wcm90b3R5cGUuYXNzZXJ0IGFyZ3VtZW50c1xuICogQG5hbWUgZ2V0TWVzc2FnZVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvYmosIGFyZ3MpIHtcbiAgdmFyIG5lZ2F0ZSA9IGZsYWcob2JqLCAnbmVnYXRlJylcbiAgICAsIHZhbCA9IGZsYWcob2JqLCAnb2JqZWN0JylcbiAgICAsIGV4cGVjdGVkID0gYXJnc1szXVxuICAgICwgYWN0dWFsID0gZ2V0QWN0dWFsKG9iaiwgYXJncylcbiAgICAsIG1zZyA9IG5lZ2F0ZSA/IGFyZ3NbMl0gOiBhcmdzWzFdXG4gICAgLCBmbGFnTXNnID0gZmxhZyhvYmosICdtZXNzYWdlJyk7XG5cbiAgaWYodHlwZW9mIG1zZyA9PT0gXCJmdW5jdGlvblwiKSBtc2cgPSBtc2coKTtcbiAgbXNnID0gbXNnIHx8ICcnO1xuICBtc2cgPSBtc2dcbiAgICAucmVwbGFjZSgvI3t0aGlzfS9nLCBvYmpEaXNwbGF5KHZhbCkpXG4gICAgLnJlcGxhY2UoLyN7YWN0fS9nLCBvYmpEaXNwbGF5KGFjdHVhbCkpXG4gICAgLnJlcGxhY2UoLyN7ZXhwfS9nLCBvYmpEaXNwbGF5KGV4cGVjdGVkKSk7XG5cbiAgcmV0dXJuIGZsYWdNc2cgPyBmbGFnTXNnICsgJzogJyArIG1zZyA6IG1zZztcbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jaGFpL2xpYi9jaGFpL3V0aWxzL2dldE1lc3NhZ2UuanNcbiAqKiBtb2R1bGUgaWQgPSAxOVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLyohXG4gKiBDaGFpIC0gZ2V0QWN0dWFsIHV0aWxpdHlcbiAqIENvcHlyaWdodChjKSAyMDEyLTIwMTQgSmFrZSBMdWVyIDxqYWtlQGFsb2dpY2FscGFyYWRveC5jb20+XG4gKiBNSVQgTGljZW5zZWRcbiAqL1xuXG4vKipcbiAqICMgZ2V0QWN0dWFsKG9iamVjdCwgW2FjdHVhbF0pXG4gKlxuICogUmV0dXJucyB0aGUgYGFjdHVhbGAgdmFsdWUgZm9yIGFuIEFzc2VydGlvblxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgKGNvbnN0cnVjdGVkIEFzc2VydGlvbilcbiAqIEBwYXJhbSB7QXJndW1lbnRzfSBjaGFpLkFzc2VydGlvbi5wcm90b3R5cGUuYXNzZXJ0IGFyZ3VtZW50c1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9iaiwgYXJncykge1xuICByZXR1cm4gYXJncy5sZW5ndGggPiA0ID8gYXJnc1s0XSA6IG9iai5fb2JqO1xufTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NoYWkvbGliL2NoYWkvdXRpbHMvZ2V0QWN0dWFsLmpzXG4gKiogbW9kdWxlIGlkID0gMjBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIFRoaXMgaXMgKGFsbW9zdCkgZGlyZWN0bHkgZnJvbSBOb2RlLmpzIHV0aWxzXG4vLyBodHRwczovL2dpdGh1Yi5jb20vam95ZW50L25vZGUvYmxvYi9mOGMzMzVkMGNhZjQ3ZjE2ZDMxNDEzZjg5YWEyOGVkYTM4NzhlM2FhL2xpYi91dGlsLmpzXG5cbnZhciBnZXROYW1lID0gcmVxdWlyZSgnLi9nZXROYW1lJyk7XG52YXIgZ2V0UHJvcGVydGllcyA9IHJlcXVpcmUoJy4vZ2V0UHJvcGVydGllcycpO1xudmFyIGdldEVudW1lcmFibGVQcm9wZXJ0aWVzID0gcmVxdWlyZSgnLi9nZXRFbnVtZXJhYmxlUHJvcGVydGllcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGluc3BlY3Q7XG5cbi8qKlxuICogRWNob3MgdGhlIHZhbHVlIG9mIGEgdmFsdWUuIFRyeXMgdG8gcHJpbnQgdGhlIHZhbHVlIG91dFxuICogaW4gdGhlIGJlc3Qgd2F5IHBvc3NpYmxlIGdpdmVuIHRoZSBkaWZmZXJlbnQgdHlwZXMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIHByaW50IG91dC5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gc2hvd0hpZGRlbiBGbGFnIHRoYXQgc2hvd3MgaGlkZGVuIChub3QgZW51bWVyYWJsZSlcbiAqICAgIHByb3BlcnRpZXMgb2Ygb2JqZWN0cy5cbiAqIEBwYXJhbSB7TnVtYmVyfSBkZXB0aCBEZXB0aCBpbiB3aGljaCB0byBkZXNjZW5kIGluIG9iamVjdC4gRGVmYXVsdCBpcyAyLlxuICogQHBhcmFtIHtCb29sZWFufSBjb2xvcnMgRmxhZyB0byB0dXJuIG9uIEFOU0kgZXNjYXBlIGNvZGVzIHRvIGNvbG9yIHRoZVxuICogICAgb3V0cHV0LiBEZWZhdWx0IGlzIGZhbHNlIChubyBjb2xvcmluZykuXG4gKi9cbmZ1bmN0aW9uIGluc3BlY3Qob2JqLCBzaG93SGlkZGVuLCBkZXB0aCwgY29sb3JzKSB7XG4gIHZhciBjdHggPSB7XG4gICAgc2hvd0hpZGRlbjogc2hvd0hpZGRlbixcbiAgICBzZWVuOiBbXSxcbiAgICBzdHlsaXplOiBmdW5jdGlvbiAoc3RyKSB7IHJldHVybiBzdHI7IH1cbiAgfTtcbiAgcmV0dXJuIGZvcm1hdFZhbHVlKGN0eCwgb2JqLCAodHlwZW9mIGRlcHRoID09PSAndW5kZWZpbmVkJyA/IDIgOiBkZXB0aCkpO1xufVxuXG4vLyBSZXR1cm5zIHRydWUgaWYgb2JqZWN0IGlzIGEgRE9NIGVsZW1lbnQuXG52YXIgaXNET01FbGVtZW50ID0gZnVuY3Rpb24gKG9iamVjdCkge1xuICBpZiAodHlwZW9mIEhUTUxFbGVtZW50ID09PSAnb2JqZWN0Jykge1xuICAgIHJldHVybiBvYmplY3QgaW5zdGFuY2VvZiBIVE1MRWxlbWVudDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gb2JqZWN0ICYmXG4gICAgICB0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0JyAmJlxuICAgICAgb2JqZWN0Lm5vZGVUeXBlID09PSAxICYmXG4gICAgICB0eXBlb2Ygb2JqZWN0Lm5vZGVOYW1lID09PSAnc3RyaW5nJztcbiAgfVxufTtcblxuZnVuY3Rpb24gZm9ybWF0VmFsdWUoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzKSB7XG4gIC8vIFByb3ZpZGUgYSBob29rIGZvciB1c2VyLXNwZWNpZmllZCBpbnNwZWN0IGZ1bmN0aW9ucy5cbiAgLy8gQ2hlY2sgdGhhdCB2YWx1ZSBpcyBhbiBvYmplY3Qgd2l0aCBhbiBpbnNwZWN0IGZ1bmN0aW9uIG9uIGl0XG4gIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUuaW5zcGVjdCA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgLy8gRmlsdGVyIG91dCB0aGUgdXRpbCBtb2R1bGUsIGl0J3MgaW5zcGVjdCBmdW5jdGlvbiBpcyBzcGVjaWFsXG4gICAgICB2YWx1ZS5pbnNwZWN0ICE9PSBleHBvcnRzLmluc3BlY3QgJiZcbiAgICAgIC8vIEFsc28gZmlsdGVyIG91dCBhbnkgcHJvdG90eXBlIG9iamVjdHMgdXNpbmcgdGhlIGNpcmN1bGFyIGNoZWNrLlxuICAgICAgISh2YWx1ZS5jb25zdHJ1Y3RvciAmJiB2YWx1ZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgPT09IHZhbHVlKSkge1xuICAgIHZhciByZXQgPSB2YWx1ZS5pbnNwZWN0KHJlY3Vyc2VUaW1lcyk7XG4gICAgaWYgKHR5cGVvZiByZXQgIT09ICdzdHJpbmcnKSB7XG4gICAgICByZXQgPSBmb3JtYXRWYWx1ZShjdHgsIHJldCwgcmVjdXJzZVRpbWVzKTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbiAgfVxuXG4gIC8vIFByaW1pdGl2ZSB0eXBlcyBjYW5ub3QgaGF2ZSBwcm9wZXJ0aWVzXG4gIHZhciBwcmltaXRpdmUgPSBmb3JtYXRQcmltaXRpdmUoY3R4LCB2YWx1ZSk7XG4gIGlmIChwcmltaXRpdmUpIHtcbiAgICByZXR1cm4gcHJpbWl0aXZlO1xuICB9XG5cbiAgLy8gSWYgdGhpcyBpcyBhIERPTSBlbGVtZW50LCB0cnkgdG8gZ2V0IHRoZSBvdXRlciBIVE1MLlxuICBpZiAoaXNET01FbGVtZW50KHZhbHVlKSkge1xuICAgIGlmICgnb3V0ZXJIVE1MJyBpbiB2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlLm91dGVySFRNTDtcbiAgICAgIC8vIFRoaXMgdmFsdWUgZG9lcyBub3QgaGF2ZSBhbiBvdXRlckhUTUwgYXR0cmlidXRlLFxuICAgICAgLy8gICBpdCBjb3VsZCBzdGlsbCBiZSBhbiBYTUwgZWxlbWVudFxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBBdHRlbXB0IHRvIHNlcmlhbGl6ZSBpdFxuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKGRvY3VtZW50LnhtbFZlcnNpb24pIHtcbiAgICAgICAgICB2YXIgeG1sU2VyaWFsaXplciA9IG5ldyBYTUxTZXJpYWxpemVyKCk7XG4gICAgICAgICAgcmV0dXJuIHhtbFNlcmlhbGl6ZXIuc2VyaWFsaXplVG9TdHJpbmcodmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEZpcmVmb3ggMTEtIGRvIG5vdCBzdXBwb3J0IG91dGVySFRNTFxuICAgICAgICAgIC8vICAgSXQgZG9lcywgaG93ZXZlciwgc3VwcG9ydCBpbm5lckhUTUxcbiAgICAgICAgICAvLyAgIFVzZSB0aGUgZm9sbG93aW5nIHRvIHJlbmRlciB0aGUgZWxlbWVudFxuICAgICAgICAgIHZhciBucyA9IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiO1xuICAgICAgICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobnMsICdfJyk7XG5cbiAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodmFsdWUuY2xvbmVOb2RlKGZhbHNlKSk7XG4gICAgICAgICAgaHRtbCA9IGNvbnRhaW5lci5pbm5lckhUTUxcbiAgICAgICAgICAgIC5yZXBsYWNlKCc+PCcsICc+JyArIHZhbHVlLmlubmVySFRNTCArICc8Jyk7XG4gICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgIHJldHVybiBodG1sO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy8gVGhpcyBjb3VsZCBiZSBhIG5vbi1uYXRpdmUgRE9NIGltcGxlbWVudGF0aW9uLFxuICAgICAgICAvLyAgIGNvbnRpbnVlIHdpdGggdGhlIG5vcm1hbCBmbG93OlxuICAgICAgICAvLyAgIHByaW50aW5nIHRoZSBlbGVtZW50IGFzIGlmIGl0IGlzIGFuIG9iamVjdC5cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBMb29rIHVwIHRoZSBrZXlzIG9mIHRoZSBvYmplY3QuXG4gIHZhciB2aXNpYmxlS2V5cyA9IGdldEVudW1lcmFibGVQcm9wZXJ0aWVzKHZhbHVlKTtcbiAgdmFyIGtleXMgPSBjdHguc2hvd0hpZGRlbiA/IGdldFByb3BlcnRpZXModmFsdWUpIDogdmlzaWJsZUtleXM7XG5cbiAgLy8gU29tZSB0eXBlIG9mIG9iamVjdCB3aXRob3V0IHByb3BlcnRpZXMgY2FuIGJlIHNob3J0Y3V0dGVkLlxuICAvLyBJbiBJRSwgZXJyb3JzIGhhdmUgYSBzaW5nbGUgYHN0YWNrYCBwcm9wZXJ0eSwgb3IgaWYgdGhleSBhcmUgdmFuaWxsYSBgRXJyb3JgLFxuICAvLyBhIGBzdGFja2AgcGx1cyBgZGVzY3JpcHRpb25gIHByb3BlcnR5OyBpZ25vcmUgdGhvc2UgZm9yIGNvbnNpc3RlbmN5LlxuICBpZiAoa2V5cy5sZW5ndGggPT09IDAgfHwgKGlzRXJyb3IodmFsdWUpICYmIChcbiAgICAgIChrZXlzLmxlbmd0aCA9PT0gMSAmJiBrZXlzWzBdID09PSAnc3RhY2snKSB8fFxuICAgICAgKGtleXMubGVuZ3RoID09PSAyICYmIGtleXNbMF0gPT09ICdkZXNjcmlwdGlvbicgJiYga2V5c1sxXSA9PT0gJ3N0YWNrJylcbiAgICAgKSkpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB2YXIgbmFtZSA9IGdldE5hbWUodmFsdWUpO1xuICAgICAgdmFyIG5hbWVTdWZmaXggPSBuYW1lID8gJzogJyArIG5hbWUgOiAnJztcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZSgnW0Z1bmN0aW9uJyArIG5hbWVTdWZmaXggKyAnXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICAgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZShSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCAncmVnZXhwJyk7XG4gICAgfVxuICAgIGlmIChpc0RhdGUodmFsdWUpKSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoRGF0ZS5wcm90b3R5cGUudG9VVENTdHJpbmcuY2FsbCh2YWx1ZSksICdkYXRlJyk7XG4gICAgfVxuICAgIGlmIChpc0Vycm9yKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGZvcm1hdEVycm9yKHZhbHVlKTtcbiAgICB9XG4gIH1cblxuICB2YXIgYmFzZSA9ICcnLCBhcnJheSA9IGZhbHNlLCBicmFjZXMgPSBbJ3snLCAnfSddO1xuXG4gIC8vIE1ha2UgQXJyYXkgc2F5IHRoYXQgdGhleSBhcmUgQXJyYXlcbiAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgYXJyYXkgPSB0cnVlO1xuICAgIGJyYWNlcyA9IFsnWycsICddJ107XG4gIH1cblxuICAvLyBNYWtlIGZ1bmN0aW9ucyBzYXkgdGhhdCB0aGV5IGFyZSBmdW5jdGlvbnNcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHZhciBuYW1lID0gZ2V0TmFtZSh2YWx1ZSk7XG4gICAgdmFyIG5hbWVTdWZmaXggPSBuYW1lID8gJzogJyArIG5hbWUgOiAnJztcbiAgICBiYXNlID0gJyBbRnVuY3Rpb24nICsgbmFtZVN1ZmZpeCArICddJztcbiAgfVxuXG4gIC8vIE1ha2UgUmVnRXhwcyBzYXkgdGhhdCB0aGV5IGFyZSBSZWdFeHBzXG4gIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcbiAgICBiYXNlID0gJyAnICsgUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgfVxuXG4gIC8vIE1ha2UgZGF0ZXMgd2l0aCBwcm9wZXJ0aWVzIGZpcnN0IHNheSB0aGUgZGF0ZVxuICBpZiAoaXNEYXRlKHZhbHVlKSkge1xuICAgIGJhc2UgPSAnICcgKyBEYXRlLnByb3RvdHlwZS50b1VUQ1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgfVxuXG4gIC8vIE1ha2UgZXJyb3Igd2l0aCBtZXNzYWdlIGZpcnN0IHNheSB0aGUgZXJyb3JcbiAgaWYgKGlzRXJyb3IodmFsdWUpKSB7XG4gICAgcmV0dXJuIGZvcm1hdEVycm9yKHZhbHVlKTtcbiAgfVxuXG4gIGlmIChrZXlzLmxlbmd0aCA9PT0gMCAmJiAoIWFycmF5IHx8IHZhbHVlLmxlbmd0aCA9PSAwKSkge1xuICAgIHJldHVybiBicmFjZXNbMF0gKyBiYXNlICsgYnJhY2VzWzFdO1xuICB9XG5cbiAgaWYgKHJlY3Vyc2VUaW1lcyA8IDApIHtcbiAgICBpZiAoaXNSZWdFeHAodmFsdWUpKSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwgJ3JlZ2V4cCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoJ1tPYmplY3RdJywgJ3NwZWNpYWwnKTtcbiAgICB9XG4gIH1cblxuICBjdHguc2Vlbi5wdXNoKHZhbHVlKTtcblxuICB2YXIgb3V0cHV0O1xuICBpZiAoYXJyYXkpIHtcbiAgICBvdXRwdXQgPSBmb3JtYXRBcnJheShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXlzKTtcbiAgfSBlbHNlIHtcbiAgICBvdXRwdXQgPSBrZXlzLm1hcChmdW5jdGlvbihrZXkpIHtcbiAgICAgIHJldHVybiBmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXksIGFycmF5KTtcbiAgICB9KTtcbiAgfVxuXG4gIGN0eC5zZWVuLnBvcCgpO1xuXG4gIHJldHVybiByZWR1Y2VUb1NpbmdsZVN0cmluZyhvdXRwdXQsIGJhc2UsIGJyYWNlcyk7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0UHJpbWl0aXZlKGN0eCwgdmFsdWUpIHtcbiAgc3dpdGNoICh0eXBlb2YgdmFsdWUpIHtcbiAgICBjYXNlICd1bmRlZmluZWQnOlxuICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKCd1bmRlZmluZWQnLCAndW5kZWZpbmVkJyk7XG5cbiAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgdmFyIHNpbXBsZSA9ICdcXCcnICsgSlNPTi5zdHJpbmdpZnkodmFsdWUpLnJlcGxhY2UoL15cInxcIiQvZywgJycpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8nL2csIFwiXFxcXCdcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcXFxcIi9nLCAnXCInKSArICdcXCcnO1xuICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKHNpbXBsZSwgJ3N0cmluZycpO1xuXG4gICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgIGlmICh2YWx1ZSA9PT0gMCAmJiAoMS92YWx1ZSkgPT09IC1JbmZpbml0eSkge1xuICAgICAgICByZXR1cm4gY3R4LnN0eWxpemUoJy0wJywgJ251bWJlcicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKCcnICsgdmFsdWUsICdudW1iZXInKTtcblxuICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKCcnICsgdmFsdWUsICdib29sZWFuJyk7XG4gIH1cbiAgLy8gRm9yIHNvbWUgcmVhc29uIHR5cGVvZiBudWxsIGlzIFwib2JqZWN0XCIsIHNvIHNwZWNpYWwgY2FzZSBoZXJlLlxuICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gY3R4LnN0eWxpemUoJ251bGwnLCAnbnVsbCcpO1xuICB9XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0RXJyb3IodmFsdWUpIHtcbiAgcmV0dXJuICdbJyArIEVycm9yLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSArICddJztcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRBcnJheShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXlzKSB7XG4gIHZhciBvdXRwdXQgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyArK2kpIHtcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCBTdHJpbmcoaSkpKSB7XG4gICAgICBvdXRwdXQucHVzaChmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLFxuICAgICAgICAgIFN0cmluZyhpKSwgdHJ1ZSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvdXRwdXQucHVzaCgnJyk7XG4gICAgfVxuICB9XG4gIGtleXMuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICBpZiAoIWtleS5tYXRjaCgvXlxcZCskLykpIHtcbiAgICAgIG91dHB1dC5wdXNoKGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsXG4gICAgICAgICAga2V5LCB0cnVlKSk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIG91dHB1dDtcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXksIGFycmF5KSB7XG4gIHZhciBuYW1lLCBzdHI7XG4gIGlmICh2YWx1ZS5fX2xvb2t1cEdldHRlcl9fKSB7XG4gICAgaWYgKHZhbHVlLl9fbG9va3VwR2V0dGVyX18oa2V5KSkge1xuICAgICAgaWYgKHZhbHVlLl9fbG9va3VwU2V0dGVyX18oa2V5KSkge1xuICAgICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0dldHRlci9TZXR0ZXJdJywgJ3NwZWNpYWwnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbR2V0dGVyXScsICdzcGVjaWFsJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh2YWx1ZS5fX2xvb2t1cFNldHRlcl9fKGtleSkpIHtcbiAgICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tTZXR0ZXJdJywgJ3NwZWNpYWwnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKHZpc2libGVLZXlzLmluZGV4T2Yoa2V5KSA8IDApIHtcbiAgICBuYW1lID0gJ1snICsga2V5ICsgJ10nO1xuICB9XG4gIGlmICghc3RyKSB7XG4gICAgaWYgKGN0eC5zZWVuLmluZGV4T2YodmFsdWVba2V5XSkgPCAwKSB7XG4gICAgICBpZiAocmVjdXJzZVRpbWVzID09PSBudWxsKSB7XG4gICAgICAgIHN0ciA9IGZvcm1hdFZhbHVlKGN0eCwgdmFsdWVba2V5XSwgbnVsbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdHIgPSBmb3JtYXRWYWx1ZShjdHgsIHZhbHVlW2tleV0sIHJlY3Vyc2VUaW1lcyAtIDEpO1xuICAgICAgfVxuICAgICAgaWYgKHN0ci5pbmRleE9mKCdcXG4nKSA+IC0xKSB7XG4gICAgICAgIGlmIChhcnJheSkge1xuICAgICAgICAgIHN0ciA9IHN0ci5zcGxpdCgnXFxuJykubWFwKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgICAgIHJldHVybiAnICAnICsgbGluZTtcbiAgICAgICAgICB9KS5qb2luKCdcXG4nKS5zdWJzdHIoMik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RyID0gJ1xcbicgKyBzdHIuc3BsaXQoJ1xcbicpLm1hcChmdW5jdGlvbihsaW5lKSB7XG4gICAgICAgICAgICByZXR1cm4gJyAgICcgKyBsaW5lO1xuICAgICAgICAgIH0pLmpvaW4oJ1xcbicpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbQ2lyY3VsYXJdJywgJ3NwZWNpYWwnKTtcbiAgICB9XG4gIH1cbiAgaWYgKHR5cGVvZiBuYW1lID09PSAndW5kZWZpbmVkJykge1xuICAgIGlmIChhcnJheSAmJiBrZXkubWF0Y2goL15cXGQrJC8pKSB7XG4gICAgICByZXR1cm4gc3RyO1xuICAgIH1cbiAgICBuYW1lID0gSlNPTi5zdHJpbmdpZnkoJycgKyBrZXkpO1xuICAgIGlmIChuYW1lLm1hdGNoKC9eXCIoW2EtekEtWl9dW2EtekEtWl8wLTldKilcIiQvKSkge1xuICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyKDEsIG5hbWUubGVuZ3RoIC0gMik7XG4gICAgICBuYW1lID0gY3R4LnN0eWxpemUobmFtZSwgJ25hbWUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvJy9nLCBcIlxcXFwnXCIpXG4gICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXFxcXCIvZywgJ1wiJylcbiAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLyheXCJ8XCIkKS9nLCBcIidcIik7XG4gICAgICBuYW1lID0gY3R4LnN0eWxpemUobmFtZSwgJ3N0cmluZycpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuYW1lICsgJzogJyArIHN0cjtcbn1cblxuXG5mdW5jdGlvbiByZWR1Y2VUb1NpbmdsZVN0cmluZyhvdXRwdXQsIGJhc2UsIGJyYWNlcykge1xuICB2YXIgbnVtTGluZXNFc3QgPSAwO1xuICB2YXIgbGVuZ3RoID0gb3V0cHV0LnJlZHVjZShmdW5jdGlvbihwcmV2LCBjdXIpIHtcbiAgICBudW1MaW5lc0VzdCsrO1xuICAgIGlmIChjdXIuaW5kZXhPZignXFxuJykgPj0gMCkgbnVtTGluZXNFc3QrKztcbiAgICByZXR1cm4gcHJldiArIGN1ci5sZW5ndGggKyAxO1xuICB9LCAwKTtcblxuICBpZiAobGVuZ3RoID4gNjApIHtcbiAgICByZXR1cm4gYnJhY2VzWzBdICtcbiAgICAgICAgICAgKGJhc2UgPT09ICcnID8gJycgOiBiYXNlICsgJ1xcbiAnKSArXG4gICAgICAgICAgICcgJyArXG4gICAgICAgICAgIG91dHB1dC5qb2luKCcsXFxuICAnKSArXG4gICAgICAgICAgICcgJyArXG4gICAgICAgICAgIGJyYWNlc1sxXTtcbiAgfVxuXG4gIHJldHVybiBicmFjZXNbMF0gKyBiYXNlICsgJyAnICsgb3V0cHV0LmpvaW4oJywgJykgKyAnICcgKyBicmFjZXNbMV07XG59XG5cbmZ1bmN0aW9uIGlzQXJyYXkoYXIpIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYXIpIHx8XG4gICAgICAgICAodHlwZW9mIGFyID09PSAnb2JqZWN0JyAmJiBvYmplY3RUb1N0cmluZyhhcikgPT09ICdbb2JqZWN0IEFycmF5XScpO1xufVxuXG5mdW5jdGlvbiBpc1JlZ0V4cChyZSkge1xuICByZXR1cm4gdHlwZW9mIHJlID09PSAnb2JqZWN0JyAmJiBvYmplY3RUb1N0cmluZyhyZSkgPT09ICdbb2JqZWN0IFJlZ0V4cF0nO1xufVxuXG5mdW5jdGlvbiBpc0RhdGUoZCkge1xuICByZXR1cm4gdHlwZW9mIGQgPT09ICdvYmplY3QnICYmIG9iamVjdFRvU3RyaW5nKGQpID09PSAnW29iamVjdCBEYXRlXSc7XG59XG5cbmZ1bmN0aW9uIGlzRXJyb3IoZSkge1xuICByZXR1cm4gdHlwZW9mIGUgPT09ICdvYmplY3QnICYmIG9iamVjdFRvU3RyaW5nKGUpID09PSAnW29iamVjdCBFcnJvcl0nO1xufVxuXG5mdW5jdGlvbiBvYmplY3RUb1N0cmluZyhvKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobyk7XG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jaGFpL2xpYi9jaGFpL3V0aWxzL2luc3BlY3QuanNcbiAqKiBtb2R1bGUgaWQgPSAyMVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLyohXG4gKiBDaGFpIC0gZ2V0TmFtZSB1dGlsaXR5XG4gKiBDb3B5cmlnaHQoYykgMjAxMi0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxuLyoqXG4gKiAjIGdldE5hbWUoZnVuYylcbiAqXG4gKiBHZXRzIHRoZSBuYW1lIG9mIGEgZnVuY3Rpb24sIGluIGEgY3Jvc3MtYnJvd3NlciB3YXkuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gYSBmdW5jdGlvbiAodXN1YWxseSBhIGNvbnN0cnVjdG9yKVxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGZ1bmMpIHtcbiAgaWYgKGZ1bmMubmFtZSkgcmV0dXJuIGZ1bmMubmFtZTtcblxuICB2YXIgbWF0Y2ggPSAvXlxccz9mdW5jdGlvbiAoW14oXSopXFwoLy5leGVjKGZ1bmMpO1xuICByZXR1cm4gbWF0Y2ggJiYgbWF0Y2hbMV0gPyBtYXRjaFsxXSA6IFwiXCI7XG59O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY2hhaS9saWIvY2hhaS91dGlscy9nZXROYW1lLmpzXG4gKiogbW9kdWxlIGlkID0gMjJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8qIVxuICogQ2hhaSAtIGdldFByb3BlcnRpZXMgdXRpbGl0eVxuICogQ29weXJpZ2h0KGMpIDIwMTItMjAxNCBKYWtlIEx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cbiAqIE1JVCBMaWNlbnNlZFxuICovXG5cbi8qKlxuICogIyMjIC5nZXRQcm9wZXJ0aWVzKG9iamVjdClcbiAqXG4gKiBUaGlzIGFsbG93cyB0aGUgcmV0cmlldmFsIG9mIHByb3BlcnR5IG5hbWVzIG9mIGFuIG9iamVjdCwgZW51bWVyYWJsZSBvciBub3QsXG4gKiBpbmhlcml0ZWQgb3Igbm90LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3RcbiAqIEByZXR1cm5zIHtBcnJheX1cbiAqIEBuYW1lIGdldFByb3BlcnRpZXNcbiAqIEBhcGkgcHVibGljXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBnZXRQcm9wZXJ0aWVzKG9iamVjdCkge1xuICB2YXIgcmVzdWx0ID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMob2JqZWN0KTtcblxuICBmdW5jdGlvbiBhZGRQcm9wZXJ0eShwcm9wZXJ0eSkge1xuICAgIGlmIChyZXN1bHQuaW5kZXhPZihwcm9wZXJ0eSkgPT09IC0xKSB7XG4gICAgICByZXN1bHQucHVzaChwcm9wZXJ0eSk7XG4gICAgfVxuICB9XG5cbiAgdmFyIHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7XG4gIHdoaWxlIChwcm90byAhPT0gbnVsbCkge1xuICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHByb3RvKS5mb3JFYWNoKGFkZFByb3BlcnR5KTtcbiAgICBwcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihwcm90byk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NoYWkvbGliL2NoYWkvdXRpbHMvZ2V0UHJvcGVydGllcy5qc1xuICoqIG1vZHVsZSBpZCA9IDIzXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvKiFcbiAqIENoYWkgLSBnZXRFbnVtZXJhYmxlUHJvcGVydGllcyB1dGlsaXR5XG4gKiBDb3B5cmlnaHQoYykgMjAxMi0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxuLyoqXG4gKiAjIyMgLmdldEVudW1lcmFibGVQcm9wZXJ0aWVzKG9iamVjdClcbiAqXG4gKiBUaGlzIGFsbG93cyB0aGUgcmV0cmlldmFsIG9mIGVudW1lcmFibGUgcHJvcGVydHkgbmFtZXMgb2YgYW4gb2JqZWN0LFxuICogaW5oZXJpdGVkIG9yIG5vdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG4gKiBAcmV0dXJucyB7QXJyYXl9XG4gKiBAbmFtZSBnZXRFbnVtZXJhYmxlUHJvcGVydGllc1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGdldEVudW1lcmFibGVQcm9wZXJ0aWVzKG9iamVjdCkge1xuICB2YXIgcmVzdWx0ID0gW107XG4gIGZvciAodmFyIG5hbWUgaW4gb2JqZWN0KSB7XG4gICAgcmVzdWx0LnB1c2gobmFtZSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jaGFpL2xpYi9jaGFpL3V0aWxzL2dldEVudW1lcmFibGVQcm9wZXJ0aWVzLmpzXG4gKiogbW9kdWxlIGlkID0gMjRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8qIVxuICogQ2hhaSAtIGZsYWcgdXRpbGl0eVxuICogQ29weXJpZ2h0KGMpIDIwMTItMjAxNCBKYWtlIEx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cbiAqIE1JVCBMaWNlbnNlZFxuICovXG5cbi8qIVxuICogTW9kdWxlIGRlcGVuZGFuY2llc1xuICovXG5cbnZhciBpbnNwZWN0ID0gcmVxdWlyZSgnLi9pbnNwZWN0Jyk7XG52YXIgY29uZmlnID0gcmVxdWlyZSgnLi4vY29uZmlnJyk7XG5cbi8qKlxuICogIyMjIC5vYmpEaXNwbGF5IChvYmplY3QpXG4gKlxuICogRGV0ZXJtaW5lcyBpZiBhbiBvYmplY3Qgb3IgYW4gYXJyYXkgbWF0Y2hlc1xuICogY3JpdGVyaWEgdG8gYmUgaW5zcGVjdGVkIGluLWxpbmUgZm9yIGVycm9yXG4gKiBtZXNzYWdlcyBvciBzaG91bGQgYmUgdHJ1bmNhdGVkLlxuICpcbiAqIEBwYXJhbSB7TWl4ZWR9IGphdmFzY3JpcHQgb2JqZWN0IHRvIGluc3BlY3RcbiAqIEBuYW1lIG9iakRpc3BsYXlcbiAqIEBhcGkgcHVibGljXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2JqKSB7XG4gIHZhciBzdHIgPSBpbnNwZWN0KG9iailcbiAgICAsIHR5cGUgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKTtcblxuICBpZiAoY29uZmlnLnRydW5jYXRlVGhyZXNob2xkICYmIHN0ci5sZW5ndGggPj0gY29uZmlnLnRydW5jYXRlVGhyZXNob2xkKSB7XG4gICAgaWYgKHR5cGUgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXScpIHtcbiAgICAgIHJldHVybiAhb2JqLm5hbWUgfHwgb2JqLm5hbWUgPT09ICcnXG4gICAgICAgID8gJ1tGdW5jdGlvbl0nXG4gICAgICAgIDogJ1tGdW5jdGlvbjogJyArIG9iai5uYW1lICsgJ10nO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ1tvYmplY3QgQXJyYXldJykge1xuICAgICAgcmV0dXJuICdbIEFycmF5KCcgKyBvYmoubGVuZ3RoICsgJykgXSc7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAnW29iamVjdCBPYmplY3RdJykge1xuICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmopXG4gICAgICAgICwga3N0ciA9IGtleXMubGVuZ3RoID4gMlxuICAgICAgICAgID8ga2V5cy5zcGxpY2UoMCwgMikuam9pbignLCAnKSArICcsIC4uLidcbiAgICAgICAgICA6IGtleXMuam9pbignLCAnKTtcbiAgICAgIHJldHVybiAneyBPYmplY3QgKCcgKyBrc3RyICsgJykgfSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBzdHI7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBzdHI7XG4gIH1cbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jaGFpL2xpYi9jaGFpL3V0aWxzL29iakRpc3BsYXkuanNcbiAqKiBtb2R1bGUgaWQgPSAyNVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSB7XG5cbiAgLyoqXG4gICAqICMjIyBjb25maWcuaW5jbHVkZVN0YWNrXG4gICAqXG4gICAqIFVzZXIgY29uZmlndXJhYmxlIHByb3BlcnR5LCBpbmZsdWVuY2VzIHdoZXRoZXIgc3RhY2sgdHJhY2VcbiAgICogaXMgaW5jbHVkZWQgaW4gQXNzZXJ0aW9uIGVycm9yIG1lc3NhZ2UuIERlZmF1bHQgb2YgZmFsc2VcbiAgICogc3VwcHJlc3NlcyBzdGFjayB0cmFjZSBpbiB0aGUgZXJyb3IgbWVzc2FnZS5cbiAgICpcbiAgICogICAgIGNoYWkuY29uZmlnLmluY2x1ZGVTdGFjayA9IHRydWU7ICAvLyBlbmFibGUgc3RhY2sgb24gZXJyb3JcbiAgICpcbiAgICogQHBhcmFtIHtCb29sZWFufVxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICAgaW5jbHVkZVN0YWNrOiBmYWxzZSxcblxuICAvKipcbiAgICogIyMjIGNvbmZpZy5zaG93RGlmZlxuICAgKlxuICAgKiBVc2VyIGNvbmZpZ3VyYWJsZSBwcm9wZXJ0eSwgaW5mbHVlbmNlcyB3aGV0aGVyIG9yIG5vdFxuICAgKiB0aGUgYHNob3dEaWZmYCBmbGFnIHNob3VsZCBiZSBpbmNsdWRlZCBpbiB0aGUgdGhyb3duXG4gICAqIEFzc2VydGlvbkVycm9ycy4gYGZhbHNlYCB3aWxsIGFsd2F5cyBiZSBgZmFsc2VgOyBgdHJ1ZWBcbiAgICogd2lsbCBiZSB0cnVlIHdoZW4gdGhlIGFzc2VydGlvbiBoYXMgcmVxdWVzdGVkIGEgZGlmZlxuICAgKiBiZSBzaG93bi5cbiAgICpcbiAgICogQHBhcmFtIHtCb29sZWFufVxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBzaG93RGlmZjogdHJ1ZSxcblxuICAvKipcbiAgICogIyMjIGNvbmZpZy50cnVuY2F0ZVRocmVzaG9sZFxuICAgKlxuICAgKiBVc2VyIGNvbmZpZ3VyYWJsZSBwcm9wZXJ0eSwgc2V0cyBsZW5ndGggdGhyZXNob2xkIGZvciBhY3R1YWwgYW5kXG4gICAqIGV4cGVjdGVkIHZhbHVlcyBpbiBhc3NlcnRpb24gZXJyb3JzLiBJZiB0aGlzIHRocmVzaG9sZCBpcyBleGNlZWRlZCwgZm9yXG4gICAqIGV4YW1wbGUgZm9yIGxhcmdlIGRhdGEgc3RydWN0dXJlcywgdGhlIHZhbHVlIGlzIHJlcGxhY2VkIHdpdGggc29tZXRoaW5nXG4gICAqIGxpa2UgYFsgQXJyYXkoMykgXWAgb3IgYHsgT2JqZWN0IChwcm9wMSwgcHJvcDIpIH1gLlxuICAgKlxuICAgKiBTZXQgaXQgdG8gemVybyBpZiB5b3Ugd2FudCB0byBkaXNhYmxlIHRydW5jYXRpbmcgYWx0b2dldGhlci5cbiAgICpcbiAgICogVGhpcyBpcyBlc3BlY2lhbGx5IHVzZXJmdWwgd2hlbiBkb2luZyBhc3NlcnRpb25zIG9uIGFycmF5czogaGF2aW5nIHRoaXNcbiAgICogc2V0IHRvIGEgcmVhc29uYWJsZSBsYXJnZSB2YWx1ZSBtYWtlcyB0aGUgZmFpbHVyZSBtZXNzYWdlcyByZWFkaWx5XG4gICAqIGluc3BlY3RhYmxlLlxuICAgKlxuICAgKiAgICAgY2hhaS5jb25maWcudHJ1bmNhdGVUaHJlc2hvbGQgPSAwOyAgLy8gZGlzYWJsZSB0cnVuY2F0aW5nXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfVxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICB0cnVuY2F0ZVRocmVzaG9sZDogNDBcblxufTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NoYWkvbGliL2NoYWkvY29uZmlnLmpzXG4gKiogbW9kdWxlIGlkID0gMjZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8qIVxuICogQ2hhaSAtIHRyYW5zZmVyRmxhZ3MgdXRpbGl0eVxuICogQ29weXJpZ2h0KGMpIDIwMTItMjAxNCBKYWtlIEx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cbiAqIE1JVCBMaWNlbnNlZFxuICovXG5cbi8qKlxuICogIyMjIHRyYW5zZmVyRmxhZ3MoYXNzZXJ0aW9uLCBvYmplY3QsIGluY2x1ZGVBbGwgPSB0cnVlKVxuICpcbiAqIFRyYW5zZmVyIGFsbCB0aGUgZmxhZ3MgZm9yIGBhc3NlcnRpb25gIHRvIGBvYmplY3RgLiBJZlxuICogYGluY2x1ZGVBbGxgIGlzIHNldCB0byBgZmFsc2VgLCB0aGVuIHRoZSBiYXNlIENoYWlcbiAqIGFzc2VydGlvbiBmbGFncyAobmFtZWx5IGBvYmplY3RgLCBgc3NmaWAsIGFuZCBgbWVzc2FnZWApXG4gKiB3aWxsIG5vdCBiZSB0cmFuc2ZlcnJlZC5cbiAqXG4gKlxuICogICAgIHZhciBuZXdBc3NlcnRpb24gPSBuZXcgQXNzZXJ0aW9uKCk7XG4gKiAgICAgdXRpbHMudHJhbnNmZXJGbGFncyhhc3NlcnRpb24sIG5ld0Fzc2VydGlvbik7XG4gKlxuICogICAgIHZhciBhbm90aGVyQXNzZXJpdG9uID0gbmV3IEFzc2VydGlvbihteU9iaik7XG4gKiAgICAgdXRpbHMudHJhbnNmZXJGbGFncyhhc3NlcnRpb24sIGFub3RoZXJBc3NlcnRpb24sIGZhbHNlKTtcbiAqXG4gKiBAcGFyYW0ge0Fzc2VydGlvbn0gYXNzZXJ0aW9uIHRoZSBhc3NlcnRpb24gdG8gdHJhbnNmZXIgdGhlIGZsYWdzIGZyb21cbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgdGhlIG9iamVjdCB0byB0cmFuc2ZlciB0aGUgZmxhZ3MgdG87IHVzdWFsbHkgYSBuZXcgYXNzZXJ0aW9uXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGluY2x1ZGVBbGxcbiAqIEBuYW1lIHRyYW5zZmVyRmxhZ3NcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFzc2VydGlvbiwgb2JqZWN0LCBpbmNsdWRlQWxsKSB7XG4gIHZhciBmbGFncyA9IGFzc2VydGlvbi5fX2ZsYWdzIHx8IChhc3NlcnRpb24uX19mbGFncyA9IE9iamVjdC5jcmVhdGUobnVsbCkpO1xuXG4gIGlmICghb2JqZWN0Ll9fZmxhZ3MpIHtcbiAgICBvYmplY3QuX19mbGFncyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIH1cblxuICBpbmNsdWRlQWxsID0gYXJndW1lbnRzLmxlbmd0aCA9PT0gMyA/IGluY2x1ZGVBbGwgOiB0cnVlO1xuXG4gIGZvciAodmFyIGZsYWcgaW4gZmxhZ3MpIHtcbiAgICBpZiAoaW5jbHVkZUFsbCB8fFxuICAgICAgICAoZmxhZyAhPT0gJ29iamVjdCcgJiYgZmxhZyAhPT0gJ3NzZmknICYmIGZsYWcgIT0gJ21lc3NhZ2UnKSkge1xuICAgICAgb2JqZWN0Ll9fZmxhZ3NbZmxhZ10gPSBmbGFnc1tmbGFnXTtcbiAgICB9XG4gIH1cbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jaGFpL2xpYi9jaGFpL3V0aWxzL3RyYW5zZmVyRmxhZ3MuanNcbiAqKiBtb2R1bGUgaWQgPSAyN1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2xpYi9lcWwnKTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2RlZXAtZXFsL2luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gMjhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8qIVxuICogZGVlcC1lcWxcbiAqIENvcHlyaWdodChjKSAyMDEzIEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxuLyohXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzXG4gKi9cblxudmFyIHR5cGUgPSByZXF1aXJlKCd0eXBlLWRldGVjdCcpO1xuXG4vKiFcbiAqIEJ1ZmZlci5pc0J1ZmZlciBicm93c2VyIHNoaW1cbiAqL1xuXG52YXIgQnVmZmVyO1xudHJ5IHsgQnVmZmVyID0gcmVxdWlyZSgnYnVmZmVyJykuQnVmZmVyOyB9XG5jYXRjaChleCkge1xuICBCdWZmZXIgPSB7fTtcbiAgQnVmZmVyLmlzQnVmZmVyID0gZnVuY3Rpb24oKSB7IHJldHVybiBmYWxzZTsgfVxufVxuXG4vKiFcbiAqIFByaW1hcnkgRXhwb3J0XG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBkZWVwRXF1YWw7XG5cbi8qKlxuICogQXNzZXJ0IHN1cGVyLXN0cmljdCAoZWdhbCkgZXF1YWxpdHkgYmV0d2VlblxuICogdHdvIG9iamVjdHMgb2YgYW55IHR5cGUuXG4gKlxuICogQHBhcmFtIHtNaXhlZH0gYVxuICogQHBhcmFtIHtNaXhlZH0gYlxuICogQHBhcmFtIHtBcnJheX0gbWVtb2lzZWQgKG9wdGlvbmFsKVxuICogQHJldHVybiB7Qm9vbGVhbn0gZXF1YWwgbWF0Y2hcbiAqL1xuXG5mdW5jdGlvbiBkZWVwRXF1YWwoYSwgYiwgbSkge1xuICBpZiAoc2FtZVZhbHVlKGEsIGIpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSBpZiAoJ2RhdGUnID09PSB0eXBlKGEpKSB7XG4gICAgcmV0dXJuIGRhdGVFcXVhbChhLCBiKTtcbiAgfSBlbHNlIGlmICgncmVnZXhwJyA9PT0gdHlwZShhKSkge1xuICAgIHJldHVybiByZWdleHBFcXVhbChhLCBiKTtcbiAgfSBlbHNlIGlmIChCdWZmZXIuaXNCdWZmZXIoYSkpIHtcbiAgICByZXR1cm4gYnVmZmVyRXF1YWwoYSwgYik7XG4gIH0gZWxzZSBpZiAoJ2FyZ3VtZW50cycgPT09IHR5cGUoYSkpIHtcbiAgICByZXR1cm4gYXJndW1lbnRzRXF1YWwoYSwgYiwgbSk7XG4gIH0gZWxzZSBpZiAoIXR5cGVFcXVhbChhLCBiKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSBlbHNlIGlmICgoJ29iamVjdCcgIT09IHR5cGUoYSkgJiYgJ29iamVjdCcgIT09IHR5cGUoYikpXG4gICYmICgnYXJyYXknICE9PSB0eXBlKGEpICYmICdhcnJheScgIT09IHR5cGUoYikpKSB7XG4gICAgcmV0dXJuIHNhbWVWYWx1ZShhLCBiKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gb2JqZWN0RXF1YWwoYSwgYiwgbSk7XG4gIH1cbn1cblxuLyohXG4gKiBTdHJpY3QgKGVnYWwpIGVxdWFsaXR5IHRlc3QuIEVuc3VyZXMgdGhhdCBOYU4gYWx3YXlzXG4gKiBlcXVhbHMgTmFOIGFuZCBgLTBgIGRvZXMgbm90IGVxdWFsIGArMGAuXG4gKlxuICogQHBhcmFtIHtNaXhlZH0gYVxuICogQHBhcmFtIHtNaXhlZH0gYlxuICogQHJldHVybiB7Qm9vbGVhbn0gZXF1YWwgbWF0Y2hcbiAqL1xuXG5mdW5jdGlvbiBzYW1lVmFsdWUoYSwgYikge1xuICBpZiAoYSA9PT0gYikgcmV0dXJuIGEgIT09IDAgfHwgMSAvIGEgPT09IDEgLyBiO1xuICByZXR1cm4gYSAhPT0gYSAmJiBiICE9PSBiO1xufVxuXG4vKiFcbiAqIENvbXBhcmUgdGhlIHR5cGVzIG9mIHR3byBnaXZlbiBvYmplY3RzIGFuZFxuICogcmV0dXJuIGlmIHRoZXkgYXJlIGVxdWFsLiBOb3RlIHRoYXQgYW4gQXJyYXlcbiAqIGhhcyBhIHR5cGUgb2YgYGFycmF5YCAobm90IGBvYmplY3RgKSBhbmQgYXJndW1lbnRzXG4gKiBoYXZlIGEgdHlwZSBvZiBgYXJndW1lbnRzYCAobm90IGBhcnJheWAvYG9iamVjdGApLlxuICpcbiAqIEBwYXJhbSB7TWl4ZWR9IGFcbiAqIEBwYXJhbSB7TWl4ZWR9IGJcbiAqIEByZXR1cm4ge0Jvb2xlYW59IHJlc3VsdFxuICovXG5cbmZ1bmN0aW9uIHR5cGVFcXVhbChhLCBiKSB7XG4gIHJldHVybiB0eXBlKGEpID09PSB0eXBlKGIpO1xufVxuXG4vKiFcbiAqIENvbXBhcmUgdHdvIERhdGUgb2JqZWN0cyBieSBhc3NlcnRpbmcgdGhhdFxuICogdGhlIHRpbWUgdmFsdWVzIGFyZSBlcXVhbCB1c2luZyBgc2F2ZVZhbHVlYC5cbiAqXG4gKiBAcGFyYW0ge0RhdGV9IGFcbiAqIEBwYXJhbSB7RGF0ZX0gYlxuICogQHJldHVybiB7Qm9vbGVhbn0gcmVzdWx0XG4gKi9cblxuZnVuY3Rpb24gZGF0ZUVxdWFsKGEsIGIpIHtcbiAgaWYgKCdkYXRlJyAhPT0gdHlwZShiKSkgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gc2FtZVZhbHVlKGEuZ2V0VGltZSgpLCBiLmdldFRpbWUoKSk7XG59XG5cbi8qIVxuICogQ29tcGFyZSB0d28gcmVndWxhciBleHByZXNzaW9ucyBieSBjb252ZXJ0aW5nIHRoZW1cbiAqIHRvIHN0cmluZyBhbmQgY2hlY2tpbmcgZm9yIGBzYW1lVmFsdWVgLlxuICpcbiAqIEBwYXJhbSB7UmVnRXhwfSBhXG4gKiBAcGFyYW0ge1JlZ0V4cH0gYlxuICogQHJldHVybiB7Qm9vbGVhbn0gcmVzdWx0XG4gKi9cblxuZnVuY3Rpb24gcmVnZXhwRXF1YWwoYSwgYikge1xuICBpZiAoJ3JlZ2V4cCcgIT09IHR5cGUoYikpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIHNhbWVWYWx1ZShhLnRvU3RyaW5nKCksIGIudG9TdHJpbmcoKSk7XG59XG5cbi8qIVxuICogQXNzZXJ0IGRlZXAgZXF1YWxpdHkgb2YgdHdvIGBhcmd1bWVudHNgIG9iamVjdHMuXG4gKiBVbmZvcnR1bmF0ZWx5LCB0aGVzZSBtdXN0IGJlIHNsaWNlZCB0byBhcnJheXNcbiAqIHByaW9yIHRvIHRlc3QgdG8gZW5zdXJlIG5vIGJhZCBiZWhhdmlvci5cbiAqXG4gKiBAcGFyYW0ge0FyZ3VtZW50c30gYVxuICogQHBhcmFtIHtBcmd1bWVudHN9IGJcbiAqIEBwYXJhbSB7QXJyYXl9IG1lbW9pemUgKG9wdGlvbmFsKVxuICogQHJldHVybiB7Qm9vbGVhbn0gcmVzdWx0XG4gKi9cblxuZnVuY3Rpb24gYXJndW1lbnRzRXF1YWwoYSwgYiwgbSkge1xuICBpZiAoJ2FyZ3VtZW50cycgIT09IHR5cGUoYikpIHJldHVybiBmYWxzZTtcbiAgYSA9IFtdLnNsaWNlLmNhbGwoYSk7XG4gIGIgPSBbXS5zbGljZS5jYWxsKGIpO1xuICByZXR1cm4gZGVlcEVxdWFsKGEsIGIsIG0pO1xufVxuXG4vKiFcbiAqIEdldCBlbnVtZXJhYmxlIHByb3BlcnRpZXMgb2YgYSBnaXZlbiBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGFcbiAqIEByZXR1cm4ge0FycmF5fSBwcm9wZXJ0eSBuYW1lc1xuICovXG5cbmZ1bmN0aW9uIGVudW1lcmFibGUoYSkge1xuICB2YXIgcmVzID0gW107XG4gIGZvciAodmFyIGtleSBpbiBhKSByZXMucHVzaChrZXkpO1xuICByZXR1cm4gcmVzO1xufVxuXG4vKiFcbiAqIFNpbXBsZSBlcXVhbGl0eSBmb3IgZmxhdCBpdGVyYWJsZSBvYmplY3RzXG4gKiBzdWNoIGFzIEFycmF5cyBvciBOb2RlLmpzIGJ1ZmZlcnMuXG4gKlxuICogQHBhcmFtIHtJdGVyYWJsZX0gYVxuICogQHBhcmFtIHtJdGVyYWJsZX0gYlxuICogQHJldHVybiB7Qm9vbGVhbn0gcmVzdWx0XG4gKi9cblxuZnVuY3Rpb24gaXRlcmFibGVFcXVhbChhLCBiKSB7XG4gIGlmIChhLmxlbmd0aCAhPT0gIGIubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG5cbiAgdmFyIGkgPSAwO1xuICB2YXIgbWF0Y2ggPSB0cnVlO1xuXG4gIGZvciAoOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChhW2ldICE9PSBiW2ldKSB7XG4gICAgICBtYXRjaCA9IGZhbHNlO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG1hdGNoO1xufVxuXG4vKiFcbiAqIEV4dGVuc2lvbiB0byBgaXRlcmFibGVFcXVhbGAgc3BlY2lmaWNhbGx5XG4gKiBmb3IgTm9kZS5qcyBCdWZmZXJzLlxuICpcbiAqIEBwYXJhbSB7QnVmZmVyfSBhXG4gKiBAcGFyYW0ge01peGVkfSBiXG4gKiBAcmV0dXJuIHtCb29sZWFufSByZXN1bHRcbiAqL1xuXG5mdW5jdGlvbiBidWZmZXJFcXVhbChhLCBiKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGIpKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiBpdGVyYWJsZUVxdWFsKGEsIGIpO1xufVxuXG4vKiFcbiAqIEJsb2NrIGZvciBgb2JqZWN0RXF1YWxgIGVuc3VyaW5nIG5vbi1leGlzdGluZ1xuICogdmFsdWVzIGRvbid0IGdldCBpbi5cbiAqXG4gKiBAcGFyYW0ge01peGVkfSBvYmplY3RcbiAqIEByZXR1cm4ge0Jvb2xlYW59IHJlc3VsdFxuICovXG5cbmZ1bmN0aW9uIGlzVmFsdWUoYSkge1xuICByZXR1cm4gYSAhPT0gbnVsbCAmJiBhICE9PSB1bmRlZmluZWQ7XG59XG5cbi8qIVxuICogUmVjdXJzaXZlbHkgY2hlY2sgdGhlIGVxdWFsaXR5IG9mIHR3byBvYmplY3RzLlxuICogT25jZSBiYXNpYyBzYW1lbmVzcyBoYXMgYmVlbiBlc3RhYmxpc2hlZCBpdCB3aWxsXG4gKiBkZWZlciB0byBgZGVlcEVxdWFsYCBmb3IgZWFjaCBlbnVtZXJhYmxlIGtleVxuICogaW4gdGhlIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge01peGVkfSBhXG4gKiBAcGFyYW0ge01peGVkfSBiXG4gKiBAcmV0dXJuIHtCb29sZWFufSByZXN1bHRcbiAqL1xuXG5mdW5jdGlvbiBvYmplY3RFcXVhbChhLCBiLCBtKSB7XG4gIGlmICghaXNWYWx1ZShhKSB8fCAhaXNWYWx1ZShiKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmIChhLnByb3RvdHlwZSAhPT0gYi5wcm90b3R5cGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB2YXIgaTtcbiAgaWYgKG0pIHtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbS5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKChtW2ldWzBdID09PSBhICYmIG1baV1bMV0gPT09IGIpXG4gICAgICB8fCAgKG1baV1bMF0gPT09IGIgJiYgbVtpXVsxXSA9PT0gYSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIG0gPSBbXTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgdmFyIGthID0gZW51bWVyYWJsZShhKTtcbiAgICB2YXIga2IgPSBlbnVtZXJhYmxlKGIpO1xuICB9IGNhdGNoIChleCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGthLnNvcnQoKTtcbiAga2Iuc29ydCgpO1xuXG4gIGlmICghaXRlcmFibGVFcXVhbChrYSwga2IpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgbS5wdXNoKFsgYSwgYiBdKTtcblxuICB2YXIga2V5O1xuICBmb3IgKGkgPSBrYS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIGtleSA9IGthW2ldO1xuICAgIGlmICghZGVlcEVxdWFsKGFba2V5XSwgYltrZXldLCBtKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vZGVlcC1lcWwvbGliL2VxbC5qc1xuICoqIG1vZHVsZSBpZCA9IDI5XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvKiFcbiAqIHR5cGUtZGV0ZWN0XG4gKiBDb3B5cmlnaHQoYykgMjAxMyBqYWtlIGx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cbiAqIE1JVCBMaWNlbnNlZFxuICovXG5cbi8qIVxuICogUHJpbWFyeSBFeHBvcnRzXG4gKi9cblxudmFyIGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IGdldFR5cGU7XG5cbi8qIVxuICogRGV0ZWN0YWJsZSBqYXZhc2NyaXB0IG5hdGl2ZXNcbiAqL1xuXG52YXIgbmF0aXZlcyA9IHtcbiAgICAnW29iamVjdCBBcnJheV0nOiAnYXJyYXknXG4gICwgJ1tvYmplY3QgUmVnRXhwXSc6ICdyZWdleHAnXG4gICwgJ1tvYmplY3QgRnVuY3Rpb25dJzogJ2Z1bmN0aW9uJ1xuICAsICdbb2JqZWN0IEFyZ3VtZW50c10nOiAnYXJndW1lbnRzJ1xuICAsICdbb2JqZWN0IERhdGVdJzogJ2RhdGUnXG59O1xuXG4vKipcbiAqICMjIyB0eXBlT2YgKG9iailcbiAqXG4gKiBVc2Ugc2V2ZXJhbCBkaWZmZXJlbnQgdGVjaG5pcXVlcyB0byBkZXRlcm1pbmVcbiAqIHRoZSB0eXBlIG9mIG9iamVjdCBiZWluZyB0ZXN0ZWQuXG4gKlxuICpcbiAqIEBwYXJhbSB7TWl4ZWR9IG9iamVjdFxuICogQHJldHVybiB7U3RyaW5nfSBvYmplY3QgdHlwZVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBnZXRUeXBlIChvYmopIHtcbiAgdmFyIHN0ciA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopO1xuICBpZiAobmF0aXZlc1tzdHJdKSByZXR1cm4gbmF0aXZlc1tzdHJdO1xuICBpZiAob2JqID09PSBudWxsKSByZXR1cm4gJ251bGwnO1xuICBpZiAob2JqID09PSB1bmRlZmluZWQpIHJldHVybiAndW5kZWZpbmVkJztcbiAgaWYgKG9iaiA9PT0gT2JqZWN0KG9iaikpIHJldHVybiAnb2JqZWN0JztcbiAgcmV0dXJuIHR5cGVvZiBvYmo7XG59XG5cbmV4cG9ydHMuTGlicmFyeSA9IExpYnJhcnk7XG5cbi8qKlxuICogIyMjIExpYnJhcnlcbiAqXG4gKiBDcmVhdGUgYSByZXBvc2l0b3J5IGZvciBjdXN0b20gdHlwZSBkZXRlY3Rpb24uXG4gKlxuICogYGBganNcbiAqIHZhciBsaWIgPSBuZXcgdHlwZS5MaWJyYXJ5O1xuICogYGBgXG4gKlxuICovXG5cbmZ1bmN0aW9uIExpYnJhcnkgKCkge1xuICB0aGlzLnRlc3RzID0ge307XG59XG5cbi8qKlxuICogIyMjIyAub2YgKG9iailcbiAqXG4gKiBFeHBvc2UgcmVwbGFjZW1lbnQgYHR5cGVvZmAgZGV0ZWN0aW9uIHRvIHRoZSBsaWJyYXJ5LlxuICpcbiAqIGBgYGpzXG4gKiBpZiAoJ3N0cmluZycgPT09IGxpYi5vZignaGVsbG8gd29ybGQnKSkge1xuICogICAvLyAuLi5cbiAqIH1cbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7TWl4ZWR9IG9iamVjdCB0byB0ZXN0XG4gKiBAcmV0dXJuIHtTdHJpbmd9IHR5cGVcbiAqL1xuXG5MaWJyYXJ5LnByb3RvdHlwZS5vZiA9IGdldFR5cGU7XG5cbi8qKlxuICogIyMjIyAuZGVmaW5lICh0eXBlLCB0ZXN0KVxuICpcbiAqIEFkZCBhIHRlc3QgdG8gZm9yIHRoZSBgLnRlc3QoKWAgYXNzZXJ0aW9uLlxuICpcbiAqIENhbiBiZSBkZWZpbmVkIGFzIGEgcmVndWxhciBleHByZXNzaW9uOlxuICpcbiAqIGBgYGpzXG4gKiBsaWIuZGVmaW5lKCdpbnQnLCAvXlswLTldKyQvKTtcbiAqIGBgYFxuICpcbiAqIC4uLiBvciBhcyBhIGZ1bmN0aW9uOlxuICpcbiAqIGBgYGpzXG4gKiBsaWIuZGVmaW5lKCdibG4nLCBmdW5jdGlvbiAob2JqKSB7XG4gKiAgIGlmICgnYm9vbGVhbicgPT09IGxpYi5vZihvYmopKSByZXR1cm4gdHJ1ZTtcbiAqICAgdmFyIGJsbnMgPSBbICd5ZXMnLCAnbm8nLCAndHJ1ZScsICdmYWxzZScsIDEsIDAgXTtcbiAqICAgaWYgKCdzdHJpbmcnID09PSBsaWIub2Yob2JqKSkgb2JqID0gb2JqLnRvTG93ZXJDYXNlKCk7XG4gKiAgIHJldHVybiAhISB+Ymxucy5pbmRleE9mKG9iaik7XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKiBAcGFyYW0ge1JlZ0V4cHxGdW5jdGlvbn0gdGVzdFxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5MaWJyYXJ5LnByb3RvdHlwZS5kZWZpbmUgPSBmdW5jdGlvbiAodHlwZSwgdGVzdCkge1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkgcmV0dXJuIHRoaXMudGVzdHNbdHlwZV07XG4gIHRoaXMudGVzdHNbdHlwZV0gPSB0ZXN0O1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogIyMjIyAudGVzdCAob2JqLCB0ZXN0KVxuICpcbiAqIEFzc2VydCB0aGF0IGFuIG9iamVjdCBpcyBvZiB0eXBlLiBXaWxsIGZpcnN0XG4gKiBjaGVjayBuYXRpdmVzLCBhbmQgaWYgdGhhdCBkb2VzIG5vdCBwYXNzIGl0IHdpbGxcbiAqIHVzZSB0aGUgdXNlciBkZWZpbmVkIGN1c3RvbSB0ZXN0cy5cbiAqXG4gKiBgYGBqc1xuICogYXNzZXJ0KGxpYi50ZXN0KCcxJywgJ2ludCcpKTtcbiAqIGFzc2VydChsaWIudGVzdCgneWVzJywgJ2JsbicpKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7TWl4ZWR9IG9iamVjdFxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEByZXR1cm4ge0Jvb2xlYW59IHJlc3VsdFxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5MaWJyYXJ5LnByb3RvdHlwZS50ZXN0ID0gZnVuY3Rpb24gKG9iaiwgdHlwZSkge1xuICBpZiAodHlwZSA9PT0gZ2V0VHlwZShvYmopKSByZXR1cm4gdHJ1ZTtcbiAgdmFyIHRlc3QgPSB0aGlzLnRlc3RzW3R5cGVdO1xuXG4gIGlmICh0ZXN0ICYmICdyZWdleHAnID09PSBnZXRUeXBlKHRlc3QpKSB7XG4gICAgcmV0dXJuIHRlc3QudGVzdChvYmopO1xuICB9IGVsc2UgaWYgKHRlc3QgJiYgJ2Z1bmN0aW9uJyA9PT0gZ2V0VHlwZSh0ZXN0KSkge1xuICAgIHJldHVybiB0ZXN0KG9iaik7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCdUeXBlIHRlc3QgXCInICsgdHlwZSArICdcIiBub3QgZGVmaW5lZCBvciBpbnZhbGlkLicpO1xuICB9XG59O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vZGVlcC1lcWwvfi90eXBlLWRldGVjdC9saWIvdHlwZS5qc1xuICoqIG1vZHVsZSBpZCA9IDMxXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvKiFcbiAqIFRoZSBidWZmZXIgbW9kdWxlIGZyb20gbm9kZS5qcywgZm9yIHRoZSBicm93c2VyLlxuICpcbiAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxmZXJvc3NAZmVyb3NzLm9yZz4gPGh0dHA6Ly9mZXJvc3Mub3JnPlxuICogQGxpY2Vuc2UgIE1JVFxuICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqL1xuXG52YXIgYmFzZTY0ID0gcmVxdWlyZSgnYmFzZTY0LWpzJylcbnZhciBpZWVlNzU0ID0gcmVxdWlyZSgnaWVlZTc1NCcpXG52YXIgaXNBcnJheSA9IHJlcXVpcmUoJ2lzLWFycmF5JylcblxuZXhwb3J0cy5CdWZmZXIgPSBCdWZmZXJcbmV4cG9ydHMuU2xvd0J1ZmZlciA9IFNsb3dCdWZmZXJcbmV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVMgPSA1MFxuQnVmZmVyLnBvb2xTaXplID0gODE5MiAvLyBub3QgdXNlZCBieSB0aGlzIGltcGxlbWVudGF0aW9uXG5cbnZhciByb290UGFyZW50ID0ge31cblxuLyoqXG4gKiBJZiBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgOlxuICogICA9PT0gdHJ1ZSAgICBVc2UgVWludDhBcnJheSBpbXBsZW1lbnRhdGlvbiAoZmFzdGVzdClcbiAqICAgPT09IGZhbHNlICAgVXNlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiAobW9zdCBjb21wYXRpYmxlLCBldmVuIElFNilcbiAqXG4gKiBCcm93c2VycyB0aGF0IHN1cHBvcnQgdHlwZWQgYXJyYXlzIGFyZSBJRSAxMCssIEZpcmVmb3ggNCssIENocm9tZSA3KywgU2FmYXJpIDUuMSssXG4gKiBPcGVyYSAxMS42KywgaU9TIDQuMisuXG4gKlxuICogRHVlIHRvIHZhcmlvdXMgYnJvd3NlciBidWdzLCBzb21ldGltZXMgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiB3aWxsIGJlIHVzZWQgZXZlblxuICogd2hlbiB0aGUgYnJvd3NlciBzdXBwb3J0cyB0eXBlZCBhcnJheXMuXG4gKlxuICogTm90ZTpcbiAqXG4gKiAgIC0gRmlyZWZveCA0LTI5IGxhY2tzIHN1cHBvcnQgZm9yIGFkZGluZyBuZXcgcHJvcGVydGllcyB0byBgVWludDhBcnJheWAgaW5zdGFuY2VzLFxuICogICAgIFNlZTogaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9Njk1NDM4LlxuICpcbiAqICAgLSBTYWZhcmkgNS03IGxhY2tzIHN1cHBvcnQgZm9yIGNoYW5naW5nIHRoZSBgT2JqZWN0LnByb3RvdHlwZS5jb25zdHJ1Y3RvcmAgcHJvcGVydHlcbiAqICAgICBvbiBvYmplY3RzLlxuICpcbiAqICAgLSBDaHJvbWUgOS0xMCBpcyBtaXNzaW5nIHRoZSBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uLlxuICpcbiAqICAgLSBJRTEwIGhhcyBhIGJyb2tlbiBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgYXJyYXlzIG9mXG4gKiAgICAgaW5jb3JyZWN0IGxlbmd0aCBpbiBzb21lIHNpdHVhdGlvbnMuXG5cbiAqIFdlIGRldGVjdCB0aGVzZSBidWdneSBicm93c2VycyBhbmQgc2V0IGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGAgdG8gYGZhbHNlYCBzbyB0aGV5XG4gKiBnZXQgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiwgd2hpY2ggaXMgc2xvd2VyIGJ1dCBiZWhhdmVzIGNvcnJlY3RseS5cbiAqL1xuQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgPSBnbG9iYWwuVFlQRURfQVJSQVlfU1VQUE9SVCAhPT0gdW5kZWZpbmVkXG4gID8gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlRcbiAgOiB0eXBlZEFycmF5U3VwcG9ydCgpXG5cbmZ1bmN0aW9uIHR5cGVkQXJyYXlTdXBwb3J0ICgpIHtcbiAgZnVuY3Rpb24gQmFyICgpIHt9XG4gIHRyeSB7XG4gICAgdmFyIGFyciA9IG5ldyBVaW50OEFycmF5KDEpXG4gICAgYXJyLmZvbyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIDQyIH1cbiAgICBhcnIuY29uc3RydWN0b3IgPSBCYXJcbiAgICByZXR1cm4gYXJyLmZvbygpID09PSA0MiAmJiAvLyB0eXBlZCBhcnJheSBpbnN0YW5jZXMgY2FuIGJlIGF1Z21lbnRlZFxuICAgICAgICBhcnIuY29uc3RydWN0b3IgPT09IEJhciAmJiAvLyBjb25zdHJ1Y3RvciBjYW4gYmUgc2V0XG4gICAgICAgIHR5cGVvZiBhcnIuc3ViYXJyYXkgPT09ICdmdW5jdGlvbicgJiYgLy8gY2hyb21lIDktMTAgbGFjayBgc3ViYXJyYXlgXG4gICAgICAgIGFyci5zdWJhcnJheSgxLCAxKS5ieXRlTGVuZ3RoID09PSAwIC8vIGllMTAgaGFzIGJyb2tlbiBgc3ViYXJyYXlgXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5mdW5jdGlvbiBrTWF4TGVuZ3RoICgpIHtcbiAgcmV0dXJuIEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUXG4gICAgPyAweDdmZmZmZmZmXG4gICAgOiAweDNmZmZmZmZmXG59XG5cbi8qKlxuICogQ2xhc3M6IEJ1ZmZlclxuICogPT09PT09PT09PT09PVxuICpcbiAqIFRoZSBCdWZmZXIgY29uc3RydWN0b3IgcmV0dXJucyBpbnN0YW5jZXMgb2YgYFVpbnQ4QXJyYXlgIHRoYXQgYXJlIGF1Z21lbnRlZFxuICogd2l0aCBmdW5jdGlvbiBwcm9wZXJ0aWVzIGZvciBhbGwgdGhlIG5vZGUgYEJ1ZmZlcmAgQVBJIGZ1bmN0aW9ucy4gV2UgdXNlXG4gKiBgVWludDhBcnJheWAgc28gdGhhdCBzcXVhcmUgYnJhY2tldCBub3RhdGlvbiB3b3JrcyBhcyBleHBlY3RlZCAtLSBpdCByZXR1cm5zXG4gKiBhIHNpbmdsZSBvY3RldC5cbiAqXG4gKiBCeSBhdWdtZW50aW5nIHRoZSBpbnN0YW5jZXMsIHdlIGNhbiBhdm9pZCBtb2RpZnlpbmcgdGhlIGBVaW50OEFycmF5YFxuICogcHJvdG90eXBlLlxuICovXG5mdW5jdGlvbiBCdWZmZXIgKGFyZykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgQnVmZmVyKSkge1xuICAgIC8vIEF2b2lkIGdvaW5nIHRocm91Z2ggYW4gQXJndW1lbnRzQWRhcHRvclRyYW1wb2xpbmUgaW4gdGhlIGNvbW1vbiBjYXNlLlxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkgcmV0dXJuIG5ldyBCdWZmZXIoYXJnLCBhcmd1bWVudHNbMV0pXG4gICAgcmV0dXJuIG5ldyBCdWZmZXIoYXJnKVxuICB9XG5cbiAgdGhpcy5sZW5ndGggPSAwXG4gIHRoaXMucGFyZW50ID0gdW5kZWZpbmVkXG5cbiAgLy8gQ29tbW9uIGNhc2UuXG4gIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJykge1xuICAgIHJldHVybiBmcm9tTnVtYmVyKHRoaXMsIGFyZylcbiAgfVxuXG4gIC8vIFNsaWdodGx5IGxlc3MgY29tbW9uIGNhc2UuXG4gIGlmICh0eXBlb2YgYXJnID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBmcm9tU3RyaW5nKHRoaXMsIGFyZywgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiAndXRmOCcpXG4gIH1cblxuICAvLyBVbnVzdWFsLlxuICByZXR1cm4gZnJvbU9iamVjdCh0aGlzLCBhcmcpXG59XG5cbmZ1bmN0aW9uIGZyb21OdW1iZXIgKHRoYXQsIGxlbmd0aCkge1xuICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoIDwgMCA/IDAgOiBjaGVja2VkKGxlbmd0aCkgfCAwKVxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdGhhdFtpXSA9IDBcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbVN0cmluZyAodGhhdCwgc3RyaW5nLCBlbmNvZGluZykge1xuICBpZiAodHlwZW9mIGVuY29kaW5nICE9PSAnc3RyaW5nJyB8fCBlbmNvZGluZyA9PT0gJycpIGVuY29kaW5nID0gJ3V0ZjgnXG5cbiAgLy8gQXNzdW1wdGlvbjogYnl0ZUxlbmd0aCgpIHJldHVybiB2YWx1ZSBpcyBhbHdheXMgPCBrTWF4TGVuZ3RoLlxuICB2YXIgbGVuZ3RoID0gYnl0ZUxlbmd0aChzdHJpbmcsIGVuY29kaW5nKSB8IDBcbiAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcblxuICB0aGF0LndyaXRlKHN0cmluZywgZW5jb2RpbmcpXG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21PYmplY3QgKHRoYXQsIG9iamVjdCkge1xuICBpZiAoQnVmZmVyLmlzQnVmZmVyKG9iamVjdCkpIHJldHVybiBmcm9tQnVmZmVyKHRoYXQsIG9iamVjdClcblxuICBpZiAoaXNBcnJheShvYmplY3QpKSByZXR1cm4gZnJvbUFycmF5KHRoYXQsIG9iamVjdClcblxuICBpZiAob2JqZWN0ID09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdtdXN0IHN0YXJ0IHdpdGggbnVtYmVyLCBidWZmZXIsIGFycmF5IG9yIHN0cmluZycpXG4gIH1cblxuICBpZiAodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgIGlmIChvYmplY3QuYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgIHJldHVybiBmcm9tVHlwZWRBcnJheSh0aGF0LCBvYmplY3QpXG4gICAgfVxuICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgICAgcmV0dXJuIGZyb21BcnJheUJ1ZmZlcih0aGF0LCBvYmplY3QpXG4gICAgfVxuICB9XG5cbiAgaWYgKG9iamVjdC5sZW5ndGgpIHJldHVybiBmcm9tQXJyYXlMaWtlKHRoYXQsIG9iamVjdClcblxuICByZXR1cm4gZnJvbUpzb25PYmplY3QodGhhdCwgb2JqZWN0KVxufVxuXG5mdW5jdGlvbiBmcm9tQnVmZmVyICh0aGF0LCBidWZmZXIpIHtcbiAgdmFyIGxlbmd0aCA9IGNoZWNrZWQoYnVmZmVyLmxlbmd0aCkgfCAwXG4gIHRoYXQgPSBhbGxvY2F0ZSh0aGF0LCBsZW5ndGgpXG4gIGJ1ZmZlci5jb3B5KHRoYXQsIDAsIDAsIGxlbmd0aClcbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5ICh0aGF0LCBhcnJheSkge1xuICB2YXIgbGVuZ3RoID0gY2hlY2tlZChhcnJheS5sZW5ndGgpIHwgMFxuICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoKVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1XG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuLy8gRHVwbGljYXRlIG9mIGZyb21BcnJheSgpIHRvIGtlZXAgZnJvbUFycmF5KCkgbW9ub21vcnBoaWMuXG5mdW5jdGlvbiBmcm9tVHlwZWRBcnJheSAodGhhdCwgYXJyYXkpIHtcbiAgdmFyIGxlbmd0aCA9IGNoZWNrZWQoYXJyYXkubGVuZ3RoKSB8IDBcbiAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcbiAgLy8gVHJ1bmNhdGluZyB0aGUgZWxlbWVudHMgaXMgcHJvYmFibHkgbm90IHdoYXQgcGVvcGxlIGV4cGVjdCBmcm9tIHR5cGVkXG4gIC8vIGFycmF5cyB3aXRoIEJZVEVTX1BFUl9FTEVNRU5UID4gMSBidXQgaXQncyBjb21wYXRpYmxlIHdpdGggdGhlIGJlaGF2aW9yXG4gIC8vIG9mIHRoZSBvbGQgQnVmZmVyIGNvbnN0cnVjdG9yLlxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1XG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5QnVmZmVyICh0aGF0LCBhcnJheSkge1xuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZSwgZm9yIGJlc3QgcGVyZm9ybWFuY2VcbiAgICBhcnJheS5ieXRlTGVuZ3RoXG4gICAgdGhhdCA9IEJ1ZmZlci5fYXVnbWVudChuZXcgVWludDhBcnJheShhcnJheSkpXG4gIH0gZWxzZSB7XG4gICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzc1xuICAgIHRoYXQgPSBmcm9tVHlwZWRBcnJheSh0aGF0LCBuZXcgVWludDhBcnJheShhcnJheSkpXG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5TGlrZSAodGhhdCwgYXJyYXkpIHtcbiAgdmFyIGxlbmd0aCA9IGNoZWNrZWQoYXJyYXkubGVuZ3RoKSB8IDBcbiAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgIHRoYXRbaV0gPSBhcnJheVtpXSAmIDI1NVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbi8vIERlc2VyaWFsaXplIHsgdHlwZTogJ0J1ZmZlcicsIGRhdGE6IFsxLDIsMywuLi5dIH0gaW50byBhIEJ1ZmZlciBvYmplY3QuXG4vLyBSZXR1cm5zIGEgemVyby1sZW5ndGggYnVmZmVyIGZvciBpbnB1dHMgdGhhdCBkb24ndCBjb25mb3JtIHRvIHRoZSBzcGVjLlxuZnVuY3Rpb24gZnJvbUpzb25PYmplY3QgKHRoYXQsIG9iamVjdCkge1xuICB2YXIgYXJyYXlcbiAgdmFyIGxlbmd0aCA9IDBcblxuICBpZiAob2JqZWN0LnR5cGUgPT09ICdCdWZmZXInICYmIGlzQXJyYXkob2JqZWN0LmRhdGEpKSB7XG4gICAgYXJyYXkgPSBvYmplY3QuZGF0YVxuICAgIGxlbmd0aCA9IGNoZWNrZWQoYXJyYXkubGVuZ3RoKSB8IDBcbiAgfVxuICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoKVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICB0aGF0W2ldID0gYXJyYXlbaV0gJiAyNTVcbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG5pZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgQnVmZmVyLnByb3RvdHlwZS5fX3Byb3RvX18gPSBVaW50OEFycmF5LnByb3RvdHlwZVxuICBCdWZmZXIuX19wcm90b19fID0gVWludDhBcnJheVxufVxuXG5mdW5jdGlvbiBhbGxvY2F0ZSAodGhhdCwgbGVuZ3RoKSB7XG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlLCBmb3IgYmVzdCBwZXJmb3JtYW5jZVxuICAgIHRoYXQgPSBCdWZmZXIuX2F1Z21lbnQobmV3IFVpbnQ4QXJyYXkobGVuZ3RoKSlcbiAgICB0aGF0Ll9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcbiAgfSBlbHNlIHtcbiAgICAvLyBGYWxsYmFjazogUmV0dXJuIGFuIG9iamVjdCBpbnN0YW5jZSBvZiB0aGUgQnVmZmVyIGNsYXNzXG4gICAgdGhhdC5sZW5ndGggPSBsZW5ndGhcbiAgICB0aGF0Ll9pc0J1ZmZlciA9IHRydWVcbiAgfVxuXG4gIHZhciBmcm9tUG9vbCA9IGxlbmd0aCAhPT0gMCAmJiBsZW5ndGggPD0gQnVmZmVyLnBvb2xTaXplID4+PiAxXG4gIGlmIChmcm9tUG9vbCkgdGhhdC5wYXJlbnQgPSByb290UGFyZW50XG5cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gY2hlY2tlZCAobGVuZ3RoKSB7XG4gIC8vIE5vdGU6IGNhbm5vdCB1c2UgYGxlbmd0aCA8IGtNYXhMZW5ndGhgIGhlcmUgYmVjYXVzZSB0aGF0IGZhaWxzIHdoZW5cbiAgLy8gbGVuZ3RoIGlzIE5hTiAod2hpY2ggaXMgb3RoZXJ3aXNlIGNvZXJjZWQgdG8gemVyby4pXG4gIGlmIChsZW5ndGggPj0ga01heExlbmd0aCgpKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0F0dGVtcHQgdG8gYWxsb2NhdGUgQnVmZmVyIGxhcmdlciB0aGFuIG1heGltdW0gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgJ3NpemU6IDB4JyArIGtNYXhMZW5ndGgoKS50b1N0cmluZygxNikgKyAnIGJ5dGVzJylcbiAgfVxuICByZXR1cm4gbGVuZ3RoIHwgMFxufVxuXG5mdW5jdGlvbiBTbG93QnVmZmVyIChzdWJqZWN0LCBlbmNvZGluZykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU2xvd0J1ZmZlcikpIHJldHVybiBuZXcgU2xvd0J1ZmZlcihzdWJqZWN0LCBlbmNvZGluZylcblxuICB2YXIgYnVmID0gbmV3IEJ1ZmZlcihzdWJqZWN0LCBlbmNvZGluZylcbiAgZGVsZXRlIGJ1Zi5wYXJlbnRcbiAgcmV0dXJuIGJ1ZlxufVxuXG5CdWZmZXIuaXNCdWZmZXIgPSBmdW5jdGlvbiBpc0J1ZmZlciAoYikge1xuICByZXR1cm4gISEoYiAhPSBudWxsICYmIGIuX2lzQnVmZmVyKVxufVxuXG5CdWZmZXIuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKGEsIGIpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYSkgfHwgIUJ1ZmZlci5pc0J1ZmZlcihiKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50cyBtdXN0IGJlIEJ1ZmZlcnMnKVxuICB9XG5cbiAgaWYgKGEgPT09IGIpIHJldHVybiAwXG5cbiAgdmFyIHggPSBhLmxlbmd0aFxuICB2YXIgeSA9IGIubGVuZ3RoXG5cbiAgdmFyIGkgPSAwXG4gIHZhciBsZW4gPSBNYXRoLm1pbih4LCB5KVxuICB3aGlsZSAoaSA8IGxlbikge1xuICAgIGlmIChhW2ldICE9PSBiW2ldKSBicmVha1xuXG4gICAgKytpXG4gIH1cblxuICBpZiAoaSAhPT0gbGVuKSB7XG4gICAgeCA9IGFbaV1cbiAgICB5ID0gYltpXVxuICB9XG5cbiAgaWYgKHggPCB5KSByZXR1cm4gLTFcbiAgaWYgKHkgPCB4KSByZXR1cm4gMVxuICByZXR1cm4gMFxufVxuXG5CdWZmZXIuaXNFbmNvZGluZyA9IGZ1bmN0aW9uIGlzRW5jb2RpbmcgKGVuY29kaW5nKSB7XG4gIHN3aXRjaCAoU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgY2FzZSAnaGV4JzpcbiAgICBjYXNlICd1dGY4JzpcbiAgICBjYXNlICd1dGYtOCc6XG4gICAgY2FzZSAnYXNjaWknOlxuICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgY2FzZSAnYmFzZTY0JzpcbiAgICBjYXNlICdyYXcnOlxuICAgIGNhc2UgJ3VjczInOlxuICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICBjYXNlICd1dGYxNmxlJzpcbiAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5CdWZmZXIuY29uY2F0ID0gZnVuY3Rpb24gY29uY2F0IChsaXN0LCBsZW5ndGgpIHtcbiAgaWYgKCFpc0FycmF5KGxpc3QpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdsaXN0IGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycy4nKVxuXG4gIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBuZXcgQnVmZmVyKDApXG4gIH1cblxuICB2YXIgaVxuICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcbiAgICBsZW5ndGggPSAwXG4gICAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxlbmd0aCArPSBsaXN0W2ldLmxlbmd0aFxuICAgIH1cbiAgfVxuXG4gIHZhciBidWYgPSBuZXcgQnVmZmVyKGxlbmd0aClcbiAgdmFyIHBvcyA9IDBcbiAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IGxpc3RbaV1cbiAgICBpdGVtLmNvcHkoYnVmLCBwb3MpXG4gICAgcG9zICs9IGl0ZW0ubGVuZ3RoXG4gIH1cbiAgcmV0dXJuIGJ1ZlxufVxuXG5mdW5jdGlvbiBieXRlTGVuZ3RoIChzdHJpbmcsIGVuY29kaW5nKSB7XG4gIGlmICh0eXBlb2Ygc3RyaW5nICE9PSAnc3RyaW5nJykgc3RyaW5nID0gJycgKyBzdHJpbmdcblxuICB2YXIgbGVuID0gc3RyaW5nLmxlbmd0aFxuICBpZiAobGVuID09PSAwKSByZXR1cm4gMFxuXG4gIC8vIFVzZSBhIGZvciBsb29wIHRvIGF2b2lkIHJlY3Vyc2lvblxuICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuICBmb3IgKDs7KSB7XG4gICAgc3dpdGNoIChlbmNvZGluZykge1xuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgIC8vIERlcHJlY2F0ZWRcbiAgICAgIGNhc2UgJ3Jhdyc6XG4gICAgICBjYXNlICdyYXdzJzpcbiAgICAgICAgcmV0dXJuIGxlblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICAgIHJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aFxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIGxlbiAqIDJcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBsZW4gPj4+IDFcbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIHJldHVybiBiYXNlNjRUb0J5dGVzKHN0cmluZykubGVuZ3RoXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aCAvLyBhc3N1bWUgdXRmOFxuICAgICAgICBlbmNvZGluZyA9ICgnJyArIGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuICAgIH1cbiAgfVxufVxuQnVmZmVyLmJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoXG5cbi8vIHByZS1zZXQgZm9yIHZhbHVlcyB0aGF0IG1heSBleGlzdCBpbiB0aGUgZnV0dXJlXG5CdWZmZXIucHJvdG90eXBlLmxlbmd0aCA9IHVuZGVmaW5lZFxuQnVmZmVyLnByb3RvdHlwZS5wYXJlbnQgPSB1bmRlZmluZWRcblxuZnVuY3Rpb24gc2xvd1RvU3RyaW5nIChlbmNvZGluZywgc3RhcnQsIGVuZCkge1xuICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuXG4gIHN0YXJ0ID0gc3RhcnQgfCAwXG4gIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkIHx8IGVuZCA9PT0gSW5maW5pdHkgPyB0aGlzLmxlbmd0aCA6IGVuZCB8IDBcblxuICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4J1xuICBpZiAoc3RhcnQgPCAwKSBzdGFydCA9IDBcbiAgaWYgKGVuZCA+IHRoaXMubGVuZ3RoKSBlbmQgPSB0aGlzLmxlbmd0aFxuICBpZiAoZW5kIDw9IHN0YXJ0KSByZXR1cm4gJydcblxuICB3aGlsZSAodHJ1ZSkge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBoZXhTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgICAgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICAgIHJldHVybiBhc2NpaVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICAgIHJldHVybiBiaW5hcnlTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICByZXR1cm4gYmFzZTY0U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIHV0ZjE2bGVTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgICAgICAgZW5jb2RpbmcgPSAoZW5jb2RpbmcgKyAnJykudG9Mb3dlckNhc2UoKVxuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nICgpIHtcbiAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoIHwgMFxuICBpZiAobGVuZ3RoID09PSAwKSByZXR1cm4gJydcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHJldHVybiB1dGY4U2xpY2UodGhpcywgMCwgbGVuZ3RoKVxuICByZXR1cm4gc2xvd1RvU3RyaW5nLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiBlcXVhbHMgKGIpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuICBpZiAodGhpcyA9PT0gYikgcmV0dXJuIHRydWVcbiAgcmV0dXJuIEJ1ZmZlci5jb21wYXJlKHRoaXMsIGIpID09PSAwXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uIGluc3BlY3QgKCkge1xuICB2YXIgc3RyID0gJydcbiAgdmFyIG1heCA9IGV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVNcbiAgaWYgKHRoaXMubGVuZ3RoID4gMCkge1xuICAgIHN0ciA9IHRoaXMudG9TdHJpbmcoJ2hleCcsIDAsIG1heCkubWF0Y2goLy57Mn0vZykuam9pbignICcpXG4gICAgaWYgKHRoaXMubGVuZ3RoID4gbWF4KSBzdHIgKz0gJyAuLi4gJ1xuICB9XG4gIHJldHVybiAnPEJ1ZmZlciAnICsgc3RyICsgJz4nXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKGIpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuICBpZiAodGhpcyA9PT0gYikgcmV0dXJuIDBcbiAgcmV0dXJuIEJ1ZmZlci5jb21wYXJlKHRoaXMsIGIpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIGluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCkge1xuICBpZiAoYnl0ZU9mZnNldCA+IDB4N2ZmZmZmZmYpIGJ5dGVPZmZzZXQgPSAweDdmZmZmZmZmXG4gIGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAtMHg4MDAwMDAwMCkgYnl0ZU9mZnNldCA9IC0weDgwMDAwMDAwXG4gIGJ5dGVPZmZzZXQgPj49IDBcblxuICBpZiAodGhpcy5sZW5ndGggPT09IDApIHJldHVybiAtMVxuICBpZiAoYnl0ZU9mZnNldCA+PSB0aGlzLmxlbmd0aCkgcmV0dXJuIC0xXG5cbiAgLy8gTmVnYXRpdmUgb2Zmc2V0cyBzdGFydCBmcm9tIHRoZSBlbmQgb2YgdGhlIGJ1ZmZlclxuICBpZiAoYnl0ZU9mZnNldCA8IDApIGJ5dGVPZmZzZXQgPSBNYXRoLm1heCh0aGlzLmxlbmd0aCArIGJ5dGVPZmZzZXQsIDApXG5cbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgaWYgKHZhbC5sZW5ndGggPT09IDApIHJldHVybiAtMSAvLyBzcGVjaWFsIGNhc2U6IGxvb2tpbmcgZm9yIGVtcHR5IHN0cmluZyBhbHdheXMgZmFpbHNcbiAgICByZXR1cm4gU3RyaW5nLnByb3RvdHlwZS5pbmRleE9mLmNhbGwodGhpcywgdmFsLCBieXRlT2Zmc2V0KVxuICB9XG4gIGlmIChCdWZmZXIuaXNCdWZmZXIodmFsKSkge1xuICAgIHJldHVybiBhcnJheUluZGV4T2YodGhpcywgdmFsLCBieXRlT2Zmc2V0KVxuICB9XG4gIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuICAgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCAmJiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHRoaXMsIHZhbCwgYnl0ZU9mZnNldClcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5SW5kZXhPZih0aGlzLCBbIHZhbCBdLCBieXRlT2Zmc2V0KVxuICB9XG5cbiAgZnVuY3Rpb24gYXJyYXlJbmRleE9mIChhcnIsIHZhbCwgYnl0ZU9mZnNldCkge1xuICAgIHZhciBmb3VuZEluZGV4ID0gLTFcbiAgICBmb3IgKHZhciBpID0gMDsgYnl0ZU9mZnNldCArIGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChhcnJbYnl0ZU9mZnNldCArIGldID09PSB2YWxbZm91bmRJbmRleCA9PT0gLTEgPyAwIDogaSAtIGZvdW5kSW5kZXhdKSB7XG4gICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSkgZm91bmRJbmRleCA9IGlcbiAgICAgICAgaWYgKGkgLSBmb3VuZEluZGV4ICsgMSA9PT0gdmFsLmxlbmd0aCkgcmV0dXJuIGJ5dGVPZmZzZXQgKyBmb3VuZEluZGV4XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3VuZEluZGV4ID0gLTFcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIC0xXG4gIH1cblxuICB0aHJvdyBuZXcgVHlwZUVycm9yKCd2YWwgbXVzdCBiZSBzdHJpbmcsIG51bWJlciBvciBCdWZmZXInKVxufVxuXG4vLyBgZ2V0YCBpcyBkZXByZWNhdGVkXG5CdWZmZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIGdldCAob2Zmc2V0KSB7XG4gIGNvbnNvbGUubG9nKCcuZ2V0KCkgaXMgZGVwcmVjYXRlZC4gQWNjZXNzIHVzaW5nIGFycmF5IGluZGV4ZXMgaW5zdGVhZC4nKVxuICByZXR1cm4gdGhpcy5yZWFkVUludDgob2Zmc2V0KVxufVxuXG4vLyBgc2V0YCBpcyBkZXByZWNhdGVkXG5CdWZmZXIucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIHNldCAodiwgb2Zmc2V0KSB7XG4gIGNvbnNvbGUubG9nKCcuc2V0KCkgaXMgZGVwcmVjYXRlZC4gQWNjZXNzIHVzaW5nIGFycmF5IGluZGV4ZXMgaW5zdGVhZC4nKVxuICByZXR1cm4gdGhpcy53cml0ZVVJbnQ4KHYsIG9mZnNldClcbn1cblxuZnVuY3Rpb24gaGV4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICBvZmZzZXQgPSBOdW1iZXIob2Zmc2V0KSB8fCAwXG4gIHZhciByZW1haW5pbmcgPSBidWYubGVuZ3RoIC0gb2Zmc2V0XG4gIGlmICghbGVuZ3RoKSB7XG4gICAgbGVuZ3RoID0gcmVtYWluaW5nXG4gIH0gZWxzZSB7XG4gICAgbGVuZ3RoID0gTnVtYmVyKGxlbmd0aClcbiAgICBpZiAobGVuZ3RoID4gcmVtYWluaW5nKSB7XG4gICAgICBsZW5ndGggPSByZW1haW5pbmdcbiAgICB9XG4gIH1cblxuICAvLyBtdXN0IGJlIGFuIGV2ZW4gbnVtYmVyIG9mIGRpZ2l0c1xuICB2YXIgc3RyTGVuID0gc3RyaW5nLmxlbmd0aFxuICBpZiAoc3RyTGVuICUgMiAhPT0gMCkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGhleCBzdHJpbmcnKVxuXG4gIGlmIChsZW5ndGggPiBzdHJMZW4gLyAyKSB7XG4gICAgbGVuZ3RoID0gc3RyTGVuIC8gMlxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgcGFyc2VkID0gcGFyc2VJbnQoc3RyaW5nLnN1YnN0cihpICogMiwgMiksIDE2KVxuICAgIGlmIChpc05hTihwYXJzZWQpKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgaGV4IHN0cmluZycpXG4gICAgYnVmW29mZnNldCArIGldID0gcGFyc2VkXG4gIH1cbiAgcmV0dXJuIGlcbn1cblxuZnVuY3Rpb24gdXRmOFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIodXRmOFRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gYXNjaWlXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKGFzY2lpVG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBiaW5hcnlXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBhc2NpaVdyaXRlKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gYmFzZTY0V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcihiYXNlNjRUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIHVjczJXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKHV0ZjE2bGVUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiB3cml0ZSAoc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCwgZW5jb2RpbmcpIHtcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZylcbiAgaWYgKG9mZnNldCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZW5jb2RpbmcgPSAndXRmOCdcbiAgICBsZW5ndGggPSB0aGlzLmxlbmd0aFxuICAgIG9mZnNldCA9IDBcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgZW5jb2RpbmcpXG4gIH0gZWxzZSBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIG9mZnNldCA9PT0gJ3N0cmluZycpIHtcbiAgICBlbmNvZGluZyA9IG9mZnNldFxuICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoXG4gICAgb2Zmc2V0ID0gMFxuICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBvZmZzZXRbLCBsZW5ndGhdWywgZW5jb2RpbmddKVxuICB9IGVsc2UgaWYgKGlzRmluaXRlKG9mZnNldCkpIHtcbiAgICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gICAgaWYgKGlzRmluaXRlKGxlbmd0aCkpIHtcbiAgICAgIGxlbmd0aCA9IGxlbmd0aCB8IDBcbiAgICAgIGlmIChlbmNvZGluZyA9PT0gdW5kZWZpbmVkKSBlbmNvZGluZyA9ICd1dGY4J1xuICAgIH0gZWxzZSB7XG4gICAgICBlbmNvZGluZyA9IGxlbmd0aFxuICAgICAgbGVuZ3RoID0gdW5kZWZpbmVkXG4gICAgfVxuICAvLyBsZWdhY3kgd3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0LCBsZW5ndGgpIC0gcmVtb3ZlIGluIHYwLjEzXG4gIH0gZWxzZSB7XG4gICAgdmFyIHN3YXAgPSBlbmNvZGluZ1xuICAgIGVuY29kaW5nID0gb2Zmc2V0XG4gICAgb2Zmc2V0ID0gbGVuZ3RoIHwgMFxuICAgIGxlbmd0aCA9IHN3YXBcbiAgfVxuXG4gIHZhciByZW1haW5pbmcgPSB0aGlzLmxlbmd0aCAtIG9mZnNldFxuICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgfHwgbGVuZ3RoID4gcmVtYWluaW5nKSBsZW5ndGggPSByZW1haW5pbmdcblxuICBpZiAoKHN0cmluZy5sZW5ndGggPiAwICYmIChsZW5ndGggPCAwIHx8IG9mZnNldCA8IDApKSB8fCBvZmZzZXQgPiB0aGlzLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdhdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcycpXG4gIH1cblxuICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4J1xuXG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG4gIGZvciAoOzspIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gaGV4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICAgIHJldHVybiB1dGY4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgICByZXR1cm4gYXNjaWlXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gYmluYXJ5V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgICAgLy8gV2FybmluZzogbWF4TGVuZ3RoIG5vdCB0YWtlbiBpbnRvIGFjY291bnQgaW4gYmFzZTY0V3JpdGVcbiAgICAgICAgcmV0dXJuIGJhc2U2NFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiB1Y3MyV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG4gICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG4gICAgfVxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OICgpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAnQnVmZmVyJyxcbiAgICBkYXRhOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9hcnIgfHwgdGhpcywgMClcbiAgfVxufVxuXG5mdW5jdGlvbiBiYXNlNjRTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIGlmIChzdGFydCA9PT0gMCAmJiBlbmQgPT09IGJ1Zi5sZW5ndGgpIHtcbiAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmKVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYuc2xpY2Uoc3RhcnQsIGVuZCkpXG4gIH1cbn1cblxuZnVuY3Rpb24gdXRmOFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuICB2YXIgcmVzID0gW11cblxuICB2YXIgaSA9IHN0YXJ0XG4gIHdoaWxlIChpIDwgZW5kKSB7XG4gICAgdmFyIGZpcnN0Qnl0ZSA9IGJ1ZltpXVxuICAgIHZhciBjb2RlUG9pbnQgPSBudWxsXG4gICAgdmFyIGJ5dGVzUGVyU2VxdWVuY2UgPSAoZmlyc3RCeXRlID4gMHhFRikgPyA0XG4gICAgICA6IChmaXJzdEJ5dGUgPiAweERGKSA/IDNcbiAgICAgIDogKGZpcnN0Qnl0ZSA+IDB4QkYpID8gMlxuICAgICAgOiAxXG5cbiAgICBpZiAoaSArIGJ5dGVzUGVyU2VxdWVuY2UgPD0gZW5kKSB7XG4gICAgICB2YXIgc2Vjb25kQnl0ZSwgdGhpcmRCeXRlLCBmb3VydGhCeXRlLCB0ZW1wQ29kZVBvaW50XG5cbiAgICAgIHN3aXRjaCAoYnl0ZXNQZXJTZXF1ZW5jZSkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgaWYgKGZpcnN0Qnl0ZSA8IDB4ODApIHtcbiAgICAgICAgICAgIGNvZGVQb2ludCA9IGZpcnN0Qnl0ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweDFGKSA8PCAweDYgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpXG4gICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4N0YpIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cbiAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdXG4gICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKHRoaXJkQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHhDIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweDYgfCAodGhpcmRCeXRlICYgMHgzRilcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHg3RkYgJiYgKHRlbXBDb2RlUG9pbnQgPCAweEQ4MDAgfHwgdGVtcENvZGVQb2ludCA+IDB4REZGRikpIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cbiAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdXG4gICAgICAgICAgZm91cnRoQnl0ZSA9IGJ1ZltpICsgM11cbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKGZvdXJ0aEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweEYpIDw8IDB4MTIgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpIDw8IDB4QyB8ICh0aGlyZEJ5dGUgJiAweDNGKSA8PCAweDYgfCAoZm91cnRoQnl0ZSAmIDB4M0YpXG4gICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4RkZGRiAmJiB0ZW1wQ29kZVBvaW50IDwgMHgxMTAwMDApIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY29kZVBvaW50ID09PSBudWxsKSB7XG4gICAgICAvLyB3ZSBkaWQgbm90IGdlbmVyYXRlIGEgdmFsaWQgY29kZVBvaW50IHNvIGluc2VydCBhXG4gICAgICAvLyByZXBsYWNlbWVudCBjaGFyIChVK0ZGRkQpIGFuZCBhZHZhbmNlIG9ubHkgMSBieXRlXG4gICAgICBjb2RlUG9pbnQgPSAweEZGRkRcbiAgICAgIGJ5dGVzUGVyU2VxdWVuY2UgPSAxXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPiAweEZGRkYpIHtcbiAgICAgIC8vIGVuY29kZSB0byB1dGYxNiAoc3Vycm9nYXRlIHBhaXIgZGFuY2UpXG4gICAgICBjb2RlUG9pbnQgLT0gMHgxMDAwMFxuICAgICAgcmVzLnB1c2goY29kZVBvaW50ID4+PiAxMCAmIDB4M0ZGIHwgMHhEODAwKVxuICAgICAgY29kZVBvaW50ID0gMHhEQzAwIHwgY29kZVBvaW50ICYgMHgzRkZcbiAgICB9XG5cbiAgICByZXMucHVzaChjb2RlUG9pbnQpXG4gICAgaSArPSBieXRlc1BlclNlcXVlbmNlXG4gIH1cblxuICByZXR1cm4gZGVjb2RlQ29kZVBvaW50c0FycmF5KHJlcylcbn1cblxuLy8gQmFzZWQgb24gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjI3NDcyNzIvNjgwNzQyLCB0aGUgYnJvd3NlciB3aXRoXG4vLyB0aGUgbG93ZXN0IGxpbWl0IGlzIENocm9tZSwgd2l0aCAweDEwMDAwIGFyZ3MuXG4vLyBXZSBnbyAxIG1hZ25pdHVkZSBsZXNzLCBmb3Igc2FmZXR5XG52YXIgTUFYX0FSR1VNRU5UU19MRU5HVEggPSAweDEwMDBcblxuZnVuY3Rpb24gZGVjb2RlQ29kZVBvaW50c0FycmF5IChjb2RlUG9pbnRzKSB7XG4gIHZhciBsZW4gPSBjb2RlUG9pbnRzLmxlbmd0aFxuICBpZiAobGVuIDw9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKSB7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBjb2RlUG9pbnRzKSAvLyBhdm9pZCBleHRyYSBzbGljZSgpXG4gIH1cblxuICAvLyBEZWNvZGUgaW4gY2h1bmtzIHRvIGF2b2lkIFwiY2FsbCBzdGFjayBzaXplIGV4Y2VlZGVkXCIuXG4gIHZhciByZXMgPSAnJ1xuICB2YXIgaSA9IDBcbiAgd2hpbGUgKGkgPCBsZW4pIHtcbiAgICByZXMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShcbiAgICAgIFN0cmluZyxcbiAgICAgIGNvZGVQb2ludHMuc2xpY2UoaSwgaSArPSBNQVhfQVJHVU1FTlRTX0xFTkdUSClcbiAgICApXG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG5mdW5jdGlvbiBhc2NpaVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHJldCA9ICcnXG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcblxuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykge1xuICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSAmIDB4N0YpXG4gIH1cbiAgcmV0dXJuIHJldFxufVxuXG5mdW5jdGlvbiBiaW5hcnlTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciByZXQgPSAnJ1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0pXG4gIH1cbiAgcmV0dXJuIHJldFxufVxuXG5mdW5jdGlvbiBoZXhTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciBsZW4gPSBidWYubGVuZ3RoXG5cbiAgaWYgKCFzdGFydCB8fCBzdGFydCA8IDApIHN0YXJ0ID0gMFxuICBpZiAoIWVuZCB8fCBlbmQgPCAwIHx8IGVuZCA+IGxlbikgZW5kID0gbGVuXG5cbiAgdmFyIG91dCA9ICcnXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgb3V0ICs9IHRvSGV4KGJ1ZltpXSlcbiAgfVxuICByZXR1cm4gb3V0XG59XG5cbmZ1bmN0aW9uIHV0ZjE2bGVTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciBieXRlcyA9IGJ1Zi5zbGljZShzdGFydCwgZW5kKVxuICB2YXIgcmVzID0gJydcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkgKz0gMikge1xuICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldICsgYnl0ZXNbaSArIDFdICogMjU2KVxuICB9XG4gIHJldHVybiByZXNcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5zbGljZSA9IGZ1bmN0aW9uIHNsaWNlIChzdGFydCwgZW5kKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuICBzdGFydCA9IH5+c3RhcnRcbiAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyBsZW4gOiB+fmVuZFxuXG4gIGlmIChzdGFydCA8IDApIHtcbiAgICBzdGFydCArPSBsZW5cbiAgICBpZiAoc3RhcnQgPCAwKSBzdGFydCA9IDBcbiAgfSBlbHNlIGlmIChzdGFydCA+IGxlbikge1xuICAgIHN0YXJ0ID0gbGVuXG4gIH1cblxuICBpZiAoZW5kIDwgMCkge1xuICAgIGVuZCArPSBsZW5cbiAgICBpZiAoZW5kIDwgMCkgZW5kID0gMFxuICB9IGVsc2UgaWYgKGVuZCA+IGxlbikge1xuICAgIGVuZCA9IGxlblxuICB9XG5cbiAgaWYgKGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydFxuXG4gIHZhciBuZXdCdWZcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgbmV3QnVmID0gQnVmZmVyLl9hdWdtZW50KHRoaXMuc3ViYXJyYXkoc3RhcnQsIGVuZCkpXG4gIH0gZWxzZSB7XG4gICAgdmFyIHNsaWNlTGVuID0gZW5kIC0gc3RhcnRcbiAgICBuZXdCdWYgPSBuZXcgQnVmZmVyKHNsaWNlTGVuLCB1bmRlZmluZWQpXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzbGljZUxlbjsgaSsrKSB7XG4gICAgICBuZXdCdWZbaV0gPSB0aGlzW2kgKyBzdGFydF1cbiAgICB9XG4gIH1cblxuICBpZiAobmV3QnVmLmxlbmd0aCkgbmV3QnVmLnBhcmVudCA9IHRoaXMucGFyZW50IHx8IHRoaXNcblxuICByZXR1cm4gbmV3QnVmXG59XG5cbi8qXG4gKiBOZWVkIHRvIG1ha2Ugc3VyZSB0aGF0IGJ1ZmZlciBpc24ndCB0cnlpbmcgdG8gd3JpdGUgb3V0IG9mIGJvdW5kcy5cbiAqL1xuZnVuY3Rpb24gY2hlY2tPZmZzZXQgKG9mZnNldCwgZXh0LCBsZW5ndGgpIHtcbiAgaWYgKChvZmZzZXQgJSAxKSAhPT0gMCB8fCBvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignb2Zmc2V0IGlzIG5vdCB1aW50JylcbiAgaWYgKG9mZnNldCArIGV4dCA+IGxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50TEUgPSBmdW5jdGlvbiByZWFkVUludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XVxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bFxuICB9XG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50QkUgPSBmdW5jdGlvbiByZWFkVUludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuICB9XG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXVxuICB2YXIgbXVsID0gMVxuICB3aGlsZSAoYnl0ZUxlbmd0aCA+IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdICogbXVsXG4gIH1cblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQ4ID0gZnVuY3Rpb24gcmVhZFVJbnQ4IChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiB0aGlzW29mZnNldF1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2TEUgPSBmdW5jdGlvbiByZWFkVUludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkJFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDgpIHwgdGhpc1tvZmZzZXQgKyAxXVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAoKHRoaXNbb2Zmc2V0XSkgfFxuICAgICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfFxuICAgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpKSArXG4gICAgICAodGhpc1tvZmZzZXQgKyAzXSAqIDB4MTAwMDAwMClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyQkUgPSBmdW5jdGlvbiByZWFkVUludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSAqIDB4MTAwMDAwMCkgK1xuICAgICgodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHxcbiAgICB0aGlzW29mZnNldCArIDNdKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnRMRSA9IGZ1bmN0aW9uIHJlYWRJbnRMRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF1cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaV0gKiBtdWxcbiAgfVxuICBtdWwgKj0gMHg4MFxuXG4gIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpXG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnRCRSA9IGZ1bmN0aW9uIHJlYWRJbnRCRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aFxuICB2YXIgbXVsID0gMVxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWldXG4gIHdoaWxlIChpID4gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0taV0gKiBtdWxcbiAgfVxuICBtdWwgKj0gMHg4MFxuXG4gIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpXG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQ4ID0gZnVuY3Rpb24gcmVhZEludDggKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aClcbiAgaWYgKCEodGhpc1tvZmZzZXRdICYgMHg4MCkpIHJldHVybiAodGhpc1tvZmZzZXRdKVxuICByZXR1cm4gKCgweGZmIC0gdGhpc1tvZmZzZXRdICsgMSkgKiAtMSlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KVxuICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2QkUgPSBmdW5jdGlvbiByZWFkSW50MTZCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAxXSB8ICh0aGlzW29mZnNldF0gPDwgOClcbiAgcmV0dXJuICh2YWwgJiAweDgwMDApID8gdmFsIHwgMHhGRkZGMDAwMCA6IHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkxFID0gZnVuY3Rpb24gcmVhZEludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSkgfFxuICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDNdIDw8IDI0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkJFID0gZnVuY3Rpb24gcmVhZEludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCAyNCkgfFxuICAgICh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfFxuICAgICh0aGlzW29mZnNldCArIDNdKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdExFID0gZnVuY3Rpb24gcmVhZEZsb2F0TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDIzLCA0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdEJFID0gZnVuY3Rpb24gcmVhZEZsb2F0QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIGZhbHNlLCAyMywgNClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlTEUgPSBmdW5jdGlvbiByZWFkRG91YmxlTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDUyLCA4KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVCRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDUyLCA4KVxufVxuXG5mdW5jdGlvbiBjaGVja0ludCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ2J1ZmZlciBtdXN0IGJlIGEgQnVmZmVyIGluc3RhbmNlJylcbiAgaWYgKHZhbHVlID4gbWF4IHx8IHZhbHVlIDwgbWluKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndmFsdWUgaXMgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignaW5kZXggb3V0IG9mIHJhbmdlJylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlVUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCksIDApXG5cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlVUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCksIDApXG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoIC0gMVxuICB2YXIgbXVsID0gMVxuICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgtLWkgPj0gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVVSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweGZmLCAwKVxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHJldHVybiBvZmZzZXQgKyAxXG59XG5cbmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDE2IChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZiArIHZhbHVlICsgMVxuICBmb3IgKHZhciBpID0gMCwgaiA9IE1hdGgubWluKGJ1Zi5sZW5ndGggLSBvZmZzZXQsIDIpOyBpIDwgajsgaSsrKSB7XG4gICAgYnVmW29mZnNldCArIGldID0gKHZhbHVlICYgKDB4ZmYgPDwgKDggKiAobGl0dGxlRW5kaWFuID8gaSA6IDEgLSBpKSkpKSA+Pj5cbiAgICAgIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpICogOFxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHhmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDMyIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDFcbiAgZm9yICh2YXIgaSA9IDAsIGogPSBNYXRoLm1pbihidWYubGVuZ3RoIC0gb2Zmc2V0LCA0KTsgaSA8IGo7IGkrKykge1xuICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSA+Pj4gKGxpdHRsZUVuZGlhbiA/IGkgOiAzIC0gaSkgKiA4KSAmIDB4ZmZcbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSlcblxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KVxuICB9XG5cbiAgdmFyIGkgPSAwXG4gIHZhciBtdWwgPSAxXG4gIHZhciBzdWIgPSB2YWx1ZSA8IDAgPyAxIDogMFxuICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50QkUgPSBmdW5jdGlvbiB3cml0ZUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpXG5cbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdClcbiAgfVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aCAtIDFcbiAgdmFyIG11bCA9IDFcbiAgdmFyIHN1YiA9IHZhbHVlIDwgMCA/IDEgOiAwXG4gIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDggPSBmdW5jdGlvbiB3cml0ZUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHg3ZiwgLTB4ODApXG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSlcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmICsgdmFsdWUgKyAxXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHJldHVybiBvZmZzZXQgKyAxXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVJbnQxNkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlID4+PiAyNClcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVJbnQzMkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKVxuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDFcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbmZ1bmN0aW9uIGNoZWNrSUVFRTc1NCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG4gIGlmICh2YWx1ZSA+IG1heCB8fCB2YWx1ZSA8IG1pbikgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3ZhbHVlIGlzIG91dCBvZiBib3VuZHMnKVxuICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2luZGV4IG91dCBvZiByYW5nZScpXG4gIGlmIChvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignaW5kZXggb3V0IG9mIHJhbmdlJylcbn1cblxuZnVuY3Rpb24gd3JpdGVGbG9hdCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA0LCAzLjQwMjgyMzQ2NjM4NTI4ODZlKzM4LCAtMy40MDI4MjM0NjYzODUyODg2ZSszOClcbiAgfVxuICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCAyMywgNClcbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0TEUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRCRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KVxufVxuXG5mdW5jdGlvbiB3cml0ZURvdWJsZSAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA4LCAxLjc5NzY5MzEzNDg2MjMxNTdFKzMwOCwgLTEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4KVxuICB9XG4gIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDUyLCA4KVxuICByZXR1cm4gb2Zmc2V0ICsgOFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlTEUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVCRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpXG59XG5cbi8vIGNvcHkodGFyZ2V0QnVmZmVyLCB0YXJnZXRTdGFydD0wLCBzb3VyY2VTdGFydD0wLCBzb3VyY2VFbmQ9YnVmZmVyLmxlbmd0aClcbkJ1ZmZlci5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIGNvcHkgKHRhcmdldCwgdGFyZ2V0U3RhcnQsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKCFzdGFydCkgc3RhcnQgPSAwXG4gIGlmICghZW5kICYmIGVuZCAhPT0gMCkgZW5kID0gdGhpcy5sZW5ndGhcbiAgaWYgKHRhcmdldFN0YXJ0ID49IHRhcmdldC5sZW5ndGgpIHRhcmdldFN0YXJ0ID0gdGFyZ2V0Lmxlbmd0aFxuICBpZiAoIXRhcmdldFN0YXJ0KSB0YXJnZXRTdGFydCA9IDBcbiAgaWYgKGVuZCA+IDAgJiYgZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0XG5cbiAgLy8gQ29weSAwIGJ5dGVzOyB3ZSdyZSBkb25lXG4gIGlmIChlbmQgPT09IHN0YXJ0KSByZXR1cm4gMFxuICBpZiAodGFyZ2V0Lmxlbmd0aCA9PT0gMCB8fCB0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDBcblxuICAvLyBGYXRhbCBlcnJvciBjb25kaXRpb25zXG4gIGlmICh0YXJnZXRTdGFydCA8IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndGFyZ2V0U3RhcnQgb3V0IG9mIGJvdW5kcycpXG4gIH1cbiAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZVN0YXJ0IG91dCBvZiBib3VuZHMnKVxuICBpZiAoZW5kIDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZUVuZCBvdXQgb2YgYm91bmRzJylcblxuICAvLyBBcmUgd2Ugb29iP1xuICBpZiAoZW5kID4gdGhpcy5sZW5ndGgpIGVuZCA9IHRoaXMubGVuZ3RoXG4gIGlmICh0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgPCBlbmQgLSBzdGFydCkge1xuICAgIGVuZCA9IHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCArIHN0YXJ0XG4gIH1cblxuICB2YXIgbGVuID0gZW5kIC0gc3RhcnRcbiAgdmFyIGlcblxuICBpZiAodGhpcyA9PT0gdGFyZ2V0ICYmIHN0YXJ0IDwgdGFyZ2V0U3RhcnQgJiYgdGFyZ2V0U3RhcnQgPCBlbmQpIHtcbiAgICAvLyBkZXNjZW5kaW5nIGNvcHkgZnJvbSBlbmRcbiAgICBmb3IgKGkgPSBsZW4gLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgdGFyZ2V0W2kgKyB0YXJnZXRTdGFydF0gPSB0aGlzW2kgKyBzdGFydF1cbiAgICB9XG4gIH0gZWxzZSBpZiAobGVuIDwgMTAwMCB8fCAhQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICAvLyBhc2NlbmRpbmcgY29weSBmcm9tIHN0YXJ0XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB0YXJnZXRbaSArIHRhcmdldFN0YXJ0XSA9IHRoaXNbaSArIHN0YXJ0XVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0YXJnZXQuX3NldCh0aGlzLnN1YmFycmF5KHN0YXJ0LCBzdGFydCArIGxlbiksIHRhcmdldFN0YXJ0KVxuICB9XG5cbiAgcmV0dXJuIGxlblxufVxuXG4vLyBmaWxsKHZhbHVlLCBzdGFydD0wLCBlbmQ9YnVmZmVyLmxlbmd0aClcbkJ1ZmZlci5wcm90b3R5cGUuZmlsbCA9IGZ1bmN0aW9uIGZpbGwgKHZhbHVlLCBzdGFydCwgZW5kKSB7XG4gIGlmICghdmFsdWUpIHZhbHVlID0gMFxuICBpZiAoIXN0YXJ0KSBzdGFydCA9IDBcbiAgaWYgKCFlbmQpIGVuZCA9IHRoaXMubGVuZ3RoXG5cbiAgaWYgKGVuZCA8IHN0YXJ0KSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignZW5kIDwgc3RhcnQnKVxuXG4gIC8vIEZpbGwgMCBieXRlczsgd2UncmUgZG9uZVxuICBpZiAoZW5kID09PSBzdGFydCkgcmV0dXJuXG4gIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuXG5cbiAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3N0YXJ0IG91dCBvZiBib3VuZHMnKVxuICBpZiAoZW5kIDwgMCB8fCBlbmQgPiB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2VuZCBvdXQgb2YgYm91bmRzJylcblxuICB2YXIgaVxuICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICAgIHRoaXNbaV0gPSB2YWx1ZVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YXIgYnl0ZXMgPSB1dGY4VG9CeXRlcyh2YWx1ZS50b1N0cmluZygpKVxuICAgIHZhciBsZW4gPSBieXRlcy5sZW5ndGhcbiAgICBmb3IgKGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgICB0aGlzW2ldID0gYnl0ZXNbaSAlIGxlbl1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpc1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgYEFycmF5QnVmZmVyYCB3aXRoIHRoZSAqY29waWVkKiBtZW1vcnkgb2YgdGhlIGJ1ZmZlciBpbnN0YW5jZS5cbiAqIEFkZGVkIGluIE5vZGUgMC4xMi4gT25seSBhdmFpbGFibGUgaW4gYnJvd3NlcnMgdGhhdCBzdXBwb3J0IEFycmF5QnVmZmVyLlxuICovXG5CdWZmZXIucHJvdG90eXBlLnRvQXJyYXlCdWZmZXIgPSBmdW5jdGlvbiB0b0FycmF5QnVmZmVyICgpIHtcbiAgaWYgKHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJykge1xuICAgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgICAgcmV0dXJuIChuZXcgQnVmZmVyKHRoaXMpKS5idWZmZXJcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGJ1ZiA9IG5ldyBVaW50OEFycmF5KHRoaXMubGVuZ3RoKVxuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGJ1Zi5sZW5ndGg7IGkgPCBsZW47IGkgKz0gMSkge1xuICAgICAgICBidWZbaV0gPSB0aGlzW2ldXG4gICAgICB9XG4gICAgICByZXR1cm4gYnVmLmJ1ZmZlclxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdCdWZmZXIudG9BcnJheUJ1ZmZlciBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlcicpXG4gIH1cbn1cblxuLy8gSEVMUEVSIEZVTkNUSU9OU1xuLy8gPT09PT09PT09PT09PT09PVxuXG52YXIgQlAgPSBCdWZmZXIucHJvdG90eXBlXG5cbi8qKlxuICogQXVnbWVudCBhIFVpbnQ4QXJyYXkgKmluc3RhbmNlKiAobm90IHRoZSBVaW50OEFycmF5IGNsYXNzISkgd2l0aCBCdWZmZXIgbWV0aG9kc1xuICovXG5CdWZmZXIuX2F1Z21lbnQgPSBmdW5jdGlvbiBfYXVnbWVudCAoYXJyKSB7XG4gIGFyci5jb25zdHJ1Y3RvciA9IEJ1ZmZlclxuICBhcnIuX2lzQnVmZmVyID0gdHJ1ZVxuXG4gIC8vIHNhdmUgcmVmZXJlbmNlIHRvIG9yaWdpbmFsIFVpbnQ4QXJyYXkgc2V0IG1ldGhvZCBiZWZvcmUgb3ZlcndyaXRpbmdcbiAgYXJyLl9zZXQgPSBhcnIuc2V0XG5cbiAgLy8gZGVwcmVjYXRlZFxuICBhcnIuZ2V0ID0gQlAuZ2V0XG4gIGFyci5zZXQgPSBCUC5zZXRcblxuICBhcnIud3JpdGUgPSBCUC53cml0ZVxuICBhcnIudG9TdHJpbmcgPSBCUC50b1N0cmluZ1xuICBhcnIudG9Mb2NhbGVTdHJpbmcgPSBCUC50b1N0cmluZ1xuICBhcnIudG9KU09OID0gQlAudG9KU09OXG4gIGFyci5lcXVhbHMgPSBCUC5lcXVhbHNcbiAgYXJyLmNvbXBhcmUgPSBCUC5jb21wYXJlXG4gIGFyci5pbmRleE9mID0gQlAuaW5kZXhPZlxuICBhcnIuY29weSA9IEJQLmNvcHlcbiAgYXJyLnNsaWNlID0gQlAuc2xpY2VcbiAgYXJyLnJlYWRVSW50TEUgPSBCUC5yZWFkVUludExFXG4gIGFyci5yZWFkVUludEJFID0gQlAucmVhZFVJbnRCRVxuICBhcnIucmVhZFVJbnQ4ID0gQlAucmVhZFVJbnQ4XG4gIGFyci5yZWFkVUludDE2TEUgPSBCUC5yZWFkVUludDE2TEVcbiAgYXJyLnJlYWRVSW50MTZCRSA9IEJQLnJlYWRVSW50MTZCRVxuICBhcnIucmVhZFVJbnQzMkxFID0gQlAucmVhZFVJbnQzMkxFXG4gIGFyci5yZWFkVUludDMyQkUgPSBCUC5yZWFkVUludDMyQkVcbiAgYXJyLnJlYWRJbnRMRSA9IEJQLnJlYWRJbnRMRVxuICBhcnIucmVhZEludEJFID0gQlAucmVhZEludEJFXG4gIGFyci5yZWFkSW50OCA9IEJQLnJlYWRJbnQ4XG4gIGFyci5yZWFkSW50MTZMRSA9IEJQLnJlYWRJbnQxNkxFXG4gIGFyci5yZWFkSW50MTZCRSA9IEJQLnJlYWRJbnQxNkJFXG4gIGFyci5yZWFkSW50MzJMRSA9IEJQLnJlYWRJbnQzMkxFXG4gIGFyci5yZWFkSW50MzJCRSA9IEJQLnJlYWRJbnQzMkJFXG4gIGFyci5yZWFkRmxvYXRMRSA9IEJQLnJlYWRGbG9hdExFXG4gIGFyci5yZWFkRmxvYXRCRSA9IEJQLnJlYWRGbG9hdEJFXG4gIGFyci5yZWFkRG91YmxlTEUgPSBCUC5yZWFkRG91YmxlTEVcbiAgYXJyLnJlYWREb3VibGVCRSA9IEJQLnJlYWREb3VibGVCRVxuICBhcnIud3JpdGVVSW50OCA9IEJQLndyaXRlVUludDhcbiAgYXJyLndyaXRlVUludExFID0gQlAud3JpdGVVSW50TEVcbiAgYXJyLndyaXRlVUludEJFID0gQlAud3JpdGVVSW50QkVcbiAgYXJyLndyaXRlVUludDE2TEUgPSBCUC53cml0ZVVJbnQxNkxFXG4gIGFyci53cml0ZVVJbnQxNkJFID0gQlAud3JpdGVVSW50MTZCRVxuICBhcnIud3JpdGVVSW50MzJMRSA9IEJQLndyaXRlVUludDMyTEVcbiAgYXJyLndyaXRlVUludDMyQkUgPSBCUC53cml0ZVVJbnQzMkJFXG4gIGFyci53cml0ZUludExFID0gQlAud3JpdGVJbnRMRVxuICBhcnIud3JpdGVJbnRCRSA9IEJQLndyaXRlSW50QkVcbiAgYXJyLndyaXRlSW50OCA9IEJQLndyaXRlSW50OFxuICBhcnIud3JpdGVJbnQxNkxFID0gQlAud3JpdGVJbnQxNkxFXG4gIGFyci53cml0ZUludDE2QkUgPSBCUC53cml0ZUludDE2QkVcbiAgYXJyLndyaXRlSW50MzJMRSA9IEJQLndyaXRlSW50MzJMRVxuICBhcnIud3JpdGVJbnQzMkJFID0gQlAud3JpdGVJbnQzMkJFXG4gIGFyci53cml0ZUZsb2F0TEUgPSBCUC53cml0ZUZsb2F0TEVcbiAgYXJyLndyaXRlRmxvYXRCRSA9IEJQLndyaXRlRmxvYXRCRVxuICBhcnIud3JpdGVEb3VibGVMRSA9IEJQLndyaXRlRG91YmxlTEVcbiAgYXJyLndyaXRlRG91YmxlQkUgPSBCUC53cml0ZURvdWJsZUJFXG4gIGFyci5maWxsID0gQlAuZmlsbFxuICBhcnIuaW5zcGVjdCA9IEJQLmluc3BlY3RcbiAgYXJyLnRvQXJyYXlCdWZmZXIgPSBCUC50b0FycmF5QnVmZmVyXG5cbiAgcmV0dXJuIGFyclxufVxuXG52YXIgSU5WQUxJRF9CQVNFNjRfUkUgPSAvW14rXFwvMC05QS1aYS16LV9dL2dcblxuZnVuY3Rpb24gYmFzZTY0Y2xlYW4gKHN0cikge1xuICAvLyBOb2RlIHN0cmlwcyBvdXQgaW52YWxpZCBjaGFyYWN0ZXJzIGxpa2UgXFxuIGFuZCBcXHQgZnJvbSB0aGUgc3RyaW5nLCBiYXNlNjQtanMgZG9lcyBub3RcbiAgc3RyID0gc3RyaW5ndHJpbShzdHIpLnJlcGxhY2UoSU5WQUxJRF9CQVNFNjRfUkUsICcnKVxuICAvLyBOb2RlIGNvbnZlcnRzIHN0cmluZ3Mgd2l0aCBsZW5ndGggPCAyIHRvICcnXG4gIGlmIChzdHIubGVuZ3RoIDwgMikgcmV0dXJuICcnXG4gIC8vIE5vZGUgYWxsb3dzIGZvciBub24tcGFkZGVkIGJhc2U2NCBzdHJpbmdzIChtaXNzaW5nIHRyYWlsaW5nID09PSksIGJhc2U2NC1qcyBkb2VzIG5vdFxuICB3aGlsZSAoc3RyLmxlbmd0aCAlIDQgIT09IDApIHtcbiAgICBzdHIgPSBzdHIgKyAnPSdcbiAgfVxuICByZXR1cm4gc3RyXG59XG5cbmZ1bmN0aW9uIHN0cmluZ3RyaW0gKHN0cikge1xuICBpZiAoc3RyLnRyaW0pIHJldHVybiBzdHIudHJpbSgpXG4gIHJldHVybiBzdHIucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpXG59XG5cbmZ1bmN0aW9uIHRvSGV4IChuKSB7XG4gIGlmIChuIDwgMTYpIHJldHVybiAnMCcgKyBuLnRvU3RyaW5nKDE2KVxuICByZXR1cm4gbi50b1N0cmluZygxNilcbn1cblxuZnVuY3Rpb24gdXRmOFRvQnl0ZXMgKHN0cmluZywgdW5pdHMpIHtcbiAgdW5pdHMgPSB1bml0cyB8fCBJbmZpbml0eVxuICB2YXIgY29kZVBvaW50XG4gIHZhciBsZW5ndGggPSBzdHJpbmcubGVuZ3RoXG4gIHZhciBsZWFkU3Vycm9nYXRlID0gbnVsbFxuICB2YXIgYnl0ZXMgPSBbXVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBjb2RlUG9pbnQgPSBzdHJpbmcuY2hhckNvZGVBdChpKVxuXG4gICAgLy8gaXMgc3Vycm9nYXRlIGNvbXBvbmVudFxuICAgIGlmIChjb2RlUG9pbnQgPiAweEQ3RkYgJiYgY29kZVBvaW50IDwgMHhFMDAwKSB7XG4gICAgICAvLyBsYXN0IGNoYXIgd2FzIGEgbGVhZFxuICAgICAgaWYgKCFsZWFkU3Vycm9nYXRlKSB7XG4gICAgICAgIC8vIG5vIGxlYWQgeWV0XG4gICAgICAgIGlmIChjb2RlUG9pbnQgPiAweERCRkYpIHtcbiAgICAgICAgICAvLyB1bmV4cGVjdGVkIHRyYWlsXG4gICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfSBlbHNlIGlmIChpICsgMSA9PT0gbGVuZ3RoKSB7XG4gICAgICAgICAgLy8gdW5wYWlyZWQgbGVhZFxuICAgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cblxuICAgICAgICAvLyB2YWxpZCBsZWFkXG4gICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnRcblxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICAvLyAyIGxlYWRzIGluIGEgcm93XG4gICAgICBpZiAoY29kZVBvaW50IDwgMHhEQzAwKSB7XG4gICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICBsZWFkU3Vycm9nYXRlID0gY29kZVBvaW50XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIC8vIHZhbGlkIHN1cnJvZ2F0ZSBwYWlyXG4gICAgICBjb2RlUG9pbnQgPSAobGVhZFN1cnJvZ2F0ZSAtIDB4RDgwMCA8PCAxMCB8IGNvZGVQb2ludCAtIDB4REMwMCkgKyAweDEwMDAwXG4gICAgfSBlbHNlIGlmIChsZWFkU3Vycm9nYXRlKSB7XG4gICAgICAvLyB2YWxpZCBibXAgY2hhciwgYnV0IGxhc3QgY2hhciB3YXMgYSBsZWFkXG4gICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICB9XG5cbiAgICBsZWFkU3Vycm9nYXRlID0gbnVsbFxuXG4gICAgLy8gZW5jb2RlIHV0ZjhcbiAgICBpZiAoY29kZVBvaW50IDwgMHg4MCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAxKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKGNvZGVQb2ludClcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4ODAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgfCAweEMwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHgxMDAwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAzKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHhDIHwgMHhFMCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHgxMTAwMDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gNCkgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4MTIgfCAweEYwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHhDICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcbiAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvZGUgcG9pbnQnKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBieXRlc1xufVxuXG5mdW5jdGlvbiBhc2NpaVRvQnl0ZXMgKHN0cikge1xuICB2YXIgYnl0ZUFycmF5ID0gW11cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAvLyBOb2RlJ3MgY29kZSBzZWVtcyB0byBiZSBkb2luZyB0aGlzIGFuZCBub3QgJiAweDdGLi5cbiAgICBieXRlQXJyYXkucHVzaChzdHIuY2hhckNvZGVBdChpKSAmIDB4RkYpXG4gIH1cbiAgcmV0dXJuIGJ5dGVBcnJheVxufVxuXG5mdW5jdGlvbiB1dGYxNmxlVG9CeXRlcyAoc3RyLCB1bml0cykge1xuICB2YXIgYywgaGksIGxvXG4gIHZhciBieXRlQXJyYXkgPSBbXVxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgIGlmICgodW5pdHMgLT0gMikgPCAwKSBicmVha1xuXG4gICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpXG4gICAgaGkgPSBjID4+IDhcbiAgICBsbyA9IGMgJSAyNTZcbiAgICBieXRlQXJyYXkucHVzaChsbylcbiAgICBieXRlQXJyYXkucHVzaChoaSlcbiAgfVxuXG4gIHJldHVybiBieXRlQXJyYXlcbn1cblxuZnVuY3Rpb24gYmFzZTY0VG9CeXRlcyAoc3RyKSB7XG4gIHJldHVybiBiYXNlNjQudG9CeXRlQXJyYXkoYmFzZTY0Y2xlYW4oc3RyKSlcbn1cblxuZnVuY3Rpb24gYmxpdEJ1ZmZlciAoc3JjLCBkc3QsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoKGkgKyBvZmZzZXQgPj0gZHN0Lmxlbmd0aCkgfHwgKGkgPj0gc3JjLmxlbmd0aCkpIGJyZWFrXG4gICAgZHN0W2kgKyBvZmZzZXRdID0gc3JjW2ldXG4gIH1cbiAgcmV0dXJuIGlcbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2J1ZmZlci9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDMyXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJ2YXIgbG9va3VwID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nO1xuXG47KGZ1bmN0aW9uIChleHBvcnRzKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuICB2YXIgQXJyID0gKHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJylcbiAgICA/IFVpbnQ4QXJyYXlcbiAgICA6IEFycmF5XG5cblx0dmFyIFBMVVMgICA9ICcrJy5jaGFyQ29kZUF0KDApXG5cdHZhciBTTEFTSCAgPSAnLycuY2hhckNvZGVBdCgwKVxuXHR2YXIgTlVNQkVSID0gJzAnLmNoYXJDb2RlQXQoMClcblx0dmFyIExPV0VSICA9ICdhJy5jaGFyQ29kZUF0KDApXG5cdHZhciBVUFBFUiAgPSAnQScuY2hhckNvZGVBdCgwKVxuXHR2YXIgUExVU19VUkxfU0FGRSA9ICctJy5jaGFyQ29kZUF0KDApXG5cdHZhciBTTEFTSF9VUkxfU0FGRSA9ICdfJy5jaGFyQ29kZUF0KDApXG5cblx0ZnVuY3Rpb24gZGVjb2RlIChlbHQpIHtcblx0XHR2YXIgY29kZSA9IGVsdC5jaGFyQ29kZUF0KDApXG5cdFx0aWYgKGNvZGUgPT09IFBMVVMgfHxcblx0XHQgICAgY29kZSA9PT0gUExVU19VUkxfU0FGRSlcblx0XHRcdHJldHVybiA2MiAvLyAnKydcblx0XHRpZiAoY29kZSA9PT0gU0xBU0ggfHxcblx0XHQgICAgY29kZSA9PT0gU0xBU0hfVVJMX1NBRkUpXG5cdFx0XHRyZXR1cm4gNjMgLy8gJy8nXG5cdFx0aWYgKGNvZGUgPCBOVU1CRVIpXG5cdFx0XHRyZXR1cm4gLTEgLy9ubyBtYXRjaFxuXHRcdGlmIChjb2RlIDwgTlVNQkVSICsgMTApXG5cdFx0XHRyZXR1cm4gY29kZSAtIE5VTUJFUiArIDI2ICsgMjZcblx0XHRpZiAoY29kZSA8IFVQUEVSICsgMjYpXG5cdFx0XHRyZXR1cm4gY29kZSAtIFVQUEVSXG5cdFx0aWYgKGNvZGUgPCBMT1dFUiArIDI2KVxuXHRcdFx0cmV0dXJuIGNvZGUgLSBMT1dFUiArIDI2XG5cdH1cblxuXHRmdW5jdGlvbiBiNjRUb0J5dGVBcnJheSAoYjY0KSB7XG5cdFx0dmFyIGksIGosIGwsIHRtcCwgcGxhY2VIb2xkZXJzLCBhcnJcblxuXHRcdGlmIChiNjQubGVuZ3RoICUgNCA+IDApIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzdHJpbmcuIExlbmd0aCBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNCcpXG5cdFx0fVxuXG5cdFx0Ly8gdGhlIG51bWJlciBvZiBlcXVhbCBzaWducyAocGxhY2UgaG9sZGVycylcblx0XHQvLyBpZiB0aGVyZSBhcmUgdHdvIHBsYWNlaG9sZGVycywgdGhhbiB0aGUgdHdvIGNoYXJhY3RlcnMgYmVmb3JlIGl0XG5cdFx0Ly8gcmVwcmVzZW50IG9uZSBieXRlXG5cdFx0Ly8gaWYgdGhlcmUgaXMgb25seSBvbmUsIHRoZW4gdGhlIHRocmVlIGNoYXJhY3RlcnMgYmVmb3JlIGl0IHJlcHJlc2VudCAyIGJ5dGVzXG5cdFx0Ly8gdGhpcyBpcyBqdXN0IGEgY2hlYXAgaGFjayB0byBub3QgZG8gaW5kZXhPZiB0d2ljZVxuXHRcdHZhciBsZW4gPSBiNjQubGVuZ3RoXG5cdFx0cGxhY2VIb2xkZXJzID0gJz0nID09PSBiNjQuY2hhckF0KGxlbiAtIDIpID8gMiA6ICc9JyA9PT0gYjY0LmNoYXJBdChsZW4gLSAxKSA/IDEgOiAwXG5cblx0XHQvLyBiYXNlNjQgaXMgNC8zICsgdXAgdG8gdHdvIGNoYXJhY3RlcnMgb2YgdGhlIG9yaWdpbmFsIGRhdGFcblx0XHRhcnIgPSBuZXcgQXJyKGI2NC5sZW5ndGggKiAzIC8gNCAtIHBsYWNlSG9sZGVycylcblxuXHRcdC8vIGlmIHRoZXJlIGFyZSBwbGFjZWhvbGRlcnMsIG9ubHkgZ2V0IHVwIHRvIHRoZSBsYXN0IGNvbXBsZXRlIDQgY2hhcnNcblx0XHRsID0gcGxhY2VIb2xkZXJzID4gMCA/IGI2NC5sZW5ndGggLSA0IDogYjY0Lmxlbmd0aFxuXG5cdFx0dmFyIEwgPSAwXG5cblx0XHRmdW5jdGlvbiBwdXNoICh2KSB7XG5cdFx0XHRhcnJbTCsrXSA9IHZcblx0XHR9XG5cblx0XHRmb3IgKGkgPSAwLCBqID0gMDsgaSA8IGw7IGkgKz0gNCwgaiArPSAzKSB7XG5cdFx0XHR0bXAgPSAoZGVjb2RlKGI2NC5jaGFyQXQoaSkpIDw8IDE4KSB8IChkZWNvZGUoYjY0LmNoYXJBdChpICsgMSkpIDw8IDEyKSB8IChkZWNvZGUoYjY0LmNoYXJBdChpICsgMikpIDw8IDYpIHwgZGVjb2RlKGI2NC5jaGFyQXQoaSArIDMpKVxuXHRcdFx0cHVzaCgodG1wICYgMHhGRjAwMDApID4+IDE2KVxuXHRcdFx0cHVzaCgodG1wICYgMHhGRjAwKSA+PiA4KVxuXHRcdFx0cHVzaCh0bXAgJiAweEZGKVxuXHRcdH1cblxuXHRcdGlmIChwbGFjZUhvbGRlcnMgPT09IDIpIHtcblx0XHRcdHRtcCA9IChkZWNvZGUoYjY0LmNoYXJBdChpKSkgPDwgMikgfCAoZGVjb2RlKGI2NC5jaGFyQXQoaSArIDEpKSA+PiA0KVxuXHRcdFx0cHVzaCh0bXAgJiAweEZGKVxuXHRcdH0gZWxzZSBpZiAocGxhY2VIb2xkZXJzID09PSAxKSB7XG5cdFx0XHR0bXAgPSAoZGVjb2RlKGI2NC5jaGFyQXQoaSkpIDw8IDEwKSB8IChkZWNvZGUoYjY0LmNoYXJBdChpICsgMSkpIDw8IDQpIHwgKGRlY29kZShiNjQuY2hhckF0KGkgKyAyKSkgPj4gMilcblx0XHRcdHB1c2goKHRtcCA+PiA4KSAmIDB4RkYpXG5cdFx0XHRwdXNoKHRtcCAmIDB4RkYpXG5cdFx0fVxuXG5cdFx0cmV0dXJuIGFyclxuXHR9XG5cblx0ZnVuY3Rpb24gdWludDhUb0Jhc2U2NCAodWludDgpIHtcblx0XHR2YXIgaSxcblx0XHRcdGV4dHJhQnl0ZXMgPSB1aW50OC5sZW5ndGggJSAzLCAvLyBpZiB3ZSBoYXZlIDEgYnl0ZSBsZWZ0LCBwYWQgMiBieXRlc1xuXHRcdFx0b3V0cHV0ID0gXCJcIixcblx0XHRcdHRlbXAsIGxlbmd0aFxuXG5cdFx0ZnVuY3Rpb24gZW5jb2RlIChudW0pIHtcblx0XHRcdHJldHVybiBsb29rdXAuY2hhckF0KG51bSlcblx0XHR9XG5cblx0XHRmdW5jdGlvbiB0cmlwbGV0VG9CYXNlNjQgKG51bSkge1xuXHRcdFx0cmV0dXJuIGVuY29kZShudW0gPj4gMTggJiAweDNGKSArIGVuY29kZShudW0gPj4gMTIgJiAweDNGKSArIGVuY29kZShudW0gPj4gNiAmIDB4M0YpICsgZW5jb2RlKG51bSAmIDB4M0YpXG5cdFx0fVxuXG5cdFx0Ly8gZ28gdGhyb3VnaCB0aGUgYXJyYXkgZXZlcnkgdGhyZWUgYnl0ZXMsIHdlJ2xsIGRlYWwgd2l0aCB0cmFpbGluZyBzdHVmZiBsYXRlclxuXHRcdGZvciAoaSA9IDAsIGxlbmd0aCA9IHVpbnQ4Lmxlbmd0aCAtIGV4dHJhQnl0ZXM7IGkgPCBsZW5ndGg7IGkgKz0gMykge1xuXHRcdFx0dGVtcCA9ICh1aW50OFtpXSA8PCAxNikgKyAodWludDhbaSArIDFdIDw8IDgpICsgKHVpbnQ4W2kgKyAyXSlcblx0XHRcdG91dHB1dCArPSB0cmlwbGV0VG9CYXNlNjQodGVtcClcblx0XHR9XG5cblx0XHQvLyBwYWQgdGhlIGVuZCB3aXRoIHplcm9zLCBidXQgbWFrZSBzdXJlIHRvIG5vdCBmb3JnZXQgdGhlIGV4dHJhIGJ5dGVzXG5cdFx0c3dpdGNoIChleHRyYUJ5dGVzKSB7XG5cdFx0XHRjYXNlIDE6XG5cdFx0XHRcdHRlbXAgPSB1aW50OFt1aW50OC5sZW5ndGggLSAxXVxuXHRcdFx0XHRvdXRwdXQgKz0gZW5jb2RlKHRlbXAgPj4gMilcblx0XHRcdFx0b3V0cHV0ICs9IGVuY29kZSgodGVtcCA8PCA0KSAmIDB4M0YpXG5cdFx0XHRcdG91dHB1dCArPSAnPT0nXG5cdFx0XHRcdGJyZWFrXG5cdFx0XHRjYXNlIDI6XG5cdFx0XHRcdHRlbXAgPSAodWludDhbdWludDgubGVuZ3RoIC0gMl0gPDwgOCkgKyAodWludDhbdWludDgubGVuZ3RoIC0gMV0pXG5cdFx0XHRcdG91dHB1dCArPSBlbmNvZGUodGVtcCA+PiAxMClcblx0XHRcdFx0b3V0cHV0ICs9IGVuY29kZSgodGVtcCA+PiA0KSAmIDB4M0YpXG5cdFx0XHRcdG91dHB1dCArPSBlbmNvZGUoKHRlbXAgPDwgMikgJiAweDNGKVxuXHRcdFx0XHRvdXRwdXQgKz0gJz0nXG5cdFx0XHRcdGJyZWFrXG5cdFx0fVxuXG5cdFx0cmV0dXJuIG91dHB1dFxuXHR9XG5cblx0ZXhwb3J0cy50b0J5dGVBcnJheSA9IGI2NFRvQnl0ZUFycmF5XG5cdGV4cG9ydHMuZnJvbUJ5dGVBcnJheSA9IHVpbnQ4VG9CYXNlNjRcbn0odHlwZW9mIGV4cG9ydHMgPT09ICd1bmRlZmluZWQnID8gKHRoaXMuYmFzZTY0anMgPSB7fSkgOiBleHBvcnRzKSlcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Jhc2U2NC1qcy9saWIvYjY0LmpzXG4gKiogbW9kdWxlIGlkID0gMzNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsImV4cG9ydHMucmVhZCA9IGZ1bmN0aW9uIChidWZmZXIsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7XG4gIHZhciBlLCBtXG4gIHZhciBlTGVuID0gbkJ5dGVzICogOCAtIG1MZW4gLSAxXG4gIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxXG4gIHZhciBlQmlhcyA9IGVNYXggPj4gMVxuICB2YXIgbkJpdHMgPSAtN1xuICB2YXIgaSA9IGlzTEUgPyAobkJ5dGVzIC0gMSkgOiAwXG4gIHZhciBkID0gaXNMRSA/IC0xIDogMVxuICB2YXIgcyA9IGJ1ZmZlcltvZmZzZXQgKyBpXVxuXG4gIGkgKz0gZFxuXG4gIGUgPSBzICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG4gIHMgPj49ICgtbkJpdHMpXG4gIG5CaXRzICs9IGVMZW5cbiAgZm9yICg7IG5CaXRzID4gMDsgZSA9IGUgKiAyNTYgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge31cblxuICBtID0gZSAmICgoMSA8PCAoLW5CaXRzKSkgLSAxKVxuICBlID4+PSAoLW5CaXRzKVxuICBuQml0cyArPSBtTGVuXG4gIGZvciAoOyBuQml0cyA+IDA7IG0gPSBtICogMjU2ICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9XG5cbiAgaWYgKGUgPT09IDApIHtcbiAgICBlID0gMSAtIGVCaWFzXG4gIH0gZWxzZSBpZiAoZSA9PT0gZU1heCkge1xuICAgIHJldHVybiBtID8gTmFOIDogKChzID8gLTEgOiAxKSAqIEluZmluaXR5KVxuICB9IGVsc2Uge1xuICAgIG0gPSBtICsgTWF0aC5wb3coMiwgbUxlbilcbiAgICBlID0gZSAtIGVCaWFzXG4gIH1cbiAgcmV0dXJuIChzID8gLTEgOiAxKSAqIG0gKiBNYXRoLnBvdygyLCBlIC0gbUxlbilcbn1cblxuZXhwb3J0cy53cml0ZSA9IGZ1bmN0aW9uIChidWZmZXIsIHZhbHVlLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuICB2YXIgZSwgbSwgY1xuICB2YXIgZUxlbiA9IG5CeXRlcyAqIDggLSBtTGVuIC0gMVxuICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMVxuICB2YXIgZUJpYXMgPSBlTWF4ID4+IDFcbiAgdmFyIHJ0ID0gKG1MZW4gPT09IDIzID8gTWF0aC5wb3coMiwgLTI0KSAtIE1hdGgucG93KDIsIC03NykgOiAwKVxuICB2YXIgaSA9IGlzTEUgPyAwIDogKG5CeXRlcyAtIDEpXG4gIHZhciBkID0gaXNMRSA/IDEgOiAtMVxuICB2YXIgcyA9IHZhbHVlIDwgMCB8fCAodmFsdWUgPT09IDAgJiYgMSAvIHZhbHVlIDwgMCkgPyAxIDogMFxuXG4gIHZhbHVlID0gTWF0aC5hYnModmFsdWUpXG5cbiAgaWYgKGlzTmFOKHZhbHVlKSB8fCB2YWx1ZSA9PT0gSW5maW5pdHkpIHtcbiAgICBtID0gaXNOYU4odmFsdWUpID8gMSA6IDBcbiAgICBlID0gZU1heFxuICB9IGVsc2Uge1xuICAgIGUgPSBNYXRoLmZsb29yKE1hdGgubG9nKHZhbHVlKSAvIE1hdGguTE4yKVxuICAgIGlmICh2YWx1ZSAqIChjID0gTWF0aC5wb3coMiwgLWUpKSA8IDEpIHtcbiAgICAgIGUtLVxuICAgICAgYyAqPSAyXG4gICAgfVxuICAgIGlmIChlICsgZUJpYXMgPj0gMSkge1xuICAgICAgdmFsdWUgKz0gcnQgLyBjXG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbHVlICs9IHJ0ICogTWF0aC5wb3coMiwgMSAtIGVCaWFzKVxuICAgIH1cbiAgICBpZiAodmFsdWUgKiBjID49IDIpIHtcbiAgICAgIGUrK1xuICAgICAgYyAvPSAyXG4gICAgfVxuXG4gICAgaWYgKGUgKyBlQmlhcyA+PSBlTWF4KSB7XG4gICAgICBtID0gMFxuICAgICAgZSA9IGVNYXhcbiAgICB9IGVsc2UgaWYgKGUgKyBlQmlhcyA+PSAxKSB7XG4gICAgICBtID0gKHZhbHVlICogYyAtIDEpICogTWF0aC5wb3coMiwgbUxlbilcbiAgICAgIGUgPSBlICsgZUJpYXNcbiAgICB9IGVsc2Uge1xuICAgICAgbSA9IHZhbHVlICogTWF0aC5wb3coMiwgZUJpYXMgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pXG4gICAgICBlID0gMFxuICAgIH1cbiAgfVxuXG4gIGZvciAoOyBtTGVuID49IDg7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IG0gJiAweGZmLCBpICs9IGQsIG0gLz0gMjU2LCBtTGVuIC09IDgpIHt9XG5cbiAgZSA9IChlIDw8IG1MZW4pIHwgbVxuICBlTGVuICs9IG1MZW5cbiAgZm9yICg7IGVMZW4gPiAwOyBidWZmZXJbb2Zmc2V0ICsgaV0gPSBlICYgMHhmZiwgaSArPSBkLCBlIC89IDI1NiwgZUxlbiAtPSA4KSB7fVxuXG4gIGJ1ZmZlcltvZmZzZXQgKyBpIC0gZF0gfD0gcyAqIDEyOFxufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vaWVlZTc1NC9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDM0XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcbi8qKlxuICogaXNBcnJheVxuICovXG5cbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblxuLyoqXG4gKiB0b1N0cmluZ1xuICovXG5cbnZhciBzdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG4vKipcbiAqIFdoZXRoZXIgb3Igbm90IHRoZSBnaXZlbiBgdmFsYFxuICogaXMgYW4gYXJyYXkuXG4gKlxuICogZXhhbXBsZTpcbiAqXG4gKiAgICAgICAgaXNBcnJheShbXSk7XG4gKiAgICAgICAgLy8gPiB0cnVlXG4gKiAgICAgICAgaXNBcnJheShhcmd1bWVudHMpO1xuICogICAgICAgIC8vID4gZmFsc2VcbiAqICAgICAgICBpc0FycmF5KCcnKTtcbiAqICAgICAgICAvLyA+IGZhbHNlXG4gKlxuICogQHBhcmFtIHttaXhlZH0gdmFsXG4gKiBAcmV0dXJuIHtib29sfVxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gaXNBcnJheSB8fCBmdW5jdGlvbiAodmFsKSB7XG4gIHJldHVybiAhISB2YWwgJiYgJ1tvYmplY3QgQXJyYXldJyA9PSBzdHIuY2FsbCh2YWwpO1xufTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2lzLWFycmF5L2luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gMzVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8qIVxuICogQ2hhaSAtIGdldFBhdGhWYWx1ZSB1dGlsaXR5XG4gKiBDb3B5cmlnaHQoYykgMjAxMi0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vbG9naWNhbHBhcmFkb3gvZmlsdHJcbiAqIE1JVCBMaWNlbnNlZFxuICovXG5cbnZhciBnZXRQYXRoSW5mbyA9IHJlcXVpcmUoJy4vZ2V0UGF0aEluZm8nKTtcblxuLyoqXG4gKiAjIyMgLmdldFBhdGhWYWx1ZShwYXRoLCBvYmplY3QpXG4gKlxuICogVGhpcyBhbGxvd3MgdGhlIHJldHJpZXZhbCBvZiB2YWx1ZXMgaW4gYW5cbiAqIG9iamVjdCBnaXZlbiBhIHN0cmluZyBwYXRoLlxuICpcbiAqICAgICB2YXIgb2JqID0ge1xuICogICAgICAgICBwcm9wMToge1xuICogICAgICAgICAgICAgYXJyOiBbJ2EnLCAnYicsICdjJ11cbiAqICAgICAgICAgICAsIHN0cjogJ0hlbGxvJ1xuICogICAgICAgICB9XG4gKiAgICAgICAsIHByb3AyOiB7XG4gKiAgICAgICAgICAgICBhcnI6IFsgeyBuZXN0ZWQ6ICdVbml2ZXJzZScgfSBdXG4gKiAgICAgICAgICAgLCBzdHI6ICdIZWxsbyBhZ2FpbiEnXG4gKiAgICAgICAgIH1cbiAqICAgICB9XG4gKlxuICogVGhlIGZvbGxvd2luZyB3b3VsZCBiZSB0aGUgcmVzdWx0cy5cbiAqXG4gKiAgICAgZ2V0UGF0aFZhbHVlKCdwcm9wMS5zdHInLCBvYmopOyAvLyBIZWxsb1xuICogICAgIGdldFBhdGhWYWx1ZSgncHJvcDEuYXR0WzJdJywgb2JqKTsgLy8gYlxuICogICAgIGdldFBhdGhWYWx1ZSgncHJvcDIuYXJyWzBdLm5lc3RlZCcsIG9iaik7IC8vIFVuaXZlcnNlXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3RcbiAqIEByZXR1cm5zIHtPYmplY3R9IHZhbHVlIG9yIGB1bmRlZmluZWRgXG4gKiBAbmFtZSBnZXRQYXRoVmFsdWVcbiAqIEBhcGkgcHVibGljXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ocGF0aCwgb2JqKSB7XG4gIHZhciBpbmZvID0gZ2V0UGF0aEluZm8ocGF0aCwgb2JqKTtcbiAgcmV0dXJuIGluZm8udmFsdWU7XG59OyBcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NoYWkvbGliL2NoYWkvdXRpbHMvZ2V0UGF0aFZhbHVlLmpzXG4gKiogbW9kdWxlIGlkID0gMzZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8qIVxuICogQ2hhaSAtIGdldFBhdGhJbmZvIHV0aWxpdHlcbiAqIENvcHlyaWdodChjKSAyMDEyLTIwMTQgSmFrZSBMdWVyIDxqYWtlQGFsb2dpY2FscGFyYWRveC5jb20+XG4gKiBNSVQgTGljZW5zZWRcbiAqL1xuXG52YXIgaGFzUHJvcGVydHkgPSByZXF1aXJlKCcuL2hhc1Byb3BlcnR5Jyk7XG5cbi8qKlxuICogIyMjIC5nZXRQYXRoSW5mbyhwYXRoLCBvYmplY3QpXG4gKlxuICogVGhpcyBhbGxvd3MgdGhlIHJldHJpZXZhbCBvZiBwcm9wZXJ0eSBpbmZvIGluIGFuXG4gKiBvYmplY3QgZ2l2ZW4gYSBzdHJpbmcgcGF0aC5cbiAqXG4gKiBUaGUgcGF0aCBpbmZvIGNvbnNpc3RzIG9mIGFuIG9iamVjdCB3aXRoIHRoZVxuICogZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gKlxuICogKiBwYXJlbnQgLSBUaGUgcGFyZW50IG9iamVjdCBvZiB0aGUgcHJvcGVydHkgcmVmZXJlbmNlZCBieSBgcGF0aGBcbiAqICogbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBmaW5hbCBwcm9wZXJ0eSwgYSBudW1iZXIgaWYgaXQgd2FzIGFuIGFycmF5IGluZGV4ZXJcbiAqICogdmFsdWUgLSBUaGUgdmFsdWUgb2YgdGhlIHByb3BlcnR5LCBpZiBpdCBleGlzdHMsIG90aGVyd2lzZSBgdW5kZWZpbmVkYFxuICogKiBleGlzdHMgLSBXaGV0aGVyIHRoZSBwcm9wZXJ0eSBleGlzdHMgb3Igbm90XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3RcbiAqIEByZXR1cm5zIHtPYmplY3R9IGluZm9cbiAqIEBuYW1lIGdldFBhdGhJbmZvXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZ2V0UGF0aEluZm8ocGF0aCwgb2JqKSB7XG4gIHZhciBwYXJzZWQgPSBwYXJzZVBhdGgocGF0aCksXG4gICAgICBsYXN0ID0gcGFyc2VkW3BhcnNlZC5sZW5ndGggLSAxXTtcblxuICB2YXIgaW5mbyA9IHtcbiAgICBwYXJlbnQ6IHBhcnNlZC5sZW5ndGggPiAxID8gX2dldFBhdGhWYWx1ZShwYXJzZWQsIG9iaiwgcGFyc2VkLmxlbmd0aCAtIDEpIDogb2JqLFxuICAgIG5hbWU6IGxhc3QucCB8fCBsYXN0LmksXG4gICAgdmFsdWU6IF9nZXRQYXRoVmFsdWUocGFyc2VkLCBvYmopXG4gIH07XG4gIGluZm8uZXhpc3RzID0gaGFzUHJvcGVydHkoaW5mby5uYW1lLCBpbmZvLnBhcmVudCk7XG5cbiAgcmV0dXJuIGluZm87XG59O1xuXG5cbi8qIVxuICogIyMgcGFyc2VQYXRoKHBhdGgpXG4gKlxuICogSGVscGVyIGZ1bmN0aW9uIHVzZWQgdG8gcGFyc2Ugc3RyaW5nIG9iamVjdFxuICogcGF0aHMuIFVzZSBpbiBjb25qdW5jdGlvbiB3aXRoIGBfZ2V0UGF0aFZhbHVlYC5cbiAqXG4gKiAgICAgIHZhciBwYXJzZWQgPSBwYXJzZVBhdGgoJ215b2JqZWN0LnByb3BlcnR5LnN1YnByb3AnKTtcbiAqXG4gKiAjIyMgUGF0aHM6XG4gKlxuICogKiBDYW4gYmUgYXMgbmVhciBpbmZpbml0ZWx5IGRlZXAgYW5kIG5lc3RlZFxuICogKiBBcnJheXMgYXJlIGFsc28gdmFsaWQgdXNpbmcgdGhlIGZvcm1hbCBgbXlvYmplY3QuZG9jdW1lbnRbM10ucHJvcGVydHlgLlxuICogKiBMaXRlcmFsIGRvdHMgYW5kIGJyYWNrZXRzIChub3QgZGVsaW1pdGVyKSBtdXN0IGJlIGJhY2tzbGFzaC1lc2NhcGVkLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBwYXJzZWRcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlUGF0aCAocGF0aCkge1xuICB2YXIgc3RyID0gcGF0aC5yZXBsYWNlKC8oW15cXFxcXSlcXFsvZywgJyQxLlsnKVxuICAgICwgcGFydHMgPSBzdHIubWF0Y2goLyhcXFxcXFwufFteLl0rPykrL2cpO1xuICByZXR1cm4gcGFydHMubWFwKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHZhciByZSA9IC9eXFxbKFxcZCspXFxdJC9cbiAgICAgICwgbUFyciA9IHJlLmV4ZWModmFsdWUpO1xuICAgIGlmIChtQXJyKSByZXR1cm4geyBpOiBwYXJzZUZsb2F0KG1BcnJbMV0pIH07XG4gICAgZWxzZSByZXR1cm4geyBwOiB2YWx1ZS5yZXBsYWNlKC9cXFxcKFsuXFxbXFxdXSkvZywgJyQxJykgfTtcbiAgfSk7XG59XG5cblxuLyohXG4gKiAjIyBfZ2V0UGF0aFZhbHVlKHBhcnNlZCwgb2JqKVxuICpcbiAqIEhlbHBlciBjb21wYW5pb24gZnVuY3Rpb24gZm9yIGAucGFyc2VQYXRoYCB0aGF0IHJldHVybnNcbiAqIHRoZSB2YWx1ZSBsb2NhdGVkIGF0IHRoZSBwYXJzZWQgYWRkcmVzcy5cbiAqXG4gKiAgICAgIHZhciB2YWx1ZSA9IGdldFBhdGhWYWx1ZShwYXJzZWQsIG9iaik7XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhcnNlZCBkZWZpbml0aW9uIGZyb20gYHBhcnNlUGF0aGAuXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IHRvIHNlYXJjaCBhZ2FpbnN0XG4gKiBAcGFyYW0ge051bWJlcn0gb2JqZWN0IHRvIHNlYXJjaCBhZ2FpbnN0XG4gKiBAcmV0dXJucyB7T2JqZWN0fFVuZGVmaW5lZH0gdmFsdWVcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIF9nZXRQYXRoVmFsdWUgKHBhcnNlZCwgb2JqLCBpbmRleCkge1xuICB2YXIgdG1wID0gb2JqXG4gICAgLCByZXM7XG5cbiAgaW5kZXggPSAoaW5kZXggPT09IHVuZGVmaW5lZCA/IHBhcnNlZC5sZW5ndGggOiBpbmRleCk7XG5cbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBpbmRleDsgaSA8IGw7IGkrKykge1xuICAgIHZhciBwYXJ0ID0gcGFyc2VkW2ldO1xuICAgIGlmICh0bXApIHtcbiAgICAgIGlmICgndW5kZWZpbmVkJyAhPT0gdHlwZW9mIHBhcnQucClcbiAgICAgICAgdG1wID0gdG1wW3BhcnQucF07XG4gICAgICBlbHNlIGlmICgndW5kZWZpbmVkJyAhPT0gdHlwZW9mIHBhcnQuaSlcbiAgICAgICAgdG1wID0gdG1wW3BhcnQuaV07XG4gICAgICBpZiAoaSA9PSAobCAtIDEpKSByZXMgPSB0bXA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NoYWkvbGliL2NoYWkvdXRpbHMvZ2V0UGF0aEluZm8uanNcbiAqKiBtb2R1bGUgaWQgPSAzN1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLyohXG4gKiBDaGFpIC0gaGFzUHJvcGVydHkgdXRpbGl0eVxuICogQ29weXJpZ2h0KGMpIDIwMTItMjAxNCBKYWtlIEx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cbiAqIE1JVCBMaWNlbnNlZFxuICovXG5cbnZhciB0eXBlID0gcmVxdWlyZSgndHlwZS1kZXRlY3QnKTtcblxuLyoqXG4gKiAjIyMgLmhhc1Byb3BlcnR5KG9iamVjdCwgbmFtZSlcbiAqXG4gKiBUaGlzIGFsbG93cyBjaGVja2luZyB3aGV0aGVyIGFuIG9iamVjdCBoYXNcbiAqIG5hbWVkIHByb3BlcnR5IG9yIG51bWVyaWMgYXJyYXkgaW5kZXguXG4gKlxuICogQmFzaWNhbGx5IGRvZXMgdGhlIHNhbWUgdGhpbmcgYXMgdGhlIGBpbmBcbiAqIG9wZXJhdG9yIGJ1dCB3b3JrcyBwcm9wZXJseSB3aXRoIG5hdGl2ZXNcbiAqIGFuZCBudWxsL3VuZGVmaW5lZCB2YWx1ZXMuXG4gKlxuICogICAgIHZhciBvYmogPSB7XG4gKiAgICAgICAgIGFycjogWydhJywgJ2InLCAnYyddXG4gKiAgICAgICAsIHN0cjogJ0hlbGxvJ1xuICogICAgIH1cbiAqXG4gKiBUaGUgZm9sbG93aW5nIHdvdWxkIGJlIHRoZSByZXN1bHRzLlxuICpcbiAqICAgICBoYXNQcm9wZXJ0eSgnc3RyJywgb2JqKTsgIC8vIHRydWVcbiAqICAgICBoYXNQcm9wZXJ0eSgnY29uc3RydWN0b3InLCBvYmopOyAgLy8gdHJ1ZVxuICogICAgIGhhc1Byb3BlcnR5KCdiYXInLCBvYmopOyAgLy8gZmFsc2VcbiAqICAgICBcbiAqICAgICBoYXNQcm9wZXJ0eSgnbGVuZ3RoJywgb2JqLnN0cik7IC8vIHRydWVcbiAqICAgICBoYXNQcm9wZXJ0eSgxLCBvYmouc3RyKTsgIC8vIHRydWVcbiAqICAgICBoYXNQcm9wZXJ0eSg1LCBvYmouc3RyKTsgIC8vIGZhbHNlXG4gKlxuICogICAgIGhhc1Byb3BlcnR5KCdsZW5ndGgnLCBvYmouYXJyKTsgIC8vIHRydWVcbiAqICAgICBoYXNQcm9wZXJ0eSgyLCBvYmouYXJyKTsgIC8vIHRydWVcbiAqICAgICBoYXNQcm9wZXJ0eSgzLCBvYmouYXJyKTsgIC8vIGZhbHNlXG4gKlxuICogQHBhcmFtIHtPYmp1ZWN0fSBvYmplY3RcbiAqIEBwYXJhbSB7U3RyaW5nfE51bWJlcn0gbmFtZVxuICogQHJldHVybnMge0Jvb2xlYW59IHdoZXRoZXIgaXQgZXhpc3RzXG4gKiBAbmFtZSBnZXRQYXRoSW5mb1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG52YXIgbGl0ZXJhbHMgPSB7XG4gICAgJ251bWJlcic6IE51bWJlclxuICAsICdzdHJpbmcnOiBTdHJpbmdcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaGFzUHJvcGVydHkobmFtZSwgb2JqKSB7XG4gIHZhciBvdCA9IHR5cGUob2JqKTtcblxuICAvLyBCYWQgT2JqZWN0LCBvYnZpb3VzbHkgbm8gcHJvcHMgYXQgYWxsXG4gIGlmKG90ID09PSAnbnVsbCcgfHwgb3QgPT09ICd1bmRlZmluZWQnKVxuICAgIHJldHVybiBmYWxzZTtcblxuICAvLyBUaGUgYGluYCBvcGVyYXRvciBkb2VzIG5vdCB3b3JrIHdpdGggY2VydGFpbiBsaXRlcmFsc1xuICAvLyBib3ggdGhlc2UgYmVmb3JlIHRoZSBjaGVja1xuICBpZihsaXRlcmFsc1tvdF0gJiYgdHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpXG4gICAgb2JqID0gbmV3IGxpdGVyYWxzW290XShvYmopO1xuXG4gIHJldHVybiBuYW1lIGluIG9iajtcbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jaGFpL2xpYi9jaGFpL3V0aWxzL2hhc1Byb3BlcnR5LmpzXG4gKiogbW9kdWxlIGlkID0gMzhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8qIVxuICogQ2hhaSAtIGFkZFByb3BlcnR5IHV0aWxpdHlcbiAqIENvcHlyaWdodChjKSAyMDEyLTIwMTQgSmFrZSBMdWVyIDxqYWtlQGFsb2dpY2FscGFyYWRveC5jb20+XG4gKiBNSVQgTGljZW5zZWRcbiAqL1xuXG52YXIgY29uZmlnID0gcmVxdWlyZSgnLi4vY29uZmlnJyk7XG52YXIgZmxhZyA9IHJlcXVpcmUoJy4vZmxhZycpO1xuXG4vKipcbiAqICMjIyBhZGRQcm9wZXJ0eSAoY3R4LCBuYW1lLCBnZXR0ZXIpXG4gKlxuICogQWRkcyBhIHByb3BlcnR5IHRvIHRoZSBwcm90b3R5cGUgb2YgYW4gb2JqZWN0LlxuICpcbiAqICAgICB1dGlscy5hZGRQcm9wZXJ0eShjaGFpLkFzc2VydGlvbi5wcm90b3R5cGUsICdmb28nLCBmdW5jdGlvbiAoKSB7XG4gKiAgICAgICB2YXIgb2JqID0gdXRpbHMuZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG4gKiAgICAgICBuZXcgY2hhaS5Bc3NlcnRpb24ob2JqKS50by5iZS5pbnN0YW5jZW9mKEZvbyk7XG4gKiAgICAgfSk7XG4gKlxuICogQ2FuIGFsc28gYmUgYWNjZXNzZWQgZGlyZWN0bHkgZnJvbSBgY2hhaS5Bc3NlcnRpb25gLlxuICpcbiAqICAgICBjaGFpLkFzc2VydGlvbi5hZGRQcm9wZXJ0eSgnZm9vJywgZm4pO1xuICpcbiAqIFRoZW4gY2FuIGJlIHVzZWQgYXMgYW55IG90aGVyIGFzc2VydGlvbi5cbiAqXG4gKiAgICAgZXhwZWN0KG15Rm9vKS50by5iZS5mb287XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGN0eCBvYmplY3QgdG8gd2hpY2ggdGhlIHByb3BlcnR5IGlzIGFkZGVkXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBvZiBwcm9wZXJ0eSB0byBhZGRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGdldHRlciBmdW5jdGlvbiB0byBiZSB1c2VkIGZvciBuYW1lXG4gKiBAbmFtZSBhZGRQcm9wZXJ0eVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjdHgsIG5hbWUsIGdldHRlcikge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBuYW1lLFxuICAgIHsgZ2V0OiBmdW5jdGlvbiBhZGRQcm9wZXJ0eSgpIHtcbiAgICAgICAgdmFyIG9sZF9zc2ZpID0gZmxhZyh0aGlzLCAnc3NmaScpO1xuICAgICAgICBpZiAob2xkX3NzZmkgJiYgY29uZmlnLmluY2x1ZGVTdGFjayA9PT0gZmFsc2UpXG4gICAgICAgICAgZmxhZyh0aGlzLCAnc3NmaScsIGFkZFByb3BlcnR5KTtcblxuICAgICAgICB2YXIgcmVzdWx0ID0gZ2V0dGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHJldHVybiByZXN1bHQgPT09IHVuZGVmaW5lZCA/IHRoaXMgOiByZXN1bHQ7XG4gICAgICB9XG4gICAgLCBjb25maWd1cmFibGU6IHRydWVcbiAgfSk7XG59O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY2hhaS9saWIvY2hhaS91dGlscy9hZGRQcm9wZXJ0eS5qc1xuICoqIG1vZHVsZSBpZCA9IDM5XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvKiFcbiAqIENoYWkgLSBhZGRNZXRob2QgdXRpbGl0eVxuICogQ29weXJpZ2h0KGMpIDIwMTItMjAxNCBKYWtlIEx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cbiAqIE1JVCBMaWNlbnNlZFxuICovXG5cbnZhciBjb25maWcgPSByZXF1aXJlKCcuLi9jb25maWcnKTtcblxuLyoqXG4gKiAjIyMgLmFkZE1ldGhvZCAoY3R4LCBuYW1lLCBtZXRob2QpXG4gKlxuICogQWRkcyBhIG1ldGhvZCB0byB0aGUgcHJvdG90eXBlIG9mIGFuIG9iamVjdC5cbiAqXG4gKiAgICAgdXRpbHMuYWRkTWV0aG9kKGNoYWkuQXNzZXJ0aW9uLnByb3RvdHlwZSwgJ2ZvbycsIGZ1bmN0aW9uIChzdHIpIHtcbiAqICAgICAgIHZhciBvYmogPSB1dGlscy5mbGFnKHRoaXMsICdvYmplY3QnKTtcbiAqICAgICAgIG5ldyBjaGFpLkFzc2VydGlvbihvYmopLnRvLmJlLmVxdWFsKHN0cik7XG4gKiAgICAgfSk7XG4gKlxuICogQ2FuIGFsc28gYmUgYWNjZXNzZWQgZGlyZWN0bHkgZnJvbSBgY2hhaS5Bc3NlcnRpb25gLlxuICpcbiAqICAgICBjaGFpLkFzc2VydGlvbi5hZGRNZXRob2QoJ2ZvbycsIGZuKTtcbiAqXG4gKiBUaGVuIGNhbiBiZSB1c2VkIGFzIGFueSBvdGhlciBhc3NlcnRpb24uXG4gKlxuICogICAgIGV4cGVjdChmb29TdHIpLnRvLmJlLmZvbygnYmFyJyk7XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGN0eCBvYmplY3QgdG8gd2hpY2ggdGhlIG1ldGhvZCBpcyBhZGRlZFxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgb2YgbWV0aG9kIHRvIGFkZFxuICogQHBhcmFtIHtGdW5jdGlvbn0gbWV0aG9kIGZ1bmN0aW9uIHRvIGJlIHVzZWQgZm9yIG5hbWVcbiAqIEBuYW1lIGFkZE1ldGhvZFxuICogQGFwaSBwdWJsaWNcbiAqL1xudmFyIGZsYWcgPSByZXF1aXJlKCcuL2ZsYWcnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY3R4LCBuYW1lLCBtZXRob2QpIHtcbiAgY3R4W25hbWVdID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBvbGRfc3NmaSA9IGZsYWcodGhpcywgJ3NzZmknKTtcbiAgICBpZiAob2xkX3NzZmkgJiYgY29uZmlnLmluY2x1ZGVTdGFjayA9PT0gZmFsc2UpXG4gICAgICBmbGFnKHRoaXMsICdzc2ZpJywgY3R4W25hbWVdKTtcbiAgICB2YXIgcmVzdWx0ID0gbWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgcmV0dXJuIHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gdGhpcyA6IHJlc3VsdDtcbiAgfTtcbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jaGFpL2xpYi9jaGFpL3V0aWxzL2FkZE1ldGhvZC5qc1xuICoqIG1vZHVsZSBpZCA9IDQwXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvKiFcbiAqIENoYWkgLSBvdmVyd3JpdGVQcm9wZXJ0eSB1dGlsaXR5XG4gKiBDb3B5cmlnaHQoYykgMjAxMi0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxuLyoqXG4gKiAjIyMgb3ZlcndyaXRlUHJvcGVydHkgKGN0eCwgbmFtZSwgZm4pXG4gKlxuICogT3ZlcndpdGVzIGFuIGFscmVhZHkgZXhpc3RpbmcgcHJvcGVydHkgZ2V0dGVyIGFuZCBwcm92aWRlc1xuICogYWNjZXNzIHRvIHByZXZpb3VzIHZhbHVlLiBNdXN0IHJldHVybiBmdW5jdGlvbiB0byB1c2UgYXMgZ2V0dGVyLlxuICpcbiAqICAgICB1dGlscy5vdmVyd3JpdGVQcm9wZXJ0eShjaGFpLkFzc2VydGlvbi5wcm90b3R5cGUsICdvaycsIGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAqICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gKiAgICAgICAgIHZhciBvYmogPSB1dGlscy5mbGFnKHRoaXMsICdvYmplY3QnKTtcbiAqICAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIEZvbykge1xuICogICAgICAgICAgIG5ldyBjaGFpLkFzc2VydGlvbihvYmoubmFtZSkudG8uZXF1YWwoJ2JhcicpO1xuICogICAgICAgICB9IGVsc2Uge1xuICogICAgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICogICAgICAgICB9XG4gKiAgICAgICB9XG4gKiAgICAgfSk7XG4gKlxuICpcbiAqIENhbiBhbHNvIGJlIGFjY2Vzc2VkIGRpcmVjdGx5IGZyb20gYGNoYWkuQXNzZXJ0aW9uYC5cbiAqXG4gKiAgICAgY2hhaS5Bc3NlcnRpb24ub3ZlcndyaXRlUHJvcGVydHkoJ2ZvbycsIGZuKTtcbiAqXG4gKiBUaGVuIGNhbiBiZSB1c2VkIGFzIGFueSBvdGhlciBhc3NlcnRpb24uXG4gKlxuICogICAgIGV4cGVjdChteUZvbykudG8uYmUub2s7XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGN0eCBvYmplY3Qgd2hvc2UgcHJvcGVydHkgaXMgdG8gYmUgb3ZlcndyaXR0ZW5cbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIG9mIHByb3BlcnR5IHRvIG92ZXJ3cml0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZ2V0dGVyIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIGdldHRlciBmdW5jdGlvbiB0byBiZSB1c2VkIGZvciBuYW1lXG4gKiBAbmFtZSBvdmVyd3JpdGVQcm9wZXJ0eVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjdHgsIG5hbWUsIGdldHRlcikge1xuICB2YXIgX2dldCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoY3R4LCBuYW1lKVxuICAgICwgX3N1cGVyID0gZnVuY3Rpb24gKCkge307XG5cbiAgaWYgKF9nZXQgJiYgJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIF9nZXQuZ2V0KVxuICAgIF9zdXBlciA9IF9nZXQuZ2V0XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN0eCwgbmFtZSxcbiAgICB7IGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gZ2V0dGVyKF9zdXBlcikuY2FsbCh0aGlzKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gdGhpcyA6IHJlc3VsdDtcbiAgICAgIH1cbiAgICAsIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9KTtcbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jaGFpL2xpYi9jaGFpL3V0aWxzL292ZXJ3cml0ZVByb3BlcnR5LmpzXG4gKiogbW9kdWxlIGlkID0gNDFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8qIVxuICogQ2hhaSAtIG92ZXJ3cml0ZU1ldGhvZCB1dGlsaXR5XG4gKiBDb3B5cmlnaHQoYykgMjAxMi0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxuLyoqXG4gKiAjIyMgb3ZlcndyaXRlTWV0aG9kIChjdHgsIG5hbWUsIGZuKVxuICpcbiAqIE92ZXJ3aXRlcyBhbiBhbHJlYWR5IGV4aXN0aW5nIG1ldGhvZCBhbmQgcHJvdmlkZXNcbiAqIGFjY2VzcyB0byBwcmV2aW91cyBmdW5jdGlvbi4gTXVzdCByZXR1cm4gZnVuY3Rpb25cbiAqIHRvIGJlIHVzZWQgZm9yIG5hbWUuXG4gKlxuICogICAgIHV0aWxzLm92ZXJ3cml0ZU1ldGhvZChjaGFpLkFzc2VydGlvbi5wcm90b3R5cGUsICdlcXVhbCcsIGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAqICAgICAgIHJldHVybiBmdW5jdGlvbiAoc3RyKSB7XG4gKiAgICAgICAgIHZhciBvYmogPSB1dGlscy5mbGFnKHRoaXMsICdvYmplY3QnKTtcbiAqICAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIEZvbykge1xuICogICAgICAgICAgIG5ldyBjaGFpLkFzc2VydGlvbihvYmoudmFsdWUpLnRvLmVxdWFsKHN0cik7XG4gKiAgICAgICAgIH0gZWxzZSB7XG4gKiAgICAgICAgICAgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gKiAgICAgICAgIH1cbiAqICAgICAgIH1cbiAqICAgICB9KTtcbiAqXG4gKiBDYW4gYWxzbyBiZSBhY2Nlc3NlZCBkaXJlY3RseSBmcm9tIGBjaGFpLkFzc2VydGlvbmAuXG4gKlxuICogICAgIGNoYWkuQXNzZXJ0aW9uLm92ZXJ3cml0ZU1ldGhvZCgnZm9vJywgZm4pO1xuICpcbiAqIFRoZW4gY2FuIGJlIHVzZWQgYXMgYW55IG90aGVyIGFzc2VydGlvbi5cbiAqXG4gKiAgICAgZXhwZWN0KG15Rm9vKS50by5lcXVhbCgnYmFyJyk7XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGN0eCBvYmplY3Qgd2hvc2UgbWV0aG9kIGlzIHRvIGJlIG92ZXJ3cml0dGVuXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBvZiBtZXRob2QgdG8gb3ZlcndyaXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBtZXRob2QgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgZnVuY3Rpb24gdG8gYmUgdXNlZCBmb3IgbmFtZVxuICogQG5hbWUgb3ZlcndyaXRlTWV0aG9kXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGN0eCwgbmFtZSwgbWV0aG9kKSB7XG4gIHZhciBfbWV0aG9kID0gY3R4W25hbWVdXG4gICAgLCBfc3VwZXIgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9O1xuXG4gIGlmIChfbWV0aG9kICYmICdmdW5jdGlvbicgPT09IHR5cGVvZiBfbWV0aG9kKVxuICAgIF9zdXBlciA9IF9tZXRob2Q7XG5cbiAgY3R4W25hbWVdID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciByZXN1bHQgPSBtZXRob2QoX3N1cGVyKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHJldHVybiByZXN1bHQgPT09IHVuZGVmaW5lZCA/IHRoaXMgOiByZXN1bHQ7XG4gIH1cbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jaGFpL2xpYi9jaGFpL3V0aWxzL292ZXJ3cml0ZU1ldGhvZC5qc1xuICoqIG1vZHVsZSBpZCA9IDQyXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvKiFcbiAqIENoYWkgLSBhZGRDaGFpbmluZ01ldGhvZCB1dGlsaXR5XG4gKiBDb3B5cmlnaHQoYykgMjAxMi0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxuLyohXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzXG4gKi9cblxudmFyIHRyYW5zZmVyRmxhZ3MgPSByZXF1aXJlKCcuL3RyYW5zZmVyRmxhZ3MnKTtcbnZhciBmbGFnID0gcmVxdWlyZSgnLi9mbGFnJyk7XG52YXIgY29uZmlnID0gcmVxdWlyZSgnLi4vY29uZmlnJyk7XG5cbi8qIVxuICogTW9kdWxlIHZhcmlhYmxlc1xuICovXG5cbi8vIENoZWNrIHdoZXRoZXIgYF9fcHJvdG9fX2AgaXMgc3VwcG9ydGVkXG52YXIgaGFzUHJvdG9TdXBwb3J0ID0gJ19fcHJvdG9fXycgaW4gT2JqZWN0O1xuXG4vLyBXaXRob3V0IGBfX3Byb3RvX19gIHN1cHBvcnQsIHRoaXMgbW9kdWxlIHdpbGwgbmVlZCB0byBhZGQgcHJvcGVydGllcyB0byBhIGZ1bmN0aW9uLlxuLy8gSG93ZXZlciwgc29tZSBGdW5jdGlvbi5wcm90b3R5cGUgbWV0aG9kcyBjYW5ub3QgYmUgb3ZlcndyaXR0ZW4sXG4vLyBhbmQgdGhlcmUgc2VlbXMgbm8gZWFzeSBjcm9zcy1wbGF0Zm9ybSB3YXkgdG8gZGV0ZWN0IHRoZW0gKEBzZWUgY2hhaWpzL2NoYWkvaXNzdWVzLzY5KS5cbnZhciBleGNsdWRlTmFtZXMgPSAvXig/Omxlbmd0aHxuYW1lfGFyZ3VtZW50c3xjYWxsZXIpJC87XG5cbi8vIENhY2hlIGBGdW5jdGlvbmAgcHJvcGVydGllc1xudmFyIGNhbGwgID0gRnVuY3Rpb24ucHJvdG90eXBlLmNhbGwsXG4gICAgYXBwbHkgPSBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7XG5cbi8qKlxuICogIyMjIGFkZENoYWluYWJsZU1ldGhvZCAoY3R4LCBuYW1lLCBtZXRob2QsIGNoYWluaW5nQmVoYXZpb3IpXG4gKlxuICogQWRkcyBhIG1ldGhvZCB0byBhbiBvYmplY3QsIHN1Y2ggdGhhdCB0aGUgbWV0aG9kIGNhbiBhbHNvIGJlIGNoYWluZWQuXG4gKlxuICogICAgIHV0aWxzLmFkZENoYWluYWJsZU1ldGhvZChjaGFpLkFzc2VydGlvbi5wcm90b3R5cGUsICdmb28nLCBmdW5jdGlvbiAoc3RyKSB7XG4gKiAgICAgICB2YXIgb2JqID0gdXRpbHMuZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG4gKiAgICAgICBuZXcgY2hhaS5Bc3NlcnRpb24ob2JqKS50by5iZS5lcXVhbChzdHIpO1xuICogICAgIH0pO1xuICpcbiAqIENhbiBhbHNvIGJlIGFjY2Vzc2VkIGRpcmVjdGx5IGZyb20gYGNoYWkuQXNzZXJ0aW9uYC5cbiAqXG4gKiAgICAgY2hhaS5Bc3NlcnRpb24uYWRkQ2hhaW5hYmxlTWV0aG9kKCdmb28nLCBmbiwgY2hhaW5pbmdCZWhhdmlvcik7XG4gKlxuICogVGhlIHJlc3VsdCBjYW4gdGhlbiBiZSB1c2VkIGFzIGJvdGggYSBtZXRob2QgYXNzZXJ0aW9uLCBleGVjdXRpbmcgYm90aCBgbWV0aG9kYCBhbmRcbiAqIGBjaGFpbmluZ0JlaGF2aW9yYCwgb3IgYXMgYSBsYW5ndWFnZSBjaGFpbiwgd2hpY2ggb25seSBleGVjdXRlcyBgY2hhaW5pbmdCZWhhdmlvcmAuXG4gKlxuICogICAgIGV4cGVjdChmb29TdHIpLnRvLmJlLmZvbygnYmFyJyk7XG4gKiAgICAgZXhwZWN0KGZvb1N0cikudG8uYmUuZm9vLmVxdWFsKCdmb28nKTtcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gY3R4IG9iamVjdCB0byB3aGljaCB0aGUgbWV0aG9kIGlzIGFkZGVkXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBvZiBtZXRob2QgdG8gYWRkXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBtZXRob2QgZnVuY3Rpb24gdG8gYmUgdXNlZCBmb3IgYG5hbWVgLCB3aGVuIGNhbGxlZFxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2hhaW5pbmdCZWhhdmlvciBmdW5jdGlvbiB0byBiZSBjYWxsZWQgZXZlcnkgdGltZSB0aGUgcHJvcGVydHkgaXMgYWNjZXNzZWRcbiAqIEBuYW1lIGFkZENoYWluYWJsZU1ldGhvZFxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjdHgsIG5hbWUsIG1ldGhvZCwgY2hhaW5pbmdCZWhhdmlvcikge1xuICBpZiAodHlwZW9mIGNoYWluaW5nQmVoYXZpb3IgIT09ICdmdW5jdGlvbicpIHtcbiAgICBjaGFpbmluZ0JlaGF2aW9yID0gZnVuY3Rpb24gKCkgeyB9O1xuICB9XG5cbiAgdmFyIGNoYWluYWJsZUJlaGF2aW9yID0ge1xuICAgICAgbWV0aG9kOiBtZXRob2RcbiAgICAsIGNoYWluaW5nQmVoYXZpb3I6IGNoYWluaW5nQmVoYXZpb3JcbiAgfTtcblxuICAvLyBzYXZlIHRoZSBtZXRob2RzIHNvIHdlIGNhbiBvdmVyd3JpdGUgdGhlbSBsYXRlciwgaWYgd2UgbmVlZCB0by5cbiAgaWYgKCFjdHguX19tZXRob2RzKSB7XG4gICAgY3R4Ll9fbWV0aG9kcyA9IHt9O1xuICB9XG4gIGN0eC5fX21ldGhvZHNbbmFtZV0gPSBjaGFpbmFibGVCZWhhdmlvcjtcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBuYW1lLFxuICAgIHsgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNoYWluYWJsZUJlaGF2aW9yLmNoYWluaW5nQmVoYXZpb3IuY2FsbCh0aGlzKTtcblxuICAgICAgICB2YXIgYXNzZXJ0ID0gZnVuY3Rpb24gYXNzZXJ0KCkge1xuICAgICAgICAgIHZhciBvbGRfc3NmaSA9IGZsYWcodGhpcywgJ3NzZmknKTtcbiAgICAgICAgICBpZiAob2xkX3NzZmkgJiYgY29uZmlnLmluY2x1ZGVTdGFjayA9PT0gZmFsc2UpXG4gICAgICAgICAgICBmbGFnKHRoaXMsICdzc2ZpJywgYXNzZXJ0KTtcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gY2hhaW5hYmxlQmVoYXZpb3IubWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gdGhpcyA6IHJlc3VsdDtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBVc2UgYF9fcHJvdG9fX2AgaWYgYXZhaWxhYmxlXG4gICAgICAgIGlmIChoYXNQcm90b1N1cHBvcnQpIHtcbiAgICAgICAgICAvLyBJbmhlcml0IGFsbCBwcm9wZXJ0aWVzIGZyb20gdGhlIG9iamVjdCBieSByZXBsYWNpbmcgdGhlIGBGdW5jdGlvbmAgcHJvdG90eXBlXG4gICAgICAgICAgdmFyIHByb3RvdHlwZSA9IGFzc2VydC5fX3Byb3RvX18gPSBPYmplY3QuY3JlYXRlKHRoaXMpO1xuICAgICAgICAgIC8vIFJlc3RvcmUgdGhlIGBjYWxsYCBhbmQgYGFwcGx5YCBtZXRob2RzIGZyb20gYEZ1bmN0aW9uYFxuICAgICAgICAgIHByb3RvdHlwZS5jYWxsID0gY2FsbDtcbiAgICAgICAgICBwcm90b3R5cGUuYXBwbHkgPSBhcHBseTtcbiAgICAgICAgfVxuICAgICAgICAvLyBPdGhlcndpc2UsIHJlZGVmaW5lIGFsbCBwcm9wZXJ0aWVzIChzbG93ISlcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgdmFyIGFzc2VydGVyTmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhjdHgpO1xuICAgICAgICAgIGFzc2VydGVyTmFtZXMuZm9yRWFjaChmdW5jdGlvbiAoYXNzZXJ0ZXJOYW1lKSB7XG4gICAgICAgICAgICBpZiAoIWV4Y2x1ZGVOYW1lcy50ZXN0KGFzc2VydGVyTmFtZSkpIHtcbiAgICAgICAgICAgICAgdmFyIHBkID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihjdHgsIGFzc2VydGVyTmFtZSk7XG4gICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhc3NlcnQsIGFzc2VydGVyTmFtZSwgcGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJhbnNmZXJGbGFncyh0aGlzLCBhc3NlcnQpO1xuICAgICAgICByZXR1cm4gYXNzZXJ0O1xuICAgICAgfVxuICAgICwgY29uZmlndXJhYmxlOiB0cnVlXG4gIH0pO1xufTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NoYWkvbGliL2NoYWkvdXRpbHMvYWRkQ2hhaW5hYmxlTWV0aG9kLmpzXG4gKiogbW9kdWxlIGlkID0gNDNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8qIVxuICogQ2hhaSAtIG92ZXJ3cml0ZUNoYWluYWJsZU1ldGhvZCB1dGlsaXR5XG4gKiBDb3B5cmlnaHQoYykgMjAxMi0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxuLyoqXG4gKiAjIyMgb3ZlcndyaXRlQ2hhaW5hYmxlTWV0aG9kIChjdHgsIG5hbWUsIG1ldGhvZCwgY2hhaW5pbmdCZWhhdmlvcilcbiAqXG4gKiBPdmVyd2l0ZXMgYW4gYWxyZWFkeSBleGlzdGluZyBjaGFpbmFibGUgbWV0aG9kXG4gKiBhbmQgcHJvdmlkZXMgYWNjZXNzIHRvIHRoZSBwcmV2aW91cyBmdW5jdGlvbiBvclxuICogcHJvcGVydHkuICBNdXN0IHJldHVybiBmdW5jdGlvbnMgdG8gYmUgdXNlZCBmb3JcbiAqIG5hbWUuXG4gKlxuICogICAgIHV0aWxzLm92ZXJ3cml0ZUNoYWluYWJsZU1ldGhvZChjaGFpLkFzc2VydGlvbi5wcm90b3R5cGUsICdsZW5ndGgnLFxuICogICAgICAgZnVuY3Rpb24gKF9zdXBlcikge1xuICogICAgICAgfVxuICogICAgICwgZnVuY3Rpb24gKF9zdXBlcikge1xuICogICAgICAgfVxuICogICAgICk7XG4gKlxuICogQ2FuIGFsc28gYmUgYWNjZXNzZWQgZGlyZWN0bHkgZnJvbSBgY2hhaS5Bc3NlcnRpb25gLlxuICpcbiAqICAgICBjaGFpLkFzc2VydGlvbi5vdmVyd3JpdGVDaGFpbmFibGVNZXRob2QoJ2ZvbycsIGZuLCBmbik7XG4gKlxuICogVGhlbiBjYW4gYmUgdXNlZCBhcyBhbnkgb3RoZXIgYXNzZXJ0aW9uLlxuICpcbiAqICAgICBleHBlY3QobXlGb28pLnRvLmhhdmUubGVuZ3RoKDMpO1xuICogICAgIGV4cGVjdChteUZvbykudG8uaGF2ZS5sZW5ndGguYWJvdmUoMyk7XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGN0eCBvYmplY3Qgd2hvc2UgbWV0aG9kIC8gcHJvcGVydHkgaXMgdG8gYmUgb3ZlcndyaXR0ZW5cbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIG9mIG1ldGhvZCAvIHByb3BlcnR5IHRvIG92ZXJ3cml0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gbWV0aG9kIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIGZ1bmN0aW9uIHRvIGJlIHVzZWQgZm9yIG5hbWVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNoYWluaW5nQmVoYXZpb3IgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgZnVuY3Rpb24gdG8gYmUgdXNlZCBmb3IgcHJvcGVydHlcbiAqIEBuYW1lIG92ZXJ3cml0ZUNoYWluYWJsZU1ldGhvZFxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjdHgsIG5hbWUsIG1ldGhvZCwgY2hhaW5pbmdCZWhhdmlvcikge1xuICB2YXIgY2hhaW5hYmxlQmVoYXZpb3IgPSBjdHguX19tZXRob2RzW25hbWVdO1xuXG4gIHZhciBfY2hhaW5pbmdCZWhhdmlvciA9IGNoYWluYWJsZUJlaGF2aW9yLmNoYWluaW5nQmVoYXZpb3I7XG4gIGNoYWluYWJsZUJlaGF2aW9yLmNoYWluaW5nQmVoYXZpb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHJlc3VsdCA9IGNoYWluaW5nQmVoYXZpb3IoX2NoYWluaW5nQmVoYXZpb3IpLmNhbGwodGhpcyk7XG4gICAgcmV0dXJuIHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gdGhpcyA6IHJlc3VsdDtcbiAgfTtcblxuICB2YXIgX21ldGhvZCA9IGNoYWluYWJsZUJlaGF2aW9yLm1ldGhvZDtcbiAgY2hhaW5hYmxlQmVoYXZpb3IubWV0aG9kID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciByZXN1bHQgPSBtZXRob2QoX21ldGhvZCkuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICByZXR1cm4gcmVzdWx0ID09PSB1bmRlZmluZWQgPyB0aGlzIDogcmVzdWx0O1xuICB9O1xufTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NoYWkvbGliL2NoYWkvdXRpbHMvb3ZlcndyaXRlQ2hhaW5hYmxlTWV0aG9kLmpzXG4gKiogbW9kdWxlIGlkID0gNDRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8qIVxuICogY2hhaVxuICogaHR0cDovL2NoYWlqcy5jb21cbiAqIENvcHlyaWdodChjKSAyMDExLTIwMTQgSmFrZSBMdWVyIDxqYWtlQGFsb2dpY2FscGFyYWRveC5jb20+XG4gKiBNSVQgTGljZW5zZWRcbiAqL1xuXG52YXIgY29uZmlnID0gcmVxdWlyZSgnLi9jb25maWcnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoX2NoYWksIHV0aWwpIHtcbiAgLyohXG4gICAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gICAqL1xuXG4gIHZhciBBc3NlcnRpb25FcnJvciA9IF9jaGFpLkFzc2VydGlvbkVycm9yXG4gICAgLCBmbGFnID0gdXRpbC5mbGFnO1xuXG4gIC8qIVxuICAgKiBNb2R1bGUgZXhwb3J0LlxuICAgKi9cblxuICBfY2hhaS5Bc3NlcnRpb24gPSBBc3NlcnRpb247XG5cbiAgLyohXG4gICAqIEFzc2VydGlvbiBDb25zdHJ1Y3RvclxuICAgKlxuICAgKiBDcmVhdGVzIG9iamVjdCBmb3IgY2hhaW5pbmcuXG4gICAqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cblxuICBmdW5jdGlvbiBBc3NlcnRpb24gKG9iaiwgbXNnLCBzdGFjaykge1xuICAgIGZsYWcodGhpcywgJ3NzZmknLCBzdGFjayB8fCBhcmd1bWVudHMuY2FsbGVlKTtcbiAgICBmbGFnKHRoaXMsICdvYmplY3QnLCBvYmopO1xuICAgIGZsYWcodGhpcywgJ21lc3NhZ2UnLCBtc2cpO1xuICB9XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFzc2VydGlvbiwgJ2luY2x1ZGVTdGFjaycsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgY29uc29sZS53YXJuKCdBc3NlcnRpb24uaW5jbHVkZVN0YWNrIGlzIGRlcHJlY2F0ZWQsIHVzZSBjaGFpLmNvbmZpZy5pbmNsdWRlU3RhY2sgaW5zdGVhZC4nKTtcbiAgICAgIHJldHVybiBjb25maWcuaW5jbHVkZVN0YWNrO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgY29uc29sZS53YXJuKCdBc3NlcnRpb24uaW5jbHVkZVN0YWNrIGlzIGRlcHJlY2F0ZWQsIHVzZSBjaGFpLmNvbmZpZy5pbmNsdWRlU3RhY2sgaW5zdGVhZC4nKTtcbiAgICAgIGNvbmZpZy5pbmNsdWRlU3RhY2sgPSB2YWx1ZTtcbiAgICB9XG4gIH0pO1xuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBc3NlcnRpb24sICdzaG93RGlmZicsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgY29uc29sZS53YXJuKCdBc3NlcnRpb24uc2hvd0RpZmYgaXMgZGVwcmVjYXRlZCwgdXNlIGNoYWkuY29uZmlnLnNob3dEaWZmIGluc3RlYWQuJyk7XG4gICAgICByZXR1cm4gY29uZmlnLnNob3dEaWZmO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgY29uc29sZS53YXJuKCdBc3NlcnRpb24uc2hvd0RpZmYgaXMgZGVwcmVjYXRlZCwgdXNlIGNoYWkuY29uZmlnLnNob3dEaWZmIGluc3RlYWQuJyk7XG4gICAgICBjb25maWcuc2hvd0RpZmYgPSB2YWx1ZTtcbiAgICB9XG4gIH0pO1xuXG4gIEFzc2VydGlvbi5hZGRQcm9wZXJ0eSA9IGZ1bmN0aW9uIChuYW1lLCBmbikge1xuICAgIHV0aWwuYWRkUHJvcGVydHkodGhpcy5wcm90b3R5cGUsIG5hbWUsIGZuKTtcbiAgfTtcblxuICBBc3NlcnRpb24uYWRkTWV0aG9kID0gZnVuY3Rpb24gKG5hbWUsIGZuKSB7XG4gICAgdXRpbC5hZGRNZXRob2QodGhpcy5wcm90b3R5cGUsIG5hbWUsIGZuKTtcbiAgfTtcblxuICBBc3NlcnRpb24uYWRkQ2hhaW5hYmxlTWV0aG9kID0gZnVuY3Rpb24gKG5hbWUsIGZuLCBjaGFpbmluZ0JlaGF2aW9yKSB7XG4gICAgdXRpbC5hZGRDaGFpbmFibGVNZXRob2QodGhpcy5wcm90b3R5cGUsIG5hbWUsIGZuLCBjaGFpbmluZ0JlaGF2aW9yKTtcbiAgfTtcblxuICBBc3NlcnRpb24ub3ZlcndyaXRlUHJvcGVydHkgPSBmdW5jdGlvbiAobmFtZSwgZm4pIHtcbiAgICB1dGlsLm92ZXJ3cml0ZVByb3BlcnR5KHRoaXMucHJvdG90eXBlLCBuYW1lLCBmbik7XG4gIH07XG5cbiAgQXNzZXJ0aW9uLm92ZXJ3cml0ZU1ldGhvZCA9IGZ1bmN0aW9uIChuYW1lLCBmbikge1xuICAgIHV0aWwub3ZlcndyaXRlTWV0aG9kKHRoaXMucHJvdG90eXBlLCBuYW1lLCBmbik7XG4gIH07XG5cbiAgQXNzZXJ0aW9uLm92ZXJ3cml0ZUNoYWluYWJsZU1ldGhvZCA9IGZ1bmN0aW9uIChuYW1lLCBmbiwgY2hhaW5pbmdCZWhhdmlvcikge1xuICAgIHV0aWwub3ZlcndyaXRlQ2hhaW5hYmxlTWV0aG9kKHRoaXMucHJvdG90eXBlLCBuYW1lLCBmbiwgY2hhaW5pbmdCZWhhdmlvcik7XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAuYXNzZXJ0KGV4cHJlc3Npb24sIG1lc3NhZ2UsIG5lZ2F0ZU1lc3NhZ2UsIGV4cGVjdGVkLCBhY3R1YWwsIHNob3dEaWZmKVxuICAgKlxuICAgKiBFeGVjdXRlcyBhbiBleHByZXNzaW9uIGFuZCBjaGVjayBleHBlY3RhdGlvbnMuIFRocm93cyBBc3NlcnRpb25FcnJvciBmb3IgcmVwb3J0aW5nIGlmIHRlc3QgZG9lc24ndCBwYXNzLlxuICAgKlxuICAgKiBAbmFtZSBhc3NlcnRcbiAgICogQHBhcmFtIHtQaGlsb3NvcGhpY2FsfSBleHByZXNzaW9uIHRvIGJlIHRlc3RlZFxuICAgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gbWVzc2FnZSBvciBmdW5jdGlvbiB0aGF0IHJldHVybnMgbWVzc2FnZSB0byBkaXNwbGF5IGlmIGV4cHJlc3Npb24gZmFpbHNcbiAgICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IG5lZ2F0ZWRNZXNzYWdlIG9yIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBuZWdhdGVkTWVzc2FnZSB0byBkaXNwbGF5IGlmIG5lZ2F0ZWQgZXhwcmVzc2lvbiBmYWlsc1xuICAgKiBAcGFyYW0ge01peGVkfSBleHBlY3RlZCB2YWx1ZSAocmVtZW1iZXIgdG8gY2hlY2sgZm9yIG5lZ2F0aW9uKVxuICAgKiBAcGFyYW0ge01peGVkfSBhY3R1YWwgKG9wdGlvbmFsKSB3aWxsIGRlZmF1bHQgdG8gYHRoaXMub2JqYFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IHNob3dEaWZmIChvcHRpb25hbCkgd2hlbiBzZXQgdG8gYHRydWVgLCBhc3NlcnQgd2lsbCBkaXNwbGF5IGEgZGlmZiBpbiBhZGRpdGlvbiB0byB0aGUgbWVzc2FnZSBpZiBleHByZXNzaW9uIGZhaWxzXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cblxuICBBc3NlcnRpb24ucHJvdG90eXBlLmFzc2VydCA9IGZ1bmN0aW9uIChleHByLCBtc2csIG5lZ2F0ZU1zZywgZXhwZWN0ZWQsIF9hY3R1YWwsIHNob3dEaWZmKSB7XG4gICAgdmFyIG9rID0gdXRpbC50ZXN0KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKHRydWUgIT09IHNob3dEaWZmKSBzaG93RGlmZiA9IGZhbHNlO1xuICAgIGlmICh0cnVlICE9PSBjb25maWcuc2hvd0RpZmYpIHNob3dEaWZmID0gZmFsc2U7XG5cbiAgICBpZiAoIW9rKSB7XG4gICAgICB2YXIgbXNnID0gdXRpbC5nZXRNZXNzYWdlKHRoaXMsIGFyZ3VtZW50cylcbiAgICAgICAgLCBhY3R1YWwgPSB1dGlsLmdldEFjdHVhbCh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgdGhyb3cgbmV3IEFzc2VydGlvbkVycm9yKG1zZywge1xuICAgICAgICAgIGFjdHVhbDogYWN0dWFsXG4gICAgICAgICwgZXhwZWN0ZWQ6IGV4cGVjdGVkXG4gICAgICAgICwgc2hvd0RpZmY6IHNob3dEaWZmXG4gICAgICB9LCAoY29uZmlnLmluY2x1ZGVTdGFjaykgPyB0aGlzLmFzc2VydCA6IGZsYWcodGhpcywgJ3NzZmknKSk7XG4gICAgfVxuICB9O1xuXG4gIC8qIVxuICAgKiAjIyMgLl9vYmpcbiAgICpcbiAgICogUXVpY2sgcmVmZXJlbmNlIHRvIHN0b3JlZCBgYWN0dWFsYCB2YWx1ZSBmb3IgcGx1Z2luIGRldmVsb3BlcnMuXG4gICAqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQXNzZXJ0aW9uLnByb3RvdHlwZSwgJ19vYmonLFxuICAgIHsgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBmbGFnKHRoaXMsICdvYmplY3QnKTtcbiAgICAgIH1cbiAgICAsIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICBmbGFnKHRoaXMsICdvYmplY3QnLCB2YWwpO1xuICAgICAgfVxuICB9KTtcbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jaGFpL2xpYi9jaGFpL2Fzc2VydGlvbi5qc1xuICoqIG1vZHVsZSBpZCA9IDQ1XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvKiFcbiAqIGNoYWlcbiAqIGh0dHA6Ly9jaGFpanMuY29tXG4gKiBDb3B5cmlnaHQoYykgMjAxMS0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY2hhaSwgXykge1xuICB2YXIgQXNzZXJ0aW9uID0gY2hhaS5Bc3NlcnRpb25cbiAgICAsIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ1xuICAgICwgZmxhZyA9IF8uZmxhZztcblxuICAvKipcbiAgICogIyMjIExhbmd1YWdlIENoYWluc1xuICAgKlxuICAgKiBUaGUgZm9sbG93aW5nIGFyZSBwcm92aWRlZCBhcyBjaGFpbmFibGUgZ2V0dGVycyB0b1xuICAgKiBpbXByb3ZlIHRoZSByZWFkYWJpbGl0eSBvZiB5b3VyIGFzc2VydGlvbnMuIFRoZXlcbiAgICogZG8gbm90IHByb3ZpZGUgdGVzdGluZyBjYXBhYmlsaXRpZXMgdW5sZXNzIHRoZXlcbiAgICogaGF2ZSBiZWVuIG92ZXJ3cml0dGVuIGJ5IGEgcGx1Z2luLlxuICAgKlxuICAgKiAqKkNoYWlucyoqXG4gICAqXG4gICAqIC0gdG9cbiAgICogLSBiZVxuICAgKiAtIGJlZW5cbiAgICogLSBpc1xuICAgKiAtIHRoYXRcbiAgICogLSB3aGljaFxuICAgKiAtIGFuZFxuICAgKiAtIGhhc1xuICAgKiAtIGhhdmVcbiAgICogLSB3aXRoXG4gICAqIC0gYXRcbiAgICogLSBvZlxuICAgKiAtIHNhbWVcbiAgICpcbiAgICogQG5hbWUgbGFuZ3VhZ2UgY2hhaW5zXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIFsgJ3RvJywgJ2JlJywgJ2JlZW4nXG4gICwgJ2lzJywgJ2FuZCcsICdoYXMnLCAnaGF2ZSdcbiAgLCAnd2l0aCcsICd0aGF0JywgJ3doaWNoJywgJ2F0J1xuICAsICdvZicsICdzYW1lJyBdLmZvckVhY2goZnVuY3Rpb24gKGNoYWluKSB7XG4gICAgQXNzZXJ0aW9uLmFkZFByb3BlcnR5KGNoYWluLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9KTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqICMjIyAubm90XG4gICAqXG4gICAqIE5lZ2F0ZXMgYW55IG9mIGFzc2VydGlvbnMgZm9sbG93aW5nIGluIHRoZSBjaGFpbi5cbiAgICpcbiAgICogICAgIGV4cGVjdChmb28pLnRvLm5vdC5lcXVhbCgnYmFyJyk7XG4gICAqICAgICBleHBlY3QoZ29vZEZuKS50by5ub3QudGhyb3coRXJyb3IpO1xuICAgKiAgICAgZXhwZWN0KHsgZm9vOiAnYmF6JyB9KS50by5oYXZlLnByb3BlcnR5KCdmb28nKVxuICAgKiAgICAgICAuYW5kLm5vdC5lcXVhbCgnYmFyJyk7XG4gICAqXG4gICAqIEBuYW1lIG5vdFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBBc3NlcnRpb24uYWRkUHJvcGVydHkoJ25vdCcsIGZ1bmN0aW9uICgpIHtcbiAgICBmbGFnKHRoaXMsICduZWdhdGUnLCB0cnVlKTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqICMjIyAuZGVlcFxuICAgKlxuICAgKiBTZXRzIHRoZSBgZGVlcGAgZmxhZywgbGF0ZXIgdXNlZCBieSB0aGUgYGVxdWFsYCBhbmRcbiAgICogYHByb3BlcnR5YCBhc3NlcnRpb25zLlxuICAgKlxuICAgKiAgICAgZXhwZWN0KGZvbykudG8uZGVlcC5lcXVhbCh7IGJhcjogJ2JheicgfSk7XG4gICAqICAgICBleHBlY3QoeyBmb286IHsgYmFyOiB7IGJhejogJ3F1dXgnIH0gfSB9KVxuICAgKiAgICAgICAudG8uaGF2ZS5kZWVwLnByb3BlcnR5KCdmb28uYmFyLmJheicsICdxdXV4Jyk7XG4gICAqXG4gICAqIGAuZGVlcC5wcm9wZXJ0eWAgc3BlY2lhbCBjaGFyYWN0ZXJzIGNhbiBiZSBlc2NhcGVkXG4gICAqIGJ5IGFkZGluZyB0d28gc2xhc2hlcyBiZWZvcmUgdGhlIGAuYCBvciBgW11gLlxuICAgKlxuICAgKiAgICAgdmFyIGRlZXBDc3MgPSB7ICcubGluayc6IHsgJ1t0YXJnZXRdJzogNDIgfX07XG4gICAqICAgICBleHBlY3QoZGVlcENzcykudG8uaGF2ZS5kZWVwLnByb3BlcnR5KCdcXFxcLmxpbmsuXFxcXFt0YXJnZXRcXFxcXScsIDQyKTtcbiAgICpcbiAgICogQG5hbWUgZGVlcFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBBc3NlcnRpb24uYWRkUHJvcGVydHkoJ2RlZXAnLCBmdW5jdGlvbiAoKSB7XG4gICAgZmxhZyh0aGlzLCAnZGVlcCcsIHRydWUpO1xuICB9KTtcblxuICAvKipcbiAgICogIyMjIC5hbnlcbiAgICpcbiAgICogU2V0cyB0aGUgYGFueWAgZmxhZywgKG9wcG9zaXRlIG9mIHRoZSBgYWxsYCBmbGFnKVxuICAgKiBsYXRlciB1c2VkIGluIHRoZSBga2V5c2AgYXNzZXJ0aW9uLlxuICAgKlxuICAgKiAgICAgZXhwZWN0KGZvbykudG8uaGF2ZS5hbnkua2V5cygnYmFyJywgJ2JheicpO1xuICAgKlxuICAgKiBAbmFtZSBhbnlcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgQXNzZXJ0aW9uLmFkZFByb3BlcnR5KCdhbnknLCBmdW5jdGlvbiAoKSB7XG4gICAgZmxhZyh0aGlzLCAnYW55JywgdHJ1ZSk7XG4gICAgZmxhZyh0aGlzLCAnYWxsJywgZmFsc2UpXG4gIH0pO1xuXG5cbiAgLyoqXG4gICAqICMjIyAuYWxsXG4gICAqXG4gICAqIFNldHMgdGhlIGBhbGxgIGZsYWcgKG9wcG9zaXRlIG9mIHRoZSBgYW55YCBmbGFnKVxuICAgKiBsYXRlciB1c2VkIGJ5IHRoZSBga2V5c2AgYXNzZXJ0aW9uLlxuICAgKlxuICAgKiAgICAgZXhwZWN0KGZvbykudG8uaGF2ZS5hbGwua2V5cygnYmFyJywgJ2JheicpO1xuICAgKlxuICAgKiBAbmFtZSBhbGxcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgQXNzZXJ0aW9uLmFkZFByb3BlcnR5KCdhbGwnLCBmdW5jdGlvbiAoKSB7XG4gICAgZmxhZyh0aGlzLCAnYWxsJywgdHJ1ZSk7XG4gICAgZmxhZyh0aGlzLCAnYW55JywgZmFsc2UpO1xuICB9KTtcblxuICAvKipcbiAgICogIyMjIC5hKHR5cGUpXG4gICAqXG4gICAqIFRoZSBgYWAgYW5kIGBhbmAgYXNzZXJ0aW9ucyBhcmUgYWxpYXNlcyB0aGF0IGNhbiBiZVxuICAgKiB1c2VkIGVpdGhlciBhcyBsYW5ndWFnZSBjaGFpbnMgb3IgdG8gYXNzZXJ0IGEgdmFsdWUnc1xuICAgKiB0eXBlLlxuICAgKlxuICAgKiAgICAgLy8gdHlwZW9mXG4gICAqICAgICBleHBlY3QoJ3Rlc3QnKS50by5iZS5hKCdzdHJpbmcnKTtcbiAgICogICAgIGV4cGVjdCh7IGZvbzogJ2JhcicgfSkudG8uYmUuYW4oJ29iamVjdCcpO1xuICAgKiAgICAgZXhwZWN0KG51bGwpLnRvLmJlLmEoJ251bGwnKTtcbiAgICogICAgIGV4cGVjdCh1bmRlZmluZWQpLnRvLmJlLmFuKCd1bmRlZmluZWQnKTtcbiAgICogICAgIGV4cGVjdChuZXcgRXJyb3IpLnRvLmJlLmFuKCdlcnJvcicpO1xuICAgKiAgICAgZXhwZWN0KG5ldyBQcm9taXNlKS50by5iZS5hKCdwcm9taXNlJyk7XG4gICAqICAgICBleHBlY3QobmV3IEZsb2F0MzJBcnJheSgpKS50by5iZS5hKCdmbG9hdDMyYXJyYXknKTtcbiAgICogICAgIGV4cGVjdChTeW1ib2woKSkudG8uYmUuYSgnc3ltYm9sJyk7XG4gICAqXG4gICAqICAgICAvLyBlczYgb3ZlcnJpZGVzXG4gICAqICAgICBleHBlY3Qoe1tTeW1ib2wudG9TdHJpbmdUYWddOigpPT4nZm9vJ30pLnRvLmJlLmEoJ2ZvbycpO1xuICAgKlxuICAgKiAgICAgLy8gbGFuZ3VhZ2UgY2hhaW5cbiAgICogICAgIGV4cGVjdChmb28pLnRvLmJlLmFuLmluc3RhbmNlb2YoRm9vKTtcbiAgICpcbiAgICogQG5hbWUgYVxuICAgKiBAYWxpYXMgYW5cbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBmdW5jdGlvbiBhbiAodHlwZSwgbXNnKSB7XG4gICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG4gICAgdHlwZSA9IHR5cGUudG9Mb3dlckNhc2UoKTtcbiAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0JylcbiAgICAgICwgYXJ0aWNsZSA9IH5bICdhJywgJ2UnLCAnaScsICdvJywgJ3UnIF0uaW5kZXhPZih0eXBlLmNoYXJBdCgwKSkgPyAnYW4gJyA6ICdhICc7XG5cbiAgICB0aGlzLmFzc2VydChcbiAgICAgICAgdHlwZSA9PT0gXy50eXBlKG9iailcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgJyArIGFydGljbGUgKyB0eXBlXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IG5vdCB0byBiZSAnICsgYXJ0aWNsZSArIHR5cGVcbiAgICApO1xuICB9XG5cbiAgQXNzZXJ0aW9uLmFkZENoYWluYWJsZU1ldGhvZCgnYW4nLCBhbik7XG4gIEFzc2VydGlvbi5hZGRDaGFpbmFibGVNZXRob2QoJ2EnLCBhbik7XG5cbiAgLyoqXG4gICAqICMjIyAuaW5jbHVkZSh2YWx1ZSlcbiAgICpcbiAgICogVGhlIGBpbmNsdWRlYCBhbmQgYGNvbnRhaW5gIGFzc2VydGlvbnMgY2FuIGJlIHVzZWQgYXMgZWl0aGVyIHByb3BlcnR5XG4gICAqIGJhc2VkIGxhbmd1YWdlIGNoYWlucyBvciBhcyBtZXRob2RzIHRvIGFzc2VydCB0aGUgaW5jbHVzaW9uIG9mIGFuIG9iamVjdFxuICAgKiBpbiBhbiBhcnJheSBvciBhIHN1YnN0cmluZyBpbiBhIHN0cmluZy4gV2hlbiB1c2VkIGFzIGxhbmd1YWdlIGNoYWlucyxcbiAgICogdGhleSB0b2dnbGUgdGhlIGBjb250YWluc2AgZmxhZyBmb3IgdGhlIGBrZXlzYCBhc3NlcnRpb24uXG4gICAqXG4gICAqICAgICBleHBlY3QoWzEsMiwzXSkudG8uaW5jbHVkZSgyKTtcbiAgICogICAgIGV4cGVjdCgnZm9vYmFyJykudG8uY29udGFpbignZm9vJyk7XG4gICAqICAgICBleHBlY3QoeyBmb286ICdiYXInLCBoZWxsbzogJ3VuaXZlcnNlJyB9KS50by5pbmNsdWRlLmtleXMoJ2ZvbycpO1xuICAgKlxuICAgKiBAbmFtZSBpbmNsdWRlXG4gICAqIEBhbGlhcyBjb250YWluXG4gICAqIEBhbGlhcyBpbmNsdWRlc1xuICAgKiBAYWxpYXMgY29udGFpbnNcbiAgICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfE51bWJlcn0gb2JqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgZnVuY3Rpb24gaW5jbHVkZUNoYWluaW5nQmVoYXZpb3IgKCkge1xuICAgIGZsYWcodGhpcywgJ2NvbnRhaW5zJywgdHJ1ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBpbmNsdWRlICh2YWwsIG1zZykge1xuICAgIF8uZXhwZWN0VHlwZXModGhpcywgWydhcnJheScsICdvYmplY3QnLCAnc3RyaW5nJ10pO1xuXG4gICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG4gICAgdmFyIG9iaiA9IGZsYWcodGhpcywgJ29iamVjdCcpO1xuICAgIHZhciBleHBlY3RlZCA9IGZhbHNlO1xuXG4gICAgaWYgKF8udHlwZShvYmopID09PSAnYXJyYXknICYmIF8udHlwZSh2YWwpID09PSAnb2JqZWN0Jykge1xuICAgICAgZm9yICh2YXIgaSBpbiBvYmopIHtcbiAgICAgICAgaWYgKF8uZXFsKG9ialtpXSwgdmFsKSkge1xuICAgICAgICAgIGV4cGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoXy50eXBlKHZhbCkgPT09ICdvYmplY3QnKSB7XG4gICAgICBpZiAoIWZsYWcodGhpcywgJ25lZ2F0ZScpKSB7XG4gICAgICAgIGZvciAodmFyIGsgaW4gdmFsKSBuZXcgQXNzZXJ0aW9uKG9iaikucHJvcGVydHkoaywgdmFsW2tdKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIHN1YnNldCA9IHt9O1xuICAgICAgZm9yICh2YXIgayBpbiB2YWwpIHN1YnNldFtrXSA9IG9ialtrXTtcbiAgICAgIGV4cGVjdGVkID0gXy5lcWwoc3Vic2V0LCB2YWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBleHBlY3RlZCA9IChvYmogIT0gdW5kZWZpbmVkKSAmJiB+b2JqLmluZGV4T2YodmFsKTtcbiAgICB9XG4gICAgdGhpcy5hc3NlcnQoXG4gICAgICAgIGV4cGVjdGVkXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGluY2x1ZGUgJyArIF8uaW5zcGVjdCh2YWwpXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBpbmNsdWRlICcgKyBfLmluc3BlY3QodmFsKSk7XG4gIH1cblxuICBBc3NlcnRpb24uYWRkQ2hhaW5hYmxlTWV0aG9kKCdpbmNsdWRlJywgaW5jbHVkZSwgaW5jbHVkZUNoYWluaW5nQmVoYXZpb3IpO1xuICBBc3NlcnRpb24uYWRkQ2hhaW5hYmxlTWV0aG9kKCdjb250YWluJywgaW5jbHVkZSwgaW5jbHVkZUNoYWluaW5nQmVoYXZpb3IpO1xuICBBc3NlcnRpb24uYWRkQ2hhaW5hYmxlTWV0aG9kKCdjb250YWlucycsIGluY2x1ZGUsIGluY2x1ZGVDaGFpbmluZ0JlaGF2aW9yKTtcbiAgQXNzZXJ0aW9uLmFkZENoYWluYWJsZU1ldGhvZCgnaW5jbHVkZXMnLCBpbmNsdWRlLCBpbmNsdWRlQ2hhaW5pbmdCZWhhdmlvcik7XG5cbiAgLyoqXG4gICAqICMjIyAub2tcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaXMgdHJ1dGh5LlxuICAgKlxuICAgKiAgICAgZXhwZWN0KCdldmVyeXRoaW5nJykudG8uYmUub2s7XG4gICAqICAgICBleHBlY3QoMSkudG8uYmUub2s7XG4gICAqICAgICBleHBlY3QoZmFsc2UpLnRvLm5vdC5iZS5vaztcbiAgICogICAgIGV4cGVjdCh1bmRlZmluZWQpLnRvLm5vdC5iZS5vaztcbiAgICogICAgIGV4cGVjdChudWxsKS50by5ub3QuYmUub2s7XG4gICAqXG4gICAqIEBuYW1lIG9rXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIEFzc2VydGlvbi5hZGRQcm9wZXJ0eSgnb2snLCBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5hc3NlcnQoXG4gICAgICAgIGZsYWcodGhpcywgJ29iamVjdCcpXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIHRydXRoeSdcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgZmFsc3knKTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqICMjIyAudHJ1ZVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBgdHJ1ZWAuXG4gICAqXG4gICAqICAgICBleHBlY3QodHJ1ZSkudG8uYmUudHJ1ZTtcbiAgICogICAgIGV4cGVjdCgxKS50by5ub3QuYmUudHJ1ZTtcbiAgICpcbiAgICogQG5hbWUgdHJ1ZVxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBBc3NlcnRpb24uYWRkUHJvcGVydHkoJ3RydWUnLCBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5hc3NlcnQoXG4gICAgICAgIHRydWUgPT09IGZsYWcodGhpcywgJ29iamVjdCcpXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIHRydWUnXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIGZhbHNlJ1xuICAgICAgLCB0aGlzLm5lZ2F0ZSA/IGZhbHNlIDogdHJ1ZVxuICAgICk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiAjIyMgLmZhbHNlXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IGlzIGBmYWxzZWAuXG4gICAqXG4gICAqICAgICBleHBlY3QoZmFsc2UpLnRvLmJlLmZhbHNlO1xuICAgKiAgICAgZXhwZWN0KDApLnRvLm5vdC5iZS5mYWxzZTtcbiAgICpcbiAgICogQG5hbWUgZmFsc2VcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgQXNzZXJ0aW9uLmFkZFByb3BlcnR5KCdmYWxzZScsIGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmFzc2VydChcbiAgICAgICAgZmFsc2UgPT09IGZsYWcodGhpcywgJ29iamVjdCcpXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIGZhbHNlJ1xuICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSB0cnVlJ1xuICAgICAgLCB0aGlzLm5lZ2F0ZSA/IHRydWUgOiBmYWxzZVxuICAgICk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiAjIyMgLm51bGxcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaXMgYG51bGxgLlxuICAgKlxuICAgKiAgICAgZXhwZWN0KG51bGwpLnRvLmJlLm51bGw7XG4gICAqICAgICBleHBlY3QodW5kZWZpbmVkKS50by5ub3QuYmUubnVsbDtcbiAgICpcbiAgICogQG5hbWUgbnVsbFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBBc3NlcnRpb24uYWRkUHJvcGVydHkoJ251bGwnLCBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5hc3NlcnQoXG4gICAgICAgIG51bGwgPT09IGZsYWcodGhpcywgJ29iamVjdCcpXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIG51bGwnXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IG5vdCB0byBiZSBudWxsJ1xuICAgICk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiAjIyMgLnVuZGVmaW5lZFxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBgdW5kZWZpbmVkYC5cbiAgICpcbiAgICogICAgIGV4cGVjdCh1bmRlZmluZWQpLnRvLmJlLnVuZGVmaW5lZDtcbiAgICogICAgIGV4cGVjdChudWxsKS50by5ub3QuYmUudW5kZWZpbmVkO1xuICAgKlxuICAgKiBAbmFtZSB1bmRlZmluZWRcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgQXNzZXJ0aW9uLmFkZFByb3BlcnR5KCd1bmRlZmluZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5hc3NlcnQoXG4gICAgICAgIHVuZGVmaW5lZCA9PT0gZmxhZyh0aGlzLCAnb2JqZWN0JylcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgdW5kZWZpbmVkJ1xuICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSBub3QgdG8gYmUgdW5kZWZpbmVkJ1xuICAgICk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiAjIyMgLk5hTlxuICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBgTmFOYC5cbiAgICpcbiAgICogICAgIGV4cGVjdCgnZm9vJykudG8uYmUuTmFOO1xuICAgKiAgICAgZXhwZWN0KDQpLm5vdC50by5iZS5OYU47XG4gICAqXG4gICAqIEBuYW1lIE5hTlxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBBc3NlcnRpb24uYWRkUHJvcGVydHkoJ05hTicsIGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmFzc2VydChcbiAgICAgICAgaXNOYU4oZmxhZyh0aGlzLCAnb2JqZWN0JykpXG4gICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgTmFOJ1xuICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IG5vdCB0byBiZSBOYU4nXG4gICAgKTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqICMjIyAuZXhpc3RcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaXMgbmVpdGhlciBgbnVsbGAgbm9yIGB1bmRlZmluZWRgLlxuICAgKlxuICAgKiAgICAgdmFyIGZvbyA9ICdoaSdcbiAgICogICAgICAgLCBiYXIgPSBudWxsXG4gICAqICAgICAgICwgYmF6O1xuICAgKlxuICAgKiAgICAgZXhwZWN0KGZvbykudG8uZXhpc3Q7XG4gICAqICAgICBleHBlY3QoYmFyKS50by5ub3QuZXhpc3Q7XG4gICAqICAgICBleHBlY3QoYmF6KS50by5ub3QuZXhpc3Q7XG4gICAqXG4gICAqIEBuYW1lIGV4aXN0XG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIEFzc2VydGlvbi5hZGRQcm9wZXJ0eSgnZXhpc3QnLCBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5hc3NlcnQoXG4gICAgICAgIG51bGwgIT0gZmxhZyh0aGlzLCAnb2JqZWN0JylcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gZXhpc3QnXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBleGlzdCdcbiAgICApO1xuICB9KTtcblxuXG4gIC8qKlxuICAgKiAjIyMgLmVtcHR5XG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0J3MgbGVuZ3RoIGlzIGAwYC4gRm9yIGFycmF5cyBhbmQgc3RyaW5ncywgaXQgY2hlY2tzXG4gICAqIHRoZSBgbGVuZ3RoYCBwcm9wZXJ0eS4gRm9yIG9iamVjdHMsIGl0IGdldHMgdGhlIGNvdW50IG9mXG4gICAqIGVudW1lcmFibGUga2V5cy5cbiAgICpcbiAgICogICAgIGV4cGVjdChbXSkudG8uYmUuZW1wdHk7XG4gICAqICAgICBleHBlY3QoJycpLnRvLmJlLmVtcHR5O1xuICAgKiAgICAgZXhwZWN0KHt9KS50by5iZS5lbXB0eTtcbiAgICpcbiAgICogQG5hbWUgZW1wdHlcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgQXNzZXJ0aW9uLmFkZFByb3BlcnR5KCdlbXB0eScsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0JylcbiAgICAgICwgZXhwZWN0ZWQgPSBvYmo7XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopIHx8ICdzdHJpbmcnID09PSB0eXBlb2Ygb2JqZWN0KSB7XG4gICAgICBleHBlY3RlZCA9IG9iai5sZW5ndGg7XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygb2JqID09PSAnb2JqZWN0Jykge1xuICAgICAgZXhwZWN0ZWQgPSBPYmplY3Qua2V5cyhvYmopLmxlbmd0aDtcbiAgICB9XG5cbiAgICB0aGlzLmFzc2VydChcbiAgICAgICAgIWV4cGVjdGVkXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIGVtcHR5J1xuICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSBub3QgdG8gYmUgZW1wdHknXG4gICAgKTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqICMjIyAuYXJndW1lbnRzXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IGlzIGFuIGFyZ3VtZW50cyBvYmplY3QuXG4gICAqXG4gICAqICAgICBmdW5jdGlvbiB0ZXN0ICgpIHtcbiAgICogICAgICAgZXhwZWN0KGFyZ3VtZW50cykudG8uYmUuYXJndW1lbnRzO1xuICAgKiAgICAgfVxuICAgKlxuICAgKiBAbmFtZSBhcmd1bWVudHNcbiAgICogQGFsaWFzIEFyZ3VtZW50c1xuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBmdW5jdGlvbiBjaGVja0FyZ3VtZW50cyAoKSB7XG4gICAgdmFyIG9iaiA9IGZsYWcodGhpcywgJ29iamVjdCcpXG4gICAgICAsIHR5cGUgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKTtcbiAgICB0aGlzLmFzc2VydChcbiAgICAgICAgJ1tvYmplY3QgQXJndW1lbnRzXScgPT09IHR5cGVcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgYXJndW1lbnRzIGJ1dCBnb3QgJyArIHR5cGVcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IGJlIGFyZ3VtZW50cydcbiAgICApO1xuICB9XG5cbiAgQXNzZXJ0aW9uLmFkZFByb3BlcnR5KCdhcmd1bWVudHMnLCBjaGVja0FyZ3VtZW50cyk7XG4gIEFzc2VydGlvbi5hZGRQcm9wZXJ0eSgnQXJndW1lbnRzJywgY2hlY2tBcmd1bWVudHMpO1xuXG4gIC8qKlxuICAgKiAjIyMgLmVxdWFsKHZhbHVlKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBzdHJpY3RseSBlcXVhbCAoYD09PWApIHRvIGB2YWx1ZWAuXG4gICAqIEFsdGVybmF0ZWx5LCBpZiB0aGUgYGRlZXBgIGZsYWcgaXMgc2V0LCBhc3NlcnRzIHRoYXRcbiAgICogdGhlIHRhcmdldCBpcyBkZWVwbHkgZXF1YWwgdG8gYHZhbHVlYC5cbiAgICpcbiAgICogICAgIGV4cGVjdCgnaGVsbG8nKS50by5lcXVhbCgnaGVsbG8nKTtcbiAgICogICAgIGV4cGVjdCg0MikudG8uZXF1YWwoNDIpO1xuICAgKiAgICAgZXhwZWN0KDEpLnRvLm5vdC5lcXVhbCh0cnVlKTtcbiAgICogICAgIGV4cGVjdCh7IGZvbzogJ2JhcicgfSkudG8ubm90LmVxdWFsKHsgZm9vOiAnYmFyJyB9KTtcbiAgICogICAgIGV4cGVjdCh7IGZvbzogJ2JhcicgfSkudG8uZGVlcC5lcXVhbCh7IGZvbzogJ2JhcicgfSk7XG4gICAqXG4gICAqIEBuYW1lIGVxdWFsXG4gICAqIEBhbGlhcyBlcXVhbHNcbiAgICogQGFsaWFzIGVxXG4gICAqIEBhbGlhcyBkZWVwLmVxdWFsXG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgZnVuY3Rpb24gYXNzZXJ0RXF1YWwgKHZhbCwgbXNnKSB7XG4gICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG4gICAgdmFyIG9iaiA9IGZsYWcodGhpcywgJ29iamVjdCcpO1xuICAgIGlmIChmbGFnKHRoaXMsICdkZWVwJykpIHtcbiAgICAgIHJldHVybiB0aGlzLmVxbCh2YWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFzc2VydChcbiAgICAgICAgICB2YWwgPT09IG9ialxuICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGVxdWFsICN7ZXhwfSdcbiAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3QgZXF1YWwgI3tleHB9J1xuICAgICAgICAsIHZhbFxuICAgICAgICAsIHRoaXMuX29ialxuICAgICAgICAsIHRydWVcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnZXF1YWwnLCBhc3NlcnRFcXVhbCk7XG4gIEFzc2VydGlvbi5hZGRNZXRob2QoJ2VxdWFscycsIGFzc2VydEVxdWFsKTtcbiAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnZXEnLCBhc3NlcnRFcXVhbCk7XG5cbiAgLyoqXG4gICAqICMjIyAuZXFsKHZhbHVlKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBkZWVwbHkgZXF1YWwgdG8gYHZhbHVlYC5cbiAgICpcbiAgICogICAgIGV4cGVjdCh7IGZvbzogJ2JhcicgfSkudG8uZXFsKHsgZm9vOiAnYmFyJyB9KTtcbiAgICogICAgIGV4cGVjdChbIDEsIDIsIDMgXSkudG8uZXFsKFsgMSwgMiwgMyBdKTtcbiAgICpcbiAgICogQG5hbWUgZXFsXG4gICAqIEBhbGlhcyBlcWxzXG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgZnVuY3Rpb24gYXNzZXJ0RXFsKG9iaiwgbXNnKSB7XG4gICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG4gICAgdGhpcy5hc3NlcnQoXG4gICAgICAgIF8uZXFsKG9iaiwgZmxhZyh0aGlzLCAnb2JqZWN0JykpXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGRlZXBseSBlcXVhbCAje2V4cH0nXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBkZWVwbHkgZXF1YWwgI3tleHB9J1xuICAgICAgLCBvYmpcbiAgICAgICwgdGhpcy5fb2JqXG4gICAgICAsIHRydWVcbiAgICApO1xuICB9XG5cbiAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnZXFsJywgYXNzZXJ0RXFsKTtcbiAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnZXFscycsIGFzc2VydEVxbCk7XG5cbiAgLyoqXG4gICAqICMjIyAuYWJvdmUodmFsdWUpXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IGlzIGdyZWF0ZXIgdGhhbiBgdmFsdWVgLlxuICAgKlxuICAgKiAgICAgZXhwZWN0KDEwKS50by5iZS5hYm92ZSg1KTtcbiAgICpcbiAgICogQ2FuIGFsc28gYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIGBsZW5ndGhgIHRvXG4gICAqIGFzc2VydCBhIG1pbmltdW0gbGVuZ3RoLiBUaGUgYmVuZWZpdCBiZWluZyBhXG4gICAqIG1vcmUgaW5mb3JtYXRpdmUgZXJyb3IgbWVzc2FnZSB0aGFuIGlmIHRoZSBsZW5ndGhcbiAgICogd2FzIHN1cHBsaWVkIGRpcmVjdGx5LlxuICAgKlxuICAgKiAgICAgZXhwZWN0KCdmb28nKS50by5oYXZlLmxlbmd0aC5hYm92ZSgyKTtcbiAgICogICAgIGV4cGVjdChbIDEsIDIsIDMgXSkudG8uaGF2ZS5sZW5ndGguYWJvdmUoMik7XG4gICAqXG4gICAqIEBuYW1lIGFib3ZlXG4gICAqIEBhbGlhcyBndFxuICAgKiBAYWxpYXMgZ3JlYXRlclRoYW5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgZnVuY3Rpb24gYXNzZXJ0QWJvdmUgKG4sIG1zZykge1xuICAgIGlmIChtc2cpIGZsYWcodGhpcywgJ21lc3NhZ2UnLCBtc2cpO1xuICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKTtcbiAgICBpZiAoZmxhZyh0aGlzLCAnZG9MZW5ndGgnKSkge1xuICAgICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8uaGF2ZS5wcm9wZXJ0eSgnbGVuZ3RoJyk7XG4gICAgICB2YXIgbGVuID0gb2JqLmxlbmd0aDtcbiAgICAgIHRoaXMuYXNzZXJ0KFxuICAgICAgICAgIGxlbiA+IG5cbiAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBoYXZlIGEgbGVuZ3RoIGFib3ZlICN7ZXhwfSBidXQgZ290ICN7YWN0fSdcbiAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3QgaGF2ZSBhIGxlbmd0aCBhYm92ZSAje2V4cH0nXG4gICAgICAgICwgblxuICAgICAgICAsIGxlblxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hc3NlcnQoXG4gICAgICAgICAgb2JqID4gblxuICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIGFib3ZlICcgKyBuXG4gICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgYXQgbW9zdCAnICsgblxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBBc3NlcnRpb24uYWRkTWV0aG9kKCdhYm92ZScsIGFzc2VydEFib3ZlKTtcbiAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnZ3QnLCBhc3NlcnRBYm92ZSk7XG4gIEFzc2VydGlvbi5hZGRNZXRob2QoJ2dyZWF0ZXJUaGFuJywgYXNzZXJ0QWJvdmUpO1xuXG4gIC8qKlxuICAgKiAjIyMgLmxlYXN0KHZhbHVlKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gYHZhbHVlYC5cbiAgICpcbiAgICogICAgIGV4cGVjdCgxMCkudG8uYmUuYXQubGVhc3QoMTApO1xuICAgKlxuICAgKiBDYW4gYWxzbyBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggYGxlbmd0aGAgdG9cbiAgICogYXNzZXJ0IGEgbWluaW11bSBsZW5ndGguIFRoZSBiZW5lZml0IGJlaW5nIGFcbiAgICogbW9yZSBpbmZvcm1hdGl2ZSBlcnJvciBtZXNzYWdlIHRoYW4gaWYgdGhlIGxlbmd0aFxuICAgKiB3YXMgc3VwcGxpZWQgZGlyZWN0bHkuXG4gICAqXG4gICAqICAgICBleHBlY3QoJ2ZvbycpLnRvLmhhdmUubGVuZ3RoLm9mLmF0LmxlYXN0KDIpO1xuICAgKiAgICAgZXhwZWN0KFsgMSwgMiwgMyBdKS50by5oYXZlLmxlbmd0aC5vZi5hdC5sZWFzdCgzKTtcbiAgICpcbiAgICogQG5hbWUgbGVhc3RcbiAgICogQGFsaWFzIGd0ZVxuICAgKiBAcGFyYW0ge051bWJlcn0gdmFsdWVcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBmdW5jdGlvbiBhc3NlcnRMZWFzdCAobiwgbXNnKSB7XG4gICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG4gICAgdmFyIG9iaiA9IGZsYWcodGhpcywgJ29iamVjdCcpO1xuICAgIGlmIChmbGFnKHRoaXMsICdkb0xlbmd0aCcpKSB7XG4gICAgICBuZXcgQXNzZXJ0aW9uKG9iaiwgbXNnKS50by5oYXZlLnByb3BlcnR5KCdsZW5ndGgnKTtcbiAgICAgIHZhciBsZW4gPSBvYmoubGVuZ3RoO1xuICAgICAgdGhpcy5hc3NlcnQoXG4gICAgICAgICAgbGVuID49IG5cbiAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBoYXZlIGEgbGVuZ3RoIGF0IGxlYXN0ICN7ZXhwfSBidXQgZ290ICN7YWN0fSdcbiAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBoYXZlIGEgbGVuZ3RoIGJlbG93ICN7ZXhwfSdcbiAgICAgICAgLCBuXG4gICAgICAgICwgbGVuXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFzc2VydChcbiAgICAgICAgICBvYmogPj0gblxuICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIGF0IGxlYXN0ICcgKyBuXG4gICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgYmVsb3cgJyArIG5cbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnbGVhc3QnLCBhc3NlcnRMZWFzdCk7XG4gIEFzc2VydGlvbi5hZGRNZXRob2QoJ2d0ZScsIGFzc2VydExlYXN0KTtcblxuICAvKipcbiAgICogIyMjIC5iZWxvdyh2YWx1ZSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaXMgbGVzcyB0aGFuIGB2YWx1ZWAuXG4gICAqXG4gICAqICAgICBleHBlY3QoNSkudG8uYmUuYmVsb3coMTApO1xuICAgKlxuICAgKiBDYW4gYWxzbyBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggYGxlbmd0aGAgdG9cbiAgICogYXNzZXJ0IGEgbWF4aW11bSBsZW5ndGguIFRoZSBiZW5lZml0IGJlaW5nIGFcbiAgICogbW9yZSBpbmZvcm1hdGl2ZSBlcnJvciBtZXNzYWdlIHRoYW4gaWYgdGhlIGxlbmd0aFxuICAgKiB3YXMgc3VwcGxpZWQgZGlyZWN0bHkuXG4gICAqXG4gICAqICAgICBleHBlY3QoJ2ZvbycpLnRvLmhhdmUubGVuZ3RoLmJlbG93KDQpO1xuICAgKiAgICAgZXhwZWN0KFsgMSwgMiwgMyBdKS50by5oYXZlLmxlbmd0aC5iZWxvdyg0KTtcbiAgICpcbiAgICogQG5hbWUgYmVsb3dcbiAgICogQGFsaWFzIGx0XG4gICAqIEBhbGlhcyBsZXNzVGhhblxuICAgKiBAcGFyYW0ge051bWJlcn0gdmFsdWVcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBmdW5jdGlvbiBhc3NlcnRCZWxvdyAobiwgbXNnKSB7XG4gICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG4gICAgdmFyIG9iaiA9IGZsYWcodGhpcywgJ29iamVjdCcpO1xuICAgIGlmIChmbGFnKHRoaXMsICdkb0xlbmd0aCcpKSB7XG4gICAgICBuZXcgQXNzZXJ0aW9uKG9iaiwgbXNnKS50by5oYXZlLnByb3BlcnR5KCdsZW5ndGgnKTtcbiAgICAgIHZhciBsZW4gPSBvYmoubGVuZ3RoO1xuICAgICAgdGhpcy5hc3NlcnQoXG4gICAgICAgICAgbGVuIDwgblxuICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGhhdmUgYSBsZW5ndGggYmVsb3cgI3tleHB9IGJ1dCBnb3QgI3thY3R9J1xuICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBoYXZlIGEgbGVuZ3RoIGJlbG93ICN7ZXhwfSdcbiAgICAgICAgLCBuXG4gICAgICAgICwgbGVuXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFzc2VydChcbiAgICAgICAgICBvYmogPCBuXG4gICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgYmVsb3cgJyArIG5cbiAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSBhdCBsZWFzdCAnICsgblxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBBc3NlcnRpb24uYWRkTWV0aG9kKCdiZWxvdycsIGFzc2VydEJlbG93KTtcbiAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnbHQnLCBhc3NlcnRCZWxvdyk7XG4gIEFzc2VydGlvbi5hZGRNZXRob2QoJ2xlc3NUaGFuJywgYXNzZXJ0QmVsb3cpO1xuXG4gIC8qKlxuICAgKiAjIyMgLm1vc3QodmFsdWUpXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IGlzIGxlc3MgdGhhbiBvciBlcXVhbCB0byBgdmFsdWVgLlxuICAgKlxuICAgKiAgICAgZXhwZWN0KDUpLnRvLmJlLmF0Lm1vc3QoNSk7XG4gICAqXG4gICAqIENhbiBhbHNvIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBgbGVuZ3RoYCB0b1xuICAgKiBhc3NlcnQgYSBtYXhpbXVtIGxlbmd0aC4gVGhlIGJlbmVmaXQgYmVpbmcgYVxuICAgKiBtb3JlIGluZm9ybWF0aXZlIGVycm9yIG1lc3NhZ2UgdGhhbiBpZiB0aGUgbGVuZ3RoXG4gICAqIHdhcyBzdXBwbGllZCBkaXJlY3RseS5cbiAgICpcbiAgICogICAgIGV4cGVjdCgnZm9vJykudG8uaGF2ZS5sZW5ndGgub2YuYXQubW9zdCg0KTtcbiAgICogICAgIGV4cGVjdChbIDEsIDIsIDMgXSkudG8uaGF2ZS5sZW5ndGgub2YuYXQubW9zdCgzKTtcbiAgICpcbiAgICogQG5hbWUgbW9zdFxuICAgKiBAYWxpYXMgbHRlXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB2YWx1ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGFzc2VydE1vc3QgKG4sIG1zZykge1xuICAgIGlmIChtc2cpIGZsYWcodGhpcywgJ21lc3NhZ2UnLCBtc2cpO1xuICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKTtcbiAgICBpZiAoZmxhZyh0aGlzLCAnZG9MZW5ndGgnKSkge1xuICAgICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8uaGF2ZS5wcm9wZXJ0eSgnbGVuZ3RoJyk7XG4gICAgICB2YXIgbGVuID0gb2JqLmxlbmd0aDtcbiAgICAgIHRoaXMuYXNzZXJ0KFxuICAgICAgICAgIGxlbiA8PSBuXG4gICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gaGF2ZSBhIGxlbmd0aCBhdCBtb3N0ICN7ZXhwfSBidXQgZ290ICN7YWN0fSdcbiAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBoYXZlIGEgbGVuZ3RoIGFib3ZlICN7ZXhwfSdcbiAgICAgICAgLCBuXG4gICAgICAgICwgbGVuXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFzc2VydChcbiAgICAgICAgICBvYmogPD0gblxuICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIGF0IG1vc3QgJyArIG5cbiAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSBhYm92ZSAnICsgblxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBBc3NlcnRpb24uYWRkTWV0aG9kKCdtb3N0JywgYXNzZXJ0TW9zdCk7XG4gIEFzc2VydGlvbi5hZGRNZXRob2QoJ2x0ZScsIGFzc2VydE1vc3QpO1xuXG4gIC8qKlxuICAgKiAjIyMgLndpdGhpbihzdGFydCwgZmluaXNoKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyB3aXRoaW4gYSByYW5nZS5cbiAgICpcbiAgICogICAgIGV4cGVjdCg3KS50by5iZS53aXRoaW4oNSwxMCk7XG4gICAqXG4gICAqIENhbiBhbHNvIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBgbGVuZ3RoYCB0b1xuICAgKiBhc3NlcnQgYSBsZW5ndGggcmFuZ2UuIFRoZSBiZW5lZml0IGJlaW5nIGFcbiAgICogbW9yZSBpbmZvcm1hdGl2ZSBlcnJvciBtZXNzYWdlIHRoYW4gaWYgdGhlIGxlbmd0aFxuICAgKiB3YXMgc3VwcGxpZWQgZGlyZWN0bHkuXG4gICAqXG4gICAqICAgICBleHBlY3QoJ2ZvbycpLnRvLmhhdmUubGVuZ3RoLndpdGhpbigyLDQpO1xuICAgKiAgICAgZXhwZWN0KFsgMSwgMiwgMyBdKS50by5oYXZlLmxlbmd0aC53aXRoaW4oMiw0KTtcbiAgICpcbiAgICogQG5hbWUgd2l0aGluXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBzdGFydCBsb3dlcmJvdW5kIGluY2x1c2l2ZVxuICAgKiBAcGFyYW0ge051bWJlcn0gZmluaXNoIHVwcGVyYm91bmQgaW5jbHVzaXZlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnd2l0aGluJywgZnVuY3Rpb24gKHN0YXJ0LCBmaW5pc2gsIG1zZykge1xuICAgIGlmIChtc2cpIGZsYWcodGhpcywgJ21lc3NhZ2UnLCBtc2cpO1xuICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKVxuICAgICAgLCByYW5nZSA9IHN0YXJ0ICsgJy4uJyArIGZpbmlzaDtcbiAgICBpZiAoZmxhZyh0aGlzLCAnZG9MZW5ndGgnKSkge1xuICAgICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8uaGF2ZS5wcm9wZXJ0eSgnbGVuZ3RoJyk7XG4gICAgICB2YXIgbGVuID0gb2JqLmxlbmd0aDtcbiAgICAgIHRoaXMuYXNzZXJ0KFxuICAgICAgICAgIGxlbiA+PSBzdGFydCAmJiBsZW4gPD0gZmluaXNoXG4gICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gaGF2ZSBhIGxlbmd0aCB3aXRoaW4gJyArIHJhbmdlXG4gICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IGhhdmUgYSBsZW5ndGggd2l0aGluICcgKyByYW5nZVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hc3NlcnQoXG4gICAgICAgICAgb2JqID49IHN0YXJ0ICYmIG9iaiA8PSBmaW5pc2hcbiAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSB3aXRoaW4gJyArIHJhbmdlXG4gICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IGJlIHdpdGhpbiAnICsgcmFuZ2VcbiAgICAgICk7XG4gICAgfVxuICB9KTtcblxuICAvKipcbiAgICogIyMjIC5pbnN0YW5jZW9mKGNvbnN0cnVjdG9yKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBhbiBpbnN0YW5jZSBvZiBgY29uc3RydWN0b3JgLlxuICAgKlxuICAgKiAgICAgdmFyIFRlYSA9IGZ1bmN0aW9uIChuYW1lKSB7IHRoaXMubmFtZSA9IG5hbWU7IH1cbiAgICogICAgICAgLCBDaGFpID0gbmV3IFRlYSgnY2hhaScpO1xuICAgKlxuICAgKiAgICAgZXhwZWN0KENoYWkpLnRvLmJlLmFuLmluc3RhbmNlb2YoVGVhKTtcbiAgICogICAgIGV4cGVjdChbIDEsIDIsIDMgXSkudG8uYmUuaW5zdGFuY2VvZihBcnJheSk7XG4gICAqXG4gICAqIEBuYW1lIGluc3RhbmNlb2ZcbiAgICogQHBhcmFtIHtDb25zdHJ1Y3Rvcn0gY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuICAgKiBAYWxpYXMgaW5zdGFuY2VPZlxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBmdW5jdGlvbiBhc3NlcnRJbnN0YW5jZU9mIChjb25zdHJ1Y3RvciwgbXNnKSB7XG4gICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG4gICAgdmFyIG5hbWUgPSBfLmdldE5hbWUoY29uc3RydWN0b3IpO1xuICAgIHRoaXMuYXNzZXJ0KFxuICAgICAgICBmbGFnKHRoaXMsICdvYmplY3QnKSBpbnN0YW5jZW9mIGNvbnN0cnVjdG9yXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIGFuIGluc3RhbmNlIG9mICcgKyBuYW1lXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBiZSBhbiBpbnN0YW5jZSBvZiAnICsgbmFtZVxuICAgICk7XG4gIH07XG5cbiAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnaW5zdGFuY2VvZicsIGFzc2VydEluc3RhbmNlT2YpO1xuICBBc3NlcnRpb24uYWRkTWV0aG9kKCdpbnN0YW5jZU9mJywgYXNzZXJ0SW5zdGFuY2VPZik7XG5cbiAgLyoqXG4gICAqICMjIyAucHJvcGVydHkobmFtZSwgW3ZhbHVlXSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaGFzIGEgcHJvcGVydHkgYG5hbWVgLCBvcHRpb25hbGx5IGFzc2VydGluZyB0aGF0XG4gICAqIHRoZSB2YWx1ZSBvZiB0aGF0IHByb3BlcnR5IGlzIHN0cmljdGx5IGVxdWFsIHRvICBgdmFsdWVgLlxuICAgKiBJZiB0aGUgYGRlZXBgIGZsYWcgaXMgc2V0LCB5b3UgY2FuIHVzZSBkb3QtIGFuZCBicmFja2V0LW5vdGF0aW9uIGZvciBkZWVwXG4gICAqIHJlZmVyZW5jZXMgaW50byBvYmplY3RzIGFuZCBhcnJheXMuXG4gICAqXG4gICAqICAgICAvLyBzaW1wbGUgcmVmZXJlbmNpbmdcbiAgICogICAgIHZhciBvYmogPSB7IGZvbzogJ2JhcicgfTtcbiAgICogICAgIGV4cGVjdChvYmopLnRvLmhhdmUucHJvcGVydHkoJ2ZvbycpO1xuICAgKiAgICAgZXhwZWN0KG9iaikudG8uaGF2ZS5wcm9wZXJ0eSgnZm9vJywgJ2JhcicpO1xuICAgKlxuICAgKiAgICAgLy8gZGVlcCByZWZlcmVuY2luZ1xuICAgKiAgICAgdmFyIGRlZXBPYmogPSB7XG4gICAqICAgICAgICAgZ3JlZW46IHsgdGVhOiAnbWF0Y2hhJyB9XG4gICAqICAgICAgICwgdGVhczogWyAnY2hhaScsICdtYXRjaGEnLCB7IHRlYTogJ2tvbmFjaGEnIH0gXVxuICAgKiAgICAgfTtcbiAgICpcbiAgICogICAgIGV4cGVjdChkZWVwT2JqKS50by5oYXZlLmRlZXAucHJvcGVydHkoJ2dyZWVuLnRlYScsICdtYXRjaGEnKTtcbiAgICogICAgIGV4cGVjdChkZWVwT2JqKS50by5oYXZlLmRlZXAucHJvcGVydHkoJ3RlYXNbMV0nLCAnbWF0Y2hhJyk7XG4gICAqICAgICBleHBlY3QoZGVlcE9iaikudG8uaGF2ZS5kZWVwLnByb3BlcnR5KCd0ZWFzWzJdLnRlYScsICdrb25hY2hhJyk7XG4gICAqXG4gICAqIFlvdSBjYW4gYWxzbyB1c2UgYW4gYXJyYXkgYXMgdGhlIHN0YXJ0aW5nIHBvaW50IG9mIGEgYGRlZXAucHJvcGVydHlgXG4gICAqIGFzc2VydGlvbiwgb3IgdHJhdmVyc2UgbmVzdGVkIGFycmF5cy5cbiAgICpcbiAgICogICAgIHZhciBhcnIgPSBbXG4gICAqICAgICAgICAgWyAnY2hhaScsICdtYXRjaGEnLCAna29uYWNoYScgXVxuICAgKiAgICAgICAsIFsgeyB0ZWE6ICdjaGFpJyB9XG4gICAqICAgICAgICAgLCB7IHRlYTogJ21hdGNoYScgfVxuICAgKiAgICAgICAgICwgeyB0ZWE6ICdrb25hY2hhJyB9IF1cbiAgICogICAgIF07XG4gICAqXG4gICAqICAgICBleHBlY3QoYXJyKS50by5oYXZlLmRlZXAucHJvcGVydHkoJ1swXVsxXScsICdtYXRjaGEnKTtcbiAgICogICAgIGV4cGVjdChhcnIpLnRvLmhhdmUuZGVlcC5wcm9wZXJ0eSgnWzFdWzJdLnRlYScsICdrb25hY2hhJyk7XG4gICAqXG4gICAqIEZ1cnRoZXJtb3JlLCBgcHJvcGVydHlgIGNoYW5nZXMgdGhlIHN1YmplY3Qgb2YgdGhlIGFzc2VydGlvblxuICAgKiB0byBiZSB0aGUgdmFsdWUgb2YgdGhhdCBwcm9wZXJ0eSBmcm9tIHRoZSBvcmlnaW5hbCBvYmplY3QuIFRoaXNcbiAgICogcGVybWl0cyBmb3IgZnVydGhlciBjaGFpbmFibGUgYXNzZXJ0aW9ucyBvbiB0aGF0IHByb3BlcnR5LlxuICAgKlxuICAgKiAgICAgZXhwZWN0KG9iaikudG8uaGF2ZS5wcm9wZXJ0eSgnZm9vJylcbiAgICogICAgICAgLnRoYXQuaXMuYSgnc3RyaW5nJyk7XG4gICAqICAgICBleHBlY3QoZGVlcE9iaikudG8uaGF2ZS5wcm9wZXJ0eSgnZ3JlZW4nKVxuICAgKiAgICAgICAudGhhdC5pcy5hbignb2JqZWN0JylcbiAgICogICAgICAgLnRoYXQuZGVlcC5lcXVhbHMoeyB0ZWE6ICdtYXRjaGEnIH0pO1xuICAgKiAgICAgZXhwZWN0KGRlZXBPYmopLnRvLmhhdmUucHJvcGVydHkoJ3RlYXMnKVxuICAgKiAgICAgICAudGhhdC5pcy5hbignYXJyYXknKVxuICAgKiAgICAgICAud2l0aC5kZWVwLnByb3BlcnR5KCdbMl0nKVxuICAgKiAgICAgICAgIC50aGF0LmRlZXAuZXF1YWxzKHsgdGVhOiAna29uYWNoYScgfSk7XG4gICAqXG4gICAqIE5vdGUgdGhhdCBkb3RzIGFuZCBicmFja2V0IGluIGBuYW1lYCBtdXN0IGJlIGJhY2tzbGFzaC1lc2NhcGVkIHdoZW5cbiAgICogdGhlIGBkZWVwYCBmbGFnIGlzIHNldCwgd2hpbGUgdGhleSBtdXN0IE5PVCBiZSBlc2NhcGVkIHdoZW4gdGhlIGBkZWVwYFxuICAgKiBmbGFnIGlzIG5vdCBzZXQuXG4gICAqXG4gICAqICAgICAvLyBzaW1wbGUgcmVmZXJlbmNpbmdcbiAgICogICAgIHZhciBjc3MgPSB7ICcubGlua1t0YXJnZXRdJzogNDIgfTtcbiAgICogICAgIGV4cGVjdChjc3MpLnRvLmhhdmUucHJvcGVydHkoJy5saW5rW3RhcmdldF0nLCA0Mik7XG4gICAqXG4gICAqICAgICAvLyBkZWVwIHJlZmVyZW5jaW5nXG4gICAqICAgICB2YXIgZGVlcENzcyA9IHsgJy5saW5rJzogeyAnW3RhcmdldF0nOiA0MiB9fTtcbiAgICogICAgIGV4cGVjdChkZWVwQ3NzKS50by5oYXZlLmRlZXAucHJvcGVydHkoJ1xcXFwubGluay5cXFxcW3RhcmdldFxcXFxdJywgNDIpO1xuICAgKlxuICAgKiBAbmFtZSBwcm9wZXJ0eVxuICAgKiBAYWxpYXMgZGVlcC5wcm9wZXJ0eVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZSAob3B0aW9uYWwpXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cbiAgICogQHJldHVybnMgdmFsdWUgb2YgcHJvcGVydHkgZm9yIGNoYWluaW5nXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIEFzc2VydGlvbi5hZGRNZXRob2QoJ3Byb3BlcnR5JywgZnVuY3Rpb24gKG5hbWUsIHZhbCwgbXNnKSB7XG4gICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG5cbiAgICB2YXIgaXNEZWVwID0gISFmbGFnKHRoaXMsICdkZWVwJylcbiAgICAgICwgZGVzY3JpcHRvciA9IGlzRGVlcCA/ICdkZWVwIHByb3BlcnR5ICcgOiAncHJvcGVydHkgJ1xuICAgICAgLCBuZWdhdGUgPSBmbGFnKHRoaXMsICduZWdhdGUnKVxuICAgICAgLCBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKVxuICAgICAgLCBwYXRoSW5mbyA9IGlzRGVlcCA/IF8uZ2V0UGF0aEluZm8obmFtZSwgb2JqKSA6IG51bGxcbiAgICAgICwgaGFzUHJvcGVydHkgPSBpc0RlZXBcbiAgICAgICAgPyBwYXRoSW5mby5leGlzdHNcbiAgICAgICAgOiBfLmhhc1Byb3BlcnR5KG5hbWUsIG9iailcbiAgICAgICwgdmFsdWUgPSBpc0RlZXBcbiAgICAgICAgPyBwYXRoSW5mby52YWx1ZVxuICAgICAgICA6IG9ialtuYW1lXTtcblxuICAgIGlmIChuZWdhdGUgJiYgYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgIGlmICh1bmRlZmluZWQgPT09IHZhbHVlKSB7XG4gICAgICAgIG1zZyA9IChtc2cgIT0gbnVsbCkgPyBtc2cgKyAnOiAnIDogJyc7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cgKyBfLmluc3BlY3Qob2JqKSArICcgaGFzIG5vICcgKyBkZXNjcmlwdG9yICsgXy5pbnNwZWN0KG5hbWUpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hc3NlcnQoXG4gICAgICAgICAgaGFzUHJvcGVydHlcbiAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBoYXZlIGEgJyArIGRlc2NyaXB0b3IgKyBfLmluc3BlY3QobmFtZSlcbiAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3QgaGF2ZSAnICsgZGVzY3JpcHRvciArIF8uaW5zcGVjdChuYW1lKSk7XG4gICAgfVxuXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICB0aGlzLmFzc2VydChcbiAgICAgICAgICB2YWwgPT09IHZhbHVlXG4gICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gaGF2ZSBhICcgKyBkZXNjcmlwdG9yICsgXy5pbnNwZWN0KG5hbWUpICsgJyBvZiAje2V4cH0sIGJ1dCBnb3QgI3thY3R9J1xuICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBoYXZlIGEgJyArIGRlc2NyaXB0b3IgKyBfLmluc3BlY3QobmFtZSkgKyAnIG9mICN7YWN0fSdcbiAgICAgICAgLCB2YWxcbiAgICAgICAgLCB2YWx1ZVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBmbGFnKHRoaXMsICdvYmplY3QnLCB2YWx1ZSk7XG4gIH0pO1xuXG5cbiAgLyoqXG4gICAqICMjIyAub3duUHJvcGVydHkobmFtZSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaGFzIGFuIG93biBwcm9wZXJ0eSBgbmFtZWAuXG4gICAqXG4gICAqICAgICBleHBlY3QoJ3Rlc3QnKS50by5oYXZlLm93blByb3BlcnR5KCdsZW5ndGgnKTtcbiAgICpcbiAgICogQG5hbWUgb3duUHJvcGVydHlcbiAgICogQGFsaWFzIGhhdmVPd25Qcm9wZXJ0eVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGFzc2VydE93blByb3BlcnR5IChuYW1lLCBtc2cpIHtcbiAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcbiAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG4gICAgdGhpcy5hc3NlcnQoXG4gICAgICAgIG9iai5oYXNPd25Qcm9wZXJ0eShuYW1lKVxuICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBoYXZlIG93biBwcm9wZXJ0eSAnICsgXy5pbnNwZWN0KG5hbWUpXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBoYXZlIG93biBwcm9wZXJ0eSAnICsgXy5pbnNwZWN0KG5hbWUpXG4gICAgKTtcbiAgfVxuXG4gIEFzc2VydGlvbi5hZGRNZXRob2QoJ293blByb3BlcnR5JywgYXNzZXJ0T3duUHJvcGVydHkpO1xuICBBc3NlcnRpb24uYWRkTWV0aG9kKCdoYXZlT3duUHJvcGVydHknLCBhc3NlcnRPd25Qcm9wZXJ0eSk7XG5cbiAgLyoqXG4gICAqICMjIyAub3duUHJvcGVydHlEZXNjcmlwdG9yKG5hbWVbLCBkZXNjcmlwdG9yWywgbWVzc2FnZV1dKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBoYXMgYW4gb3duIHByb3BlcnR5IGRlc2NyaXB0b3IgYG5hbWVgLCB0aGF0IG9wdGlvbmFsbHkgbWF0Y2hlcyBgZGVzY3JpcHRvcmAuXG4gICAqXG4gICAqICAgICBleHBlY3QoJ3Rlc3QnKS50by5oYXZlLm93blByb3BlcnR5RGVzY3JpcHRvcignbGVuZ3RoJyk7XG4gICAqICAgICBleHBlY3QoJ3Rlc3QnKS50by5oYXZlLm93blByb3BlcnR5RGVzY3JpcHRvcignbGVuZ3RoJywgeyBlbnVtZXJhYmxlOiBmYWxzZSwgY29uZmlndXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IGZhbHNlLCB2YWx1ZTogNCB9KTtcbiAgICogICAgIGV4cGVjdCgndGVzdCcpLm5vdC50by5oYXZlLm93blByb3BlcnR5RGVzY3JpcHRvcignbGVuZ3RoJywgeyBlbnVtZXJhYmxlOiBmYWxzZSwgY29uZmlndXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IGZhbHNlLCB2YWx1ZTogMyB9KTtcbiAgICogICAgIGV4cGVjdCgndGVzdCcpLm93blByb3BlcnR5RGVzY3JpcHRvcignbGVuZ3RoJykudG8uaGF2ZS5wcm9wZXJ0eSgnZW51bWVyYWJsZScsIGZhbHNlKTtcbiAgICogICAgIGV4cGVjdCgndGVzdCcpLm93blByb3BlcnR5RGVzY3JpcHRvcignbGVuZ3RoJykudG8uaGF2ZS5rZXlzKCd2YWx1ZScpO1xuICAgKlxuICAgKiBAbmFtZSBvd25Qcm9wZXJ0eURlc2NyaXB0b3JcbiAgICogQGFsaWFzIGhhdmVPd25Qcm9wZXJ0eURlc2NyaXB0b3JcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAgICogQHBhcmFtIHtPYmplY3R9IGRlc2NyaXB0b3IgX29wdGlvbmFsX1xuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGFzc2VydE93blByb3BlcnR5RGVzY3JpcHRvciAobmFtZSwgZGVzY3JpcHRvciwgbXNnKSB7XG4gICAgaWYgKHR5cGVvZiBkZXNjcmlwdG9yID09PSAnc3RyaW5nJykge1xuICAgICAgbXNnID0gZGVzY3JpcHRvcjtcbiAgICAgIGRlc2NyaXB0b3IgPSBudWxsO1xuICAgIH1cbiAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcbiAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG4gICAgdmFyIGFjdHVhbERlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE9iamVjdChvYmopLCBuYW1lKTtcbiAgICBpZiAoYWN0dWFsRGVzY3JpcHRvciAmJiBkZXNjcmlwdG9yKSB7XG4gICAgICB0aGlzLmFzc2VydChcbiAgICAgICAgICBfLmVxbChkZXNjcmlwdG9yLCBhY3R1YWxEZXNjcmlwdG9yKVxuICAgICAgICAsICdleHBlY3RlZCB0aGUgb3duIHByb3BlcnR5IGRlc2NyaXB0b3IgZm9yICcgKyBfLmluc3BlY3QobmFtZSkgKyAnIG9uICN7dGhpc30gdG8gbWF0Y2ggJyArIF8uaW5zcGVjdChkZXNjcmlwdG9yKSArICcsIGdvdCAnICsgXy5pbnNwZWN0KGFjdHVhbERlc2NyaXB0b3IpXG4gICAgICAgICwgJ2V4cGVjdGVkIHRoZSBvd24gcHJvcGVydHkgZGVzY3JpcHRvciBmb3IgJyArIF8uaW5zcGVjdChuYW1lKSArICcgb24gI3t0aGlzfSB0byBub3QgbWF0Y2ggJyArIF8uaW5zcGVjdChkZXNjcmlwdG9yKVxuICAgICAgICAsIGRlc2NyaXB0b3JcbiAgICAgICAgLCBhY3R1YWxEZXNjcmlwdG9yXG4gICAgICAgICwgdHJ1ZVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hc3NlcnQoXG4gICAgICAgICAgYWN0dWFsRGVzY3JpcHRvclxuICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGhhdmUgYW4gb3duIHByb3BlcnR5IGRlc2NyaXB0b3IgZm9yICcgKyBfLmluc3BlY3QobmFtZSlcbiAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3QgaGF2ZSBhbiBvd24gcHJvcGVydHkgZGVzY3JpcHRvciBmb3IgJyArIF8uaW5zcGVjdChuYW1lKVxuICAgICAgKTtcbiAgICB9XG4gICAgZmxhZyh0aGlzLCAnb2JqZWN0JywgYWN0dWFsRGVzY3JpcHRvcik7XG4gIH1cblxuICBBc3NlcnRpb24uYWRkTWV0aG9kKCdvd25Qcm9wZXJ0eURlc2NyaXB0b3InLCBhc3NlcnRPd25Qcm9wZXJ0eURlc2NyaXB0b3IpO1xuICBBc3NlcnRpb24uYWRkTWV0aG9kKCdoYXZlT3duUHJvcGVydHlEZXNjcmlwdG9yJywgYXNzZXJ0T3duUHJvcGVydHlEZXNjcmlwdG9yKTtcblxuICAvKipcbiAgICogIyMjIC5sZW5ndGhcbiAgICpcbiAgICogU2V0cyB0aGUgYGRvTGVuZ3RoYCBmbGFnIGxhdGVyIHVzZWQgYXMgYSBjaGFpbiBwcmVjdXJzb3IgdG8gYSB2YWx1ZVxuICAgKiBjb21wYXJpc29uIGZvciB0aGUgYGxlbmd0aGAgcHJvcGVydHkuXG4gICAqXG4gICAqICAgICBleHBlY3QoJ2ZvbycpLnRvLmhhdmUubGVuZ3RoLmFib3ZlKDIpO1xuICAgKiAgICAgZXhwZWN0KFsgMSwgMiwgMyBdKS50by5oYXZlLmxlbmd0aC5hYm92ZSgyKTtcbiAgICogICAgIGV4cGVjdCgnZm9vJykudG8uaGF2ZS5sZW5ndGguYmVsb3coNCk7XG4gICAqICAgICBleHBlY3QoWyAxLCAyLCAzIF0pLnRvLmhhdmUubGVuZ3RoLmJlbG93KDQpO1xuICAgKiAgICAgZXhwZWN0KCdmb28nKS50by5oYXZlLmxlbmd0aC53aXRoaW4oMiw0KTtcbiAgICogICAgIGV4cGVjdChbIDEsIDIsIDMgXSkudG8uaGF2ZS5sZW5ndGgud2l0aGluKDIsNCk7XG4gICAqXG4gICAqICpEZXByZWNhdGlvbiBub3RpY2U6KiBVc2luZyBgbGVuZ3RoYCBhcyBhbiBhc3NlcnRpb24gd2lsbCBiZSBkZXByZWNhdGVkXG4gICAqIGluIHZlcnNpb24gMi40LjAgYW5kIHJlbW92ZWQgaW4gMy4wLjAuIENvZGUgdXNpbmcgdGhlIG9sZCBzdHlsZSBvZlxuICAgKiBhc3NlcnRpbmcgZm9yIGBsZW5ndGhgIHByb3BlcnR5IHZhbHVlIHVzaW5nIGBsZW5ndGgodmFsdWUpYCBzaG91bGQgYmVcbiAgICogc3dpdGNoZWQgdG8gdXNlIGBsZW5ndGhPZih2YWx1ZSlgIGluc3RlYWQuXG4gICAqXG4gICAqIEBuYW1lIGxlbmd0aFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICAvKipcbiAgICogIyMjIC5sZW5ndGhPZih2YWx1ZVssIG1lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCdzIGBsZW5ndGhgIHByb3BlcnR5IGhhc1xuICAgKiB0aGUgZXhwZWN0ZWQgdmFsdWUuXG4gICAqXG4gICAqICAgICBleHBlY3QoWyAxLCAyLCAzXSkudG8uaGF2ZS5sZW5ndGhPZigzKTtcbiAgICogICAgIGV4cGVjdCgnZm9vYmFyJykudG8uaGF2ZS5sZW5ndGhPZig2KTtcbiAgICpcbiAgICogQG5hbWUgbGVuZ3RoT2ZcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGxlbmd0aFxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGFzc2VydExlbmd0aENoYWluICgpIHtcbiAgICBmbGFnKHRoaXMsICdkb0xlbmd0aCcsIHRydWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gYXNzZXJ0TGVuZ3RoIChuLCBtc2cpIHtcbiAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcbiAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG4gICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8uaGF2ZS5wcm9wZXJ0eSgnbGVuZ3RoJyk7XG4gICAgdmFyIGxlbiA9IG9iai5sZW5ndGg7XG5cbiAgICB0aGlzLmFzc2VydChcbiAgICAgICAgbGVuID09IG5cbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gaGF2ZSBhIGxlbmd0aCBvZiAje2V4cH0gYnV0IGdvdCAje2FjdH0nXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBoYXZlIGEgbGVuZ3RoIG9mICN7YWN0fSdcbiAgICAgICwgblxuICAgICAgLCBsZW5cbiAgICApO1xuICB9XG5cbiAgQXNzZXJ0aW9uLmFkZENoYWluYWJsZU1ldGhvZCgnbGVuZ3RoJywgYXNzZXJ0TGVuZ3RoLCBhc3NlcnRMZW5ndGhDaGFpbik7XG4gIEFzc2VydGlvbi5hZGRNZXRob2QoJ2xlbmd0aE9mJywgYXNzZXJ0TGVuZ3RoKTtcblxuICAvKipcbiAgICogIyMjIC5tYXRjaChyZWdleHApXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IG1hdGNoZXMgYSByZWd1bGFyIGV4cHJlc3Npb24uXG4gICAqXG4gICAqICAgICBleHBlY3QoJ2Zvb2JhcicpLnRvLm1hdGNoKC9eZm9vLyk7XG4gICAqXG4gICAqIEBuYW1lIG1hdGNoXG4gICAqIEBhbGlhcyBtYXRjaGVzXG4gICAqIEBwYXJhbSB7UmVnRXhwfSBSZWd1bGFyRXhwcmVzc2lvblxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuICBmdW5jdGlvbiBhc3NlcnRNYXRjaChyZSwgbXNnKSB7XG4gICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG4gICAgdmFyIG9iaiA9IGZsYWcodGhpcywgJ29iamVjdCcpO1xuICAgIHRoaXMuYXNzZXJ0KFxuICAgICAgICByZS5leGVjKG9iailcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbWF0Y2ggJyArIHJlXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IG5vdCB0byBtYXRjaCAnICsgcmVcbiAgICApO1xuICB9XG5cbiAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnbWF0Y2gnLCBhc3NlcnRNYXRjaCk7XG4gIEFzc2VydGlvbi5hZGRNZXRob2QoJ21hdGNoZXMnLCBhc3NlcnRNYXRjaCk7XG5cbiAgLyoqXG4gICAqICMjIyAuc3RyaW5nKHN0cmluZylcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IHRoZSBzdHJpbmcgdGFyZ2V0IGNvbnRhaW5zIGFub3RoZXIgc3RyaW5nLlxuICAgKlxuICAgKiAgICAgZXhwZWN0KCdmb29iYXInKS50by5oYXZlLnN0cmluZygnYmFyJyk7XG4gICAqXG4gICAqIEBuYW1lIHN0cmluZ1xuICAgKiBAcGFyYW0ge1N0cmluZ30gc3RyaW5nXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnc3RyaW5nJywgZnVuY3Rpb24gKHN0ciwgbXNnKSB7XG4gICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG4gICAgdmFyIG9iaiA9IGZsYWcodGhpcywgJ29iamVjdCcpO1xuICAgIG5ldyBBc3NlcnRpb24ob2JqLCBtc2cpLmlzLmEoJ3N0cmluZycpO1xuXG4gICAgdGhpcy5hc3NlcnQoXG4gICAgICAgIH5vYmouaW5kZXhPZihzdHIpXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGNvbnRhaW4gJyArIF8uaW5zcGVjdChzdHIpXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBjb250YWluICcgKyBfLmluc3BlY3Qoc3RyKVxuICAgICk7XG4gIH0pO1xuXG5cbiAgLyoqXG4gICAqICMjIyAua2V5cyhrZXkxLCBba2V5Ml0sIFsuLi5dKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBjb250YWlucyBhbnkgb3IgYWxsIG9mIHRoZSBwYXNzZWQtaW4ga2V5cy5cbiAgICogVXNlIGluIGNvbWJpbmF0aW9uIHdpdGggYGFueWAsIGBhbGxgLCBgY29udGFpbnNgLCBvciBgaGF2ZWAgd2lsbCBhZmZlY3RcbiAgICogd2hhdCB3aWxsIHBhc3MuXG4gICAqXG4gICAqIFdoZW4gdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIGBhbnlgLCBhdCBsZWFzdCBvbmUga2V5IHRoYXQgaXMgcGFzc2VkXG4gICAqIGluIG11c3QgZXhpc3QgaW4gdGhlIHRhcmdldCBvYmplY3QuIFRoaXMgaXMgcmVnYXJkbGVzcyB3aGV0aGVyIG9yIG5vdFxuICAgKiB0aGUgYGhhdmVgIG9yIGBjb250YWluYCBxdWFsaWZpZXJzIGFyZSB1c2VkLiBOb3RlLCBlaXRoZXIgYGFueWAgb3IgYGFsbGBcbiAgICogc2hvdWxkIGJlIHVzZWQgaW4gdGhlIGFzc2VydGlvbi4gSWYgbmVpdGhlciBhcmUgdXNlZCwgdGhlIGFzc2VydGlvbiBpc1xuICAgKiBkZWZhdWx0ZWQgdG8gYGFsbGAuXG4gICAqXG4gICAqIFdoZW4gYm90aCBgYWxsYCBhbmQgYGNvbnRhaW5gIGFyZSB1c2VkLCB0aGUgdGFyZ2V0IG9iamVjdCBtdXN0IGhhdmUgYXRcbiAgICogbGVhc3QgYWxsIG9mIHRoZSBwYXNzZWQtaW4ga2V5cyBidXQgbWF5IGhhdmUgbW9yZSBrZXlzIG5vdCBsaXN0ZWQuXG4gICAqXG4gICAqIFdoZW4gYm90aCBgYWxsYCBhbmQgYGhhdmVgIGFyZSB1c2VkLCB0aGUgdGFyZ2V0IG9iamVjdCBtdXN0IGJvdGggY29udGFpblxuICAgKiBhbGwgb2YgdGhlIHBhc3NlZC1pbiBrZXlzIEFORCB0aGUgbnVtYmVyIG9mIGtleXMgaW4gdGhlIHRhcmdldCBvYmplY3QgbXVzdFxuICAgKiBtYXRjaCB0aGUgbnVtYmVyIG9mIGtleXMgcGFzc2VkIGluIChpbiBvdGhlciB3b3JkcywgYSB0YXJnZXQgb2JqZWN0IG11c3RcbiAgICogaGF2ZSBhbGwgYW5kIG9ubHkgYWxsIG9mIHRoZSBwYXNzZWQtaW4ga2V5cykuXG4gICAqXG4gICAqICAgICBleHBlY3QoeyBmb286IDEsIGJhcjogMiB9KS50by5oYXZlLmFueS5rZXlzKCdmb28nLCAnYmF6Jyk7XG4gICAqICAgICBleHBlY3QoeyBmb286IDEsIGJhcjogMiB9KS50by5oYXZlLmFueS5rZXlzKCdmb28nKTtcbiAgICogICAgIGV4cGVjdCh7IGZvbzogMSwgYmFyOiAyIH0pLnRvLmNvbnRhaW4uYW55LmtleXMoJ2JhcicsICdiYXonKTtcbiAgICogICAgIGV4cGVjdCh7IGZvbzogMSwgYmFyOiAyIH0pLnRvLmNvbnRhaW4uYW55LmtleXMoWydmb28nXSk7XG4gICAqICAgICBleHBlY3QoeyBmb286IDEsIGJhcjogMiB9KS50by5jb250YWluLmFueS5rZXlzKHsnZm9vJzogNn0pO1xuICAgKiAgICAgZXhwZWN0KHsgZm9vOiAxLCBiYXI6IDIgfSkudG8uaGF2ZS5hbGwua2V5cyhbJ2JhcicsICdmb28nXSk7XG4gICAqICAgICBleHBlY3QoeyBmb286IDEsIGJhcjogMiB9KS50by5oYXZlLmFsbC5rZXlzKHsnYmFyJzogNiwgJ2Zvbyc6IDd9KTtcbiAgICogICAgIGV4cGVjdCh7IGZvbzogMSwgYmFyOiAyLCBiYXo6IDMgfSkudG8uY29udGFpbi5hbGwua2V5cyhbJ2JhcicsICdmb28nXSk7XG4gICAqICAgICBleHBlY3QoeyBmb286IDEsIGJhcjogMiwgYmF6OiAzIH0pLnRvLmNvbnRhaW4uYWxsLmtleXMoeydiYXInOiA2fSk7XG4gICAqXG4gICAqXG4gICAqIEBuYW1lIGtleXNcbiAgICogQGFsaWFzIGtleVxuICAgKiBAcGFyYW0gey4uLlN0cmluZ3xBcnJheXxPYmplY3R9IGtleXNcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgZnVuY3Rpb24gYXNzZXJ0S2V5cyAoa2V5cykge1xuICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKVxuICAgICAgLCBzdHJcbiAgICAgICwgb2sgPSB0cnVlXG4gICAgICAsIG1peGVkQXJnc01zZyA9ICdrZXlzIG11c3QgYmUgZ2l2ZW4gc2luZ2xlIGFyZ3VtZW50IG9mIEFycmF5fE9iamVjdHxTdHJpbmcsIG9yIG11bHRpcGxlIFN0cmluZyBhcmd1bWVudHMnO1xuXG4gICAgc3dpdGNoIChfLnR5cGUoa2V5cykpIHtcbiAgICAgIGNhc2UgXCJhcnJheVwiOlxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHRocm93IChuZXcgRXJyb3IobWl4ZWRBcmdzTXNnKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIm9iamVjdFwiOlxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHRocm93IChuZXcgRXJyb3IobWl4ZWRBcmdzTXNnKSk7XG4gICAgICAgIGtleXMgPSBPYmplY3Qua2V5cyhrZXlzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBrZXlzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICBpZiAoIWtleXMubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ2tleXMgcmVxdWlyZWQnKTtcblxuICAgIHZhciBhY3R1YWwgPSBPYmplY3Qua2V5cyhvYmopXG4gICAgICAsIGV4cGVjdGVkID0ga2V5c1xuICAgICAgLCBsZW4gPSBrZXlzLmxlbmd0aFxuICAgICAgLCBhbnkgPSBmbGFnKHRoaXMsICdhbnknKVxuICAgICAgLCBhbGwgPSBmbGFnKHRoaXMsICdhbGwnKTtcblxuICAgIGlmICghYW55ICYmICFhbGwpIHtcbiAgICAgIGFsbCA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8gSGFzIGFueVxuICAgIGlmIChhbnkpIHtcbiAgICAgIHZhciBpbnRlcnNlY3Rpb24gPSBleHBlY3RlZC5maWx0ZXIoZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgIHJldHVybiB+YWN0dWFsLmluZGV4T2Yoa2V5KTtcbiAgICAgIH0pO1xuICAgICAgb2sgPSBpbnRlcnNlY3Rpb24ubGVuZ3RoID4gMDtcbiAgICB9XG5cbiAgICAvLyBIYXMgYWxsXG4gICAgaWYgKGFsbCkge1xuICAgICAgb2sgPSBrZXlzLmV2ZXJ5KGZ1bmN0aW9uKGtleSl7XG4gICAgICAgIHJldHVybiB+YWN0dWFsLmluZGV4T2Yoa2V5KTtcbiAgICAgIH0pO1xuICAgICAgaWYgKCFmbGFnKHRoaXMsICduZWdhdGUnKSAmJiAhZmxhZyh0aGlzLCAnY29udGFpbnMnKSkge1xuICAgICAgICBvayA9IG9rICYmIGtleXMubGVuZ3RoID09IGFjdHVhbC5sZW5ndGg7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gS2V5IHN0cmluZ1xuICAgIGlmIChsZW4gPiAxKSB7XG4gICAgICBrZXlzID0ga2V5cy5tYXAoZnVuY3Rpb24oa2V5KXtcbiAgICAgICAgcmV0dXJuIF8uaW5zcGVjdChrZXkpO1xuICAgICAgfSk7XG4gICAgICB2YXIgbGFzdCA9IGtleXMucG9wKCk7XG4gICAgICBpZiAoYWxsKSB7XG4gICAgICAgIHN0ciA9IGtleXMuam9pbignLCAnKSArICcsIGFuZCAnICsgbGFzdDtcbiAgICAgIH1cbiAgICAgIGlmIChhbnkpIHtcbiAgICAgICAgc3RyID0ga2V5cy5qb2luKCcsICcpICsgJywgb3IgJyArIGxhc3Q7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0ciA9IF8uaW5zcGVjdChrZXlzWzBdKTtcbiAgICB9XG5cbiAgICAvLyBGb3JtXG4gICAgc3RyID0gKGxlbiA+IDEgPyAna2V5cyAnIDogJ2tleSAnKSArIHN0cjtcblxuICAgIC8vIEhhdmUgLyBpbmNsdWRlXG4gICAgc3RyID0gKGZsYWcodGhpcywgJ2NvbnRhaW5zJykgPyAnY29udGFpbiAnIDogJ2hhdmUgJykgKyBzdHI7XG5cbiAgICAvLyBBc3NlcnRpb25cbiAgICB0aGlzLmFzc2VydChcbiAgICAgICAgb2tcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gJyArIHN0clxuICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3QgJyArIHN0clxuICAgICAgLCBleHBlY3RlZC5zbGljZSgwKS5zb3J0KClcbiAgICAgICwgYWN0dWFsLnNvcnQoKVxuICAgICAgLCB0cnVlXG4gICAgKTtcbiAgfVxuXG4gIEFzc2VydGlvbi5hZGRNZXRob2QoJ2tleXMnLCBhc3NlcnRLZXlzKTtcbiAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgna2V5JywgYXNzZXJ0S2V5cyk7XG5cbiAgLyoqXG4gICAqICMjIyAudGhyb3coY29uc3RydWN0b3IpXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCB0aGUgZnVuY3Rpb24gdGFyZ2V0IHdpbGwgdGhyb3cgYSBzcGVjaWZpYyBlcnJvciwgb3Igc3BlY2lmaWMgdHlwZSBvZiBlcnJvclxuICAgKiAoYXMgZGV0ZXJtaW5lZCB1c2luZyBgaW5zdGFuY2VvZmApLCBvcHRpb25hbGx5IHdpdGggYSBSZWdFeHAgb3Igc3RyaW5nIGluY2x1c2lvbiB0ZXN0XG4gICAqIGZvciB0aGUgZXJyb3IncyBtZXNzYWdlLlxuICAgKlxuICAgKiAgICAgdmFyIGVyciA9IG5ldyBSZWZlcmVuY2VFcnJvcignVGhpcyBpcyBhIGJhZCBmdW5jdGlvbi4nKTtcbiAgICogICAgIHZhciBmbiA9IGZ1bmN0aW9uICgpIHsgdGhyb3cgZXJyOyB9XG4gICAqICAgICBleHBlY3QoZm4pLnRvLnRocm93KFJlZmVyZW5jZUVycm9yKTtcbiAgICogICAgIGV4cGVjdChmbikudG8udGhyb3coRXJyb3IpO1xuICAgKiAgICAgZXhwZWN0KGZuKS50by50aHJvdygvYmFkIGZ1bmN0aW9uLyk7XG4gICAqICAgICBleHBlY3QoZm4pLnRvLm5vdC50aHJvdygnZ29vZCBmdW5jdGlvbicpO1xuICAgKiAgICAgZXhwZWN0KGZuKS50by50aHJvdyhSZWZlcmVuY2VFcnJvciwgL2JhZCBmdW5jdGlvbi8pO1xuICAgKiAgICAgZXhwZWN0KGZuKS50by50aHJvdyhlcnIpO1xuICAgKlxuICAgKiBQbGVhc2Ugbm90ZSB0aGF0IHdoZW4gYSB0aHJvdyBleHBlY3RhdGlvbiBpcyBuZWdhdGVkLCBpdCB3aWxsIGNoZWNrIGVhY2hcbiAgICogcGFyYW1ldGVyIGluZGVwZW5kZW50bHksIHN0YXJ0aW5nIHdpdGggZXJyb3IgY29uc3RydWN0b3IgdHlwZS4gVGhlIGFwcHJvcHJpYXRlIHdheVxuICAgKiB0byBjaGVjayBmb3IgdGhlIGV4aXN0ZW5jZSBvZiBhIHR5cGUgb2YgZXJyb3IgYnV0IGZvciBhIG1lc3NhZ2UgdGhhdCBkb2VzIG5vdCBtYXRjaFxuICAgKiBpcyB0byB1c2UgYGFuZGAuXG4gICAqXG4gICAqICAgICBleHBlY3QoZm4pLnRvLnRocm93KFJlZmVyZW5jZUVycm9yKVxuICAgKiAgICAgICAgLmFuZC5ub3QudGhyb3coL2dvb2QgZnVuY3Rpb24vKTtcbiAgICpcbiAgICogQG5hbWUgdGhyb3dcbiAgICogQGFsaWFzIHRocm93c1xuICAgKiBAYWxpYXMgVGhyb3dcbiAgICogQHBhcmFtIHtFcnJvckNvbnN0cnVjdG9yfSBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0ge1N0cmluZ3xSZWdFeHB9IGV4cGVjdGVkIGVycm9yIG1lc3NhZ2VcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Vycm9yI0Vycm9yX3R5cGVzXG4gICAqIEByZXR1cm5zIGVycm9yIGZvciBjaGFpbmluZyAobnVsbCBpZiBubyBlcnJvcilcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgZnVuY3Rpb24gYXNzZXJ0VGhyb3dzIChjb25zdHJ1Y3RvciwgZXJyTXNnLCBtc2cpIHtcbiAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcbiAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG4gICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykuaXMuYSgnZnVuY3Rpb24nKTtcblxuICAgIHZhciB0aHJvd24gPSBmYWxzZVxuICAgICAgLCBkZXNpcmVkRXJyb3IgPSBudWxsXG4gICAgICAsIG5hbWUgPSBudWxsXG4gICAgICAsIHRocm93bkVycm9yID0gbnVsbDtcblxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBlcnJNc2cgPSBudWxsO1xuICAgICAgY29uc3RydWN0b3IgPSBudWxsO1xuICAgIH0gZWxzZSBpZiAoY29uc3RydWN0b3IgJiYgKGNvbnN0cnVjdG9yIGluc3RhbmNlb2YgUmVnRXhwIHx8ICdzdHJpbmcnID09PSB0eXBlb2YgY29uc3RydWN0b3IpKSB7XG4gICAgICBlcnJNc2cgPSBjb25zdHJ1Y3RvcjtcbiAgICAgIGNvbnN0cnVjdG9yID0gbnVsbDtcbiAgICB9IGVsc2UgaWYgKGNvbnN0cnVjdG9yICYmIGNvbnN0cnVjdG9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIGRlc2lyZWRFcnJvciA9IGNvbnN0cnVjdG9yO1xuICAgICAgY29uc3RydWN0b3IgPSBudWxsO1xuICAgICAgZXJyTXNnID0gbnVsbDtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBjb25zdHJ1Y3RvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgbmFtZSA9IGNvbnN0cnVjdG9yLnByb3RvdHlwZS5uYW1lO1xuICAgICAgaWYgKCFuYW1lIHx8IChuYW1lID09PSAnRXJyb3InICYmIGNvbnN0cnVjdG9yICE9PSBFcnJvcikpIHtcbiAgICAgICAgbmFtZSA9IGNvbnN0cnVjdG9yLm5hbWUgfHwgKG5ldyBjb25zdHJ1Y3RvcigpKS5uYW1lO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdHJ1Y3RvciA9IG51bGw7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIG9iaigpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgLy8gZmlyc3QsIGNoZWNrIGRlc2lyZWQgZXJyb3JcbiAgICAgIGlmIChkZXNpcmVkRXJyb3IpIHtcbiAgICAgICAgdGhpcy5hc3NlcnQoXG4gICAgICAgICAgICBlcnIgPT09IGRlc2lyZWRFcnJvclxuICAgICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gdGhyb3cgI3tleHB9IGJ1dCAje2FjdH0gd2FzIHRocm93bidcbiAgICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCB0aHJvdyAje2V4cH0nXG4gICAgICAgICAgLCAoZGVzaXJlZEVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBkZXNpcmVkRXJyb3IudG9TdHJpbmcoKSA6IGRlc2lyZWRFcnJvcilcbiAgICAgICAgICAsIChlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci50b1N0cmluZygpIDogZXJyKVxuICAgICAgICApO1xuXG4gICAgICAgIGZsYWcodGhpcywgJ29iamVjdCcsIGVycik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICAvLyBuZXh0LCBjaGVjayBjb25zdHJ1Y3RvclxuICAgICAgaWYgKGNvbnN0cnVjdG9yKSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0KFxuICAgICAgICAgICAgZXJyIGluc3RhbmNlb2YgY29uc3RydWN0b3JcbiAgICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIHRocm93ICN7ZXhwfSBidXQgI3thY3R9IHdhcyB0aHJvd24nXG4gICAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3QgdGhyb3cgI3tleHB9IGJ1dCAje2FjdH0gd2FzIHRocm93bidcbiAgICAgICAgICAsIG5hbWVcbiAgICAgICAgICAsIChlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci50b1N0cmluZygpIDogZXJyKVxuICAgICAgICApO1xuXG4gICAgICAgIGlmICghZXJyTXNnKSB7XG4gICAgICAgICAgZmxhZyh0aGlzLCAnb2JqZWN0JywgZXJyKTtcbiAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBuZXh0LCBjaGVjayBtZXNzYWdlXG4gICAgICB2YXIgbWVzc2FnZSA9ICdlcnJvcicgPT09IF8udHlwZShlcnIpICYmIFwibWVzc2FnZVwiIGluIGVyclxuICAgICAgICA/IGVyci5tZXNzYWdlXG4gICAgICAgIDogJycgKyBlcnI7XG5cbiAgICAgIGlmICgobWVzc2FnZSAhPSBudWxsKSAmJiBlcnJNc2cgJiYgZXJyTXNnIGluc3RhbmNlb2YgUmVnRXhwKSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0KFxuICAgICAgICAgICAgZXJyTXNnLmV4ZWMobWVzc2FnZSlcbiAgICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIHRocm93IGVycm9yIG1hdGNoaW5nICN7ZXhwfSBidXQgZ290ICN7YWN0fSdcbiAgICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIHRocm93IGVycm9yIG5vdCBtYXRjaGluZyAje2V4cH0nXG4gICAgICAgICAgLCBlcnJNc2dcbiAgICAgICAgICAsIG1lc3NhZ2VcbiAgICAgICAgKTtcblxuICAgICAgICBmbGFnKHRoaXMsICdvYmplY3QnLCBlcnIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0gZWxzZSBpZiAoKG1lc3NhZ2UgIT0gbnVsbCkgJiYgZXJyTXNnICYmICdzdHJpbmcnID09PSB0eXBlb2YgZXJyTXNnKSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0KFxuICAgICAgICAgICAgfm1lc3NhZ2UuaW5kZXhPZihlcnJNc2cpXG4gICAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byB0aHJvdyBlcnJvciBpbmNsdWRpbmcgI3tleHB9IGJ1dCBnb3QgI3thY3R9J1xuICAgICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gdGhyb3cgZXJyb3Igbm90IGluY2x1ZGluZyAje2FjdH0nXG4gICAgICAgICAgLCBlcnJNc2dcbiAgICAgICAgICAsIG1lc3NhZ2VcbiAgICAgICAgKTtcblxuICAgICAgICBmbGFnKHRoaXMsICdvYmplY3QnLCBlcnIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93biA9IHRydWU7XG4gICAgICAgIHRocm93bkVycm9yID0gZXJyO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBhY3R1YWxseUdvdCA9ICcnXG4gICAgICAsIGV4cGVjdGVkVGhyb3duID0gbmFtZSAhPT0gbnVsbFxuICAgICAgICA/IG5hbWVcbiAgICAgICAgOiBkZXNpcmVkRXJyb3JcbiAgICAgICAgICA/ICcje2V4cH0nIC8vXy5pbnNwZWN0KGRlc2lyZWRFcnJvcilcbiAgICAgICAgICA6ICdhbiBlcnJvcic7XG5cbiAgICBpZiAodGhyb3duKSB7XG4gICAgICBhY3R1YWxseUdvdCA9ICcgYnV0ICN7YWN0fSB3YXMgdGhyb3duJ1xuICAgIH1cblxuICAgIHRoaXMuYXNzZXJ0KFxuICAgICAgICB0aHJvd24gPT09IHRydWVcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gdGhyb3cgJyArIGV4cGVjdGVkVGhyb3duICsgYWN0dWFsbHlHb3RcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IHRocm93ICcgKyBleHBlY3RlZFRocm93biArIGFjdHVhbGx5R290XG4gICAgICAsIChkZXNpcmVkRXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGRlc2lyZWRFcnJvci50b1N0cmluZygpIDogZGVzaXJlZEVycm9yKVxuICAgICAgLCAodGhyb3duRXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IHRocm93bkVycm9yLnRvU3RyaW5nKCkgOiB0aHJvd25FcnJvcilcbiAgICApO1xuXG4gICAgZmxhZyh0aGlzLCAnb2JqZWN0JywgdGhyb3duRXJyb3IpO1xuICB9O1xuXG4gIEFzc2VydGlvbi5hZGRNZXRob2QoJ3Rocm93JywgYXNzZXJ0VGhyb3dzKTtcbiAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgndGhyb3dzJywgYXNzZXJ0VGhyb3dzKTtcbiAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnVGhyb3cnLCBhc3NlcnRUaHJvd3MpO1xuXG4gIC8qKlxuICAgKiAjIyMgLnJlc3BvbmRUbyhtZXRob2QpXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCB0aGUgb2JqZWN0IG9yIGNsYXNzIHRhcmdldCB3aWxsIHJlc3BvbmQgdG8gYSBtZXRob2QuXG4gICAqXG4gICAqICAgICBLbGFzcy5wcm90b3R5cGUuYmFyID0gZnVuY3Rpb24oKXt9O1xuICAgKiAgICAgZXhwZWN0KEtsYXNzKS50by5yZXNwb25kVG8oJ2JhcicpO1xuICAgKiAgICAgZXhwZWN0KG9iaikudG8ucmVzcG9uZFRvKCdiYXInKTtcbiAgICpcbiAgICogVG8gY2hlY2sgaWYgYSBjb25zdHJ1Y3RvciB3aWxsIHJlc3BvbmQgdG8gYSBzdGF0aWMgZnVuY3Rpb24sXG4gICAqIHNldCB0aGUgYGl0c2VsZmAgZmxhZy5cbiAgICpcbiAgICogICAgIEtsYXNzLmJheiA9IGZ1bmN0aW9uKCl7fTtcbiAgICogICAgIGV4cGVjdChLbGFzcykuaXRzZWxmLnRvLnJlc3BvbmRUbygnYmF6Jyk7XG4gICAqXG4gICAqIEBuYW1lIHJlc3BvbmRUb1xuICAgKiBAYWxpYXMgcmVzcG9uZHNUb1xuICAgKiBAcGFyYW0ge1N0cmluZ30gbWV0aG9kXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgZnVuY3Rpb24gcmVzcG9uZFRvIChtZXRob2QsIG1zZykge1xuICAgIGlmIChtc2cpIGZsYWcodGhpcywgJ21lc3NhZ2UnLCBtc2cpO1xuICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKVxuICAgICAgLCBpdHNlbGYgPSBmbGFnKHRoaXMsICdpdHNlbGYnKVxuICAgICAgLCBjb250ZXh0ID0gKCdmdW5jdGlvbicgPT09IF8udHlwZShvYmopICYmICFpdHNlbGYpXG4gICAgICAgID8gb2JqLnByb3RvdHlwZVttZXRob2RdXG4gICAgICAgIDogb2JqW21ldGhvZF07XG5cbiAgICB0aGlzLmFzc2VydChcbiAgICAgICAgJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIGNvbnRleHRcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gcmVzcG9uZCB0byAnICsgXy5pbnNwZWN0KG1ldGhvZClcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IHJlc3BvbmQgdG8gJyArIF8uaW5zcGVjdChtZXRob2QpXG4gICAgKTtcbiAgfVxuXG4gIEFzc2VydGlvbi5hZGRNZXRob2QoJ3Jlc3BvbmRUbycsIHJlc3BvbmRUbyk7XG4gIEFzc2VydGlvbi5hZGRNZXRob2QoJ3Jlc3BvbmRzVG8nLCByZXNwb25kVG8pO1xuXG4gIC8qKlxuICAgKiAjIyMgLml0c2VsZlxuICAgKlxuICAgKiBTZXRzIHRoZSBgaXRzZWxmYCBmbGFnLCBsYXRlciB1c2VkIGJ5IHRoZSBgcmVzcG9uZFRvYCBhc3NlcnRpb24uXG4gICAqXG4gICAqICAgICBmdW5jdGlvbiBGb28oKSB7fVxuICAgKiAgICAgRm9vLmJhciA9IGZ1bmN0aW9uKCkge31cbiAgICogICAgIEZvby5wcm90b3R5cGUuYmF6ID0gZnVuY3Rpb24oKSB7fVxuICAgKlxuICAgKiAgICAgZXhwZWN0KEZvbykuaXRzZWxmLnRvLnJlc3BvbmRUbygnYmFyJyk7XG4gICAqICAgICBleHBlY3QoRm9vKS5pdHNlbGYubm90LnRvLnJlc3BvbmRUbygnYmF6Jyk7XG4gICAqXG4gICAqIEBuYW1lIGl0c2VsZlxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBBc3NlcnRpb24uYWRkUHJvcGVydHkoJ2l0c2VsZicsIGZ1bmN0aW9uICgpIHtcbiAgICBmbGFnKHRoaXMsICdpdHNlbGYnLCB0cnVlKTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqICMjIyAuc2F0aXNmeShtZXRob2QpXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IHBhc3NlcyBhIGdpdmVuIHRydXRoIHRlc3QuXG4gICAqXG4gICAqICAgICBleHBlY3QoMSkudG8uc2F0aXNmeShmdW5jdGlvbihudW0pIHsgcmV0dXJuIG51bSA+IDA7IH0pO1xuICAgKlxuICAgKiBAbmFtZSBzYXRpc2Z5XG4gICAqIEBhbGlhcyBzYXRpc2ZpZXNcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbWF0Y2hlclxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHNhdGlzZnkgKG1hdGNoZXIsIG1zZykge1xuICAgIGlmIChtc2cpIGZsYWcodGhpcywgJ21lc3NhZ2UnLCBtc2cpO1xuICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKTtcbiAgICB2YXIgcmVzdWx0ID0gbWF0Y2hlcihvYmopO1xuICAgIHRoaXMuYXNzZXJ0KFxuICAgICAgICByZXN1bHRcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gc2F0aXNmeSAnICsgXy5vYmpEaXNwbGF5KG1hdGNoZXIpXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBzYXRpc2Z5JyArIF8ub2JqRGlzcGxheShtYXRjaGVyKVxuICAgICAgLCB0aGlzLm5lZ2F0ZSA/IGZhbHNlIDogdHJ1ZVxuICAgICAgLCByZXN1bHRcbiAgICApO1xuICB9XG5cbiAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnc2F0aXNmeScsIHNhdGlzZnkpO1xuICBBc3NlcnRpb24uYWRkTWV0aG9kKCdzYXRpc2ZpZXMnLCBzYXRpc2Z5KTtcblxuICAvKipcbiAgICogIyMjIC5jbG9zZVRvKGV4cGVjdGVkLCBkZWx0YSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaXMgZXF1YWwgYGV4cGVjdGVkYCwgdG8gd2l0aGluIGEgKy8tIGBkZWx0YWAgcmFuZ2UuXG4gICAqXG4gICAqICAgICBleHBlY3QoMS41KS50by5iZS5jbG9zZVRvKDEsIDAuNSk7XG4gICAqXG4gICAqIEBuYW1lIGNsb3NlVG9cbiAgICogQGFsaWFzIGFwcHJveGltYXRlbHlcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGV4cGVjdGVkXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBkZWx0YVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGNsb3NlVG8oZXhwZWN0ZWQsIGRlbHRhLCBtc2cpIHtcbiAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcbiAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG5cbiAgICBuZXcgQXNzZXJ0aW9uKG9iaiwgbXNnKS5pcy5hKCdudW1iZXInKTtcbiAgICBpZiAoXy50eXBlKGV4cGVjdGVkKSAhPT0gJ251bWJlcicgfHwgXy50eXBlKGRlbHRhKSAhPT0gJ251bWJlcicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigndGhlIGFyZ3VtZW50cyB0byBjbG9zZVRvIG9yIGFwcHJveGltYXRlbHkgbXVzdCBiZSBudW1iZXJzJyk7XG4gICAgfVxuXG4gICAgdGhpcy5hc3NlcnQoXG4gICAgICAgIE1hdGguYWJzKG9iaiAtIGV4cGVjdGVkKSA8PSBkZWx0YVxuICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSBjbG9zZSB0byAnICsgZXhwZWN0ZWQgKyAnICsvLSAnICsgZGVsdGFcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gbm90IHRvIGJlIGNsb3NlIHRvICcgKyBleHBlY3RlZCArICcgKy8tICcgKyBkZWx0YVxuICAgICk7XG4gIH1cblxuICBBc3NlcnRpb24uYWRkTWV0aG9kKCdjbG9zZVRvJywgY2xvc2VUbyk7XG4gIEFzc2VydGlvbi5hZGRNZXRob2QoJ2FwcHJveGltYXRlbHknLCBjbG9zZVRvKTtcblxuICBmdW5jdGlvbiBpc1N1YnNldE9mKHN1YnNldCwgc3VwZXJzZXQsIGNtcCkge1xuICAgIHJldHVybiBzdWJzZXQuZXZlcnkoZnVuY3Rpb24oZWxlbSkge1xuICAgICAgaWYgKCFjbXApIHJldHVybiBzdXBlcnNldC5pbmRleE9mKGVsZW0pICE9PSAtMTtcblxuICAgICAgcmV0dXJuIHN1cGVyc2V0LnNvbWUoZnVuY3Rpb24oZWxlbTIpIHtcbiAgICAgICAgcmV0dXJuIGNtcChlbGVtLCBlbGVtMik7XG4gICAgICB9KTtcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqICMjIyAubWVtYmVycyhzZXQpXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IGlzIGEgc3VwZXJzZXQgb2YgYHNldGAsXG4gICAqIG9yIHRoYXQgdGhlIHRhcmdldCBhbmQgYHNldGAgaGF2ZSB0aGUgc2FtZSBzdHJpY3RseS1lcXVhbCAoPT09KSBtZW1iZXJzLlxuICAgKiBBbHRlcm5hdGVseSwgaWYgdGhlIGBkZWVwYCBmbGFnIGlzIHNldCwgc2V0IG1lbWJlcnMgYXJlIGNvbXBhcmVkIGZvciBkZWVwXG4gICAqIGVxdWFsaXR5LlxuICAgKlxuICAgKiAgICAgZXhwZWN0KFsxLCAyLCAzXSkudG8uaW5jbHVkZS5tZW1iZXJzKFszLCAyXSk7XG4gICAqICAgICBleHBlY3QoWzEsIDIsIDNdKS50by5ub3QuaW5jbHVkZS5tZW1iZXJzKFszLCAyLCA4XSk7XG4gICAqXG4gICAqICAgICBleHBlY3QoWzQsIDJdKS50by5oYXZlLm1lbWJlcnMoWzIsIDRdKTtcbiAgICogICAgIGV4cGVjdChbNSwgMl0pLnRvLm5vdC5oYXZlLm1lbWJlcnMoWzUsIDIsIDFdKTtcbiAgICpcbiAgICogICAgIGV4cGVjdChbeyBpZDogMSB9XSkudG8uZGVlcC5pbmNsdWRlLm1lbWJlcnMoW3sgaWQ6IDEgfV0pO1xuICAgKlxuICAgKiBAbmFtZSBtZW1iZXJzXG4gICAqIEBwYXJhbSB7QXJyYXl9IHNldFxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIEFzc2VydGlvbi5hZGRNZXRob2QoJ21lbWJlcnMnLCBmdW5jdGlvbiAoc3Vic2V0LCBtc2cpIHtcbiAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcbiAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG5cbiAgICBuZXcgQXNzZXJ0aW9uKG9iaikudG8uYmUuYW4oJ2FycmF5Jyk7XG4gICAgbmV3IEFzc2VydGlvbihzdWJzZXQpLnRvLmJlLmFuKCdhcnJheScpO1xuXG4gICAgdmFyIGNtcCA9IGZsYWcodGhpcywgJ2RlZXAnKSA/IF8uZXFsIDogdW5kZWZpbmVkO1xuXG4gICAgaWYgKGZsYWcodGhpcywgJ2NvbnRhaW5zJykpIHtcbiAgICAgIHJldHVybiB0aGlzLmFzc2VydChcbiAgICAgICAgICBpc1N1YnNldE9mKHN1YnNldCwgb2JqLCBjbXApXG4gICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgYSBzdXBlcnNldCBvZiAje2FjdH0nXG4gICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IGJlIGEgc3VwZXJzZXQgb2YgI3thY3R9J1xuICAgICAgICAsIG9ialxuICAgICAgICAsIHN1YnNldFxuICAgICAgKTtcbiAgICB9XG5cbiAgICB0aGlzLmFzc2VydChcbiAgICAgICAgaXNTdWJzZXRPZihvYmosIHN1YnNldCwgY21wKSAmJiBpc1N1YnNldE9mKHN1YnNldCwgb2JqLCBjbXApXG4gICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gaGF2ZSB0aGUgc2FtZSBtZW1iZXJzIGFzICN7YWN0fSdcbiAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3QgaGF2ZSB0aGUgc2FtZSBtZW1iZXJzIGFzICN7YWN0fSdcbiAgICAgICAgLCBvYmpcbiAgICAgICAgLCBzdWJzZXRcbiAgICApO1xuICB9KTtcblxuICAvKipcbiAgICogIyMjIC5vbmVPZihsaXN0KVxuICAgKlxuICAgKiBBc3NlcnQgdGhhdCBhIHZhbHVlIGFwcGVhcnMgc29tZXdoZXJlIGluIHRoZSB0b3AgbGV2ZWwgb2YgYXJyYXkgYGxpc3RgLlxuICAgKlxuICAgKiAgICAgZXhwZWN0KCdhJykudG8uYmUub25lT2YoWydhJywgJ2InLCAnYyddKTtcbiAgICogICAgIGV4cGVjdCg5KS50by5ub3QuYmUub25lT2YoWyd6J10pO1xuICAgKiAgICAgZXhwZWN0KFszXSkudG8ubm90LmJlLm9uZU9mKFsxLCAyLCBbM11dKTtcbiAgICpcbiAgICogICAgIHZhciB0aHJlZSA9IFszXTtcbiAgICogICAgIC8vIGZvciBvYmplY3QtdHlwZXMsIGNvbnRlbnRzIGFyZSBub3QgY29tcGFyZWRcbiAgICogICAgIGV4cGVjdCh0aHJlZSkudG8ubm90LmJlLm9uZU9mKFsxLCAyLCBbM11dKTtcbiAgICogICAgIC8vIGNvbXBhcmluZyByZWZlcmVuY2VzIHdvcmtzXG4gICAqICAgICBleHBlY3QodGhyZWUpLnRvLmJlLm9uZU9mKFsxLCAyLCB0aHJlZV0pO1xuICAgKlxuICAgKiBAbmFtZSBvbmVPZlxuICAgKiBAcGFyYW0ge0FycmF5PCo+fSBsaXN0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgZnVuY3Rpb24gb25lT2YgKGxpc3QsIG1zZykge1xuICAgIGlmIChtc2cpIGZsYWcodGhpcywgJ21lc3NhZ2UnLCBtc2cpO1xuICAgIHZhciBleHBlY3RlZCA9IGZsYWcodGhpcywgJ29iamVjdCcpO1xuICAgIG5ldyBBc3NlcnRpb24obGlzdCkudG8uYmUuYW4oJ2FycmF5Jyk7XG5cbiAgICB0aGlzLmFzc2VydChcbiAgICAgICAgbGlzdC5pbmRleE9mKGV4cGVjdGVkKSA+IC0xXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIG9uZSBvZiAje2V4cH0nXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBiZSBvbmUgb2YgI3tleHB9J1xuICAgICAgLCBsaXN0XG4gICAgICAsIGV4cGVjdGVkXG4gICAgKTtcbiAgfVxuXG4gIEFzc2VydGlvbi5hZGRNZXRob2QoJ29uZU9mJywgb25lT2YpO1xuXG5cbiAgLyoqXG4gICAqICMjIyAuY2hhbmdlKGZ1bmN0aW9uKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYSBmdW5jdGlvbiBjaGFuZ2VzIGFuIG9iamVjdCBwcm9wZXJ0eVxuICAgKlxuICAgKiAgICAgdmFyIG9iaiA9IHsgdmFsOiAxMCB9O1xuICAgKiAgICAgdmFyIGZuID0gZnVuY3Rpb24oKSB7IG9iai52YWwgKz0gMyB9O1xuICAgKiAgICAgdmFyIG5vQ2hhbmdlRm4gPSBmdW5jdGlvbigpIHsgcmV0dXJuICdmb28nICsgJ2Jhcic7IH1cbiAgICogICAgIGV4cGVjdChmbikudG8uY2hhbmdlKG9iaiwgJ3ZhbCcpO1xuICAgKiAgICAgZXhwZWN0KG5vQ2hhbmdGbikudG8ubm90LmNoYW5nZShvYmosICd2YWwnKVxuICAgKlxuICAgKiBAbmFtZSBjaGFuZ2VcbiAgICogQGFsaWFzIGNoYW5nZXNcbiAgICogQGFsaWFzIENoYW5nZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gb2JqZWN0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eSBuYW1lXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgZnVuY3Rpb24gYXNzZXJ0Q2hhbmdlcyAob2JqZWN0LCBwcm9wLCBtc2cpIHtcbiAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcbiAgICB2YXIgZm4gPSBmbGFnKHRoaXMsICdvYmplY3QnKTtcbiAgICBuZXcgQXNzZXJ0aW9uKG9iamVjdCwgbXNnKS50by5oYXZlLnByb3BlcnR5KHByb3ApO1xuICAgIG5ldyBBc3NlcnRpb24oZm4pLmlzLmEoJ2Z1bmN0aW9uJyk7XG5cbiAgICB2YXIgaW5pdGlhbCA9IG9iamVjdFtwcm9wXTtcbiAgICBmbigpO1xuXG4gICAgdGhpcy5hc3NlcnQoXG4gICAgICBpbml0aWFsICE9PSBvYmplY3RbcHJvcF1cbiAgICAgICwgJ2V4cGVjdGVkIC4nICsgcHJvcCArICcgdG8gY2hhbmdlJ1xuICAgICAgLCAnZXhwZWN0ZWQgLicgKyBwcm9wICsgJyB0byBub3QgY2hhbmdlJ1xuICAgICk7XG4gIH1cblxuICBBc3NlcnRpb24uYWRkQ2hhaW5hYmxlTWV0aG9kKCdjaGFuZ2UnLCBhc3NlcnRDaGFuZ2VzKTtcbiAgQXNzZXJ0aW9uLmFkZENoYWluYWJsZU1ldGhvZCgnY2hhbmdlcycsIGFzc2VydENoYW5nZXMpO1xuXG4gIC8qKlxuICAgKiAjIyMgLmluY3JlYXNlKGZ1bmN0aW9uKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYSBmdW5jdGlvbiBpbmNyZWFzZXMgYW4gb2JqZWN0IHByb3BlcnR5XG4gICAqXG4gICAqICAgICB2YXIgb2JqID0geyB2YWw6IDEwIH07XG4gICAqICAgICB2YXIgZm4gPSBmdW5jdGlvbigpIHsgb2JqLnZhbCA9IDE1IH07XG4gICAqICAgICBleHBlY3QoZm4pLnRvLmluY3JlYXNlKG9iaiwgJ3ZhbCcpO1xuICAgKlxuICAgKiBAbmFtZSBpbmNyZWFzZVxuICAgKiBAYWxpYXMgaW5jcmVhc2VzXG4gICAqIEBhbGlhcyBJbmNyZWFzZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gb2JqZWN0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eSBuYW1lXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgZnVuY3Rpb24gYXNzZXJ0SW5jcmVhc2VzIChvYmplY3QsIHByb3AsIG1zZykge1xuICAgIGlmIChtc2cpIGZsYWcodGhpcywgJ21lc3NhZ2UnLCBtc2cpO1xuICAgIHZhciBmbiA9IGZsYWcodGhpcywgJ29iamVjdCcpO1xuICAgIG5ldyBBc3NlcnRpb24ob2JqZWN0LCBtc2cpLnRvLmhhdmUucHJvcGVydHkocHJvcCk7XG4gICAgbmV3IEFzc2VydGlvbihmbikuaXMuYSgnZnVuY3Rpb24nKTtcblxuICAgIHZhciBpbml0aWFsID0gb2JqZWN0W3Byb3BdO1xuICAgIGZuKCk7XG5cbiAgICB0aGlzLmFzc2VydChcbiAgICAgIG9iamVjdFtwcm9wXSAtIGluaXRpYWwgPiAwXG4gICAgICAsICdleHBlY3RlZCAuJyArIHByb3AgKyAnIHRvIGluY3JlYXNlJ1xuICAgICAgLCAnZXhwZWN0ZWQgLicgKyBwcm9wICsgJyB0byBub3QgaW5jcmVhc2UnXG4gICAgKTtcbiAgfVxuXG4gIEFzc2VydGlvbi5hZGRDaGFpbmFibGVNZXRob2QoJ2luY3JlYXNlJywgYXNzZXJ0SW5jcmVhc2VzKTtcbiAgQXNzZXJ0aW9uLmFkZENoYWluYWJsZU1ldGhvZCgnaW5jcmVhc2VzJywgYXNzZXJ0SW5jcmVhc2VzKTtcblxuICAvKipcbiAgICogIyMjIC5kZWNyZWFzZShmdW5jdGlvbilcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGEgZnVuY3Rpb24gZGVjcmVhc2VzIGFuIG9iamVjdCBwcm9wZXJ0eVxuICAgKlxuICAgKiAgICAgdmFyIG9iaiA9IHsgdmFsOiAxMCB9O1xuICAgKiAgICAgdmFyIGZuID0gZnVuY3Rpb24oKSB7IG9iai52YWwgPSA1IH07XG4gICAqICAgICBleHBlY3QoZm4pLnRvLmRlY3JlYXNlKG9iaiwgJ3ZhbCcpO1xuICAgKlxuICAgKiBAbmFtZSBkZWNyZWFzZVxuICAgKiBAYWxpYXMgZGVjcmVhc2VzXG4gICAqIEBhbGlhcyBEZWNyZWFzZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gb2JqZWN0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eSBuYW1lXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgZnVuY3Rpb24gYXNzZXJ0RGVjcmVhc2VzIChvYmplY3QsIHByb3AsIG1zZykge1xuICAgIGlmIChtc2cpIGZsYWcodGhpcywgJ21lc3NhZ2UnLCBtc2cpO1xuICAgIHZhciBmbiA9IGZsYWcodGhpcywgJ29iamVjdCcpO1xuICAgIG5ldyBBc3NlcnRpb24ob2JqZWN0LCBtc2cpLnRvLmhhdmUucHJvcGVydHkocHJvcCk7XG4gICAgbmV3IEFzc2VydGlvbihmbikuaXMuYSgnZnVuY3Rpb24nKTtcblxuICAgIHZhciBpbml0aWFsID0gb2JqZWN0W3Byb3BdO1xuICAgIGZuKCk7XG5cbiAgICB0aGlzLmFzc2VydChcbiAgICAgIG9iamVjdFtwcm9wXSAtIGluaXRpYWwgPCAwXG4gICAgICAsICdleHBlY3RlZCAuJyArIHByb3AgKyAnIHRvIGRlY3JlYXNlJ1xuICAgICAgLCAnZXhwZWN0ZWQgLicgKyBwcm9wICsgJyB0byBub3QgZGVjcmVhc2UnXG4gICAgKTtcbiAgfVxuXG4gIEFzc2VydGlvbi5hZGRDaGFpbmFibGVNZXRob2QoJ2RlY3JlYXNlJywgYXNzZXJ0RGVjcmVhc2VzKTtcbiAgQXNzZXJ0aW9uLmFkZENoYWluYWJsZU1ldGhvZCgnZGVjcmVhc2VzJywgYXNzZXJ0RGVjcmVhc2VzKTtcblxuICAvKipcbiAgICogIyMjIC5leHRlbnNpYmxlXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IGlzIGV4dGVuc2libGUgKGNhbiBoYXZlIG5ldyBwcm9wZXJ0aWVzIGFkZGVkIHRvXG4gICAqIGl0KS5cbiAgICpcbiAgICogICAgIHZhciBub25FeHRlbnNpYmxlT2JqZWN0ID0gT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKHt9KTtcbiAgICogICAgIHZhciBzZWFsZWRPYmplY3QgPSBPYmplY3Quc2VhbCh7fSk7XG4gICAqICAgICB2YXIgZnJvemVuT2JqZWN0ID0gT2JqZWN0LmZyZWV6ZSh7fSk7XG4gICAqXG4gICAqICAgICBleHBlY3Qoe30pLnRvLmJlLmV4dGVuc2libGU7XG4gICAqICAgICBleHBlY3Qobm9uRXh0ZW5zaWJsZU9iamVjdCkudG8ubm90LmJlLmV4dGVuc2libGU7XG4gICAqICAgICBleHBlY3Qoc2VhbGVkT2JqZWN0KS50by5ub3QuYmUuZXh0ZW5zaWJsZTtcbiAgICogICAgIGV4cGVjdChmcm96ZW5PYmplY3QpLnRvLm5vdC5iZS5leHRlbnNpYmxlO1xuICAgKlxuICAgKiBAbmFtZSBleHRlbnNpYmxlXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIEFzc2VydGlvbi5hZGRQcm9wZXJ0eSgnZXh0ZW5zaWJsZScsIGZ1bmN0aW9uKCkge1xuICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKTtcblxuICAgIC8vIEluIEVTNSwgaWYgdGhlIGFyZ3VtZW50IHRvIHRoaXMgbWV0aG9kIGlzIG5vdCBhbiBvYmplY3QgKGEgcHJpbWl0aXZlKSwgdGhlbiBpdCB3aWxsIGNhdXNlIGEgVHlwZUVycm9yLlxuICAgIC8vIEluIEVTNiwgYSBub24tb2JqZWN0IGFyZ3VtZW50IHdpbGwgYmUgdHJlYXRlZCBhcyBpZiBpdCB3YXMgYSBub24tZXh0ZW5zaWJsZSBvcmRpbmFyeSBvYmplY3QsIHNpbXBseSByZXR1cm4gZmFsc2UuXG4gICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2lzRXh0ZW5zaWJsZVxuICAgIC8vIFRoZSBmb2xsb3dpbmcgcHJvdmlkZXMgRVM2IGJlaGF2aW9yIHdoZW4gYSBUeXBlRXJyb3IgaXMgdGhyb3duIHVuZGVyIEVTNS5cblxuICAgIHZhciBpc0V4dGVuc2libGU7XG5cbiAgICB0cnkge1xuICAgICAgaXNFeHRlbnNpYmxlID0gT2JqZWN0LmlzRXh0ZW5zaWJsZShvYmopO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIFR5cGVFcnJvcikgaXNFeHRlbnNpYmxlID0gZmFsc2U7XG4gICAgICBlbHNlIHRocm93IGVycjtcbiAgICB9XG5cbiAgICB0aGlzLmFzc2VydChcbiAgICAgIGlzRXh0ZW5zaWJsZVxuICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSBleHRlbnNpYmxlJ1xuICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3QgYmUgZXh0ZW5zaWJsZSdcbiAgICApO1xuICB9KTtcblxuICAvKipcbiAgICogIyMjIC5zZWFsZWRcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaXMgc2VhbGVkIChjYW5ub3QgaGF2ZSBuZXcgcHJvcGVydGllcyBhZGRlZCB0byBpdFxuICAgKiBhbmQgaXRzIGV4aXN0aW5nIHByb3BlcnRpZXMgY2Fubm90IGJlIHJlbW92ZWQpLlxuICAgKlxuICAgKiAgICAgdmFyIHNlYWxlZE9iamVjdCA9IE9iamVjdC5zZWFsKHt9KTtcbiAgICogICAgIHZhciBmcm96ZW5PYmplY3QgPSBPYmplY3QuZnJlZXplKHt9KTtcbiAgICpcbiAgICogICAgIGV4cGVjdChzZWFsZWRPYmplY3QpLnRvLmJlLnNlYWxlZDtcbiAgICogICAgIGV4cGVjdChmcm96ZW5PYmplY3QpLnRvLmJlLnNlYWxlZDtcbiAgICogICAgIGV4cGVjdCh7fSkudG8ubm90LmJlLnNlYWxlZDtcbiAgICpcbiAgICogQG5hbWUgc2VhbGVkXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIEFzc2VydGlvbi5hZGRQcm9wZXJ0eSgnc2VhbGVkJywgZnVuY3Rpb24oKSB7XG4gICAgdmFyIG9iaiA9IGZsYWcodGhpcywgJ29iamVjdCcpO1xuXG4gICAgLy8gSW4gRVM1LCBpZiB0aGUgYXJndW1lbnQgdG8gdGhpcyBtZXRob2QgaXMgbm90IGFuIG9iamVjdCAoYSBwcmltaXRpdmUpLCB0aGVuIGl0IHdpbGwgY2F1c2UgYSBUeXBlRXJyb3IuXG4gICAgLy8gSW4gRVM2LCBhIG5vbi1vYmplY3QgYXJndW1lbnQgd2lsbCBiZSB0cmVhdGVkIGFzIGlmIGl0IHdhcyBhIHNlYWxlZCBvcmRpbmFyeSBvYmplY3QsIHNpbXBseSByZXR1cm4gdHJ1ZS5cbiAgICAvLyBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2lzU2VhbGVkXG4gICAgLy8gVGhlIGZvbGxvd2luZyBwcm92aWRlcyBFUzYgYmVoYXZpb3Igd2hlbiBhIFR5cGVFcnJvciBpcyB0aHJvd24gdW5kZXIgRVM1LlxuXG4gICAgdmFyIGlzU2VhbGVkO1xuXG4gICAgdHJ5IHtcbiAgICAgIGlzU2VhbGVkID0gT2JqZWN0LmlzU2VhbGVkKG9iaik7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBpZiAoZXJyIGluc3RhbmNlb2YgVHlwZUVycm9yKSBpc1NlYWxlZCA9IHRydWU7XG4gICAgICBlbHNlIHRocm93IGVycjtcbiAgICB9XG5cbiAgICB0aGlzLmFzc2VydChcbiAgICAgIGlzU2VhbGVkXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIHNlYWxlZCdcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IGJlIHNlYWxlZCdcbiAgICApO1xuICB9KTtcblxuICAvKipcbiAgICogIyMjIC5mcm96ZW5cbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaXMgZnJvemVuIChjYW5ub3QgaGF2ZSBuZXcgcHJvcGVydGllcyBhZGRlZCB0byBpdFxuICAgKiBhbmQgaXRzIGV4aXN0aW5nIHByb3BlcnRpZXMgY2Fubm90IGJlIG1vZGlmaWVkKS5cbiAgICpcbiAgICogICAgIHZhciBmcm96ZW5PYmplY3QgPSBPYmplY3QuZnJlZXplKHt9KTtcbiAgICpcbiAgICogICAgIGV4cGVjdChmcm96ZW5PYmplY3QpLnRvLmJlLmZyb3plbjtcbiAgICogICAgIGV4cGVjdCh7fSkudG8ubm90LmJlLmZyb3plbjtcbiAgICpcbiAgICogQG5hbWUgZnJvemVuXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIEFzc2VydGlvbi5hZGRQcm9wZXJ0eSgnZnJvemVuJywgZnVuY3Rpb24oKSB7XG4gICAgdmFyIG9iaiA9IGZsYWcodGhpcywgJ29iamVjdCcpO1xuXG4gICAgLy8gSW4gRVM1LCBpZiB0aGUgYXJndW1lbnQgdG8gdGhpcyBtZXRob2QgaXMgbm90IGFuIG9iamVjdCAoYSBwcmltaXRpdmUpLCB0aGVuIGl0IHdpbGwgY2F1c2UgYSBUeXBlRXJyb3IuXG4gICAgLy8gSW4gRVM2LCBhIG5vbi1vYmplY3QgYXJndW1lbnQgd2lsbCBiZSB0cmVhdGVkIGFzIGlmIGl0IHdhcyBhIGZyb3plbiBvcmRpbmFyeSBvYmplY3QsIHNpbXBseSByZXR1cm4gdHJ1ZS5cbiAgICAvLyBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2lzRnJvemVuXG4gICAgLy8gVGhlIGZvbGxvd2luZyBwcm92aWRlcyBFUzYgYmVoYXZpb3Igd2hlbiBhIFR5cGVFcnJvciBpcyB0aHJvd24gdW5kZXIgRVM1LlxuXG4gICAgdmFyIGlzRnJvemVuO1xuXG4gICAgdHJ5IHtcbiAgICAgIGlzRnJvemVuID0gT2JqZWN0LmlzRnJvemVuKG9iaik7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBpZiAoZXJyIGluc3RhbmNlb2YgVHlwZUVycm9yKSBpc0Zyb3plbiA9IHRydWU7XG4gICAgICBlbHNlIHRocm93IGVycjtcbiAgICB9XG5cbiAgICB0aGlzLmFzc2VydChcbiAgICAgIGlzRnJvemVuXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIGZyb3plbidcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IGJlIGZyb3plbidcbiAgICApO1xuICB9KTtcbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jaGFpL2xpYi9jaGFpL2NvcmUvYXNzZXJ0aW9ucy5qc1xuICoqIG1vZHVsZSBpZCA9IDQ2XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvKiFcbiAqIGNoYWlcbiAqIENvcHlyaWdodChjKSAyMDExLTIwMTQgSmFrZSBMdWVyIDxqYWtlQGFsb2dpY2FscGFyYWRveC5jb20+XG4gKiBNSVQgTGljZW5zZWRcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjaGFpLCB1dGlsKSB7XG4gIGNoYWkuZXhwZWN0ID0gZnVuY3Rpb24gKHZhbCwgbWVzc2FnZSkge1xuICAgIHJldHVybiBuZXcgY2hhaS5Bc3NlcnRpb24odmFsLCBtZXNzYWdlKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5mYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIFttZXNzYWdlXSwgW29wZXJhdG9yXSlcbiAgICpcbiAgICogVGhyb3cgYSBmYWlsdXJlLlxuICAgKlxuICAgKiBAbmFtZSBmYWlsXG4gICAqIEBwYXJhbSB7TWl4ZWR9IGFjdHVhbFxuICAgKiBAcGFyYW0ge01peGVkfSBleHBlY3RlZFxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gb3BlcmF0b3JcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgY2hhaS5leHBlY3QuZmFpbCA9IGZ1bmN0aW9uIChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCBvcGVyYXRvcikge1xuICAgIG1lc3NhZ2UgPSBtZXNzYWdlIHx8ICdleHBlY3QuZmFpbCgpJztcbiAgICB0aHJvdyBuZXcgY2hhaS5Bc3NlcnRpb25FcnJvcihtZXNzYWdlLCB7XG4gICAgICAgIGFjdHVhbDogYWN0dWFsXG4gICAgICAsIGV4cGVjdGVkOiBleHBlY3RlZFxuICAgICAgLCBvcGVyYXRvcjogb3BlcmF0b3JcbiAgICB9LCBjaGFpLmV4cGVjdC5mYWlsKTtcbiAgfTtcbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jaGFpL2xpYi9jaGFpL2ludGVyZmFjZS9leHBlY3QuanNcbiAqKiBtb2R1bGUgaWQgPSA0N1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLyohXG4gKiBjaGFpXG4gKiBDb3B5cmlnaHQoYykgMjAxMS0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY2hhaSwgdXRpbCkge1xuICB2YXIgQXNzZXJ0aW9uID0gY2hhaS5Bc3NlcnRpb247XG5cbiAgZnVuY3Rpb24gbG9hZFNob3VsZCAoKSB7XG4gICAgLy8gZXhwbGljaXRseSBkZWZpbmUgdGhpcyBtZXRob2QgYXMgZnVuY3Rpb24gYXMgdG8gaGF2ZSBpdCdzIG5hbWUgdG8gaW5jbHVkZSBhcyBgc3NmaWBcbiAgICBmdW5jdGlvbiBzaG91bGRHZXR0ZXIoKSB7XG4gICAgICBpZiAodGhpcyBpbnN0YW5jZW9mIFN0cmluZyB8fCB0aGlzIGluc3RhbmNlb2YgTnVtYmVyIHx8IHRoaXMgaW5zdGFuY2VvZiBCb29sZWFuICkge1xuICAgICAgICByZXR1cm4gbmV3IEFzc2VydGlvbih0aGlzLnZhbHVlT2YoKSwgbnVsbCwgc2hvdWxkR2V0dGVyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgQXNzZXJ0aW9uKHRoaXMsIG51bGwsIHNob3VsZEdldHRlcik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNob3VsZFNldHRlcih2YWx1ZSkge1xuICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9jaGFpanMvY2hhaS9pc3N1ZXMvODY6IHRoaXMgbWFrZXNcbiAgICAgIC8vIGB3aGF0ZXZlci5zaG91bGQgPSBzb21lVmFsdWVgIGFjdHVhbGx5IHNldCBgc29tZVZhbHVlYCwgd2hpY2ggaXNcbiAgICAgIC8vIGVzcGVjaWFsbHkgdXNlZnVsIGZvciBgZ2xvYmFsLnNob3VsZCA9IHJlcXVpcmUoJ2NoYWknKS5zaG91bGQoKWAuXG4gICAgICAvL1xuICAgICAgLy8gTm90ZSB0aGF0IHdlIGhhdmUgdG8gdXNlIFtbRGVmaW5lUHJvcGVydHldXSBpbnN0ZWFkIG9mIFtbUHV0XV1cbiAgICAgIC8vIHNpbmNlIG90aGVyd2lzZSB3ZSB3b3VsZCB0cmlnZ2VyIHRoaXMgdmVyeSBzZXR0ZXIhXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ3Nob3VsZCcsIHtcbiAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG4gICAgLy8gbW9kaWZ5IE9iamVjdC5wcm90b3R5cGUgdG8gaGF2ZSBgc2hvdWxkYFxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPYmplY3QucHJvdG90eXBlLCAnc2hvdWxkJywge1xuICAgICAgc2V0OiBzaG91bGRTZXR0ZXJcbiAgICAgICwgZ2V0OiBzaG91bGRHZXR0ZXJcbiAgICAgICwgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG5cbiAgICB2YXIgc2hvdWxkID0ge307XG5cbiAgICAvKipcbiAgICAgKiAjIyMgLmZhaWwoYWN0dWFsLCBleHBlY3RlZCwgW21lc3NhZ2VdLCBbb3BlcmF0b3JdKVxuICAgICAqXG4gICAgICogVGhyb3cgYSBmYWlsdXJlLlxuICAgICAqXG4gICAgICogQG5hbWUgZmFpbFxuICAgICAqIEBwYXJhbSB7TWl4ZWR9IGFjdHVhbFxuICAgICAqIEBwYXJhbSB7TWl4ZWR9IGV4cGVjdGVkXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gb3BlcmF0b3JcbiAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAqL1xuXG4gICAgc2hvdWxkLmZhaWwgPSBmdW5jdGlvbiAoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgb3BlcmF0b3IpIHtcbiAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlIHx8ICdzaG91bGQuZmFpbCgpJztcbiAgICAgIHRocm93IG5ldyBjaGFpLkFzc2VydGlvbkVycm9yKG1lc3NhZ2UsIHtcbiAgICAgICAgICBhY3R1YWw6IGFjdHVhbFxuICAgICAgICAsIGV4cGVjdGVkOiBleHBlY3RlZFxuICAgICAgICAsIG9wZXJhdG9yOiBvcGVyYXRvclxuICAgICAgfSwgc2hvdWxkLmZhaWwpO1xuICAgIH07XG5cbiAgICBzaG91bGQuZXF1YWwgPSBmdW5jdGlvbiAodmFsMSwgdmFsMiwgbXNnKSB7XG4gICAgICBuZXcgQXNzZXJ0aW9uKHZhbDEsIG1zZykudG8uZXF1YWwodmFsMik7XG4gICAgfTtcblxuICAgIHNob3VsZC5UaHJvdyA9IGZ1bmN0aW9uIChmbiwgZXJydCwgZXJycywgbXNnKSB7XG4gICAgICBuZXcgQXNzZXJ0aW9uKGZuLCBtc2cpLnRvLlRocm93KGVycnQsIGVycnMpO1xuICAgIH07XG5cbiAgICBzaG91bGQuZXhpc3QgPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcbiAgICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLmV4aXN0O1xuICAgIH1cblxuICAgIC8vIG5lZ2F0aW9uXG4gICAgc2hvdWxkLm5vdCA9IHt9XG5cbiAgICBzaG91bGQubm90LmVxdWFsID0gZnVuY3Rpb24gKHZhbDEsIHZhbDIsIG1zZykge1xuICAgICAgbmV3IEFzc2VydGlvbih2YWwxLCBtc2cpLnRvLm5vdC5lcXVhbCh2YWwyKTtcbiAgICB9O1xuXG4gICAgc2hvdWxkLm5vdC5UaHJvdyA9IGZ1bmN0aW9uIChmbiwgZXJydCwgZXJycywgbXNnKSB7XG4gICAgICBuZXcgQXNzZXJ0aW9uKGZuLCBtc2cpLnRvLm5vdC5UaHJvdyhlcnJ0LCBlcnJzKTtcbiAgICB9O1xuXG4gICAgc2hvdWxkLm5vdC5leGlzdCA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuICAgICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8ubm90LmV4aXN0O1xuICAgIH1cblxuICAgIHNob3VsZFsndGhyb3cnXSA9IHNob3VsZFsnVGhyb3cnXTtcbiAgICBzaG91bGQubm90Wyd0aHJvdyddID0gc2hvdWxkLm5vdFsnVGhyb3cnXTtcblxuICAgIHJldHVybiBzaG91bGQ7XG4gIH07XG5cbiAgY2hhaS5zaG91bGQgPSBsb2FkU2hvdWxkO1xuICBjaGFpLlNob3VsZCA9IGxvYWRTaG91bGQ7XG59O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY2hhaS9saWIvY2hhaS9pbnRlcmZhY2Uvc2hvdWxkLmpzXG4gKiogbW9kdWxlIGlkID0gNDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8qIVxuICogY2hhaVxuICogQ29weXJpZ2h0KGMpIDIwMTEtMjAxNCBKYWtlIEx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cbiAqIE1JVCBMaWNlbnNlZFxuICovXG5cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY2hhaSwgdXRpbCkge1xuXG4gIC8qIVxuICAgKiBDaGFpIGRlcGVuZGVuY2llcy5cbiAgICovXG5cbiAgdmFyIEFzc2VydGlvbiA9IGNoYWkuQXNzZXJ0aW9uXG4gICAgLCBmbGFnID0gdXRpbC5mbGFnO1xuXG4gIC8qIVxuICAgKiBNb2R1bGUgZXhwb3J0LlxuICAgKi9cblxuICAvKipcbiAgICogIyMjIGFzc2VydChleHByZXNzaW9uLCBtZXNzYWdlKVxuICAgKlxuICAgKiBXcml0ZSB5b3VyIG93biB0ZXN0IGV4cHJlc3Npb25zLlxuICAgKlxuICAgKiAgICAgYXNzZXJ0KCdmb28nICE9PSAnYmFyJywgJ2ZvbyBpcyBub3QgYmFyJyk7XG4gICAqICAgICBhc3NlcnQoQXJyYXkuaXNBcnJheShbXSksICdlbXB0eSBhcnJheXMgYXJlIGFycmF5cycpO1xuICAgKlxuICAgKiBAcGFyYW0ge01peGVkfSBleHByZXNzaW9uIHRvIHRlc3QgZm9yIHRydXRoaW5lc3NcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgdG8gZGlzcGxheSBvbiBlcnJvclxuICAgKiBAbmFtZSBhc3NlcnRcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgdmFyIGFzc2VydCA9IGNoYWkuYXNzZXJ0ID0gZnVuY3Rpb24gKGV4cHJlc3MsIGVycm1zZykge1xuICAgIHZhciB0ZXN0ID0gbmV3IEFzc2VydGlvbihudWxsLCBudWxsLCBjaGFpLmFzc2VydCk7XG4gICAgdGVzdC5hc3NlcnQoXG4gICAgICAgIGV4cHJlc3NcbiAgICAgICwgZXJybXNnXG4gICAgICAsICdbIG5lZ2F0aW9uIG1lc3NhZ2UgdW5hdmFpbGFibGUgXSdcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLmZhaWwoYWN0dWFsLCBleHBlY3RlZCwgW21lc3NhZ2VdLCBbb3BlcmF0b3JdKVxuICAgKlxuICAgKiBUaHJvdyBhIGZhaWx1cmUuIE5vZGUuanMgYGFzc2VydGAgbW9kdWxlLWNvbXBhdGlibGUuXG4gICAqXG4gICAqIEBuYW1lIGZhaWxcbiAgICogQHBhcmFtIHtNaXhlZH0gYWN0dWFsXG4gICAqIEBwYXJhbSB7TWl4ZWR9IGV4cGVjdGVkXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBvcGVyYXRvclxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuZmFpbCA9IGZ1bmN0aW9uIChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCBvcGVyYXRvcikge1xuICAgIG1lc3NhZ2UgPSBtZXNzYWdlIHx8ICdhc3NlcnQuZmFpbCgpJztcbiAgICB0aHJvdyBuZXcgY2hhaS5Bc3NlcnRpb25FcnJvcihtZXNzYWdlLCB7XG4gICAgICAgIGFjdHVhbDogYWN0dWFsXG4gICAgICAsIGV4cGVjdGVkOiBleHBlY3RlZFxuICAgICAgLCBvcGVyYXRvcjogb3BlcmF0b3JcbiAgICB9LCBhc3NlcnQuZmFpbCk7XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAuaXNPayhvYmplY3QsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGBvYmplY3RgIGlzIHRydXRoeS5cbiAgICpcbiAgICogICAgIGFzc2VydC5pc09rKCdldmVyeXRoaW5nJywgJ2V2ZXJ5dGhpbmcgaXMgb2snKTtcbiAgICogICAgIGFzc2VydC5pc09rKGZhbHNlLCAndGhpcyB3aWxsIGZhaWwnKTtcbiAgICpcbiAgICogQG5hbWUgaXNPa1xuICAgKiBAYWxpYXMgb2tcbiAgICogQHBhcmFtIHtNaXhlZH0gb2JqZWN0IHRvIHRlc3RcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LmlzT2sgPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS5pcy5vaztcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5pc05vdE9rKG9iamVjdCwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYG9iamVjdGAgaXMgZmFsc3kuXG4gICAqXG4gICAqICAgICBhc3NlcnQuaXNOb3RPaygnZXZlcnl0aGluZycsICd0aGlzIHdpbGwgZmFpbCcpO1xuICAgKiAgICAgYXNzZXJ0LmlzTm90T2soZmFsc2UsICd0aGlzIHdpbGwgcGFzcycpO1xuICAgKlxuICAgKiBAbmFtZSBpc05vdE9rXG4gICAqIEBhbGlhcyBub3RPa1xuICAgKiBAcGFyYW0ge01peGVkfSBvYmplY3QgdG8gdGVzdFxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuaXNOb3RPayA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLmlzLm5vdC5vaztcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5lcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgbm9uLXN0cmljdCBlcXVhbGl0eSAoYD09YCkgb2YgYGFjdHVhbGAgYW5kIGBleHBlY3RlZGAuXG4gICAqXG4gICAqICAgICBhc3NlcnQuZXF1YWwoMywgJzMnLCAnPT0gY29lcmNlcyB2YWx1ZXMgdG8gc3RyaW5ncycpO1xuICAgKlxuICAgKiBAbmFtZSBlcXVhbFxuICAgKiBAcGFyYW0ge01peGVkfSBhY3R1YWxcbiAgICogQHBhcmFtIHtNaXhlZH0gZXhwZWN0ZWRcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LmVxdWFsID0gZnVuY3Rpb24gKGFjdCwgZXhwLCBtc2cpIHtcbiAgICB2YXIgdGVzdCA9IG5ldyBBc3NlcnRpb24oYWN0LCBtc2csIGFzc2VydC5lcXVhbCk7XG5cbiAgICB0ZXN0LmFzc2VydChcbiAgICAgICAgZXhwID09IGZsYWcodGVzdCwgJ29iamVjdCcpXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGVxdWFsICN7ZXhwfSdcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IGVxdWFsICN7YWN0fSdcbiAgICAgICwgZXhwXG4gICAgICAsIGFjdFxuICAgICk7XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAubm90RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIG5vbi1zdHJpY3QgaW5lcXVhbGl0eSAoYCE9YCkgb2YgYGFjdHVhbGAgYW5kIGBleHBlY3RlZGAuXG4gICAqXG4gICAqICAgICBhc3NlcnQubm90RXF1YWwoMywgNCwgJ3RoZXNlIG51bWJlcnMgYXJlIG5vdCBlcXVhbCcpO1xuICAgKlxuICAgKiBAbmFtZSBub3RFcXVhbFxuICAgKiBAcGFyYW0ge01peGVkfSBhY3R1YWxcbiAgICogQHBhcmFtIHtNaXhlZH0gZXhwZWN0ZWRcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0Lm5vdEVxdWFsID0gZnVuY3Rpb24gKGFjdCwgZXhwLCBtc2cpIHtcbiAgICB2YXIgdGVzdCA9IG5ldyBBc3NlcnRpb24oYWN0LCBtc2csIGFzc2VydC5ub3RFcXVhbCk7XG5cbiAgICB0ZXN0LmFzc2VydChcbiAgICAgICAgZXhwICE9IGZsYWcodGVzdCwgJ29iamVjdCcpXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBlcXVhbCAje2V4cH0nXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGVxdWFsICN7YWN0fSdcbiAgICAgICwgZXhwXG4gICAgICAsIGFjdFxuICAgICk7XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAuc3RyaWN0RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHN0cmljdCBlcXVhbGl0eSAoYD09PWApIG9mIGBhY3R1YWxgIGFuZCBgZXhwZWN0ZWRgLlxuICAgKlxuICAgKiAgICAgYXNzZXJ0LnN0cmljdEVxdWFsKHRydWUsIHRydWUsICd0aGVzZSBib29sZWFucyBhcmUgc3RyaWN0bHkgZXF1YWwnKTtcbiAgICpcbiAgICogQG5hbWUgc3RyaWN0RXF1YWxcbiAgICogQHBhcmFtIHtNaXhlZH0gYWN0dWFsXG4gICAqIEBwYXJhbSB7TWl4ZWR9IGV4cGVjdGVkXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5zdHJpY3RFcXVhbCA9IGZ1bmN0aW9uIChhY3QsIGV4cCwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbihhY3QsIG1zZykudG8uZXF1YWwoZXhwKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5ub3RTdHJpY3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgc3RyaWN0IGluZXF1YWxpdHkgKGAhPT1gKSBvZiBgYWN0dWFsYCBhbmQgYGV4cGVjdGVkYC5cbiAgICpcbiAgICogICAgIGFzc2VydC5ub3RTdHJpY3RFcXVhbCgzLCAnMycsICdubyBjb2VyY2lvbiBmb3Igc3RyaWN0IGVxdWFsaXR5Jyk7XG4gICAqXG4gICAqIEBuYW1lIG5vdFN0cmljdEVxdWFsXG4gICAqIEBwYXJhbSB7TWl4ZWR9IGFjdHVhbFxuICAgKiBAcGFyYW0ge01peGVkfSBleHBlY3RlZFxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQubm90U3RyaWN0RXF1YWwgPSBmdW5jdGlvbiAoYWN0LCBleHAsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24oYWN0LCBtc2cpLnRvLm5vdC5lcXVhbChleHApO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLmRlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBgYWN0dWFsYCBpcyBkZWVwbHkgZXF1YWwgdG8gYGV4cGVjdGVkYC5cbiAgICpcbiAgICogICAgIGFzc2VydC5kZWVwRXF1YWwoeyB0ZWE6ICdncmVlbicgfSwgeyB0ZWE6ICdncmVlbicgfSk7XG4gICAqXG4gICAqIEBuYW1lIGRlZXBFcXVhbFxuICAgKiBAcGFyYW0ge01peGVkfSBhY3R1YWxcbiAgICogQHBhcmFtIHtNaXhlZH0gZXhwZWN0ZWRcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LmRlZXBFcXVhbCA9IGZ1bmN0aW9uIChhY3QsIGV4cCwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbihhY3QsIG1zZykudG8uZXFsKGV4cCk7XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAubm90RGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0IHRoYXQgYGFjdHVhbGAgaXMgbm90IGRlZXBseSBlcXVhbCB0byBgZXhwZWN0ZWRgLlxuICAgKlxuICAgKiAgICAgYXNzZXJ0Lm5vdERlZXBFcXVhbCh7IHRlYTogJ2dyZWVuJyB9LCB7IHRlYTogJ2phc21pbmUnIH0pO1xuICAgKlxuICAgKiBAbmFtZSBub3REZWVwRXF1YWxcbiAgICogQHBhcmFtIHtNaXhlZH0gYWN0dWFsXG4gICAqIEBwYXJhbSB7TWl4ZWR9IGV4cGVjdGVkXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5ub3REZWVwRXF1YWwgPSBmdW5jdGlvbiAoYWN0LCBleHAsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24oYWN0LCBtc2cpLnRvLm5vdC5lcWwoZXhwKTtcbiAgfTtcblxuICAgLyoqXG4gICAqICMjIyAuaXNBYm92ZSh2YWx1ZVRvQ2hlY2ssIHZhbHVlVG9CZUFib3ZlLCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgYHZhbHVlVG9DaGVja2AgaXMgc3RyaWN0bHkgZ3JlYXRlciB0aGFuICg+KSBgdmFsdWVUb0JlQWJvdmVgXG4gICAqXG4gICAqICAgICBhc3NlcnQuaXNBYm92ZSg1LCAyLCAnNSBpcyBzdHJpY3RseSBncmVhdGVyIHRoYW4gMicpO1xuICAgKlxuICAgKiBAbmFtZSBpc0Fib3ZlXG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlVG9DaGVja1xuICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVRvQmVBYm92ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuaXNBYm92ZSA9IGZ1bmN0aW9uICh2YWwsIGFidiwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8uYmUuYWJvdmUoYWJ2KTtcbiAgfTtcblxuICAgLyoqXG4gICAqICMjIyAuaXNBdExlYXN0KHZhbHVlVG9DaGVjaywgdmFsdWVUb0JlQXRMZWFzdCwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIGB2YWx1ZVRvQ2hlY2tgIGlzIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAoPj0pIGB2YWx1ZVRvQmVBdExlYXN0YFxuICAgKlxuICAgKiAgICAgYXNzZXJ0LmlzQXRMZWFzdCg1LCAyLCAnNSBpcyBncmVhdGVyIG9yIGVxdWFsIHRvIDInKTtcbiAgICogICAgIGFzc2VydC5pc0F0TGVhc3QoMywgMywgJzMgaXMgZ3JlYXRlciBvciBlcXVhbCB0byAzJyk7XG4gICAqXG4gICAqIEBuYW1lIGlzQXRMZWFzdFxuICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVRvQ2hlY2tcbiAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVUb0JlQXRMZWFzdFxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuaXNBdExlYXN0ID0gZnVuY3Rpb24gKHZhbCwgYXRsc3QsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLmJlLmxlYXN0KGF0bHN0KTtcbiAgfTtcblxuICAgLyoqXG4gICAqICMjIyAuaXNCZWxvdyh2YWx1ZVRvQ2hlY2ssIHZhbHVlVG9CZUJlbG93LCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgYHZhbHVlVG9DaGVja2AgaXMgc3RyaWN0bHkgbGVzcyB0aGFuICg8KSBgdmFsdWVUb0JlQmVsb3dgXG4gICAqXG4gICAqICAgICBhc3NlcnQuaXNCZWxvdygzLCA2LCAnMyBpcyBzdHJpY3RseSBsZXNzIHRoYW4gNicpO1xuICAgKlxuICAgKiBAbmFtZSBpc0JlbG93XG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlVG9DaGVja1xuICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVRvQmVCZWxvd1xuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuaXNCZWxvdyA9IGZ1bmN0aW9uICh2YWwsIGJsdywgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8uYmUuYmVsb3coYmx3KTtcbiAgfTtcblxuICAgLyoqXG4gICAqICMjIyAuaXNBdE1vc3QodmFsdWVUb0NoZWNrLCB2YWx1ZVRvQmVBdE1vc3QsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyBgdmFsdWVUb0NoZWNrYCBpcyBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gKDw9KSBgdmFsdWVUb0JlQXRNb3N0YFxuICAgKlxuICAgKiAgICAgYXNzZXJ0LmlzQXRNb3N0KDMsIDYsICczIGlzIGxlc3MgdGhhbiBvciBlcXVhbCB0byA2Jyk7XG4gICAqICAgICBhc3NlcnQuaXNBdE1vc3QoNCwgNCwgJzQgaXMgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIDQnKTtcbiAgICpcbiAgICogQG5hbWUgaXNBdE1vc3RcbiAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVUb0NoZWNrXG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlVG9CZUF0TW9zdFxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuaXNBdE1vc3QgPSBmdW5jdGlvbiAodmFsLCBhdG1zdCwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8uYmUubW9zdChhdG1zdCk7XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAuaXNUcnVlKHZhbHVlLCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBgdmFsdWVgIGlzIHRydWUuXG4gICAqXG4gICAqICAgICB2YXIgdGVhU2VydmVkID0gdHJ1ZTtcbiAgICogICAgIGFzc2VydC5pc1RydWUodGVhU2VydmVkLCAndGhlIHRlYSBoYXMgYmVlbiBzZXJ2ZWQnKTtcbiAgICpcbiAgICogQG5hbWUgaXNUcnVlXG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5pc1RydWUgPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS5pc1sndHJ1ZSddO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLmlzTm90VHJ1ZSh2YWx1ZSwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYHZhbHVlYCBpcyBub3QgdHJ1ZS5cbiAgICpcbiAgICogICAgIHZhciB0ZWEgPSAndGFzdHkgY2hhaSc7XG4gICAqICAgICBhc3NlcnQuaXNOb3RUcnVlKHRlYSwgJ2dyZWF0LCB0aW1lIGZvciB0ZWEhJyk7XG4gICAqXG4gICAqIEBuYW1lIGlzTm90VHJ1ZVxuICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuaXNOb3RUcnVlID0gZnVuY3Rpb24gKHZhbCwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8ubm90LmVxdWFsKHRydWUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLmlzRmFsc2UodmFsdWUsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAgaXMgZmFsc2UuXG4gICAqXG4gICAqICAgICB2YXIgdGVhU2VydmVkID0gZmFsc2U7XG4gICAqICAgICBhc3NlcnQuaXNGYWxzZSh0ZWFTZXJ2ZWQsICdubyB0ZWEgeWV0PyBobW0uLi4nKTtcbiAgICpcbiAgICogQG5hbWUgaXNGYWxzZVxuICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuaXNGYWxzZSA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLmlzWydmYWxzZSddO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLmlzTm90RmFsc2UodmFsdWUsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAgaXMgbm90IGZhbHNlLlxuICAgKlxuICAgKiAgICAgdmFyIHRlYSA9ICd0YXN0eSBjaGFpJztcbiAgICogICAgIGFzc2VydC5pc05vdEZhbHNlKHRlYSwgJ2dyZWF0LCB0aW1lIGZvciB0ZWEhJyk7XG4gICAqXG4gICAqIEBuYW1lIGlzTm90RmFsc2VcbiAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LmlzTm90RmFsc2UgPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5ub3QuZXF1YWwoZmFsc2UpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLmlzTnVsbCh2YWx1ZSwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYHZhbHVlYCBpcyBudWxsLlxuICAgKlxuICAgKiAgICAgYXNzZXJ0LmlzTnVsbChlcnIsICd0aGVyZSB3YXMgbm8gZXJyb3InKTtcbiAgICpcbiAgICogQG5hbWUgaXNOdWxsXG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5pc051bGwgPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5lcXVhbChudWxsKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5pc05vdE51bGwodmFsdWUsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAgaXMgbm90IG51bGwuXG4gICAqXG4gICAqICAgICB2YXIgdGVhID0gJ3Rhc3R5IGNoYWknO1xuICAgKiAgICAgYXNzZXJ0LmlzTm90TnVsbCh0ZWEsICdncmVhdCwgdGltZSBmb3IgdGVhIScpO1xuICAgKlxuICAgKiBAbmFtZSBpc05vdE51bGxcbiAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LmlzTm90TnVsbCA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLm5vdC5lcXVhbChudWxsKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5pc05hTlxuICAgKiBBc3NlcnRzIHRoYXQgdmFsdWUgaXMgTmFOXG4gICAqXG4gICAqICAgIGFzc2VydC5pc05hTignZm9vJywgJ2ZvbyBpcyBOYU4nKTtcbiAgICpcbiAgICogQG5hbWUgaXNOYU5cbiAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LmlzTmFOID0gZnVuY3Rpb24gKHZhbCwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8uYmUuTmFOO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLmlzTm90TmFOXG4gICAqIEFzc2VydHMgdGhhdCB2YWx1ZSBpcyBub3QgTmFOXG4gICAqXG4gICAqICAgIGFzc2VydC5pc05vdE5hTig0LCAnNCBpcyBub3QgTmFOJyk7XG4gICAqXG4gICAqIEBuYW1lIGlzTm90TmFOXG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuICBhc3NlcnQuaXNOb3ROYU4gPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS5ub3QudG8uYmUuTmFOO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLmlzVW5kZWZpbmVkKHZhbHVlLCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBgdmFsdWVgIGlzIGB1bmRlZmluZWRgLlxuICAgKlxuICAgKiAgICAgdmFyIHRlYTtcbiAgICogICAgIGFzc2VydC5pc1VuZGVmaW5lZCh0ZWEsICdubyB0ZWEgZGVmaW5lZCcpO1xuICAgKlxuICAgKiBAbmFtZSBpc1VuZGVmaW5lZFxuICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuaXNVbmRlZmluZWQgPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5lcXVhbCh1bmRlZmluZWQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLmlzRGVmaW5lZCh2YWx1ZSwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYHZhbHVlYCBpcyBub3QgYHVuZGVmaW5lZGAuXG4gICAqXG4gICAqICAgICB2YXIgdGVhID0gJ2N1cCBvZiBjaGFpJztcbiAgICogICAgIGFzc2VydC5pc0RlZmluZWQodGVhLCAndGVhIGhhcyBiZWVuIGRlZmluZWQnKTtcbiAgICpcbiAgICogQG5hbWUgaXNEZWZpbmVkXG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5pc0RlZmluZWQgPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5ub3QuZXF1YWwodW5kZWZpbmVkKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5pc0Z1bmN0aW9uKHZhbHVlLCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBgdmFsdWVgIGlzIGEgZnVuY3Rpb24uXG4gICAqXG4gICAqICAgICBmdW5jdGlvbiBzZXJ2ZVRlYSgpIHsgcmV0dXJuICdjdXAgb2YgdGVhJzsgfTtcbiAgICogICAgIGFzc2VydC5pc0Z1bmN0aW9uKHNlcnZlVGVhLCAnZ3JlYXQsIHdlIGNhbiBoYXZlIHRlYSBub3cnKTtcbiAgICpcbiAgICogQG5hbWUgaXNGdW5jdGlvblxuICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuaXNGdW5jdGlvbiA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLmJlLmEoJ2Z1bmN0aW9uJyk7XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAuaXNOb3RGdW5jdGlvbih2YWx1ZSwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYHZhbHVlYCBpcyBfbm90XyBhIGZ1bmN0aW9uLlxuICAgKlxuICAgKiAgICAgdmFyIHNlcnZlVGVhID0gWyAnaGVhdCcsICdwb3VyJywgJ3NpcCcgXTtcbiAgICogICAgIGFzc2VydC5pc05vdEZ1bmN0aW9uKHNlcnZlVGVhLCAnZ3JlYXQsIHdlIGhhdmUgbGlzdGVkIHRoZSBzdGVwcycpO1xuICAgKlxuICAgKiBAbmFtZSBpc05vdEZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5pc05vdEZ1bmN0aW9uID0gZnVuY3Rpb24gKHZhbCwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8ubm90LmJlLmEoJ2Z1bmN0aW9uJyk7XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAuaXNPYmplY3QodmFsdWUsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAgaXMgYW4gb2JqZWN0IChhcyByZXZlYWxlZCBieVxuICAgKiBgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ2ApLlxuICAgKlxuICAgKiAgICAgdmFyIHNlbGVjdGlvbiA9IHsgbmFtZTogJ0NoYWknLCBzZXJ2ZTogJ3dpdGggc3BpY2VzJyB9O1xuICAgKiAgICAgYXNzZXJ0LmlzT2JqZWN0KHNlbGVjdGlvbiwgJ3RlYSBzZWxlY3Rpb24gaXMgYW4gb2JqZWN0Jyk7XG4gICAqXG4gICAqIEBuYW1lIGlzT2JqZWN0XG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5pc09iamVjdCA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLmJlLmEoJ29iamVjdCcpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLmlzTm90T2JqZWN0KHZhbHVlLCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBgdmFsdWVgIGlzIF9ub3RfIGFuIG9iamVjdC5cbiAgICpcbiAgICogICAgIHZhciBzZWxlY3Rpb24gPSAnY2hhaSdcbiAgICogICAgIGFzc2VydC5pc05vdE9iamVjdChzZWxlY3Rpb24sICd0ZWEgc2VsZWN0aW9uIGlzIG5vdCBhbiBvYmplY3QnKTtcbiAgICogICAgIGFzc2VydC5pc05vdE9iamVjdChudWxsLCAnbnVsbCBpcyBub3QgYW4gb2JqZWN0Jyk7XG4gICAqXG4gICAqIEBuYW1lIGlzTm90T2JqZWN0XG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5pc05vdE9iamVjdCA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLm5vdC5iZS5hKCdvYmplY3QnKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5pc0FycmF5KHZhbHVlLCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBgdmFsdWVgIGlzIGFuIGFycmF5LlxuICAgKlxuICAgKiAgICAgdmFyIG1lbnUgPSBbICdncmVlbicsICdjaGFpJywgJ29vbG9uZycgXTtcbiAgICogICAgIGFzc2VydC5pc0FycmF5KG1lbnUsICd3aGF0IGtpbmQgb2YgdGVhIGRvIHdlIHdhbnQ/Jyk7XG4gICAqXG4gICAqIEBuYW1lIGlzQXJyYXlcbiAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LmlzQXJyYXkgPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5iZS5hbignYXJyYXknKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5pc05vdEFycmF5KHZhbHVlLCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBgdmFsdWVgIGlzIF9ub3RfIGFuIGFycmF5LlxuICAgKlxuICAgKiAgICAgdmFyIG1lbnUgPSAnZ3JlZW58Y2hhaXxvb2xvbmcnO1xuICAgKiAgICAgYXNzZXJ0LmlzTm90QXJyYXkobWVudSwgJ3doYXQga2luZCBvZiB0ZWEgZG8gd2Ugd2FudD8nKTtcbiAgICpcbiAgICogQG5hbWUgaXNOb3RBcnJheVxuICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuaXNOb3RBcnJheSA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLm5vdC5iZS5hbignYXJyYXknKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5pc1N0cmluZyh2YWx1ZSwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYHZhbHVlYCBpcyBhIHN0cmluZy5cbiAgICpcbiAgICogICAgIHZhciB0ZWFPcmRlciA9ICdjaGFpJztcbiAgICogICAgIGFzc2VydC5pc1N0cmluZyh0ZWFPcmRlciwgJ29yZGVyIHBsYWNlZCcpO1xuICAgKlxuICAgKiBAbmFtZSBpc1N0cmluZ1xuICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuaXNTdHJpbmcgPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5iZS5hKCdzdHJpbmcnKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5pc05vdFN0cmluZyh2YWx1ZSwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYHZhbHVlYCBpcyBfbm90XyBhIHN0cmluZy5cbiAgICpcbiAgICogICAgIHZhciB0ZWFPcmRlciA9IDQ7XG4gICAqICAgICBhc3NlcnQuaXNOb3RTdHJpbmcodGVhT3JkZXIsICdvcmRlciBwbGFjZWQnKTtcbiAgICpcbiAgICogQG5hbWUgaXNOb3RTdHJpbmdcbiAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LmlzTm90U3RyaW5nID0gZnVuY3Rpb24gKHZhbCwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8ubm90LmJlLmEoJ3N0cmluZycpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLmlzTnVtYmVyKHZhbHVlLCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBgdmFsdWVgIGlzIGEgbnVtYmVyLlxuICAgKlxuICAgKiAgICAgdmFyIGN1cHMgPSAyO1xuICAgKiAgICAgYXNzZXJ0LmlzTnVtYmVyKGN1cHMsICdob3cgbWFueSBjdXBzJyk7XG4gICAqXG4gICAqIEBuYW1lIGlzTnVtYmVyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB2YWx1ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuaXNOdW1iZXIgPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5iZS5hKCdudW1iZXInKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5pc05vdE51bWJlcih2YWx1ZSwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYHZhbHVlYCBpcyBfbm90XyBhIG51bWJlci5cbiAgICpcbiAgICogICAgIHZhciBjdXBzID0gJzIgY3VwcyBwbGVhc2UnO1xuICAgKiAgICAgYXNzZXJ0LmlzTm90TnVtYmVyKGN1cHMsICdob3cgbWFueSBjdXBzJyk7XG4gICAqXG4gICAqIEBuYW1lIGlzTm90TnVtYmVyXG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5pc05vdE51bWJlciA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLm5vdC5iZS5hKCdudW1iZXInKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5pc0Jvb2xlYW4odmFsdWUsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAgaXMgYSBib29sZWFuLlxuICAgKlxuICAgKiAgICAgdmFyIHRlYVJlYWR5ID0gdHJ1ZVxuICAgKiAgICAgICAsIHRlYVNlcnZlZCA9IGZhbHNlO1xuICAgKlxuICAgKiAgICAgYXNzZXJ0LmlzQm9vbGVhbih0ZWFSZWFkeSwgJ2lzIHRoZSB0ZWEgcmVhZHknKTtcbiAgICogICAgIGFzc2VydC5pc0Jvb2xlYW4odGVhU2VydmVkLCAnaGFzIHRlYSBiZWVuIHNlcnZlZCcpO1xuICAgKlxuICAgKiBAbmFtZSBpc0Jvb2xlYW5cbiAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LmlzQm9vbGVhbiA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLmJlLmEoJ2Jvb2xlYW4nKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5pc05vdEJvb2xlYW4odmFsdWUsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAgaXMgX25vdF8gYSBib29sZWFuLlxuICAgKlxuICAgKiAgICAgdmFyIHRlYVJlYWR5ID0gJ3llcCdcbiAgICogICAgICAgLCB0ZWFTZXJ2ZWQgPSAnbm9wZSc7XG4gICAqXG4gICAqICAgICBhc3NlcnQuaXNOb3RCb29sZWFuKHRlYVJlYWR5LCAnaXMgdGhlIHRlYSByZWFkeScpO1xuICAgKiAgICAgYXNzZXJ0LmlzTm90Qm9vbGVhbih0ZWFTZXJ2ZWQsICdoYXMgdGVhIGJlZW4gc2VydmVkJyk7XG4gICAqXG4gICAqIEBuYW1lIGlzTm90Qm9vbGVhblxuICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuaXNOb3RCb29sZWFuID0gZnVuY3Rpb24gKHZhbCwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8ubm90LmJlLmEoJ2Jvb2xlYW4nKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC50eXBlT2YodmFsdWUsIG5hbWUsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAncyB0eXBlIGlzIGBuYW1lYCwgYXMgZGV0ZXJtaW5lZCBieVxuICAgKiBgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ2AuXG4gICAqXG4gICAqICAgICBhc3NlcnQudHlwZU9mKHsgdGVhOiAnY2hhaScgfSwgJ29iamVjdCcsICd3ZSBoYXZlIGFuIG9iamVjdCcpO1xuICAgKiAgICAgYXNzZXJ0LnR5cGVPZihbJ2NoYWknLCAnamFzbWluZSddLCAnYXJyYXknLCAnd2UgaGF2ZSBhbiBhcnJheScpO1xuICAgKiAgICAgYXNzZXJ0LnR5cGVPZigndGVhJywgJ3N0cmluZycsICd3ZSBoYXZlIGEgc3RyaW5nJyk7XG4gICAqICAgICBhc3NlcnQudHlwZU9mKC90ZWEvLCAncmVnZXhwJywgJ3dlIGhhdmUgYSByZWd1bGFyIGV4cHJlc3Npb24nKTtcbiAgICogICAgIGFzc2VydC50eXBlT2YobnVsbCwgJ251bGwnLCAnd2UgaGF2ZSBhIG51bGwnKTtcbiAgICogICAgIGFzc2VydC50eXBlT2YodW5kZWZpbmVkLCAndW5kZWZpbmVkJywgJ3dlIGhhdmUgYW4gdW5kZWZpbmVkJyk7XG4gICAqXG4gICAqIEBuYW1lIHR5cGVPZlxuICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQudHlwZU9mID0gZnVuY3Rpb24gKHZhbCwgdHlwZSwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8uYmUuYSh0eXBlKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5ub3RUeXBlT2YodmFsdWUsIG5hbWUsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAncyB0eXBlIGlzIF9ub3RfIGBuYW1lYCwgYXMgZGV0ZXJtaW5lZCBieVxuICAgKiBgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ2AuXG4gICAqXG4gICAqICAgICBhc3NlcnQubm90VHlwZU9mKCd0ZWEnLCAnbnVtYmVyJywgJ3N0cmluZ3MgYXJlIG5vdCBudW1iZXJzJyk7XG4gICAqXG4gICAqIEBuYW1lIG5vdFR5cGVPZlxuICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZW9mIG5hbWVcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0Lm5vdFR5cGVPZiA9IGZ1bmN0aW9uICh2YWwsIHR5cGUsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLm5vdC5iZS5hKHR5cGUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLmluc3RhbmNlT2Yob2JqZWN0LCBjb25zdHJ1Y3RvciwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYHZhbHVlYCBpcyBhbiBpbnN0YW5jZSBvZiBgY29uc3RydWN0b3JgLlxuICAgKlxuICAgKiAgICAgdmFyIFRlYSA9IGZ1bmN0aW9uIChuYW1lKSB7IHRoaXMubmFtZSA9IG5hbWU7IH1cbiAgICogICAgICAgLCBjaGFpID0gbmV3IFRlYSgnY2hhaScpO1xuICAgKlxuICAgKiAgICAgYXNzZXJ0Lmluc3RhbmNlT2YoY2hhaSwgVGVhLCAnY2hhaSBpcyBhbiBpbnN0YW5jZSBvZiB0ZWEnKTtcbiAgICpcbiAgICogQG5hbWUgaW5zdGFuY2VPZlxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG4gICAqIEBwYXJhbSB7Q29uc3RydWN0b3J9IGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5pbnN0YW5jZU9mID0gZnVuY3Rpb24gKHZhbCwgdHlwZSwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8uYmUuaW5zdGFuY2VPZih0eXBlKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5ub3RJbnN0YW5jZU9mKG9iamVjdCwgY29uc3RydWN0b3IsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyBgdmFsdWVgIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiBgY29uc3RydWN0b3JgLlxuICAgKlxuICAgKiAgICAgdmFyIFRlYSA9IGZ1bmN0aW9uIChuYW1lKSB7IHRoaXMubmFtZSA9IG5hbWU7IH1cbiAgICogICAgICAgLCBjaGFpID0gbmV3IFN0cmluZygnY2hhaScpO1xuICAgKlxuICAgKiAgICAgYXNzZXJ0Lm5vdEluc3RhbmNlT2YoY2hhaSwgVGVhLCAnY2hhaSBpcyBub3QgYW4gaW5zdGFuY2Ugb2YgdGVhJyk7XG4gICAqXG4gICAqIEBuYW1lIG5vdEluc3RhbmNlT2ZcbiAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuICAgKiBAcGFyYW0ge0NvbnN0cnVjdG9yfSBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQubm90SW5zdGFuY2VPZiA9IGZ1bmN0aW9uICh2YWwsIHR5cGUsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLm5vdC5iZS5pbnN0YW5jZU9mKHR5cGUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLmluY2x1ZGUoaGF5c3RhY2ssIG5lZWRsZSwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYGhheXN0YWNrYCBpbmNsdWRlcyBgbmVlZGxlYC4gV29ya3NcbiAgICogZm9yIHN0cmluZ3MgYW5kIGFycmF5cy5cbiAgICpcbiAgICogICAgIGFzc2VydC5pbmNsdWRlKCdmb29iYXInLCAnYmFyJywgJ2Zvb2JhciBjb250YWlucyBzdHJpbmcgXCJiYXJcIicpO1xuICAgKiAgICAgYXNzZXJ0LmluY2x1ZGUoWyAxLCAyLCAzIF0sIDMsICdhcnJheSBjb250YWlucyB2YWx1ZScpO1xuICAgKlxuICAgKiBAbmFtZSBpbmNsdWRlXG4gICAqIEBwYXJhbSB7QXJyYXl8U3RyaW5nfSBoYXlzdGFja1xuICAgKiBAcGFyYW0ge01peGVkfSBuZWVkbGVcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LmluY2x1ZGUgPSBmdW5jdGlvbiAoZXhwLCBpbmMsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24oZXhwLCBtc2csIGFzc2VydC5pbmNsdWRlKS5pbmNsdWRlKGluYyk7XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAubm90SW5jbHVkZShoYXlzdGFjaywgbmVlZGxlLCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBgaGF5c3RhY2tgIGRvZXMgbm90IGluY2x1ZGUgYG5lZWRsZWAuIFdvcmtzXG4gICAqIGZvciBzdHJpbmdzIGFuZCBhcnJheXMuXG4gICAqXG4gICAqICAgICBhc3NlcnQubm90SW5jbHVkZSgnZm9vYmFyJywgJ2JheicsICdzdHJpbmcgbm90IGluY2x1ZGUgc3Vic3RyaW5nJyk7XG4gICAqICAgICBhc3NlcnQubm90SW5jbHVkZShbIDEsIDIsIDMgXSwgNCwgJ2FycmF5IG5vdCBpbmNsdWRlIGNvbnRhaW4gdmFsdWUnKTtcbiAgICpcbiAgICogQG5hbWUgbm90SW5jbHVkZVxuICAgKiBAcGFyYW0ge0FycmF5fFN0cmluZ30gaGF5c3RhY2tcbiAgICogQHBhcmFtIHtNaXhlZH0gbmVlZGxlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5ub3RJbmNsdWRlID0gZnVuY3Rpb24gKGV4cCwgaW5jLCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKGV4cCwgbXNnLCBhc3NlcnQubm90SW5jbHVkZSkubm90LmluY2x1ZGUoaW5jKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5tYXRjaCh2YWx1ZSwgcmVnZXhwLCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBgdmFsdWVgIG1hdGNoZXMgdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiBgcmVnZXhwYC5cbiAgICpcbiAgICogICAgIGFzc2VydC5tYXRjaCgnZm9vYmFyJywgL15mb28vLCAncmVnZXhwIG1hdGNoZXMnKTtcbiAgICpcbiAgICogQG5hbWUgbWF0Y2hcbiAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcbiAgICogQHBhcmFtIHtSZWdFeHB9IHJlZ2V4cFxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQubWF0Y2ggPSBmdW5jdGlvbiAoZXhwLCByZSwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbihleHAsIG1zZykudG8ubWF0Y2gocmUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLm5vdE1hdGNoKHZhbHVlLCByZWdleHAsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAgZG9lcyBub3QgbWF0Y2ggdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiBgcmVnZXhwYC5cbiAgICpcbiAgICogICAgIGFzc2VydC5ub3RNYXRjaCgnZm9vYmFyJywgL15mb28vLCAncmVnZXhwIGRvZXMgbm90IG1hdGNoJyk7XG4gICAqXG4gICAqIEBuYW1lIG5vdE1hdGNoXG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gICAqIEBwYXJhbSB7UmVnRXhwfSByZWdleHBcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0Lm5vdE1hdGNoID0gZnVuY3Rpb24gKGV4cCwgcmUsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24oZXhwLCBtc2cpLnRvLm5vdC5tYXRjaChyZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAucHJvcGVydHkob2JqZWN0LCBwcm9wZXJ0eSwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYG9iamVjdGAgaGFzIGEgcHJvcGVydHkgbmFtZWQgYnkgYHByb3BlcnR5YC5cbiAgICpcbiAgICogICAgIGFzc2VydC5wcm9wZXJ0eSh7IHRlYTogeyBncmVlbjogJ21hdGNoYScgfX0sICd0ZWEnKTtcbiAgICpcbiAgICogQG5hbWUgcHJvcGVydHlcbiAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHlcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LnByb3BlcnR5ID0gZnVuY3Rpb24gKG9iaiwgcHJvcCwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8uaGF2ZS5wcm9wZXJ0eShwcm9wKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5ub3RQcm9wZXJ0eShvYmplY3QsIHByb3BlcnR5LCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBgb2JqZWN0YCBkb2VzIF9ub3RfIGhhdmUgYSBwcm9wZXJ0eSBuYW1lZCBieSBgcHJvcGVydHlgLlxuICAgKlxuICAgKiAgICAgYXNzZXJ0Lm5vdFByb3BlcnR5KHsgdGVhOiB7IGdyZWVuOiAnbWF0Y2hhJyB9fSwgJ2NvZmZlZScpO1xuICAgKlxuICAgKiBAbmFtZSBub3RQcm9wZXJ0eVxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQubm90UHJvcGVydHkgPSBmdW5jdGlvbiAob2JqLCBwcm9wLCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKG9iaiwgbXNnKS50by5ub3QuaGF2ZS5wcm9wZXJ0eShwcm9wKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5kZWVwUHJvcGVydHkob2JqZWN0LCBwcm9wZXJ0eSwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYG9iamVjdGAgaGFzIGEgcHJvcGVydHkgbmFtZWQgYnkgYHByb3BlcnR5YCwgd2hpY2ggY2FuIGJlIGFcbiAgICogc3RyaW5nIHVzaW5nIGRvdC0gYW5kIGJyYWNrZXQtbm90YXRpb24gZm9yIGRlZXAgcmVmZXJlbmNlLlxuICAgKlxuICAgKiAgICAgYXNzZXJ0LmRlZXBQcm9wZXJ0eSh7IHRlYTogeyBncmVlbjogJ21hdGNoYScgfX0sICd0ZWEuZ3JlZW4nKTtcbiAgICpcbiAgICogQG5hbWUgZGVlcFByb3BlcnR5XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3RcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5kZWVwUHJvcGVydHkgPSBmdW5jdGlvbiAob2JqLCBwcm9wLCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKG9iaiwgbXNnKS50by5oYXZlLmRlZXAucHJvcGVydHkocHJvcCk7XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAubm90RGVlcFByb3BlcnR5KG9iamVjdCwgcHJvcGVydHksIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGBvYmplY3RgIGRvZXMgX25vdF8gaGF2ZSBhIHByb3BlcnR5IG5hbWVkIGJ5IGBwcm9wZXJ0eWAsIHdoaWNoXG4gICAqIGNhbiBiZSBhIHN0cmluZyB1c2luZyBkb3QtIGFuZCBicmFja2V0LW5vdGF0aW9uIGZvciBkZWVwIHJlZmVyZW5jZS5cbiAgICpcbiAgICogICAgIGFzc2VydC5ub3REZWVwUHJvcGVydHkoeyB0ZWE6IHsgZ3JlZW46ICdtYXRjaGEnIH19LCAndGVhLm9vbG9uZycpO1xuICAgKlxuICAgKiBAbmFtZSBub3REZWVwUHJvcGVydHlcbiAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHlcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0Lm5vdERlZXBQcm9wZXJ0eSA9IGZ1bmN0aW9uIChvYmosIHByb3AsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24ob2JqLCBtc2cpLnRvLm5vdC5oYXZlLmRlZXAucHJvcGVydHkocHJvcCk7XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAucHJvcGVydHlWYWwob2JqZWN0LCBwcm9wZXJ0eSwgdmFsdWUsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGBvYmplY3RgIGhhcyBhIHByb3BlcnR5IG5hbWVkIGJ5IGBwcm9wZXJ0eWAgd2l0aCB2YWx1ZSBnaXZlblxuICAgKiBieSBgdmFsdWVgLlxuICAgKlxuICAgKiAgICAgYXNzZXJ0LnByb3BlcnR5VmFsKHsgdGVhOiAnaXMgZ29vZCcgfSwgJ3RlYScsICdpcyBnb29kJyk7XG4gICAqXG4gICAqIEBuYW1lIHByb3BlcnR5VmFsXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3RcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5XG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5wcm9wZXJ0eVZhbCA9IGZ1bmN0aW9uIChvYmosIHByb3AsIHZhbCwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8uaGF2ZS5wcm9wZXJ0eShwcm9wLCB2YWwpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLnByb3BlcnR5Tm90VmFsKG9iamVjdCwgcHJvcGVydHksIHZhbHVlLCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBgb2JqZWN0YCBoYXMgYSBwcm9wZXJ0eSBuYW1lZCBieSBgcHJvcGVydHlgLCBidXQgd2l0aCBhIHZhbHVlXG4gICAqIGRpZmZlcmVudCBmcm9tIHRoYXQgZ2l2ZW4gYnkgYHZhbHVlYC5cbiAgICpcbiAgICogICAgIGFzc2VydC5wcm9wZXJ0eU5vdFZhbCh7IHRlYTogJ2lzIGdvb2QnIH0sICd0ZWEnLCAnaXMgYmFkJyk7XG4gICAqXG4gICAqIEBuYW1lIHByb3BlcnR5Tm90VmFsXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3RcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5XG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5wcm9wZXJ0eU5vdFZhbCA9IGZ1bmN0aW9uIChvYmosIHByb3AsIHZhbCwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8ubm90LmhhdmUucHJvcGVydHkocHJvcCwgdmFsKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5kZWVwUHJvcGVydHlWYWwob2JqZWN0LCBwcm9wZXJ0eSwgdmFsdWUsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGBvYmplY3RgIGhhcyBhIHByb3BlcnR5IG5hbWVkIGJ5IGBwcm9wZXJ0eWAgd2l0aCB2YWx1ZSBnaXZlblxuICAgKiBieSBgdmFsdWVgLiBgcHJvcGVydHlgIGNhbiB1c2UgZG90LSBhbmQgYnJhY2tldC1ub3RhdGlvbiBmb3IgZGVlcFxuICAgKiByZWZlcmVuY2UuXG4gICAqXG4gICAqICAgICBhc3NlcnQuZGVlcFByb3BlcnR5VmFsKHsgdGVhOiB7IGdyZWVuOiAnbWF0Y2hhJyB9fSwgJ3RlYS5ncmVlbicsICdtYXRjaGEnKTtcbiAgICpcbiAgICogQG5hbWUgZGVlcFByb3BlcnR5VmFsXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3RcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5XG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5kZWVwUHJvcGVydHlWYWwgPSBmdW5jdGlvbiAob2JqLCBwcm9wLCB2YWwsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24ob2JqLCBtc2cpLnRvLmhhdmUuZGVlcC5wcm9wZXJ0eShwcm9wLCB2YWwpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLmRlZXBQcm9wZXJ0eU5vdFZhbChvYmplY3QsIHByb3BlcnR5LCB2YWx1ZSwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYG9iamVjdGAgaGFzIGEgcHJvcGVydHkgbmFtZWQgYnkgYHByb3BlcnR5YCwgYnV0IHdpdGggYSB2YWx1ZVxuICAgKiBkaWZmZXJlbnQgZnJvbSB0aGF0IGdpdmVuIGJ5IGB2YWx1ZWAuIGBwcm9wZXJ0eWAgY2FuIHVzZSBkb3QtIGFuZFxuICAgKiBicmFja2V0LW5vdGF0aW9uIGZvciBkZWVwIHJlZmVyZW5jZS5cbiAgICpcbiAgICogICAgIGFzc2VydC5kZWVwUHJvcGVydHlOb3RWYWwoeyB0ZWE6IHsgZ3JlZW46ICdtYXRjaGEnIH19LCAndGVhLmdyZWVuJywgJ2tvbmFjaGEnKTtcbiAgICpcbiAgICogQG5hbWUgZGVlcFByb3BlcnR5Tm90VmFsXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3RcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5XG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5kZWVwUHJvcGVydHlOb3RWYWwgPSBmdW5jdGlvbiAob2JqLCBwcm9wLCB2YWwsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24ob2JqLCBtc2cpLnRvLm5vdC5oYXZlLmRlZXAucHJvcGVydHkocHJvcCwgdmFsKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5sZW5ndGhPZihvYmplY3QsIGxlbmd0aCwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYG9iamVjdGAgaGFzIGEgYGxlbmd0aGAgcHJvcGVydHkgd2l0aCB0aGUgZXhwZWN0ZWQgdmFsdWUuXG4gICAqXG4gICAqICAgICBhc3NlcnQubGVuZ3RoT2YoWzEsMiwzXSwgMywgJ2FycmF5IGhhcyBsZW5ndGggb2YgMycpO1xuICAgKiAgICAgYXNzZXJ0Lmxlbmd0aE9mKCdmb29iYXInLCA2LCAnc3RyaW5nIGhhcyBsZW5ndGggb2YgNicpO1xuICAgKlxuICAgKiBAbmFtZSBsZW5ndGhPZlxuICAgKiBAcGFyYW0ge01peGVkfSBvYmplY3RcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGxlbmd0aFxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQubGVuZ3RoT2YgPSBmdW5jdGlvbiAoZXhwLCBsZW4sIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24oZXhwLCBtc2cpLnRvLmhhdmUubGVuZ3RoKGxlbik7XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAudGhyb3dzKGZ1bmN0aW9uLCBbY29uc3RydWN0b3Ivc3RyaW5nL3JlZ2V4cF0sIFtzdHJpbmcvcmVnZXhwXSwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYGZ1bmN0aW9uYCB3aWxsIHRocm93IGFuIGVycm9yIHRoYXQgaXMgYW4gaW5zdGFuY2Ugb2ZcbiAgICogYGNvbnN0cnVjdG9yYCwgb3IgYWx0ZXJuYXRlbHkgdGhhdCBpdCB3aWxsIHRocm93IGFuIGVycm9yIHdpdGggbWVzc2FnZVxuICAgKiBtYXRjaGluZyBgcmVnZXhwYC5cbiAgICpcbiAgICogICAgIGFzc2VydC50aHJvd3MoZm4sICdmdW5jdGlvbiB0aHJvd3MgYSByZWZlcmVuY2UgZXJyb3InKTtcbiAgICogICAgIGFzc2VydC50aHJvd3MoZm4sIC9mdW5jdGlvbiB0aHJvd3MgYSByZWZlcmVuY2UgZXJyb3IvKTtcbiAgICogICAgIGFzc2VydC50aHJvd3MoZm4sIFJlZmVyZW5jZUVycm9yKTtcbiAgICogICAgIGFzc2VydC50aHJvd3MoZm4sIFJlZmVyZW5jZUVycm9yLCAnZnVuY3Rpb24gdGhyb3dzIGEgcmVmZXJlbmNlIGVycm9yJyk7XG4gICAqICAgICBhc3NlcnQudGhyb3dzKGZuLCBSZWZlcmVuY2VFcnJvciwgL2Z1bmN0aW9uIHRocm93cyBhIHJlZmVyZW5jZSBlcnJvci8pO1xuICAgKlxuICAgKiBAbmFtZSB0aHJvd3NcbiAgICogQGFsaWFzIHRocm93XG4gICAqIEBhbGlhcyBUaHJvd1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jdGlvblxuICAgKiBAcGFyYW0ge0Vycm9yQ29uc3RydWN0b3J9IGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSB7UmVnRXhwfSByZWdleHBcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9FcnJvciNFcnJvcl90eXBlc1xuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQudGhyb3dzID0gZnVuY3Rpb24gKGZuLCBlcnJ0LCBlcnJzLCBtc2cpIHtcbiAgICBpZiAoJ3N0cmluZycgPT09IHR5cGVvZiBlcnJ0IHx8IGVycnQgaW5zdGFuY2VvZiBSZWdFeHApIHtcbiAgICAgIGVycnMgPSBlcnJ0O1xuICAgICAgZXJydCA9IG51bGw7XG4gICAgfVxuXG4gICAgdmFyIGFzc2VydEVyciA9IG5ldyBBc3NlcnRpb24oZm4sIG1zZykudG8udGhyb3coZXJydCwgZXJycyk7XG4gICAgcmV0dXJuIGZsYWcoYXNzZXJ0RXJyLCAnb2JqZWN0Jyk7XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAuZG9lc05vdFRocm93KGZ1bmN0aW9uLCBbY29uc3RydWN0b3IvcmVnZXhwXSwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYGZ1bmN0aW9uYCB3aWxsIF9ub3RfIHRocm93IGFuIGVycm9yIHRoYXQgaXMgYW4gaW5zdGFuY2Ugb2ZcbiAgICogYGNvbnN0cnVjdG9yYCwgb3IgYWx0ZXJuYXRlbHkgdGhhdCBpdCB3aWxsIG5vdCB0aHJvdyBhbiBlcnJvciB3aXRoIG1lc3NhZ2VcbiAgICogbWF0Y2hpbmcgYHJlZ2V4cGAuXG4gICAqXG4gICAqICAgICBhc3NlcnQuZG9lc05vdFRocm93KGZuLCBFcnJvciwgJ2Z1bmN0aW9uIGRvZXMgbm90IHRocm93Jyk7XG4gICAqXG4gICAqIEBuYW1lIGRvZXNOb3RUaHJvd1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jdGlvblxuICAgKiBAcGFyYW0ge0Vycm9yQ29uc3RydWN0b3J9IGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSB7UmVnRXhwfSByZWdleHBcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9FcnJvciNFcnJvcl90eXBlc1xuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuZG9lc05vdFRocm93ID0gZnVuY3Rpb24gKGZuLCB0eXBlLCBtc2cpIHtcbiAgICBpZiAoJ3N0cmluZycgPT09IHR5cGVvZiB0eXBlKSB7XG4gICAgICBtc2cgPSB0eXBlO1xuICAgICAgdHlwZSA9IG51bGw7XG4gICAgfVxuXG4gICAgbmV3IEFzc2VydGlvbihmbiwgbXNnKS50by5ub3QuVGhyb3codHlwZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAub3BlcmF0b3IodmFsMSwgb3BlcmF0b3IsIHZhbDIsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQ29tcGFyZXMgdHdvIHZhbHVlcyB1c2luZyBgb3BlcmF0b3JgLlxuICAgKlxuICAgKiAgICAgYXNzZXJ0Lm9wZXJhdG9yKDEsICc8JywgMiwgJ2V2ZXJ5dGhpbmcgaXMgb2snKTtcbiAgICogICAgIGFzc2VydC5vcGVyYXRvcigxLCAnPicsIDIsICd0aGlzIHdpbGwgZmFpbCcpO1xuICAgKlxuICAgKiBAbmFtZSBvcGVyYXRvclxuICAgKiBAcGFyYW0ge01peGVkfSB2YWwxXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBvcGVyYXRvclxuICAgKiBAcGFyYW0ge01peGVkfSB2YWwyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5vcGVyYXRvciA9IGZ1bmN0aW9uICh2YWwsIG9wZXJhdG9yLCB2YWwyLCBtc2cpIHtcbiAgICB2YXIgb2s7XG4gICAgc3dpdGNoKG9wZXJhdG9yKSB7XG4gICAgICBjYXNlICc9PSc6XG4gICAgICAgIG9rID0gdmFsID09IHZhbDI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnPT09JzpcbiAgICAgICAgb2sgPSB2YWwgPT09IHZhbDI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnPic6XG4gICAgICAgIG9rID0gdmFsID4gdmFsMjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICc+PSc6XG4gICAgICAgIG9rID0gdmFsID49IHZhbDI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnPCc6XG4gICAgICAgIG9rID0gdmFsIDwgdmFsMjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICc8PSc6XG4gICAgICAgIG9rID0gdmFsIDw9IHZhbDI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnIT0nOlxuICAgICAgICBvayA9IHZhbCAhPSB2YWwyO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJyE9PSc6XG4gICAgICAgIG9rID0gdmFsICE9PSB2YWwyO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBvcGVyYXRvciBcIicgKyBvcGVyYXRvciArICdcIicpO1xuICAgIH1cbiAgICB2YXIgdGVzdCA9IG5ldyBBc3NlcnRpb24ob2ssIG1zZyk7XG4gICAgdGVzdC5hc3NlcnQoXG4gICAgICAgIHRydWUgPT09IGZsYWcodGVzdCwgJ29iamVjdCcpXG4gICAgICAsICdleHBlY3RlZCAnICsgdXRpbC5pbnNwZWN0KHZhbCkgKyAnIHRvIGJlICcgKyBvcGVyYXRvciArICcgJyArIHV0aWwuaW5zcGVjdCh2YWwyKVxuICAgICAgLCAnZXhwZWN0ZWQgJyArIHV0aWwuaW5zcGVjdCh2YWwpICsgJyB0byBub3QgYmUgJyArIG9wZXJhdG9yICsgJyAnICsgdXRpbC5pbnNwZWN0KHZhbDIpICk7XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAuY2xvc2VUbyhhY3R1YWwsIGV4cGVjdGVkLCBkZWx0YSwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBlcXVhbCBgZXhwZWN0ZWRgLCB0byB3aXRoaW4gYSArLy0gYGRlbHRhYCByYW5nZS5cbiAgICpcbiAgICogICAgIGFzc2VydC5jbG9zZVRvKDEuNSwgMSwgMC41LCAnbnVtYmVycyBhcmUgY2xvc2UnKTtcbiAgICpcbiAgICogQG5hbWUgY2xvc2VUb1xuICAgKiBAcGFyYW0ge051bWJlcn0gYWN0dWFsXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBleHBlY3RlZFxuICAgKiBAcGFyYW0ge051bWJlcn0gZGVsdGFcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LmNsb3NlVG8gPSBmdW5jdGlvbiAoYWN0LCBleHAsIGRlbHRhLCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKGFjdCwgbXNnKS50by5iZS5jbG9zZVRvKGV4cCwgZGVsdGEpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLmFwcHJveGltYXRlbHkoYWN0dWFsLCBleHBlY3RlZCwgZGVsdGEsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaXMgZXF1YWwgYGV4cGVjdGVkYCwgdG8gd2l0aGluIGEgKy8tIGBkZWx0YWAgcmFuZ2UuXG4gICAqXG4gICAqICAgICBhc3NlcnQuYXBwcm94aW1hdGVseSgxLjUsIDEsIDAuNSwgJ251bWJlcnMgYXJlIGNsb3NlJyk7XG4gICAqXG4gICAqIEBuYW1lIGFwcHJveGltYXRlbHlcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGFjdHVhbFxuICAgKiBAcGFyYW0ge051bWJlcn0gZXhwZWN0ZWRcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGRlbHRhXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5hcHByb3hpbWF0ZWx5ID0gZnVuY3Rpb24gKGFjdCwgZXhwLCBkZWx0YSwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbihhY3QsIG1zZykudG8uYmUuYXBwcm94aW1hdGVseShleHAsIGRlbHRhKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5zYW1lTWVtYmVycyhzZXQxLCBzZXQyLCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBgc2V0MWAgYW5kIGBzZXQyYCBoYXZlIHRoZSBzYW1lIG1lbWJlcnMuXG4gICAqIE9yZGVyIGlzIG5vdCB0YWtlbiBpbnRvIGFjY291bnQuXG4gICAqXG4gICAqICAgICBhc3NlcnQuc2FtZU1lbWJlcnMoWyAxLCAyLCAzIF0sIFsgMiwgMSwgMyBdLCAnc2FtZSBtZW1iZXJzJyk7XG4gICAqXG4gICAqIEBuYW1lIHNhbWVNZW1iZXJzXG4gICAqIEBwYXJhbSB7QXJyYXl9IHNldDFcbiAgICogQHBhcmFtIHtBcnJheX0gc2V0MlxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuc2FtZU1lbWJlcnMgPSBmdW5jdGlvbiAoc2V0MSwgc2V0MiwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbihzZXQxLCBtc2cpLnRvLmhhdmUuc2FtZS5tZW1iZXJzKHNldDIpO1xuICB9XG5cbiAgLyoqXG4gICAqICMjIyAuc2FtZURlZXBNZW1iZXJzKHNldDEsIHNldDIsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGBzZXQxYCBhbmQgYHNldDJgIGhhdmUgdGhlIHNhbWUgbWVtYmVycyAtIHVzaW5nIGEgZGVlcCBlcXVhbGl0eSBjaGVja2luZy5cbiAgICogT3JkZXIgaXMgbm90IHRha2VuIGludG8gYWNjb3VudC5cbiAgICpcbiAgICogICAgIGFzc2VydC5zYW1lRGVlcE1lbWJlcnMoWyB7YjogM30sIHthOiAyfSwge2M6IDV9IF0sIFsge2M6IDV9LCB7YjogM30sIHthOiAyfSBdLCAnc2FtZSBkZWVwIG1lbWJlcnMnKTtcbiAgICpcbiAgICogQG5hbWUgc2FtZURlZXBNZW1iZXJzXG4gICAqIEBwYXJhbSB7QXJyYXl9IHNldDFcbiAgICogQHBhcmFtIHtBcnJheX0gc2V0MlxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuc2FtZURlZXBNZW1iZXJzID0gZnVuY3Rpb24gKHNldDEsIHNldDIsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24oc2V0MSwgbXNnKS50by5oYXZlLnNhbWUuZGVlcC5tZW1iZXJzKHNldDIpO1xuICB9XG5cbiAgLyoqXG4gICAqICMjIyAuaW5jbHVkZU1lbWJlcnMoc3VwZXJzZXQsIHN1YnNldCwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYHN1YnNldGAgaXMgaW5jbHVkZWQgaW4gYHN1cGVyc2V0YC5cbiAgICogT3JkZXIgaXMgbm90IHRha2VuIGludG8gYWNjb3VudC5cbiAgICpcbiAgICogICAgIGFzc2VydC5pbmNsdWRlTWVtYmVycyhbIDEsIDIsIDMgXSwgWyAyLCAxIF0sICdpbmNsdWRlIG1lbWJlcnMnKTtcbiAgICpcbiAgICogQG5hbWUgaW5jbHVkZU1lbWJlcnNcbiAgICogQHBhcmFtIHtBcnJheX0gc3VwZXJzZXRcbiAgICogQHBhcmFtIHtBcnJheX0gc3Vic2V0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5pbmNsdWRlTWVtYmVycyA9IGZ1bmN0aW9uIChzdXBlcnNldCwgc3Vic2V0LCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKHN1cGVyc2V0LCBtc2cpLnRvLmluY2x1ZGUubWVtYmVycyhzdWJzZXQpO1xuICB9XG5cbiAgLyoqXG4gICAqICMjIyAub25lT2YoaW5MaXN0LCBsaXN0LCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBub24tb2JqZWN0LCBub24tYXJyYXkgdmFsdWUgYGluTGlzdGAgYXBwZWFycyBpbiB0aGUgZmxhdCBhcnJheSBgbGlzdGAuXG4gICAqXG4gICAqICAgICBhc3NlcnQub25lT2YoMSwgWyAyLCAxIF0sICdOb3QgZm91bmQgaW4gbGlzdCcpO1xuICAgKlxuICAgKiBAbmFtZSBvbmVPZlxuICAgKiBAcGFyYW0geyp9IGluTGlzdFxuICAgKiBAcGFyYW0ge0FycmF5PCo+fSBsaXN0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5vbmVPZiA9IGZ1bmN0aW9uIChpbkxpc3QsIGxpc3QsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24oaW5MaXN0LCBtc2cpLnRvLmJlLm9uZU9mKGxpc3QpO1xuICB9XG5cbiAgIC8qKlxuICAgKiAjIyMgLmNoYW5nZXMoZnVuY3Rpb24sIG9iamVjdCwgcHJvcGVydHkpXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBhIGZ1bmN0aW9uIGNoYW5nZXMgdGhlIHZhbHVlIG9mIGEgcHJvcGVydHlcbiAgICpcbiAgICogICAgIHZhciBvYmogPSB7IHZhbDogMTAgfTtcbiAgICogICAgIHZhciBmbiA9IGZ1bmN0aW9uKCkgeyBvYmoudmFsID0gMjIgfTtcbiAgICogICAgIGFzc2VydC5jaGFuZ2VzKGZuLCBvYmosICd2YWwnKTtcbiAgICpcbiAgICogQG5hbWUgY2hhbmdlc1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBtb2RpZmllciBmdW5jdGlvblxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eSBuYW1lXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LmNoYW5nZXMgPSBmdW5jdGlvbiAoZm4sIG9iaiwgcHJvcCkge1xuICAgIG5ldyBBc3NlcnRpb24oZm4pLnRvLmNoYW5nZShvYmosIHByb3ApO1xuICB9XG5cbiAgIC8qKlxuICAgKiAjIyMgLmRvZXNOb3RDaGFuZ2UoZnVuY3Rpb24sIG9iamVjdCwgcHJvcGVydHkpXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBhIGZ1bmN0aW9uIGRvZXMgbm90IGNoYW5nZXMgdGhlIHZhbHVlIG9mIGEgcHJvcGVydHlcbiAgICpcbiAgICogICAgIHZhciBvYmogPSB7IHZhbDogMTAgfTtcbiAgICogICAgIHZhciBmbiA9IGZ1bmN0aW9uKCkgeyBjb25zb2xlLmxvZygnZm9vJyk7IH07XG4gICAqICAgICBhc3NlcnQuZG9lc05vdENoYW5nZShmbiwgb2JqLCAndmFsJyk7XG4gICAqXG4gICAqIEBuYW1lIGRvZXNOb3RDaGFuZ2VcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbW9kaWZpZXIgZnVuY3Rpb25cbiAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHkgbmFtZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5kb2VzTm90Q2hhbmdlID0gZnVuY3Rpb24gKGZuLCBvYmosIHByb3ApIHtcbiAgICBuZXcgQXNzZXJ0aW9uKGZuKS50by5ub3QuY2hhbmdlKG9iaiwgcHJvcCk7XG4gIH1cblxuICAgLyoqXG4gICAqICMjIyAuaW5jcmVhc2VzKGZ1bmN0aW9uLCBvYmplY3QsIHByb3BlcnR5KVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYSBmdW5jdGlvbiBpbmNyZWFzZXMgYW4gb2JqZWN0IHByb3BlcnR5XG4gICAqXG4gICAqICAgICB2YXIgb2JqID0geyB2YWw6IDEwIH07XG4gICAqICAgICB2YXIgZm4gPSBmdW5jdGlvbigpIHsgb2JqLnZhbCA9IDEzIH07XG4gICAqICAgICBhc3NlcnQuaW5jcmVhc2VzKGZuLCBvYmosICd2YWwnKTtcbiAgICpcbiAgICogQG5hbWUgaW5jcmVhc2VzXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG1vZGlmaWVyIGZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3RcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5IG5hbWVcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuaW5jcmVhc2VzID0gZnVuY3Rpb24gKGZuLCBvYmosIHByb3ApIHtcbiAgICBuZXcgQXNzZXJ0aW9uKGZuKS50by5pbmNyZWFzZShvYmosIHByb3ApO1xuICB9XG5cbiAgIC8qKlxuICAgKiAjIyMgLmRvZXNOb3RJbmNyZWFzZShmdW5jdGlvbiwgb2JqZWN0LCBwcm9wZXJ0eSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGEgZnVuY3Rpb24gZG9lcyBub3QgaW5jcmVhc2Ugb2JqZWN0IHByb3BlcnR5XG4gICAqXG4gICAqICAgICB2YXIgb2JqID0geyB2YWw6IDEwIH07XG4gICAqICAgICB2YXIgZm4gPSBmdW5jdGlvbigpIHsgb2JqLnZhbCA9IDggfTtcbiAgICogICAgIGFzc2VydC5kb2VzTm90SW5jcmVhc2UoZm4sIG9iaiwgJ3ZhbCcpO1xuICAgKlxuICAgKiBAbmFtZSBkb2VzTm90SW5jcmVhc2VcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbW9kaWZpZXIgZnVuY3Rpb25cbiAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHkgbmFtZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5kb2VzTm90SW5jcmVhc2UgPSBmdW5jdGlvbiAoZm4sIG9iaiwgcHJvcCkge1xuICAgIG5ldyBBc3NlcnRpb24oZm4pLnRvLm5vdC5pbmNyZWFzZShvYmosIHByb3ApO1xuICB9XG5cbiAgIC8qKlxuICAgKiAjIyMgLmRlY3JlYXNlcyhmdW5jdGlvbiwgb2JqZWN0LCBwcm9wZXJ0eSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGEgZnVuY3Rpb24gZGVjcmVhc2VzIGFuIG9iamVjdCBwcm9wZXJ0eVxuICAgKlxuICAgKiAgICAgdmFyIG9iaiA9IHsgdmFsOiAxMCB9O1xuICAgKiAgICAgdmFyIGZuID0gZnVuY3Rpb24oKSB7IG9iai52YWwgPSA1IH07XG4gICAqICAgICBhc3NlcnQuZGVjcmVhc2VzKGZuLCBvYmosICd2YWwnKTtcbiAgICpcbiAgICogQG5hbWUgZGVjcmVhc2VzXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG1vZGlmaWVyIGZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3RcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5IG5hbWVcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuZGVjcmVhc2VzID0gZnVuY3Rpb24gKGZuLCBvYmosIHByb3ApIHtcbiAgICBuZXcgQXNzZXJ0aW9uKGZuKS50by5kZWNyZWFzZShvYmosIHByb3ApO1xuICB9XG5cbiAgIC8qKlxuICAgKiAjIyMgLmRvZXNOb3REZWNyZWFzZShmdW5jdGlvbiwgb2JqZWN0LCBwcm9wZXJ0eSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGEgZnVuY3Rpb24gZG9lcyBub3QgZGVjcmVhc2VzIGFuIG9iamVjdCBwcm9wZXJ0eVxuICAgKlxuICAgKiAgICAgdmFyIG9iaiA9IHsgdmFsOiAxMCB9O1xuICAgKiAgICAgdmFyIGZuID0gZnVuY3Rpb24oKSB7IG9iai52YWwgPSAxNSB9O1xuICAgKiAgICAgYXNzZXJ0LmRvZXNOb3REZWNyZWFzZShmbiwgb2JqLCAndmFsJyk7XG4gICAqXG4gICAqIEBuYW1lIGRvZXNOb3REZWNyZWFzZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBtb2RpZmllciBmdW5jdGlvblxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eSBuYW1lXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LmRvZXNOb3REZWNyZWFzZSA9IGZ1bmN0aW9uIChmbiwgb2JqLCBwcm9wKSB7XG4gICAgbmV3IEFzc2VydGlvbihmbikudG8ubm90LmRlY3JlYXNlKG9iaiwgcHJvcCk7XG4gIH1cblxuICAvKiFcbiAgICogIyMjIC5pZkVycm9yKG9iamVjdClcbiAgICpcbiAgICogQXNzZXJ0cyBpZiB2YWx1ZSBpcyBub3QgYSBmYWxzZSB2YWx1ZSwgYW5kIHRocm93cyBpZiBpdCBpcyBhIHRydWUgdmFsdWUuXG4gICAqIFRoaXMgaXMgYWRkZWQgdG8gYWxsb3cgZm9yIGNoYWkgdG8gYmUgYSBkcm9wLWluIHJlcGxhY2VtZW50IGZvciBOb2RlJ3NcbiAgICogYXNzZXJ0IGNsYXNzLlxuICAgKlxuICAgKiAgICAgdmFyIGVyciA9IG5ldyBFcnJvcignSSBhbSBhIGN1c3RvbSBlcnJvcicpO1xuICAgKiAgICAgYXNzZXJ0LmlmRXJyb3IoZXJyKTsgLy8gUmV0aHJvd3MgZXJyIVxuICAgKlxuICAgKiBAbmFtZSBpZkVycm9yXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3RcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LmlmRXJyb3IgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgaWYgKHZhbCkge1xuICAgICAgdGhyb3codmFsKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAuaXNFeHRlbnNpYmxlKG9iamVjdClcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGBvYmplY3RgIGlzIGV4dGVuc2libGUgKGNhbiBoYXZlIG5ldyBwcm9wZXJ0aWVzIGFkZGVkIHRvIGl0KS5cbiAgICpcbiAgICogICAgIGFzc2VydC5pc0V4dGVuc2libGUoe30pO1xuICAgKlxuICAgKiBAbmFtZSBpc0V4dGVuc2libGVcbiAgICogQGFsaWFzIGV4dGVuc2libGVcbiAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5pc0V4dGVuc2libGUgPSBmdW5jdGlvbiAob2JqLCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKG9iaiwgbXNnKS50by5iZS5leHRlbnNpYmxlO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLmlzTm90RXh0ZW5zaWJsZShvYmplY3QpXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBgb2JqZWN0YCBpcyBfbm90XyBleHRlbnNpYmxlLlxuICAgKlxuICAgKiAgICAgdmFyIG5vbkV4dGVuc2libGVPYmplY3QgPSBPYmplY3QucHJldmVudEV4dGVuc2lvbnMoe30pO1xuICAgKiAgICAgdmFyIHNlYWxlZE9iamVjdCA9IE9iamVjdC5zZWFsKHt9KTtcbiAgICogICAgIHZhciBmcm96ZW5PYmplY3QgPSBPYmplY3QuZnJlZXNlKHt9KTtcbiAgICpcbiAgICogICAgIGFzc2VydC5pc05vdEV4dGVuc2libGUobm9uRXh0ZW5zaWJsZU9iamVjdCk7XG4gICAqICAgICBhc3NlcnQuaXNOb3RFeHRlbnNpYmxlKHNlYWxlZE9iamVjdCk7XG4gICAqICAgICBhc3NlcnQuaXNOb3RFeHRlbnNpYmxlKGZyb3plbk9iamVjdCk7XG4gICAqXG4gICAqIEBuYW1lIGlzTm90RXh0ZW5zaWJsZVxuICAgKiBAYWxpYXMgbm90RXh0ZW5zaWJsZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LmlzTm90RXh0ZW5zaWJsZSA9IGZ1bmN0aW9uIChvYmosIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24ob2JqLCBtc2cpLnRvLm5vdC5iZS5leHRlbnNpYmxlO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLmlzU2VhbGVkKG9iamVjdClcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGBvYmplY3RgIGlzIHNlYWxlZCAoY2Fubm90IGhhdmUgbmV3IHByb3BlcnRpZXMgYWRkZWQgdG8gaXRcbiAgICogYW5kIGl0cyBleGlzdGluZyBwcm9wZXJ0aWVzIGNhbm5vdCBiZSByZW1vdmVkKS5cbiAgICpcbiAgICogICAgIHZhciBzZWFsZWRPYmplY3QgPSBPYmplY3Quc2VhbCh7fSk7XG4gICAqICAgICB2YXIgZnJvemVuT2JqZWN0ID0gT2JqZWN0LnNlYWwoe30pO1xuICAgKlxuICAgKiAgICAgYXNzZXJ0LmlzU2VhbGVkKHNlYWxlZE9iamVjdCk7XG4gICAqICAgICBhc3NlcnQuaXNTZWFsZWQoZnJvemVuT2JqZWN0KTtcbiAgICpcbiAgICogQG5hbWUgaXNTZWFsZWRcbiAgICogQGFsaWFzIHNlYWxlZFxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LmlzU2VhbGVkID0gZnVuY3Rpb24gKG9iaiwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8uYmUuc2VhbGVkO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLmlzTm90U2VhbGVkKG9iamVjdClcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGBvYmplY3RgIGlzIF9ub3RfIHNlYWxlZC5cbiAgICpcbiAgICogICAgIGFzc2VydC5pc05vdFNlYWxlZCh7fSk7XG4gICAqXG4gICAqIEBuYW1lIGlzTm90U2VhbGVkXG4gICAqIEBhbGlhcyBub3RTZWFsZWRcbiAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5pc05vdFNlYWxlZCA9IGZ1bmN0aW9uIChvYmosIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24ob2JqLCBtc2cpLnRvLm5vdC5iZS5zZWFsZWQ7XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAuaXNGcm96ZW4ob2JqZWN0KVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYG9iamVjdGAgaXMgZnJvemVuIChjYW5ub3QgaGF2ZSBuZXcgcHJvcGVydGllcyBhZGRlZCB0byBpdFxuICAgKiBhbmQgaXRzIGV4aXN0aW5nIHByb3BlcnRpZXMgY2Fubm90IGJlIG1vZGlmaWVkKS5cbiAgICpcbiAgICogICAgIHZhciBmcm96ZW5PYmplY3QgPSBPYmplY3QuZnJlZXplKHt9KTtcbiAgICogICAgIGFzc2VydC5mcm96ZW4oZnJvemVuT2JqZWN0KTtcbiAgICpcbiAgICogQG5hbWUgaXNGcm96ZW5cbiAgICogQGFsaWFzIGZyb3plblxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LmlzRnJvemVuID0gZnVuY3Rpb24gKG9iaiwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8uYmUuZnJvemVuO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLmlzTm90RnJvemVuKG9iamVjdClcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGBvYmplY3RgIGlzIF9ub3RfIGZyb3plbi5cbiAgICpcbiAgICogICAgIGFzc2VydC5pc05vdEZyb3plbih7fSk7XG4gICAqXG4gICAqIEBuYW1lIGlzTm90RnJvemVuXG4gICAqIEBhbGlhcyBub3RGcm96ZW5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5pc05vdEZyb3plbiA9IGZ1bmN0aW9uIChvYmosIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24ob2JqLCBtc2cpLnRvLm5vdC5iZS5mcm96ZW47XG4gIH07XG5cbiAgLyohXG4gICAqIEFsaWFzZXMuXG4gICAqL1xuXG4gIChmdW5jdGlvbiBhbGlhcyhuYW1lLCBhcyl7XG4gICAgYXNzZXJ0W2FzXSA9IGFzc2VydFtuYW1lXTtcbiAgICByZXR1cm4gYWxpYXM7XG4gIH0pXG4gICgnaXNPaycsICdvaycpXG4gICgnaXNOb3RPaycsICdub3RPaycpXG4gICgndGhyb3dzJywgJ3Rocm93JylcbiAgKCd0aHJvd3MnLCAnVGhyb3cnKVxuICAoJ2lzRXh0ZW5zaWJsZScsICdleHRlbnNpYmxlJylcbiAgKCdpc05vdEV4dGVuc2libGUnLCAnbm90RXh0ZW5zaWJsZScpXG4gICgnaXNTZWFsZWQnLCAnc2VhbGVkJylcbiAgKCdpc05vdFNlYWxlZCcsICdub3RTZWFsZWQnKVxuICAoJ2lzRnJvemVuJywgJ2Zyb3plbicpXG4gICgnaXNOb3RGcm96ZW4nLCAnbm90RnJvemVuJyk7XG59O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY2hhaS9saWIvY2hhaS9pbnRlcmZhY2UvYXNzZXJ0LmpzXG4gKiogbW9kdWxlIGlkID0gNDlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsImltcG9ydCB7IERFVl9IT1NULCBQUk9EX0hPU1QsIEFQSV9VUkwgfSBmcm9tICcuLi9zcmMvdmFycy5qcyc7XG5pbXBvcnQgeyBpc0RldiB9IGZyb20gJy4uL3NyYy91dGlscy5qcyc7XG5cbmV4cG9ydCB2YXIgQVBQX0lEID0gaXNEZXYoKSA/ICczM2IzNTYyYS1kMzNiLTQyZWUtODhiYy0xNDM2ZTc4MDMxMWYnIDogJzdiNjA1M2UwLTk5MTEtNDAwMy1hMGE0LWEzM2U0MTdhZDY2Myc7XG5leHBvcnQgdmFyIFBMQVlFUl9JRCA9IGlzRGV2KCkgPyAnYjM0ODE1NTctNTIxZC00ZDAxLWJlNzItYWNmMmMzZjQ2ZWZmJyA6ICcxNWIyMzUxMS1lMGNmLTQ4OWEtODY4Mi03Y2YxMjljYjQ1ODUnO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vdGVzdC92YXJzLmpzXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2xpYi90eXBlJyk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi90eXBlLWRldGVjdC9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDE2XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9